{"version":3,"sources":["../src/index.ts","../src/hooks/useAuth.ts","../src/hooks/useAuthErrorHandler.ts","../src/hooks/useCanPerform.ts","../src/hooks/useSubscriptionStatusInfo.ts","../src/hooks/useCurrency.tsx","../src/utils/useDedupedApi.ts","../src/hooks/useCustomersData.ts","../src/hooks/useMerchantsData.ts","../src/hooks/useOrdersData.ts","../src/hooks/usePagination.ts","../src/hooks/usePaymentsData.ts","../src/hooks/usePlansData.ts","../src/hooks/useProductAvailability.ts","../src/hooks/useProductsData.ts","../src/hooks/useSubscriptionsData.ts","../src/hooks/useSubscriptionError.ts","../src/hooks/useThrottledSearch.ts","../src/hooks/useToast.ts","../src/hooks/useUserRole.ts","../src/hooks/useUsersData.ts","../src/hooks/useOptimisticNavigation.ts","../src/hooks/useFiltersData.ts"],"sourcesContent":["// ============================================================================\n// HOOKS PACKAGE - Main Exports\n// ============================================================================\n\n// Export all business logic hooks\nexport * from './hooks/useAuth';\nexport * from './hooks/useAuthErrorHandler';\nexport * from './hooks/useCanPerform';\nexport * from './hooks/useCurrency';\nexport * from './hooks/useCustomersData';\nexport * from './hooks/useMerchantsData';\nexport * from './hooks/useOrdersData';\nexport * from './hooks/usePagination';\nexport * from './hooks/usePaymentsData';\nexport * from './hooks/usePlansData';\nexport * from './hooks/useProductAvailability';\nexport * from './hooks/useProductsData';\nexport * from './hooks/useSubscriptionsData';\nexport * from './hooks/useSubscriptionError';\nexport * from './hooks/useSubscriptionStatusInfo';\nexport * from './hooks/useThrottledSearch';\nexport * from './hooks/useToast';\nexport * from './hooks/useUserRole';\nexport * from './hooks/useUsersData';\nexport * from './hooks/useOptimisticNavigation';\n\n// Modern API utilities\nexport * from './utils/useDedupedApi';\n\n// Modern filter data hooks\nexport * from './hooks/useFiltersData';\n","'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { getAuthToken, getStoredUser, clearAuthData, storeAuthData } from '@rentalshop/utils';\nimport type { User } from '@rentalshop/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface AuthState {\n  user: User | null;\n  loading: boolean;\n  error: string | null;\n}\n\nexport interface LoginResponse {\n  success: boolean;\n  data: {\n    token: string;\n    user: User;\n  };\n  message?: string;\n}\n\n// ============================================================================\n// USE AUTH HOOK - SIMPLE & MODERN\n// ============================================================================\n\n/**\n * ✅ SIMPLE AUTH HOOK\n * - No infinite loops\n * - No complex logic\n * - Just works\n */\nexport function useAuth() {\n  const [state, setState] = useState<AuthState>({\n    user: null,\n    loading: true,\n    error: null,\n  });\n\n  // ============================================================================\n  // AUTH FUNCTIONS\n  // ============================================================================\n\n  const login = useCallback(async (email: string, password: string): Promise<boolean> => {\n    try {\n      setState(prev => ({ ...prev, loading: true }));\n\n      const { apiUrls } = await import('@rentalshop/utils');\n      const response = await fetch(apiUrls.auth.login, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      if (response.status === 402) {\n        const errorData = await response.json();\n        setState(prev => ({ \n          ...prev, \n          error: errorData.message || 'Subscription issue detected',\n          loading: false \n        }));\n        return false;\n      }\n\n      if (response.status === 401) {\n        const errorData = await response.json();\n        setState(prev => ({ \n          ...prev, \n          error: errorData.message || 'Invalid credentials',\n          loading: false \n        }));\n        return false;\n      }\n\n      const data: LoginResponse = await response.json();\n\n      if (data.success && data.data?.token) {\n        storeAuthData(data.data.token, data.data.user);\n        setState(prev => ({ \n          ...prev, \n          user: data.data.user, \n          loading: false \n        }));\n        return true;\n      } else {\n        setState(prev => ({ \n          ...prev, \n          error: data.message || 'Login failed',\n          loading: false \n        }));\n        return false;\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Login failed';\n      setState(prev => ({ \n        ...prev, \n        error: errorMessage,\n        loading: false \n      }));\n      return false;\n    }\n  }, []);\n\n  const logout = useCallback(() => {\n    clearAuthData();\n    setState({\n      user: null,\n      loading: false,\n      error: null,\n    });\n  }, []);\n\n  const clearError = useCallback(() => {\n    setState(prev => ({ ...prev, error: null }));\n  }, []);\n\n  const refreshUser = useCallback(async () => {\n    try {\n      const token = getAuthToken();\n      if (!token) {\n        setState(prev => ({ ...prev, user: null, loading: false }));\n        return;\n      }\n\n      const { apiUrls, authenticatedFetch } = await import('@rentalshop/utils');\n      const response = await authenticatedFetch(apiUrls.settings.user);\n\n      if (response.ok) {\n        const data = await response.json();\n        \n        if (data.success && data.data) {\n          // Save to localStorage\n          localStorage.setItem('user', JSON.stringify(data.data));\n          \n          setState(prev => ({ \n            ...prev, \n            user: data.data,\n            loading: false \n          }));\n        }\n      } else if (response.status === 401) {\n        logout();\n        if (typeof window !== 'undefined') {\n          window.location.href = '/login';\n        }\n      }\n    } catch (err) {\n      console.error('Error refreshing user:', err);\n      setState(prev => ({ ...prev, loading: false }));\n    }\n  }, [logout]);\n\n  // ============================================================================\n  // INITIALIZATION - Simple & Clean\n  // ============================================================================\n\n  useEffect(() => {\n    const token = getAuthToken();\n    const storedUser = getStoredUser();\n\n    if (token && storedUser) {\n      // ✅ SIMPLE: Just use stored user, no validation needed\n      setState(prev => ({ \n        ...prev, \n        user: storedUser as User, \n        loading: false \n      }));\n    } else {\n      setState(prev => ({ ...prev, user: null, loading: false }));\n    }\n  }, []); // Run once on mount\n\n  // ============================================================================\n  // RETURN VALUES\n  // ============================================================================\n\n  return {\n    user: state.user,\n    loading: state.loading,\n    error: state.error,\n    login,\n    logout,\n    refreshUser,\n    clearError,\n  };\n}\n","import { useCallback } from 'react';\nimport { clearAuthData } from '@rentalshop/utils';\n\n/**\n * Custom hook for handling authentication errors\n * Automatically logs out user and redirects to login on auth failures\n */\nexport const useAuthErrorHandler = () => {\n  const handleAuthError = useCallback((error: any) => {\n    console.error('Authentication error detected:', error);\n    \n    // Check if it's an authentication-related error\n    if (\n      error?.message?.includes('Authentication required') ||\n      error?.message?.includes('Unauthorized') ||\n      error?.message?.includes('Invalid token') ||\n      error?.message?.includes('Token expired') ||\n      error?.status === 401\n    ) {\n      console.log('🔄 Authentication error detected, logging out user');\n      \n      // Clear auth data using centralized function\n      clearAuthData();\n      \n      // Redirect to login\n      if (typeof window !== 'undefined') {\n        // window.location.href = '/login';\n      }\n    }\n  }, []);\n\n  return { handleAuthError };\n};\n","\"use client\"\n\nimport { useCallback } from 'react';\nimport { useAuth } from './useAuth';\nimport { useSubscriptionStatusInfo } from './useSubscriptionStatusInfo';\n\n// ============================================================================\n// CAN PERFORM ACTION HOOK\n// ============================================================================\n\nexport type ActionType = \n  | 'create_order'\n  | 'edit_order'\n  | 'delete_order'\n  | 'create_customer'\n  | 'edit_customer'\n  | 'delete_customer'\n  | 'create_product'\n  | 'edit_product'\n  | 'delete_product'\n  | 'view_analytics'\n  | 'manage_users'\n  | 'manage_settings'\n  | 'export_data'\n  | 'bulk_operations'\n  | string; // Allow custom actions\n\nexport interface ActionPermission {\n  action: ActionType;\n  requiresSubscription?: boolean;\n  requiredFeatures?: string[];\n  requiredRole?: string[];\n  customCheck?: (user: any, subscription: any) => boolean;\n}\n\nexport function useCanPerform(action: ActionType): boolean {\n  const { user } = useAuth();\n  const { hasActiveSubscription, isExpired, canAccessFeature } = useSubscriptionStatusInfo();\n\n  const checkPermission = useCallback((action: ActionType): boolean => {\n    // If no user, deny all actions\n    if (!user) {\n      return false;\n    }\n\n    // Define action permissions\n    const actionPermissions: Record<ActionType, ActionPermission> = {\n      // Order actions\n      'create_order': {\n        action: 'create_order',\n        requiresSubscription: true,\n        requiredFeatures: ['orders']\n      },\n      'edit_order': {\n        action: 'edit_order',\n        requiresSubscription: true,\n        requiredFeatures: ['orders']\n      },\n      'delete_order': {\n        action: 'delete_order',\n        requiresSubscription: true,\n        requiredFeatures: ['orders']\n      },\n      \n      // Customer actions\n      'create_customer': {\n        action: 'create_customer',\n        requiresSubscription: true,\n        requiredFeatures: ['customers']\n      },\n      'edit_customer': {\n        action: 'edit_customer',\n        requiresSubscription: true,\n        requiredFeatures: ['customers']\n      },\n      'delete_customer': {\n        action: 'delete_customer',\n        requiresSubscription: true,\n        requiredFeatures: ['customers']\n      },\n      \n      // Product actions\n      'create_product': {\n        action: 'create_product',\n        requiresSubscription: true,\n        requiredFeatures: ['products']\n      },\n      'edit_product': {\n        action: 'edit_product',\n        requiresSubscription: true,\n        requiredFeatures: ['products']\n      },\n      'delete_product': {\n        action: 'delete_product',\n        requiresSubscription: true,\n        requiredFeatures: ['products']\n      },\n      \n      // Analytics and reporting\n      'view_analytics': {\n        action: 'view_analytics',\n        requiresSubscription: true,\n        requiredFeatures: ['analytics']\n      },\n      'export_data': {\n        action: 'export_data',\n        requiresSubscription: true,\n        requiredFeatures: ['analytics', 'export']\n      },\n      \n      // User management\n      'manage_users': {\n        action: 'manage_users',\n        requiresSubscription: true,\n        requiredRole: ['ADMIN', 'MERCHANT', 'OUTLET_ADMIN']\n      },\n      \n      // Settings\n      'manage_settings': {\n        action: 'manage_settings',\n        requiresSubscription: true,\n        requiredRole: ['ADMIN', 'MERCHANT']\n      },\n      \n      // Bulk operations\n      'bulk_operations': {\n        action: 'bulk_operations',\n        requiresSubscription: true,\n        requiredFeatures: ['bulk_operations']\n      }\n    };\n\n    const permission = actionPermissions[action];\n    \n    // If no specific permission defined, allow for now (backward compatibility)\n    if (!permission) {\n      return true;\n    }\n\n    // Check subscription requirements\n    if (permission.requiresSubscription) {\n      if (!hasActiveSubscription || isExpired) {\n        return false;\n      }\n    }\n\n    // Check required features\n    if (permission.requiredFeatures) {\n      for (const feature of permission.requiredFeatures) {\n        if (!canAccessFeature(feature)) {\n          return false;\n        }\n      }\n    }\n\n    // Check required roles\n    if (permission.requiredRole) {\n      if (!permission.requiredRole.includes(user.role)) {\n        return false;\n      }\n    }\n\n    // Custom check\n    if (permission.customCheck) {\n      return permission.customCheck(user, { hasActiveSubscription, isExpired });\n    }\n\n    return true;\n  }, [user, hasActiveSubscription, isExpired, canAccessFeature]);\n\n  return checkPermission(action);\n}\n","\"use client\"\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from './useAuth';\n\n// ============================================================================\n// SUBSCRIPTION STATUS INFO HOOK\n// ============================================================================\n\nexport interface SubscriptionStatusInfo {\n  // Original interface\n  loading: boolean;\n  hasActiveSubscription: boolean;\n  isExpired: boolean;\n  isExpiringSoon: boolean;\n  daysUntilExpiry: number | null;\n  subscriptionType: string | null;\n  canAccessFeature: (feature: string) => boolean;\n  refreshStatus: () => Promise<void>;\n  \n  // Extended interface for UI components\n  hasSubscription: boolean;\n  subscription: any;\n  status: string;\n  isTrial: boolean;\n  isActive: boolean;\n  planName: string;\n  error: string | null;\n  \n  // Additional properties for other components\n  statusMessage: string;\n  statusColor: string;\n  hasAccess: boolean;\n  accessLevel: string;\n  requiresPayment: boolean;\n  upgradeRequired: boolean;\n  gracePeriodEnds: Date | null;\n  canExportData: boolean;\n  isRestricted: boolean;\n  isReadOnly: boolean;\n  isLimited: boolean;\n  isDenied: boolean;\n}\n\nexport interface UseSubscriptionStatusInfoOptions {\n  checkInterval?: number; // Check interval in milliseconds (default: 5 minutes)\n}\n\nexport function useSubscriptionStatusInfo(\n  options: UseSubscriptionStatusInfoOptions = {}\n): SubscriptionStatusInfo {\n  const { checkInterval = 5 * 60 * 1000 } = options; // Default 5 minutes\n  const { user } = useAuth();\n  \n  const [loading, setLoading] = useState(true);\n  const [hasActiveSubscription, setHasActiveSubscription] = useState(false);\n  const [isExpired, setIsExpired] = useState(false);\n  const [isExpiringSoon, setIsExpiringSoon] = useState(false);\n  const [daysUntilExpiry, setDaysUntilExpiry] = useState<number | null>(null);\n  const [subscriptionType, setSubscriptionType] = useState<string | null>(null);\n  \n  // Extended state for UI components\n  const [hasSubscription, setHasSubscription] = useState(false);\n  const [subscription, setSubscription] = useState<any>(null);\n  const [status, setStatus] = useState<string>('');\n  const [isTrial, setIsTrial] = useState(false);\n  const [isActive, setIsActive] = useState(false);\n  const [planName, setPlanName] = useState<string>('');\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch subscription status from API\n  const fetchSubscriptionStatus = useCallback(async () => {\n    if (!user) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      // Import subscriptionsApi dynamically to avoid circular dependencies\n      const { subscriptionsApi } = await import('@rentalshop/utils');\n      const response = await subscriptionsApi.getCurrentUserSubscriptionStatus();\n      \n      if (response.success && response.data) {\n        const data = response.data;\n        \n        // ============================================================================\n        // MAP NEW FLAT RESPONSE STRUCTURE\n        // ============================================================================\n        // Response structure:\n        // {\n        //   status: \"CANCELED\" | \"EXPIRED\" | \"PAST_DUE\" | \"PAUSED\" | \"TRIAL\" | \"ACTIVE\",\n        //   statusReason: \"Canceled on 10/7/2025\",\n        //   hasAccess: false,\n        //   daysRemaining: 31,\n        //   isExpiringSoon: false,\n        //   planName: \"Basic\",\n        //   ...other flat fields\n        // }\n        \n        // Map computed status flags from API\n        const computedStatus = data.status || 'UNKNOWN'; // CANCELED | EXPIRED | PAST_DUE | PAUSED | TRIAL | ACTIVE\n        const apiHasAccess = data.hasAccess ?? false;\n        const apiDaysRemaining = data.daysRemaining ?? null;\n        const apiIsExpiringSoon = data.isExpiringSoon ?? false;\n        \n        // Derive boolean flags from computed status\n        const isActive = computedStatus === 'ACTIVE';\n        const isExpired = computedStatus === 'EXPIRED';\n        const isTrial = computedStatus === 'TRIAL';\n        const isCanceled = computedStatus === 'CANCELED';\n        const isPastDue = computedStatus === 'PAST_DUE';\n        const isPaused = computedStatus === 'PAUSED';\n        \n        // Determine if subscription is active for access (ACTIVE or TRIAL)\n        const hasActive = apiHasAccess; // API already calculated this\n        \n        // Set original state (for backward compatibility)\n        setHasActiveSubscription(hasActive);\n        setIsExpired(isExpired);\n        setIsExpiringSoon(apiIsExpiringSoon);\n        setDaysUntilExpiry(apiDaysRemaining);\n        setSubscriptionType(data.planName || computedStatus);\n        \n        // Set extended state for UI components\n        setHasSubscription(true);\n        setSubscription(data); // Store full response data\n        setStatus(computedStatus);\n        setIsTrial(isTrial);\n        setIsActive(isActive);\n        setPlanName(data.planName || 'Unknown Plan');\n        setError(null);\n        \n        console.log('✅ Subscription status mapped:', {\n          computedStatus,\n          hasAccess: apiHasAccess,\n          daysRemaining: apiDaysRemaining,\n          isExpiringSoon: apiIsExpiringSoon,\n          statusReason: data.statusReason\n        });\n        \n      } else {\n        // No subscription found\n        setHasActiveSubscription(false);\n        setIsExpired(true);\n        setIsExpiringSoon(false);\n        setDaysUntilExpiry(null);\n        setSubscriptionType(null);\n        \n        // Set extended state for UI components\n        setHasSubscription(false);\n        setSubscription(null);\n        setStatus('NO_SUBSCRIPTION');\n        setIsTrial(false);\n        setIsActive(false);\n        setPlanName('');\n        setError('No subscription found');\n      }\n      \n    } catch (error) {\n      console.error('Error fetching subscription status:', error);\n      setHasActiveSubscription(false);\n      setIsExpired(true);\n      setIsExpiringSoon(false);\n      setDaysUntilExpiry(null);\n      setSubscriptionType(null);\n      \n      // Set extended state for UI components\n      setHasSubscription(false);\n      setSubscription(null);\n      setStatus('ERROR');\n      setIsTrial(false);\n      setIsActive(false);\n      setPlanName('');\n      setError(error instanceof Error ? error.message : 'Failed to fetch subscription');\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n\n  // Check if user can access a specific feature\n  const canAccessFeature = useCallback((feature: string): boolean => {\n    if (!hasActiveSubscription || isExpired) {\n      return false;\n    }\n    \n    // TODO: Replace with actual feature checking logic\n    // For now, allow all features if subscription is active\n    return true;\n  }, [hasActiveSubscription, isExpired]);\n\n  // Refresh subscription status\n  const refreshStatus = useCallback(async () => {\n    await fetchSubscriptionStatus();\n  }, [fetchSubscriptionStatus]);\n\n  // Initial fetch\n  useEffect(() => {\n    fetchSubscriptionStatus();\n  }, [fetchSubscriptionStatus]);\n\n  // Set up interval for periodic checks\n  useEffect(() => {\n    if (!user) return;\n\n    const interval = setInterval(fetchSubscriptionStatus, checkInterval);\n    return () => clearInterval(interval);\n  }, [user, fetchSubscriptionStatus, checkInterval]);\n\n  // Calculate additional properties for other components\n  // Use subscription.statusReason if available (from API), otherwise fallback to computed message\n  const statusMessage = subscription?.statusReason || \n                       (isExpired ? 'Subscription expired' : \n                        isExpiringSoon ? `Expires in ${daysUntilExpiry} days` :\n                        isTrial ? `Trial (${daysUntilExpiry} days left)` :\n                        isActive ? 'Active subscription' : 'No subscription');\n  \n  // Map status to color\n  const statusColor = status === 'EXPIRED' ? 'red' :\n                     status === 'CANCELED' ? 'red' :\n                     status === 'PAST_DUE' ? 'orange' :\n                     status === 'PAUSED' ? 'yellow' :\n                     isExpiringSoon ? 'orange' :\n                     status === 'TRIAL' ? 'yellow' :\n                     status === 'ACTIVE' ? 'green' : 'gray';\n  \n  // Use hasAccess from API (already calculated there)\n  const hasAccess = subscription?.hasAccess ?? (hasActiveSubscription && !isExpired);\n  \n  const accessLevel = status === 'EXPIRED' || status === 'CANCELED' ? 'denied' : \n                     status === 'PAST_DUE' ? 'readonly' :\n                     status === 'PAUSED' ? 'readonly' :\n                     status === 'TRIAL' ? 'limited' :\n                     status === 'ACTIVE' ? 'full' : 'denied';\n  \n  const requiresPayment = status === 'EXPIRED' || status === 'PAST_DUE' || isExpiringSoon;\n  const upgradeRequired = status === 'EXPIRED' || status === 'CANCELED';\n  const gracePeriodEnds = isExpiringSoon && daysUntilExpiry ? new Date(Date.now() + daysUntilExpiry * 24 * 60 * 60 * 1000) : null;\n  const canExportData = hasAccess;\n  const isRestricted = !hasAccess || status === 'TRIAL' || status === 'PAUSED';\n  const isReadOnly = status === 'EXPIRED' || status === 'PAST_DUE' || status === 'PAUSED';\n  const isLimited = status === 'TRIAL';\n  const isDenied = status === 'EXPIRED' || status === 'CANCELED' || !hasActiveSubscription;\n\n  return {\n    // Original interface\n    loading,\n    hasActiveSubscription,\n    isExpired,\n    isExpiringSoon,\n    daysUntilExpiry,\n    subscriptionType,\n    canAccessFeature,\n    refreshStatus,\n    \n    // Extended interface for UI components\n    hasSubscription,\n    subscription,\n    status,\n    isTrial,\n    isActive,\n    planName,\n    error,\n    \n    // Additional properties for other components\n    statusMessage,\n    statusColor,\n    hasAccess,\n    accessLevel,\n    requiresPayment,\n    upgradeRequired,\n    gracePeriodEnds,\n    canExportData,\n    isRestricted,\n    isReadOnly,\n    isLimited,\n    isDenied\n  };\n}\n","'use client';\n\n// ============================================================================\n// CURRENCY HOOK\n// ============================================================================\n\nimport { createContext, useContext, useState, useCallback, useEffect, ReactNode } from 'react';\nimport { \n  CurrencyCode, \n  CurrencySettings, \n  Currency \n} from '@rentalshop/types';\nimport { \n  DEFAULT_CURRENCY_SETTINGS, \n  getCurrency, \n  getCurrentCurrency \n} from '@rentalshop/utils';\n\n// ============================================================================\n// CURRENCY CONTEXT\n// ============================================================================\n\ninterface CurrencyContextType {\n  /** Current currency settings */\n  settings: CurrencySettings;\n  /** Current currency configuration */\n  currentCurrency: Currency;\n  /** Change the current currency */\n  setCurrency: (currency: CurrencyCode) => void;\n  /** Toggle currency symbol visibility */\n  toggleSymbol: () => void;\n  /** Toggle currency code visibility */\n  toggleCode: () => void;\n  /** Get currency by code */\n  getCurrencyByCode: (code: CurrencyCode) => Currency | undefined;\n  /** Convert amount between currencies */\n  convertAmount: (amount: number, from: CurrencyCode, to: CurrencyCode) => number;\n}\n\nconst CurrencyContext = createContext<CurrencyContextType | undefined>(undefined);\n\n// ============================================================================\n// CURRENCY PROVIDER\n// ============================================================================\n\ninterface CurrencyProviderProps {\n  children: ReactNode;\n  /** Initial currency settings (optional) */\n  initialSettings?: Partial<CurrencySettings>;\n}\n\nexport function CurrencyProvider({ \n  children, \n  initialSettings = {} \n}: CurrencyProviderProps) {\n  // Initialize settings with defaults and any overrides\n  const [settings, setSettings] = useState<CurrencySettings>({\n    ...DEFAULT_CURRENCY_SETTINGS,\n    ...initialSettings,\n  });\n\n  // Get current currency configuration\n  const currentCurrency = getCurrentCurrency(settings);\n\n  // Change current currency\n  const setCurrency = useCallback((currencyCode: CurrencyCode) => {\n    setSettings(prev => ({\n      ...prev,\n      currentCurrency: currencyCode,\n    }));\n    \n    // Save to localStorage for persistence\n    localStorage.setItem('rentalshop-currency', currencyCode);\n  }, []);\n\n  // Toggle currency symbol visibility\n  const toggleSymbol = useCallback(() => {\n    setSettings(prev => ({\n      ...prev,\n      showSymbol: !prev.showSymbol,\n    }));\n    \n    // Save to localStorage for persistence\n    localStorage.setItem('rentalshop-show-symbol', (!settings.showSymbol).toString());\n  }, [settings.showSymbol]);\n\n  // Toggle currency code visibility\n  const toggleCode = useCallback(() => {\n    setSettings(prev => ({\n      ...prev,\n      showCode: !prev.showCode,\n    }));\n    \n    // Save to localStorage for persistence\n    localStorage.setItem('rentalshop-show-code', (!settings.showCode).toString());\n  }, [settings.showCode]);\n\n  // Get currency by code\n  const getCurrencyByCode = useCallback((code: CurrencyCode) => {\n    return getCurrency(code);\n  }, []);\n\n  // Convert amount between currencies\n  const convertAmount = useCallback((amount: number, from: CurrencyCode, to: CurrencyCode) => {\n    if (from === to) return amount;\n    \n    const fromCurrency = getCurrency(from);\n    const toCurrency = getCurrency(to);\n    \n    if (!fromCurrency || !toCurrency) {\n      throw new Error(`Invalid currency code: ${from} or ${to}`);\n    }\n    \n    // Convert to base currency (USD) first, then to target currency\n    const amountInUSD = amount / fromCurrency.exchangeRate;\n    return amountInUSD * toCurrency.exchangeRate;\n  }, []);\n\n  // Load saved settings from localStorage on mount\n  useEffect(() => {\n    try {\n      const savedCurrency = localStorage.getItem('rentalshop-currency') as CurrencyCode;\n      const savedShowSymbol = localStorage.getItem('rentalshop-show-symbol');\n      const savedShowCode = localStorage.getItem('rentalshop-show-code');\n      \n      if (savedCurrency && isValidCurrencyCode(savedCurrency)) {\n        setSettings(prev => ({ ...prev, currentCurrency: savedCurrency }));\n      }\n      \n      if (savedShowSymbol !== null) {\n        setSettings(prev => ({ ...prev, showSymbol: savedShowSymbol === 'true' }));\n      }\n      \n      if (savedShowCode !== null) {\n        setSettings(prev => ({ ...prev, showCode: savedShowCode === 'true' }));\n      }\n    } catch (error) {\n      console.warn('Failed to load currency settings from localStorage:', error);\n    }\n  }, []);\n\n  const contextValue: CurrencyContextType = {\n    settings,\n    currentCurrency,\n    setCurrency,\n    toggleSymbol,\n    toggleCode,\n    getCurrencyByCode,\n    convertAmount,\n  };\n\n  return (\n    <CurrencyContext.Provider value={contextValue}>\n      {children}\n    </CurrencyContext.Provider>\n  );\n}\n\n// ============================================================================\n// CURRENCY HOOK\n// ============================================================================\n\nexport function useCurrency(): CurrencyContextType {\n  const context = useContext(CurrencyContext);\n  \n  if (context === undefined) {\n    throw new Error('useCurrency must be used within a CurrencyProvider');\n  }\n  \n  return context;\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\nfunction isValidCurrencyCode(code: string): code is CurrencyCode {\n  return ['USD', 'VND'].includes(code as CurrencyCode);\n}\n","import { useState, useEffect, useRef, useCallback } from 'react';\n\n/**\n * ✅ MODERN API DEDUPLICATION HOOK - Clean & Simple\n * \n * Inspired by TanStack Query & SWR\n * \n * Key Features:\n * 1. Request deduplication (same request = single call)\n * 2. Global cache with stale-while-revalidate\n * 3. Race condition protection\n * 4. Automatic cleanup\n * \n * Why this pattern?\n * - Prevents duplicate API calls from React 18 double mounting\n * - Shares cached data across all components\n * - Optimistic UI updates with stale data\n * - Production-ready and battle-tested pattern\n */\n\ninterface UseDedupedApiOptions<TFilters, TData> {\n  filters: TFilters;\n  fetchFn: (filters: TFilters) => Promise<TData>;\n  enabled?: boolean;\n  staleTime?: number; // Cache duration in ms (default: 30s)\n  cacheTime?: number; // Keep in cache after unmount (default: 5min)\n  refetchOnWindowFocus?: boolean;\n}\n\ninterface UseDedupedApiReturn<TData> {\n  data: TData | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// GLOBAL CACHE - Shared across all hook instances\n// ============================================================================\n\nconst requestCache = new Map<string, Promise<any>>();\nconst dataCache = new Map<string, { data: any; timestamp: number; staleTime: number }>();\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\nexport function useDedupedApi<TFilters, TData>(\n  options: UseDedupedApiOptions<TFilters, TData>\n): UseDedupedApiReturn<TData> {\n  const { \n    filters, \n    fetchFn, \n    enabled = true,\n    staleTime = 30000, // 30 seconds\n    cacheTime = 300000, // 5 minutes\n    refetchOnWindowFocus = false\n  } = options;\n\n  // ============================================================================\n  // STATE\n  // ============================================================================\n  \n  const [data, setData] = useState<TData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [isStale, setIsStale] = useState(false);\n  \n  // ============================================================================\n  // REFS - For tracking and avoiding stale updates\n  // ============================================================================\n  \n  const fetchIdRef = useRef(0);\n  const filtersRef = useRef<string>('');\n\n  // Generate cache key from filters\n  const cacheKey = JSON.stringify(filters);\n\n  // ============================================================================\n  // MAIN FETCH LOGIC - Single source of truth\n  // ============================================================================\n  \n  useEffect(() => {\n    // Skip if disabled\n    if (!enabled) {\n      setLoading(false);\n      return;\n    }\n\n    // Skip if filters haven't actually changed\n    if (cacheKey === filtersRef.current && data !== null) {\n      console.log('🔍 useDedupedApi: Filters unchanged, skipping fetch');\n      return;\n    }\n    \n    filtersRef.current = cacheKey;\n\n    // Increment fetch ID for race condition protection\n    fetchIdRef.current += 1;\n    const currentFetchId = fetchIdRef.current;\n    \n    console.log(`🔍 Fetch #${currentFetchId}: Starting...`);\n\n    // ========================================================================\n    // STEP 1: Check cache first\n    // ========================================================================\n    \n    const cached = dataCache.get(cacheKey);\n    if (cached) {\n      const now = Date.now();\n      const isCacheStale = (now - cached.timestamp) > cached.staleTime;\n      \n      if (!isCacheStale) {\n        // Cache is fresh - use it immediately\n        console.log(`✅ Fetch #${currentFetchId}: Cache HIT (fresh)`);\n        setData(cached.data);\n        setLoading(false);\n        setError(null);\n        setIsStale(false);\n        return;\n      } else {\n        // Cache is stale - show it while fetching new data (stale-while-revalidate)\n        console.log(`⏰ Fetch #${currentFetchId}: Cache HIT (stale) - showing stale data`);\n        setData(cached.data);\n        setIsStale(true);\n      }\n    }\n\n    // ========================================================================\n    // STEP 2: Check if request is already in progress (deduplication)\n    // ========================================================================\n    \n    const existingRequest = requestCache.get(cacheKey);\n    if (existingRequest) {\n      console.log(`🔄 Fetch #${currentFetchId}: DEDUPLICATION - waiting for existing request`);\n      \n      existingRequest\n        .then((result) => {\n          // Only update if this is still the latest fetch\n          if (currentFetchId === fetchIdRef.current) {\n            setData(result);\n            setLoading(false);\n            setError(null);\n            setIsStale(false);\n            console.log(`✅ Fetch #${currentFetchId}: Got deduplicated result`);\n          } else {\n            console.log(`⏭️ Fetch #${currentFetchId}: Stale, ignoring`);\n          }\n        })\n        .catch((err) => {\n          // Only update error if this is still the latest fetch\n          if (currentFetchId === fetchIdRef.current) {\n            const error = err instanceof Error ? err : new Error('Unknown error');\n            setError(error);\n            setLoading(false);\n            console.error(`❌ Fetch #${currentFetchId}: Dedup ERROR:`, error);\n          }\n        });\n      \n      return;\n    }\n\n    // ========================================================================\n    // STEP 3: Make new API request\n    // ========================================================================\n    \n    setLoading(true);\n    setError(null);\n\n    const requestPromise = fetchFn(filters);\n    requestCache.set(cacheKey, requestPromise);\n\n    requestPromise\n      .then((result) => {\n        // Race condition check - only update if this is still the latest fetch\n        if (currentFetchId !== fetchIdRef.current) {\n          console.log(`⏭️ Fetch #${currentFetchId}: Stale, ignoring result`);\n          return;\n        }\n\n        console.log(`✅ Fetch #${currentFetchId}: SUCCESS - caching data`);\n\n        // Cache the result\n        dataCache.set(cacheKey, {\n          data: result,\n          timestamp: Date.now(),\n          staleTime\n        });\n\n        // Clean up old cache entries\n        const now = Date.now();\n        for (const [key, cached] of dataCache.entries()) {\n          if ((now - cached.timestamp) > cacheTime) {\n            dataCache.delete(key);\n            console.log(`🧹 Cleaned up old cache entry: ${key}`);\n          }\n        }\n\n        // Update state\n        setData(result);\n        setError(null);\n        setIsStale(false);\n        setLoading(false);\n      })\n      .catch((err) => {\n        // Race condition check\n        if (currentFetchId !== fetchIdRef.current) {\n          console.log(`⏭️ Fetch #${currentFetchId}: Stale, ignoring error`);\n          return;\n        }\n\n        const error = err instanceof Error ? err : new Error('Unknown error');\n        setError(error);\n        setLoading(false);\n        console.error(`❌ Fetch #${currentFetchId}: ERROR:`, error);\n      })\n      .finally(() => {\n        // Clean up request cache\n        requestCache.delete(cacheKey);\n      });\n\n  }, [cacheKey, enabled, fetchFn, staleTime, cacheTime]);\n\n  // ============================================================================\n  // WINDOW FOCUS REFETCH (Optional)\n  // ============================================================================\n  \n  useEffect(() => {\n    if (!refetchOnWindowFocus || !enabled) return;\n\n    const handleFocus = () => {\n      const cached = dataCache.get(cacheKey);\n      if (!cached) return;\n      \n      const now = Date.now();\n      const isCacheStale = (now - cached.timestamp) > cached.staleTime;\n      \n      if (isCacheStale) {\n        console.log('🔄 Window focus: Refetching stale data');\n        // Trigger refetch by clearing the filter ref\n        filtersRef.current = '';\n        fetchIdRef.current += 1;\n      }\n    };\n\n    window.addEventListener('focus', handleFocus);\n    return () => window.removeEventListener('focus', handleFocus);\n  }, [refetchOnWindowFocus, enabled, cacheKey, staleTime]);\n\n  // ============================================================================\n  // MANUAL REFETCH\n  // ============================================================================\n  \n  const refetch = useCallback(async () => {\n    if (!enabled) return;\n    \n    console.log('🔄 Manual refetch triggered');\n    \n    // Clear cache and trigger refetch\n    dataCache.delete(cacheKey);\n    filtersRef.current = '';\n    fetchIdRef.current += 1;\n  }, [enabled, cacheKey]);\n\n  return {\n    data,\n    loading,\n    error,\n    refetch,\n    isStale\n  };\n}\n\n// ============================================================================\n// UTILITIES\n// ============================================================================\n\n/**\n * Clear all caches (useful for logout, etc.)\n */\nexport function clearApiCache() {\n  requestCache.clear();\n  dataCache.clear();\n  console.log('🧹 API Cache cleared');\n}\n\n/**\n * Get cache stats (for debugging)\n */\nexport function getApiCacheStats() {\n  return {\n    requestCacheSize: requestCache.size,\n    dataCacheSize: dataCache.size,\n    cacheKeys: Array.from(dataCache.keys())\n  };\n}\n","'use client';\n\nimport { useDedupedApi } from '../utils/useDedupedApi';\nimport { customersApi } from '@rentalshop/utils';\nimport type { CustomerFilters, Customer } from '@rentalshop/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface CustomersDataResponse {\n  customers: Customer[];\n  total: number;\n  page: number;\n  currentPage: number; // Alias for page\n  limit: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\nexport interface UseCustomersDataOptions {\n  filters: CustomerFilters;\n  enabled?: boolean;\n}\n\nexport interface UseCustomersDataReturn {\n  data: CustomersDataResponse | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\n/**\n * ✅ MODERN CUSTOMERS DATA HOOK\n * \n * Clean and simple wrapper around useDedupedApi for customers\n * \n * Features:\n * - Automatic request deduplication\n * - Intelligent caching (30s stale time)\n * - Request cancellation and race condition protection\n * - Transform API response to consistent format\n * \n * Usage:\n * ```tsx\n * const { data, loading, error } = useCustomersData({ \n *   filters: { page: 1, search: 'john' }\n * });\n * ```\n */\nexport function useCustomersData(options: UseCustomersDataOptions): UseCustomersDataReturn {\n  const { filters, enabled = true } = options;\n  \n  const result = useDedupedApi({\n    filters,\n    fetchFn: async (filters: CustomerFilters) => {\n      console.log('👥 useCustomersData: Fetching with filters:', filters);\n      \n      const response = await customersApi.searchCustomers(filters);\n\n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch customers');\n      }\n\n      // Transform API response to consistent format\n      const apiData = response.data as any;\n      const transformed: CustomersDataResponse = {\n        customers: apiData.customers || [],\n        total: apiData.total || 0,\n        page: apiData.page || 1,\n        currentPage: apiData.page || 1, // Alias for compatibility\n        limit: apiData.limit || 25,\n        hasMore: apiData.hasMore || false,\n        totalPages: apiData.totalPages || 1\n      };\n      \n      console.log('✅ useCustomersData: Success:', {\n        customersCount: transformed.customers.length,\n        total: transformed.total,\n        page: transformed.page\n      });\n      \n      return transformed;\n    },\n    enabled,\n    staleTime: 30000, // 30 seconds cache\n    cacheTime: 300000, // 5 minutes\n    refetchOnWindowFocus: false\n  });\n\n  return result;\n}\n","import { useDedupedApi } from '../utils/useDedupedApi';\nimport { merchantsApi } from '@rentalshop/utils';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface MerchantFilters {\n  search?: string;\n  status?: string;\n  plan?: string;\n  page?: number;\n  limit?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface MerchantsDataResponse {\n  merchants: any[];\n  total: number;\n  page: number;\n  currentPage: number;\n  limit: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\nexport interface UseMerchantsDataOptions {\n  filters: MerchantFilters;\n  enabled?: boolean;\n}\n\nexport interface UseMerchantsDataReturn {\n  data: MerchantsDataResponse | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\n/**\n * ✅ MODERN MERCHANTS DATA HOOK\n * \n * Clean and simple wrapper around useDedupedApi for merchants\n * \n * Features:\n * - Automatic request deduplication\n * - Intelligent caching (30s stale time)\n * - Request cancellation and race condition protection\n * - Transform API response to consistent format\n * \n * Usage:\n * ```tsx\n * const { data, loading, error } = useMerchantsData({ \n *   filters: { page: 1, status: 'active' }\n * });\n * ```\n */\nexport function useMerchantsData(options: UseMerchantsDataOptions): UseMerchantsDataReturn {\n  const { filters, enabled = true } = options;\n  \n  const result = useDedupedApi({\n    filters,\n    fetchFn: async (filters: MerchantFilters) => {\n      console.log('🏢 useMerchantsData: Fetching with filters:', filters);\n      \n      const response = await merchantsApi.getMerchants();\n\n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch merchants');\n      }\n\n      // Transform API response to consistent format\n      const apiData = response.data as any;\n      const merchantsArray = apiData.merchants || [];\n      \n      console.log('🏢 useMerchantsData - API Response:', {\n        hasData: !!apiData,\n        hasMerchantsArray: !!merchantsArray,\n        merchantsCount: merchantsArray.length,\n        firstMerchant: merchantsArray[0]\n      });\n      \n      // Apply client-side filtering if needed (until backend supports it)\n      let filteredMerchants = merchantsArray;\n      \n      if (filters.search) {\n        const searchLower = filters.search.toLowerCase();\n        filteredMerchants = filteredMerchants.filter((m: any) => \n          m.name?.toLowerCase().includes(searchLower) ||\n          m.email?.toLowerCase().includes(searchLower)\n        );\n      }\n      \n      if (filters.status && filters.status !== 'all') {\n        filteredMerchants = filteredMerchants.filter((m: any) => \n          filters.status === 'active' ? m.isActive : !m.isActive\n        );\n      }\n      \n      if (filters.plan && filters.plan !== 'all') {\n        filteredMerchants = filteredMerchants.filter((m: any) => \n          String(m.planId) === filters.plan\n        );\n      }\n      \n      // Apply sorting\n      if (filters.sortBy) {\n        filteredMerchants.sort((a: any, b: any) => {\n          const aVal = a[filters.sortBy!];\n          const bVal = b[filters.sortBy!];\n          const order = filters.sortOrder === 'desc' ? -1 : 1;\n          return (aVal > bVal ? 1 : -1) * order;\n        });\n      }\n      \n      // Apply pagination\n      const page = filters.page || 1;\n      const limit = filters.limit || 10;\n      const startIndex = (page - 1) * limit;\n      const endIndex = startIndex + limit;\n      const paginatedMerchants = filteredMerchants.slice(startIndex, endIndex);\n      const total = filteredMerchants.length;\n      const totalPages = Math.ceil(total / limit);\n      \n      const transformed: MerchantsDataResponse = {\n        merchants: paginatedMerchants,\n        total,\n        page,\n        currentPage: page,\n        limit,\n        hasMore: endIndex < total,\n        totalPages\n      };\n      \n      console.log('✅ useMerchantsData: Success:', {\n        merchantsCount: transformed.merchants.length,\n        total: transformed.total,\n        page: transformed.page\n      });\n      \n      return transformed;\n    },\n    enabled,\n    staleTime: 30000, // 30 seconds cache\n    cacheTime: 300000, // 5 minutes\n    refetchOnWindowFocus: false\n  });\n\n  return result;\n}\n\n","'use client';\n\nimport { useDedupedApi } from '../utils/useDedupedApi';\nimport { ordersApi } from '@rentalshop/utils';\nimport type { OrderFilters, OrderWithDetails } from '@rentalshop/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface OrdersDataResponse {\n  orders: OrderWithDetails[];\n  total: number;\n  page: number;\n  currentPage: number; // Alias for page\n  limit: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\nexport interface UseOrdersDataOptions {\n  filters: OrderFilters;\n  enabled?: boolean;\n}\n\nexport interface UseOrdersDataReturn {\n  data: OrdersDataResponse | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\n/**\n * ✅ MODERN ORDERS DATA HOOK\n * \n * Clean and simple wrapper around useDedupedApi for orders\n * \n * Features:\n * - Automatic request deduplication\n * - Intelligent caching (30s stale time)\n * - Request cancellation and race condition protection\n * - Transform API response to consistent format\n * \n * Usage:\n * ```tsx\n * const { data, loading, error } = useOrdersData({ \n *   filters: { page: 1, status: 'RESERVED' }\n * });\n * ```\n */\nexport function useOrdersData(options: UseOrdersDataOptions): UseOrdersDataReturn {\n  const { filters, enabled = true } = options;\n  \n  const result = useDedupedApi({\n    filters,\n    fetchFn: async (filters: OrderFilters) => {\n      console.log('📦 useOrdersData: Fetching with filters:', filters);\n      \n      const response = await ordersApi.searchOrders(filters);\n\n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch orders');\n      }\n\n      // Transform API response to consistent format\n      const apiData = response.data as any;\n      const transformed: OrdersDataResponse = {\n        orders: apiData.orders || [],\n        total: apiData.total || 0,\n        page: apiData.page || 1,\n        currentPage: apiData.page || 1, // Alias for compatibility\n        limit: apiData.limit || 25,\n        hasMore: apiData.hasMore || false,\n        totalPages: apiData.totalPages || 1\n      };\n      \n      console.log('✅ useOrdersData: Success:', {\n        ordersCount: transformed.orders.length,\n        total: transformed.total,\n        page: transformed.page\n      });\n      \n      return transformed;\n    },\n    enabled,\n    staleTime: 30000, // 30 seconds cache\n    cacheTime: 300000, // 5 minutes\n    refetchOnWindowFocus: false\n  });\n\n  return result;\n}\n","\"use client\"\n\nimport { useState, useCallback } from 'react';\nimport { PAGINATION } from '@rentalshop/constants';\n\nexport interface PaginationState {\n  total: number;\n  limit: number;\n  offset: number;\n  hasMore: boolean;\n  currentPage: number;\n  totalPages: number;\n}\n\nexport interface PaginationConfig {\n  initialLimit?: number;\n  initialOffset?: number;\n}\n\nexport interface UsePaginationReturn {\n  pagination: PaginationState;\n  setPagination: (pagination: Partial<PaginationState>) => void;\n  handlePageChange: (page: number) => void;\n  resetPagination: () => void;\n  updatePaginationFromResponse: (response: {\n    total: number;\n    limit: number;\n    offset: number;\n    hasMore?: boolean;\n  }) => void;\n}\n\nexport function usePagination(config: PaginationConfig = {}): UsePaginationReturn {\n  const { initialLimit = PAGINATION.DEFAULT_PAGE_SIZE, initialOffset = 0 } = config;\n  \n  const [pagination, setPaginationState] = useState<PaginationState>({\n    total: 0,\n    limit: initialLimit,\n    offset: initialOffset,\n    hasMore: false,\n    currentPage: 1,\n    totalPages: 1\n  });\n\n  const setPagination = useCallback((newPagination: Partial<PaginationState>) => {\n    setPaginationState(prev => ({\n      ...prev,\n      ...newPagination,\n      currentPage: Math.floor((newPagination.offset ?? prev.offset) / (newPagination.limit ?? prev.limit)) + 1,\n      totalPages: Math.ceil((newPagination.total ?? prev.total) / (newPagination.limit ?? prev.limit))\n    }));\n  }, []);\n\n  const handlePageChange = useCallback((page: number) => {\n    const newOffset = (page - 1) * pagination.limit;\n    setPagination({\n      offset: newOffset,\n      currentPage: page\n    });\n  }, [pagination.limit, setPagination]);\n\n\n\n  const resetPagination = useCallback(() => {\n    setPagination({\n      total: 0,\n      offset: initialOffset,\n      hasMore: false,\n      currentPage: 1,\n      totalPages: 1\n    });\n  }, [initialOffset, setPagination]);\n\n  const updatePaginationFromResponse = useCallback((response: {\n    total: number;\n    limit: number;\n    offset: number;\n    hasMore?: boolean;\n  }) => {\n    setPagination({\n      total: response.total,\n      limit: response.limit,\n      offset: response.offset,\n      hasMore: response.hasMore ?? (response.offset + response.limit < response.total),\n      currentPage: Math.floor(response.offset / response.limit) + 1,\n      totalPages: Math.ceil(response.total / response.limit)\n    });\n  }, [setPagination]);\n\n  return {\n    pagination,\n    setPagination,\n    handlePageChange,\n    resetPagination,\n    updatePaginationFromResponse\n  };\n}\n","import { useDedupedApi } from '../utils/useDedupedApi';\nimport { paymentsApi } from '@rentalshop/utils';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface PaymentFilters {\n  search?: string;\n  status?: string;\n  dateFilter?: string;\n  page?: number;\n  limit?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface PaymentsDataResponse {\n  payments: any[];\n  total: number;\n  page: number;\n  currentPage: number;\n  limit: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\nexport interface UsePaymentsDataOptions {\n  filters: PaymentFilters;\n  enabled?: boolean;\n}\n\nexport interface UsePaymentsDataReturn {\n  data: PaymentsDataResponse | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\n/**\n * ✅ MODERN PAYMENTS DATA HOOK\n * \n * Clean and simple wrapper around useDedupedApi for payments\n * \n * Features:\n * - Automatic request deduplication\n * - Intelligent caching (30s stale time)\n * - Request cancellation and race condition protection\n * - Transform API response to consistent format\n * \n * Usage:\n * ```tsx\n * const { data, loading, error } = usePaymentsData({ \n *   filters: { page: 1, status: 'completed' }\n * });\n * ```\n */\nexport function usePaymentsData(options: UsePaymentsDataOptions): UsePaymentsDataReturn {\n  const { filters, enabled = true } = options;\n  \n  const result = useDedupedApi({\n    filters,\n    fetchFn: async (filters: PaymentFilters) => {\n      console.log('💰 usePaymentsData: Fetching with filters:', filters);\n      \n      const response = await paymentsApi.getPayments();\n\n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch payments');\n      }\n\n      // Transform API response to consistent format\n      const apiData = response.data as any;\n      const paymentsArray = Array.isArray(apiData) ? apiData : apiData.payments || [];\n      \n      console.log('💰 usePaymentsData - API Response:', {\n        hasData: !!apiData,\n        isArray: Array.isArray(apiData),\n        paymentsCount: paymentsArray.length,\n        firstPayment: paymentsArray[0]\n      });\n      \n      // Apply client-side filtering if needed (until backend supports it)\n      let filteredPayments = paymentsArray;\n      \n      if (filters.search) {\n        const searchLower = filters.search.toLowerCase();\n        filteredPayments = filteredPayments.filter((p: any) => \n          p.subscription?.merchant?.name?.toLowerCase().includes(searchLower) ||\n          p.invoiceNumber?.toLowerCase().includes(searchLower) ||\n          p.transactionId?.toLowerCase().includes(searchLower)\n        );\n      }\n      \n      if (filters.status && filters.status !== 'all') {\n        filteredPayments = filteredPayments.filter((p: any) => \n          p.status?.toLowerCase() === filters.status?.toLowerCase()\n        );\n      }\n      \n      if (filters.dateFilter && filters.dateFilter !== 'all') {\n        const now = new Date();\n        filteredPayments = filteredPayments.filter((p: any) => {\n          const paymentDate = new Date(p.createdAt);\n          \n          if (filters.dateFilter === 'today') {\n            return now.toDateString() === paymentDate.toDateString();\n          } else if (filters.dateFilter === 'this_month') {\n            return now.getMonth() === paymentDate.getMonth() && \n                   now.getFullYear() === paymentDate.getFullYear();\n          } else if (filters.dateFilter === 'this_year') {\n            return now.getFullYear() === paymentDate.getFullYear();\n          }\n          \n          return true;\n        });\n      }\n      \n      // Apply sorting\n      if (filters.sortBy) {\n        filteredPayments.sort((a: any, b: any) => {\n          const aVal = a[filters.sortBy!];\n          const bVal = b[filters.sortBy!];\n          const order = filters.sortOrder === 'desc' ? -1 : 1;\n          return (aVal > bVal ? 1 : -1) * order;\n        });\n      }\n      \n      // Apply pagination\n      const page = filters.page || 1;\n      const limit = filters.limit || 20;\n      const startIndex = (page - 1) * limit;\n      const endIndex = startIndex + limit;\n      const paginatedPayments = filteredPayments.slice(startIndex, endIndex);\n      const total = filteredPayments.length;\n      const totalPages = Math.ceil(total / limit);\n      \n      const transformed: PaymentsDataResponse = {\n        payments: paginatedPayments,\n        total,\n        page,\n        currentPage: page,\n        limit,\n        hasMore: endIndex < total,\n        totalPages\n      };\n      \n      console.log('✅ usePaymentsData: Success:', {\n        paymentsCount: transformed.payments.length,\n        total: transformed.total,\n        page: transformed.page\n      });\n      \n      return transformed;\n    },\n    enabled,\n    staleTime: 30000, // 30 seconds cache\n    cacheTime: 300000, // 5 minutes\n    refetchOnWindowFocus: false\n  });\n\n  return result;\n}\n\n","import { useDedupedApi } from '../utils/useDedupedApi';\nimport { plansApi } from '@rentalshop/utils';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface PlanFilters {\n  search?: string;\n  status?: string;\n  page?: number;\n  limit?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface PlansDataResponse {\n  plans: any[];\n  total: number;\n  page: number;\n  currentPage: number;\n  limit: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\nexport interface UsePlansDataOptions {\n  filters: PlanFilters;\n  enabled?: boolean;\n}\n\nexport interface UsePlansDataReturn {\n  data: PlansDataResponse | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\n/**\n * ✅ MODERN PLANS DATA HOOK\n * \n * Clean and simple wrapper around useDedupedApi for plans\n * \n * Features:\n * - Automatic request deduplication\n * - Intelligent caching (30s stale time)\n * - Request cancellation and race condition protection\n * - Transform API response to consistent format\n * \n * Usage:\n * ```tsx\n * const { data, loading, error } = usePlansData({ \n *   filters: { page: 1, status: 'active' }\n * });\n * ```\n */\nexport function usePlansData(options: UsePlansDataOptions): UsePlansDataReturn {\n  const { filters, enabled = true } = options;\n  \n  const result = useDedupedApi({\n    filters,\n    fetchFn: async (filters: PlanFilters) => {\n      console.log('📋 usePlansData: Fetching with filters:', filters);\n      \n      const response = await plansApi.getPlans();\n\n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch plans');\n      }\n\n      // Transform API response to consistent format\n      const apiData = response.data as any;\n      const plansArray = Array.isArray(apiData) ? apiData : apiData.plans || [];\n      \n      console.log('📋 usePlansData - API Response:', {\n        hasData: !!apiData,\n        isArray: Array.isArray(apiData),\n        plansCount: plansArray.length,\n        firstPlan: plansArray[0]\n      });\n      \n      // Apply client-side filtering if needed (until backend supports it)\n      let filteredPlans = plansArray;\n      \n      if (filters.search) {\n        const searchLower = filters.search.toLowerCase();\n        filteredPlans = filteredPlans.filter((p: any) => \n          p.name?.toLowerCase().includes(searchLower) ||\n          p.description?.toLowerCase().includes(searchLower)\n        );\n      }\n      \n      if (filters.status && filters.status !== 'all') {\n        filteredPlans = filteredPlans.filter((p: any) => \n          filters.status === 'active' ? p.isActive : !p.isActive\n        );\n      }\n      \n      // Apply sorting\n      if (filters.sortBy) {\n        filteredPlans.sort((a: any, b: any) => {\n          const aVal = a[filters.sortBy!];\n          const bVal = b[filters.sortBy!];\n          const order = filters.sortOrder === 'desc' ? -1 : 1;\n          return (aVal > bVal ? 1 : -1) * order;\n        });\n      }\n      \n      // Apply pagination\n      const page = filters.page || 1;\n      const limit = filters.limit || 10;\n      const startIndex = (page - 1) * limit;\n      const endIndex = startIndex + limit;\n      const paginatedPlans = filteredPlans.slice(startIndex, endIndex);\n      const total = filteredPlans.length;\n      const totalPages = Math.ceil(total / limit);\n      \n      const transformed: PlansDataResponse = {\n        plans: paginatedPlans,\n        total,\n        page,\n        currentPage: page,\n        limit,\n        hasMore: endIndex < total,\n        totalPages\n      };\n      \n      console.log('✅ usePlansData: Success:', {\n        plansCount: transformed.plans.length,\n        total: transformed.total,\n        page: transformed.page\n      });\n      \n      return transformed;\n    },\n    enabled,\n    staleTime: 30000, // 30 seconds cache\n    cacheTime: 300000, // 5 minutes\n    refetchOnWindowFocus: false\n  });\n\n  return result;\n}\n\n","'use client';\n\nimport { useCallback } from 'react';\nimport type { Product } from '@rentalshop/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n// Product interface is now imported from @rentalshop/types\n\nexport interface Order {\n  id: number;\n  orderType: string;\n  status: string;\n  pickupPlanAt: string;\n  returnPlanAt: string;\n  orderItems: Array<{\n    productId: number;\n    quantity: number;\n    name: string;\n  }>;\n}\n\nexport interface AvailabilityStatus {\n  available: boolean;\n  availableQuantity: number;\n  conflicts: Order[];\n  message: string;\n}\n\n// ============================================================================\n// USE PRODUCT AVAILABILITY HOOK\n// ============================================================================\n\nexport function useProductAvailability() {\n  // ============================================================================\n  // AVAILABILITY CALCULATION\n  // ============================================================================\n\n  const calculateAvailability = useCallback((\n    product: Product,\n    pickupDate: string,\n    returnDate: string,\n    requestedQuantity: number,\n    existingOrders: Order[] = []\n  ): AvailabilityStatus => {\n    // Convert dates to Date objects\n    const pickup = new Date(pickupDate);\n    const return_ = new Date(returnDate);\n    \n    // Validate dates\n    if (pickup >= return_) {\n      return {\n        available: false,\n        availableQuantity: 0,\n        conflicts: [],\n        message: 'Return date must be after pickup date'\n      };\n    }\n\n    // Find conflicting orders for this product\n    const conflicts = existingOrders.filter(order => {\n      // Only check RENT orders\n      if (order.orderType !== 'RENT') return false;\n      \n      // Check if order is active (not completed/cancelled)\n      const activeStatuses = ['RESERVED', 'PICKUPED'];\n      if (!activeStatuses.includes(order.status)) return false;\n      \n      // Check if order items contain this product\n      const hasProduct = order.orderItems.some(item => item.productId === product.id);\n      if (!hasProduct) return false;\n      \n      // Check date overlap\n      const orderPickup = new Date(order.pickupPlanAt);\n      const orderReturn = new Date(order.returnPlanAt);\n      \n      // Check if dates overlap\n      return (\n        (pickup <= orderReturn && return_ >= orderPickup) ||\n        (orderPickup <= return_ && orderReturn >= pickup)\n      );\n    });\n\n    // Calculate total quantity needed during the requested period\n    const conflictingQuantity = conflicts.reduce((total, order) => {\n      const orderItem = order.orderItems.find(item => item.productId === product.id);\n      return total + (orderItem?.quantity || 0);\n    }, 0);\n\n    // Calculate available quantity\n    const availableQuantity = Math.max(0, product.available - conflictingQuantity);\n    const available = availableQuantity >= requestedQuantity;\n\n    // Generate message\n    let message = '';\n    if (available) {\n      message = `Available: ${availableQuantity} units`;\n    } else {\n      message = `Only ${availableQuantity} units available (requested: ${requestedQuantity})`;\n    }\n\n    return {\n      available,\n      availableQuantity,\n      conflicts,\n      message,\n    };\n  }, []);\n\n  // ============================================================================\n  // QUICK AVAILABILITY CHECK\n  // ============================================================================\n\n  const isProductAvailable = useCallback((\n    product: Product,\n    pickupDate: string,\n    returnDate: string,\n    requestedQuantity: number,\n    existingOrders: Order[] = []\n  ): boolean => {\n    const status = calculateAvailability(product, pickupDate, returnDate, requestedQuantity, existingOrders);\n    return status.available;\n  }, [calculateAvailability]);\n\n  // ============================================================================\n  // AVAILABILITY FOR DATE RANGE\n  // ============================================================================\n\n  const getAvailabilityForDateRange = useCallback((\n    product: Product,\n    startDate: string,\n    endDate: string,\n    existingOrders: Order[] = []\n  ): Array<{ date: string; available: number; conflicts: Order[] }> => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const results = [];\n    \n    // Check availability for each day in the range\n    for (let date = new Date(start); date <= end; date.setDate(date.getDate() + 1)) {\n      const dateStr = date.toISOString().split('T')[0];\n      const status = calculateAvailability(\n        product, \n        dateStr, \n        dateStr, \n        1, \n        existingOrders\n      );\n      \n      results.push({\n        date: dateStr,\n        available: status.availableQuantity,\n        conflicts: status.conflicts,\n      });\n    }\n    \n    return results;\n  }, [calculateAvailability]);\n\n  // ============================================================================\n  // RETURN VALUES\n  // ============================================================================\n\n  return {\n    calculateAvailability,\n    isProductAvailable,\n    getAvailabilityForDateRange,\n  };\n}\n","'use client';\n\nimport { useDedupedApi } from '../utils/useDedupedApi';\nimport { productsApi } from '@rentalshop/utils';\nimport type { ProductFilters, ProductWithDetails } from '@rentalshop/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface ProductsDataResponse {\n  products: ProductWithDetails[];\n  total: number;\n  page: number;\n  currentPage: number; // Alias for page\n  limit: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\nexport interface UseProductsDataOptions {\n  filters: ProductFilters;\n  enabled?: boolean;\n}\n\nexport interface UseProductsDataReturn {\n  data: ProductsDataResponse | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\n/**\n * ✅ MODERN PRODUCTS DATA HOOK\n * \n * Clean and simple wrapper around useDedupedApi for products\n * \n * Features:\n * - Automatic request deduplication\n * - Intelligent caching (30s stale time)\n * - Request cancellation and race condition protection\n * - Transform API response to consistent format\n * \n * Usage:\n * ```tsx\n * const { data, loading, error } = useProductsData({ \n *   filters: { page: 1, search: 'abc' }\n * });\n * ```\n */\nexport function useProductsData(options: UseProductsDataOptions): UseProductsDataReturn {\n  const { filters, enabled = true } = options;\n  \n  const result = useDedupedApi({\n    filters,\n    fetchFn: async (filters: ProductFilters) => {\n      console.log('📦 useProductsData: Fetching with filters:', filters);\n      \n      const response = await productsApi.searchProducts(filters);\n\n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch products');\n      }\n\n      // Transform API response to consistent format\n      const apiData = response.data as any;\n      const transformed: ProductsDataResponse = {\n        products: apiData.products || [],\n        total: apiData.total || 0,\n        page: apiData.page || 1,\n        currentPage: apiData.page || 1, // Alias for compatibility\n        limit: apiData.limit || 25,\n        hasMore: apiData.hasMore || false,\n        totalPages: apiData.totalPages || 1\n      };\n      \n      console.log('✅ useProductsData: Success:', {\n        productsCount: transformed.products.length,\n        total: transformed.total,\n        page: transformed.page\n      });\n      \n      return transformed;\n    },\n    enabled,\n    staleTime: 30000, // 30 seconds cache\n    cacheTime: 300000, // 5 minutes\n    refetchOnWindowFocus: false\n  });\n\n  return result;\n}\n","import { useDedupedApi } from '../utils/useDedupedApi';\nimport { subscriptionsApi } from '@rentalshop/utils';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface SubscriptionFilters {\n  search?: string;\n  status?: string;\n  plan?: string;\n  merchant?: string;\n  page?: number;\n  limit?: number;\n  offset?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface SubscriptionsDataResponse {\n  subscriptions: any[];\n  total: number;\n  page: number;\n  currentPage: number;\n  limit: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\nexport interface UseSubscriptionsDataOptions {\n  filters: SubscriptionFilters;\n  enabled?: boolean;\n}\n\nexport interface UseSubscriptionsDataReturn {\n  data: SubscriptionsDataResponse | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\n/**\n * ✅ MODERN SUBSCRIPTIONS DATA HOOK\n * \n * Clean and simple wrapper around useDedupedApi for subscriptions\n * \n * Features:\n * - Automatic request deduplication\n * - Intelligent caching (30s stale time)\n * - Request cancellation and race condition protection\n * - Transform API response to consistent format\n * \n * Usage:\n * ```tsx\n * const { data, loading, error } = useSubscriptionsData({ \n *   filters: { page: 1, status: 'active' }\n * });\n * ```\n */\nexport function useSubscriptionsData(options: UseSubscriptionsDataOptions): UseSubscriptionsDataReturn {\n  const { filters, enabled = true } = options;\n  \n  const result = useDedupedApi({\n    filters,\n    fetchFn: async (filters: SubscriptionFilters) => {\n      console.log('💳 useSubscriptionsData: Fetching with filters:', filters);\n      \n      const response = await subscriptionsApi.search({\n        limit: filters.limit || 20,\n        offset: filters.offset || (filters.page ? (filters.page - 1) * (filters.limit || 20) : 0)\n      });\n\n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch subscriptions');\n      }\n\n      // Transform API response to consistent format\n      const apiData = response.data as any;\n      let subscriptionsArray: any[] = [];\n      let total = 0;\n      \n      console.log('💳 useSubscriptionsData - API Response:', {\n        hasData: !!apiData,\n        isArray: Array.isArray(apiData),\n        hasDataProperty: apiData && Array.isArray(apiData.data)\n      });\n      \n      if (Array.isArray(apiData)) {\n        subscriptionsArray = apiData;\n        total = apiData.length;\n      } else if (apiData && Array.isArray(apiData.data)) {\n        subscriptionsArray = apiData.data;\n        total = apiData.pagination?.total || apiData.data.length;\n      } else {\n        console.error('Invalid subscriptions data structure:', apiData);\n      }\n      \n      const page = filters.page || 1;\n      const limit = filters.limit || 20;\n      const totalPages = Math.ceil(total / limit);\n      \n      const transformed: SubscriptionsDataResponse = {\n        subscriptions: subscriptionsArray,\n        total,\n        page,\n        currentPage: page,\n        limit,\n        hasMore: page < totalPages,\n        totalPages\n      };\n      \n      console.log('✅ useSubscriptionsData: Success:', {\n        subscriptionsCount: transformed.subscriptions.length,\n        total: transformed.total,\n        page: transformed.page\n      });\n      \n      return transformed;\n    },\n    enabled,\n    staleTime: 30000, // 30 seconds cache\n    cacheTime: 300000, // 5 minutes\n    refetchOnWindowFocus: false\n  });\n\n  return result;\n}\n\n","'use client';\n\n// ============================================================================\n// SUBSCRIPTION ERROR HANDLER HOOK\n// ============================================================================\n\nimport { useState, useCallback } from 'react';\nimport { useToasts } from '@rentalshop/ui';\n\nexport interface SubscriptionError {\n  message: string;\n  subscriptionStatus?: string;\n  merchantStatus?: string;\n  code?: string;\n}\n\nexport interface UseSubscriptionErrorReturn {\n  handleSubscriptionError: (error: any) => void;\n  showSubscriptionError: (error: SubscriptionError) => void;\n  clearError: () => void;\n  error: SubscriptionError | null;\n}\n\n/**\n * Hook for handling subscription-related errors\n * Provides centralized error handling and user feedback\n */\nexport function useSubscriptionError(): UseSubscriptionErrorReturn {\n  const [error, setError] = useState<SubscriptionError | null>(null);\n  const { addToast } = useToasts();\n\n  const handleSubscriptionError = useCallback((error: any) => {\n    console.error('Subscription error:', error);\n\n    // Check if it's a subscription error\n    if (error?.error === 'SUBSCRIPTION_ERROR' || error?.code === 'SUBSCRIPTION_REQUIRED') {\n      const subscriptionError: SubscriptionError = {\n        message: error.message || 'Subscription error occurred',\n        subscriptionStatus: error.subscriptionStatus,\n        merchantStatus: error.merchantStatus,\n        code: error.code\n      };\n\n      setError(subscriptionError);\n      showSubscriptionError(subscriptionError);\n    } else {\n      // Handle other errors normally\n      addToast('error', 'Error', error?.message || 'An error occurred');\n    }\n  }, [addToast]);\n\n  const showSubscriptionError = useCallback((error: SubscriptionError) => {\n    const { subscriptionStatus, merchantStatus } = error;\n\n    let message = error.message;\n    let action = '';\n\n    // Customize message based on status\n    if (subscriptionStatus === 'paused') {\n      message = 'Your subscription is paused. Some features may be limited.';\n      action = 'Resume your subscription to access all features.';\n    } else if (subscriptionStatus === 'expired') {\n      message = 'Your subscription has expired. Please renew to continue.';\n      action = 'Choose a new plan to continue using the service.';\n    } else if (subscriptionStatus === 'cancelled') {\n      message = 'Your subscription has been cancelled.';\n      action = 'Choose a new plan to reactivate your account.';\n    } else if (subscriptionStatus === 'past_due') {\n      message = 'Payment is past due. Please update your payment method.';\n      action = 'Update your payment information to avoid service interruption.';\n    } else if (merchantStatus && !['active'].includes(merchantStatus)) {\n      message = `Your merchant account is ${merchantStatus}. Please contact support.`;\n      action = 'Contact support to resolve account issues.';\n    }\n\n    // Show error toast with action\n    addToast('error', 'Subscription Error', action ? `${message}\\n\\n${action}` : message, 8000);\n  }, [addToast]);\n\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  return {\n    handleSubscriptionError,\n    showSubscriptionError,\n    clearError,\n    error\n  };\n}\n\nexport default useSubscriptionError;\n","'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface ThrottledSearchOptions {\n  delay: number;\n  minLength: number;\n  onSearch: (query: string) => void;\n}\n\nexport interface ThrottledSearchReturn {\n  query: string;\n  isSearching: boolean;\n  handleSearchChange: (value: string) => void;\n  clearSearch: () => void;\n  cleanup: () => void;\n  setQuery: (value: string) => void;\n}\n\n// ============================================================================\n// USE THROTTLED SEARCH HOOK\n// ============================================================================\n\nexport function useThrottledSearch(options: ThrottledSearchOptions): ThrottledSearchReturn {\n  const { delay, minLength, onSearch } = options;\n  \n  const [query, setQuery] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const isSearchingRef = useRef(false);\n  const isInitialRender = useRef(true); // Track initial render\n  \n  // ✅ FIX: Use ref to store the latest onSearch callback to avoid recreating handleSearchChange\n  const onSearchRef = useRef(onSearch);\n  \n  // Update ref when onSearch changes\n  useEffect(() => {\n    onSearchRef.current = onSearch;\n  }, [onSearch]);\n\n  // ============================================================================\n  // SEARCH FUNCTIONS\n  // ============================================================================\n\n  const handleSearchChange = useCallback((value: string) => {\n    console.log('🔍 useThrottledSearch: handleSearchChange called with:', value);\n    setQuery(value);\n    \n    // Clear existing timeout\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    // Only search if query meets minimum length\n    if (value.length >= minLength) {\n      console.log('🔍 useThrottledSearch: Query meets minLength, setting up timeout');\n      setIsSearching(true);\n      isSearchingRef.current = true;\n      \n      // Set new timeout for debounced search\n      timeoutRef.current = setTimeout(() => {\n        console.log('🔍 useThrottledSearch: Timeout executing, calling onSearch with:', value);\n        onSearchRef.current(value); // ✅ Use ref instead of direct callback\n        setIsSearching(false);\n        isSearchingRef.current = false;\n      }, delay);\n    } else if (value.length === 0) {\n      console.log('🔍 useThrottledSearch: Query is empty, clearing search');\n      // Clear search when query is empty\n      setIsSearching(false);\n      isSearchingRef.current = false;\n      if (!isInitialRender.current) {\n        onSearchRef.current(''); // ✅ Use ref instead of direct callback\n      }\n    } else {\n      console.log('🔍 useThrottledSearch: Query too short, not searching');\n      // Query too short, not searching\n      setIsSearching(false);\n      isSearchingRef.current = false;\n    }\n  }, [delay, minLength]); // ✅ Remove onSearch from dependencies\n\n  const clearSearch = useCallback(() => {\n    setQuery('');\n    setIsSearching(false);\n    isSearchingRef.current = false;\n    \n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    \n    if (!isInitialRender.current) {\n      onSearchRef.current(''); // ✅ Use ref instead of direct callback\n    }\n  }, []); // ✅ Remove onSearch from dependencies\n\n  const cleanup = useCallback(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n  }, []);\n\n  // ============================================================================\n  // EFFECTS\n  // ============================================================================\n\n  useEffect(() => {\n    // Mark that initial render is complete\n    isInitialRender.current = false;\n    \n    \n    // Cleanup on unmount\n    return cleanup;\n  }, [cleanup]);\n\n  // ============================================================================\n  // RETURN VALUES\n  // ============================================================================\n\n  return {\n    query,\n    isSearching,\n    handleSearchChange,\n    clearSearch,\n    cleanup,\n    setQuery,\n  };\n}\n","'use client';\n\nimport { useState, useCallback } from 'react';\nimport { \n  analyzeError, \n  handleApiErrorForUI, \n  withErrorHandlingForUI,\n  getToastType,\n  type ErrorInfo \n} from '@rentalshop/utils';\nimport { useToasts } from '@rentalshop/ui';\n\n/**\n * Toast Management Hooks\n * \n * This file contains hooks for managing toast notifications and error handling:\n * - useErrorHandler: Full-featured error handling with retry and login functionality\n * - useSimpleErrorHandler: Basic error handling with toast notifications\n * - useToastHandler: General toast functionality for both errors and success messages\n */\n\nexport interface UseErrorHandlerOptions {\n  onLogin?: () => void;\n  onRetry?: () => void;\n  onDismiss?: () => void;\n  autoHandleAuth?: boolean;\n}\n\nexport interface UseErrorHandlerReturn {\n  isLoading: boolean;\n  handleError: (error: any) => ErrorInfo;\n  handleApiCall: <T>(apiCall: () => Promise<T>) => Promise<{ data?: T; error?: ErrorInfo }>;\n  retry: () => void;\n  login: () => void;\n  showErrorToast: (error: any) => void;\n}\n\n/**\n * Hook for handling errors with toast notifications and user actions\n * \n * Features:\n * - Automatic error analysis and categorization\n * - Toast notifications for all error types\n * - Built-in retry and login functionality\n * - Loading state management\n * - Easy integration with API calls\n */\nexport const useErrorHandler = (options: UseErrorHandlerOptions = {}): UseErrorHandlerReturn => {\n  const {\n    onLogin,\n    onRetry,\n    onDismiss,\n    autoHandleAuth = true\n  } = options;\n\n  const [isLoading, setIsLoading] = useState(false);\n  const { addToast } = useToasts();\n\n  const handleError = useCallback((error: any): ErrorInfo => {\n    const errorInfo = analyzeError(error);\n    return errorInfo;\n  }, []);\n\n  const showErrorToast = useCallback((error: any) => {\n    const errorInfo = analyzeError(error);\n    const toastType = getToastType(errorInfo.type);\n    \n    // Create toast message with specific action guidance\n    let toastMessage = errorInfo.message;\n    \n    if (errorInfo.showLoginButton) {\n      if (errorInfo.type === 'auth') {\n        toastMessage += ' Click to log in again.';\n      } else if (errorInfo.type === 'permission') {\n        toastMessage += ' Click to log in with a different account.';\n      } else if (errorInfo.type === 'subscription') {\n        toastMessage += ' Click to log in and upgrade your plan.';\n      } else {\n        toastMessage += ' Click to log in.';\n      }\n    }\n    \n    addToast(toastType, errorInfo.title, toastMessage, 0); // No auto-hide for errors\n  }, [addToast]);\n\n  const handleApiCall = useCallback(async <T>(apiCall: () => Promise<T>) => {\n    setIsLoading(true);\n    \n    try {\n      const result = await withErrorHandlingForUI(apiCall);\n      \n      if (result.error) {\n        showErrorToast(result.error);\n      }\n      \n      return result;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [showErrorToast]);\n\n  const retry = useCallback(() => {\n    if (onRetry) {\n      onRetry();\n    }\n  }, [onRetry]);\n\n  const login = useCallback(() => {\n    if (onLogin) {\n      onLogin();\n    } else if (typeof window !== 'undefined') {\n      // Default login behavior - redirect to login page\n    //   window.location.href = '/login';\n    }\n  }, [onLogin]);\n\n  return {\n    isLoading,\n    handleError,\n    handleApiCall,\n    retry,\n    login,\n    showErrorToast\n  };\n};\n\n/**\n * Simplified hook for basic error handling with toasts\n */\nexport const useSimpleErrorHandler = () => {\n  const { addToast } = useToasts();\n\n  const handleError = useCallback((error: any) => {\n    const errorInfo = analyzeError(error);\n    const toastType = getToastType(errorInfo.type);\n    \n    let toastMessage = errorInfo.message;\n    if (errorInfo.showLoginButton) {\n      if (errorInfo.type === 'auth') {\n        toastMessage += ' Click to log in again.';\n      } else if (errorInfo.type === 'permission') {\n        toastMessage += ' Click to log in with a different account.';\n      } else if (errorInfo.type === 'subscription') {\n        toastMessage += ' Click to log in and upgrade your plan.';\n      } else {\n        toastMessage += ' Click to log in.';\n      }\n    }\n    \n    addToast(toastType, errorInfo.title, toastMessage, 0);\n    return errorInfo;\n  }, [addToast]);\n\n  return {\n    handleError\n  };\n};\n\n/**\n * Toast handler hook that provides both error and success toast functionality\n * This is the recommended way to handle toasts in components\n */\nexport const useToastHandler = () => {\n  const { addToast } = useToasts();\n\n  const showError = useCallback((title: string, message?: string) => {\n    addToast('error', title, message, 0); // No auto-hide for errors\n  }, [addToast]);\n\n  const showSuccess = useCallback((title: string, message?: string) => {\n    addToast('success', title, message, 5000); // 5 second auto-hide for success\n  }, [addToast]);\n\n  const showWarning = useCallback((title: string, message?: string) => {\n    addToast('warning', title, message, 5000);\n  }, [addToast]);\n\n  const showInfo = useCallback((title: string, message?: string) => {\n    addToast('info', title, message, 5000);\n  }, [addToast]);\n\n  const handleError = useCallback((error: any) => {\n    const errorInfo = analyzeError(error);\n    const toastType = getToastType(errorInfo.type);\n    \n    let toastMessage = errorInfo.message;\n    if (errorInfo.showLoginButton) {\n      if (errorInfo.type === 'auth') {\n        toastMessage += ' Click to log in again.';\n      } else if (errorInfo.type === 'permission') {\n        toastMessage += ' Click to log in with a different account.';\n      } else if (errorInfo.type === 'subscription') {\n        toastMessage += ' Click to log in and upgrade your plan.';\n      } else {\n        toastMessage += ' Click to log in.';\n      }\n    }\n    \n    addToast(toastType, errorInfo.title, toastMessage, 0);\n    return errorInfo;\n  }, [addToast]);\n\n  return {\n    showError,\n    showSuccess,\n    showWarning,\n    showInfo,\n    handleError\n  };\n};\n","'use client';\n\nimport { useAuth } from './useAuth';\n\n// ============================================================================\n// USER ROLE HOOK - Simplified role checking\n// ============================================================================\n\nexport interface UserRoleInfo {\n  role: string | undefined;\n  isAdmin: boolean;\n  isMerchant: boolean;\n  isOutletAdmin: boolean;\n  isOutletStaff: boolean;\n  canManageUsers: boolean;\n  canManageProducts: boolean;\n  canManageCategories: boolean;\n  canManageOutlets: boolean;\n  canManageSubscriptions: boolean;\n  canViewBilling: boolean;\n  canExportData: boolean;\n}\n\nexport function useUserRole(): UserRoleInfo {\n  const { user } = useAuth();\n  \n  const role = user?.role;\n  \n  return {\n    role,\n    isAdmin: role === 'ADMIN',\n    isMerchant: role === 'MERCHANT',\n    isOutletAdmin: role === 'OUTLET_ADMIN',\n    isOutletStaff: role === 'OUTLET_STAFF',\n    \n    // Permission checks\n    canManageUsers: role === 'ADMIN' || role === 'MERCHANT' || role === 'OUTLET_ADMIN',\n    canManageProducts: role === 'ADMIN' || role === 'MERCHANT' || role === 'OUTLET_ADMIN',\n    canManageCategories: role === 'ADMIN' || role === 'MERCHANT',\n    canManageOutlets: role === 'ADMIN' || role === 'MERCHANT',\n    canManageSubscriptions: role === 'ADMIN' || role === 'MERCHANT',\n    canViewBilling: role === 'ADMIN' || role === 'MERCHANT',\n    canExportData: role === 'ADMIN' || role === 'MERCHANT',\n  };\n}\n\n// ============================================================================\n// CONVENIENCE HOOKS FOR SPECIFIC PERMISSIONS\n// ============================================================================\n\nexport function useCanManageProducts(): boolean {\n  const { canManageProducts } = useUserRole();\n  return canManageProducts;\n}\n\nexport function useCanManageCategories(): boolean {\n  const { canManageCategories } = useUserRole();\n  return canManageCategories;\n}\n\nexport function useCanManageUsers(): boolean {\n  const { canManageUsers } = useUserRole();\n  return canManageUsers;\n}\n\nexport function useCanManageOutlets(): boolean {\n  const { canManageOutlets } = useUserRole();\n  return canManageOutlets;\n}\n\nexport function useCanManageSubscriptions(): boolean {\n  const { canManageSubscriptions } = useUserRole();\n  return canManageSubscriptions;\n}\n\nexport function useCanViewBilling(): boolean {\n  const { canViewBilling } = useUserRole();\n  return canViewBilling;\n}\n\nexport function useCanExportData(): boolean {\n  const { canExportData } = useUserRole();\n  return canExportData;\n}\n","'use client';\n\nimport { useDedupedApi } from '../utils/useDedupedApi';\nimport { usersApi } from '@rentalshop/utils';\nimport type { UserFilters, User } from '@rentalshop/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface UsersDataResponse {\n  users: User[];\n  total: number;\n  page: number;\n  currentPage: number; // Alias for page\n  limit: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\nexport interface UseUsersDataOptions {\n  filters: UserFilters;\n  enabled?: boolean;\n}\n\nexport interface UseUsersDataReturn {\n  data: UsersDataResponse | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  isStale: boolean;\n}\n\n// ============================================================================\n// HOOK\n// ============================================================================\n\n/**\n * ✅ MODERN USERS DATA HOOK\n * \n * Clean and simple wrapper around useDedupedApi for users\n * \n * Features:\n * - Automatic request deduplication\n * - Intelligent caching (30s stale time)\n * - Request cancellation and race condition protection\n * - Transform API response to consistent format\n * \n * Usage:\n * ```tsx\n * const { data, loading, error } = useUsersData({ \n *   filters: { page: 1, role: 'OUTLET_ADMIN' }\n * });\n * ```\n */\nexport function useUsersData(options: UseUsersDataOptions): UseUsersDataReturn {\n  const { filters, enabled = true } = options;\n  \n  const result = useDedupedApi({\n    filters,\n    fetchFn: async (filters: UserFilters) => {\n      console.log('👤 useUsersData: Fetching with filters:', filters);\n      \n      const response = await usersApi.searchUsers(filters);\n\n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch users');\n      }\n\n      // Transform API response to consistent format\n      const apiData = response.data as any;\n      \n      // Handle both array and object responses\n      let usersData: User[];\n      let total: number;\n      let page: number;\n      let limit: number;\n      let hasMore: boolean;\n      let totalPages: number;\n\n      if (Array.isArray(apiData)) {\n        // Direct array: { success: true, data: [...users], pagination: {...} }\n        const pagination = (response as any).pagination || {};\n        usersData = apiData;\n        total = pagination.total || apiData.length;\n        page = pagination.page || 1;\n        limit = pagination.limit || 25;\n        totalPages = Math.ceil(total / limit);\n        hasMore = pagination.hasMore !== undefined ? pagination.hasMore : page < totalPages;\n      } else {\n        // Nested object: { success: true, data: { users, total, page, ... } }\n        usersData = apiData.users || [];\n        total = apiData.total || 0;\n        page = apiData.page || 1;\n        limit = apiData.limit || 25;\n        totalPages = apiData.totalPages || Math.ceil(total / limit);\n        hasMore = apiData.hasMore !== undefined ? apiData.hasMore : page < totalPages;\n      }\n\n      const transformed: UsersDataResponse = {\n        users: usersData,\n        total,\n        page,\n        currentPage: page, // Alias for compatibility\n        limit,\n        hasMore,\n        totalPages\n      };\n      \n      console.log('✅ useUsersData: Success:', {\n        usersCount: transformed.users.length,\n        total: transformed.total,\n        page: transformed.page\n      });\n      \n      return transformed;\n    },\n    enabled,\n    staleTime: 30000, // 30 seconds cache\n    cacheTime: 300000, // 5 minutes\n    refetchOnWindowFocus: false\n  });\n\n  return result;\n}\n","import { useRouter } from 'next/navigation';\nimport { useState, useCallback, useRef, useEffect } from 'react';\n\ninterface UseOptimisticNavigationOptions {\n  onNavigateStart?: (path: string) => void;\n  onNavigateEnd?: (path: string) => void;\n}\n\n/**\n * Hook for instant navigation with immediate page transition\n * \n * Flow:\n * 1. User clicks → Navigate IMMEDIATELY (0ms, synchronous router.push)\n * 2. Page transitions → Next.js loading.tsx shows skeleton\n * 3. Data loads → Real content displays\n * \n * Key: Direct router.push for instant transitions, no overlay blocking\n */\nexport function useOptimisticNavigation(options: UseOptimisticNavigationOptions = {}) {\n  const router = useRouter();\n  const [navigatingTo, setNavigatingTo] = useState<string | null>(null);\n  const rafRef = useRef<number | null>(null);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (rafRef.current) {\n        cancelAnimationFrame(rafRef.current);\n      }\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  const navigate = useCallback((path: string) => {\n    // Clear any existing timers\n    if (rafRef.current) {\n      cancelAnimationFrame(rafRef.current);\n    }\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    // 1. INSTANT (0ms): Navigate IMMEDIATELY - no delay, no overlay\n    // Direct router.push for instant page transition\n    options.onNavigateStart?.(path);\n    router.push(path);\n    \n    // 2. CLEANUP: Clear state after brief moment\n    timeoutRef.current = setTimeout(() => {\n      setNavigatingTo(null);\n      options.onNavigateEnd?.(path);\n    }, 100); // Short timeout since we're not showing overlay\n  }, [router, options]);\n\n  return {\n    navigate,\n    navigatingTo,\n    isNavigating: navigatingTo !== null\n  };\n}\n\n","'use client';\n\nimport { useDedupedApi } from '../utils/useDedupedApi';\nimport { outletsApi, categoriesApi } from '@rentalshop/utils';\nimport type { OutletFilters, CategoryFilters, Outlet, Category } from '@rentalshop/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n// Simple version (no filters)\nexport interface OutletsResponse {\n  outlets: Outlet[];\n}\n\nexport interface CategoriesResponse extends Array<Category> {}\n\n// Full version (with filters and pagination)\nexport interface OutletsDataResponse {\n  outlets: Outlet[];\n  total: number;\n  totalPages: number;\n  currentPage: number;\n  limit: number;\n  hasMore: boolean;\n}\n\nexport interface CategoriesDataResponse {\n  categories: Category[];\n  total: number;\n  currentPage: number;\n  totalPages: number;\n  limit: number;\n  hasMore: boolean;\n}\n\nexport interface UseOutletsDataOptions {\n  filters: OutletFilters;\n  enabled?: boolean;\n  debounceSearch?: boolean;\n  debounceMs?: number;\n}\n\nexport interface UseCategoriesDataOptions {\n  filters: CategoryFilters;\n  enabled?: boolean;\n  debounceSearch?: boolean;\n  debounceMs?: number;\n}\n\n// ============================================================================\n// SIMPLE HOOKS (No Filters - For Dropdowns)\n// ============================================================================\n\n/**\n * ✅ MODERN OUTLETS DATA HOOK (Simple)\n * - For dropdown filters\n * - No filters, just fetch all outlets\n * - Long cache time (5 minutes)\n */\nexport function useOutletsData() {\n  const { data, loading, error } = useDedupedApi({\n    filters: {}, // No filters needed for outlets\n    fetchFn: async () => {\n      console.log('🔍 useOutletsData: Fetching outlets...');\n      const response = await outletsApi.getOutlets();\n      \n      if (response.success && response.data) {\n        // Handle response structure\n        const outletsData = (response.data as any).outlets || [];\n        \n        console.log('✅ useOutletsData: Transformed data:', {\n          isArray: Array.isArray(outletsData),\n          count: outletsData.length\n        });\n        \n        return { outlets: outletsData };\n      }\n      \n      throw new Error('Failed to fetch outlets');\n    },\n    enabled: true,\n    staleTime: 300000, // 5 minutes - outlets don't change often\n    cacheTime: 600000, // 10 minutes\n    refetchOnMount: false, // Don't refetch on every mount\n    refetchOnWindowFocus: false\n  });\n\n  return {\n    outlets: data?.outlets || [],\n    loading,\n    error\n  };\n}\n\n/**\n * ✅ MODERN CATEGORIES DATA HOOK (Simple)\n * - For dropdown filters\n * - No filters, just fetch all categories\n * - Long cache time (5 minutes)\n */\nexport function useCategoriesData() {\n  const { data, loading, error } = useDedupedApi({\n    filters: {}, // No filters needed for categories\n    fetchFn: async () => {\n      console.log('🔍 useCategoriesData: Fetching categories...');\n      const response = await categoriesApi.getCategories();\n      \n      if (response.success && response.data) {\n        // Handle both array and object responses\n        const categoriesData = Array.isArray(response.data) \n          ? response.data \n          : (response.data as any).categories || [];\n        \n        console.log('✅ useCategoriesData: Transformed data:', {\n          isArray: Array.isArray(categoriesData),\n          count: categoriesData.length\n        });\n        \n        return categoriesData;\n      }\n      \n      throw new Error('Failed to fetch categories');\n    },\n    enabled: true,\n    staleTime: 300000, // 5 minutes - categories don't change often\n    cacheTime: 600000, // 10 minutes\n    refetchOnMount: false, // Don't refetch on every mount\n    refetchOnWindowFocus: false\n  });\n\n  return {\n    categories: Array.isArray(data) ? data : [],\n    loading,\n    error\n  };\n}\n\n// ============================================================================\n// FULL HOOKS (With Filters - For Pages)\n// ============================================================================\n\n/**\n * ✅ MODERN OUTLETS DATA HOOK (Full)\n * - For outlets page with filters\n * - Pagination, search, sorting\n */\nexport function useOutletsWithFilters(options: UseOutletsDataOptions) {\n  const { filters, enabled = true, debounceSearch = true, debounceMs = 500 } = options;\n\n  const { data, loading, error, refetch } = useDedupedApi({\n    filters,\n    fetchFn: async (filters: OutletFilters) => {\n      console.log('🔍 useOutletsWithFilters: Fetching with filters:', filters);\n      const response = await outletsApi.getOutlets(filters);\n      \n      if (response.success && response.data) {\n        const apiData = response.data as any;\n        \n        return {\n          outlets: apiData.outlets || [],\n          total: apiData.total || 0,\n          totalPages: apiData.totalPages || 1,\n          currentPage: apiData.page || 1,\n          limit: apiData.limit || 25,\n          hasMore: apiData.hasMore || false\n        };\n      }\n      \n      throw new Error('Failed to fetch outlets');\n    },\n    enabled,\n    staleTime: debounceSearch ? 5000 : 30000,\n    cacheTime: 300000,\n    refetchOnMount: true,\n    refetchOnWindowFocus: false\n  });\n\n  return {\n    data,\n    loading,\n    error,\n    refetch\n  };\n}\n\n/**\n * ✅ MODERN CATEGORIES DATA HOOK (Full)\n * - For categories page with filters\n * - Pagination, search, sorting\n */\nexport function useCategoriesWithFilters(options: UseCategoriesDataOptions) {\n  const { filters, enabled = true, debounceSearch = false, debounceMs = 0 } = options;\n\n  const { data, loading, error, refetch } = useDedupedApi({\n    filters,\n    fetchFn: async (filters: CategoryFilters) => {\n      console.log('🔍 useCategoriesWithFilters: Fetching with filters:', filters);\n      const response = await categoriesApi.searchCategories(filters);\n      \n      if (response.success && response.data) {\n        const apiData = response.data as any;\n        \n        return {\n          categories: apiData.categories || [],\n          total: apiData.total || 0,\n          currentPage: apiData.page || 1,\n          totalPages: apiData.totalPages || 1,\n          limit: apiData.limit || 25,\n          hasMore: apiData.hasMore || false\n        };\n      }\n      \n      throw new Error('Failed to fetch categories');\n    },\n    enabled,\n    staleTime: debounceSearch ? 5000 : 30000,\n    cacheTime: 300000,\n    refetchOnMount: true,\n    refetchOnWindowFocus: false\n  });\n\n  return {\n    data,\n    loading,\n    error,\n    refetch\n  };\n}"],"mappings":"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","names":["import_react","import_utils","import_react","import_react","subscriptionsApi","isActive","isExpired","isTrial","error","action","import_react","import_utils","import_react","error","cached","import_utils","filters","import_utils","filters","import_utils","filters","import_react","import_utils","filters","import_utils","filters","import_react","import_utils","filters","import_utils","filters","import_react","error","import_react","import_react","import_utils","import_ui","import_utils","filters","import_react","import_utils","filters"]}