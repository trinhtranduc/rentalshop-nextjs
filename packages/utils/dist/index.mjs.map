{"version":3,"sources":["../src/config/api.ts","../../../node_modules/node_modules/.pnpm/has-flag@4.0.0/node_modules/has-flag/index.js","../../../node_modules/node_modules/.pnpm/supports-color@7.2.0/node_modules/supports-color/index.js","../../../node_modules/node_modules/.pnpm/supports-hyperlinks@3.2.0/node_modules/supports-hyperlinks/index.js","../../../node_modules/@prisma/internals/package.json","../../../node_modules/node_modules/.pnpm/@prisma+engines-version@6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a/node_modules/@prisma/engines-version/package.json","../../../node_modules/node_modules/.pnpm/@prisma+engines-version@6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a/node_modules/@prisma/engines-version/index.js","../../../node_modules/node_modules/.pnpm/min-indent@1.0.1/node_modules/min-indent/index.js","../../../node_modules/node_modules/.pnpm/indent-string@4.0.0/node_modules/indent-string/index.js","../../../node_modules/node_modules/.pnpm/dotenv@16.5.0/node_modules/dotenv/package.json","../../../node_modules/node_modules/.pnpm/dotenv@16.5.0/node_modules/dotenv/lib/main.js","../../../node_modules/node_modules/.pnpm/new-github-issue-url@0.2.1/node_modules/new-github-issue-url/index.js","../../../node_modules/node_modules/.pnpm/js-levenshtein@1.1.6/node_modules/js-levenshtein/index.js","../../../node_modules/@prisma/ts-builders/src/TypeBuilder.ts","../../../node_modules/@prisma/ts-builders/src/KeyType.ts","../../../node_modules/@prisma/client/src/runtime/index.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/index.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/defineExtension.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/getExtensionContext.ts","../../../node_modules/@prisma/client/src/runtime/core/public/index.ts","../../../node_modules/@prisma/client/src/runtime/core/public/validator.ts","../../../node_modules/node_modules/.pnpm/kleur@4.1.5/node_modules/kleur/colors.mjs","../../../node_modules/@prisma/debug/src/index.ts","../../../node_modules/@prisma/get-platform/src/assertNodeAPISupported.ts","../../../node_modules/@prisma/get-platform/src/binaryTargets.ts","../../../node_modules/@prisma/get-platform/src/getNodeAPIName.ts","../../../node_modules/@prisma/get-platform/src/getPlatform.ts","../../../node_modules/node_modules/.pnpm/ts-pattern@5.6.2/node_modules/ts-pattern/src/internals/symbols.ts","../../../node_modules/node_modules/.pnpm/ts-pattern@5.6.2/node_modules/ts-pattern/src/internals/helpers.ts","../../../node_modules/node_modules/.pnpm/ts-pattern@5.6.2/node_modules/ts-pattern/src/patterns.ts","../../../node_modules/node_modules/.pnpm/ts-pattern@5.6.2/node_modules/ts-pattern/src/errors.ts","../../../node_modules/node_modules/.pnpm/ts-pattern@5.6.2/node_modules/ts-pattern/src/match.ts","../../../node_modules/@prisma/get-platform/src/logger.ts","../../../node_modules/node_modules/.pnpm/ansi-escapes@7.0.0/node_modules/ansi-escapes/base.js","../../../node_modules/node_modules/.pnpm/environment@1.1.0/node_modules/environment/index.js","../../../node_modules/node_modules/.pnpm/terminal-link@4.0.0/node_modules/terminal-link/index.js","../../../node_modules/@prisma/get-platform/src/link.ts","../../../node_modules/@prisma/internals/src/utils/getVersionFromPackageJson.ts","../../../node_modules/@prisma/internals/src/client/getClientEngineType.ts","../../../node_modules/@prisma/driver-adapter-utils/src/error.ts","../../../node_modules/@prisma/driver-adapter-utils/src/result.ts","../../../node_modules/@prisma/driver-adapter-utils/src/binder.ts","../../../node_modules/@prisma/engines/src/index.ts","../../../node_modules/@prisma/internals/src/utils/chmodPlusX.ts","../../../node_modules/@prisma/internals/src/utils/handleEngineLoadingErrors.ts","../../../node_modules/node_modules/.pnpm/strip-indent@4.0.0/node_modules/strip-indent/index.js","../../../node_modules/@prisma/internals/src/utils/prismaPostgres.ts","../../../node_modules/@prisma/internals/src/get-generators/utils/printGeneratorConfig.ts","../../../node_modules/@prisma/internals/src/logger.ts","../../../node_modules/@prisma/internals/src/utils/assertAlways.ts","../../../node_modules/@prisma/internals/src/utils/assertNever.ts","../../../node_modules/node_modules/.pnpm/ansi-regex@6.1.0/node_modules/ansi-regex/index.js","../../../node_modules/node_modules/.pnpm/strip-ansi@7.1.0/node_modules/strip-ansi/index.js","../../../node_modules/@prisma/internals/src/utils/path.ts","../../../node_modules/@prisma/internals/src/utils/tryLoadEnvs.ts","../../../node_modules/@prisma/internals/src/dotenvExpand.ts","../../../node_modules/@prisma/internals/src/utils/hasOwnProperty.ts","../../../node_modules/@prisma/internals/src/utils/mapObjectValues.ts","../../../node_modules/@prisma/internals/src/utils/max.ts","../../../node_modules/@prisma/internals/src/utils/setClassName.ts","../../../node_modules/@prisma/internals/src/warnOnce.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/PrismaClientInitializationError.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/PrismaClientKnownRequestError.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/PrismaClientRustPanicError.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/PrismaClientUnknownRequestError.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/PrismaClientValidationError.ts","../../../node_modules/@prisma/client-common/src/Cache.ts","../../../node_modules/@prisma/client-common/src/casing.ts","../../../node_modules/@prisma/client-common/src/Dictionary.ts","../../../node_modules/@prisma/client-common/src/lazyProperty.ts","../../../node_modules/@prisma/client-common/src/runtimeDataModel.ts","../../../node_modules/@prisma/client/src/runtime/utils/date.ts","../../../node_modules/node_modules/.pnpm/decimal.js@10.5.0/node_modules/decimal.js/decimal.mjs","../../../node_modules/@prisma/client/src/runtime/utils/decimalJsLike.ts","../../../node_modules/@prisma/dmmf/src/index.ts","../../../node_modules/@prisma/dmmf/src/convert.ts","../../../node_modules/@prisma/dmmf/src/dmmf.ts","../../../node_modules/@prisma/client/src/runtime/utils/createErrorMessageWithContext.ts","../../../node_modules/@prisma/client/src/runtime/utils/SourceFileSlice.ts","../../../node_modules/@prisma/client/src/runtime/highlight/theme.ts","../../../node_modules/@prisma/client/src/runtime/highlight/prism.ts","../../../node_modules/@prisma/client/src/runtime/highlight/highlight.ts","../../../node_modules/@prisma/client/src/runtime/utils/dedent.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/applyValidationError.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/applyUnionError.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/ObjectFieldSuggestion.ts","../../../node_modules/@prisma/ts-builders/src/index.ts","../../../node_modules/@prisma/ts-builders/src/Writer.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/ArrayField.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/base.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/FormattedString.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/Value.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/ArrayValue.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/ObjectValue.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/ScalarValue.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/SuggestionObjectValue.ts","../../../node_modules/@prisma/client/src/runtime/core/model/FieldRef.ts","../../../node_modules/@prisma/client/src/runtime/core/types/exported/ObjectEnums.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/ObjectField.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/ArgumentsRenderingTree.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/throwValidationException.ts","../../../node_modules/@prisma/client/src/runtime/core/model/utils/dmmfToJSModelName.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/resultUtils.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/MergedExtensionsList.ts","../../../node_modules/@prisma/client/src/runtime/core/model/Param.ts","../../../node_modules/@prisma/client/src/runtime/core/types/exported/Skip.ts","../../../node_modules/@prisma/client/src/runtime/core/jsonProtocol/serializeJsonQuery.ts","../../../node_modules/@prisma/client/src/runtime/core/metrics/MetricsClient.ts","../../../node_modules/@prisma/client/src/runtime/core/runtimeDataModel.ts","../../../node_modules/@prisma/client/src/runtime/core/types/exported/TypedSql.ts","../../../node_modules/@prisma/client/src/runtime/getPrismaClient.ts","../../../node_modules/node_modules/.pnpm/sql-template-tag@5.2.1/node_modules/sql-template-tag/src/index.ts","../../../node_modules/@prisma/client/src/runtime/core/compositeProxy/addObjectProperties.ts","../../../node_modules/@prisma/client/src/runtime/core/compositeProxy/addProperty.ts","../../../node_modules/@prisma/client/src/runtime/core/compositeProxy/cacheProperties.ts","../../../node_modules/@prisma/client/src/runtime/core/model/utils/defaultProxyHandlers.ts","../../../node_modules/@prisma/client/src/runtime/core/compositeProxy/createCompositeProxy.ts","../../../node_modules/@prisma/client/src/runtime/core/compositeProxy/removeProperties.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/utils/getBatchRequestPayload.ts","../../../node_modules/@prisma/client/src/runtime/core/errorRendering/prettyPrintArguments.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/utils/prismaGraphQLToJSError.ts","../../../node_modules/node_modules/.pnpm/stacktrace-parser@0.1.11/node_modules/stacktrace-parser/dist/stack-trace-parser.esm.js","../../../node_modules/@prisma/client/src/runtime/utils/CallSite.ts","../../../node_modules/@prisma/client/src/runtime/core/model/aggregates/utils/aggregateMap.ts","../../../node_modules/@prisma/client/src/runtime/core/model/aggregates/aggregate.ts","../../../node_modules/@prisma/client/src/runtime/core/model/aggregates/count.ts","../../../node_modules/@prisma/client/src/runtime/core/model/aggregates/groupBy.ts","../../../node_modules/@prisma/client/src/runtime/core/model/applyAggregates.ts","../../../node_modules/@prisma/client/src/runtime/core/model/applyFieldsProxy.ts","../../../node_modules/@prisma/client/src/runtime/utils/deep-set.ts","../../../node_modules/@prisma/client/src/runtime/core/model/applyFluent.ts","../../../node_modules/@prisma/client/src/runtime/core/model/applyModel.ts","../../../node_modules/@prisma/client/src/runtime/core/model/utils/jsToDMMFModelName.ts","../../../node_modules/@prisma/client/src/runtime/core/model/applyModelsAndClientExtensions.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/$extends.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/applyResultExtensions.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/visitQueryResult.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/applyAllResultExtensions.ts","../../../node_modules/@prisma/client/src/runtime/core/types/exported/itxClientDenyList.ts","../../../node_modules/@prisma/client/src/runtime/utils/deepCloneArgs.ts","../../../node_modules/@prisma/client/src/runtime/core/extensions/applyQueryExtensions.ts","../../../node_modules/@prisma/client/src/runtime/core/init/checkPlatformCaching.ts","../../../node_modules/@prisma/client/src/runtime/core/init/getDatasourceOverrides.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/resolveEnginePath.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/engine-not-found/addRuntimeToYourBinaryTargets.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/engine-not-found/queryEngineCannotBeFound.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/engine-not-found/theseLocationsHaveBeenSearched.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/engine-not-found/binaryTargetsWasIncorrectlyPinned.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/weWouldAppreciateIfYouCouldShareInfo.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/engine-not-found/howToFixEngineNotFoundNextjs.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/engine-not-found/bundlerHasTamperedWithEngineCopy.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/engine-not-found/nativeGeneratedOnDifferentPlatform.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/errors/engine-not-found/toolingHasTamperedWithEngineCopy.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/utils/maskQuery.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/utils/normalizeLogs.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/utils/util.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/utils/getErrorMessageWithLink.ts","../../../node_modules/@prisma/client-engine-runtime/src/utils.ts","../../../node_modules/@prisma/client-engine-runtime/src/json-protocol.ts","../../../node_modules/@prisma/client/package.json","../../../node_modules/@prisma/client/src/runtime/utils/getRuntime.ts","../../../node_modules/@prisma/client/src/runtime/core/init/resolveDatasourceUrl.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/PrismaClientError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/DataProxyError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/utils/setRetryable.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/InvalidDatasourceError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/accelerate/getUrlAndApiKey.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/accelerate/HeaderBuilder.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/utils/EngineTimestamp.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/ForcedRetryError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/NotImplementedYetError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/DataProxyAPIError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/SchemaMissingError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/BadRequestError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/EngineHealthcheckTimeoutError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/EngineStartupError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/EngineVersionNotSupportedError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/GatewayTimeoutError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/InteractiveTransactionError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/InvalidRequestError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/NotFoundError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/ServerError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/UnauthorizedError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/UsageExceededError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/utils/responseToError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/utils/backOff.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/utils/base64.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/utils/checkForbiddenMetrics.ts","../../../node_modules/@prisma/engines/package.json","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/errors/NetworkError.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/utils/request.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/utils/getClientVersion.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/data-proxy/DataProxyEngine.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/common/utils/getInteractiveTransactionId.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/library/DefaultLibraryLoader.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/library/WasmLibraryLoader.ts","../../../node_modules/@prisma/client/src/runtime/core/engines/library/LibraryEngine.ts","../../../node_modules/@prisma/client/src/runtime/core/init/validateEngineInstanceConfig.ts","../../../node_modules/@prisma/client/src/runtime/core/init/getEngineInstance.ts","../../../node_modules/@prisma/client/src/runtime/core/init/getPreviewFeatures.ts","../../../node_modules/@prisma/client/src/runtime/core/raw-query/rawCommandArgsMapper.ts","../../../node_modules/@prisma/client/src/runtime/utils/mssqlPreparedStatement.ts","../../../node_modules/@prisma/client/src/runtime/utils/serializeRawParameters.ts","../../../node_modules/@prisma/client/src/runtime/core/raw-query/rawQueryArgsMapper.ts","../../../node_modules/@prisma/client/src/runtime/core/request/createPrismaPromise.ts","../../../node_modules/@prisma/client/src/runtime/core/tracing/TracingHelper.ts","../../../node_modules/@prisma/client/src/runtime/core/transaction/utils/createLockCountPromise.ts","../../../node_modules/@prisma/client/src/runtime/getLogLevel.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/ErrorWithBatchIndex.ts","../../../node_modules/@prisma/client/src/runtime/core/jsonProtocol/getBatchId.ts","../../../node_modules/@prisma/client/src/runtime/core/jsonProtocol/isWrite.ts","../../../node_modules/@prisma/client/src/runtime/DataLoader.ts","../../../node_modules/@prisma/client/src/runtime/utils/deserializeRawResults.ts","../../../node_modules/@prisma/client/src/runtime/RequestHandler.ts","../../../node_modules/@prisma/client/src/runtime/utils/clientVersion.ts","../../../node_modules/@prisma/client/src/runtime/utils/validatePrismaClientOptions.ts","../../../node_modules/@prisma/client/src/runtime/core/errors/PrismaClientConstructorValidationError.ts","../../../node_modules/@prisma/client/src/runtime/utils/waitForBatch.ts","../../../node_modules/@prisma/client/src/runtime/strictEnum.ts","../../../node_modules/@prisma/client/src/runtime/warnEnvConflicts.ts","../../../node_modules/.prisma/client/index.js","../../../node_modules/.prisma/client/default.js","../../../node_modules/@prisma/client/default.js","../src/core/string-utils.ts","../src/core/function-utils.ts","../src/core/common.ts","../src/core/errors.ts","../src/core/pricing-calculator.ts","../../database/src/client.ts","../../database/src/subscription.ts","../../database/src/order-number-generator.ts","../../database/src/audit.ts","../src/core/subscription-manager.ts","../src/core/proration.ts","../src/core/badge-utils.tsx","../../../node_modules/lucide-react/src/defaultAttributes.ts","../../../node_modules/lucide-react/src/createLucideIcon.ts","../../../node_modules/lucide-react/src/icons/alert-triangle.ts","../../../node_modules/lucide-react/src/icons/building-2.ts","../../../node_modules/lucide-react/src/icons/check-circle.ts","../../../node_modules/lucide-react/src/icons/dollar-sign.ts","../../../node_modules/lucide-react/src/icons/file-text.ts","../../../node_modules/lucide-react/src/icons/map-pin.ts","../../../node_modules/lucide-react/src/icons/package.ts","../../../node_modules/lucide-react/src/icons/shield.ts","../../../node_modules/lucide-react/src/icons/shopping-cart.ts","../../../node_modules/lucide-react/src/icons/store.ts","../../../node_modules/lucide-react/src/icons/trending-down.ts","../../../node_modules/lucide-react/src/icons/trending-up.ts","../../../node_modules/lucide-react/src/icons/user-check.ts","../../../node_modules/lucide-react/src/icons/user-x.ts","../../../node_modules/lucide-react/src/icons/user.ts","../../../node_modules/lucide-react/src/icons/x-circle.ts","../src/core/customer-utils.tsx","../src/core/product-utils.tsx","../src/core/user-utils.tsx","../src/core/validation.ts","../src/core/currency.ts","../src/core/payment-gateways/index.ts","../src/core/order-number-manager.ts","../src/core/date.ts","../src/core/audit-config.ts","../src/core/audit-helper.ts","../src/api/auth.ts","../src/api/products.ts","../src/api/customers.ts","../src/api/orders.ts","../src/api/outlets.ts","../src/api/merchants.ts","../src/api/analytics.ts","../src/api/categories.ts","../src/api/notifications.ts","../src/api/profile.ts","../src/api/users.ts","../src/api/plans.ts","../src/api/billing-cycles.ts","../src/api/payments.ts","../src/api/audit-logs.ts","../src/api/settings.ts","../src/api/subscriptions.ts","../src/api/system.ts","../src/api/calendar.ts","../src/api/upload.ts","../src/config/database.ts","../src/config/environment.ts","../src/performance.ts"],"names":["require_has_flag","__commonJSMin","exports","module","flag","argv","prefix","position","terminatorPosition","require_supports_color","os","tty","hasFlag","env","forceColor","translateLevel","level","supportsColor","haveStream","streamIsTTY","min","osRelease","sign","version","getSupportLevel","stream","require_supports_hyperlinks","parseVersion","versionString","m","versions","n","supportsHyperlink","CI","FORCE_HYPERLINK","NETLIFY","TEAMCITY_VERSION","TERM_PROGRAM","TERM_PROGRAM_VERSION","VTE_VERSION","TERM","require_package","require_engines_version","require_min_indent","string","match","r","a","require_indent_string","count","options","regex","require_main","fs","path","crypto","packageJson","LINE","parse","src","obj","lines","key","value","maybeQuote","_parseVault","vaultPath","_vaultPath","result","DotenvModule","err","keys","_dotenvKey","length","decrypted","i","attrs","_instructions","error","_warn","message","_debug","dotenvKey","uri","environment","environmentKey","ciphertext","possibleVaultPath","filepath","_resolveHome","envPath","_configVault","parsed","processEnv","configDotenv","dotenvPath","encoding","debug","optionPaths","lastError","parsedAll","e","config","decrypt","encrypted","keyStr","nonce","authTag","aesgcm","isRange","invalidKeyLength","decryptionFailed","populate","override","require_new_github_issue_url","repoUrl","url","types","type","require_js_levenshtein","_min","d0","d1","d2","bx","ay","b","tmp","la","lb","offset","x","y","d3","dd","dy","bx0","bx1","bx2","bx3","vector","len","init_TypeBuilder","__esmMin","init_KeyType","index_exports","__export","src_exports","Debug","decimal_default","extensions_exports","MetricsClient","PrismaClientInitializationError","PrismaClientKnownRequestError","PrismaClientRustPanicError","PrismaClientUnknownRequestError","PrismaClientValidationError","public_exports","Sql","createParam","defineDmmfProperty","deserializeJsonResponse","deserializeRawResult","dmmfToRuntimeDataModel","empty","getPrismaClient","getRuntime","join","makeStrictEnum","makeTypedQueryFactory","objectEnumValues","raw","serializeJsonQuery","skip","sql","warnEnvConflicts","warnOnce","__toCommonJS","defineExtension","getExtensionContext","ext","client","that","validator","_args","args","colors_exports","$","bgBlack","bgBlue","bgCyan","bgGreen","bgMagenta","bgRed","bgWhite","bgYellow","black","blue","bold","cyan","dim","gray","green","grey","hidden","inverse","italic","magenta","red","reset","strikethrough","underline","white","yellow","FORCE_COLOR","NODE_DISABLE_COLORS","NO_COLOR","isTTY","init","rgx","open","close","txt","MAX_ARGS_HISTORY","COLORS","argsHistory","lastTimestamp","lastColor","topProps","namespace","prev","listenedNamespaces","s","isListened","listenedNamespace","isExcluded","format","rest","debugCreate","instanceProps","debugCall","enabled","color","log","stringArgs","arg","safeStringify","ms","_","prop","indent","cache","getLogs","numChars","logs","clearLogs","src_default","import_fs","assertNodeAPISupported","customLibraryPath","binaryTargets","NODE_API_QUERY_ENGINE_URL_BASE","getNodeAPIName","binaryTarget","isUrl","import_child_process","import_promises","import_os","matcher","Symbol","for","isVariadic","anonymousSelectKey","isObject","Boolean","isMatcher","symbols","matchPattern","pattern","select","matched","selections","Object","forEach","Array","isArray","startPatterns","endPatterns","variadicPatterns","subpattern","push","Error","startValues","slice","endValues","middleValues","Infinity","every","subPattern","Reflect","ownKeys","k","matcherType","is","getSelectionKeys","_pattern$symbols$matc","_pattern$symbols$matc2","_pattern$symbols$matc3","call","flatMap","values","xs","f","reduce","acc","concat","chainable","assign","optional","and","p2","intersection","or","union","selector","undefined","patterns","p","some","when","predicate","isNumber","isString","isBigInt","any","stringChainable","startsWith","str","start","endsWith","end","minLength","maxLength","max","includes","substr","expr","numberChainable","between","lt","gt","lte","gte","int","Number","isInteger","finite","isFinite","positive","negative","number","bigintChainable","betweenBigInt","bigint","boolean","symbol","nullish","nonNullable","NonExhaustiveError","constructor","input","displayedValue","JSON","stringify","super","this","unmatched","MatchExpression","state","with","handler","hasSelections","selected","otherwise","exhaustive","run","returnType","import_util","tags","should","warn","optionalParams","exec","cp","supportedLibSSLVersions","getos","platform","arch","getCommandOutput","distroInfo","resolveDistro","archFromUname","getArchFromUname","libsslSpecificPaths","computeLibSSLSpecificPaths","libssl","getSSLVersion","parseDistro","osReleaseInput","idRegex","idLikeRegex","idMatch","id","idLikeMatch","idLike","z","originalDistro","osReleaseFile","parseOpenSSLVersion","partialVersion","sanitiseSSLVersion","parseLibSSLVersion","sanitisedVersion","isLibssl1x","versionSplit","familyDistro","excludeLibssl0x","libsslFilenameFromSpecificPath","findLibSSLInLocations","libsslVersion","libsslFilename","openSSLVersionLine","openSSLVersion","directories","dir","findLibSSL","directory","getBinaryTargetForCurrentPlatform","getPlatformInfoMemoized","isPlatformInfoDefined","getPlatformInfo","memoizedPlatformWithInfo","getBinaryTargetForCurrentPlatformInternal","targetDistro","defaultLibssl","additionalMessage","defaultDistro","base","discardError","runPromise","command","base_exports","beep","clearScreen","clearTerminal","cursorBackward","cursorDown","cursorForward","cursorGetPosition","cursorHide","cursorLeft","cursorMove","cursorNextLine","cursorPrevLine","cursorRestorePosition","cursorSavePosition","cursorShow","cursorTo","cursorUp","enterAlternativeScreen","eraseDown","eraseEndLine","eraseLine","eraseLines","eraseScreen","eraseStartLine","eraseUp","exitAlternativeScreen","iTerm","image","link","scrollDown","scrollUp","import_node_process","isBrowser","isNode","isBun","isDeno","isElectron","isJsDom","isWebWorker","isDedicatedWorker","isSharedWorker","isServiceWorker","isMacOs","isWindows","isLinux","isIos","isAndroid","ESC","OSC","BEL","SEP","isTerminalApp","process","cwdFunction","returnValue","clear","text","data","cwd","hasX","hasY","import_supports_hyperlinks","terminalLink","target","supportsHyperlinks","getClientEngineType","generatorConfig","engineTypeFromEnvVar","getEngineTypeFromEnvVar","getDefaultEngineType","engineType","isDriverAdapterError","ok","fn","ErrorRegistryInternal","bindAdapter","adapter","errorRegistry","boundAdapter","wrapAsync","ctx","bindTransaction","wrapSync","transaction","registry","import_engines_version","import_path","getEnginesPath","chmodPlusX","file","newMode","base8","handleLibraryLoadingErrors","systemLibraryNotFound","library","hasLinkingProblem","referToSystemRequirementsDocs","errorTitle","potentialReasonMessage","import_min_indent","stripIndent","minIndent","PRISMA_POSTGRES_PROVIDER","PRISMA_POSTGRES_PROTOCOL","isPrismaPostgres","connectionString","isPrismaPostgresDev","host","import_indent_string","printGeneratorConfig","GeneratorConfigClass","provider","getOriginalBinaryTargetsValue","printDatamodelObject","binaryTargetsFromEnvVar","object","curr","niceStringify","element","logger_exports","info","query","assertAlways","condition","assertNever","errorMessage","ansiRegex","onlyFirst","stripAnsi","pathToPosix","filePath","import_dotenv","dotenvExpand","interpolate","envValue","newEnv","parts","replacePart","configKey","processKey","tryLoadEnvs","rootEnvPath","schemaEnvPath","opts","rootEnvInfo","loadEnv","checkForConflicts","schemaEnvInfo","pathsEqual","parsedRootEnv","areNotTheSame","envConfig","dotenv","conflicts","relativeRootEnvPath","relativeEnvPath","conflict","exists","dotenvOutput","path1","path2","hasOwnProperty","mapObjectValues","mapper","maxWithComparator","items","comparator","setClassName","classObject","name","alreadyWarned","_PrismaClientInitializationError","clientVersion","errorCode","code","meta","batchRequestIdx","Cache","create","cached","uncapitalize","self","keyBy","collection","lazyProperty","compute","resultContainer","dmmfDataModel","buildMapForRuntime","list","isDate","isValidDate","date","EXP_LIMIT","MAX_DIGITS","NUMERALS","LN10","PI","DEFAULTS","inexact","quadrant","external","decimalError","invalidArgument","precisionLimitExceeded","cryptoUnavailable","tag","mathfloor","mathpow","isBinary","isHex","isOctal","isDecimal","BASE","LOG_BASE","MAX_SAFE_INTEGER","LN10_PRECISION","PI_PRECISION","P","finalise","Ctor","j","xdL","ydL","xd","yd","ys","pr","rm","cosine","toLessThanHalfPi","rep","sd","t","t3","t3plusx","digitsToString","divide","w","d","one","tinyPow","taylorSeries","cosh2_x","d8","sinh2_x","d5","d16","d20","getPi","wpr","xsd","halfPi","px","x2","isBase10","denominator","inf","num","guard","naturalLogarithm","getLn10","checkRoundingDigits","xe","xLTy","getBase10Exponent","q","naturalExponential","carry","getPrecision","sine","rL","toStringBinary","dp","checkInt32","finiteToString","maxD","n0","n1","yn","intPow","ws","indexOfLastWord","getZeroString","repeating","di","rd","convertBase","baseIn","baseOut","arr","arrL","strL","cos2x","multiplyInteger","temp","compare","aL","bL","subtract","cmp","logBase","more","prod","prodL","qd","rem","remL","rem0","xi","xL","yd0","yL","yz","isTruncated","digits","roundUp","xdi","out","isExp","nonFiniteToString","zs","truncate","isOdd","maxOrMin","pow","sum","c","c0","numerator","x1","parseDecimal","parseOther","divisor","isFloat","Decimal","sin2_x","isHyperbolic","u","isNeg","pi","abs","acos","acosh","add","asin","asinh","atan","atanh","atan2","cbrt","ceil","clamp","v","useDefaults","ps","cos","cosh","clone","isDecimalInstance","div","exp","floor","hypot","ln","log10","log2","mod","mul","random","round","sin","sinh","sqrt","sub","tan","tanh","trunc","isDecimalJsLike","ModelAction","datamodelEnumToSchemaEnum","datamodelEnum","theme","identity","_self","uniqueId","Prism","tokens","Token","anyTokens","o","deepClone","visited","redef","lang","inside","before","insert","root","grammar","ret","token","newToken","old","DFS","callback","objId","property","propertyType","language","strarr","index","startPos","oneshot","lookbehind","greedy","lookbehindLength","alias","flags","pos","from","to","delNum","after","wrapped","hooks","callbacks","content","matchedStr","getColorForSyntaxKind","syntaxKind","highlightTS","highlight","dedent","SourceFileSlice","_SourceFileSlice","firstLine","lineNumber","mapFn","idx","newLines","line","atLine","fromLine","toLine","slicedLines","highlighted","colorsEnabled","source","colorsDisabled","getRawTemplateParameters","originalMethod","isPanic","callArguments","getTemplateParameters","callsite","colors","templateParameters","callLocation","contextFirstLine","invocationLine","invocationLineIndent","getIndent","invocationCallCode","findPrismaActionCall","numberColumnWidth","indentValue","indentString","allActions","openingBraceIndex","statementStart","spaceCount","stringifyErrorMessage","functionName","location","contextLines","introSuffix","stringifyLocationInFile","contextLineParts","createErrorMessageWithContext","import_js_levenshtein","applyUnionError","globalOmit","allErrors","flattenUnionError","merged","mergeInvalidArgumentTypeErrors","bestError","getBestScoringError","applyValidationError","errorList","invalidArgsError","prevError","uniqueConcat","head","tail","errors","errorA","errorB","aPathLength","getCombinedPathLength","bPathLength","getErrorTypeScore","score","ObjectFieldSuggestion","writer","Writer","startingIndent","context","separator","writeItem","item","last","afterNextNewLineCallback","ArrayField","noop","inactiveColors","activeColors","fieldsSeparator","FormattedString","contents","paddingSize","Value","ArrayValue","output","ObjectValue","_ObjectValue","field","suggestion","firstField","segment","nextField","selection","next","thisParent","parent","nextParent","include","fields","ScalarValue","SuggestionObjectValue","applyMutuallyExclusiveFieldsError","applyIncludeOnScalarError","applyEmptySelectionError","applyUnknownSelectionFieldError","applyInvalidSelectionValueError","applyUnknownArgumentError","applyUnknownInputFieldError","applyRequiredArgumentMissingError","applyInvalidArgumentTypeError","applyInvalidArgumentValueError","applyValueTooLargeError","applySomeFieldsMissingError","applyTooManyFieldsGivenError","argsTree","selectionPath","splitPath","outputType","msg","availableOptionsMessage","subSelection","omit","applyEmptySelectionErrorOmit","applyEmptySelectionErrorSelect","applyEmptySelectionErrorGlobalOmit","omitValue","isEmpty","addSelectionSuggestions","suggestedOmitConfig","omitSuggestion","parentPath","fieldName","fieldValue","locateResult","locateSelectionField","addInclusionSuggestions","addOmissionSuggestions","argName","addArgumentsSuggestions","unknownArgumentMessage","argParentPath","argParent","addInputSuggestions","getSuggestion","existingField","argumentName","objectSuggestion","typeName","getInputTypeName","dependentArgumentName","description","expected","joinWithPreposition","printedValue","argument","providedArguments","argumentsParent","inputType","preposition","itemsCopy","lastItem","MAX_EDIT_DISTANCE","minDistance","option","editDistance","levenshtein","FieldRefImpl","modelName","fieldType","isList","isEnum","listPrefix","enumPrefix","isFieldRef","secret","representations","ObjectEnumValue","NullTypesEnumValue","DbNull","_a","#_brand_DbNull","JsonNull","#_brand_JsonNull","AnyNull","#_brand_AnyNull","ObjectField","ArgumentsRenderingTree","renderer","messageRenderer","buildArgumentsRenderingTree","buildInputObject","inputObject","buildInputValue","dateStr","buildInputArray","array","renderArgsTree","errorFormat","throwValidationException","renderedArgs","messageWithContext","dmmfToJSModelName","getComputedFields","previousComputedFields","extension","dmmfModelName","jsName","resolveDependencies","getComputedFieldsFromModel","computedFields","resolveNeeds","visitedFields","fieldDep","modelResult","needs","composeCompute","nextCompute","previousCompute","model","computeEngineSideSelection","dependency","computeEngineSideOmissions","omission","MergedExtensionsListNode","previous","newCb","jsModelName","operation","prevCbs","newCbs","MergedExtensionsList","_MergedExtensionsList","ParamImpl","isParam","Skip","param","isSkip","jsActionToProtocolAction","STRICT_UNDEFINED_ERROR_MESSAGE","action","runtimeDataModel","extensions","clientMethod","previewFeatures","SerializeContext","serializeFieldSelection","serializeArgumentsObject","serializeSelectionSet","createExplicitSelection","createImplicitSelection","selectionSet","addIncludedRelations","omitFields","nestedContext","validateSelectionForUndefined","localOmit","combinedOmits","omitWithComputedFields","selectWithComputedFields","serializeArgumentsValue","jsValue","serializeArgumentsArray","buffer","byteOffset","byteLength","isRawParameters","isJSONConvertible","itemContext","valueName","_SerializeContext","params","previewFeature","checkPreviewFeatureFlag","dmmfLazy","runtimeDataModelToBaseDmmf","buildDMMFList","map","props","internals","TypedSqlMarker","TypedSql","isTypedSql","import_package","import_async_hooks","import_events","_Sql","rawStrings","rawValues","valuesLength","child","rawString","childIndex","suffix","strings","addObjectProperties","addProperty","factory","cacheProperties","baseLayer","defaultPropertyDescriptor","defaultProxyHandlers","_ownKeys","customInspect","createCompositeProxy","layers","keysToLayerMap","mapKeysToLayers","overwrittenKeys","proxy","layer","targetKeys","getExistingKeys","layerKeys","original","attributes","toLog","removeProperties","getBatchRequestPayload","batch","prettyPrintArguments","tree","TOO_MANY_CONNECTIONS_ERROR","prismaGraphQLToJSError","user_facing_error","activeProvider","getKnownErrorMessage","userFacingError","UNKNOWN_FUNCTION","stackString","stack","parseResult","parseChrome","parseWinjs","parseGecko","parseNode","parseJSC","chromeRe","chromeEvalRe","isNative","isEval","submatch","winjsRe","geckoRe","geckoEvalRe","javaScriptCoreRe","nodeRe","DisabledCallSite","EnabledCallSite","frame","posixFile","getCallSite","aggregateMap","desugarUserArgs","desugarCountInUserArgs","aggregateArgs","createUnpacker","aggregate","modelAction","aggregateUnpacker","row","groupBy","applyAggregates","userArgs","applyFieldsProxy","scalarFieldsList","scalarFields","dmmfField","ks","deepGet","kp","deepSet","getNextDataPath","fluentPropName","prevDataPath","getNextUserArgs","callArgs","prevArgs","nextDataPath","applyFluent","prevUserArgs","dmmfModelFieldMap","nextUserArgs","prismaPromise","getOwnKeys","modelArgs","dataArgs","fluentProps","aggregateProps","applyModel","modelExtensions","modelActionsLayer","fieldsPropertyLayer","dmmfActionName","paramOverrides","callSite","isValidAggregateName","jsToDMMFModelName","rawClient","applyModelsAndClientExtensions","rootLayer","modelsLayer","clientExtensions","prototype","allKeys","dmmfModelKeys","jsModelKeys","unApplyModelsAndClientExtensions","$extends","Engine","newClient","applyResultExtensions","computedPropertiesLayers","maskingLayers","toMask","areNeedsMet","computedPropertyLayer","neededProperties","visitQueryResult","visitor","visitResult","visitNested","includeOrSelect","parentModelName","subConfig","applyAllResultExtensions","denylist","itxClientDenyList","deepCloneArgs","cloneSql","cloneTypedSql","deepCloneValue","rawParam","copy","iterateAndCallQueryCallbacks","queryCbs","prevCustomFetch","__internalParams","currCustomFetch","composeCustomDataProxyFetch","applyQueryExtensions","cbs","createApplyBatchExtensionsFunction","executeBatch","requests","iterateAndCallBatchCallbacks","prevFetch","request","nextFetch","noopFetch","cachingPlatforms","checkPlatformCaching","postinstall","ciName","generator","getDatasourceOverrides","datasourceNames","addRuntimeToYourBinaryTargets","runtimeBinaryTarget","getGeneratorBlockSuggestion","generatorBinaryTargets","suggestedBinaryTarget","queryEngineCannotBeFound","theseLocationsHaveBeenSearched","searchedLocations","binaryTargetsWasIncorrectlyPinned","weWouldAppreciateIfYouCouldShareInfo","prisly","howToFixEngineNotFoundNextjs","errorStack","bundlerHasTamperedWithEngineCopy","queryEngineName","nativeGeneratedOnDifferentPlatform","nativeBinaryTarget","bt","toolingHasTamperedWithEngineCopy","runtimeFileRegex","resolveEnginePath","prismaPath","enginePath","findEnginePath","hasNativeBinaryTarget","hasMissingBinaryTarget","clientHasBeenBundled","errorInput","getQueryEngineName","searchLocations","engineName","maskQuery","normalizeLogs","l","import_new_github_issue_url","getGitHubIssueUrl","title","user","repo","template","body","newGitHubIssueUrl","getErrorMessageWithLink","engineVersion","database","gotLogs","moreInfo","isTaggedValue","deserializeTaggedValue","$type","isNetlify","isEdgeLight","isWorkerd","detectRuntime","check","runtimesPrettyNames","runtimeId","resolveDatasourceUrl","inlineDatasources","overrideDatasources","resolvedUrl","datasourceName","datasourceUrl","overrideUrl","PrismaClientError","DataProxyError","setRetryable","retryable","InvalidDatasourceError","getUrlAndApiKey","errorInfo","dsName","serviceURL","protocol","searchParams","apiKey","httpScheme","httpUrl","HeaderBuilder","tracingHelper","logLevel","logQueries","engineHash","#buildCaptureSettings","traceparent","transactionId","headers","captureTelemetry","convertEngineTimestamp","timestamp","dateFromEngineTimestamp","ForcedRetryError","NotImplementedYetError","DataProxyAPIError","requestId","messageSuffix","SchemaMissingError","BAD_REQUEST_DEFAULT_MESSAGE","BadRequestError","HealthcheckTimeoutError","EngineStartupError","EngineVersionNotSupportedError","GATEWAY_TIMEOUT_DEFAULT_MESSAGE","GatewayTimeoutError","INTERACTIVE_TRANSACTION_ERROR_DEFAULT_MESSAGE","InteractiveTransactionError","INVALID_REQUEST_DEFAULT_MESSAGE","InvalidRequestError","NOT_FOUND_DEFAULT_MESSAGE","NotFoundError","SERVER_ERROR_DEFAULT_MESSAGE","ServerError","UNAUTHORIZED_DEFAULT_MESSAGE","UnauthorizedError","USAGE_EXCEEDED_DEFAULT_MESSAGE","UsageExceededError","getResponseErrorBody","response","reason","responseToError","error_code","messageByReason","buildErrorMessage","defaultMessage","errorBody","backOff","baseDelay","jitter","total","done","encodings","toBase64","bytes","base64","byteRemainder","mainLength","chunk","checkForbiddenMetrics","engineConfig","feature","dependencies","RequestError","customFetch","fetch","fetchOptions","decoratedFetch","semverRegex","_getClientVersion","major","minor","patch","pkgURL","prismaPkgURL","res","bodyAsText","bodyAsJson","getClientVersion","MAX_RETRIES","DataProxyEngine","spanOptions","interactiveTransaction","customDataProxyFetch","queries","logHttpCall","actionToGerund","endpoint","attempt","delay","getInteractiveTransactionId","libraryCacheSymbol","getLibraryCache","globalWithCache","load","libraryPath","fullLibraryPath","libraryModule","defaultLibraryLoader","platformInfo","loadedWasmInstance","wasmLibraryLoader","engineWasm","runtime","wasmModule","instance","wbindgen_start","QueryEngine","DRIVER_ADAPTER_EXTERNAL_ERROR","isQueryEvent","event","isPanicEvent","knownBinaryTargets","MAX_REQUEST_ID","NEXT_REQUEST_ID","nextRequestId","LibraryEngine","libraryLoader","dsOverrideName","dsOverrideUrl","engine","traceJson","trace","headerStr","jsonOptions","isUserFacingError","externalError","weakThis","_e","startFn","stopFn","queryStr","batchResult","errorRecord","responseString","validateEngineInstanceConfig","copyEngine","targetBuildType","warnings","pushWarning","pushError","isUsingPrismaAccelerate","isUsingPrismaPostgres","isUsingDriverAdapters","isAccelerateUrlScheme","isAccelerateConfigured","isUsing","isNonEmptyArray","getEngineInstance","diagnostics","warning","libraryEngineConfigured","binaryEngineConfigured","clientEngineConfigured","clientEngineUsesRemoteExecutor","getPreviewFeatures","rawCommandArgsMapper","mssqlPreparedStatement","serializeRawParameters","parameters","serializeRawParametersInternal","objectSerialization","parameter","encodeParameter","isArrayBufferLike","preprocessObject","preprocessValueInObject","ALTER_RE","checkAlter","invalidCall","rawQueryArgsMapper","queryString","templateStringMiddlewareArgsMapper","requestArgs","sqlMiddlewareArgsMapper","createPrismaPromiseFactory","op","promise","_callback","callbackTransaction","valueToPromise","onFulfilled","onRejected","onFinally","batchTransaction","thing","majorVersion","disabledTracingHelper","DynamicTracingHelper","spans","versionedPrismaInstrumentationGlobal","fallbackPrismaInstrumentationGlobal","getTracingHelper","getLockCountPromise","knock","cb","resolve","lock","getLogLevel","currentLevel","hasBatchIndex","getBatchId","buildKeysString","writeMap","isWrite","DataLoader","hash","reject","results","deserializeValue","deserializedResponse","prebuiltEmptyObject","createPrebuiltEmptyResultObject","mappedRow","RequestHandler","logEmitter","otelParentCtx","containsWrite","getTransactionOptions","getItxTransactionOptions","requestA","requestB","dataPath","unpacker","isMismatchingBatchIndex","isValidationError","validationError","convertValidationError","pathForGet","extractedResponse","PrismaClientConstructorValidationError","knownProperties","errorFormats","logLevels","validators","didYouMean","getDidYouMean","key1","value1","validateLogLevel","logValidators","emits","maxWait","timeout","validationErrors","modelKey","modelConfig","modelOrType","getModelOrTypeByKey","renderOmitValidationErrors","knownKeys","validatePrismaClientOptions","alternative","getAlternative","optionsWithDistances","leven","bestAlternative","findByKey","foundKey","mapKey","omitConfig","waitForBatch","promises","successfulResults","settledPromisesCount","settleOnePromise","immediatelyReject","noopMiddlewareArgsMapper","TX_ID","BatchTxIdCounter","PrismaClient","optionsArg","envPaths","expectedDriverAdapterProvider","loadedEnv","internal","useDebug","enginesVersion","eventType","middlewareArgsMapper","argsMapper","toSql","typedSql","isolationLevel","optionsWithDefaults","internalParams","consumer","changedMiddlewareParams","runInTransaction","changedRequestParams","requestParams","isTemplateStringArray","allowList","definition","sqltag","Extensions","Public","require_default","CONSTANTS","ErrorCode","API","apiUrls","generateRandomString","prisma","checkSubscriptionStatus","formatDate","React","isValid","publicFetch"],"mappings":"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","sourcesContent":["// ============================================================================\n// COMPREHENSIVE API CONFIGURATION\n// ============================================================================\n\nimport { Environment } from './environment';\n\nexport interface ApiConfig {\n  // Server-side configuration\n  database: {\n    url: string;\n    type: 'sqlite' | 'postgresql';\n  };\n  auth: {\n    jwtSecret: string;\n    expiresIn: string;\n  };\n  cors: {\n    origins: string[];\n  };\n  features: {\n    emailVerification: boolean;\n    analytics: boolean;\n    rateLimiting: boolean;\n  };\n  urls: {\n    client: string;\n    admin: string;\n    api: string;\n    mobile?: string;\n  };\n  logging: {\n    level: string;\n    format: string;\n  };\n  security: {\n    rateLimitMax: number;\n    rateLimitWindow: string;\n  };\n}\n\n// Client-side API URL configuration\nexport interface ApiUrls {\n  base: string;\n  auth: {\n    login: string;\n    register: string;\n    verify: string;\n    refresh: string;\n    logout: string;\n    forgotPassword: string;\n    resetPassword: string;\n    changePassword: string;\n  };\n  categories: {\n    list: string;\n    create: string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n  };\n  products: {\n    list: string;\n    create: string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    updateStock: (id: number) => string;\n    bulkUpdate: string;\n  };\n  orders: {\n    list: string;\n    create: string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    getByNumber: (orderNumber: string) => string;\n    updateStatus: (id: number) => string;\n    stats: string;\n  };\n  customers: {\n    list: string;\n    create: string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    stats: string;\n  };\n  outlets: {\n    list: string;\n    create: string;\n    get: (id: number) => string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    stats: string;\n  };\n  users: {\n    list: string;\n    create: string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    updateRole: (id: number) => string;\n    updateStatus: (id: number) => string;\n    assignOutlet: (id: number) => string;\n    deleteAccount: string;\n    updateByPublicId: (id: number) => string;\n    activateByPublicId: (id: number) => string;\n    deactivateByPublicId: (id: number) => string;\n    deleteByPublicId: (id: number) => string;\n  };\n  plans: {\n    list: string;\n    create: string;\n    get: (id: number) => string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    stats: string;\n    public: string;\n  };\n  planVariants: {\n    list: string;\n    create: string;\n    get: (id: number) => string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    bulk: string;\n    recycle: string;\n    restore: (id: number) => string;\n    stats: string;\n  };\n  billingCycles: {\n    list: string;\n    create: string;\n    get: (id: number) => string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n  };\n  payments: {\n    list: string;\n    create: string;\n    manual: string;\n    get: (id: number) => string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    process: (id: number) => string;\n    refund: (id: number) => string;\n    stats: string;\n    export: string;\n  };\n  subscriptions: {\n    list: string;\n    create: string;\n    get: (id: number) => string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    extend: (id: number) => string;\n    status: string;\n    stats: string;\n  };\n  analytics: {\n    dashboard: string;\n    system: string;\n    revenue: string;\n    orders: string;\n    income: string;\n    topProducts: string;\n    topCustomers: string;\n    recentOrders: string;\n    recentActivities: string;\n    inventory: string;\n    outletPerformance: string;\n    seasonalTrends: string;\n    export: string;\n    todayMetrics: string;\n    growthMetrics: string;\n    enhancedDashboard: string;\n  };\n  merchants: {\n    list: string;\n    create: string;\n    register: string;\n    get: (id: number) => string;\n    update: (id: number) => string;\n    delete: (id: number) => string;\n    updatePlan: (id: number) => string;\n    getPlan: (id: number) => string;\n    extendPlan: (id: number) => string;\n    cancelPlan: (id: number) => string;\n    pricing: {\n      get: (id: number) => string;\n      update: (id: number) => string;\n    };\n    products: {\n      list: (merchantId: number) => string;\n      get: (merchantId: number, productId: number) => string;\n      create: (merchantId: number) => string;\n      update: (merchantId: number, productId: number) => string;\n      delete: (merchantId: number, productId: number) => string;\n    };\n    orders: {\n      list: (merchantId: number) => string;\n      get: (merchantId: number, orderId: number) => string;\n      create: (merchantId: number) => string;\n      update: (merchantId: number, orderId: number) => string;\n      delete: (merchantId: number, orderId: number) => string;\n    };\n    users: {\n      list: (merchantId: number) => string;\n      get: (merchantId: number, userId: number) => string;\n      create: (merchantId: number) => string;\n      update: (merchantId: number, userId: number) => string;\n      delete: (merchantId: number, userId: number) => string;\n    };\n    outlets: {\n      list: (merchantId: number) => string;\n      get: (merchantId: number, outletId: number) => string;\n      create: (merchantId: number) => string;\n      update: (merchantId: number, outletId: number) => string;\n      delete: (merchantId: number, outletId: number) => string;\n    };\n  };\n  settings: {\n    merchant: string;\n    user: string;\n    outlet: string;\n    billing: string;\n    changePassword: string;\n    uploadPicture: string;\n    deletePicture: string;\n    preferences: string;\n    activityLog: string;\n    profileNotifications: string;\n    markNotificationRead: (id: number) => string;\n    markAllNotificationsRead: string;\n  };\n  system: {\n    backup: string;\n    backupSchedule: string;\n    backupVerify: string;\n    stats: string;\n    health: string;\n    logs: string;\n  };\n  notifications: {\n    list: string;\n    get: (id: number) => string;\n    markRead: (id: number) => string;\n    markUnread: (id: number) => string;\n    markAllRead: string;\n    delete: (id: number) => string;\n    deleteAllRead: string;\n    unreadCount: string;\n    preferences: string;\n    test: string;\n  };\n    auditLogs: {\n      list: string;\n      stats: string;\n      export: string;\n    };\n    calendar: {\n      orders: string;\n    };\n  }\n\n/**\n * Get the current environment\n */\nfunction getEnvironment(): Environment {\n  // Check for explicit environment variable first\n  const explicitEnv = process.env.NEXT_PUBLIC_APP_ENV || process.env.APP_ENV;\n  if (explicitEnv === 'local' || explicitEnv === 'development' || explicitEnv === 'production') {\n    return explicitEnv;\n  }\n\n  // Fallback to NODE_ENV\n  if (process.env.NODE_ENV === 'production') {\n    return 'production';\n  }\n\n  // Default to local for development\n  return 'local';\n}\n\n/**\n * Get API base URL for current environment\n */\nfunction getApiBaseUrlInternal(): string {\n  const env = getEnvironment();\n  \n  switch (env) {\n    case 'local':\n      return process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3002';\n    \n    case 'development':\n      return process.env.NEXT_PUBLIC_API_URL || 'https://apis-development.up.railway.app';\n    \n    case 'production':\n      return process.env.NEXT_PUBLIC_API_URL || 'https://api.rentalshop.com';\n    \n    default:\n      return 'http://localhost:3002';\n  }\n}\n\n/**\n * Get server-side API configuration\n */\nfunction getApiConfig(): ApiConfig {\n  const environment = getEnvironment();\n  \n  // Base configuration\n  const baseConfig: Partial<ApiConfig> = {\n    cors: {\n      origins: []\n    },\n    features: {\n      emailVerification: false,\n      analytics: false,\n      rateLimiting: false\n    },\n    logging: {\n      level: 'info',\n      format: 'json'\n    },\n    security: {\n      rateLimitMax: 1000,\n      rateLimitWindow: '15m'\n    }\n  };\n\n  // Environment-specific configurations\n  switch (environment) {\n    case 'local':\n      return {\n        ...baseConfig,\n        database: {\n          url: process.env.DATABASE_URL || 'file:./dev.db',\n          type: 'sqlite'\n        },\n        auth: {\n          jwtSecret: process.env.JWT_SECRET || 'local-jwt-secret-key-change-this',\n          expiresIn: process.env.JWT_EXPIRES_IN || '7d'\n        },\n        cors: {\n          origins: [\n            'http://localhost:3000',  // Client App\n            'http://localhost:3001',  // Admin App\n            'http://localhost:3002',  // API Server\n            'http://localhost:3003'   // Mobile App (Future)\n          ]\n        },\n        features: {\n          emailVerification: false,\n          analytics: false,\n          rateLimiting: false\n        },\n        urls: {\n          client: process.env.CLIENT_URL || 'http://localhost:3000',\n          admin: process.env.ADMIN_URL || 'http://localhost:3001',\n          api: process.env.API_URL || 'http://localhost:3002',\n          mobile: process.env.MOBILE_URL || 'http://localhost:3003'\n        },\n        logging: {\n          level: process.env.LOG_LEVEL || 'debug',\n          format: process.env.LOG_FORMAT || 'pretty'\n        },\n        security: {\n          rateLimitMax: parseInt(process.env.RATE_LIMIT_MAX || '1000'),\n          rateLimitWindow: process.env.RATE_LIMIT_WINDOW || '15m'\n        }\n      };\n\n    case 'development':\n      return {\n        ...baseConfig,\n        database: {\n          url: process.env.DATABASE_URL || 'postgresql://username:password@localhost:5432/rentalshop_dev',\n          type: 'postgresql'\n        },\n        auth: {\n          jwtSecret: process.env.JWT_SECRET || 'dev-jwt-secret-key-change-this',\n          expiresIn: process.env.JWT_EXPIRES_IN || '7d'\n        },\n        cors: {\n          origins: [\n            'https://dev.rentalshop.com',\n            'https://admin.dev.rentalshop.com',\n            'https://mobile.dev.rentalshop.com'\n          ]\n        },\n        features: {\n          emailVerification: true,\n          analytics: true,\n          rateLimiting: true\n        },\n        urls: {\n          client: process.env.CLIENT_URL || 'https://dev.rentalshop.com',\n          admin: process.env.ADMIN_URL || 'https://admin.dev.rentalshop.com',\n          api: process.env.API_URL || 'https://api.dev.rentalshop.com',\n          mobile: process.env.MOBILE_URL || 'https://mobile.dev.rentalshop.com'\n        },\n        logging: {\n          level: process.env.LOG_LEVEL || 'info',\n          format: process.env.LOG_FORMAT || 'json'\n        },\n        security: {\n          rateLimitMax: parseInt(process.env.RATE_LIMIT_MAX || '500'),\n          rateLimitWindow: process.env.RATE_LIMIT_WINDOW || '15m'\n        }\n      };\n\n    case 'production':\n      return {\n        ...baseConfig,\n        database: {\n          url: process.env.DATABASE_URL || 'postgresql://username:password@your-prod-host:5432/rentalshop_prod',\n          type: 'postgresql'\n        },\n        auth: {\n          jwtSecret: process.env.JWT_SECRET || 'your-super-secure-jwt-secret-key-here',\n          expiresIn: process.env.JWT_EXPIRES_IN || '1d'\n        },\n        cors: {\n          origins: [\n            'https://rentalshop.com',\n            'https://admin.rentalshop.com',\n            'https://mobile.rentalshop.com'\n          ]\n        },\n        features: {\n          emailVerification: true,\n          analytics: true,\n          rateLimiting: true\n        },\n        urls: {\n          client: process.env.CLIENT_URL || 'https://rentalshop.com',\n          admin: process.env.ADMIN_URL || 'https://admin.rentalshop.com',\n          api: process.env.API_URL || 'https://apis-development.up.railway.app',\n          mobile: process.env.MOBILE_URL || 'https://mobile.rentalshop.com'\n        },\n        logging: {\n          level: process.env.LOG_LEVEL || 'warn',\n          format: process.env.LOG_FORMAT || 'json'\n        },\n        security: {\n          rateLimitMax: parseInt(process.env.RATE_LIMIT_MAX || '100'),\n          rateLimitWindow: process.env.RATE_LIMIT_WINDOW || '15m'\n        }\n      };\n\n    default:\n      throw new Error(`Unknown environment: ${environment}`);\n  }\n}\n\n/**\n * Create client-side API URLs configuration\n */\nfunction createApiUrls(): ApiUrls {\n  const base = getApiBaseUrlInternal();\n  \n  return {\n    base,\n    auth: {\n      login: `${base}/api/auth/login`,\n      register: `${base}/api/auth/register`,\n      verify: `${base}/api/auth/verify`,\n      refresh: `${base}/api/auth/refresh`,\n      logout: `${base}/api/auth/logout`,\n      forgotPassword: `${base}/api/auth/forgot-password`,\n      resetPassword: `${base}/api/auth/reset-password`,\n      changePassword: `${base}/api/auth/change-password`,\n    },\n    categories: {\n      list: `${base}/api/categories`,\n      create: `${base}/api/categories`,\n      update: (id: number) => `${base}/api/categories/${id}`,\n      delete: (id: number) => `${base}/api/categories/${id}`,\n    },\n    products: {\n      list: `${base}/api/products`,\n      create: `${base}/api/products`,\n      update: (id: number) => `${base}/api/products/${id}`,\n      delete: (id: number) => `${base}/api/products/${id}`,\n      updateStock: (id: number) => `${base}/api/products/${id}/stock`,\n      bulkUpdate: `${base}/api/products/bulk-update`,\n    },\n    orders: {\n      list: `${base}/api/orders`,\n      create: `${base}/api/orders`,\n      update: (id: number) => `${base}/api/orders/${id}`,\n      delete: (id: number) => `${base}/api/orders/${id}`,\n      getByNumber: (orderNumber: string) => `${base}/api/orders/by-number/${orderNumber}`,\n      updateStatus: (id: number) => `${base}/api/orders/${id}/status`,\n      stats: `${base}/api/orders/stats`,\n    },\n    customers: {\n      list: `${base}/api/customers`,\n      create: `${base}/api/customers`,\n      update: (id: number) => `${base}/api/customers/${id}`,\n      delete: (id: number) => `${base}/api/customers/${id}`,\n      stats: `${base}/api/customers/stats`,\n    },\n    outlets: {\n      list: `${base}/api/outlets`,\n      create: `${base}/api/outlets`,\n      get: (id: number) => `${base}/api/outlets/${id}`,\n      update: (id: number) => `${base}/api/outlets?outletId=${id}`,\n      delete: (id: number) => `${base}/api/outlets?outletId=${id}`,\n      stats: `${base}/api/outlets/stats`,\n    },\n    users: {\n      list: `${base}/api/users`,\n      create: `${base}/api/users`,\n      update: (id: number) => `${base}/api/users/${id}`,\n      delete: (id: number) => `${base}/api/users/${id}`,\n      updateRole: (id: number) => `${base}/api/users/${id}/role`,\n      updateStatus: (id: number) => `${base}/api/users/${id}/status`,\n      assignOutlet: (id: number) => `${base}/api/users/${id}/assign-outlet`,\n      deleteAccount: `${base}/api/users/delete-account`,\n      updateByPublicId: (id: number) => `${base}/api/users/${id}`,\n      activateByPublicId: (id: number) => `${base}/api/users/${id}`,\n      deactivateByPublicId: (id: number) => `${base}/api/users/${id}`,\n      deleteByPublicId: (id: number) => `${base}/api/users/${id}`,\n    },\n    plans: {\n      list: `${base}/api/plans`,\n      create: `${base}/api/plans`,\n      get: (id: number) => `${base}/api/plans/${id}`,\n      update: (id: number) => `${base}/api/plans/${id}`,\n      delete: (id: number) => `${base}/api/plans/${id}`,\n      stats: `${base}/api/plans/stats`,\n      public: `${base}/api/plans/public`,\n    },\n    planVariants: {\n      list: `${base}/api/plan-variants`,\n      create: `${base}/api/plan-variants`,\n      get: (id: number) => `${base}/api/plan-variants/${id}`,\n      update: (id: number) => `${base}/api/plan-variants/${id}`,\n      delete: (id: number) => `${base}/api/plan-variants/${id}`,\n      bulk: `${base}/api/plan-variants/bulk`,\n      recycle: `${base}/api/plan-variants/recycle`,\n      restore: (id: number) => `${base}/api/plan-variants/recycle/${id}`,\n      stats: `${base}/api/plan-variants/stats`,\n    },\n    billingCycles: {\n      list: `${base}/api/billing-cycles`,\n      create: `${base}/api/billing-cycles`,\n      get: (id: number) => `${base}/api/billing-cycles/${id}`,\n      update: (id: number) => `${base}/api/billing-cycles/${id}`,\n      delete: (id: number) => `${base}/api/billing-cycles/${id}`,\n    },\n    payments: {\n      list: `${base}/api/payments`,\n      create: `${base}/api/payments`,\n      manual: `${base}/api/payments/manual`,\n      get: (id: number) => `${base}/api/payments/${id}`,\n      update: (id: number) => `${base}/api/payments/${id}`,\n      delete: (id: number) => `${base}/api/payments/${id}`,\n      process: (id: number) => `${base}/api/payments/${id}/process`,\n      refund: (id: number) => `${base}/api/payments/${id}/refund`,\n      stats: `${base}/api/payments/stats`,\n      export: `${base}/api/payments/export`,\n    },\n    subscriptions: {\n      list: `${base}/api/subscriptions`,\n      create: `${base}/api/subscriptions`,\n      get: (id: number) => `${base}/api/subscriptions/${id}`,\n      update: (id: number) => `${base}/api/subscriptions/${id}`,\n      delete: (id: number) => `${base}/api/subscriptions/${id}`,\n      extend: (id: number) => `${base}/api/subscriptions/${id}/extend`,\n      status: `${base}/api/subscriptions/status`,\n      stats: `${base}/api/subscriptions/stats`,\n    },\n    analytics: {\n      dashboard: `${base}/api/analytics/dashboard`,\n      system: `${base}/api/analytics/system`,\n      revenue: `${base}/api/analytics/revenue`,\n      orders: `${base}/api/analytics/orders`,\n      income: `${base}/api/analytics/income`,\n      topProducts: `${base}/api/analytics/top-products`,\n      topCustomers: `${base}/api/analytics/top-customers`,\n      recentOrders: `${base}/api/analytics/recent-orders`,\n      recentActivities: `${base}/api/analytics/recent-activities`,\n      inventory: `${base}/api/analytics/inventory`,\n      outletPerformance: `${base}/api/analytics/outlet-performance`,\n      seasonalTrends: `${base}/api/analytics/seasonal-trends`,\n      export: `${base}/api/analytics/export`,\n      todayMetrics: `${base}/api/analytics/today-metrics`,\n      growthMetrics: `${base}/api/analytics/growth-metrics`,\n      enhancedDashboard: `${base}/api/analytics/enhanced-dashboard`,\n    },\n    merchants: {\n      list: `${base}/api/merchants`,\n      create: `${base}/api/merchants`,\n      register: `${base}/api/merchants/register`,\n      get: (id: number) => `${base}/api/merchants/${id}`,\n      update: (id: number) => `${base}/api/merchants/${id}`,\n      delete: (id: number) => `${base}/api/merchants/${id}`,\n      updatePlan: (id: number) => `${base}/api/merchants/${id}/plan`,\n      getPlan: (id: number) => `${base}/api/merchants/${id}/plan`,\n      extendPlan: (id: number) => `${base}/api/merchants/${id}/plan`,\n      cancelPlan: (id: number) => `${base}/api/merchants/${id}/plan`,\n      pricing: {\n        get: (id: number) => `${base}/api/merchants/${id}/pricing`,\n        update: (id: number) => `${base}/api/merchants/${id}/pricing`,\n      },\n      products: {\n        list: (merchantId: number) => `${base}/api/merchants/${merchantId}/products`,\n        get: (merchantId: number, productId: number) => `${base}/api/merchants/${merchantId}/products/${productId}`,\n        create: (merchantId: number) => `${base}/api/merchants/${merchantId}/products`,\n        update: (merchantId: number, productId: number) => `${base}/api/merchants/${merchantId}/products/${productId}`,\n        delete: (merchantId: number, productId: number) => `${base}/api/merchants/${merchantId}/products/${productId}`,\n      },\n      orders: {\n        list: (merchantId: number) => `${base}/api/merchants/${merchantId}/orders`,\n        get: (merchantId: number, orderId: number) => `${base}/api/merchants/${merchantId}/orders/${orderId}`,\n        create: (merchantId: number) => `${base}/api/merchants/${merchantId}/orders`,\n        update: (merchantId: number, orderId: number) => `${base}/api/merchants/${merchantId}/orders/${orderId}`,\n        delete: (merchantId: number, orderId: number) => `${base}/api/merchants/${merchantId}/orders/${orderId}`,\n      },\n      users: {\n        list: (merchantId: number) => `${base}/api/merchants/${merchantId}/users`,\n        get: (merchantId: number, userId: number) => `${base}/api/merchants/${merchantId}/users/${userId}`,\n        create: (merchantId: number) => `${base}/api/merchants/${merchantId}/users`,\n        update: (merchantId: number, userId: number) => `${base}/api/merchants/${merchantId}/users/${userId}`,\n        delete: (merchantId: number, userId: number) => `${base}/api/merchants/${merchantId}/users/${userId}`,\n      },\n      outlets: {\n        list: (merchantId: number) => `${base}/api/merchants/${merchantId}/outlets`,\n        get: (merchantId: number, outletId: number) => `${base}/api/merchants/${merchantId}/outlets/${outletId}`,\n        create: (merchantId: number) => `${base}/api/merchants/${merchantId}/outlets`,\n        update: (merchantId: number, outletId: number) => `${base}/api/merchants/${merchantId}/outlets/${outletId}`,\n        delete: (merchantId: number, outletId: number) => `${base}/api/merchants/${merchantId}/outlets/${outletId}`,\n      },\n    },\n  settings: {\n    merchant: `${base}/api/settings/merchant`,\n    user: `${base}/api/users/profile`,\n    outlet: `${base}/api/settings/outlet`,\n    billing: `${base}/api/settings/billing`,\n    changePassword: `${base}/api/profile/change-password`,\n    uploadPicture: `${base}/api/profile/upload-picture`,\n    deletePicture: `${base}/api/profile/delete-picture`,\n    preferences: `${base}/api/profile/preferences`,\n    activityLog: `${base}/api/profile/activity-log`,\n    profileNotifications: `${base}/api/profile/notifications`,\n    markNotificationRead: (id: number) => `${base}/api/profile/notifications/${id}/read`,\n    markAllNotificationsRead: `${base}/api/profile/notifications/mark-all-read`,\n  },\n  system: {\n    backup: `${base}/api/system/backup`,\n    backupSchedule: `${base}/api/system/backup/schedule`,\n    backupVerify: `${base}/api/system/backup/verify`,\n    stats: `${base}/api/system/stats`,\n    health: `${base}/api/system/health`,\n    logs: `${base}/api/system/logs`,\n  },\n    notifications: {\n      list: `${base}/api/notifications`,\n      get: (id: number) => `${base}/api/notifications/${id}`,\n      markRead: (id: number) => `${base}/api/notifications/${id}/read`,\n      markUnread: (id: number) => `${base}/api/notifications/${id}/unread`,\n      markAllRead: `${base}/api/notifications/mark-all-read`,\n      delete: (id: number) => `${base}/api/notifications/${id}`,\n      deleteAllRead: `${base}/api/notifications/delete-read`,\n      unreadCount: `${base}/api/notifications/unread-count`,\n      preferences: `${base}/api/notifications/preferences`,\n      test: `${base}/api/notifications/test`,\n    },\n    auditLogs: {\n      list: `${base}/api/audit-logs`,\n      stats: `${base}/api/audit-logs/stats`,\n      export: `${base}/api/audit-logs/export`,\n    },\n    calendar: {\n      orders: `${base}/api/calendar/orders`,\n    },\n  };\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\n// Server-side configuration (for API server)\nexport const apiConfig = getApiConfig();\nexport const apiEnvironment = getEnvironment();\n\n// Client-side configuration (for client apps)\nexport const apiUrls = createApiUrls();\n\n// Environment helpers\nexport const getCurrentEnvironment = (): Environment => getEnvironment();\nexport const isLocal = (): boolean => getEnvironment() === 'local';\nexport const isDevelopment = (): boolean => getEnvironment() === 'development';\nexport const isProduction = (): boolean => getEnvironment() === 'production';\n\n// API base URL helpers\nexport const getApiBaseUrl = (): string => getApiBaseUrlInternal();\n\n// Helper function to build custom API endpoints\nexport const buildApiUrl = (endpoint: string): string => {\n  const base = getApiBaseUrl();\n  const cleanEndpoint = endpoint.startsWith('/') ? endpoint.slice(1) : endpoint;\n  return `${base}/${cleanEndpoint}`;\n};\n\n// Get the current API base URL (for swagger docs)\nexport const getApiUrl = (): string => getApiBaseUrl();\n\n// Export API_BASE_URL for direct use in API clients\nexport const API_BASE_URL = getApiBaseUrl();\n\n// Legacy exports for backward compatibility\nexport const getApiDatabaseUrl = () => apiConfig.database.url;\nexport const getApiJwtSecret = () => apiConfig.auth.jwtSecret;\nexport const getApiCorsOrigins = () => apiConfig.cors.origins;\n\n\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\n\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, streamIsTTY) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream, stream && stream.isTTY);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: translateLevel(supportsColor(true, tty.isatty(1))),\n\tstderr: translateLevel(supportsColor(true, tty.isatty(2)))\n};\n","'use strict';\nconst supportsColor = require('supports-color');\nconst hasFlag = require('has-flag');\n\n/**\n@param {string} versionString\n@returns {{ major: number, minor: number, patch: number }}\n*/\nfunction parseVersion(versionString) {\n\tif (/^\\d{3,4}$/.test(versionString)) {\n\t\t// Env var doesn't always use dots. example: 4601 => 46.1.0\n\t\tconst m = /(\\d{1,2})(\\d{2})/.exec(versionString) || [];\n\t\treturn {\n\t\t\tmajor: 0,\n\t\t\tminor: parseInt(m[1], 10),\n\t\t\tpatch: parseInt(m[2], 10)\n\t\t};\n\t}\n\n\tconst versions = (versionString || '').split('.').map(n => parseInt(n, 10));\n\treturn {\n\t\tmajor: versions[0],\n\t\tminor: versions[1],\n\t\tpatch: versions[2]\n\t};\n}\n\n/**\n@param {{ isTTY?: boolean | undefined }} stream\n@returns {boolean}\n*/\n// eslint-disable-next-line complexity\nfunction supportsHyperlink(stream) {\n\tconst {\n\t\tCI,\n\t\tFORCE_HYPERLINK,\n\t\tNETLIFY,\n\t\tTEAMCITY_VERSION,\n\t\tTERM_PROGRAM,\n\t\tTERM_PROGRAM_VERSION,\n\t\tVTE_VERSION,\n\t\tTERM,\n\t} = process.env;\n\n\tif (FORCE_HYPERLINK) {\n\t\treturn !(FORCE_HYPERLINK.length > 0 && parseInt(FORCE_HYPERLINK, 10) === 0);\n\t}\n\n\tif (hasFlag('no-hyperlink') || hasFlag('no-hyperlinks') || hasFlag('hyperlink=false') || hasFlag('hyperlink=never')) {\n\t\treturn false;\n\t}\n\n\tif (hasFlag('hyperlink=true') || hasFlag('hyperlink=always')) {\n\t\treturn true;\n\t}\n\n\t// Netlify does not run a TTY, it does not need `supportsColor` check\n\tif (NETLIFY) {\n\t\treturn true;\n\t}\n\n\t// If they specify no colors, they probably don't want hyperlinks.\n\tif (!supportsColor.supportsColor(stream)) {\n\t\treturn false;\n\t}\n\n\tif (stream && !stream.isTTY) {\n\t\treturn false;\n\t}\n\n\t// Windows Terminal\n\tif ('WT_SESSION' in process.env) {\n\t\treturn true;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\treturn false;\n\t}\n\n\tif (CI) {\n\t\treturn false;\n\t}\n\n\tif (TEAMCITY_VERSION) {\n\t\treturn false;\n\t}\n\n\tif (TERM_PROGRAM) {\n\t\tconst version = parseVersion(TERM_PROGRAM_VERSION || '');\n\n\t\tswitch (TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\tif (version.major === 3) {\n\t\t\t\t\treturn version.minor >= 1;\n\t\t\t\t}\n\n\t\t\t\treturn version.major > 3;\n\t\t\tcase 'WezTerm':\n\t\t\t\treturn version.major >= 20200620;\n\t\t\tcase 'vscode':\n\t\t\t\t// eslint-disable-next-line no-mixed-operators\n\t\t\t\treturn version.major > 1 || version.major === 1 && version.minor >= 72;\n\t\t\tcase 'ghostty':\n\t\t\t\treturn true;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (VTE_VERSION) {\n\t\t// 0.50.0 was supposed to support hyperlinks, but throws a segfault\n\t\tif (VTE_VERSION === '0.50.0') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst version = parseVersion(VTE_VERSION);\n\t\treturn version.major > 0 || version.minor >= 50;\n\t}\n\n\tswitch (TERM) {\n\t\tcase 'alacritty':\n\t\t\t// Support added in v0.11 (2022-10-13)\n\t\t\treturn true;\n\t\t// No default\n\t}\n\n\treturn false;\n}\n\nmodule.exports = {\n\tsupportsHyperlink,\n\tstdout: supportsHyperlink(process.stdout),\n\tstderr: supportsHyperlink(process.stderr)\n};\n","{\n  \"name\": \"@prisma/internals\",\n  \"version\": \"6.16.3\",\n  \"description\": \"This package is intended for Prisma's internal use\",\n  \"main\": \"dist/index.js\",\n  \"types\": \"dist/index.d.ts\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/prisma/prisma.git\",\n    \"directory\": \"packages/internals\"\n  },\n  \"homepage\": \"https://www.prisma.io\",\n  \"author\": \"Tim Suchanek <suchanek@prisma.io>\",\n  \"bugs\": \"https://github.com/prisma/prisma/issues\",\n  \"license\": \"Apache-2.0\",\n  \"scripts\": {\n    \"dev\": \"DEV=true tsx helpers/build.ts\",\n    \"build\": \"tsx helpers/build.ts\",\n    \"test\": \"dotenv -e ../../.db.env -- jest --silent\",\n    \"prepublishOnly\": \"pnpm run build\"\n  },\n  \"files\": [\n    \"README.md\",\n    \"dist\",\n    \"!**/libquery_engine*\",\n    \"!dist/get-generators/engines/*\",\n    \"scripts\"\n  ],\n  \"devDependencies\": {\n    \"@babel/helper-validator-identifier\": \"7.25.9\",\n    \"@opentelemetry/api\": \"1.9.0\",\n    \"@swc/core\": \"1.11.5\",\n    \"@swc/jest\": \"0.2.37\",\n    \"@types/babel__helper-validator-identifier\": \"7.15.2\",\n    \"@types/jest\": \"29.5.14\",\n    \"@types/node\": \"18.19.76\",\n    \"@types/resolve\": \"1.20.6\",\n    \"archiver\": \"6.0.2\",\n    \"checkpoint-client\": \"1.1.33\",\n    \"cli-truncate\": \"4.0.0\",\n    \"dotenv\": \"16.5.0\",\n    \"empathic\": \"2.0.0\",\n    \"escape-string-regexp\": \"5.0.0\",\n    \"execa\": \"5.1.1\",\n    \"fast-glob\": \"3.3.3\",\n    \"find-up\": \"7.0.0\",\n    \"fp-ts\": \"2.16.9\",\n    \"fs-extra\": \"11.3.0\",\n    \"fs-jetpack\": \"5.1.0\",\n    \"global-directory\": \"4.0.0\",\n    \"globby\": \"11.1.0\",\n    \"identifier-regex\": \"1.0.0\",\n    \"indent-string\": \"4.0.0\",\n    \"is-windows\": \"1.0.2\",\n    \"is-wsl\": \"3.1.0\",\n    \"jest\": \"29.7.0\",\n    \"jest-junit\": \"16.0.0\",\n    \"kleur\": \"4.1.5\",\n    \"mock-stdin\": \"1.0.0\",\n    \"new-github-issue-url\": \"0.2.1\",\n    \"node-fetch\": \"3.3.2\",\n    \"npm-packlist\": \"5.1.3\",\n    \"open\": \"7.4.2\",\n    \"p-map\": \"4.0.0\",\n    \"resolve\": \"1.22.10\",\n    \"string-width\": \"7.2.0\",\n    \"strip-indent\": \"4.0.0\",\n    \"temp-dir\": \"2.0.0\",\n    \"tempy\": \"1.0.1\",\n    \"terminal-link\": \"4.0.0\",\n    \"tmp\": \"0.2.3\",\n    \"ts-pattern\": \"5.6.2\",\n    \"ts-toolbelt\": \"9.6.0\",\n    \"typescript\": \"5.4.5\",\n    \"yarn\": \"1.22.22\"\n  },\n  \"dependencies\": {\n    \"@prisma/config\": \"workspace:*\",\n    \"@prisma/debug\": \"workspace:*\",\n    \"@prisma/dmmf\": \"workspace:*\",\n    \"@prisma/driver-adapter-utils\": \"workspace:*\",\n    \"@prisma/engines\": \"workspace:*\",\n    \"@prisma/fetch-engine\": \"workspace:*\",\n    \"@prisma/generator\": \"workspace:*\",\n    \"@prisma/generator-helper\": \"workspace:*\",\n    \"@prisma/get-platform\": \"workspace:*\",\n    \"@prisma/prisma-schema-wasm\": \"6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a\",\n    \"@prisma/schema-engine-wasm\": \"6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a\",\n    \"@prisma/schema-files-loader\": \"workspace:*\",\n    \"arg\": \"5.0.2\",\n    \"prompts\": \"2.4.2\"\n  },\n  \"peerDependencies\": {\n    \"typescript\": \">=5.1.0\"\n  },\n  \"peerDependenciesMeta\": {\n    \"typescript\": {\n      \"optional\": true\n    }\n  },\n  \"sideEffects\": false\n}","{\n  \"name\": \"@prisma/engines-version\",\n  \"version\": \"6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a\",\n  \"main\": \"index.js\",\n  \"types\": \"index.d.ts\",\n  \"license\": \"Apache-2.0\",\n  \"author\": \"Tim Suchanek <suchanek@prisma.io>\",\n  \"prisma\": {\n    \"enginesVersion\": \"bb420e667c1820a8c05a38023385f6cc7ef8e83a\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/prisma/engines-wrapper.git\",\n    \"directory\": \"packages/engines-version\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"18.19.76\",\n    \"typescript\": \"4.9.5\"\n  },\n  \"files\": [\n    \"index.js\",\n    \"index.d.ts\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc -d\"\n  }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.enginesVersion = void 0;\nexports.enginesVersion = require('./package.json').prisma.enginesVersion;\n//# sourceMappingURL=index.js.map","'use strict';\nmodule.exports = string => {\n\tconst match = string.match(/^[ \\t]*(?=\\S)/gm);\n\n\tif (!match) {\n\t\treturn 0;\n\t}\n\n\treturn match.reduce((r, a) => Math.min(r, a.length), Infinity);\n};\n","'use strict';\n\nmodule.exports = (string, count = 1, options) => {\n\toptions = {\n\t\tindent: ' ',\n\t\tincludeEmptyLines: false,\n\t\t...options\n\t};\n\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`input\\` to be a \\`string\\`, got \\`${typeof string}\\``\n\t\t);\n\t}\n\n\tif (typeof count !== 'number') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`count\\` to be a \\`number\\`, got \\`${typeof count}\\``\n\t\t);\n\t}\n\n\tif (typeof options.indent !== 'string') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`options.indent\\` to be a \\`string\\`, got \\`${typeof options.indent}\\``\n\t\t);\n\t}\n\n\tif (count === 0) {\n\t\treturn string;\n\t}\n\n\tconst regex = options.includeEmptyLines ? /^/gm : /^(?!\\s*$)/gm;\n\n\treturn string.replace(regex, options.indent.repeat(count));\n};\n","{\n  \"name\": \"dotenv\",\n  \"version\": \"16.5.0\",\n  \"description\": \"Loads environment variables from .env file\",\n  \"main\": \"lib/main.js\",\n  \"types\": \"lib/main.d.ts\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./lib/main.d.ts\",\n      \"require\": \"./lib/main.js\",\n      \"default\": \"./lib/main.js\"\n    },\n    \"./config\": \"./config.js\",\n    \"./config.js\": \"./config.js\",\n    \"./lib/env-options\": \"./lib/env-options.js\",\n    \"./lib/env-options.js\": \"./lib/env-options.js\",\n    \"./lib/cli-options\": \"./lib/cli-options.js\",\n    \"./lib/cli-options.js\": \"./lib/cli-options.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"scripts\": {\n    \"dts-check\": \"tsc --project tests/types/tsconfig.json\",\n    \"lint\": \"standard\",\n    \"pretest\": \"npm run lint && npm run dts-check\",\n    \"test\": \"tap run --allow-empty-coverage --disable-coverage --timeout=60000\",\n    \"test:coverage\": \"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov\",\n    \"prerelease\": \"npm test\",\n    \"release\": \"standard-version\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/motdotla/dotenv.git\"\n  },\n  \"homepage\": \"https://github.com/motdotla/dotenv#readme\",\n  \"funding\": \"https://dotenvx.com\",\n  \"keywords\": [\n    \"dotenv\",\n    \"env\",\n    \".env\",\n    \"environment\",\n    \"variables\",\n    \"config\",\n    \"settings\"\n  ],\n  \"readmeFilename\": \"README.md\",\n  \"license\": \"BSD-2-Clause\",\n  \"devDependencies\": {\n    \"@types/node\": \"^18.11.3\",\n    \"decache\": \"^4.6.2\",\n    \"sinon\": \"^14.0.1\",\n    \"standard\": \"^17.0.0\",\n    \"standard-version\": \"^9.5.0\",\n    \"tap\": \"^19.2.0\",\n    \"typescript\": \"^4.8.4\"\n  },\n  \"engines\": {\n    \"node\": \">=12\"\n  },\n  \"browser\": {\n    \"fs\": false\n  }\n}\n","const fs = require('fs')\nconst path = require('path')\nconst os = require('os')\nconst crypto = require('crypto')\nconst packageJson = require('../package.json')\n\nconst version = packageJson.version\n\nconst LINE = /(?:^|^)\\s*(?:export\\s+)?([\\w.-]+)(?:\\s*=\\s*?|:\\s+?)(\\s*'(?:\\\\'|[^'])*'|\\s*\"(?:\\\\\"|[^\"])*\"|\\s*`(?:\\\\`|[^`])*`|[^#\\r\\n]+)?\\s*(?:#.*)?(?:$|$)/mg\n\n// Parse src into an Object\nfunction parse (src) {\n  const obj = {}\n\n  // Convert buffer to string\n  let lines = src.toString()\n\n  // Convert line breaks to same format\n  lines = lines.replace(/\\r\\n?/mg, '\\n')\n\n  let match\n  while ((match = LINE.exec(lines)) != null) {\n    const key = match[1]\n\n    // Default undefined or null to empty string\n    let value = (match[2] || '')\n\n    // Remove whitespace\n    value = value.trim()\n\n    // Check if double quoted\n    const maybeQuote = value[0]\n\n    // Remove surrounding quotes\n    value = value.replace(/^(['\"`])([\\s\\S]*)\\1$/mg, '$2')\n\n    // Expand newlines if double quoted\n    if (maybeQuote === '\"') {\n      value = value.replace(/\\\\n/g, '\\n')\n      value = value.replace(/\\\\r/g, '\\r')\n    }\n\n    // Add to object\n    obj[key] = value\n  }\n\n  return obj\n}\n\nfunction _parseVault (options) {\n  const vaultPath = _vaultPath(options)\n\n  // Parse .env.vault\n  const result = DotenvModule.configDotenv({ path: vaultPath })\n  if (!result.parsed) {\n    const err = new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`)\n    err.code = 'MISSING_DATA'\n    throw err\n  }\n\n  // handle scenario for comma separated keys - for use with key rotation\n  // example: DOTENV_KEY=\"dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=prod,dotenv://:key_7890@dotenvx.com/vault/.env.vault?environment=prod\"\n  const keys = _dotenvKey(options).split(',')\n  const length = keys.length\n\n  let decrypted\n  for (let i = 0; i < length; i++) {\n    try {\n      // Get full key\n      const key = keys[i].trim()\n\n      // Get instructions for decrypt\n      const attrs = _instructions(result, key)\n\n      // Decrypt\n      decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key)\n\n      break\n    } catch (error) {\n      // last key\n      if (i + 1 >= length) {\n        throw error\n      }\n      // try next key\n    }\n  }\n\n  // Parse decrypted .env string\n  return DotenvModule.parse(decrypted)\n}\n\nfunction _warn (message) {\n  console.log(`[dotenv@${version}][WARN] ${message}`)\n}\n\nfunction _debug (message) {\n  console.log(`[dotenv@${version}][DEBUG] ${message}`)\n}\n\nfunction _dotenvKey (options) {\n  // prioritize developer directly setting options.DOTENV_KEY\n  if (options && options.DOTENV_KEY && options.DOTENV_KEY.length > 0) {\n    return options.DOTENV_KEY\n  }\n\n  // secondary infra already contains a DOTENV_KEY environment variable\n  if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {\n    return process.env.DOTENV_KEY\n  }\n\n  // fallback to empty string\n  return ''\n}\n\nfunction _instructions (result, dotenvKey) {\n  // Parse DOTENV_KEY. Format is a URI\n  let uri\n  try {\n    uri = new URL(dotenvKey)\n  } catch (error) {\n    if (error.code === 'ERR_INVALID_URL') {\n      const err = new Error('INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development')\n      err.code = 'INVALID_DOTENV_KEY'\n      throw err\n    }\n\n    throw error\n  }\n\n  // Get decrypt key\n  const key = uri.password\n  if (!key) {\n    const err = new Error('INVALID_DOTENV_KEY: Missing key part')\n    err.code = 'INVALID_DOTENV_KEY'\n    throw err\n  }\n\n  // Get environment\n  const environment = uri.searchParams.get('environment')\n  if (!environment) {\n    const err = new Error('INVALID_DOTENV_KEY: Missing environment part')\n    err.code = 'INVALID_DOTENV_KEY'\n    throw err\n  }\n\n  // Get ciphertext payload\n  const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`\n  const ciphertext = result.parsed[environmentKey] // DOTENV_VAULT_PRODUCTION\n  if (!ciphertext) {\n    const err = new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`)\n    err.code = 'NOT_FOUND_DOTENV_ENVIRONMENT'\n    throw err\n  }\n\n  return { ciphertext, key }\n}\n\nfunction _vaultPath (options) {\n  let possibleVaultPath = null\n\n  if (options && options.path && options.path.length > 0) {\n    if (Array.isArray(options.path)) {\n      for (const filepath of options.path) {\n        if (fs.existsSync(filepath)) {\n          possibleVaultPath = filepath.endsWith('.vault') ? filepath : `${filepath}.vault`\n        }\n      }\n    } else {\n      possibleVaultPath = options.path.endsWith('.vault') ? options.path : `${options.path}.vault`\n    }\n  } else {\n    possibleVaultPath = path.resolve(process.cwd(), '.env.vault')\n  }\n\n  if (fs.existsSync(possibleVaultPath)) {\n    return possibleVaultPath\n  }\n\n  return null\n}\n\nfunction _resolveHome (envPath) {\n  return envPath[0] === '~' ? path.join(os.homedir(), envPath.slice(1)) : envPath\n}\n\nfunction _configVault (options) {\n  const debug = Boolean(options && options.debug)\n  if (debug) {\n    _debug('Loading env from encrypted .env.vault')\n  }\n\n  const parsed = DotenvModule._parseVault(options)\n\n  let processEnv = process.env\n  if (options && options.processEnv != null) {\n    processEnv = options.processEnv\n  }\n\n  DotenvModule.populate(processEnv, parsed, options)\n\n  return { parsed }\n}\n\nfunction configDotenv (options) {\n  const dotenvPath = path.resolve(process.cwd(), '.env')\n  let encoding = 'utf8'\n  const debug = Boolean(options && options.debug)\n\n  if (options && options.encoding) {\n    encoding = options.encoding\n  } else {\n    if (debug) {\n      _debug('No encoding is specified. UTF-8 is used by default')\n    }\n  }\n\n  let optionPaths = [dotenvPath] // default, look for .env\n  if (options && options.path) {\n    if (!Array.isArray(options.path)) {\n      optionPaths = [_resolveHome(options.path)]\n    } else {\n      optionPaths = [] // reset default\n      for (const filepath of options.path) {\n        optionPaths.push(_resolveHome(filepath))\n      }\n    }\n  }\n\n  // Build the parsed data in a temporary object (because we need to return it).  Once we have the final\n  // parsed data, we will combine it with process.env (or options.processEnv if provided).\n  let lastError\n  const parsedAll = {}\n  for (const path of optionPaths) {\n    try {\n      // Specifying an encoding returns a string instead of a buffer\n      const parsed = DotenvModule.parse(fs.readFileSync(path, { encoding }))\n\n      DotenvModule.populate(parsedAll, parsed, options)\n    } catch (e) {\n      if (debug) {\n        _debug(`Failed to load ${path} ${e.message}`)\n      }\n      lastError = e\n    }\n  }\n\n  let processEnv = process.env\n  if (options && options.processEnv != null) {\n    processEnv = options.processEnv\n  }\n\n  DotenvModule.populate(processEnv, parsedAll, options)\n\n  if (lastError) {\n    return { parsed: parsedAll, error: lastError }\n  } else {\n    return { parsed: parsedAll }\n  }\n}\n\n// Populates process.env from .env file\nfunction config (options) {\n  // fallback to original dotenv if DOTENV_KEY is not set\n  if (_dotenvKey(options).length === 0) {\n    return DotenvModule.configDotenv(options)\n  }\n\n  const vaultPath = _vaultPath(options)\n\n  // dotenvKey exists but .env.vault file does not exist\n  if (!vaultPath) {\n    _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`)\n\n    return DotenvModule.configDotenv(options)\n  }\n\n  return DotenvModule._configVault(options)\n}\n\nfunction decrypt (encrypted, keyStr) {\n  const key = Buffer.from(keyStr.slice(-64), 'hex')\n  let ciphertext = Buffer.from(encrypted, 'base64')\n\n  const nonce = ciphertext.subarray(0, 12)\n  const authTag = ciphertext.subarray(-16)\n  ciphertext = ciphertext.subarray(12, -16)\n\n  try {\n    const aesgcm = crypto.createDecipheriv('aes-256-gcm', key, nonce)\n    aesgcm.setAuthTag(authTag)\n    return `${aesgcm.update(ciphertext)}${aesgcm.final()}`\n  } catch (error) {\n    const isRange = error instanceof RangeError\n    const invalidKeyLength = error.message === 'Invalid key length'\n    const decryptionFailed = error.message === 'Unsupported state or unable to authenticate data'\n\n    if (isRange || invalidKeyLength) {\n      const err = new Error('INVALID_DOTENV_KEY: It must be 64 characters long (or more)')\n      err.code = 'INVALID_DOTENV_KEY'\n      throw err\n    } else if (decryptionFailed) {\n      const err = new Error('DECRYPTION_FAILED: Please check your DOTENV_KEY')\n      err.code = 'DECRYPTION_FAILED'\n      throw err\n    } else {\n      throw error\n    }\n  }\n}\n\n// Populate process.env with parsed values\nfunction populate (processEnv, parsed, options = {}) {\n  const debug = Boolean(options && options.debug)\n  const override = Boolean(options && options.override)\n\n  if (typeof parsed !== 'object') {\n    const err = new Error('OBJECT_REQUIRED: Please check the processEnv argument being passed to populate')\n    err.code = 'OBJECT_REQUIRED'\n    throw err\n  }\n\n  // Set process.env\n  for (const key of Object.keys(parsed)) {\n    if (Object.prototype.hasOwnProperty.call(processEnv, key)) {\n      if (override === true) {\n        processEnv[key] = parsed[key]\n      }\n\n      if (debug) {\n        if (override === true) {\n          _debug(`\"${key}\" is already defined and WAS overwritten`)\n        } else {\n          _debug(`\"${key}\" is already defined and was NOT overwritten`)\n        }\n      }\n    } else {\n      processEnv[key] = parsed[key]\n    }\n  }\n}\n\nconst DotenvModule = {\n  configDotenv,\n  _configVault,\n  _parseVault,\n  config,\n  decrypt,\n  parse,\n  populate\n}\n\nmodule.exports.configDotenv = DotenvModule.configDotenv\nmodule.exports._configVault = DotenvModule._configVault\nmodule.exports._parseVault = DotenvModule._parseVault\nmodule.exports.config = DotenvModule.config\nmodule.exports.decrypt = DotenvModule.decrypt\nmodule.exports.parse = DotenvModule.parse\nmodule.exports.populate = DotenvModule.populate\n\nmodule.exports = DotenvModule\n","'use strict';\n\nmodule.exports = (options = {}) => {\n\tlet repoUrl;\n\tif (options.repoUrl) {\n\t\trepoUrl = options.repoUrl;\n\t} else if (options.user && options.repo) {\n\t\trepoUrl = `https://github.com/${options.user}/${options.repo}`;\n\t} else {\n\t\tthrow new Error('You need to specify either the `repoUrl` option or both the `user` and `repo` options');\n\t}\n\n\tconst url = new URL(`${repoUrl}/issues/new`);\n\n\tconst types = [\n\t\t'body',\n\t\t'title',\n\t\t'labels',\n\t\t'template',\n\t\t'milestone',\n\t\t'assignee',\n\t\t'projects'\n\t];\n\n\tfor (const type of types) {\n\t\tlet value = options[type];\n\t\tif (value === undefined) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (type === 'labels' || type === 'projects') {\n\t\t\tif (!Array.isArray(value)) {\n\t\t\t\tthrow new TypeError(`The \\`${type}\\` option should be an array`);\n\t\t\t}\n\n\t\t\tvalue = value.join(',');\n\t\t}\n\n\t\turl.searchParams.set(type, value);\n\t}\n\n\treturn url.toString();\n};\n\n// TODO: Remove this for the next major release\nmodule.exports.default = module.exports;\n","'use strict';\nmodule.exports = (function()\n{\n  function _min(d0, d1, d2, bx, ay)\n  {\n    return d0 < d1 || d2 < d1\n        ? d0 > d2\n            ? d2 + 1\n            : d0 + 1\n        : bx === ay\n            ? d1\n            : d1 + 1;\n  }\n\n  return function(a, b)\n  {\n    if (a === b) {\n      return 0;\n    }\n\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n\n    var la = a.length;\n    var lb = b.length;\n\n    while (la > 0 && (a.charCodeAt(la - 1) === b.charCodeAt(lb - 1))) {\n      la--;\n      lb--;\n    }\n\n    var offset = 0;\n\n    while (offset < la && (a.charCodeAt(offset) === b.charCodeAt(offset))) {\n      offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n\n    var vector = [];\n\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n\n    var len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = (x += 4);\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n\n    return dd;\n  };\n})();\n\n","import { BasicBuilder } from './BasicBuilder'\nimport type { KeyType } from './KeyType'\nimport { Writer } from './Writer'\n\nexport abstract class TypeBuilder implements BasicBuilder {\n  // TODO(@SevInf): this should be replaced with precedence system that would\n  // automatically add parenthesis where they are needed\n  needsParenthesisWhenIndexed = false\n  needsParenthesisInKeyof = false\n  needsParenthesisInUnion = false\n  needsParenthesisInIntersection = false\n\n  abstract write(writer: Writer): void\n\n  subKey(key: string): KeyType {\n    // TODO: since we translating ESM to CommonJS during bundling, we\n    // can't handle circular dependencies the same way ESM does. We have to delay KeyType import\n    // to resolve it. Once we stop doing this, we can move this import to top of the file.\n    const { KeyType } = require('./KeyType')\n    return new KeyType(this, key)\n  }\n\n  writeIndexed(writer: Writer) {\n    if (this.needsParenthesisWhenIndexed) {\n      writer.write('(')\n    }\n\n    writer.write(this)\n\n    if (this.needsParenthesisWhenIndexed) {\n      writer.write(')')\n    }\n  }\n}\n","import { TypeBuilder } from './TypeBuilder'\nimport { Writer } from './Writer'\n\nexport class KeyType extends TypeBuilder {\n  constructor(\n    public baseType: TypeBuilder,\n    public key: string,\n  ) {\n    super()\n  }\n  write(writer: Writer): void {\n    this.baseType.writeIndexed(writer)\n\n    writer.write('[').write(`\"${this.key}\"`).write(']')\n  }\n}\n\nexport function keyType(baseType: TypeBuilder, key: string) {\n  return new KeyType(baseType, key)\n}\n","import * as Extensions from './core/extensions'\nimport * as Public from './core/public'\nimport * as Types from './core/types'\n\nexport { type Types }\nexport { Extensions }\nexport { Public }\n\nexport { type JsonBatchQuery, type JsonQuery } from './core/engines'\nexport { PrismaClientInitializationError } from './core/errors/PrismaClientInitializationError'\nexport { PrismaClientKnownRequestError } from './core/errors/PrismaClientKnownRequestError'\nexport { PrismaClientRustPanicError } from './core/errors/PrismaClientRustPanicError'\nexport { PrismaClientUnknownRequestError } from './core/errors/PrismaClientUnknownRequestError'\nexport { PrismaClientValidationError } from './core/errors/PrismaClientValidationError'\nexport { serializeJsonQuery } from './core/jsonProtocol/serializeJsonQuery'\nexport {\n  type Metric,\n  type MetricHistogram,\n  type MetricHistogramBucket,\n  type Metrics,\n  MetricsClient,\n} from './core/metrics/MetricsClient'\nexport { createParam } from './core/model/Param'\nexport { defineDmmfProperty } from './core/runtimeDataModel'\nexport type * from './core/types/exported'\nexport type { ITXClientDenyList } from './core/types/exported/itxClientDenyList'\nexport { objectEnumValues } from './core/types/exported/ObjectEnums'\nexport { skip } from './core/types/exported/Skip'\nexport { makeTypedQueryFactory } from './core/types/exported/TypedSql'\nexport type { PrismaClientOptions } from './getPrismaClient'\nexport { getPrismaClient } from './getPrismaClient'\nexport { makeStrictEnum } from './strictEnum'\nexport { deserializeRawResult } from './utils/deserializeRawResults'\nexport { getRuntime } from './utils/getRuntime'\nexport { warnEnvConflicts } from './warnEnvConflicts'\nexport {\n  type BaseDMMF,\n  dmmfToRuntimeDataModel,\n  type GetPrismaClientConfig,\n  type Operation,\n  type RuntimeDataModel,\n} from '@prisma/client-common'\nexport { deserializeJsonResponse } from '@prisma/client-engine-runtime'\nexport { Debug } from '@prisma/debug'\nexport * as DMMF from '@prisma/dmmf'\nexport type { SqlDriverAdapterFactory } from '@prisma/driver-adapter-utils'\nexport { warnOnce } from '@prisma/internals'\nexport { default as Decimal } from 'decimal.js'\nexport type { RawValue, Value } from 'sql-template-tag'\nexport { empty, join, raw, Sql, default as sqltag } from 'sql-template-tag'\n","import { defineExtension } from './defineExtension'\nimport { getExtensionContext } from './getExtensionContext'\n\nexport { defineExtension }\nexport { getExtensionContext }\n","import { Client } from '../../getPrismaClient'\nimport { ExtensionArgs } from '../types/exported/ExtensionArgs'\n\nexport function defineExtension(ext: ExtensionArgs | ((client: Client) => Client)) {\n  if (typeof ext === 'function') {\n    return ext\n  }\n\n  return (client: Client) => client.$extends(ext)\n}\n","/*\n * Because we use a symbol to store the context, we need to merge the context\n * with the original this type. We manage the context via `getExtensionContext`\n * to circumvent the limitations of `this` inference in TS, while also providing\n * a unified API for context management in generic and non-generic extensions.\n */\n\n/* eslint-disable prettier/prettier */\nexport type Context<T> = T extends { [K: symbol]: { ctx: infer C } }\n  ? C &\n      T & {\n        /**\n         * @deprecated Use `$name` instead.\n         */\n        name?: string\n        $name?: string\n        $parent?: unknown\n      }\n  : T & {\n      /**\n       * @deprecated Use `$name` instead.\n       */\n      name?: string\n      $name?: string\n      $parent?: unknown\n    }\n\nexport function getExtensionContext<T>(that: T) {\n  return that as any as Context<T>\n}\n","import { validator } from './validator'\n\n/*\n * /!\\ These exports are exposed to the user. Proceed with caution.\n *\n * TODO: Move more hardcoded utils from generation into here\n */\n\nexport { validator }\n","import { Args, Operation } from '../types/exported/Public'\nimport { Exact } from '../types/exported/Utils'\n\nexport function validator<V>(): <S>(select: Exact<S, V>) => S\nexport function validator<C, M extends Exclude<keyof C, `$${string}`>, O extends keyof C[M] & Operation>(\n  client: C,\n  model: M,\n  operation: O,\n): <S>(select: Exact<S, Args<C[M], O>>) => S\nexport function validator<\n  C,\n  M extends Exclude<keyof C, `$${string}`>,\n  O extends keyof C[M] & Operation,\n  P extends keyof Args<C[M], O>,\n>(client: C, model: M, operation: O, prop: P): <S>(select: Exact<S, Args<C[M], O>[P]>) => S\nexport function validator(..._args: any[]) {\n  return (args: any) => args\n}\n","let FORCE_COLOR, NODE_DISABLE_COLORS, NO_COLOR, TERM, isTTY=true;\nif (typeof process !== 'undefined') {\n\t({ FORCE_COLOR, NODE_DISABLE_COLORS, NO_COLOR, TERM } = process.env || {});\n\tisTTY = process.stdout && process.stdout.isTTY;\n}\n\nexport const $ = {\n\tenabled: !NODE_DISABLE_COLORS && NO_COLOR == null && TERM !== 'dumb' && (\n\t\tFORCE_COLOR != null && FORCE_COLOR !== '0' || isTTY\n\t)\n}\n\nfunction init(x, y) {\n\tlet rgx = new RegExp(`\\\\x1b\\\\[${y}m`, 'g');\n\tlet open = `\\x1b[${x}m`, close = `\\x1b[${y}m`;\n\n\treturn function (txt) {\n\t\tif (!$.enabled || txt == null) return txt;\n\t\treturn open + (!!~(''+txt).indexOf(close) ? txt.replace(rgx, close + open) : txt) + close;\n\t};\n}\n\n// modifiers\nexport const reset = init(0, 0);\nexport const bold = init(1, 22);\nexport const dim = init(2, 22);\nexport const italic = init(3, 23);\nexport const underline = init(4, 24);\nexport const inverse = init(7, 27);\nexport const hidden = init(8, 28);\nexport const strikethrough = init(9, 29);\n\n// colors\nexport const black = init(30, 39);\nexport const red = init(31, 39);\nexport const green = init(32, 39);\nexport const yellow = init(33, 39);\nexport const blue = init(34, 39);\nexport const magenta = init(35, 39);\nexport const cyan = init(36, 39);\nexport const white = init(37, 39);\nexport const gray = init(90, 39);\nexport const grey = init(90, 39);\n\n// background colors\nexport const bgBlack = init(40, 49);\nexport const bgRed = init(41, 49);\nexport const bgGreen = init(42, 49);\nexport const bgYellow = init(43, 49);\nexport const bgBlue = init(44, 49);\nexport const bgMagenta = init(45, 49);\nexport const bgCyan = init(46, 49);\nexport const bgWhite = init(47, 49);\n","import * as kleur from 'kleur/colors'\nimport { bold } from 'kleur/colors'\n\nconst MAX_ARGS_HISTORY = 100\nconst COLORS = ['green', 'yellow', 'blue', 'magenta', 'cyan', 'red']\n\nconst argsHistory: [namespace: string, ...unknown[]][] = []\nlet lastTimestamp = Date.now()\nlet lastColor = 0\n\nconst processEnv = typeof process !== 'undefined' ? process.env : {}\n\nglobalThis.DEBUG ??= processEnv.DEBUG ?? ''\nglobalThis.DEBUG_COLORS ??= processEnv.DEBUG_COLORS ? processEnv.DEBUG_COLORS === 'true' : true\n\n/**\n * Top-level utilities to configure the debug module.\n *\n * @example\n * ```ts\n * import Debug from '@prisma/debug'\n * Debug.enable('prisma:client')\n * const debug = Debug('prisma:client')\n * debug('Hello World')\n * ```\n */\nconst topProps = {\n  enable(namespace: any) {\n    if (typeof namespace === 'string') {\n      globalThis.DEBUG = namespace\n    }\n  },\n  disable() {\n    const prev = globalThis.DEBUG\n    globalThis.DEBUG = ''\n    return prev\n  },\n  // this is the core logic to check if logging should happen or not\n  enabled(namespace: string) {\n    // these are the namespaces that we are listening to in DEBUG=...\n    const listenedNamespaces: string[] = globalThis.DEBUG.split(',').map((s: string) => {\n      return s.replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&') // escape regex except \"*\"\n    })\n\n    // we take incoming namespaces and check then against listened\n    const isListened = listenedNamespaces.some((listenedNamespace) => {\n      if (listenedNamespace === '' || listenedNamespace[0] === '-') return false\n\n      return namespace.match(RegExp(listenedNamespace.split('*').join('.*') + '$'))\n    })\n\n    // we take incoming namespaces and check then against excluded\n    const isExcluded = listenedNamespaces.some((listenedNamespace) => {\n      if (listenedNamespace === '' || listenedNamespace[0] !== '-') return false\n\n      return namespace.match(RegExp(listenedNamespace.slice(1).split('*').join('.*') + '$'))\n    })\n\n    return isListened && !isExcluded\n  },\n  log: (...args: string[]) => {\n    const [namespace, format, ...rest] = args\n    // Note: `console.warn` / `console.log` use `util.format` internally, so they can handle\n    // `printf`-style string interpolation.\n    const logWithFormatting = console.warn ?? console.log\n\n    // console only formats first arg, concat ns+format\n    logWithFormatting(`${namespace} ${format}`, ...rest)\n  },\n  formatters: {}, // not implemented\n}\n\n/**\n * Create a new debug instance with the given namespace.\n *\n * @example\n * ```ts\n * import Debug from '@prisma/debug'\n * const debug = Debug('prisma:client')\n * debug('Hello World')\n * ```\n */\nfunction debugCreate(namespace: string) {\n  const instanceProps = {\n    color: COLORS[lastColor++ % COLORS.length],\n    enabled: topProps.enabled(namespace),\n    namespace: namespace,\n    log: topProps.log,\n    extend: () => {}, // not implemented\n  }\n\n  const debugCall = (...args: any[]) => {\n    const { enabled, namespace, color, log } = instanceProps\n\n    // we push the args to our history of args\n    if (args.length !== 0) {\n      argsHistory.push([namespace, ...args])\n    }\n\n    // if it is too big, then we remove some\n    if (argsHistory.length > MAX_ARGS_HISTORY) {\n      argsHistory.shift()\n    }\n\n    if (topProps.enabled(namespace) || enabled) {\n      const stringArgs = args.map((arg) => {\n        if (typeof arg === 'string') {\n          return arg\n        }\n\n        return safeStringify(arg)\n      })\n\n      const ms = `+${Date.now() - lastTimestamp}ms`\n      lastTimestamp = Date.now()\n\n      if (globalThis.DEBUG_COLORS) {\n        log(kleur[color](bold(namespace)), ...stringArgs, kleur[color](ms))\n      } else {\n        log(namespace, ...stringArgs, ms)\n      }\n    }\n  }\n\n  return new Proxy(debugCall, {\n    get: (_, prop) => instanceProps[prop],\n    set: (_, prop, value) => (instanceProps[prop] = value),\n  }) as typeof debugCall & typeof instanceProps\n}\n\nconst Debug = new Proxy(debugCreate, {\n  get: (_, prop) => topProps[prop],\n  set: (_, prop, value) => (topProps[prop] = value),\n}) as typeof debugCreate & typeof topProps\n\nfunction safeStringify(value: any, indent = 2) {\n  const cache = new Set<any>()\n\n  return JSON.stringify(\n    value,\n    (key, value) => {\n      if (typeof value === 'object' && value !== null) {\n        if (cache.has(value)) {\n          return `[Circular *]`\n        }\n\n        cache.add(value)\n      } else if (typeof value === 'bigint') {\n        return value.toString()\n      }\n\n      return value\n    },\n    indent,\n  )\n}\n\n/**\n * We can get the logs for all the last {@link MAX_ARGS_HISTORY} ${@link debugCall} that\n * have happened in the different packages. Useful to generate error report links.\n * @see https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers\n * @param numChars\n * @returns\n */\nexport function getLogs(numChars = 7500): string {\n  const logs = argsHistory\n    .map(([namespace, ...args]) => {\n      return `${namespace} ${args\n        .map((arg) => {\n          if (typeof arg === 'string') {\n            return arg\n          } else {\n            return JSON.stringify(arg)\n          }\n        })\n        .join(' ')}`\n    })\n    .join('\\n')\n\n  if (logs.length < numChars) {\n    return logs\n  }\n\n  return logs.slice(-numChars)\n}\n\nexport function clearLogs() {\n  argsHistory.length = 0\n}\n\nexport { Debug }\nexport default Debug\n","import fs from 'fs'\n\n/**\n * Determines whether Node API is supported on the current platform and throws if not\n */\nexport function assertNodeAPISupported(): void {\n  const customLibraryPath = process.env.PRISMA_QUERY_ENGINE_LIBRARY\n  const customLibraryExists = customLibraryPath && fs.existsSync(customLibraryPath)\n  if (!customLibraryExists && process.arch === 'ia32') {\n    throw new Error(\n      `The default query engine type (Node-API, \"library\") is currently not supported for 32bit Node. Please set \\`engineType = \"binary\"\\` in the \"generator\" block of your \"schema.prisma\" file (or use the environment variables \"PRISMA_CLIENT_ENGINE_TYPE=binary\" and/or \"PRISMA_CLI_QUERY_ENGINE_TYPE=binary\".)`,\n    )\n  }\n}\n","export type BinaryTarget =\n  | 'native'\n  | 'darwin'\n  | 'darwin-arm64'\n  | 'debian-openssl-1.0.x'\n  | 'debian-openssl-1.1.x'\n  | 'debian-openssl-3.0.x'\n  | 'rhel-openssl-1.0.x'\n  | 'rhel-openssl-1.1.x'\n  | 'rhel-openssl-3.0.x'\n  | 'linux-arm64-openssl-1.1.x'\n  | 'linux-arm64-openssl-1.0.x'\n  | 'linux-arm64-openssl-3.0.x'\n  | 'linux-arm-openssl-1.1.x'\n  | 'linux-arm-openssl-1.0.x'\n  | 'linux-arm-openssl-3.0.x'\n  | 'linux-musl'\n  | 'linux-musl-openssl-3.0.x'\n  | 'linux-musl-arm64-openssl-1.1.x'\n  | 'linux-musl-arm64-openssl-3.0.x'\n  | 'linux-nixos'\n  | 'linux-static-x64'\n  | 'linux-static-arm64'\n  | 'windows'\n  | 'freebsd11'\n  | 'freebsd12'\n  | 'freebsd13'\n  | 'freebsd14'\n  | 'freebsd15'\n  | 'openbsd'\n  | 'netbsd'\n  | 'arm'\n\nexport const binaryTargets: BinaryTarget[] = [\n  'darwin',\n  'darwin-arm64',\n  'debian-openssl-1.0.x',\n  'debian-openssl-1.1.x',\n  'debian-openssl-3.0.x',\n  'rhel-openssl-1.0.x',\n  'rhel-openssl-1.1.x',\n  'rhel-openssl-3.0.x',\n  'linux-arm64-openssl-1.1.x',\n  'linux-arm64-openssl-1.0.x',\n  'linux-arm64-openssl-3.0.x',\n  'linux-arm-openssl-1.1.x',\n  'linux-arm-openssl-1.0.x',\n  'linux-arm-openssl-3.0.x',\n  'linux-musl',\n  'linux-musl-openssl-3.0.x',\n  'linux-musl-arm64-openssl-1.1.x',\n  'linux-musl-arm64-openssl-3.0.x',\n  'linux-nixos',\n  'linux-static-x64',\n  'linux-static-arm64',\n  'windows',\n  'freebsd11',\n  'freebsd12',\n  'freebsd13',\n  'freebsd14',\n  'freebsd15',\n  'openbsd',\n  'netbsd',\n  'arm',\n]\n","// Why is this in getPlatform... because of our dependency tree\n\nimport { BinaryTarget } from './binaryTargets'\n\nconst NODE_API_QUERY_ENGINE_URL_BASE = 'libquery_engine'\n\n/**\n * Gets Node-API Library name depending on the binary target\n * @param binaryTarget\n * @param type  `fs` gets name used on the file system, `url` gets the name required to download the library from S3\n * @returns\n */\nexport function getNodeAPIName(binaryTarget: BinaryTarget, type: 'url' | 'fs') {\n  const isUrl = type === 'url'\n  if (binaryTarget.includes('windows')) {\n    return isUrl ? `query_engine.dll.node` : `query_engine-${binaryTarget}.dll.node`\n  } else if (binaryTarget.includes('darwin')) {\n    return isUrl\n      ? `${NODE_API_QUERY_ENGINE_URL_BASE}.dylib.node`\n      : `${NODE_API_QUERY_ENGINE_URL_BASE}-${binaryTarget}.dylib.node`\n  } else {\n    return isUrl\n      ? `${NODE_API_QUERY_ENGINE_URL_BASE}.so.node`\n      : `${NODE_API_QUERY_ENGINE_URL_BASE}-${binaryTarget}.so.node`\n  }\n}\n","import Debug from '@prisma/debug'\nimport cp from 'child_process'\nimport fs from 'fs/promises'\nimport os from 'os'\nimport { match } from 'ts-pattern'\nimport { promisify } from 'util'\n\nimport { BinaryTarget } from './binaryTargets'\nimport { warn } from './logger'\n\nconst exec = promisify(cp.exec)\n\nconst debug = Debug('prisma:get-platform')\n\nconst supportedLibSSLVersions = ['1.0.x', '1.1.x', '3.0.x'] as const\n\n// https://www.geeksforgeeks.org/node-js-process-arch-property/\nexport type Arch = 'x32' | 'x64' | 'arm' | 'arm64' | 's390' | 's390x' | 'mipsel' | 'ia32' | 'mips' | 'ppc' | 'ppc64'\nexport type DistroInfo = {\n  /**\n   * The original distro is the Linux distro name detected via its release file.\n   * E.g., on Arch Linux, the original distro is `arch`. On Linux Alpine, the original distro is `alpine`.\n   */\n  originalDistro?: string\n\n  /**\n   * The family distro is the Linux distro name that is used to determine Linux families based on the same base distro, and likely using the same package manager.\n   * E.g., both Ubuntu and Debian belong to the `debian` family of distros, and thus rely on the same package manager (`apt`).\n   */\n  familyDistro?: string\n\n  /**\n   * The target distro is the Linux distro associated with the Prisma Engines.\n   * E.g., on Arch Linux, Debian, and Ubuntu, the target distro is `debian`. On Linux Alpine, the target distro is `musl`.\n   */\n  targetDistro?:\n    | 'rhel'\n    | 'debian'\n    | 'musl'\n    | 'arm'\n    | 'nixos'\n    | 'freebsd11'\n    | 'freebsd12'\n    | 'freebsd13'\n    | 'freebsd14'\n    | 'freebsd15'\n}\ntype GetOsResultLinux = {\n  platform: 'linux'\n  arch: Arch\n  archFromUname: string | undefined\n  /**\n   * Starting from version 3.0, OpenSSL is basically adopting semver, and will be API and ABI compatible within a major version.\n   */\n  libssl?: (typeof supportedLibSSLVersions)[number]\n} & DistroInfo\n\nexport type GetOSResult =\n  | {\n      platform: Omit<NodeJS.Platform, 'linux'>\n      arch: Arch\n      targetDistro?: DistroInfo['targetDistro']\n      familyDistro?: never\n      originalDistro?: never\n      archFromUname?: never\n      libssl?: never\n    }\n  | GetOsResultLinux\n\n/**\n * For internal use only. This public export will be eventually removed in favor of `getPlatformWithOSResult`.\n */\nexport async function getos(): Promise<GetOSResult> {\n  const platform = os.platform()\n  const arch = process.arch as Arch\n  if (platform === 'freebsd') {\n    const version = await getCommandOutput(`freebsd-version`)\n    if (version && version.trim().length > 0) {\n      const regex = /^(\\d+)\\.?/\n      const match = regex.exec(version)\n      if (match) {\n        return {\n          platform: 'freebsd',\n          targetDistro: `freebsd${match[1]}` as GetOSResult['targetDistro'],\n          arch,\n        }\n      }\n    }\n  }\n\n  if (platform !== 'linux') {\n    return {\n      platform,\n      arch,\n    }\n  }\n\n  const distroInfo = await resolveDistro()\n  const archFromUname = await getArchFromUname()\n  const libsslSpecificPaths = computeLibSSLSpecificPaths({ arch, archFromUname, familyDistro: distroInfo.familyDistro })\n  const { libssl } = await getSSLVersion(libsslSpecificPaths)\n\n  return {\n    platform: 'linux',\n    libssl,\n    arch,\n    archFromUname,\n    ...distroInfo,\n  }\n}\n\nexport function parseDistro(osReleaseInput: string): DistroInfo {\n  const idRegex = /^ID=\"?([^\"\\n]*)\"?$/im\n  const idLikeRegex = /^ID_LIKE=\"?([^\"\\n]*)\"?$/im\n\n  const idMatch = idRegex.exec(osReleaseInput)\n  const id = (idMatch && idMatch[1] && idMatch[1].toLowerCase()) || ''\n\n  const idLikeMatch = idLikeRegex.exec(osReleaseInput)\n  const idLike = (idLikeMatch && idLikeMatch[1] && idLikeMatch[1].toLowerCase()) || ''\n\n  /**\n   * Example output of /etc/os-release:\n   *\n   * Alpine Linux => ID=alpine                                     => targetDistro=musl, familyDistro=alpine\n   * Raspbian     => ID=raspbian, ID_LIKE=debian                   => targetDistro=arm, familyDistro=debian\n   * Debian       => ID=debian                                     => targetDistro=debian, familyDistro=debian\n   * Distroless   => ID=debian                                     => targetDistro=debian, familyDistro=debian\n   * Ubuntu       => ID=ubuntu, ID_LIKE=debian                     => targetDistro=debian, familyDistro=debian\n   * Arch Linux   => ID=arch                                       => targetDistro=debian, familyDistro=arch\n   * Manjaro      => ID=manjaro, ID_LIKE=arch                      => targetDistro=debian, familyDistro=arch\n   * Red Hat      => ID=rhel, ID_LIKE=fedora                       => targetDistro=rhel, familyDistro=rhel\n   * Centos       => ID=centos, ID_LIKE=rhel fedora                => targetDistro=rhel, familyDistro=rhel\n   * Alma Linux   => ID=\"almalinux\", ID_LIKE=\"rhel centos fedora\"  => targetDistro=rhel, familyDistro=rhel\n   * Fedora       => ID=fedora                                     => targetDistro=rhel, familyDistro=rhel\n   */\n  const distroInfo = match({ id, idLike })\n    .with(\n      { id: 'alpine' },\n      ({ id: originalDistro }) =>\n        ({\n          targetDistro: 'musl',\n          familyDistro: originalDistro,\n          originalDistro,\n        }) as const,\n    )\n    .with(\n      { id: 'raspbian' },\n      ({ id: originalDistro }) =>\n        ({\n          targetDistro: 'arm',\n          familyDistro: 'debian',\n          originalDistro,\n        }) as const,\n    )\n    .with(\n      { id: 'nixos' },\n      ({ id: originalDistro }) =>\n        ({\n          targetDistro: 'nixos',\n          originalDistro,\n          familyDistro: 'nixos',\n        }) as const,\n    )\n    .with(\n      { id: 'debian' },\n      { id: 'ubuntu' },\n      ({ id: originalDistro }) =>\n        ({\n          targetDistro: 'debian',\n          familyDistro: 'debian',\n          originalDistro,\n        }) as const,\n    )\n    .with(\n      { id: 'rhel' },\n      { id: 'centos' },\n      { id: 'fedora' },\n      ({ id: originalDistro }) =>\n        ({\n          targetDistro: 'rhel',\n          familyDistro: 'rhel',\n          originalDistro,\n        }) as const,\n    )\n    .when(\n      ({ idLike }) => idLike.includes('debian') || idLike.includes('ubuntu'),\n      ({ id: originalDistro }) =>\n        ({\n          targetDistro: 'debian',\n          familyDistro: 'debian',\n          originalDistro,\n        }) as const,\n    )\n    .when(\n      ({ idLike }) => id === 'arch' || idLike.includes('arch'),\n      ({ id: originalDistro }) =>\n        ({\n          targetDistro: 'debian',\n          familyDistro: 'arch',\n          originalDistro,\n        }) as const,\n    )\n    .when(\n      ({ idLike }) =>\n        idLike.includes('centos') || idLike.includes('fedora') || idLike.includes('rhel') || idLike.includes('suse'),\n      ({ id: originalDistro }) =>\n        ({\n          targetDistro: 'rhel',\n          familyDistro: 'rhel',\n          originalDistro,\n        }) as const,\n    )\n    .otherwise(({ id: originalDistro }) => {\n      /* Generic distro info fallback */\n      return {\n        targetDistro: undefined,\n        familyDistro: undefined,\n        originalDistro,\n      } as const\n    })\n\n  debug(`Found distro info:\\n${JSON.stringify(distroInfo, null, 2)}`)\n  return distroInfo\n}\n\nexport async function resolveDistro(): Promise<DistroInfo> {\n  // https://github.com/retrohacker/getos/blob/master/os.json\n\n  const osReleaseFile = '/etc/os-release'\n  try {\n    const osReleaseInput = await fs.readFile(osReleaseFile, { encoding: 'utf-8' })\n    return parseDistro(osReleaseInput)\n  } catch (_) {\n    return {\n      targetDistro: undefined,\n      familyDistro: undefined,\n      originalDistro: undefined,\n    }\n  }\n}\n\n/**\n * Parse the OpenSSL version from the output of the openssl binary, e.g.\n * \"OpenSSL 3.0.2 15 Mar 2022 (Library: OpenSSL 3.0.2 15 Mar 2022)\" -> \"3.0.x\"\n */\nexport function parseOpenSSLVersion(input: string): GetOsResultLinux['libssl'] | undefined {\n  const match = /^OpenSSL\\s(\\d+\\.\\d+)\\.\\d+/.exec(input)\n  if (match) {\n    const partialVersion = `${match[1]}.x`\n    return sanitiseSSLVersion(partialVersion)\n  }\n\n  return undefined\n}\n\n/**\n * Parse the OpenSSL version from the output of the libssl.so file, e.g.\n * \"libssl.so.3\" -> \"3.0.x\"\n */\nexport function parseLibSSLVersion(input: string): GetOsResultLinux['libssl'] {\n  const match = /libssl\\.so\\.(\\d)(\\.\\d)?/.exec(input)\n  if (match) {\n    const partialVersion = `${match[1]}${match[2] ?? '.0'}.x`\n    return sanitiseSSLVersion(partialVersion)\n  }\n\n  return undefined\n}\n\nfunction sanitiseSSLVersion(version: string): GetOsResultLinux['libssl'] {\n  const sanitisedVersion = (() => {\n    if (isLibssl1x(version)) {\n      return version\n    }\n\n    /**\n     * Sanitise OpenSSL 3+. E.g., '3.1.x' becomes '3.0.x'\n     */\n    const versionSplit = version.split('.')\n    versionSplit[1] = '0'\n    return versionSplit.join('.') as NonNullable<GetOsResultLinux['libssl']>\n  })()\n\n  /* Validate that we've parsed a libssl version we actually support */\n  if (supportedLibSSLVersions.includes(sanitisedVersion)) {\n    return sanitisedVersion\n  }\n\n  return undefined\n}\n\ntype ComputeLibSSLSpecificPathsParams = {\n  arch: Arch\n  archFromUname: Awaited<ReturnType<typeof getArchFromUname>>\n  familyDistro: DistroInfo['familyDistro']\n}\n\nexport function computeLibSSLSpecificPaths(args: ComputeLibSSLSpecificPathsParams) {\n  return match(args)\n    .with({ familyDistro: 'musl' }, () => {\n      /* Linux Alpine */\n      debug('Trying platform-specific paths for \"alpine\"')\n      return ['/lib', '/usr/lib']\n    })\n    .with({ familyDistro: 'debian' }, ({ archFromUname }) => {\n      /* Linux Debian, Ubuntu, etc */\n      debug('Trying platform-specific paths for \"debian\" (and \"ubuntu\")')\n      return [`/usr/lib/${archFromUname}-linux-gnu`, `/lib/${archFromUname}-linux-gnu`]\n    })\n    .with({ familyDistro: 'rhel' }, () => {\n      /* Linux Red Hat, OpenSuse etc */\n      debug('Trying platform-specific paths for \"rhel\"')\n      return ['/lib64', '/usr/lib64']\n    })\n    .otherwise(({ familyDistro, arch, archFromUname }) => {\n      /* Other Linux distros, we don't do anything specific and fall back to the next blocks */\n      debug(`Don't know any platform-specific paths for \"${familyDistro}\" on ${arch} (${archFromUname})`)\n      return []\n    })\n}\n\ntype GetOpenSSLVersionResult =\n  | {\n      libssl: GetOsResultLinux['libssl']\n      strategy: 'libssl-specific-path' | 'ldconfig' | 'openssl-binary'\n    }\n  | {\n      libssl?: never\n      strategy?: never\n    }\n\n/**\n * On Linux, returns the libssl version excluding the patch version, e.g. \"1.1.x\".\n * Reading the version from the libssl.so file is more reliable than reading it from the openssl binary.\n * Older versions of libssl are preferred, e.g. \"1.0.x\" over \"1.1.x\", because of Vercel serverless\n * having different build and runtime environments, with the runtime environment having an old version\n * of libssl, and the build environment having both that old version and a newer version of libssl installed.\n * Because of https://github.com/prisma/prisma/issues/17499, we explicitly filter out libssl 0.x.\n *\n * This function never throws.\n */\nexport async function getSSLVersion(libsslSpecificPaths: string[]): Promise<GetOpenSSLVersionResult> {\n  const excludeLibssl0x = 'grep -v \"libssl.so.0\"'\n  const libsslFilenameFromSpecificPath: string | undefined = await findLibSSLInLocations(libsslSpecificPaths)\n\n  if (libsslFilenameFromSpecificPath) {\n    debug(`Found libssl.so file using platform-specific paths: ${libsslFilenameFromSpecificPath}`)\n    const libsslVersion = parseLibSSLVersion(libsslFilenameFromSpecificPath)\n    debug(`The parsed libssl version is: ${libsslVersion}`)\n    if (libsslVersion) {\n      return { libssl: libsslVersion, strategy: 'libssl-specific-path' }\n    }\n  }\n\n  debug('Falling back to \"ldconfig\" and other generic paths')\n  let libsslFilename: string | undefined = await getCommandOutput(\n    /**\n     * The `ldconfig -p` returns the dynamic linker cache paths, where libssl.so files are likely to be included.\n     * Each line looks like this:\n     * \tlibssl.so (libc6,hard-float) => /usr/lib/arm-linux-gnueabihf/libssl.so.1.1\n     * But we're only interested in the filename, so we use sed to remove everything before the `=>` separator,\n     * and then we remove the path and keep only the filename.\n     * The second sed commands uses `|` as a separator because the paths may contain `/`, which would result in the\n     * `unknown option to 's'` error (see https://stackoverflow.com/a/9366940/6174476) - which would silently\n     * fail with error code 0.\n     */\n    `ldconfig -p | sed \"s/.*=>s*//\" | sed \"s|.*/||\" | grep libssl | sort | ${excludeLibssl0x}`,\n  )\n\n  if (!libsslFilename) {\n    /**\n     * Fall back to the rhel-specific paths (although `familyDistro` isn't detected as rhel) when the `ldconfig` command fails.\n     */\n    libsslFilename = await findLibSSLInLocations(['/lib64', '/usr/lib64', '/lib', '/usr/lib'])\n  }\n\n  if (libsslFilename) {\n    debug(`Found libssl.so file using \"ldconfig\" or other generic paths: ${libsslFilename}`)\n    const libsslVersion = parseLibSSLVersion(libsslFilename)\n    debug(`The parsed libssl version is: ${libsslVersion}`)\n    if (libsslVersion) {\n      return { libssl: libsslVersion, strategy: 'ldconfig' }\n    }\n  }\n\n  /* Reading the libssl.so version didn't work, fall back to openssl */\n\n  const openSSLVersionLine: string | undefined = await getCommandOutput('openssl version -v')\n\n  if (openSSLVersionLine) {\n    debug(`Found openssl binary with version: ${openSSLVersionLine}`)\n    const openSSLVersion = parseOpenSSLVersion(openSSLVersionLine)\n    debug(`The parsed openssl version is: ${openSSLVersion}`)\n    if (openSSLVersion) {\n      return { libssl: openSSLVersion, strategy: 'openssl-binary' }\n    }\n  }\n\n  /* Reading openssl didn't work */\n  debug(`Couldn't find any version of libssl or OpenSSL in the system`)\n  return {}\n}\n\n/**\n * Looks for libssl in specified directories, returns the first one found\n * @param directories\n * @returns\n */\nasync function findLibSSLInLocations(directories: string[]) {\n  for (const dir of directories) {\n    const libssl = await findLibSSL(dir)\n    if (libssl) {\n      return libssl\n    }\n  }\n  return undefined\n}\n\n/**\n * Looks for libssl in specific directory\n * @param directory\n * @returns\n */\nasync function findLibSSL(directory: string) {\n  try {\n    const dirContents = await fs.readdir(directory)\n    return dirContents.find((value) => value.startsWith('libssl.so.') && !value.startsWith('libssl.so.0'))\n  } catch (e) {\n    if (e.code === 'ENOENT') {\n      return undefined\n    }\n    throw e\n  }\n}\n\n/**\n * Get the binary target for the current platform, e.g. `linux-musl-arm64-openssl-3.0.x` for Linux Alpine on arm64.\n */\nexport async function getBinaryTargetForCurrentPlatform(): Promise<BinaryTarget> {\n  const { binaryTarget } = await getPlatformInfoMemoized()\n  return binaryTarget\n}\n\nexport type PlatformInfo = GetOSResult & { binaryTarget: BinaryTarget }\n\nfunction isPlatformInfoDefined(args: Partial<PlatformInfo>): args is PlatformInfo {\n  return args.binaryTarget !== undefined\n}\n\n/**\n * Get the binary target and other system information (e.g., the libssl version to look for) for the current platform.\n */\nexport async function getPlatformInfo(): Promise<PlatformInfo> {\n  const { memoized: _, ...rest } = await getPlatformInfoMemoized()\n  return rest\n}\n\nlet memoizedPlatformWithInfo: Partial<PlatformInfo> = {}\n\nexport async function getPlatformInfoMemoized(): Promise<PlatformInfo & { memoized: boolean }> {\n  if (isPlatformInfoDefined(memoizedPlatformWithInfo)) {\n    return Promise.resolve({ ...memoizedPlatformWithInfo, memoized: true })\n  }\n\n  const args = await getos()\n  const binaryTarget = getBinaryTargetForCurrentPlatformInternal(args)\n  memoizedPlatformWithInfo = { ...args, binaryTarget }\n  return { ...(memoizedPlatformWithInfo as PlatformInfo), memoized: false }\n}\n\n/**\n * This function is only exported for testing purposes.\n */\nexport function getBinaryTargetForCurrentPlatformInternal(args: GetOSResult): BinaryTarget {\n  const { platform, arch, archFromUname, libssl, targetDistro, familyDistro, originalDistro } = args\n\n  if (platform === 'linux' && !['x64', 'arm64'].includes(arch)) {\n    warn(\n      `Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected \"${arch}\" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture \"${archFromUname}\".`,\n    )\n  }\n\n  // sometimes we fail to detect the libssl version to use, so we default to 1.1.x\n  const defaultLibssl = '1.1.x' as const\n  if (platform === 'linux' && libssl === undefined) {\n    /**\n     * Ask the user to install libssl manually, and provide some additional instructions based on the detected Linux distro family.\n     * TODO: we should also provide a pris.ly link to a documentation page with more details on how to install libssl.\n     */\n    const additionalMessage = match({ familyDistro })\n      .with({ familyDistro: 'debian' }, () => {\n        return \"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.\"\n      })\n      .otherwise(() => {\n        return 'Please manually install OpenSSL and try installing Prisma again.'\n      })\n\n    warn(\n      `Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to \"openssl-${defaultLibssl}\".\n${additionalMessage}`,\n    )\n  }\n\n  // sometimes we fail to detect the distro in use, so we default to debian\n  const defaultDistro = 'debian' as const\n  if (platform === 'linux' && targetDistro === undefined) {\n    debug(`Distro is \"${originalDistro}\". Falling back to Prisma engines built for \"${defaultDistro}\".`)\n  }\n\n  // Apple Silicon (M1)\n  if (platform === 'darwin' && arch === 'arm64') {\n    return 'darwin-arm64'\n  }\n\n  if (platform === 'darwin') {\n    return 'darwin'\n  }\n\n  if (platform === 'win32') {\n    return 'windows'\n  }\n\n  if (platform === 'freebsd') {\n    return targetDistro as BinaryTarget\n  }\n\n  if (platform === 'openbsd') {\n    return 'openbsd'\n  }\n\n  if (platform === 'netbsd') {\n    return 'netbsd'\n  }\n\n  if (platform === 'linux' && targetDistro === 'nixos') {\n    return 'linux-nixos'\n  }\n\n  if (platform === 'linux' && arch === 'arm64') {\n    // 64 bit ARM (musl or glibc)\n    const baseName = targetDistro === 'musl' ? 'linux-musl-arm64' : 'linux-arm64'\n    return `${baseName}-openssl-${libssl || defaultLibssl}` as BinaryTarget\n  }\n\n  if (platform === 'linux' && arch === 'arm') {\n    // 32 bit ARM\n    return `linux-arm-openssl-${libssl || defaultLibssl}` as BinaryTarget\n  }\n\n  if (platform === 'linux' && targetDistro === 'musl') {\n    const base = 'linux-musl'\n    if (!libssl) {\n      return base\n    }\n\n    if (isLibssl1x(libssl)) {\n      // Alpine 3.16 or below linked with OpenSSL 1.1\n      return base\n    } else {\n      // Alpine 3.17 or above linked with OpenSSL 3.0\n      return `${base}-openssl-${libssl}`\n    }\n  }\n\n  // when the platform is linux\n  if (platform === 'linux' && targetDistro && libssl) {\n    return `${targetDistro}-openssl-${libssl}` as BinaryTarget\n  }\n\n  if (platform !== 'linux') {\n    warn(`Prisma detected unknown OS \"${platform}\" and may not work as expected. Defaulting to \"linux\".`)\n  }\n\n  // if just OpenSSL is known, fallback to debian with a specific libssl version\n  if (libssl) {\n    return `${defaultDistro}-openssl-${libssl}`\n  }\n\n  // if just the targetDistro is known, fallback to latest OpenSSL 1.1\n  if (targetDistro) {\n    return `${targetDistro}-openssl-${defaultLibssl}` as BinaryTarget\n  }\n\n  // use the debian build with OpenSSL 1.1 as a last resort\n  // TODO: perhaps we should default to 'debian-openssl-3.0.x'\n  return `${defaultDistro}-openssl-${defaultLibssl}`\n}\n\n/**\n * Given a promise generator, returns the promise's result.\n * If the promise throws, returns undefined.\n */\nasync function discardError<T>(runPromise: () => Promise<T>): Promise<T | undefined> {\n  try {\n    return await runPromise()\n  } catch (e) {\n    return undefined\n  }\n}\n\n/**\n * Executes system command and returns its output. If command fails, returns undefined\n */\nfunction getCommandOutput(command: string) {\n  return discardError(async () => {\n    const result = await exec(command)\n\n    debug(`Command \"${command}\" successfully returned \"${result.stdout}\"`)\n    return result.stdout\n  })\n}\n\n/**\n * Returns the architecture of a system from the output of `uname -m` (whose format is different than `process.arch`).\n * This function never throws.\n * TODO: deprecate this function in favor of `os.machine()` once either Node v16.18.0 or v18.9.0 becomes the minimum\n * supported Node.js version for Prisma.\n */\nexport async function getArchFromUname(): Promise<string | undefined> {\n  if (typeof os['machine'] === 'function') {\n    return os['machine']()\n  }\n  const arch = await getCommandOutput('uname -m')\n  return arch?.trim()\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nfunction isLibssl1x(libssl: NonNullable<GetOSResult['libssl']> | string): libssl is '1.0.x' | '1.1.x' {\n  return libssl.startsWith('1.')\n}\n","/**\n * Symbols used internally within ts-pattern to construct and discriminate\n * Guard, Not, and Select, and AnonymousSelect patterns\n *\n * Symbols have the advantage of not appearing in auto-complete suggestions in\n * user defined patterns, and eliminate the risk of property\n * overlap between ts-pattern internals and user defined patterns.\n *\n * These symbols have to be visible to tsc for type inference to work, but\n * users should not import them\n * @module\n * @private\n * @internal\n */\n\nexport const matcher = Symbol.for('@ts-pattern/matcher');\nexport type matcher = typeof matcher;\n\nexport const unset = Symbol.for('@ts-pattern/unset');\nexport type unset = typeof unset;\n\nexport const isVariadic = Symbol.for('@ts-pattern/isVariadic');\nexport type isVariadic = typeof isVariadic;\n\n// can't be a symbol because this key has to be enumerable.\nexport const anonymousSelectKey = '@ts-pattern/anonymous-select-key';\nexport type anonymousSelectKey = typeof anonymousSelectKey;\n\nexport const override = Symbol.for('@ts-pattern/override');\nexport type override = typeof override;\n","/**\n * @module\n * @private\n * @internal\n */\n\nimport * as symbols from './symbols';\nimport { SelectionType } from '../types/FindSelected';\nimport { Pattern, Matcher, MatcherType, AnyMatcher } from '../types/Pattern';\n\n// @internal\nexport const isObject = (value: unknown): value is Object =>\n  Boolean(value && typeof value === 'object');\n\n//   @internal\nexport const isMatcher = (\n  x: unknown\n): x is Matcher<unknown, unknown, MatcherType, SelectionType> => {\n  const pattern = x as Matcher<unknown, unknown, MatcherType, SelectionType>;\n  return pattern && !!pattern[symbols.matcher];\n};\n\n// @internal\nconst isOptionalPattern = (\n  x: unknown\n): x is Matcher<unknown, unknown, 'optional', SelectionType> => {\n  return isMatcher(x) && x[symbols.matcher]().matcherType === 'optional';\n};\n\n// tells us if the value matches a given pattern.\n// @internal\nexport const matchPattern = (\n  pattern: any,\n  value: any,\n  select: (key: string, value: unknown) => void\n): boolean => {\n  if (isMatcher(pattern)) {\n    const matcher = pattern[symbols.matcher]();\n    const { matched, selections } = matcher.match(value);\n    if (matched && selections) {\n      Object.keys(selections).forEach((key) => select(key, selections[key]));\n    }\n    return matched;\n  }\n\n  if (isObject(pattern)) {\n    if (!isObject(value)) return false;\n\n    // Tuple pattern\n    if (Array.isArray(pattern)) {\n      if (!Array.isArray(value)) return false;\n      let startPatterns = [];\n      let endPatterns = [];\n      let variadicPatterns: AnyMatcher[] = [];\n\n      for (const i of pattern.keys()) {\n        const subpattern = pattern[i];\n        if (isMatcher(subpattern) && subpattern[symbols.isVariadic]) {\n          variadicPatterns.push(subpattern);\n        } else if (variadicPatterns.length) {\n          endPatterns.push(subpattern);\n        } else {\n          startPatterns.push(subpattern);\n        }\n      }\n\n      if (variadicPatterns.length) {\n        if (variadicPatterns.length > 1) {\n          throw new Error(\n            `Pattern error: Using \\`...P.array(...)\\` several times in a single pattern is not allowed.`\n          );\n        }\n\n        if (value.length < startPatterns.length + endPatterns.length) {\n          return false;\n        }\n\n        const startValues = value.slice(0, startPatterns.length);\n        const endValues =\n          endPatterns.length === 0 ? [] : value.slice(-endPatterns.length);\n        const middleValues = value.slice(\n          startPatterns.length,\n          endPatterns.length === 0 ? Infinity : -endPatterns.length\n        );\n\n        return (\n          startPatterns.every((subPattern, i) =>\n            matchPattern(subPattern, startValues[i], select)\n          ) &&\n          endPatterns.every((subPattern, i) =>\n            matchPattern(subPattern, endValues[i], select)\n          ) &&\n          (variadicPatterns.length === 0\n            ? true\n            : matchPattern(variadicPatterns[0], middleValues, select))\n        );\n      }\n\n      return pattern.length === value.length\n        ? pattern.every((subPattern, i) =>\n            matchPattern(subPattern, value[i], select)\n          )\n        : false;\n    }\n\n    return Reflect.ownKeys(pattern).every((k): boolean => {\n      const subPattern = pattern[k];\n\n      return (\n        (k in value || isOptionalPattern(subPattern)) &&\n        matchPattern(subPattern, value[k], select)\n      );\n    });\n  }\n\n  return Object.is(value, pattern);\n};\n\n// @internal\nexport const getSelectionKeys = (pattern: any): string[] => {\n  if (isObject(pattern)) {\n    if (isMatcher(pattern)) {\n      return pattern[symbols.matcher]().getSelectionKeys?.() ?? [];\n    }\n    if (Array.isArray(pattern)) return flatMap(pattern, getSelectionKeys);\n    return flatMap(Object.values(pattern), getSelectionKeys);\n  }\n  return [];\n};\n\n// @internal\nexport const flatMap = <a, b>(\n  xs: readonly a[],\n  f: (v: a) => readonly b[]\n): b[] => xs.reduce<b[]>((acc, x) => acc.concat(f(x)), []);\n","/**\n * The `P` module contains patterns for primitive types, wildcards and\n * other pattern-matching utilities.\n *\n * @module\n */\n\nimport { matchPattern, getSelectionKeys, flatMap } from './internals/helpers';\nimport * as symbols from './internals/symbols';\nimport { matcher } from './internals/symbols';\nimport { isMatching } from './is-matching';\nimport { ExtractPreciseValue } from './types/ExtractPreciseValue';\nimport { Fn } from './types/helpers';\nimport { InvertPattern } from './types/InvertPattern';\nimport {\n  Pattern,\n  UnknownPattern,\n  OptionalP,\n  ArrayP,\n  MapP,\n  SetP,\n  AndP,\n  OrP,\n  NotP,\n  GuardP,\n  SelectP,\n  AnonymousSelectP,\n  GuardExcludeP,\n  CustomP,\n  Matcher,\n  StringPattern,\n  AnyPattern,\n  NumberPattern,\n  BooleanPattern,\n  BigIntPattern,\n  NullishPattern,\n  SymbolPattern,\n  Chainable,\n  BigIntChainable,\n  NumberChainable,\n  StringChainable,\n  ArrayChainable,\n  Variadic,\n  NonNullablePattern,\n} from './types/Pattern';\n\nexport type {\n  /**\n   * `Pattern<T>` is the type of all patterns\n   * that can match a value of type `T`.\n   */\n  Pattern,\n\n  /**\n   * `unstable_Fn` can be used to created a\n   * a Matchable instance  a custom type that\n   * can be used as a pattern.\n   *\n   * @experimental This feature is unstable.\n   */\n  Fn as unstable_Fn,\n};\n\nexport { matcher };\n\n/**\n * A `Matchable` is an object implementing\n * the Matcher Protocol. It must have a `[P.matcher]: P.Matcher<NarrowFn>`\n * key, which defines how this object should be matched by TS-Pattern.\n *\n * @experimental This feature is unstable.\n *\n * @example\n * ```ts\n * class Some<T> implements P.unstable_Matchable {\n *  [P.matcher](): P.unstable_Matcher<Some<T>>\n * }\n * ```\n */\nexport type unstable_Matchable<\n  narrowedOrFn,\n  input = unknown,\n  pattern = never\n> = CustomP<input, pattern, narrowedOrFn>;\n\n/**\n * A `Matcher` is an object with `match` function, which\n * defines how this object should be matched by TS-Pattern.\n *\n * @experimental This feature is unstable.\n *\n * @example\n * ```ts\n * class Some<T> implements P.unstable_Matchable {\n *  [P.matcher](): P.unstable_Matcher<Some<T>>\n * }\n * ```\n */\nexport type unstable_Matcher<\n  narrowedOrFn,\n  input = unknown,\n  pattern = never\n> = ReturnType<CustomP<input, pattern, narrowedOrFn>[matcher]>;\n\n/**\n * `P.infer<typeof somePattern>` will return the type of the value\n * matched by this pattern.\n *\n * [Read the documentation for `P.infer` on GitHub](https://github.com/gvergnaud/ts-pattern#pinfer)\n *\n * @example\n * const userPattern = { name: P.string}\n * type User = P.infer<typeof userPattern>\n */\nexport type infer<pattern> = InvertPattern<NoInfer<pattern>, unknown>;\n\n/**\n * `P.narrow<Input, Pattern>` will narrow the input type to only keep\n * the set of values that are compatible with the provided pattern type.\n *\n * [Read the documentation for `P.narrow` on GitHub](https://github.com/gvergnaud/ts-pattern#pnarrow)\n *\n * @example\n * type Input = ['a' | 'b' | 'c', 'a' | 'b' | 'c']\n * const Pattern = ['a', P.union('a', 'b')] as const\n *\n * type Narrowed = P.narrow<Input, typeof Pattern>\n * //     ^? ['a', 'a' | 'b']\n */\nexport type narrow<input, pattern extends Pattern<any>> = ExtractPreciseValue<\n  input,\n  InvertPattern<pattern, input>\n>;\n\nfunction chainable<pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): Chainable<pattern> {\n  return Object.assign(pattern, {\n    optional: () => optional(pattern),\n    and: (p2: any) => intersection(pattern, p2),\n    or: (p2: any) => union(pattern, p2),\n    select: (key: any) =>\n      key === undefined ? select(pattern) : select(key, pattern),\n  }) as Chainable<pattern>;\n}\n\nconst variadic = <pattern extends {}>(pattern: pattern): Variadic<pattern> =>\n  Object.assign(pattern, {\n    [Symbol.iterator](): Iterator<pattern, void, undefined> {\n      let i = 0;\n      const variadicPattern = Object.assign(pattern, {\n        [symbols.isVariadic]: true,\n      });\n      const values: IteratorResult<pattern, void>[] = [\n        { value: variadicPattern, done: false },\n        { done: true, value: undefined },\n      ];\n      return {\n        next: () => values[i++] ?? values.at(-1)!,\n      };\n    },\n  });\n\nfunction arrayChainable<pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): ArrayChainable<pattern> {\n  return Object.assign(variadic(pattern), {\n    optional: () => arrayChainable(optional(pattern)),\n    select: (key: any) =>\n      arrayChainable(\n        key === undefined ? select(pattern) : select(key, pattern)\n      ),\n  }) as any;\n}\n\n/**\n * `P.optional(subpattern)` takes a sub pattern and returns a pattern which matches if the\n * key is undefined or if it is defined and the sub pattern matches its value.\n *\n * [Read the documentation for `P.optional` on GitHub](https://github.com/gvergnaud/ts-pattern#poptional-patterns)\n *\n * @example\n *  match(value)\n *   .with({ greeting: P.optional('Hello') }, () => 'will match { greeting?: \"Hello\"}')\n */\nexport function optional<\n  input,\n  const pattern extends unknown extends input ? UnknownPattern : Pattern<input>\n>(pattern: pattern): Chainable<OptionalP<input, pattern>, 'optional'> {\n  return chainable({\n    [matcher]() {\n      return {\n        match: <UnknownInput>(value: UnknownInput | input) => {\n          let selections: Record<string, unknown[]> = {};\n          const selector = (key: string, value: any) => {\n            selections[key] = value;\n          };\n          if (value === undefined) {\n            getSelectionKeys(pattern).forEach((key) =>\n              selector(key, undefined)\n            );\n            return { matched: true, selections };\n          }\n          const matched = matchPattern(pattern, value, selector);\n          return { matched, selections };\n        },\n        getSelectionKeys: () => getSelectionKeys(pattern),\n        matcherType: 'optional',\n      };\n    },\n  });\n}\n\ntype UnwrapArray<xs> = xs extends readonly (infer x)[] ? x : never;\n\ntype UnwrapSet<xs> = xs extends Set<infer x> ? x : never;\n\ntype UnwrapMapKey<xs> = xs extends Map<infer k, any> ? k : never;\n\ntype UnwrapMapValue<xs> = xs extends Map<any, infer v> ? v : never;\n\ntype WithDefault<a, b> = [a] extends [never] ? b : a;\n\n/**\n * `P.array(subpattern)` takes a sub pattern and returns a pattern, which matches\n * arrays if all their elements match the sub pattern.\n *\n * [Read the documentation for `P.array` on GitHub](https://github.com/gvergnaud/ts-pattern#parray-patterns)\n *\n * @example\n *  match(value)\n *   .with({ users: P.array({ name: P.string }) }, () => 'will match { name: string}[]')\n */\nexport function array<input>(): ArrayChainable<ArrayP<input, unknown>>;\nexport function array<\n  input,\n  const pattern extends Pattern<WithDefault<UnwrapArray<input>, unknown>>\n>(pattern: pattern): ArrayChainable<ArrayP<input, pattern>>;\nexport function array(\n  ...args: [pattern?: any]\n): ArrayChainable<ArrayP<any, any>> {\n  return arrayChainable({\n    [matcher]() {\n      return {\n        match: (value: any) => {\n          if (!Array.isArray(value)) return { matched: false };\n\n          if (args.length === 0) return { matched: true };\n\n          const pattern = args[0];\n          let selections: Record<string, unknown[]> = {};\n\n          if (value.length === 0) {\n            getSelectionKeys(pattern).forEach((key) => {\n              selections[key] = [];\n            });\n            return { matched: true, selections };\n          }\n\n          const selector = (key: string, value: unknown) => {\n            selections[key] = (selections[key] || []).concat([value]);\n          };\n\n          const matched = value.every((v) =>\n            matchPattern(pattern, v, selector)\n          );\n\n          return { matched, selections };\n        },\n        getSelectionKeys: () =>\n          args.length === 0 ? [] : getSelectionKeys(args[0]),\n      };\n    },\n  });\n}\n\n/**\n * `P.set(subpattern)` takes a sub pattern and returns a pattern that matches\n * sets if all their elements match the sub pattern.\n *\n * [Read `P.set` documentation on GitHub](https://github.com/gvergnaud/ts-pattern#pset-patterns)\n *\n * @example\n *  match(value)\n *   .with({ users: P.set(P.string) }, () => 'will match Set<string>')\n */\nexport function set<input>(): Chainable<SetP<input, unknown>>;\nexport function set<\n  input,\n  const pattern extends Pattern<WithDefault<UnwrapSet<input>, unknown>>\n>(pattern: pattern): Chainable<SetP<input, pattern>>;\nexport function set<\n  input,\n  const pattern extends Pattern<WithDefault<UnwrapSet<input>, unknown>>\n>(...args: [pattern?: pattern]): Chainable<SetP<input, pattern>> {\n  return chainable({\n    [matcher]() {\n      return {\n        match: <UnknownInput>(value: UnknownInput | input) => {\n          if (!(value instanceof Set)) return { matched: false };\n\n          let selections: Record<string, unknown[]> = {};\n\n          if (value.size === 0) {\n            return { matched: true, selections };\n          }\n\n          if (args.length === 0) return { matched: true };\n\n          const selector = (key: string, value: unknown) => {\n            selections[key] = (selections[key] || []).concat([value]);\n          };\n\n          const pattern = args[0];\n\n          const matched = setEvery(value, (v) =>\n            matchPattern(pattern, v, selector)\n          );\n\n          return { matched, selections };\n        },\n        getSelectionKeys: () =>\n          args.length === 0 ? [] : getSelectionKeys(args[0]),\n      };\n    },\n  });\n}\n\nconst setEvery = <T>(set: Set<T>, predicate: (value: T) => boolean) => {\n  for (const value of set) {\n    if (predicate(value)) continue;\n    return false;\n  }\n  return true;\n};\n\n/**\n * `P.map(keyPattern, valuePattern)` takes a subpattern to match against the\n * key, a subpattern to match against the value and returns a pattern that\n * matches on maps where all elements inside the map match those two\n * subpatterns.\n *\n * [Read `P.map` documentation on GitHub](https://github.com/gvergnaud/ts-pattern#pmap-patterns)\n *\n * @example\n *  match(value)\n *   .with({ users: P.map(P.map(P.string, P.number)) }, (map) => `map's type is Map<string, number>`)\n */\nexport function map<input>(): Chainable<MapP<input, unknown, unknown>>;\nexport function map<\n  input,\n  const pkey extends Pattern<WithDefault<UnwrapMapKey<input>, unknown>>,\n  const pvalue extends Pattern<WithDefault<UnwrapMapValue<input>, unknown>>\n>(patternKey: pkey, patternValue: pvalue): Chainable<MapP<input, pkey, pvalue>>;\nexport function map<\n  input,\n  const pkey extends Pattern<WithDefault<UnwrapMapKey<input>, unknown>>,\n  const pvalue extends Pattern<WithDefault<UnwrapMapValue<input>, unknown>>\n>(\n  ...args: [patternKey?: pkey, patternValue?: pvalue]\n): Chainable<MapP<input, pkey, pvalue>> {\n  return chainable({\n    [matcher]() {\n      return {\n        match: <UnknownInput>(value: UnknownInput | input) => {\n          if (!(value instanceof Map)) return { matched: false };\n\n          let selections: Record<string, unknown[]> = {};\n\n          if (value.size === 0) {\n            return { matched: true, selections };\n          }\n\n          const selector = (key: string, value: unknown) => {\n            selections[key] = (selections[key] || []).concat([value]);\n          };\n\n          if (args.length === 0) return { matched: true };\n          if (args.length === 1) {\n            throw new Error(\n              `\\`P.map\\` wasn\\'t given enough arguments. Expected (key, value), received ${args[0]?.toString()}`\n            );\n          }\n          const [patternKey, patternValue] = args;\n\n          const matched = mapEvery(value, (v, k) => {\n            const keyMatch = matchPattern(patternKey, k, selector);\n            const valueMatch = matchPattern(patternValue, v, selector);\n            return keyMatch && valueMatch;\n          });\n\n          return { matched, selections };\n        },\n        getSelectionKeys: () =>\n          args.length === 0\n            ? []\n            : [...getSelectionKeys(args[0]), ...getSelectionKeys(args[1])],\n      };\n    },\n  });\n}\n\nconst mapEvery = <K, T>(\n  map: Map<K, T>,\n  predicate: (value: T, key: K) => boolean\n) => {\n  for (const [key, value] of map.entries()) {\n    if (predicate(value, key)) continue;\n    return false;\n  }\n  return true;\n};\n\n/**\n * `P.intersection(...patterns)` returns a pattern which matches\n * only if **every** patterns provided in parameter match the input.\n *\n * [Read the documentation for `P.intersection` on GitHub](https://github.com/gvergnaud/ts-pattern#pintersection-patterns)\n *\n * @example\n *  match(value)\n *   .with(\n *     {\n *       user: P.intersection(\n *         { firstname: P.string },\n *         { lastname: P.string },\n *         { age: P.when(age => age > 21) }\n *       )\n *     },\n *     ({ user }) => 'will match { firstname: string, lastname: string, age: number } if age > 21'\n *   )\n */\nexport function intersection<\n  input,\n  const patterns extends readonly [Pattern<input>, ...Pattern<input>[]]\n>(...patterns: patterns): Chainable<AndP<input, patterns>> {\n  return chainable({\n    [matcher]: () => ({\n      match: (value) => {\n        let selections: Record<string, unknown[]> = {};\n        const selector = (key: string, value: any) => {\n          selections[key] = value;\n        };\n        const matched = (patterns as readonly UnknownPattern[]).every((p) =>\n          matchPattern(p, value, selector)\n        );\n        return { matched, selections };\n      },\n      getSelectionKeys: () =>\n        flatMap(patterns as readonly UnknownPattern[], getSelectionKeys),\n      matcherType: 'and',\n    }),\n  });\n}\n\n/**\n * `P.union(...patterns)` returns a pattern which matches\n * if **at least one** of the patterns provided in parameter match the input.\n *\n * [Read the documentation for `P.union` on GitHub](https://github.com/gvergnaud/ts-pattern#punion-patterns)\n *\n * @example\n *  match(value)\n *   .with(\n *     { type: P.union('a', 'b', 'c') },\n *     ({ type }) => 'will match { type: \"a\" | \"b\" | \"c\" }'\n *   )\n */\nexport function union<\n  input,\n  const patterns extends readonly [Pattern<input>, ...Pattern<input>[]]\n>(...patterns: patterns): Chainable<OrP<input, patterns>> {\n  return chainable({\n    [matcher]: () => ({\n      match: <UnknownInput>(value: UnknownInput | input) => {\n        let selections: Record<string, unknown[]> = {};\n        const selector = (key: string, value: any) => {\n          selections[key] = value;\n        };\n        flatMap(\n          patterns as readonly UnknownPattern[],\n          getSelectionKeys\n        ).forEach((key) => selector(key, undefined));\n        const matched = (patterns as readonly UnknownPattern[]).some((p) =>\n          matchPattern(p, value, selector)\n        );\n        return { matched, selections };\n      },\n      getSelectionKeys: () =>\n        flatMap(patterns as readonly UnknownPattern[], getSelectionKeys),\n      matcherType: 'or',\n    }),\n  });\n}\n\n/**\n * `P.not(pattern)` returns a pattern which matches if the sub pattern\n * doesn't match.\n *\n * [Read the documentation for `P.not` on GitHub](https://github.com/gvergnaud/ts-pattern#pnot-patterns)\n *\n * @example\n *  match<{ a: string | number }>(value)\n *   .with({ a: P.not(P.string) }, (x) => 'will match { a: number }'\n *   )\n */\n\nexport function not<\n  input,\n  const pattern extends Pattern<input> | UnknownPattern\n>(pattern: pattern): Chainable<NotP<input, pattern>> {\n  return chainable({\n    [matcher]: () => ({\n      match: <UnknownInput>(value: UnknownInput | input) => ({\n        matched: !matchPattern(pattern, value, () => {}),\n      }),\n      getSelectionKeys: () => [],\n      matcherType: 'not',\n    }),\n  });\n}\n\n/**\n * `P.when((value) => boolean)` returns a pattern which matches\n * if the predicate returns true for the current input.\n *\n * [Read the documentation for `P.when` on GitHub](https://github.com/gvergnaud/ts-pattern#pwhen-patterns)\n *\n * @example\n *  match<{ age: number }>(value)\n *   .with({ age: P.when(age => age > 21) }, (x) => 'will match if value.age > 21'\n *   )\n */\nexport function when<input, predicate extends (value: input) => unknown>(\n  predicate: predicate\n): GuardP<\n  input,\n  predicate extends (value: any) => value is infer narrowed ? narrowed : never\n>;\nexport function when<input, narrowed extends input, excluded>(\n  predicate: (input: input) => input is narrowed\n): GuardExcludeP<input, narrowed, excluded>;\nexport function when<input, predicate extends (value: input) => unknown>(\n  predicate: predicate\n): GuardP<\n  input,\n  predicate extends (value: any) => value is infer narrowed ? narrowed : never\n> {\n  return {\n    [matcher]: () => ({\n      match: <UnknownInput>(value: UnknownInput | input) => ({\n        matched: Boolean(predicate(value as input)),\n      }),\n    }),\n  };\n}\n\n/**\n * `P.select()` is a pattern which will always match,\n * and will inject the selected piece of input in the handler function.\n *\n * [Read the documentation for `P.select` on GitHub](https://github.com/gvergnaud/ts-pattern#pselect-patterns)\n *\n * @example\n *  match<{ age: number }>(value)\n *   .with({ age: P.select() }, (age) => 'age: number'\n *   )\n */\nexport function select(): Chainable<AnonymousSelectP, 'select' | 'or' | 'and'>;\nexport function select<\n  input,\n  const patternOrKey extends\n    | string\n    | (unknown extends input ? UnknownPattern : Pattern<input>)\n>(\n  patternOrKey: patternOrKey\n): patternOrKey extends string\n  ? Chainable<SelectP<patternOrKey, 'select' | 'or' | 'and'>>\n  : Chainable<\n      SelectP<symbols.anonymousSelectKey, input, patternOrKey>,\n      'select' | 'or' | 'and'\n    >;\nexport function select<\n  input,\n  const pattern extends unknown extends input ? UnknownPattern : Pattern<input>,\n  const k extends string\n>(\n  key: k,\n  pattern: pattern\n): Chainable<SelectP<k, input, pattern>, 'select' | 'or' | 'and'>;\nexport function select(\n  ...args: [keyOrPattern?: unknown | string, pattern?: unknown]\n): Chainable<SelectP<string>, 'select' | 'or' | 'and'> {\n  const key: string | undefined =\n    typeof args[0] === 'string' ? args[0] : undefined;\n  const pattern: unknown =\n    args.length === 2\n      ? args[1]\n      : typeof args[0] === 'string'\n      ? undefined\n      : args[0];\n  return chainable({\n    [matcher]() {\n      return {\n        match: (value) => {\n          let selections: Record<string, unknown> = {\n            [key ?? symbols.anonymousSelectKey]: value,\n          };\n          const selector = (key: string, value: any) => {\n            selections[key] = value;\n          };\n          return {\n            matched:\n              pattern === undefined\n                ? true\n                : matchPattern(pattern, value, selector),\n            selections: selections,\n          };\n        },\n        getSelectionKeys: () =>\n          [key ?? symbols.anonymousSelectKey].concat(\n            pattern === undefined ? [] : getSelectionKeys(pattern)\n          ),\n      };\n    },\n  });\n}\n\nfunction isUnknown(x: unknown): x is unknown {\n  return true;\n}\n\nfunction isNumber<T>(x: T | number): x is number {\n  return typeof x === 'number';\n}\n\nfunction isString<T>(x: T | string): x is string {\n  return typeof x === 'string';\n}\n\nfunction isBoolean<T>(x: T | boolean): x is boolean {\n  return typeof x === 'boolean';\n}\n\nfunction isBigInt<T>(x: T | bigint): x is bigint {\n  return typeof x === 'bigint';\n}\n\nfunction isSymbol<T>(x: T | symbol): x is symbol {\n  return typeof x === 'symbol';\n}\n\nfunction isNullish<T>(x: T | null | undefined): x is null | undefined {\n  return x === null || x === undefined;\n}\n\nfunction isNonNullable(x: unknown): x is {} {\n  return x !== null && x !== undefined;\n}\n\ntype AnyConstructor = abstract new (...args: any[]) => any;\n\nfunction isInstanceOf<T extends AnyConstructor>(classConstructor: T) {\n  return (val: unknown): val is InstanceType<T> =>\n    val instanceof classConstructor;\n}\n\n/**\n * `P.any` is a wildcard pattern, matching **any value**.\n *\n * [Read the documentation for `P.any` on GitHub](https://github.com/gvergnaud/ts-pattern#p_-wildcard)\n *\n * @example\n *  match(value)\n *   .with(P.any, () => 'will always match')\n */\nexport const any: AnyPattern = chainable(when(isUnknown));\n\n/**\n * `P._` is a wildcard pattern, matching **any value**.\n * It's an alias to `P.any`.\n *\n * [Read the documentation for `P._` on GitHub](https://github.com/gvergnaud/ts-pattern#p_-wildcard)\n *\n * @example\n *  match(value)\n *   .with(P._, () => 'will always match')\n */\nexport const _ = any;\n\n/**\n * `P.string.startsWith(start)` is a pattern, matching **strings** starting with `start`.\n *\n * [Read the documentation for `P.string.startsWith` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringstartsWith)\n *\n * @example\n *  match(value)\n *   .with(P.string.startsWith('A'), () => 'value starts with an A')\n */\n\nconst startsWith = <input, const start extends string>(\n  start: start\n): GuardP<input, `${start}${string}`> =>\n  when((value) => isString(value) && value.startsWith(start));\n\n/**\n * `P.string.endsWith(end)` is a pattern, matching **strings** ending with `end`.\n *\n * [Read the documentation for `P.string.endsWith` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringendsWith)\n *\n * @example\n *  match(value)\n *   .with(P.string.endsWith('!'), () => 'value ends with an !')\n */\nconst endsWith = <input, const end extends string>(\n  end: end\n): GuardP<input, `${string}${end}`> =>\n  when((value) => isString(value) && value.endsWith(end));\n\n/**\n * `P.string.minLength(min)` is a pattern, matching **strings** with at least `min` characters.\n *\n * [Read the documentation for `P.string.minLength` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringminLength)\n *\n * @example\n *  match(value)\n *   .with(P.string.minLength(10), () => 'string with more length >= 10')\n */\nconst minLength = <const min extends number>(min: min) =>\n  when((value) => isString(value) && value.length >= min);\n\n/**\n * `P.string.length(len)` is a pattern, matching **strings** with exactly `len` characters.\n *\n * [Read the documentation for `P.string.length` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringlength)\n *\n * @example\n *  match(value)\n *   .with(P.string.length(10), () => 'strings with length === 10')\n */\nconst length = <const len extends number>(len: len) =>\n  when((value) => isString(value) && value.length === len);\n\n/**\n * `P.string.maxLength(max)` is a pattern, matching **strings** with at most `max` characters.\n *\n * [Read the documentation for `P.string.maxLength` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringmaxLength)\n *\n * @example\n *  match(value)\n *   .with(P.string.maxLength(10), () => 'string with more length <= 10')\n */\nconst maxLength = <const max extends number>(max: max) =>\n  when((value) => isString(value) && value.length <= max);\n\n/**\n * `P.string.includes(substr)` is a pattern, matching **strings** containing `substr`.\n *\n * [Read the documentation for `P.string.includes` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringincludes)\n *\n * @example\n *  match(value)\n *   .with(P.string.includes('http'), () => 'value contains http')\n */\nconst includes = <input, const substr extends string>(\n  substr: substr\n): GuardExcludeP<input, string, never> =>\n  when((value) => isString(value) && value.includes(substr));\n\n/**\n * `P.string.regex(expr)` is a pattern, matching **strings** that `expr` regular expression.\n *\n * [Read the documentation for `P.string.regex` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringregex)\n *\n * @example\n *  match(value)\n *   .with(P.string.regex(/^https?:\\/\\//), () => 'url')\n */\nconst regex = <input, const expr extends string | RegExp>(\n  expr: expr\n): GuardExcludeP<input, string, never> =>\n  when((value) => isString(value) && Boolean(value.match(expr)));\n\nconst stringChainable = <pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): StringChainable<pattern> =>\n  Object.assign(chainable(pattern), {\n    startsWith: (str: string) =>\n      stringChainable(intersection(pattern, startsWith(str))),\n    endsWith: (str: string) =>\n      stringChainable(intersection(pattern, endsWith(str))),\n    minLength: (min: number) =>\n      stringChainable(intersection(pattern, minLength(min))),\n    length: (len: number) =>\n      stringChainable(intersection(pattern, length(len))),\n    maxLength: (max: number) =>\n      stringChainable(intersection(pattern, maxLength(max))),\n    includes: (str: string) =>\n      stringChainable(intersection(pattern, includes(str))),\n    regex: (str: string) => stringChainable(intersection(pattern, regex(str))),\n  }) as any;\n\n/**\n * `P.string` is a wildcard pattern, matching any **string**.\n *\n * [Read the documentation for `P.string` on GitHub](https://github.com/gvergnaud/ts-pattern#pstring-wildcard)\n *\n * @example\n *  match(value)\n *   .with(P.string, () => 'will match on strings')\n */\nexport const string: StringPattern = stringChainable(when(isString));\n\n/**\n * `P.number.between(min, max)` matches **numbers** between `min` and `max`,\n * equal to min or equal to max.\n *\n * [Read the documentation for `P.number.between` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberbetween)\n *\n * @example\n *  match(value)\n *   .with(P.number.between(0, 10), () => '0 <= numbers <= 10')\n */\nconst between = <input, const min extends number, const max extends number>(\n  min: min,\n  max: max\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && min <= value && max >= value);\n\n/**\n * `P.number.lt(max)` matches **numbers** smaller than `max`.\n *\n * [Read the documentation for `P.number.lt` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberlt)\n *\n * @example\n *  match(value)\n *   .with(P.number.lt(10), () => 'numbers < 10')\n */\nconst lt = <input, const max extends number>(\n  max: max\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value < max);\n\n/**\n * `P.number.gt(min)` matches **numbers** greater than `min`.\n *\n * [Read the documentation for `P.number.gt` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumbergt)\n *\n * @example\n *  match(value)\n *   .with(P.number.gt(10), () => 'numbers > 10')\n */\nconst gt = <input, const min extends number>(\n  min: min\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value > min);\n\n/**\n * `P.number.lte(max)` matches **numbers** smaller than or equal to `max`.\n *\n * [Read the documentation for `P.number.lte` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberlte)\n *\n * @example\n *  match(value)\n *   .with(P.number.lte(10), () => 'numbers <= 10')\n */\nconst lte = <input, const max extends number>(\n  max: max\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value <= max);\n\n/**\n * `P.number.gte(min)` matches **numbers** greater than or equal to `min`.\n *\n * [Read the documentation for `P.number.gte` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumbergte)\n *\n * @example\n *  match(value)\n *   .with(P.number.gte(10), () => 'numbers >= 10')\n */\nconst gte = <input, const min extends number>(\n  min: min\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value >= min);\n\n/**\n * `P.number.int()` matches **integer** numbers.\n *\n * [Read the documentation for `P.number.int()` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberint)\n *\n * @example\n *  match(value)\n *   .with(P.number.int(), () => 'an integer')\n */\nconst int = <input>(): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && Number.isInteger(value));\n\n/**\n * `P.number.finite` matches **finite numbers**.\n *\n * [Read the documentation for `P.number.finite` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberfinite)\n *\n * @example\n *  match(value)\n *   .with(P.number.finite, () => 'not Infinity')\n */\nconst finite = <input>(): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && Number.isFinite(value));\n\n/**\n * `P.number.positive()` matches **positive** numbers.\n *\n * [Read the documentation for `P.number.positive()` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberpositive)\n *\n * @example\n *  match(value)\n *   .with(P.number.positive(), () => 'number > 0')\n */\nconst positive = <input>(): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value > 0);\n\n/**\n * `P.number.negative()` matches **negative** numbers.\n *\n * [Read the documentation for `P.number.negative()` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumbernegative)\n *\n * @example\n *  match(value)\n *   .with(P.number.negative(), () => 'number < 0')\n */\nconst negative = <input>(): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value < 0);\n\nconst numberChainable = <pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): NumberChainable<pattern> =>\n  Object.assign(chainable(pattern), {\n    between: (min: number, max: number) =>\n      numberChainable(intersection(pattern, between(min, max))),\n    lt: (max: number) => numberChainable(intersection(pattern, lt(max))),\n    gt: (min: number) => numberChainable(intersection(pattern, gt(min))),\n    lte: (max: number) => numberChainable(intersection(pattern, lte(max))),\n    gte: (min: number) => numberChainable(intersection(pattern, gte(min))),\n    int: () => numberChainable(intersection(pattern, int())),\n    finite: () => numberChainable(intersection(pattern, finite())),\n    positive: () => numberChainable(intersection(pattern, positive())),\n    negative: () => numberChainable(intersection(pattern, negative())),\n  }) as any;\n\n/**\n * `P.number` is a wildcard pattern, matching any **number**.\n *\n * [Read the documentation for `P.number` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumber-wildcard)\n *\n * @example\n *  match(value)\n *   .with(P.number, () => 'will match on numbers')\n */\nexport const number: NumberPattern = numberChainable(when(isNumber));\n\n/**\n * `P.bigint.between(min, max)` matches **bigint** between `min` and `max`,\n * equal to min or equal to max.\n *\n * [Read the documentation for `P.bigint.between` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberbetween)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.between(0, 10), () => '0 <= bigints <= 10')\n */\nconst betweenBigInt = <\n  input,\n  const min extends bigint,\n  const max extends bigint\n>(\n  min: min,\n  max: max\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && min <= value && max >= value);\n\n/**\n * `P.bigint.lt(max)` matches **bigint** smaller than `max`.\n *\n * [Read the documentation for `P.bigint.lt` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberlt)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.lt(10), () => 'bigints < 10')\n */\nconst ltBigInt = <input, const max extends bigint>(\n  max: max\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value < max);\n\n/**\n * `P.bigint.gt(min)` matches **bigint** greater than `min`.\n *\n * [Read the documentation for `P.bigint.gt` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumbergt)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.gt(10), () => 'bigints > 10')\n */\nconst gtBigInt = <input, const min extends bigint>(\n  min: min\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value > min);\n\n/**\n * `P.bigint.lte(max)` matches **bigint** smaller than or equal to `max`.\n *\n * [Read the documentation for `P.bigint.lte` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberlte)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.lte(10), () => 'bigints <= 10')\n */\nconst lteBigInt = <input, const max extends bigint>(\n  max: max\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value <= max);\n\n/**\n * `P.bigint.gte(min)` matches **bigint** greater than or equal to `min`.\n *\n * [Read the documentation for `P.bigint.gte` on GitHub](https://github.com/gvergnaud/ts-pattern#pbigintgte)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.gte(10), () => 'bigints >= 10')\n */\nconst gteBigInt = <input, const min extends bigint>(\n  min: min\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value >= min);\n\n/**\n * `P.bigint.positive()` matches **positive** bigints.\n *\n * [Read the documentation for `P.bigint.positive()` on GitHub](https://github.com/gvergnaud/ts-pattern#pbigintpositive)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.positive(), () => 'bigint > 0')\n */\nconst positiveBigInt = <input>(): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value > 0);\n\n/**\n * `P.bigint.negative()` matches **negative** bigints.\n *\n * [Read the documentation for `P.bigint.negative()` on GitHub](https://github.com/gvergnaud/ts-pattern#pbigintnegative)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.negative(), () => 'bigint < 0')\n */\nconst negativeBigInt = <input>(): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value < 0);\n\nconst bigintChainable = <pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): BigIntChainable<pattern> =>\n  Object.assign(chainable(pattern), {\n    between: (min: bigint, max: bigint) =>\n      bigintChainable(intersection(pattern, betweenBigInt(min, max))),\n    lt: (max: bigint) => bigintChainable(intersection(pattern, ltBigInt(max))),\n    gt: (min: bigint) => bigintChainable(intersection(pattern, gtBigInt(min))),\n    lte: (max: bigint) =>\n      bigintChainable(intersection(pattern, lteBigInt(max))),\n    gte: (min: bigint) =>\n      bigintChainable(intersection(pattern, gteBigInt(min))),\n    positive: () => bigintChainable(intersection(pattern, positiveBigInt())),\n    negative: () => bigintChainable(intersection(pattern, negativeBigInt())),\n  }) as any;\n\n/**\n * `P.bigint` is a wildcard pattern, matching any **bigint**.\n *\n * [Read the documentation for `P.bigint` on GitHub](https://github.com/gvergnaud/ts-pattern#number-wildcard)\n *\n * @example\n *   .with(P.bigint, () => 'will match on bigints')\n */\nexport const bigint: BigIntPattern = bigintChainable(when(isBigInt));\n\n/**\n * `P.boolean` is a wildcard pattern, matching any **boolean**.\n *\n * [Read the documentation for `P.boolean` on GitHub](https://github.com/gvergnaud/ts-pattern#boolean-wildcard)\n *\n * @example\n *   .with(P.boolean, () => 'will match on booleans')\n */\nexport const boolean: BooleanPattern = chainable(when(isBoolean));\n\n/**\n * `P.symbol` is a wildcard pattern, matching any **symbol**.\n *\n * [Read the documentation for `P.symbol` on GitHub](https://github.com/gvergnaud/ts-pattern#symbol-wildcard)\n *\n * @example\n *   .with(P.symbol, () => 'will match on symbols')\n */\nexport const symbol: SymbolPattern = chainable(when(isSymbol));\n\n/**\n * `P.nullish` is a wildcard pattern, matching **null** or **undefined**.\n *\n * [Read the documentation for `P.nullish` on GitHub](https://github.com/gvergnaud/ts-pattern#nullish-wildcard)\n *\n * @example\n *   .with(P.nullish, (x) => `${x} is null or undefined`)\n */\nexport const nullish: NullishPattern = chainable(when(isNullish));\n\n/**\n * `P.nonNullable` is a wildcard pattern, matching everything except **null** or **undefined**.\n *\n * [Read the documentation for `P.nonNullable` on GitHub](https://github.com/gvergnaud/ts-pattern#nonNullable-wildcard)\n *\n * @example\n *   .with(P.nonNullable, (x) => `${x} isn't null nor undefined`)\n */\nexport const nonNullable: NonNullablePattern = chainable(when(isNonNullable));\n\n/**\n * `P.instanceOf(SomeClass)` is a pattern matching instances of a given class.\n *\n * [Read the documentation for `P.instanceOf` on GitHub](https://github.com/gvergnaud/ts-pattern#pinstanceof-patterns)\n *\n *  @example\n *   .with(P.instanceOf(SomeClass), () => 'will match on SomeClass instances')\n */\nexport function instanceOf<T extends AnyConstructor>(\n  classConstructor: T\n): Chainable<GuardP<unknown, InstanceType<T>>> {\n  return chainable(when(isInstanceOf(classConstructor)));\n}\n\n/**\n * `P.shape(somePattern)` lets you call methods like `.optional()`, `.and`, `.or` and `.select()`\n * On structural patterns, like objects and arrays.\n *\n * [Read the documentation for `P.shape` on GitHub](https://github.com/gvergnaud/ts-pattern#pshape-patterns)\n *\n *  @example\n *   .with(\n *     {\n *       state: P.shape({ status: \"success\" }).optional().select()\n *     },\n *     (state) => 'match the success state, or undefined.'\n *   )\n */\nexport function shape<input, const pattern extends Pattern<input>>(\n  pattern: pattern\n): Chainable<GuardP<input, InvertPattern<pattern, input>>>;\nexport function shape(pattern: UnknownPattern) {\n  return chainable(when(isMatching(pattern)));\n}\n","/**\n * Error when the given input value does not match any included pattern\n * and .exhaustive() was specified\n */\nexport class NonExhaustiveError extends Error {\n  constructor(public input: unknown) {\n    let displayedValue;\n    try {\n      displayedValue = JSON.stringify(input);\n    } catch (e) {\n      displayedValue = input;\n    }\n    super(`Pattern matching error: no pattern matches value ${displayedValue}`);\n  }\n}\n","import { Pattern } from './types/Pattern';\nimport { Match } from './types/Match';\nimport * as symbols from './internals/symbols';\nimport { matchPattern } from './internals/helpers';\nimport { NonExhaustiveError } from './errors';\n\ntype MatchState<output> =\n  | { matched: true; value: output }\n  | { matched: false; value: undefined };\n\nconst unmatched: MatchState<never> = {\n  matched: false,\n  value: undefined,\n};\n\n/**\n * `match` creates a **pattern matching expression**.\n *  * Use `.with(pattern, handler)` to pattern match on the input.\n *  * Use `.exhaustive()` or `.otherwise(() => defaultValue)` to end the expression and get the result.\n *\n * [Read the documentation for `match` on GitHub](https://github.com/gvergnaud/ts-pattern#match)\n *\n * @example\n *  declare let input: \"A\" | \"B\";\n *\n *  return match(input)\n *    .with(\"A\", () => \"It's an A!\")\n *    .with(\"B\", () => \"It's a B!\")\n *    .exhaustive();\n *\n */\nexport function match<const input, output = symbols.unset>(\n  value: input\n): Match<input, output> {\n  return new MatchExpression(value, unmatched) as any;\n}\n\n/**\n * This class represents a match expression. It follows the\n * builder pattern, we chain methods to add features to the expression\n * until we call `.exhaustive`, `.otherwise` or the unsafe `.run`\n * method to execute it.\n *\n * The types of this class aren't public, the public type definition\n * can be found in src/types/Match.ts.\n */\nclass MatchExpression<input, output> {\n  constructor(private input: input, private state: MatchState<output>) {}\n\n  with(...args: any[]): MatchExpression<input, output> {\n    if (this.state.matched) return this;\n\n    const handler: (selection: unknown, value: input) => output =\n      args[args.length - 1];\n\n    const patterns: Pattern<input>[] = [args[0]];\n    let predicate: ((value: input) => unknown) | undefined = undefined;\n\n    if (args.length === 3 && typeof args[1] === 'function') {\n      // case with guard as second argument\n      predicate = args[1];\n    } else if (args.length > 2) {\n      // case with several patterns\n      patterns.push(...args.slice(1, args.length - 1));\n    }\n\n    let hasSelections = false;\n    let selected: Record<string, unknown> = {};\n    const select = (key: string, value: unknown) => {\n      hasSelections = true;\n      selected[key] = value;\n    };\n\n    const matched =\n      patterns.some((pattern) => matchPattern(pattern, this.input, select)) &&\n      (predicate ? Boolean(predicate(this.input)) : true);\n\n    const selections = hasSelections\n      ? symbols.anonymousSelectKey in selected\n        ? selected[symbols.anonymousSelectKey]\n        : selected\n      : this.input;\n\n    const state = matched\n      ? {\n          matched: true as const,\n          value: handler(selections, this.input),\n        }\n      : unmatched;\n\n    return new MatchExpression(this.input, state);\n  }\n\n  when(\n    predicate: (value: input) => unknown,\n    handler: (selection: input, value: input) => output\n  ): MatchExpression<input, output> {\n    if (this.state.matched) return this;\n\n    const matched = Boolean(predicate(this.input));\n\n    return new MatchExpression<input, output>(\n      this.input,\n      matched\n        ? { matched: true, value: handler(this.input, this.input) }\n        : unmatched\n    );\n  }\n\n  otherwise(handler: (value: input) => output): output {\n    if (this.state.matched) return this.state.value;\n    return handler(this.input);\n  }\n\n  exhaustive(): output {\n    if (this.state.matched) return this.state.value;\n\n    throw new NonExhaustiveError(this.input);\n  }\n\n  run(): output {\n    return this.exhaustive();\n  }\n\n  returnType() {\n    return this;\n  }\n}\n","import { yellow } from 'kleur/colors'\n\nexport const tags = {\n  warn: yellow('prisma:warn'),\n}\nexport const should = {\n  warn: () => !process.env.PRISMA_DISABLE_WARNINGS,\n}\nexport function log(...data: any[]) {\n  console.log(...data)\n}\nexport function warn(message: any, ...optionalParams: any[]) {\n  if (should.warn()) {\n    console.warn(`${tags.warn} ${message}`, ...optionalParams)\n  }\n}\n","import process from 'node:process';\nimport {isBrowser} from 'environment';\n\nconst ESC = '\\u001B[';\nconst OSC = '\\u001B]';\nconst BEL = '\\u0007';\nconst SEP = ';';\n\nconst isTerminalApp = !isBrowser && process.env.TERM_PROGRAM === 'Apple_Terminal';\nconst isWindows = !isBrowser && process.platform === 'win32';\n\nconst cwdFunction = isBrowser ? () => {\n\tthrow new Error('`process.cwd()` only works in Node.js, not the browser.');\n} : process.cwd;\n\nexport const cursorTo = (x, y) => {\n\tif (typeof x !== 'number') {\n\t\tthrow new TypeError('The `x` argument is required');\n\t}\n\n\tif (typeof y !== 'number') {\n\t\treturn ESC + (x + 1) + 'G';\n\t}\n\n\treturn ESC + (y + 1) + SEP + (x + 1) + 'H';\n};\n\nexport const cursorMove = (x, y) => {\n\tif (typeof x !== 'number') {\n\t\tthrow new TypeError('The `x` argument is required');\n\t}\n\n\tlet returnValue = '';\n\n\tif (x < 0) {\n\t\treturnValue += ESC + (-x) + 'D';\n\t} else if (x > 0) {\n\t\treturnValue += ESC + x + 'C';\n\t}\n\n\tif (y < 0) {\n\t\treturnValue += ESC + (-y) + 'A';\n\t} else if (y > 0) {\n\t\treturnValue += ESC + y + 'B';\n\t}\n\n\treturn returnValue;\n};\n\nexport const cursorUp = (count = 1) => ESC + count + 'A';\nexport const cursorDown = (count = 1) => ESC + count + 'B';\nexport const cursorForward = (count = 1) => ESC + count + 'C';\nexport const cursorBackward = (count = 1) => ESC + count + 'D';\n\nexport const cursorLeft = ESC + 'G';\nexport const cursorSavePosition = isTerminalApp ? '\\u001B7' : ESC + 's';\nexport const cursorRestorePosition = isTerminalApp ? '\\u001B8' : ESC + 'u';\nexport const cursorGetPosition = ESC + '6n';\nexport const cursorNextLine = ESC + 'E';\nexport const cursorPrevLine = ESC + 'F';\nexport const cursorHide = ESC + '?25l';\nexport const cursorShow = ESC + '?25h';\n\nexport const eraseLines = count => {\n\tlet clear = '';\n\n\tfor (let i = 0; i < count; i++) {\n\t\tclear += eraseLine + (i < count - 1 ? cursorUp() : '');\n\t}\n\n\tif (count) {\n\t\tclear += cursorLeft;\n\t}\n\n\treturn clear;\n};\n\nexport const eraseEndLine = ESC + 'K';\nexport const eraseStartLine = ESC + '1K';\nexport const eraseLine = ESC + '2K';\nexport const eraseDown = ESC + 'J';\nexport const eraseUp = ESC + '1J';\nexport const eraseScreen = ESC + '2J';\nexport const scrollUp = ESC + 'S';\nexport const scrollDown = ESC + 'T';\n\nexport const clearScreen = '\\u001Bc';\n\nexport const clearTerminal = isWindows\n\t? `${eraseScreen}${ESC}0f`\n\t// 1. Erases the screen (Only done in case `2` is not supported)\n\t// 2. Erases the whole screen including scrollback buffer\n\t// 3. Moves cursor to the top-left position\n\t// More info: https://www.real-world-systems.com/docs/ANSIcode.html\n\t:\t`${eraseScreen}${ESC}3J${ESC}H`;\n\nexport const enterAlternativeScreen = ESC + '?1049h';\nexport const exitAlternativeScreen = ESC + '?1049l';\n\nexport const beep = BEL;\n\nexport const link = (text, url) => [\n\tOSC,\n\t'8',\n\tSEP,\n\tSEP,\n\turl,\n\tBEL,\n\ttext,\n\tOSC,\n\t'8',\n\tSEP,\n\tSEP,\n\tBEL,\n].join('');\n\nexport const image = (data, options = {}) => {\n\tlet returnValue = `${OSC}1337;File=inline=1`;\n\n\tif (options.width) {\n\t\treturnValue += `;width=${options.width}`;\n\t}\n\n\tif (options.height) {\n\t\treturnValue += `;height=${options.height}`;\n\t}\n\n\tif (options.preserveAspectRatio === false) {\n\t\treturnValue += ';preserveAspectRatio=0';\n\t}\n\n\treturn returnValue + ':' + Buffer.from(data).toString('base64') + BEL;\n};\n\nexport const iTerm = {\n\tsetCwd: (cwd = cwdFunction()) => `${OSC}50;CurrentDir=${cwd}${BEL}`,\n\n\tannotation(message, options = {}) {\n\t\tlet returnValue = `${OSC}1337;`;\n\n\t\tconst hasX = options.x !== undefined;\n\t\tconst hasY = options.y !== undefined;\n\t\tif ((hasX || hasY) && !(hasX && hasY && options.length !== undefined)) {\n\t\t\tthrow new Error('`x`, `y` and `length` must be defined when `x` or `y` is defined');\n\t\t}\n\n\t\tmessage = message.replaceAll('|', '');\n\n\t\treturnValue += options.isHidden ? 'AddHiddenAnnotation=' : 'AddAnnotation=';\n\n\t\tif (options.length > 0) {\n\t\t\treturnValue += (\n\t\t\t\thasX\n\t\t\t\t\t? [message, options.length, options.x, options.y]\n\t\t\t\t\t: [options.length, message]\n\t\t\t).join('|');\n\t\t} else {\n\t\t\treturnValue += message;\n\t\t}\n\n\t\treturn returnValue + BEL;\n\t},\n};\n","/* globals WorkerGlobalScope, DedicatedWorkerGlobalScope, SharedWorkerGlobalScope, ServiceWorkerGlobalScope */\n\nexport const isBrowser = globalThis.window?.document !== undefined;\n\nexport const isNode = globalThis.process?.versions?.node !== undefined;\n\nexport const isBun = globalThis.process?.versions?.bun !== undefined;\n\nexport const isDeno = globalThis.Deno?.version?.deno !== undefined;\n\nexport const isElectron = globalThis.process?.versions?.electron !== undefined;\n\nexport const isJsDom = globalThis.navigator?.userAgent?.includes('jsdom') === true;\n\nexport const isWebWorker = typeof WorkerGlobalScope !== 'undefined' && globalThis instanceof WorkerGlobalScope;\n\nexport const isDedicatedWorker = typeof DedicatedWorkerGlobalScope !== 'undefined' && globalThis instanceof DedicatedWorkerGlobalScope;\n\nexport const isSharedWorker = typeof SharedWorkerGlobalScope !== 'undefined' && globalThis instanceof SharedWorkerGlobalScope;\n\nexport const isServiceWorker = typeof ServiceWorkerGlobalScope !== 'undefined' && globalThis instanceof ServiceWorkerGlobalScope;\n\n// Note: I'm intentionally not DRYing up the other variables to keep them \"lazy\".\nconst platform = globalThis.navigator?.userAgentData?.platform;\n\nexport const isMacOs = platform === 'macOS'\n\t|| globalThis.navigator?.platform === 'MacIntel' // Even on Apple silicon Macs.\n\t|| globalThis.navigator?.userAgent?.includes(' Mac ') === true\n\t|| globalThis.process?.platform === 'darwin';\n\nexport const isWindows = platform === 'Windows'\n\t|| globalThis.navigator?.platform === 'Win32'\n\t|| globalThis.process?.platform === 'win32';\n\nexport const isLinux = platform === 'Linux'\n\t|| globalThis.navigator?.platform?.startsWith('Linux') === true\n\t|| globalThis.navigator?.userAgent?.includes(' Linux ') === true\n\t|| globalThis.process?.platform === 'linux';\n\nexport const isIos = platform === 'iOS'\n\t|| (globalThis.navigator?.platform === 'MacIntel' && globalThis.navigator?.maxTouchPoints > 1)\n\t|| /iPad|iPhone|iPod/.test(globalThis.navigator?.platform);\n\nexport const isAndroid = platform === 'Android'\n\t|| globalThis.navigator?.platform === 'Android'\n\t|| globalThis.navigator?.userAgent?.includes(' Android ') === true\n\t|| globalThis.process?.platform === 'android';\n","import ansiEscapes from 'ansi-escapes';\nimport supportsHyperlinks from 'supports-hyperlinks';\n\nexport default function terminalLink(text, url, {target = 'stdout', ...options} = {}) {\n\tif (!supportsHyperlinks[target]) {\n\t\t// If the fallback has been explicitly disabled, don't modify the text itself.\n\t\tif (options.fallback === false) {\n\t\t\treturn text;\n\t\t}\n\n\t\treturn typeof options.fallback === 'function' ? options.fallback(text, url) : `${text} (\\u200B${url}\\u200B)`;\n\t}\n\n\treturn ansiEscapes.link(text, url);\n}\n\nterminalLink.isSupported = supportsHyperlinks.stdout;\nterminalLink.stderr = (text, url, options = {}) => terminalLink(text, url, {target: 'stderr', ...options});\nterminalLink.stderr.isSupported = supportsHyperlinks.stderr;\n","import { underline } from 'kleur/colors'\nimport terminalLink from 'terminal-link'\n\nexport function link(url): string {\n  return terminalLink(url, url, {\n    fallback: underline,\n  })\n}\n","// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst packageJson = require('../../package.json')\n\nexport const version: string = packageJson.version\n","import type { GeneratorConfig } from '@prisma/generator'\n\nexport enum ClientEngineType {\n  Library = 'library',\n  Binary = 'binary',\n  Client = 'client',\n}\n\nexport function getClientEngineType(generatorConfig?: GeneratorConfig): ClientEngineType {\n  const engineTypeFromEnvVar = getEngineTypeFromEnvVar()\n  if (engineTypeFromEnvVar) return engineTypeFromEnvVar\n  if (generatorConfig?.config.engineType === ClientEngineType.Library) {\n    return ClientEngineType.Library\n  } else if (generatorConfig?.config.engineType === ClientEngineType.Binary) {\n    return ClientEngineType.Binary\n  } else if (generatorConfig?.config.engineType === ClientEngineType.Client) {\n    return ClientEngineType.Client\n  } else {\n    return getDefaultEngineType()\n  }\n}\n\nfunction getEngineTypeFromEnvVar() {\n  const engineType = process.env.PRISMA_CLIENT_ENGINE_TYPE\n  if (engineType === ClientEngineType.Library) {\n    return ClientEngineType.Library\n  } else if (engineType === ClientEngineType.Binary) {\n    return ClientEngineType.Binary\n  } else if (engineType === ClientEngineType.Client) {\n    return ClientEngineType.Client\n  } else {\n    return undefined\n  }\n}\n\nfunction getDefaultEngineType(): ClientEngineType {\n  return ClientEngineType.Library\n}\n","import { Error as ErrorObject } from './types'\n\nexport class DriverAdapterError extends Error {\n  name = 'DriverAdapterError'\n  cause: ErrorObject\n\n  constructor(payload: ErrorObject) {\n    super(typeof payload['message'] === 'string' ? payload['message'] : payload.kind)\n    this.cause = payload\n  }\n}\n\nexport function isDriverAdapterError(error: any): error is DriverAdapterError {\n  return error['name'] === 'DriverAdapterError' && typeof error['cause'] === 'object'\n}\n","import { Error } from './types'\n\nexport type Result<T> = {\n  // common methods\n  map<U>(fn: (value: T) => U): Result<U>\n  flatMap<U>(fn: (value: T) => Result<U>): Result<U>\n} & (\n  | {\n      readonly ok: true\n      readonly value: T\n    }\n  | {\n      readonly ok: false\n      readonly error: Error\n    }\n)\n\nexport function ok<T>(value: T): Result<T> {\n  return {\n    ok: true,\n    value,\n    map(fn) {\n      return ok(fn(value))\n    },\n    flatMap(fn) {\n      return fn(value)\n    },\n  }\n}\n\nexport function err<T>(error: Error): Result<T> {\n  return {\n    ok: false,\n    error,\n    map() {\n      return err(error)\n    },\n    flatMap() {\n      return err(error)\n    },\n  }\n}\n","import { Debug } from './debug'\nimport { isDriverAdapterError } from './error'\nimport { err, ok, Result } from './result'\nimport type {\n  ErrorCapturingSqlDriverAdapter,\n  ErrorCapturingSqlDriverAdapterFactory,\n  ErrorCapturingSqlMigrationAwareDriverAdapterFactory,\n  ErrorCapturingTransaction,\n  ErrorRecord,\n  ErrorRegistry,\n  SqlDriverAdapter,\n  SqlDriverAdapterFactory,\n  SqlMigrationAwareDriverAdapterFactory,\n  Transaction,\n} from './types'\n\nconst debug = Debug('driver-adapter-utils')\n\nclass ErrorRegistryInternal implements ErrorRegistry {\n  private registeredErrors: ErrorRecord[] = []\n\n  consumeError(id: number): ErrorRecord | undefined {\n    return this.registeredErrors[id]\n  }\n\n  registerNewError(error: unknown) {\n    let i = 0\n    while (this.registeredErrors[i] !== undefined) {\n      i++\n    }\n    this.registeredErrors[i] = { error }\n    return i\n  }\n}\n\nexport const bindMigrationAwareSqlAdapterFactory = (\n  adapterFactory: SqlMigrationAwareDriverAdapterFactory,\n): ErrorCapturingSqlMigrationAwareDriverAdapterFactory => {\n  const errorRegistry = new ErrorRegistryInternal()\n\n  const boundFactory: ErrorCapturingSqlMigrationAwareDriverAdapterFactory = {\n    adapterName: adapterFactory.adapterName,\n    provider: adapterFactory.provider,\n    errorRegistry,\n    connect: async (...args) => {\n      const ctx = await wrapAsync(errorRegistry, adapterFactory.connect.bind(adapterFactory))(...args)\n      return ctx.map((ctx) => bindAdapter(ctx, errorRegistry))\n    },\n    connectToShadowDb: async (...args) => {\n      const ctx = await wrapAsync(errorRegistry, adapterFactory.connectToShadowDb.bind(adapterFactory))(...args)\n      return ctx.map((ctx) => bindAdapter(ctx, errorRegistry))\n    },\n  }\n\n  return boundFactory\n}\n\nexport const bindSqlAdapterFactory = (\n  adapterFactory: SqlDriverAdapterFactory,\n): ErrorCapturingSqlDriverAdapterFactory => {\n  const errorRegistry = new ErrorRegistryInternal()\n\n  const boundFactory: ErrorCapturingSqlDriverAdapterFactory = {\n    adapterName: adapterFactory.adapterName,\n    provider: adapterFactory.provider,\n    errorRegistry,\n    connect: async (...args) => {\n      const ctx = await wrapAsync(errorRegistry, adapterFactory.connect.bind(adapterFactory))(...args)\n      return ctx.map((ctx) => bindAdapter(ctx, errorRegistry))\n    },\n  }\n\n  return boundFactory\n}\n\n// *.bind(adapter) is required to preserve the `this` context of functions whose\n// execution is delegated to napi.rs.\nexport const bindAdapter = (\n  adapter: SqlDriverAdapter,\n  errorRegistry = new ErrorRegistryInternal(),\n): ErrorCapturingSqlDriverAdapter => {\n  const boundAdapter: ErrorCapturingSqlDriverAdapter = {\n    adapterName: adapter.adapterName,\n    errorRegistry,\n    queryRaw: wrapAsync(errorRegistry, adapter.queryRaw.bind(adapter)),\n    executeRaw: wrapAsync(errorRegistry, adapter.executeRaw.bind(adapter)),\n    executeScript: wrapAsync(errorRegistry, adapter.executeScript.bind(adapter)),\n    dispose: wrapAsync(errorRegistry, adapter.dispose.bind(adapter)),\n    provider: adapter.provider,\n    startTransaction: async (...args) => {\n      const ctx = await wrapAsync(errorRegistry, adapter.startTransaction.bind(adapter))(...args)\n      return ctx.map((ctx) => bindTransaction(errorRegistry, ctx))\n    },\n  }\n\n  if (adapter.getConnectionInfo) {\n    boundAdapter.getConnectionInfo = wrapSync(errorRegistry, adapter.getConnectionInfo.bind(adapter))\n  }\n\n  return boundAdapter\n}\n\n// *.bind(transaction) is required to preserve the `this` context of functions whose\n// execution is delegated to napi.rs.\nconst bindTransaction = (errorRegistry: ErrorRegistryInternal, transaction: Transaction): ErrorCapturingTransaction => {\n  return {\n    adapterName: transaction.adapterName,\n    provider: transaction.provider,\n    options: transaction.options,\n    queryRaw: wrapAsync(errorRegistry, transaction.queryRaw.bind(transaction)),\n    executeRaw: wrapAsync(errorRegistry, transaction.executeRaw.bind(transaction)),\n    commit: wrapAsync(errorRegistry, transaction.commit.bind(transaction)),\n    rollback: wrapAsync(errorRegistry, transaction.rollback.bind(transaction)),\n  }\n}\n\nfunction wrapAsync<A extends unknown[], R>(\n  registry: ErrorRegistryInternal,\n  fn: (...args: A) => Promise<R>,\n): (...args: A) => Promise<Result<R>> {\n  return async (...args) => {\n    try {\n      return ok(await fn(...args))\n    } catch (error) {\n      debug('[error@wrapAsync]', error)\n\n      // unwrap the cause of exceptions thrown by driver adapters if there is one\n      if (isDriverAdapterError(error)) {\n        return err(error.cause)\n      }\n      const id = registry.registerNewError(error)\n      return err({ kind: 'GenericJs', id })\n    }\n  }\n}\n\nfunction wrapSync<A extends unknown[], R>(\n  registry: ErrorRegistryInternal,\n  fn: (...args: A) => R,\n): (...args: A) => Result<R> {\n  return (...args) => {\n    try {\n      return ok(fn(...args))\n    } catch (error) {\n      debug('[error@wrapSync]', error)\n\n      // unwrap the cause of exceptions thrown by driver adapters if there is one\n      if (isDriverAdapterError(error)) {\n        return err(error.cause)\n      }\n      const id = registry.registerNewError(error)\n      return err({ kind: 'GenericJs', id })\n    }\n  }\n}\n","import { Debug } from '@prisma/debug'\nimport { enginesVersion } from '@prisma/engines-version'\nimport type { BinaryPaths, DownloadOptions } from '@prisma/fetch-engine'\nimport { BinaryType } from '@prisma/fetch-engine'\nimport type { BinaryTarget } from '@prisma/get-platform'\nimport path from 'path'\n\nconst debug = Debug('prisma:engines')\nexport function getEnginesPath() {\n  return path.join(__dirname, '../')\n}\nexport const DEFAULT_CLI_QUERY_ENGINE_BINARY_TYPE = BinaryType.QueryEngineLibrary\n/**\n * Checks if the env override `PRISMA_CLI_QUERY_ENGINE_TYPE` is set to `library` or `binary`\n * Otherwise returns the default\n */\nexport function getCliQueryEngineBinaryType(clientEngineType = process.env.PRISMA_CLI_QUERY_ENGINE_TYPE): BinaryType {\n  if (clientEngineType === 'binary') {\n    return BinaryType.QueryEngineBinary\n  }\n  return DEFAULT_CLI_QUERY_ENGINE_BINARY_TYPE\n}\n\ntype EnsureSomeBinariesExistInput = {\n  clientEngineType: 'library' | 'binary' | 'client'\n  hasMigrateAdapterInConfig: boolean\n  download: (options: DownloadOptions) => Promise<BinaryPaths>\n}\n\nexport async function ensureNeededBinariesExist({\n  clientEngineType,\n  download,\n  hasMigrateAdapterInConfig,\n}: EnsureSomeBinariesExistInput) {\n  const binaryDir = path.join(__dirname, '../')\n\n  const binaries = {} as Record<BinaryType, string>\n\n  if (!hasMigrateAdapterInConfig) {\n    binaries[BinaryType.SchemaEngineBinary] = binaryDir\n  }\n\n  // query engine should only be downloaded if QE is enabled explicitly by specifying the\n  // engineType generator property.\n  const usesQueryCompiler = clientEngineType === 'client'\n\n  if (!usesQueryCompiler) {\n    const cliQueryEngineBinaryType = getCliQueryEngineBinaryType(clientEngineType)\n    binaries[cliQueryEngineBinaryType] = binaryDir\n  }\n\n  debug(`binaries to download ${Object.keys(binaries).join(', ')}`)\n\n  const binaryTargets = process.env.PRISMA_CLI_BINARY_TARGETS\n    ? (process.env.PRISMA_CLI_BINARY_TARGETS.split(',') as BinaryTarget[])\n    : undefined\n\n  await download({\n    binaries: binaries,\n    showProgress: true,\n    version: enginesVersion,\n    failSilent: false,\n    binaryTargets,\n  })\n}\n\nexport { enginesVersion } from '@prisma/engines-version'\n\n/**\n * This annotation is used for `node-file-trace`\n * See https://github.com/zeit/node-file-trace/issues/104\n * It's necessary to run this package standalone or within the sdk in Vercel\n * And needed for https://github.com/vercel/pkg#detecting-assets-in-source-code\n */\n\npath.join(__dirname, '../query-engine-darwin')\npath.join(__dirname, '../query-engine-darwin-arm64')\npath.join(__dirname, '../query-engine-debian-openssl-1.0.x')\npath.join(__dirname, '../query-engine-debian-openssl-1.1.x')\npath.join(__dirname, '../query-engine-debian-openssl-3.0.x')\npath.join(__dirname, '../query-engine-linux-static-x64')\npath.join(__dirname, '../query-engine-linux-static-arm64')\npath.join(__dirname, '../query-engine-rhel-openssl-1.0.x')\npath.join(__dirname, '../query-engine-rhel-openssl-1.1.x')\npath.join(__dirname, '../query-engine-rhel-openssl-3.0.x')\n\n// Node API\npath.join(__dirname, '../libquery_engine-darwin.dylib.node')\npath.join(__dirname, '../libquery_engine-darwin-arm64.dylib.node')\npath.join(__dirname, '../libquery_engine-debian-openssl-1.0.x.so.node')\npath.join(__dirname, '../libquery_engine-debian-openssl-1.1.x.so.node')\npath.join(__dirname, '../libquery_engine-debian-openssl-3.0.x.so.node')\npath.join(__dirname, '../libquery_engine-linux-arm64-openssl-1.0.x.so.node')\npath.join(__dirname, '../libquery_engine-linux-arm64-openssl-1.1.x.so.node')\npath.join(__dirname, '../libquery_engine-linux-arm64-openssl-3.0.x.so.node')\npath.join(__dirname, '../libquery_engine-linux-musl.so.node')\npath.join(__dirname, '../libquery_engine-linux-musl-openssl-3.0.x.so.node')\npath.join(__dirname, '../libquery_engine-rhel-openssl-1.0.x.so.node')\npath.join(__dirname, '../libquery_engine-rhel-openssl-1.1.x.so.node')\npath.join(__dirname, '../libquery_engine-rhel-openssl-3.0.x.so.node')\npath.join(__dirname, '../query_engine-windows.dll.node')\n","import Debug from '@prisma/debug'\nimport fs from 'fs'\n\nconst debug = Debug('chmodPlusX')\n\nexport function chmodPlusX(file: string): void {\n  // Note: skip for windows as chmod does on exist there\n  // and will error with `EACCES: permission denied`\n  if (process.platform === 'win32') return\n\n  const s = fs.statSync(file)\n  const newMode = s.mode | 64 | 8 | 1\n  if (s.mode === newMode) {\n    debug(`Execution permissions of ${file} are fine`)\n    return\n  }\n  const base8 = newMode.toString(8).slice(-3)\n  debug(`Have to call chmodPlusX on ${file}`)\n  fs.chmodSync(file, base8)\n}\n","import { link, type PlatformInfo } from '@prisma/get-platform'\nimport { dim } from 'kleur/colors'\nimport { match } from 'ts-pattern'\n\ntype HandleLibraryLoadingErrorsInput = {\n  e: Error\n  platformInfo: PlatformInfo\n  id: string\n}\n\nexport function handleLibraryLoadingErrors(args: HandleLibraryLoadingErrorsInput): string {\n  const error = args.e as Error & { code?: string }\n\n  const systemLibraryNotFound = (library: string) =>\n    `Prisma cannot find the required \\`${library}\\` system library in your system`\n  const hasLinkingProblem = error.message.includes('cannot open shared object file')\n  const referToSystemRequirementsDocs = `Please refer to the documentation about Prisma's system requirements: ${link(\n    'https://pris.ly/d/system-requirements',\n  )}`\n\n  const errorTitle = `Unable to require(\\`${dim(args.id)}\\`).`\n\n  const potentialReasonMessage = match({ message: error.message, code: error.code })\n    .with({ code: 'ENOENT' }, () => `File does not exist.`)\n    .when(\n      ({ message }) => hasLinkingProblem && message.includes('libz'),\n      () => {\n        return `${systemLibraryNotFound('libz')}. Please install it and try again.`\n      },\n    )\n    .when(\n      ({ message }) => hasLinkingProblem && message.includes('libgcc_s'),\n      () => {\n        return `${systemLibraryNotFound('libgcc_s')}. Please install it and try again.`\n      },\n    )\n    .when(\n      ({ message }) => hasLinkingProblem && message.includes('libssl'),\n      () => {\n        const libsslVersion = args.platformInfo.libssl ? `openssl-${args.platformInfo.libssl}` : 'openssl'\n        return `${systemLibraryNotFound('libssl')}. Please install ${libsslVersion} and try again.`\n      },\n    )\n    .when(\n      ({ message }) => message.includes('GLIBC'),\n      () => {\n        return `Prisma has detected an incompatible version of the \\`glibc\\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${referToSystemRequirementsDocs}`\n      },\n    )\n    .when(\n      ({ message }) => args.platformInfo.platform === 'linux' && message.includes('symbol not found'),\n      () => {\n        return `The Prisma engines are not compatible with your system ${args.platformInfo.originalDistro} on (${args.platformInfo.archFromUname}) which uses the \\`${args.platformInfo.binaryTarget}\\` binaryTarget by default. ${referToSystemRequirementsDocs}`\n      },\n    )\n    .otherwise(() => {\n      return `The Prisma engines do not seem to be compatible with your system. ${referToSystemRequirementsDocs}`\n    })\n\n  /**\n   * Example:\n   *\n   * Error: Unable to require(`/usr/src/app/node_modules/@prisma/engines/libquery_engine-linux-arm64-openssl-1.0.x.so.node`)\n   * Prisma has detected an incompatible version of the \\`glibc\\` C standard library installed in your system. This probably means your system may be too old to run Prisma. Please refer to the documentation about Prisma's system requirements: https://pris.ly/d/system-requirements\n   *\n   * Details: symbol __cxa_thread_atexit_impl, version GLIBC_2.18 not defined in file libc.so.6 with link time reference\n   *      at load (/usr/src/app/node_modules/prisma/build/index.js:93185:11)\n   *      at getEngineVersion (/usr/src/app/node_modules/prisma/build/index.js:93485:16)\n   *      at runMicrotasks (<anonymous>)\n   *      at processTicksAndRejections (internal/process/task_queues.js:95:5)\n   */\n  return `${errorTitle}\n${potentialReasonMessage}\n\nDetails: ${error.message}`\n}\n","import minIndent from 'min-indent';\n\nexport default function stripIndent(string) {\n\tconst indent = minIndent(string);\n\n\tif (indent === 0) {\n\t\treturn string;\n\t}\n\n\tconst regex = new RegExp(`^[ \\\\t]{${indent}}`, 'gm');\n\n\treturn string.replace(regex, '');\n}\n","export const PRISMA_POSTGRES_PROVIDER = 'prisma+postgres'\n\nexport const PRISMA_POSTGRES_PROTOCOL = `${PRISMA_POSTGRES_PROVIDER}:`\n\ndeclare const prismaPostgresBrand: unique symbol\ndeclare const prismaPostgresDevBrand: unique symbol\n\nexport type PrismaPostgresUrl<T extends string | URL> = T & {\n  readonly [prismaPostgresBrand]: true\n}\n\nexport type PrismaPostgresDevUrl<T extends string | URL> = PrismaPostgresUrl<T> & {\n  readonly [prismaPostgresDevBrand]: true\n}\n\nexport function isPrismaPostgres<T extends string | URL>(\n  connectionString?: T,\n): connectionString is PrismaPostgresUrl<T> {\n  return connectionString?.toString().startsWith(`${PRISMA_POSTGRES_PROTOCOL}//`) ?? false\n}\n\nexport function isPrismaPostgresDev<T extends string | URL>(\n  connectionString?: T,\n): connectionString is PrismaPostgresDevUrl<T> {\n  if (!isPrismaPostgres(connectionString)) {\n    return false\n  }\n\n  const { host } = new URL(connectionString)\n\n  return host.includes('localhost') || host.includes('127.0.0.1') || host.includes('[::1]')\n}\n","import type { BinaryTargetsEnvValue, GeneratorConfig } from '@prisma/generator'\nimport indent from 'indent-string'\n\nexport function printGeneratorConfig(config: GeneratorConfig): string {\n  return String(new GeneratorConfigClass(config))\n}\n\nexport class GeneratorConfigClass {\n  constructor(private readonly config: GeneratorConfig) {}\n  toString(): string {\n    const { config } = this\n    // parse & stringify trims out all the undefined values\n\n    const provider = config.provider.fromEnvVar ? `env(\"${config.provider.fromEnvVar}\")` : config.provider.value\n\n    const obj = JSON.parse(\n      JSON.stringify({\n        provider,\n        binaryTargets: getOriginalBinaryTargetsValue(config.binaryTargets),\n      }),\n    )\n\n    return `generator ${config.name} {\n${indent(printDatamodelObject(obj), 2)}\n}`\n  }\n}\n\nexport function getOriginalBinaryTargetsValue(binaryTargets: BinaryTargetsEnvValue[]) {\n  let value: string | string[] | undefined\n  if (binaryTargets.length > 0) {\n    const binaryTargetsFromEnvVar = binaryTargets.find((object) => object.fromEnvVar !== null)\n    if (binaryTargetsFromEnvVar) {\n      value = `env(\"${binaryTargetsFromEnvVar.fromEnvVar}\")`\n    } else {\n      value = binaryTargets.map((object) => (object.native ? 'native' : object.value))\n    }\n  } else {\n    value = undefined\n  }\n\n  return value\n}\n\nexport function printDatamodelObject(obj): string {\n  const maxLength = Object.keys(obj).reduce((max, curr) => Math.max(max, curr.length), 0)\n  return Object.entries(obj)\n    .map(([key, value]) => `${key.padEnd(maxLength)} = ${niceStringify(value)}`)\n    .join('\\n')\n}\n\nfunction niceStringify(value): any {\n  return JSON.parse(\n    JSON.stringify(value, (_, value) => {\n      if (Array.isArray(value)) {\n        return `[${value.map((element) => JSON.stringify(element)).join(', ')}]`\n      }\n      return JSON.stringify(value)\n    }),\n  )\n}\n","import { blue, cyan, red, yellow } from 'kleur/colors'\n\nexport const tags = {\n  error: red('prisma:error'),\n  warn: yellow('prisma:warn'),\n  info: cyan('prisma:info'),\n  query: blue('prisma:query'),\n}\nexport const should = {\n  warn: () => !process.env.PRISMA_DISABLE_WARNINGS,\n}\nexport function log(...data: any[]) {\n  console.log(...data)\n}\nexport function warn(message: any, ...optionalParams: any[]) {\n  if (should.warn()) {\n    console.warn(`${tags.warn} ${message}`, ...optionalParams)\n  }\n}\nexport function info(message: any, ...optionalParams: any[]) {\n  console.info(`${tags.info} ${message}`, ...optionalParams)\n}\nexport function error(message: any, ...optionalParams: any[]) {\n  console.error(`${tags.error} ${message}`, ...optionalParams)\n}\nexport function query(message: any, ...optionalParams: any[]) {\n  console.log(`${tags.query} ${message}`, ...optionalParams)\n}\n","/**\n * Assertion function for internal consistency checks that should never fail\n * in the correct code. It's purpose is pretty much:\n * - ensuring we get more helpful error message if invariant does not hold due to a bug\n * - have a better way of dealing with overly broad type definition than typecasting to `any`\n * or more narrow type.\n *\n * This function should be for assertions only on the values where we control both the input and the output: engine to client, generator to generated client, etc.\n * Don't use this function for assertion for any external input.\n *\n * @param condition\n * @param message\n */\nexport function assertAlways(condition: unknown, message: string): asserts condition {\n  if (!condition) {\n    throw new Error(\n      `${message}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`,\n    )\n  }\n}\n","/**\n * Utility function to ensure exhaustive checks for union types.\n *\n * @example\n *   ```ts\n *   declare const fruit: 'Apple' | 'Orange'\n *\n *   switch (fruit) {\n *     case 'Apple:\n *       // do apple things\n *       break;\n *     case 'Orange:\n *       // do orange things\n *       break;\n *     default:\n *       // in case `fruit` type will expand in the future,\n *       // we'll get a compile-time error here, listing all unhandled\n *       // cases\n *       assertNever(fruit, 'Unknown fruit')\n *   }\n *   ```\n * @param arg variable of the any union type. By the time `assertNever` is called\n * all possible cases of this union must already be handled\n * @param errorMessage error message to throw in runtime. Normally, should never happen\n * unless compile-time check is skipped\n */\nexport function assertNever(arg: never, errorMessage: string): never {\n  throw new Error(errorMessage)\n}\n","export default function ansiRegex({onlyFirst = false} = {}) {\n\t// Valid string terminator sequences are BEL, ESC\\, and 0x9c\n\tconst ST = '(?:\\\\u0007|\\\\u001B\\\\u005C|\\\\u009C)';\n\tconst pattern = [\n\t\t`[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]+)*|[a-zA-Z\\\\d]+(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]*)*)?${ST})`,\n\t\t'(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PR-TZcf-nq-uy=><~]))',\n\t].join('|');\n\n\treturn new RegExp(pattern, onlyFirst ? undefined : 'g');\n}\n","import ansiRegex from 'ansi-regex';\n\nconst regex = ansiRegex();\n\nexport default function stripAnsi(string) {\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError(`Expected a \\`string\\`, got \\`${typeof string}\\``);\n\t}\n\n\t// Even though the regex is global, we don't need to reset the `.lastIndex`\n\t// because unlike `.exec()` and `.test()`, `.replace()` does it automatically\n\t// and doing it manually has a performance penalty.\n\treturn string.replace(regex, '');\n}\n","import path from 'path'\n\n/**\n * Normalize `filePath` to use forward slashes as a separator. `filePath` is\n * treated as a path specific to the current platform, so backslashes will only\n * be replaced with forward slashes on Windows. On other platforms, where a\n * backslash is a valid filename character, it will be treated as such and will\n * not be replaced.\n */\nexport function pathToPosix(filePath: string): string {\n  if (path.sep === path.posix.sep) {\n    return filePath\n  }\n  return filePath.split(path.sep).join(path.posix.sep)\n}\n\n/**\n * Returns the longest common path ancestor of the two paths (which may also be equal to one or both of them).\n * If they don't share a common ancestor (which may be the case on Windows if both paths are on different disks),\n * returns `undefined`.\n */\nexport function longestCommonPathPrefix(pathA: string, pathB: string): string | undefined {\n  if (!path.isAbsolute(pathA) || !path.isAbsolute(pathB)) {\n    throw new Error('longestCommonPathPrefix expects absolute paths')\n  }\n\n  if (process.platform === 'win32' && (pathA.startsWith('\\\\\\\\') || pathB.startsWith('\\\\\\\\'))) {\n    // Make both paths namespaced if at least one of them is.\n    pathA = path.toNamespacedPath(pathA)\n    pathB = path.toNamespacedPath(pathB)\n  }\n\n  const commonPrefix = longestCommonPrefix(pathA.split(path.sep), pathB.split(path.sep)).join(path.sep)\n\n  if (commonPrefix === '') {\n    return process.platform === 'win32' ? undefined : '/'\n  }\n\n  if (process.platform === 'win32' && ['\\\\', '\\\\\\\\?', '\\\\\\\\.'].includes(commonPrefix)) {\n    return undefined\n  }\n\n  if (process.platform === 'win32' && commonPrefix.endsWith(':')) {\n    // Disk specifier without a backslash at the end is not an absolute path on windows,\n    // it refers to current working directory on that disk.\n    return commonPrefix + '\\\\'\n  }\n\n  return commonPrefix\n}\n\nfunction longestCommonPrefix<T>(sequenceA: T[], sequenceB: T[]): T[] {\n  const maxLen = Math.min(sequenceA.length, sequenceB.length)\n  let sliceLen = 0\n\n  while (sliceLen <= maxLen && sequenceA[sliceLen] === sequenceB[sliceLen]) {\n    sliceLen++\n  }\n\n  return sequenceA.slice(0, sliceLen)\n}\n","import Debug from '@prisma/debug'\nimport dotenv from 'dotenv'\nimport fs from 'fs'\nimport { bold, dim, red, underline, yellow } from 'kleur/colors'\nimport path from 'path'\n\nimport { dotenvExpand } from '../dotenvExpand'\n\nconst debug = Debug('prisma:tryLoadEnv')\n\ntype DotenvResult = dotenv.DotenvConfigOutput & {\n  ignoreProcessEnv?: boolean | undefined\n}\n\n// non-exported type from dotenv\ninterface DotenvLoadEnvResult {\n  message: string\n  path: string\n  dotenvResult: DotenvResult\n}\n\n// our type for loaded env data\nexport type LoadedEnv =\n  | {\n      message?: string\n      parsed: {\n        [x: string]: string\n      }\n    }\n  | undefined\n\nexport function tryLoadEnvs(\n  {\n    rootEnvPath,\n    schemaEnvPath,\n  }: {\n    rootEnvPath: string | null | undefined\n    schemaEnvPath: string | null | undefined\n  },\n  opts: { conflictCheck: 'warn' | 'error' | 'none' } = {\n    conflictCheck: 'none',\n  },\n): LoadedEnv {\n  const rootEnvInfo = loadEnv(rootEnvPath)\n  if (opts.conflictCheck !== 'none') {\n    // This will throw an error if there are conflicts\n    checkForConflicts(rootEnvInfo, schemaEnvPath, opts.conflictCheck)\n  }\n  // Only load the schema .env if it is not the same as root\n  let schemaEnvInfo: DotenvLoadEnvResult | null = null\n  if (!pathsEqual(rootEnvInfo?.path, schemaEnvPath)) {\n    schemaEnvInfo = loadEnv(schemaEnvPath)\n  }\n\n  // We didn't find a .env file.\n  if (!rootEnvInfo && !schemaEnvInfo) {\n    debug('No Environment variables loaded')\n  }\n\n  // Print the error if any (if internal dotenv readFileSync throws)\n  if (schemaEnvInfo?.dotenvResult.error) {\n    return console.error(red(bold('Schema Env Error: ')) + schemaEnvInfo.dotenvResult.error) as undefined\n  }\n  const messages = [rootEnvInfo?.message, schemaEnvInfo?.message].filter(Boolean)\n\n  return {\n    message: messages.join('\\n'),\n    parsed: {\n      ...rootEnvInfo?.dotenvResult?.parsed,\n      ...schemaEnvInfo?.dotenvResult?.parsed,\n    },\n  }\n}\n/**\n * Will throw an error if the file at `envPath` has env conflicts with `rootEnv`\n */\nfunction checkForConflicts(\n  rootEnvInfo: DotenvLoadEnvResult | null,\n  envPath: string | null | undefined,\n  type: 'warn' | 'error',\n) {\n  const parsedRootEnv = rootEnvInfo?.dotenvResult.parsed\n  const areNotTheSame = !pathsEqual(rootEnvInfo?.path, envPath)\n  if (parsedRootEnv && envPath && areNotTheSame && fs.existsSync(envPath)) {\n    const envConfig = dotenv.parse(fs.readFileSync(envPath))\n    const conflicts: string[] = []\n    for (const k in envConfig) {\n      if (parsedRootEnv[k] === envConfig[k]) {\n        conflicts.push(k)\n      }\n    }\n    if (conflicts.length > 0) {\n      // const message = `You are trying to load env variables which are already present in your project root .env\n      const relativeRootEnvPath = path.relative(process.cwd(), rootEnvInfo!.path)\n      const relativeEnvPath = path.relative(process.cwd(), envPath)\n      if (type === 'error') {\n        const message = `There is a conflict between env var${conflicts.length > 1 ? 's' : ''} in ${underline(\n          relativeRootEnvPath,\n        )} and ${underline(relativeEnvPath)}\nConflicting env vars:\n${conflicts.map((conflict) => `  ${bold(conflict)}`).join('\\n')}\n\nWe suggest to move the contents of ${underline(relativeEnvPath)} to ${underline(\n          relativeRootEnvPath,\n        )} to consolidate your env vars.\\n`\n        throw new Error(message)\n      } else if (type === 'warn') {\n        const message = `Conflict for env var${conflicts.length > 1 ? 's' : ''} ${conflicts\n          .map((c) => bold(c))\n          .join(', ')} in ${underline(relativeRootEnvPath)} and ${underline(relativeEnvPath)}\nEnv vars from ${underline(relativeEnvPath)} overwrite the ones from ${underline(relativeRootEnvPath)}\n      `\n        console.warn(`${yellow('warn(prisma)')} ${message}`)\n      }\n    }\n  }\n}\n\nexport function loadEnv(envPath: string | null | undefined): DotenvLoadEnvResult | null {\n  if (exists(envPath)) {\n    debug(`Environment variables loaded from ${envPath}`)\n\n    const dotenvOutput = dotenv.config({\n      path: envPath,\n      // Useful to debug dotenv parsing, prints errors & warnings\n      // Set to any value to enable\n      // Example for empty .env file\n      // [dotenv][DEBUG] did not match key and value when parsing line 1:\n      //\n      // Value needs to be null or undefined, false is truthy\n      // https://github.com/motdotla/dotenv/blob/7301ac9be0b2c766f865bbe24280bf82586d25aa/lib/main.js#L89-L91\n      debug: process.env.DOTENV_CONFIG_DEBUG ? true : undefined,\n    })\n\n    const dotenvExpandOutput = dotenvExpand(dotenvOutput)\n\n    return {\n      dotenvResult: dotenvExpandOutput,\n      message: dim(`Environment variables loaded from ${path.relative(process.cwd(), envPath)}`),\n      path: envPath,\n    }\n  } else {\n    debug(`Environment variables not found at ${envPath}`)\n  }\n  return null\n}\nexport function pathsEqual(path1: string | null | undefined, path2: string | null | undefined) {\n  return path1 && path2 && path.resolve(path1) === path.resolve(path2)\n}\n\nexport function exists(p: string | null | undefined): p is string {\n  return Boolean(p && fs.existsSync(p))\n}\n","import type { DotenvConfigOutput } from 'dotenv'\n\n/**\n * Modified version of https://github.com/motdotla/dotenv-expand\n * Our version does only expand ${ENV} - curly braces but not without curly braces\n *\n * Original License from https://github.com/motdotla/dotenv-expand/blob/de9e5cb0215495452f475f5be4dea1580b8217cd/LICENSE\n * Copyright (c) 2016, Scott Motte\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *\n * * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation\n *  and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nexport function dotenvExpand(config: DotenvConfigOutput & { ignoreProcessEnv?: boolean }) {\n  // if ignoring process.env, use a blank object\n  const environment = config.ignoreProcessEnv ? {} : process.env\n\n  const interpolate = (envValue: string) => {\n    const matches = envValue.match(/(.?\\${(?:[a-zA-Z0-9_]+)?})/g)\n\n    return (\n      matches?.reduce(function (newEnv, match) {\n        const parts = /(.?)\\${([a-zA-Z0-9_]+)?}/g.exec(match)\n        if (!parts) {\n          return newEnv\n        }\n\n        const prefix = parts[1]\n\n        let value, replacePart\n\n        if (prefix === '\\\\') {\n          replacePart = parts[0]\n          value = replacePart.replace('\\\\$', '$')\n        } else {\n          const key = parts[2]\n          replacePart = parts[0].substring(prefix.length)\n          // process.env value 'wins' over .env file's value\n          value = Object.hasOwnProperty.call(environment, key) ? environment[key] : config.parsed![key] || ''\n\n          // Resolve recursive interpolations\n          value = interpolate(value)\n        }\n\n        return newEnv.replace(replacePart, value)\n      }, envValue) ?? envValue\n    )\n  }\n\n  for (const configKey in config.parsed) {\n    const value = Object.hasOwnProperty.call(environment, configKey) ? environment[configKey] : config.parsed[configKey]\n\n    config.parsed[configKey] = interpolate(value!)\n  }\n\n  for (const processKey in config.parsed) {\n    environment[processKey] = config.parsed[processKey]\n  }\n\n  return config\n}\n","export function hasOwnProperty(object: object, key: PropertyKey): boolean {\n  return Object.prototype.hasOwnProperty.call(object, key)\n}\n","export function mapObjectValues<K extends PropertyKey, T, U>(\n  object: Record<K, T>,\n  mapper: (value: T, key: K) => U,\n): Record<K, U> {\n  const result = {} as Record<K, U>\n\n  for (const key of Object.keys(object)) {\n    result[key] = mapper(object[key] as T, key as K)\n  }\n\n  return result\n}\n","/**\n * Accepts an array and comparator function (similar to Array.prototype.sort)\n * and returns max element of that array, ordered with that comparator.\n * Functionally, equivalent of items.sort(comparator).at(-1), but performed non-destructively\n * in O(n)\n * @param items\n * @param comparator callback specifying the relative order of two items. See `Array.prototype.sort`\n * @returns\n */\nexport function maxWithComparator<T>(items: T[], comparator: (a: T, b: T) => number): T | undefined {\n  if (items.length === 0) {\n    return undefined\n  }\n  let result = items[0]\n\n  for (let i = 1; i < items.length; i++) {\n    const compareValue = comparator(result, items[i])\n    // comparator returning negative number means that b>a\n    if (compareValue < 0) {\n      result = items[i]\n    }\n  }\n  return result\n}\n\nexport function maxBy<T>(items: T[], callback: (item: T) => number): T | undefined {\n  return maxWithComparator(items, (a, b) => callback(a) - callback(b))\n}\n","/**\n * Used for preserving class names for minified class instances\n * Useful for error objects and other classes where public name\n * actually matters\n *\n * @param classObject\n * @param name\n */\nexport function setClassName(classObject: Function, name: string) {\n  Object.defineProperty(classObject, 'name', {\n    value: name,\n    configurable: true,\n  })\n}\n","import { warn } from './logger'\n\nconst alreadyWarned = new Set()\n\nexport const warnOnce = (key: string, message: string, ...args: unknown[]) => {\n  if (!alreadyWarned.has(key)) {\n    alreadyWarned.add(key)\n    warn(message, ...args)\n  }\n}\n","import { setClassName } from '@prisma/internals'\n\nexport class PrismaClientInitializationError extends Error {\n  clientVersion: string\n  errorCode?: string\n  retryable?: boolean\n\n  constructor(message: string, clientVersion: string, errorCode?: string) {\n    super(message)\n    this.name = 'PrismaClientInitializationError'\n\n    this.clientVersion = clientVersion\n    this.errorCode = errorCode\n    Error.captureStackTrace(PrismaClientInitializationError)\n  }\n  get [Symbol.toStringTag]() {\n    return 'PrismaClientInitializationError'\n  }\n}\n\nsetClassName(PrismaClientInitializationError, 'PrismaClientInitializationError')\n","import { setClassName } from '@prisma/internals'\n\nimport { ErrorWithBatchIndex } from './ErrorWithBatchIndex'\n\ntype KnownErrorParams = {\n  code: string\n  clientVersion: string\n  meta?: Record<string, unknown>\n  batchRequestIdx?: number\n}\n\nexport class PrismaClientKnownRequestError extends Error implements ErrorWithBatchIndex {\n  code: string\n  meta?: Record<string, unknown>\n  clientVersion: string\n  batchRequestIdx?: number\n\n  constructor(message: string, { code, clientVersion, meta, batchRequestIdx }: KnownErrorParams) {\n    super(message)\n    this.name = 'PrismaClientKnownRequestError'\n\n    this.code = code\n    this.clientVersion = clientVersion\n    this.meta = meta\n    Object.defineProperty(this, 'batchRequestIdx', {\n      value: batchRequestIdx,\n      enumerable: false,\n      writable: true,\n    })\n  }\n  get [Symbol.toStringTag]() {\n    return 'PrismaClientKnownRequestError'\n  }\n}\n\nsetClassName(PrismaClientKnownRequestError, 'PrismaClientKnownRequestError')\n","import { setClassName } from '@prisma/internals'\n\nexport class PrismaClientRustPanicError extends Error {\n  clientVersion: string\n\n  constructor(message: string, clientVersion: string) {\n    super(message)\n    this.name = 'PrismaClientRustPanicError'\n\n    this.clientVersion = clientVersion\n  }\n  get [Symbol.toStringTag]() {\n    return 'PrismaClientRustPanicError'\n  }\n}\n\nsetClassName(PrismaClientRustPanicError, 'PrismaClientRustPanicError')\n","import { setClassName } from '@prisma/internals'\n\nimport { ErrorWithBatchIndex } from './ErrorWithBatchIndex'\n\ntype UnknownErrorParams = {\n  clientVersion: string\n  batchRequestIdx?: number\n}\n\nexport class PrismaClientUnknownRequestError extends Error implements ErrorWithBatchIndex {\n  clientVersion: string\n  batchRequestIdx?: number\n\n  constructor(message: string, { clientVersion, batchRequestIdx }: UnknownErrorParams) {\n    super(message)\n    this.name = 'PrismaClientUnknownRequestError'\n\n    this.clientVersion = clientVersion\n    Object.defineProperty(this, 'batchRequestIdx', {\n      value: batchRequestIdx,\n      writable: true,\n      enumerable: false,\n    })\n  }\n  get [Symbol.toStringTag]() {\n    return 'PrismaClientUnknownRequestError'\n  }\n}\n\nsetClassName(PrismaClientUnknownRequestError, 'PrismaClientUnknownRequestError')\n","import { setClassName } from '@prisma/internals'\n\ntype Options = {\n  clientVersion: string\n}\nexport class PrismaClientValidationError extends Error {\n  name = 'PrismaClientValidationError'\n  clientVersion: string\n\n  constructor(message: string, { clientVersion }: Options) {\n    super(message)\n    this.clientVersion = clientVersion\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'PrismaClientValidationError'\n  }\n}\nsetClassName(PrismaClientValidationError, 'PrismaClientValidationError')\n","type CacheEntry<V> = {\n  value: V\n}\nexport class Cache<K, V> {\n  private _map = new Map<K, CacheEntry<V>>()\n\n  get(key: K): V | undefined {\n    return this._map.get(key)?.value\n  }\n\n  set(key: K, value: V): void {\n    this._map.set(key, { value })\n  }\n\n  getOrCreate(key: K, create: () => V): V {\n    const cached = this._map.get(key)\n    if (cached) {\n      return cached.value\n    }\n    const value = create()\n    this.set(key, value)\n    return value\n  }\n}\n","/**\n * Converts the first character of a word to upper case.\n */\nexport function capitalize<T extends string>(self: T): Capitalize<T> {\n  if (self.length === 0) return self as Capitalize<T>\n\n  return (self[0].toUpperCase() + self.slice(1)) as Capitalize<T>\n}\n\n/**\n * Converts the first character of a word to lower case.\n */\nexport function uncapitalize<T extends string>(self: T): Uncapitalize<T> {\n  return (self.substring(0, 1).toLowerCase() + self.substring(1)) as Uncapitalize<T>\n}\n","export interface Dictionary<T> {\n  [key: string]: T\n}\n\nexport function keyBy<P extends PropertyKey, T extends { [key in P]: string }>(\n  collection: readonly T[],\n  prop: P,\n): Dictionary<T> {\n  const acc: Dictionary<T> = {}\n\n  for (const obj of collection) {\n    const key = obj[prop]\n    acc[key] = obj\n  }\n\n  return acc\n}\n","export type LazyProperty<T> = {\n  get: () => T\n}\n\nexport function lazyProperty<T>(compute: () => T): LazyProperty<T> {\n  let resultContainer: undefined | { value: T }\n\n  return {\n    get() {\n      if (resultContainer) {\n        return resultContainer.value\n      }\n      resultContainer = { value: compute() }\n      return resultContainer.value\n    },\n  }\n}\n","import type * as DMMF from '@prisma/dmmf'\n\nexport type RuntimeModel = Omit<DMMF.Model, 'name'>\nexport type RuntimeEnum = Omit<DMMF.DatamodelEnum, 'name'>\n\nexport type RuntimeDataModel = {\n  readonly models: Record<string, RuntimeModel>\n  readonly enums: Record<string, RuntimeEnum>\n  readonly types: Record<string, RuntimeModel>\n}\n\nexport type PrunedRuntimeModel = {\n  readonly dbName: RuntimeModel['dbName']\n  readonly fields: Pick<RuntimeModel['fields'][number], 'name' | 'kind' | 'type' | 'relationName' | 'dbName'>[]\n}\n\nexport type PrunedRuntimeDataModel = {\n  readonly models: Record<string, PrunedRuntimeModel>\n  readonly enums: {}\n  readonly types: {}\n}\n\nexport function dmmfToRuntimeDataModel(dmmfDataModel: DMMF.Datamodel): RuntimeDataModel {\n  return {\n    models: buildMapForRuntime(dmmfDataModel.models),\n    enums: buildMapForRuntime(dmmfDataModel.enums),\n    types: buildMapForRuntime(dmmfDataModel.types),\n  }\n}\n\n/**\n * Minimal version of the runtime datamodel for the Client to work\n * @param runtimeDataModel\n * @returns\n */\nexport function pruneRuntimeDataModel({ models }: RuntimeDataModel) {\n  const prunedModels: PrunedRuntimeDataModel['models'] = {}\n\n  for (const modelName of Object.keys(models)) {\n    prunedModels[modelName] = { fields: [], dbName: models[modelName].dbName }\n\n    for (const { name, kind, type, relationName, dbName } of models[modelName].fields) {\n      prunedModels[modelName].fields.push({ name, kind, type, relationName, dbName })\n    }\n  }\n\n  return { models: prunedModels, enums: {}, types: {} }\n}\n\nfunction buildMapForRuntime<T extends { name: string }>(list: readonly T[]): Record<string, Omit<T, 'name'>> {\n  const result: Record<string, Omit<T, 'name'>> = {}\n  for (const { name, ...rest } of list) {\n    result[name] = rest\n  }\n  return result\n}\n","export function isDate(value: unknown): value is Date {\n  return (\n    value instanceof Date ||\n    // date created in other JS context (for example, worker)\n    Object.prototype.toString.call(value) === '[object Date]'\n  )\n}\n\nexport function isValidDate(date: Date) {\n  return date.toString() !== 'Invalid Date'\n}\n","/*!\r\n *  decimal.js v10.5.0\r\n *  An arbitrary-precision Decimal type for JavaScript.\r\n *  https://github.com/MikeMcl/decimal.js\r\n *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *  MIT Licence\r\n */\r\n\r\n\r\n// -----------------------------------  EDITABLE DEFAULTS  ------------------------------------ //\r\n\r\n\r\n  // The maximum exponent magnitude.\r\n  // The limit on the value of `toExpNeg`, `toExpPos`, `minE` and `maxE`.\r\nvar EXP_LIMIT = 9e15,                      // 0 to 9e15\r\n\r\n  // The limit on the value of `precision`, and on the value of the first argument to\r\n  // `toDecimalPlaces`, `toExponential`, `toFixed`, `toPrecision` and `toSignificantDigits`.\r\n  MAX_DIGITS = 1e9,                        // 0 to 1e9\r\n\r\n  // Base conversion alphabet.\r\n  NUMERALS = '0123456789abcdef',\r\n\r\n  // The natural logarithm of 10 (1025 digits).\r\n  LN10 = '2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058',\r\n\r\n  // Pi (1025 digits).\r\n  PI = '3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789',\r\n\r\n\r\n  // The initial configuration properties of the Decimal constructor.\r\n  DEFAULTS = {\r\n\r\n    // These values must be integers within the stated ranges (inclusive).\r\n    // Most of these values can be changed at run-time using the `Decimal.config` method.\r\n\r\n    // The maximum number of significant digits of the result of a calculation or base conversion.\r\n    // E.g. `Decimal.config({ precision: 20 });`\r\n    precision: 20,                         // 1 to MAX_DIGITS\r\n\r\n    // The rounding mode used when rounding to `precision`.\r\n    //\r\n    // ROUND_UP         0 Away from zero.\r\n    // ROUND_DOWN       1 Towards zero.\r\n    // ROUND_CEIL       2 Towards +Infinity.\r\n    // ROUND_FLOOR      3 Towards -Infinity.\r\n    // ROUND_HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n    // ROUND_HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n    // ROUND_HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n    // ROUND_HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n    // ROUND_HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n    //\r\n    // E.g.\r\n    // `Decimal.rounding = 4;`\r\n    // `Decimal.rounding = Decimal.ROUND_HALF_UP;`\r\n    rounding: 4,                           // 0 to 8\r\n\r\n    // The modulo mode used when calculating the modulus: a mod n.\r\n    // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n    // The remainder (r) is calculated as: r = a - n * q.\r\n    //\r\n    // UP         0 The remainder is positive if the dividend is negative, else is negative.\r\n    // DOWN       1 The remainder has the same sign as the dividend (JavaScript %).\r\n    // FLOOR      3 The remainder has the same sign as the divisor (Python %).\r\n    // HALF_EVEN  6 The IEEE 754 remainder function.\r\n    // EUCLID     9 Euclidian division. q = sign(n) * floor(a / abs(n)). Always positive.\r\n    //\r\n    // Truncated division (1), floored division (3), the IEEE 754 remainder (6), and Euclidian\r\n    // division (9) are commonly used for the modulus operation. The other rounding modes can also\r\n    // be used, but they may not give useful results.\r\n    modulo: 1,                             // 0 to 9\r\n\r\n    // The exponent value at and beneath which `toString` returns exponential notation.\r\n    // JavaScript numbers: -7\r\n    toExpNeg: -7,                          // 0 to -EXP_LIMIT\r\n\r\n    // The exponent value at and above which `toString` returns exponential notation.\r\n    // JavaScript numbers: 21\r\n    toExpPos:  21,                         // 0 to EXP_LIMIT\r\n\r\n    // The minimum exponent value, beneath which underflow to zero occurs.\r\n    // JavaScript numbers: -324  (5e-324)\r\n    minE: -EXP_LIMIT,                      // -1 to -EXP_LIMIT\r\n\r\n    // The maximum exponent value, above which overflow to Infinity occurs.\r\n    // JavaScript numbers: 308  (1.7976931348623157e+308)\r\n    maxE: EXP_LIMIT,                       // 1 to EXP_LIMIT\r\n\r\n    // Whether to use cryptographically-secure random number generation, if available.\r\n    crypto: false                          // true/false\r\n  },\r\n\r\n\r\n// ----------------------------------- END OF EDITABLE DEFAULTS ------------------------------- //\r\n\r\n\r\n  inexact, quadrant,\r\n  external = true,\r\n\r\n  decimalError = '[DecimalError] ',\r\n  invalidArgument = decimalError + 'Invalid argument: ',\r\n  precisionLimitExceeded = decimalError + 'Precision limit exceeded',\r\n  cryptoUnavailable = decimalError + 'crypto unavailable',\r\n  tag = '[object Decimal]',\r\n\r\n  mathfloor = Math.floor,\r\n  mathpow = Math.pow,\r\n\r\n  isBinary = /^0b([01]+(\\.[01]*)?|\\.[01]+)(p[+-]?\\d+)?$/i,\r\n  isHex = /^0x([0-9a-f]+(\\.[0-9a-f]*)?|\\.[0-9a-f]+)(p[+-]?\\d+)?$/i,\r\n  isOctal = /^0o([0-7]+(\\.[0-7]*)?|\\.[0-7]+)(p[+-]?\\d+)?$/i,\r\n  isDecimal = /^(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i,\r\n\r\n  BASE = 1e7,\r\n  LOG_BASE = 7,\r\n  MAX_SAFE_INTEGER = 9007199254740991,\r\n\r\n  LN10_PRECISION = LN10.length - 1,\r\n  PI_PRECISION = PI.length - 1,\r\n\r\n  // Decimal.prototype object\r\n  P = { toStringTag: tag };\r\n\r\n\r\n// Decimal prototype methods\r\n\r\n\r\n/*\r\n *  absoluteValue             abs\r\n *  ceil\r\n *  clampedTo                 clamp\r\n *  comparedTo                cmp\r\n *  cosine                    cos\r\n *  cubeRoot                  cbrt\r\n *  decimalPlaces             dp\r\n *  dividedBy                 div\r\n *  dividedToIntegerBy        divToInt\r\n *  equals                    eq\r\n *  floor\r\n *  greaterThan               gt\r\n *  greaterThanOrEqualTo      gte\r\n *  hyperbolicCosine          cosh\r\n *  hyperbolicSine            sinh\r\n *  hyperbolicTangent         tanh\r\n *  inverseCosine             acos\r\n *  inverseHyperbolicCosine   acosh\r\n *  inverseHyperbolicSine     asinh\r\n *  inverseHyperbolicTangent  atanh\r\n *  inverseSine               asin\r\n *  inverseTangent            atan\r\n *  isFinite\r\n *  isInteger                 isInt\r\n *  isNaN\r\n *  isNegative                isNeg\r\n *  isPositive                isPos\r\n *  isZero\r\n *  lessThan                  lt\r\n *  lessThanOrEqualTo         lte\r\n *  logarithm                 log\r\n *  [maximum]                 [max]\r\n *  [minimum]                 [min]\r\n *  minus                     sub\r\n *  modulo                    mod\r\n *  naturalExponential        exp\r\n *  naturalLogarithm          ln\r\n *  negated                   neg\r\n *  plus                      add\r\n *  precision                 sd\r\n *  round\r\n *  sine                      sin\r\n *  squareRoot                sqrt\r\n *  tangent                   tan\r\n *  times                     mul\r\n *  toBinary\r\n *  toDecimalPlaces           toDP\r\n *  toExponential\r\n *  toFixed\r\n *  toFraction\r\n *  toHexadecimal             toHex\r\n *  toNearest\r\n *  toNumber\r\n *  toOctal\r\n *  toPower                   pow\r\n *  toPrecision\r\n *  toSignificantDigits       toSD\r\n *  toString\r\n *  truncated                 trunc\r\n *  valueOf                   toJSON\r\n */\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the absolute value of this Decimal.\r\n *\r\n */\r\nP.absoluteValue = P.abs = function () {\r\n  var x = new this.constructor(this);\r\n  if (x.s < 0) x.s = 1;\r\n  return finalise(x);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a whole number in the\r\n * direction of positive Infinity.\r\n *\r\n */\r\nP.ceil = function () {\r\n  return finalise(new this.constructor(this), this.e + 1, 2);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal clamped to the range\r\n * delineated by `min` and `max`.\r\n *\r\n * min {number|string|bigint|Decimal}\r\n * max {number|string|bigint|Decimal}\r\n *\r\n */\r\nP.clampedTo = P.clamp = function (min, max) {\r\n  var k,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n  min = new Ctor(min);\r\n  max = new Ctor(max);\r\n  if (!min.s || !max.s) return new Ctor(NaN);\r\n  if (min.gt(max)) throw Error(invalidArgument + max);\r\n  k = x.cmp(min);\r\n  return k < 0 ? min : x.cmp(max) > 0 ? max : new Ctor(x);\r\n};\r\n\r\n\r\n/*\r\n * Return\r\n *   1    if the value of this Decimal is greater than the value of `y`,\r\n *  -1    if the value of this Decimal is less than the value of `y`,\r\n *   0    if they have the same value,\r\n *   NaN  if the value of either Decimal is NaN.\r\n *\r\n */\r\nP.comparedTo = P.cmp = function (y) {\r\n  var i, j, xdL, ydL,\r\n    x = this,\r\n    xd = x.d,\r\n    yd = (y = new x.constructor(y)).d,\r\n    xs = x.s,\r\n    ys = y.s;\r\n\r\n  // Either NaN or Infinity?\r\n  if (!xd || !yd) {\r\n    return !xs || !ys ? NaN : xs !== ys ? xs : xd === yd ? 0 : !xd ^ xs < 0 ? 1 : -1;\r\n  }\r\n\r\n  // Either zero?\r\n  if (!xd[0] || !yd[0]) return xd[0] ? xs : yd[0] ? -ys : 0;\r\n\r\n  // Signs differ?\r\n  if (xs !== ys) return xs;\r\n\r\n  // Compare exponents.\r\n  if (x.e !== y.e) return x.e > y.e ^ xs < 0 ? 1 : -1;\r\n\r\n  xdL = xd.length;\r\n  ydL = yd.length;\r\n\r\n  // Compare digit by digit.\r\n  for (i = 0, j = xdL < ydL ? xdL : ydL; i < j; ++i) {\r\n    if (xd[i] !== yd[i]) return xd[i] > yd[i] ^ xs < 0 ? 1 : -1;\r\n  }\r\n\r\n  // Compare lengths.\r\n  return xdL === ydL ? 0 : xdL > ydL ^ xs < 0 ? 1 : -1;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the cosine of the value in radians of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-1, 1]\r\n *\r\n * cos(0)         = 1\r\n * cos(-0)        = 1\r\n * cos(Infinity)  = NaN\r\n * cos(-Infinity) = NaN\r\n * cos(NaN)       = NaN\r\n *\r\n */\r\nP.cosine = P.cos = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.d) return new Ctor(NaN);\r\n\r\n  // cos(0) = cos(-0) = 1\r\n  if (!x.d[0]) return new Ctor(1);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(x.e, x.sd()) + LOG_BASE;\r\n  Ctor.rounding = 1;\r\n\r\n  x = cosine(Ctor, toLessThanHalfPi(Ctor, x));\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(quadrant == 2 || quadrant == 3 ? x.neg() : x, pr, rm, true);\r\n};\r\n\r\n\r\n/*\r\n *\r\n * Return a new Decimal whose value is the cube root of the value of this Decimal, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n *  cbrt(0)  =  0\r\n *  cbrt(-0) = -0\r\n *  cbrt(1)  =  1\r\n *  cbrt(-1) = -1\r\n *  cbrt(N)  =  N\r\n *  cbrt(-I) = -I\r\n *  cbrt(I)  =  I\r\n *\r\n * Math.cbrt(x) = (x < 0 ? -Math.pow(-x, 1/3) : Math.pow(x, 1/3))\r\n *\r\n */\r\nP.cubeRoot = P.cbrt = function () {\r\n  var e, m, n, r, rep, s, sd, t, t3, t3plusx,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite() || x.isZero()) return new Ctor(x);\r\n  external = false;\r\n\r\n  // Initial estimate.\r\n  s = x.s * mathpow(x.s * x, 1 / 3);\r\n\r\n   // Math.cbrt underflow/overflow?\r\n   // Pass x to Math.pow as integer, then adjust the exponent of the result.\r\n  if (!s || Math.abs(s) == 1 / 0) {\r\n    n = digitsToString(x.d);\r\n    e = x.e;\r\n\r\n    // Adjust n exponent so it is a multiple of 3 away from x exponent.\r\n    if (s = (e - n.length + 1) % 3) n += (s == 1 || s == -2 ? '0' : '00');\r\n    s = mathpow(n, 1 / 3);\r\n\r\n    // Rarely, e may be one less than the result exponent value.\r\n    e = mathfloor((e + 1) / 3) - (e % 3 == (e < 0 ? -1 : 2));\r\n\r\n    if (s == 1 / 0) {\r\n      n = '5e' + e;\r\n    } else {\r\n      n = s.toExponential();\r\n      n = n.slice(0, n.indexOf('e') + 1) + e;\r\n    }\r\n\r\n    r = new Ctor(n);\r\n    r.s = x.s;\r\n  } else {\r\n    r = new Ctor(s.toString());\r\n  }\r\n\r\n  sd = (e = Ctor.precision) + 3;\r\n\r\n  // Halley's method.\r\n  // TODO? Compare Newton's method.\r\n  for (;;) {\r\n    t = r;\r\n    t3 = t.times(t).times(t);\r\n    t3plusx = t3.plus(x);\r\n    r = divide(t3plusx.plus(x).times(t), t3plusx.plus(t3), sd + 2, 1);\r\n\r\n    // TODO? Replace with for-loop and checkRoundingDigits.\r\n    if (digitsToString(t.d).slice(0, sd) === (n = digitsToString(r.d)).slice(0, sd)) {\r\n      n = n.slice(sd - 3, sd + 1);\r\n\r\n      // The 4th rounding digit may be in error by -1 so if the 4 rounding digits are 9999 or 4999\r\n      // , i.e. approaching a rounding boundary, continue the iteration.\r\n      if (n == '9999' || !rep && n == '4999') {\r\n\r\n        // On the first iteration only, check to see if rounding up gives the exact result as the\r\n        // nines may infinitely repeat.\r\n        if (!rep) {\r\n          finalise(t, e + 1, 0);\r\n\r\n          if (t.times(t).times(t).eq(x)) {\r\n            r = t;\r\n            break;\r\n          }\r\n        }\r\n\r\n        sd += 4;\r\n        rep = 1;\r\n      } else {\r\n\r\n        // If the rounding digits are null, 0{0,4} or 50{0,3}, check for an exact result.\r\n        // If not, then there are further digits and m will be truthy.\r\n        if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n          // Truncate to the first rounding digit.\r\n          finalise(r, e + 1, 1);\r\n          m = !r.times(r).times(r).eq(x);\r\n        }\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  external = true;\r\n\r\n  return finalise(r, e, Ctor.rounding, m);\r\n};\r\n\r\n\r\n/*\r\n * Return the number of decimal places of the value of this Decimal.\r\n *\r\n */\r\nP.decimalPlaces = P.dp = function () {\r\n  var w,\r\n    d = this.d,\r\n    n = NaN;\r\n\r\n  if (d) {\r\n    w = d.length - 1;\r\n    n = (w - mathfloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last word.\r\n    w = d[w];\r\n    if (w) for (; w % 10 == 0; w /= 10) n--;\r\n    if (n < 0) n = 0;\r\n  }\r\n\r\n  return n;\r\n};\r\n\r\n\r\n/*\r\n *  n / 0 = I\r\n *  n / N = N\r\n *  n / I = 0\r\n *  0 / n = 0\r\n *  0 / 0 = N\r\n *  0 / N = N\r\n *  0 / I = 0\r\n *  N / n = N\r\n *  N / 0 = N\r\n *  N / N = N\r\n *  N / I = N\r\n *  I / n = I\r\n *  I / 0 = I\r\n *  I / N = N\r\n *  I / I = N\r\n *\r\n * Return a new Decimal whose value is the value of this Decimal divided by `y`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.dividedBy = P.div = function (y) {\r\n  return divide(this, new this.constructor(y));\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the integer part of dividing the value of this Decimal\r\n * by the value of `y`, rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.dividedToIntegerBy = P.divToInt = function (y) {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n  return finalise(divide(x, new Ctor(y), 0, 1, 1), Ctor.precision, Ctor.rounding);\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is equal to the value of `y`, otherwise return false.\r\n *\r\n */\r\nP.equals = P.eq = function (y) {\r\n  return this.cmp(y) === 0;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a whole number in the\r\n * direction of negative Infinity.\r\n *\r\n */\r\nP.floor = function () {\r\n  return finalise(new this.constructor(this), this.e + 1, 3);\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is greater than the value of `y`, otherwise return\r\n * false.\r\n *\r\n */\r\nP.greaterThan = P.gt = function (y) {\r\n  return this.cmp(y) > 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is greater than or equal to the value of `y`,\r\n * otherwise return false.\r\n *\r\n */\r\nP.greaterThanOrEqualTo = P.gte = function (y) {\r\n  var k = this.cmp(y);\r\n  return k == 1 || k === 0;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic cosine of the value in radians of this\r\n * Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [1, Infinity]\r\n *\r\n * cosh(x) = 1 + x^2/2! + x^4/4! + x^6/6! + ...\r\n *\r\n * cosh(0)         = 1\r\n * cosh(-0)        = 1\r\n * cosh(Infinity)  = Infinity\r\n * cosh(-Infinity) = Infinity\r\n * cosh(NaN)       = NaN\r\n *\r\n *  x        time taken (ms)   result\r\n * 1000      9                 9.8503555700852349694e+433\r\n * 10000     25                4.4034091128314607936e+4342\r\n * 100000    171               1.4033316802130615897e+43429\r\n * 1000000   3817              1.5166076984010437725e+434294\r\n * 10000000  abandoned after 2 minute wait\r\n *\r\n * TODO? Compare performance of cosh(x) = 0.5 * (exp(x) + exp(-x))\r\n *\r\n */\r\nP.hyperbolicCosine = P.cosh = function () {\r\n  var k, n, pr, rm, len,\r\n    x = this,\r\n    Ctor = x.constructor,\r\n    one = new Ctor(1);\r\n\r\n  if (!x.isFinite()) return new Ctor(x.s ? 1 / 0 : NaN);\r\n  if (x.isZero()) return one;\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(x.e, x.sd()) + 4;\r\n  Ctor.rounding = 1;\r\n  len = x.d.length;\r\n\r\n  // Argument reduction: cos(4x) = 1 - 8cos^2(x) + 8cos^4(x) + 1\r\n  // i.e. cos(x) = 1 - cos^2(x/4)(8 - 8cos^2(x/4))\r\n\r\n  // Estimate the optimum number of times to use the argument reduction.\r\n  // TODO? Estimation reused from cosine() and may not be optimal here.\r\n  if (len < 32) {\r\n    k = Math.ceil(len / 3);\r\n    n = (1 / tinyPow(4, k)).toString();\r\n  } else {\r\n    k = 16;\r\n    n = '2.3283064365386962890625e-10';\r\n  }\r\n\r\n  x = taylorSeries(Ctor, 1, x.times(n), new Ctor(1), true);\r\n\r\n  // Reverse argument reduction\r\n  var cosh2_x,\r\n    i = k,\r\n    d8 = new Ctor(8);\r\n  for (; i--;) {\r\n    cosh2_x = x.times(x);\r\n    x = one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))));\r\n  }\r\n\r\n  return finalise(x, Ctor.precision = pr, Ctor.rounding = rm, true);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic sine of the value in radians of this\r\n * Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-Infinity, Infinity]\r\n *\r\n * sinh(x) = x + x^3/3! + x^5/5! + x^7/7! + ...\r\n *\r\n * sinh(0)         = 0\r\n * sinh(-0)        = -0\r\n * sinh(Infinity)  = Infinity\r\n * sinh(-Infinity) = -Infinity\r\n * sinh(NaN)       = NaN\r\n *\r\n * x        time taken (ms)\r\n * 10       2 ms\r\n * 100      5 ms\r\n * 1000     14 ms\r\n * 10000    82 ms\r\n * 100000   886 ms            1.4033316802130615897e+43429\r\n * 200000   2613 ms\r\n * 300000   5407 ms\r\n * 400000   8824 ms\r\n * 500000   13026 ms          8.7080643612718084129e+217146\r\n * 1000000  48543 ms\r\n *\r\n * TODO? Compare performance of sinh(x) = 0.5 * (exp(x) - exp(-x))\r\n *\r\n */\r\nP.hyperbolicSine = P.sinh = function () {\r\n  var k, pr, rm, len,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite() || x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(x.e, x.sd()) + 4;\r\n  Ctor.rounding = 1;\r\n  len = x.d.length;\r\n\r\n  if (len < 3) {\r\n    x = taylorSeries(Ctor, 2, x, x, true);\r\n  } else {\r\n\r\n    // Alternative argument reduction: sinh(3x) = sinh(x)(3 + 4sinh^2(x))\r\n    // i.e. sinh(x) = sinh(x/3)(3 + 4sinh^2(x/3))\r\n    // 3 multiplications and 1 addition\r\n\r\n    // Argument reduction: sinh(5x) = sinh(x)(5 + sinh^2(x)(20 + 16sinh^2(x)))\r\n    // i.e. sinh(x) = sinh(x/5)(5 + sinh^2(x/5)(20 + 16sinh^2(x/5)))\r\n    // 4 multiplications and 2 additions\r\n\r\n    // Estimate the optimum number of times to use the argument reduction.\r\n    k = 1.4 * Math.sqrt(len);\r\n    k = k > 16 ? 16 : k | 0;\r\n\r\n    x = x.times(1 / tinyPow(5, k));\r\n    x = taylorSeries(Ctor, 2, x, x, true);\r\n\r\n    // Reverse argument reduction\r\n    var sinh2_x,\r\n      d5 = new Ctor(5),\r\n      d16 = new Ctor(16),\r\n      d20 = new Ctor(20);\r\n    for (; k--;) {\r\n      sinh2_x = x.times(x);\r\n      x = x.times(d5.plus(sinh2_x.times(d16.times(sinh2_x).plus(d20))));\r\n    }\r\n  }\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(x, pr, rm, true);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic tangent of the value in radians of this\r\n * Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-1, 1]\r\n *\r\n * tanh(x) = sinh(x) / cosh(x)\r\n *\r\n * tanh(0)         = 0\r\n * tanh(-0)        = -0\r\n * tanh(Infinity)  = 1\r\n * tanh(-Infinity) = -1\r\n * tanh(NaN)       = NaN\r\n *\r\n */\r\nP.hyperbolicTangent = P.tanh = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite()) return new Ctor(x.s);\r\n  if (x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + 7;\r\n  Ctor.rounding = 1;\r\n\r\n  return divide(x.sinh(), x.cosh(), Ctor.precision = pr, Ctor.rounding = rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arccosine (inverse cosine) in radians of the value of\r\n * this Decimal.\r\n *\r\n * Domain: [-1, 1]\r\n * Range: [0, pi]\r\n *\r\n * acos(x) = pi/2 - asin(x)\r\n *\r\n * acos(0)       = pi/2\r\n * acos(-0)      = pi/2\r\n * acos(1)       = 0\r\n * acos(-1)      = pi\r\n * acos(1/2)     = pi/3\r\n * acos(-1/2)    = 2*pi/3\r\n * acos(|x| > 1) = NaN\r\n * acos(NaN)     = NaN\r\n *\r\n */\r\nP.inverseCosine = P.acos = function () {\r\n  var x = this,\r\n    Ctor = x.constructor,\r\n    k = x.abs().cmp(1),\r\n    pr = Ctor.precision,\r\n    rm = Ctor.rounding;\r\n\r\n  if (k !== -1) {\r\n    return k === 0\r\n      // |x| is 1\r\n      ? x.isNeg() ? getPi(Ctor, pr, rm) : new Ctor(0)\r\n      // |x| > 1 or x is NaN\r\n      : new Ctor(NaN);\r\n  }\r\n\r\n  if (x.isZero()) return getPi(Ctor, pr + 4, rm).times(0.5);\r\n\r\n  // TODO? Special case acos(0.5) = pi/3 and acos(-0.5) = 2*pi/3\r\n\r\n  Ctor.precision = pr + 6;\r\n  Ctor.rounding = 1;\r\n\r\n  // See https://github.com/MikeMcl/decimal.js/pull/217\r\n  x = new Ctor(1).minus(x).div(x.plus(1)).sqrt().atan();\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.times(2);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic cosine in radians of the\r\n * value of this Decimal.\r\n *\r\n * Domain: [1, Infinity]\r\n * Range: [0, Infinity]\r\n *\r\n * acosh(x) = ln(x + sqrt(x^2 - 1))\r\n *\r\n * acosh(x < 1)     = NaN\r\n * acosh(NaN)       = NaN\r\n * acosh(Infinity)  = Infinity\r\n * acosh(-Infinity) = NaN\r\n * acosh(0)         = NaN\r\n * acosh(-0)        = NaN\r\n * acosh(1)         = 0\r\n * acosh(-1)        = NaN\r\n *\r\n */\r\nP.inverseHyperbolicCosine = P.acosh = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (x.lte(1)) return new Ctor(x.eq(1) ? 0 : NaN);\r\n  if (!x.isFinite()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(Math.abs(x.e), x.sd()) + 4;\r\n  Ctor.rounding = 1;\r\n  external = false;\r\n\r\n  x = x.times(x).minus(1).sqrt().plus(x);\r\n\r\n  external = true;\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.ln();\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic sine in radians of the value\r\n * of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-Infinity, Infinity]\r\n *\r\n * asinh(x) = ln(x + sqrt(x^2 + 1))\r\n *\r\n * asinh(NaN)       = NaN\r\n * asinh(Infinity)  = Infinity\r\n * asinh(-Infinity) = -Infinity\r\n * asinh(0)         = 0\r\n * asinh(-0)        = -0\r\n *\r\n */\r\nP.inverseHyperbolicSine = P.asinh = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite() || x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + 2 * Math.max(Math.abs(x.e), x.sd()) + 6;\r\n  Ctor.rounding = 1;\r\n  external = false;\r\n\r\n  x = x.times(x).plus(1).sqrt().plus(x);\r\n\r\n  external = true;\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.ln();\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic tangent in radians of the\r\n * value of this Decimal.\r\n *\r\n * Domain: [-1, 1]\r\n * Range: [-Infinity, Infinity]\r\n *\r\n * atanh(x) = 0.5 * ln((1 + x) / (1 - x))\r\n *\r\n * atanh(|x| > 1)   = NaN\r\n * atanh(NaN)       = NaN\r\n * atanh(Infinity)  = NaN\r\n * atanh(-Infinity) = NaN\r\n * atanh(0)         = 0\r\n * atanh(-0)        = -0\r\n * atanh(1)         = Infinity\r\n * atanh(-1)        = -Infinity\r\n *\r\n */\r\nP.inverseHyperbolicTangent = P.atanh = function () {\r\n  var pr, rm, wpr, xsd,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite()) return new Ctor(NaN);\r\n  if (x.e >= 0) return new Ctor(x.abs().eq(1) ? x.s / 0 : x.isZero() ? x : NaN);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  xsd = x.sd();\r\n\r\n  if (Math.max(xsd, pr) < 2 * -x.e - 1) return finalise(new Ctor(x), pr, rm, true);\r\n\r\n  Ctor.precision = wpr = xsd - x.e;\r\n\r\n  x = divide(x.plus(1), new Ctor(1).minus(x), wpr + pr, 1);\r\n\r\n  Ctor.precision = pr + 4;\r\n  Ctor.rounding = 1;\r\n\r\n  x = x.ln();\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.times(0.5);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arcsine (inverse sine) in radians of the value of this\r\n * Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-pi/2, pi/2]\r\n *\r\n * asin(x) = 2*atan(x/(1 + sqrt(1 - x^2)))\r\n *\r\n * asin(0)       = 0\r\n * asin(-0)      = -0\r\n * asin(1/2)     = pi/6\r\n * asin(-1/2)    = -pi/6\r\n * asin(1)       = pi/2\r\n * asin(-1)      = -pi/2\r\n * asin(|x| > 1) = NaN\r\n * asin(NaN)     = NaN\r\n *\r\n * TODO? Compare performance of Taylor series.\r\n *\r\n */\r\nP.inverseSine = P.asin = function () {\r\n  var halfPi, k,\r\n    pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (x.isZero()) return new Ctor(x);\r\n\r\n  k = x.abs().cmp(1);\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n\r\n  if (k !== -1) {\r\n\r\n    // |x| is 1\r\n    if (k === 0) {\r\n      halfPi = getPi(Ctor, pr + 4, rm).times(0.5);\r\n      halfPi.s = x.s;\r\n      return halfPi;\r\n    }\r\n\r\n    // |x| > 1 or x is NaN\r\n    return new Ctor(NaN);\r\n  }\r\n\r\n  // TODO? Special case asin(1/2) = pi/6 and asin(-1/2) = -pi/6\r\n\r\n  Ctor.precision = pr + 6;\r\n  Ctor.rounding = 1;\r\n\r\n  x = x.div(new Ctor(1).minus(x.times(x)).sqrt().plus(1)).atan();\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.times(2);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arctangent (inverse tangent) in radians of the value\r\n * of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-pi/2, pi/2]\r\n *\r\n * atan(x) = x - x^3/3 + x^5/5 - x^7/7 + ...\r\n *\r\n * atan(0)         = 0\r\n * atan(-0)        = -0\r\n * atan(1)         = pi/4\r\n * atan(-1)        = -pi/4\r\n * atan(Infinity)  = pi/2\r\n * atan(-Infinity) = -pi/2\r\n * atan(NaN)       = NaN\r\n *\r\n */\r\nP.inverseTangent = P.atan = function () {\r\n  var i, j, k, n, px, t, r, wpr, x2,\r\n    x = this,\r\n    Ctor = x.constructor,\r\n    pr = Ctor.precision,\r\n    rm = Ctor.rounding;\r\n\r\n  if (!x.isFinite()) {\r\n    if (!x.s) return new Ctor(NaN);\r\n    if (pr + 4 <= PI_PRECISION) {\r\n      r = getPi(Ctor, pr + 4, rm).times(0.5);\r\n      r.s = x.s;\r\n      return r;\r\n    }\r\n  } else if (x.isZero()) {\r\n    return new Ctor(x);\r\n  } else if (x.abs().eq(1) && pr + 4 <= PI_PRECISION) {\r\n    r = getPi(Ctor, pr + 4, rm).times(0.25);\r\n    r.s = x.s;\r\n    return r;\r\n  }\r\n\r\n  Ctor.precision = wpr = pr + 10;\r\n  Ctor.rounding = 1;\r\n\r\n  // TODO? if (x >= 1 && pr <= PI_PRECISION) atan(x) = halfPi * x.s - atan(1 / x);\r\n\r\n  // Argument reduction\r\n  // Ensure |x| < 0.42\r\n  // atan(x) = 2 * atan(x / (1 + sqrt(1 + x^2)))\r\n\r\n  k = Math.min(28, wpr / LOG_BASE + 2 | 0);\r\n\r\n  for (i = k; i; --i) x = x.div(x.times(x).plus(1).sqrt().plus(1));\r\n\r\n  external = false;\r\n\r\n  j = Math.ceil(wpr / LOG_BASE);\r\n  n = 1;\r\n  x2 = x.times(x);\r\n  r = new Ctor(x);\r\n  px = x;\r\n\r\n  // atan(x) = x - x^3/3 + x^5/5 - x^7/7 + ...\r\n  for (; i !== -1;) {\r\n    px = px.times(x2);\r\n    t = r.minus(px.div(n += 2));\r\n\r\n    px = px.times(x2);\r\n    r = t.plus(px.div(n += 2));\r\n\r\n    if (r.d[j] !== void 0) for (i = j; r.d[i] === t.d[i] && i--;);\r\n  }\r\n\r\n  if (k) r = r.times(2 << (k - 1));\r\n\r\n  external = true;\r\n\r\n  return finalise(r, Ctor.precision = pr, Ctor.rounding = rm, true);\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is a finite number, otherwise return false.\r\n *\r\n */\r\nP.isFinite = function () {\r\n  return !!this.d;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is an integer, otherwise return false.\r\n *\r\n */\r\nP.isInteger = P.isInt = function () {\r\n  return !!this.d && mathfloor(this.e / LOG_BASE) > this.d.length - 2;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is NaN, otherwise return false.\r\n *\r\n */\r\nP.isNaN = function () {\r\n  return !this.s;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is negative, otherwise return false.\r\n *\r\n */\r\nP.isNegative = P.isNeg = function () {\r\n  return this.s < 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is positive, otherwise return false.\r\n *\r\n */\r\nP.isPositive = P.isPos = function () {\r\n  return this.s > 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is 0 or -0, otherwise return false.\r\n *\r\n */\r\nP.isZero = function () {\r\n  return !!this.d && this.d[0] === 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is less than `y`, otherwise return false.\r\n *\r\n */\r\nP.lessThan = P.lt = function (y) {\r\n  return this.cmp(y) < 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is less than or equal to `y`, otherwise return false.\r\n *\r\n */\r\nP.lessThanOrEqualTo = P.lte = function (y) {\r\n  return this.cmp(y) < 1;\r\n};\r\n\r\n\r\n/*\r\n * Return the logarithm of the value of this Decimal to the specified base, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * If no base is specified, return log[10](arg).\r\n *\r\n * log[base](arg) = ln(arg) / ln(base)\r\n *\r\n * The result will always be correctly rounded if the base of the log is 10, and 'almost always'\r\n * otherwise:\r\n *\r\n * Depending on the rounding mode, the result may be incorrectly rounded if the first fifteen\r\n * rounding digits are [49]99999999999999 or [50]00000000000000. In that case, the maximum error\r\n * between the result and the correctly rounded result will be one ulp (unit in the last place).\r\n *\r\n * log[-b](a)       = NaN\r\n * log[0](a)        = NaN\r\n * log[1](a)        = NaN\r\n * log[NaN](a)      = NaN\r\n * log[Infinity](a) = NaN\r\n * log[b](0)        = -Infinity\r\n * log[b](-0)       = -Infinity\r\n * log[b](-a)       = NaN\r\n * log[b](1)        = 0\r\n * log[b](Infinity) = Infinity\r\n * log[b](NaN)      = NaN\r\n *\r\n * [base] {number|string|bigint|Decimal} The base of the logarithm.\r\n *\r\n */\r\nP.logarithm = P.log = function (base) {\r\n  var isBase10, d, denominator, k, inf, num, sd, r,\r\n    arg = this,\r\n    Ctor = arg.constructor,\r\n    pr = Ctor.precision,\r\n    rm = Ctor.rounding,\r\n    guard = 5;\r\n\r\n  // Default base is 10.\r\n  if (base == null) {\r\n    base = new Ctor(10);\r\n    isBase10 = true;\r\n  } else {\r\n    base = new Ctor(base);\r\n    d = base.d;\r\n\r\n    // Return NaN if base is negative, or non-finite, or is 0 or 1.\r\n    if (base.s < 0 || !d || !d[0] || base.eq(1)) return new Ctor(NaN);\r\n\r\n    isBase10 = base.eq(10);\r\n  }\r\n\r\n  d = arg.d;\r\n\r\n  // Is arg negative, non-finite, 0 or 1?\r\n  if (arg.s < 0 || !d || !d[0] || arg.eq(1)) {\r\n    return new Ctor(d && !d[0] ? -1 / 0 : arg.s != 1 ? NaN : d ? 0 : 1 / 0);\r\n  }\r\n\r\n  // The result will have a non-terminating decimal expansion if base is 10 and arg is not an\r\n  // integer power of 10.\r\n  if (isBase10) {\r\n    if (d.length > 1) {\r\n      inf = true;\r\n    } else {\r\n      for (k = d[0]; k % 10 === 0;) k /= 10;\r\n      inf = k !== 1;\r\n    }\r\n  }\r\n\r\n  external = false;\r\n  sd = pr + guard;\r\n  num = naturalLogarithm(arg, sd);\r\n  denominator = isBase10 ? getLn10(Ctor, sd + 10) : naturalLogarithm(base, sd);\r\n\r\n  // The result will have 5 rounding digits.\r\n  r = divide(num, denominator, sd, 1);\r\n\r\n  // If at a rounding boundary, i.e. the result's rounding digits are [49]9999 or [50]0000,\r\n  // calculate 10 further digits.\r\n  //\r\n  // If the result is known to have an infinite decimal expansion, repeat this until it is clear\r\n  // that the result is above or below the boundary. Otherwise, if after calculating the 10\r\n  // further digits, the last 14 are nines, round up and assume the result is exact.\r\n  // Also assume the result is exact if the last 14 are zero.\r\n  //\r\n  // Example of a result that will be incorrectly rounded:\r\n  // log[1048576](4503599627370502) = 2.60000000000000009610279511444746...\r\n  // The above result correctly rounded using ROUND_CEIL to 1 decimal place should be 2.7, but it\r\n  // will be given as 2.6 as there are 15 zeros immediately after the requested decimal place, so\r\n  // the exact result would be assumed to be 2.6, which rounded using ROUND_CEIL to 1 decimal\r\n  // place is still 2.6.\r\n  if (checkRoundingDigits(r.d, k = pr, rm)) {\r\n\r\n    do {\r\n      sd += 10;\r\n      num = naturalLogarithm(arg, sd);\r\n      denominator = isBase10 ? getLn10(Ctor, sd + 10) : naturalLogarithm(base, sd);\r\n      r = divide(num, denominator, sd, 1);\r\n\r\n      if (!inf) {\r\n\r\n        // Check for 14 nines from the 2nd rounding digit, as the first may be 4.\r\n        if (+digitsToString(r.d).slice(k + 1, k + 15) + 1 == 1e14) {\r\n          r = finalise(r, pr + 1, 0);\r\n        }\r\n\r\n        break;\r\n      }\r\n    } while (checkRoundingDigits(r.d, k += 10, rm));\r\n  }\r\n\r\n  external = true;\r\n\r\n  return finalise(r, pr, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the maximum of the arguments and the value of this Decimal.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\nP.max = function () {\r\n  Array.prototype.push.call(arguments, this);\r\n  return maxOrMin(this.constructor, arguments, -1);\r\n};\r\n */\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the minimum of the arguments and the value of this Decimal.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\nP.min = function () {\r\n  Array.prototype.push.call(arguments, this);\r\n  return maxOrMin(this.constructor, arguments, 1);\r\n};\r\n */\r\n\r\n\r\n/*\r\n *  n - 0 = n\r\n *  n - N = N\r\n *  n - I = -I\r\n *  0 - n = -n\r\n *  0 - 0 = 0\r\n *  0 - N = N\r\n *  0 - I = -I\r\n *  N - n = N\r\n *  N - 0 = N\r\n *  N - N = N\r\n *  N - I = N\r\n *  I - n = I\r\n *  I - 0 = I\r\n *  I - N = N\r\n *  I - I = N\r\n *\r\n * Return a new Decimal whose value is the value of this Decimal minus `y`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.minus = P.sub = function (y) {\r\n  var d, e, i, j, k, len, pr, rm, xd, xe, xLTy, yd,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  y = new Ctor(y);\r\n\r\n  // If either is not finite...\r\n  if (!x.d || !y.d) {\r\n\r\n    // Return NaN if either is NaN.\r\n    if (!x.s || !y.s) y = new Ctor(NaN);\r\n\r\n    // Return y negated if x is finite and y is Infinity.\r\n    else if (x.d) y.s = -y.s;\r\n\r\n    // Return x if y is finite and x is Infinity.\r\n    // Return x if both are Infinity with different signs.\r\n    // Return NaN if both are Infinity with the same sign.\r\n    else y = new Ctor(y.d || x.s !== y.s ? x : NaN);\r\n\r\n    return y;\r\n  }\r\n\r\n  // If signs differ...\r\n  if (x.s != y.s) {\r\n    y.s = -y.s;\r\n    return x.plus(y);\r\n  }\r\n\r\n  xd = x.d;\r\n  yd = y.d;\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n\r\n  // If either is zero...\r\n  if (!xd[0] || !yd[0]) {\r\n\r\n    // Return y negated if x is zero and y is non-zero.\r\n    if (yd[0]) y.s = -y.s;\r\n\r\n    // Return x if y is zero and x is non-zero.\r\n    else if (xd[0]) y = new Ctor(x);\r\n\r\n    // Return zero if both are zero.\r\n    // From IEEE 754 (2008) 6.3: 0 - 0 = -0 - -0 = -0 when rounding to -Infinity.\r\n    else return new Ctor(rm === 3 ? -0 : 0);\r\n\r\n    return external ? finalise(y, pr, rm) : y;\r\n  }\r\n\r\n  // x and y are finite, non-zero numbers with the same sign.\r\n\r\n  // Calculate base 1e7 exponents.\r\n  e = mathfloor(y.e / LOG_BASE);\r\n  xe = mathfloor(x.e / LOG_BASE);\r\n\r\n  xd = xd.slice();\r\n  k = xe - e;\r\n\r\n  // If base 1e7 exponents differ...\r\n  if (k) {\r\n    xLTy = k < 0;\r\n\r\n    if (xLTy) {\r\n      d = xd;\r\n      k = -k;\r\n      len = yd.length;\r\n    } else {\r\n      d = yd;\r\n      e = xe;\r\n      len = xd.length;\r\n    }\r\n\r\n    // Numbers with massively different exponents would result in a very high number of\r\n    // zeros needing to be prepended, but this can be avoided while still ensuring correct\r\n    // rounding by limiting the number of zeros to `Math.ceil(pr / LOG_BASE) + 2`.\r\n    i = Math.max(Math.ceil(pr / LOG_BASE), len) + 2;\r\n\r\n    if (k > i) {\r\n      k = i;\r\n      d.length = 1;\r\n    }\r\n\r\n    // Prepend zeros to equalise exponents.\r\n    d.reverse();\r\n    for (i = k; i--;) d.push(0);\r\n    d.reverse();\r\n\r\n  // Base 1e7 exponents equal.\r\n  } else {\r\n\r\n    // Check digits to determine which is the bigger number.\r\n\r\n    i = xd.length;\r\n    len = yd.length;\r\n    xLTy = i < len;\r\n    if (xLTy) len = i;\r\n\r\n    for (i = 0; i < len; i++) {\r\n      if (xd[i] != yd[i]) {\r\n        xLTy = xd[i] < yd[i];\r\n        break;\r\n      }\r\n    }\r\n\r\n    k = 0;\r\n  }\r\n\r\n  if (xLTy) {\r\n    d = xd;\r\n    xd = yd;\r\n    yd = d;\r\n    y.s = -y.s;\r\n  }\r\n\r\n  len = xd.length;\r\n\r\n  // Append zeros to `xd` if shorter.\r\n  // Don't add zeros to `yd` if shorter as subtraction only needs to start at `yd` length.\r\n  for (i = yd.length - len; i > 0; --i) xd[len++] = 0;\r\n\r\n  // Subtract yd from xd.\r\n  for (i = yd.length; i > k;) {\r\n\r\n    if (xd[--i] < yd[i]) {\r\n      for (j = i; j && xd[--j] === 0;) xd[j] = BASE - 1;\r\n      --xd[j];\r\n      xd[i] += BASE;\r\n    }\r\n\r\n    xd[i] -= yd[i];\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  for (; xd[--len] === 0;) xd.pop();\r\n\r\n  // Remove leading zeros and adjust exponent accordingly.\r\n  for (; xd[0] === 0; xd.shift()) --e;\r\n\r\n  // Zero?\r\n  if (!xd[0]) return new Ctor(rm === 3 ? -0 : 0);\r\n\r\n  y.d = xd;\r\n  y.e = getBase10Exponent(xd, e);\r\n\r\n  return external ? finalise(y, pr, rm) : y;\r\n};\r\n\r\n\r\n/*\r\n *   n % 0 =  N\r\n *   n % N =  N\r\n *   n % I =  n\r\n *   0 % n =  0\r\n *  -0 % n = -0\r\n *   0 % 0 =  N\r\n *   0 % N =  N\r\n *   0 % I =  0\r\n *   N % n =  N\r\n *   N % 0 =  N\r\n *   N % N =  N\r\n *   N % I =  N\r\n *   I % n =  N\r\n *   I % 0 =  N\r\n *   I % N =  N\r\n *   I % I =  N\r\n *\r\n * Return a new Decimal whose value is the value of this Decimal modulo `y`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * The result depends on the modulo mode.\r\n *\r\n */\r\nP.modulo = P.mod = function (y) {\r\n  var q,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  y = new Ctor(y);\r\n\r\n  // Return NaN if x is Infinity or NaN, or y is NaN or 0.\r\n  if (!x.d || !y.s || y.d && !y.d[0]) return new Ctor(NaN);\r\n\r\n  // Return x if y is Infinity or x is 0.\r\n  if (!y.d || x.d && !x.d[0]) {\r\n    return finalise(new Ctor(x), Ctor.precision, Ctor.rounding);\r\n  }\r\n\r\n  // Prevent rounding of intermediate calculations.\r\n  external = false;\r\n\r\n  if (Ctor.modulo == 9) {\r\n\r\n    // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n    // result = x - q * y    where  0 <= result < abs(y)\r\n    q = divide(x, y.abs(), 0, 3, 1);\r\n    q.s *= y.s;\r\n  } else {\r\n    q = divide(x, y, 0, Ctor.modulo, 1);\r\n  }\r\n\r\n  q = q.times(y);\r\n\r\n  external = true;\r\n\r\n  return x.minus(q);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural exponential of the value of this Decimal,\r\n * i.e. the base e raised to the power the value of this Decimal, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.naturalExponential = P.exp = function () {\r\n  return naturalExponential(this);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural logarithm of the value of this Decimal,\r\n * rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.naturalLogarithm = P.ln = function () {\r\n  return naturalLogarithm(this);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal negated, i.e. as if multiplied by\r\n * -1.\r\n *\r\n */\r\nP.negated = P.neg = function () {\r\n  var x = new this.constructor(this);\r\n  x.s = -x.s;\r\n  return finalise(x);\r\n};\r\n\r\n\r\n/*\r\n *  n + 0 = n\r\n *  n + N = N\r\n *  n + I = I\r\n *  0 + n = n\r\n *  0 + 0 = 0\r\n *  0 + N = N\r\n *  0 + I = I\r\n *  N + n = N\r\n *  N + 0 = N\r\n *  N + N = N\r\n *  N + I = N\r\n *  I + n = I\r\n *  I + 0 = I\r\n *  I + N = N\r\n *  I + I = I\r\n *\r\n * Return a new Decimal whose value is the value of this Decimal plus `y`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.plus = P.add = function (y) {\r\n  var carry, d, e, i, k, len, pr, rm, xd, yd,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  y = new Ctor(y);\r\n\r\n  // If either is not finite...\r\n  if (!x.d || !y.d) {\r\n\r\n    // Return NaN if either is NaN.\r\n    if (!x.s || !y.s) y = new Ctor(NaN);\r\n\r\n    // Return x if y is finite and x is Infinity.\r\n    // Return x if both are Infinity with the same sign.\r\n    // Return NaN if both are Infinity with different signs.\r\n    // Return y if x is finite and y is Infinity.\r\n    else if (!x.d) y = new Ctor(y.d || x.s === y.s ? x : NaN);\r\n\r\n    return y;\r\n  }\r\n\r\n   // If signs differ...\r\n  if (x.s != y.s) {\r\n    y.s = -y.s;\r\n    return x.minus(y);\r\n  }\r\n\r\n  xd = x.d;\r\n  yd = y.d;\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n\r\n  // If either is zero...\r\n  if (!xd[0] || !yd[0]) {\r\n\r\n    // Return x if y is zero.\r\n    // Return y if y is non-zero.\r\n    if (!yd[0]) y = new Ctor(x);\r\n\r\n    return external ? finalise(y, pr, rm) : y;\r\n  }\r\n\r\n  // x and y are finite, non-zero numbers with the same sign.\r\n\r\n  // Calculate base 1e7 exponents.\r\n  k = mathfloor(x.e / LOG_BASE);\r\n  e = mathfloor(y.e / LOG_BASE);\r\n\r\n  xd = xd.slice();\r\n  i = k - e;\r\n\r\n  // If base 1e7 exponents differ...\r\n  if (i) {\r\n\r\n    if (i < 0) {\r\n      d = xd;\r\n      i = -i;\r\n      len = yd.length;\r\n    } else {\r\n      d = yd;\r\n      e = k;\r\n      len = xd.length;\r\n    }\r\n\r\n    // Limit number of zeros prepended to max(ceil(pr / LOG_BASE), len) + 1.\r\n    k = Math.ceil(pr / LOG_BASE);\r\n    len = k > len ? k + 1 : len + 1;\r\n\r\n    if (i > len) {\r\n      i = len;\r\n      d.length = 1;\r\n    }\r\n\r\n    // Prepend zeros to equalise exponents. Note: Faster to use reverse then do unshifts.\r\n    d.reverse();\r\n    for (; i--;) d.push(0);\r\n    d.reverse();\r\n  }\r\n\r\n  len = xd.length;\r\n  i = yd.length;\r\n\r\n  // If yd is longer than xd, swap xd and yd so xd points to the longer array.\r\n  if (len - i < 0) {\r\n    i = len;\r\n    d = yd;\r\n    yd = xd;\r\n    xd = d;\r\n  }\r\n\r\n  // Only start adding at yd.length - 1 as the further digits of xd can be left as they are.\r\n  for (carry = 0; i;) {\r\n    carry = (xd[--i] = xd[i] + yd[i] + carry) / BASE | 0;\r\n    xd[i] %= BASE;\r\n  }\r\n\r\n  if (carry) {\r\n    xd.unshift(carry);\r\n    ++e;\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n  for (len = xd.length; xd[--len] == 0;) xd.pop();\r\n\r\n  y.d = xd;\r\n  y.e = getBase10Exponent(xd, e);\r\n\r\n  return external ? finalise(y, pr, rm) : y;\r\n};\r\n\r\n\r\n/*\r\n * Return the number of significant digits of the value of this Decimal.\r\n *\r\n * [z] {boolean|number} Whether to count integer-part trailing zeros: true, false, 1 or 0.\r\n *\r\n */\r\nP.precision = P.sd = function (z) {\r\n  var k,\r\n    x = this;\r\n\r\n  if (z !== void 0 && z !== !!z && z !== 1 && z !== 0) throw Error(invalidArgument + z);\r\n\r\n  if (x.d) {\r\n    k = getPrecision(x.d);\r\n    if (z && x.e + 1 > k) k = x.e + 1;\r\n  } else {\r\n    k = NaN;\r\n  }\r\n\r\n  return k;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a whole number using\r\n * rounding mode `rounding`.\r\n *\r\n */\r\nP.round = function () {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n\r\n  return finalise(new Ctor(x), x.e + 1, Ctor.rounding);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the sine of the value in radians of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-1, 1]\r\n *\r\n * sin(x) = x - x^3/3! + x^5/5! - ...\r\n *\r\n * sin(0)         = 0\r\n * sin(-0)        = -0\r\n * sin(Infinity)  = NaN\r\n * sin(-Infinity) = NaN\r\n * sin(NaN)       = NaN\r\n *\r\n */\r\nP.sine = P.sin = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite()) return new Ctor(NaN);\r\n  if (x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(x.e, x.sd()) + LOG_BASE;\r\n  Ctor.rounding = 1;\r\n\r\n  x = sine(Ctor, toLessThanHalfPi(Ctor, x));\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(quadrant > 2 ? x.neg() : x, pr, rm, true);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the square root of this Decimal, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n *  sqrt(-n) =  N\r\n *  sqrt(N)  =  N\r\n *  sqrt(-I) =  N\r\n *  sqrt(I)  =  I\r\n *  sqrt(0)  =  0\r\n *  sqrt(-0) = -0\r\n *\r\n */\r\nP.squareRoot = P.sqrt = function () {\r\n  var m, n, sd, r, rep, t,\r\n    x = this,\r\n    d = x.d,\r\n    e = x.e,\r\n    s = x.s,\r\n    Ctor = x.constructor;\r\n\r\n  // Negative/NaN/Infinity/zero?\r\n  if (s !== 1 || !d || !d[0]) {\r\n    return new Ctor(!s || s < 0 && (!d || d[0]) ? NaN : d ? x : 1 / 0);\r\n  }\r\n\r\n  external = false;\r\n\r\n  // Initial estimate.\r\n  s = Math.sqrt(+x);\r\n\r\n  // Math.sqrt underflow/overflow?\r\n  // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n  if (s == 0 || s == 1 / 0) {\r\n    n = digitsToString(d);\r\n\r\n    if ((n.length + e) % 2 == 0) n += '0';\r\n    s = Math.sqrt(n);\r\n    e = mathfloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n    if (s == 1 / 0) {\r\n      n = '5e' + e;\r\n    } else {\r\n      n = s.toExponential();\r\n      n = n.slice(0, n.indexOf('e') + 1) + e;\r\n    }\r\n\r\n    r = new Ctor(n);\r\n  } else {\r\n    r = new Ctor(s.toString());\r\n  }\r\n\r\n  sd = (e = Ctor.precision) + 3;\r\n\r\n  // Newton-Raphson iteration.\r\n  for (;;) {\r\n    t = r;\r\n    r = t.plus(divide(x, t, sd + 2, 1)).times(0.5);\r\n\r\n    // TODO? Replace with for-loop and checkRoundingDigits.\r\n    if (digitsToString(t.d).slice(0, sd) === (n = digitsToString(r.d)).slice(0, sd)) {\r\n      n = n.slice(sd - 3, sd + 1);\r\n\r\n      // The 4th rounding digit may be in error by -1 so if the 4 rounding digits are 9999 or\r\n      // 4999, i.e. approaching a rounding boundary, continue the iteration.\r\n      if (n == '9999' || !rep && n == '4999') {\r\n\r\n        // On the first iteration only, check to see if rounding up gives the exact result as the\r\n        // nines may infinitely repeat.\r\n        if (!rep) {\r\n          finalise(t, e + 1, 0);\r\n\r\n          if (t.times(t).eq(x)) {\r\n            r = t;\r\n            break;\r\n          }\r\n        }\r\n\r\n        sd += 4;\r\n        rep = 1;\r\n      } else {\r\n\r\n        // If the rounding digits are null, 0{0,4} or 50{0,3}, check for an exact result.\r\n        // If not, then there are further digits and m will be truthy.\r\n        if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n          // Truncate to the first rounding digit.\r\n          finalise(r, e + 1, 1);\r\n          m = !r.times(r).eq(x);\r\n        }\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  external = true;\r\n\r\n  return finalise(r, e, Ctor.rounding, m);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the tangent of the value in radians of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-Infinity, Infinity]\r\n *\r\n * tan(0)         = 0\r\n * tan(-0)        = -0\r\n * tan(Infinity)  = NaN\r\n * tan(-Infinity) = NaN\r\n * tan(NaN)       = NaN\r\n *\r\n */\r\nP.tangent = P.tan = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite()) return new Ctor(NaN);\r\n  if (x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + 10;\r\n  Ctor.rounding = 1;\r\n\r\n  x = x.sin();\r\n  x.s = 1;\r\n  x = divide(x, new Ctor(1).minus(x.times(x)).sqrt(), pr + 10, 0);\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(quadrant == 2 || quadrant == 4 ? x.neg() : x, pr, rm, true);\r\n};\r\n\r\n\r\n/*\r\n *  n * 0 = 0\r\n *  n * N = N\r\n *  n * I = I\r\n *  0 * n = 0\r\n *  0 * 0 = 0\r\n *  0 * N = N\r\n *  0 * I = N\r\n *  N * n = N\r\n *  N * 0 = N\r\n *  N * N = N\r\n *  N * I = N\r\n *  I * n = I\r\n *  I * 0 = N\r\n *  I * N = N\r\n *  I * I = I\r\n *\r\n * Return a new Decimal whose value is this Decimal times `y`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.times = P.mul = function (y) {\r\n  var carry, e, i, k, r, rL, t, xdL, ydL,\r\n    x = this,\r\n    Ctor = x.constructor,\r\n    xd = x.d,\r\n    yd = (y = new Ctor(y)).d;\r\n\r\n  y.s *= x.s;\r\n\r\n   // If either is NaN, Infinity or 0...\r\n  if (!xd || !xd[0] || !yd || !yd[0]) {\r\n\r\n    return new Ctor(!y.s || xd && !xd[0] && !yd || yd && !yd[0] && !xd\r\n\r\n      // Return NaN if either is NaN.\r\n      // Return NaN if x is 0 and y is Infinity, or y is 0 and x is Infinity.\r\n      ? NaN\r\n\r\n      // Return Infinity if either is Infinity.\r\n      // Return 0 if either is 0.\r\n      : !xd || !yd ? y.s / 0 : y.s * 0);\r\n  }\r\n\r\n  e = mathfloor(x.e / LOG_BASE) + mathfloor(y.e / LOG_BASE);\r\n  xdL = xd.length;\r\n  ydL = yd.length;\r\n\r\n  // Ensure xd points to the longer array.\r\n  if (xdL < ydL) {\r\n    r = xd;\r\n    xd = yd;\r\n    yd = r;\r\n    rL = xdL;\r\n    xdL = ydL;\r\n    ydL = rL;\r\n  }\r\n\r\n  // Initialise the result array with zeros.\r\n  r = [];\r\n  rL = xdL + ydL;\r\n  for (i = rL; i--;) r.push(0);\r\n\r\n  // Multiply!\r\n  for (i = ydL; --i >= 0;) {\r\n    carry = 0;\r\n    for (k = xdL + i; k > i;) {\r\n      t = r[k] + yd[i] * xd[k - i - 1] + carry;\r\n      r[k--] = t % BASE | 0;\r\n      carry = t / BASE | 0;\r\n    }\r\n\r\n    r[k] = (r[k] + carry) % BASE | 0;\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  for (; !r[--rL];) r.pop();\r\n\r\n  if (carry) ++e;\r\n  else r.shift();\r\n\r\n  y.d = r;\r\n  y.e = getBase10Exponent(r, e);\r\n\r\n  return external ? finalise(y, Ctor.precision, Ctor.rounding) : y;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in base 2, round to `sd` significant\r\n * digits using rounding mode `rm`.\r\n *\r\n * If the optional `sd` argument is present then return binary exponential notation.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toBinary = function (sd, rm) {\r\n  return toStringBinary(this, 2, sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a maximum of `dp`\r\n * decimal places using rounding mode `rm` or `rounding` if `rm` is omitted.\r\n *\r\n * If `dp` is omitted, return a new Decimal whose value is the value of this Decimal.\r\n *\r\n * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toDecimalPlaces = P.toDP = function (dp, rm) {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n\r\n  x = new Ctor(x);\r\n  if (dp === void 0) return x;\r\n\r\n  checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n  if (rm === void 0) rm = Ctor.rounding;\r\n  else checkInt32(rm, 0, 8);\r\n\r\n  return finalise(x, dp + x.e + 1, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in exponential notation rounded to\r\n * `dp` fixed decimal places using rounding mode `rounding`.\r\n *\r\n * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toExponential = function (dp, rm) {\r\n  var str,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (dp === void 0) {\r\n    str = finiteToString(x, true);\r\n  } else {\r\n    checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n\r\n    x = finalise(new Ctor(x), dp + 1, rm);\r\n    str = finiteToString(x, true, dp + 1);\r\n  }\r\n\r\n  return x.isNeg() && !x.isZero() ? '-' + str : str;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in normal (fixed-point) notation to\r\n * `dp` fixed decimal places and rounded using rounding mode `rm` or `rounding` if `rm` is\r\n * omitted.\r\n *\r\n * As with JavaScript numbers, (-0).toFixed(0) is '0', but e.g. (-0.00001).toFixed(0) is '-0'.\r\n *\r\n * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\r\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\r\n * (-0).toFixed(3) is '0.000'.\r\n * (-0.5).toFixed(0) is '-0'.\r\n *\r\n */\r\nP.toFixed = function (dp, rm) {\r\n  var str, y,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (dp === void 0) {\r\n    str = finiteToString(x);\r\n  } else {\r\n    checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n\r\n    y = finalise(new Ctor(x), dp + x.e + 1, rm);\r\n    str = finiteToString(y, false, dp + y.e + 1);\r\n  }\r\n\r\n  // To determine whether to add the minus sign look at the value before it was rounded,\r\n  // i.e. look at `x` rather than `y`.\r\n  return x.isNeg() && !x.isZero() ? '-' + str : str;\r\n};\r\n\r\n\r\n/*\r\n * Return an array representing the value of this Decimal as a simple fraction with an integer\r\n * numerator and an integer denominator.\r\n *\r\n * The denominator will be a positive non-zero value less than or equal to the specified maximum\r\n * denominator. If a maximum denominator is not specified, the denominator will be the lowest\r\n * value necessary to represent the number exactly.\r\n *\r\n * [maxD] {number|string|bigint|Decimal} Maximum denominator. Integer >= 1 and < Infinity.\r\n *\r\n */\r\nP.toFraction = function (maxD) {\r\n  var d, d0, d1, d2, e, k, n, n0, n1, pr, q, r,\r\n    x = this,\r\n    xd = x.d,\r\n    Ctor = x.constructor;\r\n\r\n  if (!xd) return new Ctor(x);\r\n\r\n  n1 = d0 = new Ctor(1);\r\n  d1 = n0 = new Ctor(0);\r\n\r\n  d = new Ctor(d1);\r\n  e = d.e = getPrecision(xd) - x.e - 1;\r\n  k = e % LOG_BASE;\r\n  d.d[0] = mathpow(10, k < 0 ? LOG_BASE + k : k);\r\n\r\n  if (maxD == null) {\r\n\r\n    // d is 10**e, the minimum max-denominator needed.\r\n    maxD = e > 0 ? d : n1;\r\n  } else {\r\n    n = new Ctor(maxD);\r\n    if (!n.isInt() || n.lt(n1)) throw Error(invalidArgument + n);\r\n    maxD = n.gt(d) ? (e > 0 ? d : n1) : n;\r\n  }\r\n\r\n  external = false;\r\n  n = new Ctor(digitsToString(xd));\r\n  pr = Ctor.precision;\r\n  Ctor.precision = e = xd.length * LOG_BASE * 2;\r\n\r\n  for (;;)  {\r\n    q = divide(n, d, 0, 1, 1);\r\n    d2 = d0.plus(q.times(d1));\r\n    if (d2.cmp(maxD) == 1) break;\r\n    d0 = d1;\r\n    d1 = d2;\r\n    d2 = n1;\r\n    n1 = n0.plus(q.times(d2));\r\n    n0 = d2;\r\n    d2 = d;\r\n    d = n.minus(q.times(d2));\r\n    n = d2;\r\n  }\r\n\r\n  d2 = divide(maxD.minus(d0), d1, 0, 1, 1);\r\n  n0 = n0.plus(d2.times(n1));\r\n  d0 = d0.plus(d2.times(d1));\r\n  n0.s = n1.s = x.s;\r\n\r\n  // Determine which fraction is closer to x, n0/d0 or n1/d1?\r\n  r = divide(n1, d1, e, 1).minus(x).abs().cmp(divide(n0, d0, e, 1).minus(x).abs()) < 1\r\n      ? [n1, d1] : [n0, d0];\r\n\r\n  Ctor.precision = pr;\r\n  external = true;\r\n\r\n  return r;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in base 16, round to `sd` significant\r\n * digits using rounding mode `rm`.\r\n *\r\n * If the optional `sd` argument is present then return binary exponential notation.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toHexadecimal = P.toHex = function (sd, rm) {\r\n  return toStringBinary(this, 16, sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Returns a new Decimal whose value is the nearest multiple of `y` in the direction of rounding\r\n * mode `rm`, or `Decimal.rounding` if `rm` is omitted, to the value of this Decimal.\r\n *\r\n * The return value will always have the same sign as this Decimal, unless either this Decimal\r\n * or `y` is NaN, in which case the return value will be also be NaN.\r\n *\r\n * The return value is not affected by the value of `precision`.\r\n *\r\n * y {number|string|bigint|Decimal} The magnitude to round to a multiple of.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n * 'toNearest() rounding mode not an integer: {rm}'\r\n * 'toNearest() rounding mode out of range: {rm}'\r\n *\r\n */\r\nP.toNearest = function (y, rm) {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n\r\n  x = new Ctor(x);\r\n\r\n  if (y == null) {\r\n\r\n    // If x is not finite, return x.\r\n    if (!x.d) return x;\r\n\r\n    y = new Ctor(1);\r\n    rm = Ctor.rounding;\r\n  } else {\r\n    y = new Ctor(y);\r\n    if (rm === void 0) {\r\n      rm = Ctor.rounding;\r\n    } else {\r\n      checkInt32(rm, 0, 8);\r\n    }\r\n\r\n    // If x is not finite, return x if y is not NaN, else NaN.\r\n    if (!x.d) return y.s ? x : y;\r\n\r\n    // If y is not finite, return Infinity with the sign of x if y is Infinity, else NaN.\r\n    if (!y.d) {\r\n      if (y.s) y.s = x.s;\r\n      return y;\r\n    }\r\n  }\r\n\r\n  // If y is not zero, calculate the nearest multiple of y to x.\r\n  if (y.d[0]) {\r\n    external = false;\r\n    x = divide(x, y, 0, rm, 1).times(y);\r\n    external = true;\r\n    finalise(x);\r\n\r\n  // If y is zero, return zero with the sign of x.\r\n  } else {\r\n    y.s = x.s;\r\n    x = y;\r\n  }\r\n\r\n  return x;\r\n};\r\n\r\n\r\n/*\r\n * Return the value of this Decimal converted to a number primitive.\r\n * Zero keeps its sign.\r\n *\r\n */\r\nP.toNumber = function () {\r\n  return +this;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in base 8, round to `sd` significant\r\n * digits using rounding mode `rm`.\r\n *\r\n * If the optional `sd` argument is present then return binary exponential notation.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toOctal = function (sd, rm) {\r\n  return toStringBinary(this, 8, sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal raised to the power `y`, rounded\r\n * to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * ECMAScript compliant.\r\n *\r\n *   pow(x, NaN)                           = NaN\r\n *   pow(x, 0)                            = 1\r\n\r\n *   pow(NaN, non-zero)                    = NaN\r\n *   pow(abs(x) > 1, +Infinity)            = +Infinity\r\n *   pow(abs(x) > 1, -Infinity)            = +0\r\n *   pow(abs(x) == 1, Infinity)           = NaN\r\n *   pow(abs(x) < 1, +Infinity)            = +0\r\n *   pow(abs(x) < 1, -Infinity)            = +Infinity\r\n *   pow(+Infinity, y > 0)                 = +Infinity\r\n *   pow(+Infinity, y < 0)                 = +0\r\n *   pow(-Infinity, odd integer > 0)       = -Infinity\r\n *   pow(-Infinity, even integer > 0)      = +Infinity\r\n *   pow(-Infinity, odd integer < 0)       = -0\r\n *   pow(-Infinity, even integer < 0)      = +0\r\n *   pow(+0, y > 0)                        = +0\r\n *   pow(+0, y < 0)                        = +Infinity\r\n *   pow(-0, odd integer > 0)              = -0\r\n *   pow(-0, even integer > 0)             = +0\r\n *   pow(-0, odd integer < 0)              = -Infinity\r\n *   pow(-0, even integer < 0)             = +Infinity\r\n *   pow(finite x < 0, finite non-integer) = NaN\r\n *\r\n * For non-integer or very large exponents pow(x, y) is calculated using\r\n *\r\n *   x^y = exp(y*ln(x))\r\n *\r\n * Assuming the first 15 rounding digits are each equally likely to be any digit 0-9, the\r\n * probability of an incorrectly rounded result\r\n * P([49]9{14} | [50]0{14}) = 2 * 0.2 * 10^-14 = 4e-15 = 1/2.5e+14\r\n * i.e. 1 in 250,000,000,000,000\r\n *\r\n * If a result is incorrectly rounded the maximum error will be 1 ulp (unit in last place).\r\n *\r\n * y {number|string|bigint|Decimal} The power to which to raise this Decimal.\r\n *\r\n */\r\nP.toPower = P.pow = function (y) {\r\n  var e, k, pr, r, rm, s,\r\n    x = this,\r\n    Ctor = x.constructor,\r\n    yn = +(y = new Ctor(y));\r\n\r\n  // Either Infinity, NaN or 0?\r\n  if (!x.d || !y.d || !x.d[0] || !y.d[0]) return new Ctor(mathpow(+x, yn));\r\n\r\n  x = new Ctor(x);\r\n\r\n  if (x.eq(1)) return x;\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n\r\n  if (y.eq(1)) return finalise(x, pr, rm);\r\n\r\n  // y exponent\r\n  e = mathfloor(y.e / LOG_BASE);\r\n\r\n  // If y is a small integer use the 'exponentiation by squaring' algorithm.\r\n  if (e >= y.d.length - 1 && (k = yn < 0 ? -yn : yn) <= MAX_SAFE_INTEGER) {\r\n    r = intPow(Ctor, x, k, pr);\r\n    return y.s < 0 ? new Ctor(1).div(r) : finalise(r, pr, rm);\r\n  }\r\n\r\n  s = x.s;\r\n\r\n  // if x is negative\r\n  if (s < 0) {\r\n\r\n    // if y is not an integer\r\n    if (e < y.d.length - 1) return new Ctor(NaN);\r\n\r\n    // Result is positive if x is negative and the last digit of integer y is even.\r\n    if ((y.d[e] & 1) == 0) s = 1;\r\n\r\n    // if x.eq(-1)\r\n    if (x.e == 0 && x.d[0] == 1 && x.d.length == 1) {\r\n      x.s = s;\r\n      return x;\r\n    }\r\n  }\r\n\r\n  // Estimate result exponent.\r\n  // x^y = 10^e,  where e = y * log10(x)\r\n  // log10(x) = log10(x_significand) + x_exponent\r\n  // log10(x_significand) = ln(x_significand) / ln(10)\r\n  k = mathpow(+x, yn);\r\n  e = k == 0 || !isFinite(k)\r\n    ? mathfloor(yn * (Math.log('0.' + digitsToString(x.d)) / Math.LN10 + x.e + 1))\r\n    : new Ctor(k + '').e;\r\n\r\n  // Exponent estimate may be incorrect e.g. x: 0.999999999999999999, y: 2.29, e: 0, r.e: -1.\r\n\r\n  // Overflow/underflow?\r\n  if (e > Ctor.maxE + 1 || e < Ctor.minE - 1) return new Ctor(e > 0 ? s / 0 : 0);\r\n\r\n  external = false;\r\n  Ctor.rounding = x.s = 1;\r\n\r\n  // Estimate the extra guard digits needed to ensure five correct rounding digits from\r\n  // naturalLogarithm(x). Example of failure without these extra digits (precision: 10):\r\n  // new Decimal(2.32456).pow('2087987436534566.46411')\r\n  // should be 1.162377823e+764914905173815, but is 1.162355823e+764914905173815\r\n  k = Math.min(12, (e + '').length);\r\n\r\n  // r = x^y = exp(y*ln(x))\r\n  r = naturalExponential(y.times(naturalLogarithm(x, pr + k)), pr);\r\n\r\n  // r may be Infinity, e.g. (0.9999999999999999).pow(-1e+40)\r\n  if (r.d) {\r\n\r\n    // Truncate to the required precision plus five rounding digits.\r\n    r = finalise(r, pr + 5, 1);\r\n\r\n    // If the rounding digits are [49]9999 or [50]0000 increase the precision by 10 and recalculate\r\n    // the result.\r\n    if (checkRoundingDigits(r.d, pr, rm)) {\r\n      e = pr + 10;\r\n\r\n      // Truncate to the increased precision plus five rounding digits.\r\n      r = finalise(naturalExponential(y.times(naturalLogarithm(x, e + k)), e), e + 5, 1);\r\n\r\n      // Check for 14 nines from the 2nd rounding digit (the first rounding digit may be 4 or 9).\r\n      if (+digitsToString(r.d).slice(pr + 1, pr + 15) + 1 == 1e14) {\r\n        r = finalise(r, pr + 1, 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  r.s = s;\r\n  external = true;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(r, pr, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal rounded to `sd` significant digits\r\n * using rounding mode `rounding`.\r\n *\r\n * Return exponential notation if `sd` is less than the number of digits necessary to represent\r\n * the integer part of the value in normal notation.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toPrecision = function (sd, rm) {\r\n  var str,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (sd === void 0) {\r\n    str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);\r\n  } else {\r\n    checkInt32(sd, 1, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n\r\n    x = finalise(new Ctor(x), sd, rm);\r\n    str = finiteToString(x, sd <= x.e || x.e <= Ctor.toExpNeg, sd);\r\n  }\r\n\r\n  return x.isNeg() && !x.isZero() ? '-' + str : str;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a maximum of `sd`\r\n * significant digits using rounding mode `rm`, or to `precision` and `rounding` respectively if\r\n * omitted.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n * 'toSD() digits out of range: {sd}'\r\n * 'toSD() digits not an integer: {sd}'\r\n * 'toSD() rounding mode not an integer: {rm}'\r\n * 'toSD() rounding mode out of range: {rm}'\r\n *\r\n */\r\nP.toSignificantDigits = P.toSD = function (sd, rm) {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (sd === void 0) {\r\n    sd = Ctor.precision;\r\n    rm = Ctor.rounding;\r\n  } else {\r\n    checkInt32(sd, 1, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n  }\r\n\r\n  return finalise(new Ctor(x), sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal.\r\n *\r\n * Return exponential notation if this Decimal has a positive exponent equal to or greater than\r\n * `toExpPos`, or a negative exponent equal to or less than `toExpNeg`.\r\n *\r\n */\r\nP.toString = function () {\r\n  var x = this,\r\n    Ctor = x.constructor,\r\n    str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);\r\n\r\n  return x.isNeg() && !x.isZero() ? '-' + str : str;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal truncated to a whole number.\r\n *\r\n */\r\nP.truncated = P.trunc = function () {\r\n  return finalise(new this.constructor(this), this.e + 1, 1);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal.\r\n * Unlike `toString`, negative zero will include the minus sign.\r\n *\r\n */\r\nP.valueOf = P.toJSON = function () {\r\n  var x = this,\r\n    Ctor = x.constructor,\r\n    str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);\r\n\r\n  return x.isNeg() ? '-' + str : str;\r\n};\r\n\r\n\r\n// Helper functions for Decimal.prototype (P) and/or Decimal methods, and their callers.\r\n\r\n\r\n/*\r\n *  digitsToString           P.cubeRoot, P.logarithm, P.squareRoot, P.toFraction, P.toPower,\r\n *                           finiteToString, naturalExponential, naturalLogarithm\r\n *  checkInt32               P.toDecimalPlaces, P.toExponential, P.toFixed, P.toNearest,\r\n *                           P.toPrecision, P.toSignificantDigits, toStringBinary, random\r\n *  checkRoundingDigits      P.logarithm, P.toPower, naturalExponential, naturalLogarithm\r\n *  convertBase              toStringBinary, parseOther\r\n *  cos                      P.cos\r\n *  divide                   P.atanh, P.cubeRoot, P.dividedBy, P.dividedToIntegerBy,\r\n *                           P.logarithm, P.modulo, P.squareRoot, P.tan, P.tanh, P.toFraction,\r\n *                           P.toNearest, toStringBinary, naturalExponential, naturalLogarithm,\r\n *                           taylorSeries, atan2, parseOther\r\n *  finalise                 P.absoluteValue, P.atan, P.atanh, P.ceil, P.cos, P.cosh,\r\n *                           P.cubeRoot, P.dividedToIntegerBy, P.floor, P.logarithm, P.minus,\r\n *                           P.modulo, P.negated, P.plus, P.round, P.sin, P.sinh, P.squareRoot,\r\n *                           P.tan, P.times, P.toDecimalPlaces, P.toExponential, P.toFixed,\r\n *                           P.toNearest, P.toPower, P.toPrecision, P.toSignificantDigits,\r\n *                           P.truncated, divide, getLn10, getPi, naturalExponential,\r\n *                           naturalLogarithm, ceil, floor, round, trunc\r\n *  finiteToString           P.toExponential, P.toFixed, P.toPrecision, P.toString, P.valueOf,\r\n *                           toStringBinary\r\n *  getBase10Exponent        P.minus, P.plus, P.times, parseOther\r\n *  getLn10                  P.logarithm, naturalLogarithm\r\n *  getPi                    P.acos, P.asin, P.atan, toLessThanHalfPi, atan2\r\n *  getPrecision             P.precision, P.toFraction\r\n *  getZeroString            digitsToString, finiteToString\r\n *  intPow                   P.toPower, parseOther\r\n *  isOdd                    toLessThanHalfPi\r\n *  maxOrMin                 max, min\r\n *  naturalExponential       P.naturalExponential, P.toPower\r\n *  naturalLogarithm         P.acosh, P.asinh, P.atanh, P.logarithm, P.naturalLogarithm,\r\n *                           P.toPower, naturalExponential\r\n *  nonFiniteToString        finiteToString, toStringBinary\r\n *  parseDecimal             Decimal\r\n *  parseOther               Decimal\r\n *  sin                      P.sin\r\n *  taylorSeries             P.cosh, P.sinh, cos, sin\r\n *  toLessThanHalfPi         P.cos, P.sin\r\n *  toStringBinary           P.toBinary, P.toHexadecimal, P.toOctal\r\n *  truncate                 intPow\r\n *\r\n *  Throws:                  P.logarithm, P.precision, P.toFraction, checkInt32, getLn10, getPi,\r\n *                           naturalLogarithm, config, parseOther, random, Decimal\r\n */\r\n\r\n\r\nfunction digitsToString(d) {\r\n  var i, k, ws,\r\n    indexOfLastWord = d.length - 1,\r\n    str = '',\r\n    w = d[0];\r\n\r\n  if (indexOfLastWord > 0) {\r\n    str += w;\r\n    for (i = 1; i < indexOfLastWord; i++) {\r\n      ws = d[i] + '';\r\n      k = LOG_BASE - ws.length;\r\n      if (k) str += getZeroString(k);\r\n      str += ws;\r\n    }\r\n\r\n    w = d[i];\r\n    ws = w + '';\r\n    k = LOG_BASE - ws.length;\r\n    if (k) str += getZeroString(k);\r\n  } else if (w === 0) {\r\n    return '0';\r\n  }\r\n\r\n  // Remove trailing zeros of last w.\r\n  for (; w % 10 === 0;) w /= 10;\r\n\r\n  return str + w;\r\n}\r\n\r\n\r\nfunction checkInt32(i, min, max) {\r\n  if (i !== ~~i || i < min || i > max) {\r\n    throw Error(invalidArgument + i);\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Check 5 rounding digits if `repeating` is null, 4 otherwise.\r\n * `repeating == null` if caller is `log` or `pow`,\r\n * `repeating != null` if caller is `naturalLogarithm` or `naturalExponential`.\r\n */\r\nfunction checkRoundingDigits(d, i, rm, repeating) {\r\n  var di, k, r, rd;\r\n\r\n  // Get the length of the first word of the array d.\r\n  for (k = d[0]; k >= 10; k /= 10) --i;\r\n\r\n  // Is the rounding digit in the first word of d?\r\n  if (--i < 0) {\r\n    i += LOG_BASE;\r\n    di = 0;\r\n  } else {\r\n    di = Math.ceil((i + 1) / LOG_BASE);\r\n    i %= LOG_BASE;\r\n  }\r\n\r\n  // i is the index (0 - 6) of the rounding digit.\r\n  // E.g. if within the word 3487563 the first rounding digit is 5,\r\n  // then i = 4, k = 1000, rd = 3487563 % 1000 = 563\r\n  k = mathpow(10, LOG_BASE - i);\r\n  rd = d[di] % k | 0;\r\n\r\n  if (repeating == null) {\r\n    if (i < 3) {\r\n      if (i == 0) rd = rd / 100 | 0;\r\n      else if (i == 1) rd = rd / 10 | 0;\r\n      r = rm < 4 && rd == 99999 || rm > 3 && rd == 49999 || rd == 50000 || rd == 0;\r\n    } else {\r\n      r = (rm < 4 && rd + 1 == k || rm > 3 && rd + 1 == k / 2) &&\r\n        (d[di + 1] / k / 100 | 0) == mathpow(10, i - 2) - 1 ||\r\n          (rd == k / 2 || rd == 0) && (d[di + 1] / k / 100 | 0) == 0;\r\n    }\r\n  } else {\r\n    if (i < 4) {\r\n      if (i == 0) rd = rd / 1000 | 0;\r\n      else if (i == 1) rd = rd / 100 | 0;\r\n      else if (i == 2) rd = rd / 10 | 0;\r\n      r = (repeating || rm < 4) && rd == 9999 || !repeating && rm > 3 && rd == 4999;\r\n    } else {\r\n      r = ((repeating || rm < 4) && rd + 1 == k ||\r\n      (!repeating && rm > 3) && rd + 1 == k / 2) &&\r\n        (d[di + 1] / k / 1000 | 0) == mathpow(10, i - 3) - 1;\r\n    }\r\n  }\r\n\r\n  return r;\r\n}\r\n\r\n\r\n// Convert string of `baseIn` to an array of numbers of `baseOut`.\r\n// Eg. convertBase('255', 10, 16) returns [15, 15].\r\n// Eg. convertBase('ff', 16, 10) returns [2, 5, 5].\r\nfunction convertBase(str, baseIn, baseOut) {\r\n  var j,\r\n    arr = [0],\r\n    arrL,\r\n    i = 0,\r\n    strL = str.length;\r\n\r\n  for (; i < strL;) {\r\n    for (arrL = arr.length; arrL--;) arr[arrL] *= baseIn;\r\n    arr[0] += NUMERALS.indexOf(str.charAt(i++));\r\n    for (j = 0; j < arr.length; j++) {\r\n      if (arr[j] > baseOut - 1) {\r\n        if (arr[j + 1] === void 0) arr[j + 1] = 0;\r\n        arr[j + 1] += arr[j] / baseOut | 0;\r\n        arr[j] %= baseOut;\r\n      }\r\n    }\r\n  }\r\n\r\n  return arr.reverse();\r\n}\r\n\r\n\r\n/*\r\n * cos(x) = 1 - x^2/2! + x^4/4! - ...\r\n * |x| < pi/2\r\n *\r\n */\r\nfunction cosine(Ctor, x) {\r\n  var k, len, y;\r\n\r\n  if (x.isZero()) return x;\r\n\r\n  // Argument reduction: cos(4x) = 8*(cos^4(x) - cos^2(x)) + 1\r\n  // i.e. cos(x) = 8*(cos^4(x/4) - cos^2(x/4)) + 1\r\n\r\n  // Estimate the optimum number of times to use the argument reduction.\r\n  len = x.d.length;\r\n  if (len < 32) {\r\n    k = Math.ceil(len / 3);\r\n    y = (1 / tinyPow(4, k)).toString();\r\n  } else {\r\n    k = 16;\r\n    y = '2.3283064365386962890625e-10';\r\n  }\r\n\r\n  Ctor.precision += k;\r\n\r\n  x = taylorSeries(Ctor, 1, x.times(y), new Ctor(1));\r\n\r\n  // Reverse argument reduction\r\n  for (var i = k; i--;) {\r\n    var cos2x = x.times(x);\r\n    x = cos2x.times(cos2x).minus(cos2x).times(8).plus(1);\r\n  }\r\n\r\n  Ctor.precision -= k;\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Perform division in the specified base.\r\n */\r\nvar divide = (function () {\r\n\r\n  // Assumes non-zero x and k, and hence non-zero result.\r\n  function multiplyInteger(x, k, base) {\r\n    var temp,\r\n      carry = 0,\r\n      i = x.length;\r\n\r\n    for (x = x.slice(); i--;) {\r\n      temp = x[i] * k + carry;\r\n      x[i] = temp % base | 0;\r\n      carry = temp / base | 0;\r\n    }\r\n\r\n    if (carry) x.unshift(carry);\r\n\r\n    return x;\r\n  }\r\n\r\n  function compare(a, b, aL, bL) {\r\n    var i, r;\r\n\r\n    if (aL != bL) {\r\n      r = aL > bL ? 1 : -1;\r\n    } else {\r\n      for (i = r = 0; i < aL; i++) {\r\n        if (a[i] != b[i]) {\r\n          r = a[i] > b[i] ? 1 : -1;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return r;\r\n  }\r\n\r\n  function subtract(a, b, aL, base) {\r\n    var i = 0;\r\n\r\n    // Subtract b from a.\r\n    for (; aL--;) {\r\n      a[aL] -= i;\r\n      i = a[aL] < b[aL] ? 1 : 0;\r\n      a[aL] = i * base + a[aL] - b[aL];\r\n    }\r\n\r\n    // Remove leading zeros.\r\n    for (; !a[0] && a.length > 1;) a.shift();\r\n  }\r\n\r\n  return function (x, y, pr, rm, dp, base) {\r\n    var cmp, e, i, k, logBase, more, prod, prodL, q, qd, rem, remL, rem0, sd, t, xi, xL, yd0,\r\n      yL, yz,\r\n      Ctor = x.constructor,\r\n      sign = x.s == y.s ? 1 : -1,\r\n      xd = x.d,\r\n      yd = y.d;\r\n\r\n    // Either NaN, Infinity or 0?\r\n    if (!xd || !xd[0] || !yd || !yd[0]) {\r\n\r\n      return new Ctor(// Return NaN if either NaN, or both Infinity or 0.\r\n        !x.s || !y.s || (xd ? yd && xd[0] == yd[0] : !yd) ? NaN :\r\n\r\n        // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.\r\n        xd && xd[0] == 0 || !yd ? sign * 0 : sign / 0);\r\n    }\r\n\r\n    if (base) {\r\n      logBase = 1;\r\n      e = x.e - y.e;\r\n    } else {\r\n      base = BASE;\r\n      logBase = LOG_BASE;\r\n      e = mathfloor(x.e / logBase) - mathfloor(y.e / logBase);\r\n    }\r\n\r\n    yL = yd.length;\r\n    xL = xd.length;\r\n    q = new Ctor(sign);\r\n    qd = q.d = [];\r\n\r\n    // Result exponent may be one less than e.\r\n    // The digit array of a Decimal from toStringBinary may have trailing zeros.\r\n    for (i = 0; yd[i] == (xd[i] || 0); i++);\r\n\r\n    if (yd[i] > (xd[i] || 0)) e--;\r\n\r\n    if (pr == null) {\r\n      sd = pr = Ctor.precision;\r\n      rm = Ctor.rounding;\r\n    } else if (dp) {\r\n      sd = pr + (x.e - y.e) + 1;\r\n    } else {\r\n      sd = pr;\r\n    }\r\n\r\n    if (sd < 0) {\r\n      qd.push(1);\r\n      more = true;\r\n    } else {\r\n\r\n      // Convert precision in number of base 10 digits to base 1e7 digits.\r\n      sd = sd / logBase + 2 | 0;\r\n      i = 0;\r\n\r\n      // divisor < 1e7\r\n      if (yL == 1) {\r\n        k = 0;\r\n        yd = yd[0];\r\n        sd++;\r\n\r\n        // k is the carry.\r\n        for (; (i < xL || k) && sd--; i++) {\r\n          t = k * base + (xd[i] || 0);\r\n          qd[i] = t / yd | 0;\r\n          k = t % yd | 0;\r\n        }\r\n\r\n        more = k || i < xL;\r\n\r\n      // divisor >= 1e7\r\n      } else {\r\n\r\n        // Normalise xd and yd so highest order digit of yd is >= base/2\r\n        k = base / (yd[0] + 1) | 0;\r\n\r\n        if (k > 1) {\r\n          yd = multiplyInteger(yd, k, base);\r\n          xd = multiplyInteger(xd, k, base);\r\n          yL = yd.length;\r\n          xL = xd.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xd.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL;) rem[remL++] = 0;\r\n\r\n        yz = yd.slice();\r\n        yz.unshift(0);\r\n        yd0 = yd[0];\r\n\r\n        if (yd[1] >= base / 2) ++yd0;\r\n\r\n        do {\r\n          k = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yd, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, k.\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n            // k will be how many times the divisor goes into the current remainder.\r\n            k = rem0 / yd0 | 0;\r\n\r\n            //  Algorithm:\r\n            //  1. product = divisor * trial digit (k)\r\n            //  2. if product > remainder: product -= divisor, k--\r\n            //  3. remainder -= product\r\n            //  4. if product was < remainder at 2:\r\n            //    5. compare new remainder and divisor\r\n            //    6. If remainder > divisor: remainder -= divisor, k++\r\n\r\n            if (k > 1) {\r\n              if (k >= base) k = base - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiplyInteger(yd, k, base);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              cmp = compare(prod, rem, prodL, remL);\r\n\r\n              // product > remainder.\r\n              if (cmp == 1) {\r\n                k--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yd, prodL, base);\r\n              }\r\n            } else {\r\n\r\n              // cmp is -1.\r\n              // If k is 0, there is no need to compare yd and rem again below, so change cmp to 1\r\n              // to avoid it. If k is 1 there is a need to compare yd and rem again below.\r\n              if (k == 0) cmp = k = 1;\r\n              prod = yd.slice();\r\n            }\r\n\r\n            prodL = prod.length;\r\n            if (prodL < remL) prod.unshift(0);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL, base);\r\n\r\n            // If product was < previous remainder.\r\n            if (cmp == -1) {\r\n              remL = rem.length;\r\n\r\n              // Compare divisor and new remainder.\r\n              cmp = compare(yd, rem, yL, remL);\r\n\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              if (cmp < 1) {\r\n                k++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yd, remL, base);\r\n              }\r\n            }\r\n\r\n            remL = rem.length;\r\n          } else if (cmp === 0) {\r\n            k++;\r\n            rem = [0];\r\n          }    // if cmp === 1, k will be 0\r\n\r\n          // Add the next digit, k, to the result array.\r\n          qd[i++] = k;\r\n\r\n          // Update the remainder.\r\n          if (cmp && rem[0]) {\r\n            rem[remL++] = xd[xi] || 0;\r\n          } else {\r\n            rem = [xd[xi]];\r\n            remL = 1;\r\n          }\r\n\r\n        } while ((xi++ < xL || rem[0] !== void 0) && sd--);\r\n\r\n        more = rem[0] !== void 0;\r\n      }\r\n\r\n      // Leading zero?\r\n      if (!qd[0]) qd.shift();\r\n    }\r\n\r\n    // logBase is 1 when divide is being used for base conversion.\r\n    if (logBase == 1) {\r\n      q.e = e;\r\n      inexact = more;\r\n    } else {\r\n\r\n      // To calculate q.e, first get the number of digits of qd[0].\r\n      for (i = 1, k = qd[0]; k >= 10; k /= 10) i++;\r\n      q.e = i + e * logBase - 1;\r\n\r\n      finalise(q, dp ? pr + q.e + 1 : pr, rm, more);\r\n    }\r\n\r\n    return q;\r\n  };\r\n})();\r\n\r\n\r\n/*\r\n * Round `x` to `sd` significant digits using rounding mode `rm`.\r\n * Check for over/under-flow.\r\n */\r\n function finalise(x, sd, rm, isTruncated) {\r\n  var digits, i, j, k, rd, roundUp, w, xd, xdi,\r\n    Ctor = x.constructor;\r\n\r\n  // Don't round if sd is null or undefined.\r\n  out: if (sd != null) {\r\n    xd = x.d;\r\n\r\n    // Infinity/NaN.\r\n    if (!xd) return x;\r\n\r\n    // rd: the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n    // w: the word of xd containing rd, a base 1e7 number.\r\n    // xdi: the index of w within xd.\r\n    // digits: the number of digits of w.\r\n    // i: what would be the index of rd within w if all the numbers were 7 digits long (i.e. if\r\n    // they had leading zeros)\r\n    // j: if > 0, the actual index of rd within w (if < 0, rd is a leading zero).\r\n\r\n    // Get the length of the first word of the digits array xd.\r\n    for (digits = 1, k = xd[0]; k >= 10; k /= 10) digits++;\r\n    i = sd - digits;\r\n\r\n    // Is the rounding digit in the first word of xd?\r\n    if (i < 0) {\r\n      i += LOG_BASE;\r\n      j = sd;\r\n      w = xd[xdi = 0];\r\n\r\n      // Get the rounding digit at index j of w.\r\n      rd = w / mathpow(10, digits - j - 1) % 10 | 0;\r\n    } else {\r\n      xdi = Math.ceil((i + 1) / LOG_BASE);\r\n      k = xd.length;\r\n      if (xdi >= k) {\r\n        if (isTruncated) {\r\n\r\n          // Needed by `naturalExponential`, `naturalLogarithm` and `squareRoot`.\r\n          for (; k++ <= xdi;) xd.push(0);\r\n          w = rd = 0;\r\n          digits = 1;\r\n          i %= LOG_BASE;\r\n          j = i - LOG_BASE + 1;\r\n        } else {\r\n          break out;\r\n        }\r\n      } else {\r\n        w = k = xd[xdi];\r\n\r\n        // Get the number of digits of w.\r\n        for (digits = 1; k >= 10; k /= 10) digits++;\r\n\r\n        // Get the index of rd within w.\r\n        i %= LOG_BASE;\r\n\r\n        // Get the index of rd within w, adjusted for leading zeros.\r\n        // The number of leading zeros of w is given by LOG_BASE - digits.\r\n        j = i - LOG_BASE + digits;\r\n\r\n        // Get the rounding digit at index j of w.\r\n        rd = j < 0 ? 0 : w / mathpow(10, digits - j - 1) % 10 | 0;\r\n      }\r\n    }\r\n\r\n    // Are there any non-zero digits after the rounding digit?\r\n    isTruncated = isTruncated || sd < 0 ||\r\n      xd[xdi + 1] !== void 0 || (j < 0 ? w : w % mathpow(10, digits - j - 1));\r\n\r\n    // The expression `w % mathpow(10, digits - j - 1)` returns all the digits of w to the right\r\n    // of the digit at (left-to-right) index j, e.g. if w is 908714 and j is 2, the expression\r\n    // will give 714.\r\n\r\n    roundUp = rm < 4\r\n      ? (rd || isTruncated) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n      : rd > 5 || rd == 5 && (rm == 4 || isTruncated || rm == 6 &&\r\n\r\n        // Check whether the digit to the left of the rounding digit is odd.\r\n        ((i > 0 ? j > 0 ? w / mathpow(10, digits - j) : 0 : xd[xdi - 1]) % 10) & 1 ||\r\n          rm == (x.s < 0 ? 8 : 7));\r\n\r\n    if (sd < 1 || !xd[0]) {\r\n      xd.length = 0;\r\n      if (roundUp) {\r\n\r\n        // Convert sd to decimal places.\r\n        sd -= x.e + 1;\r\n\r\n        // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n        xd[0] = mathpow(10, (LOG_BASE - sd % LOG_BASE) % LOG_BASE);\r\n        x.e = -sd || 0;\r\n      } else {\r\n\r\n        // Zero.\r\n        xd[0] = x.e = 0;\r\n      }\r\n\r\n      return x;\r\n    }\r\n\r\n    // Remove excess digits.\r\n    if (i == 0) {\r\n      xd.length = xdi;\r\n      k = 1;\r\n      xdi--;\r\n    } else {\r\n      xd.length = xdi + 1;\r\n      k = mathpow(10, LOG_BASE - i);\r\n\r\n      // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n      // j > 0 means i > number of leading zeros of w.\r\n      xd[xdi] = j > 0 ? (w / mathpow(10, digits - j) % mathpow(10, j) | 0) * k : 0;\r\n    }\r\n\r\n    if (roundUp) {\r\n      for (;;) {\r\n\r\n        // Is the digit to be rounded up in the first word of xd?\r\n        if (xdi == 0) {\r\n\r\n          // i will be the length of xd[0] before k is added.\r\n          for (i = 1, j = xd[0]; j >= 10; j /= 10) i++;\r\n          j = xd[0] += k;\r\n          for (k = 1; j >= 10; j /= 10) k++;\r\n\r\n          // if i != k the length has increased.\r\n          if (i != k) {\r\n            x.e++;\r\n            if (xd[0] == BASE) xd[0] = 1;\r\n          }\r\n\r\n          break;\r\n        } else {\r\n          xd[xdi] += k;\r\n          if (xd[xdi] != BASE) break;\r\n          xd[xdi--] = 0;\r\n          k = 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (i = xd.length; xd[--i] === 0;) xd.pop();\r\n  }\r\n\r\n  if (external) {\r\n\r\n    // Overflow?\r\n    if (x.e > Ctor.maxE) {\r\n\r\n      // Infinity.\r\n      x.d = null;\r\n      x.e = NaN;\r\n\r\n    // Underflow?\r\n    } else if (x.e < Ctor.minE) {\r\n\r\n      // Zero.\r\n      x.e = 0;\r\n      x.d = [0];\r\n      // Ctor.underflow = true;\r\n    } // else Ctor.underflow = false;\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\nfunction finiteToString(x, isExp, sd) {\r\n  if (!x.isFinite()) return nonFiniteToString(x);\r\n  var k,\r\n    e = x.e,\r\n    str = digitsToString(x.d),\r\n    len = str.length;\r\n\r\n  if (isExp) {\r\n    if (sd && (k = sd - len) > 0) {\r\n      str = str.charAt(0) + '.' + str.slice(1) + getZeroString(k);\r\n    } else if (len > 1) {\r\n      str = str.charAt(0) + '.' + str.slice(1);\r\n    }\r\n\r\n    str = str + (x.e < 0 ? 'e' : 'e+') + x.e;\r\n  } else if (e < 0) {\r\n    str = '0.' + getZeroString(-e - 1) + str;\r\n    if (sd && (k = sd - len) > 0) str += getZeroString(k);\r\n  } else if (e >= len) {\r\n    str += getZeroString(e + 1 - len);\r\n    if (sd && (k = sd - e - 1) > 0) str = str + '.' + getZeroString(k);\r\n  } else {\r\n    if ((k = e + 1) < len) str = str.slice(0, k) + '.' + str.slice(k);\r\n    if (sd && (k = sd - len) > 0) {\r\n      if (e + 1 === len) str += '.';\r\n      str += getZeroString(k);\r\n    }\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n\r\n// Calculate the base 10 exponent from the base 1e7 exponent.\r\nfunction getBase10Exponent(digits, e) {\r\n  var w = digits[0];\r\n\r\n  // Add the number of digits of the first word of the digits array.\r\n  for ( e *= LOG_BASE; w >= 10; w /= 10) e++;\r\n  return e;\r\n}\r\n\r\n\r\nfunction getLn10(Ctor, sd, pr) {\r\n  if (sd > LN10_PRECISION) {\r\n\r\n    // Reset global state in case the exception is caught.\r\n    external = true;\r\n    if (pr) Ctor.precision = pr;\r\n    throw Error(precisionLimitExceeded);\r\n  }\r\n  return finalise(new Ctor(LN10), sd, 1, true);\r\n}\r\n\r\n\r\nfunction getPi(Ctor, sd, rm) {\r\n  if (sd > PI_PRECISION) throw Error(precisionLimitExceeded);\r\n  return finalise(new Ctor(PI), sd, rm, true);\r\n}\r\n\r\n\r\nfunction getPrecision(digits) {\r\n  var w = digits.length - 1,\r\n    len = w * LOG_BASE + 1;\r\n\r\n  w = digits[w];\r\n\r\n  // If non-zero...\r\n  if (w) {\r\n\r\n    // Subtract the number of trailing zeros of the last word.\r\n    for (; w % 10 == 0; w /= 10) len--;\r\n\r\n    // Add the number of digits of the first word.\r\n    for (w = digits[0]; w >= 10; w /= 10) len++;\r\n  }\r\n\r\n  return len;\r\n}\r\n\r\n\r\nfunction getZeroString(k) {\r\n  var zs = '';\r\n  for (; k--;) zs += '0';\r\n  return zs;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of Decimal `x` to the power `n`, where `n` is an\r\n * integer of type number.\r\n *\r\n * Implements 'exponentiation by squaring'. Called by `pow` and `parseOther`.\r\n *\r\n */\r\nfunction intPow(Ctor, x, n, pr) {\r\n  var isTruncated,\r\n    r = new Ctor(1),\r\n\r\n    // Max n of 9007199254740991 takes 53 loop iterations.\r\n    // Maximum digits array length; leaves [28, 34] guard digits.\r\n    k = Math.ceil(pr / LOG_BASE + 4);\r\n\r\n  external = false;\r\n\r\n  for (;;) {\r\n    if (n % 2) {\r\n      r = r.times(x);\r\n      if (truncate(r.d, k)) isTruncated = true;\r\n    }\r\n\r\n    n = mathfloor(n / 2);\r\n    if (n === 0) {\r\n\r\n      // To ensure correct rounding when r.d is truncated, increment the last word if it is zero.\r\n      n = r.d.length - 1;\r\n      if (isTruncated && r.d[n] === 0) ++r.d[n];\r\n      break;\r\n    }\r\n\r\n    x = x.times(x);\r\n    truncate(x.d, k);\r\n  }\r\n\r\n  external = true;\r\n\r\n  return r;\r\n}\r\n\r\n\r\nfunction isOdd(n) {\r\n  return n.d[n.d.length - 1] & 1;\r\n}\r\n\r\n\r\n/*\r\n * Handle `max` (`n` is -1) and `min` (`n` is 1).\r\n */\r\nfunction maxOrMin(Ctor, args, n) {\r\n  var k, y,\r\n    x = new Ctor(args[0]),\r\n    i = 0;\r\n\r\n  for (; ++i < args.length;) {\r\n    y = new Ctor(args[i]);\r\n\r\n    // NaN?\r\n    if (!y.s) {\r\n      x = y;\r\n      break;\r\n    }\r\n\r\n    k = x.cmp(y);\r\n\r\n    if (k === n || k === 0 && x.s === n) {\r\n      x = y;\r\n    }\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural exponential of `x` rounded to `sd` significant\r\n * digits.\r\n *\r\n * Taylor/Maclaurin series.\r\n *\r\n * exp(x) = x^0/0! + x^1/1! + x^2/2! + x^3/3! + ...\r\n *\r\n * Argument reduction:\r\n *   Repeat x = x / 32, k += 5, until |x| < 0.1\r\n *   exp(x) = exp(x / 2^k)^(2^k)\r\n *\r\n * Previously, the argument was initially reduced by\r\n * exp(x) = exp(r) * 10^k  where r = x - k * ln10, k = floor(x / ln10)\r\n * to first put r in the range [0, ln10], before dividing by 32 until |x| < 0.1, but this was\r\n * found to be slower than just dividing repeatedly by 32 as above.\r\n *\r\n * Max integer argument: exp('20723265836946413') = 6.3e+9000000000000000\r\n * Min integer argument: exp('-20723265836946411') = 1.2e-9000000000000000\r\n * (Math object integer min/max: Math.exp(709) = 8.2e+307, Math.exp(-745) = 5e-324)\r\n *\r\n *  exp(Infinity)  = Infinity\r\n *  exp(-Infinity) = 0\r\n *  exp(NaN)       = NaN\r\n *  exp(0)        = 1\r\n *\r\n *  exp(x) is non-terminating for any finite, non-zero x.\r\n *\r\n *  The result will always be correctly rounded.\r\n *\r\n */\r\nfunction naturalExponential(x, sd) {\r\n  var denominator, guard, j, pow, sum, t, wpr,\r\n    rep = 0,\r\n    i = 0,\r\n    k = 0,\r\n    Ctor = x.constructor,\r\n    rm = Ctor.rounding,\r\n    pr = Ctor.precision;\r\n\r\n  // 0/NaN/Infinity?\r\n  if (!x.d || !x.d[0] || x.e > 17) {\r\n\r\n    return new Ctor(x.d\r\n      ? !x.d[0] ? 1 : x.s < 0 ? 0 : 1 / 0\r\n      : x.s ? x.s < 0 ? 0 : x : 0 / 0);\r\n  }\r\n\r\n  if (sd == null) {\r\n    external = false;\r\n    wpr = pr;\r\n  } else {\r\n    wpr = sd;\r\n  }\r\n\r\n  t = new Ctor(0.03125);\r\n\r\n  // while abs(x) >= 0.1\r\n  while (x.e > -2) {\r\n\r\n    // x = x / 2^5\r\n    x = x.times(t);\r\n    k += 5;\r\n  }\r\n\r\n  // Use 2 * log10(2^k) + 5 (empirically derived) to estimate the increase in precision\r\n  // necessary to ensure the first 4 rounding digits are correct.\r\n  guard = Math.log(mathpow(2, k)) / Math.LN10 * 2 + 5 | 0;\r\n  wpr += guard;\r\n  denominator = pow = sum = new Ctor(1);\r\n  Ctor.precision = wpr;\r\n\r\n  for (;;) {\r\n    pow = finalise(pow.times(x), wpr, 1);\r\n    denominator = denominator.times(++i);\r\n    t = sum.plus(divide(pow, denominator, wpr, 1));\r\n\r\n    if (digitsToString(t.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {\r\n      j = k;\r\n      while (j--) sum = finalise(sum.times(sum), wpr, 1);\r\n\r\n      // Check to see if the first 4 rounding digits are [49]999.\r\n      // If so, repeat the summation with a higher precision, otherwise\r\n      // e.g. with precision: 18, rounding: 1\r\n      // exp(18.404272462595034083567793919843761) = 98372560.1229999999 (should be 98372560.123)\r\n      // `wpr - guard` is the index of first rounding digit.\r\n      if (sd == null) {\r\n\r\n        if (rep < 3 && checkRoundingDigits(sum.d, wpr - guard, rm, rep)) {\r\n          Ctor.precision = wpr += 10;\r\n          denominator = pow = t = new Ctor(1);\r\n          i = 0;\r\n          rep++;\r\n        } else {\r\n          return finalise(sum, Ctor.precision = pr, rm, external = true);\r\n        }\r\n      } else {\r\n        Ctor.precision = pr;\r\n        return sum;\r\n      }\r\n    }\r\n\r\n    sum = t;\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural logarithm of `x` rounded to `sd` significant\r\n * digits.\r\n *\r\n *  ln(-n)        = NaN\r\n *  ln(0)         = -Infinity\r\n *  ln(-0)        = -Infinity\r\n *  ln(1)         = 0\r\n *  ln(Infinity)  = Infinity\r\n *  ln(-Infinity) = NaN\r\n *  ln(NaN)       = NaN\r\n *\r\n *  ln(n) (n != 1) is non-terminating.\r\n *\r\n */\r\nfunction naturalLogarithm(y, sd) {\r\n  var c, c0, denominator, e, numerator, rep, sum, t, wpr, x1, x2,\r\n    n = 1,\r\n    guard = 10,\r\n    x = y,\r\n    xd = x.d,\r\n    Ctor = x.constructor,\r\n    rm = Ctor.rounding,\r\n    pr = Ctor.precision;\r\n\r\n  // Is x negative or Infinity, NaN, 0 or 1?\r\n  if (x.s < 0 || !xd || !xd[0] || !x.e && xd[0] == 1 && xd.length == 1) {\r\n    return new Ctor(xd && !xd[0] ? -1 / 0 : x.s != 1 ? NaN : xd ? 0 : x);\r\n  }\r\n\r\n  if (sd == null) {\r\n    external = false;\r\n    wpr = pr;\r\n  } else {\r\n    wpr = sd;\r\n  }\r\n\r\n  Ctor.precision = wpr += guard;\r\n  c = digitsToString(xd);\r\n  c0 = c.charAt(0);\r\n\r\n  if (Math.abs(e = x.e) < 1.5e15) {\r\n\r\n    // Argument reduction.\r\n    // The series converges faster the closer the argument is to 1, so using\r\n    // ln(a^b) = b * ln(a),   ln(a) = ln(a^b) / b\r\n    // multiply the argument by itself until the leading digits of the significand are 7, 8, 9,\r\n    // 10, 11, 12 or 13, recording the number of multiplications so the sum of the series can\r\n    // later be divided by this number, then separate out the power of 10 using\r\n    // ln(a*10^b) = ln(a) + b*ln(10).\r\n\r\n    // max n is 21 (gives 0.9, 1.0 or 1.1) (9e15 / 21 = 4.2e14).\r\n    //while (c0 < 9 && c0 != 1 || c0 == 1 && c.charAt(1) > 1) {\r\n    // max n is 6 (gives 0.7 - 1.3)\r\n    while (c0 < 7 && c0 != 1 || c0 == 1 && c.charAt(1) > 3) {\r\n      x = x.times(y);\r\n      c = digitsToString(x.d);\r\n      c0 = c.charAt(0);\r\n      n++;\r\n    }\r\n\r\n    e = x.e;\r\n\r\n    if (c0 > 1) {\r\n      x = new Ctor('0.' + c);\r\n      e++;\r\n    } else {\r\n      x = new Ctor(c0 + '.' + c.slice(1));\r\n    }\r\n  } else {\r\n\r\n    // The argument reduction method above may result in overflow if the argument y is a massive\r\n    // number with exponent >= 1500000000000000 (9e15 / 6 = 1.5e15), so instead recall this\r\n    // function using ln(x*10^e) = ln(x) + e*ln(10).\r\n    t = getLn10(Ctor, wpr + 2, pr).times(e + '');\r\n    x = naturalLogarithm(new Ctor(c0 + '.' + c.slice(1)), wpr - guard).plus(t);\r\n    Ctor.precision = pr;\r\n\r\n    return sd == null ? finalise(x, pr, rm, external = true) : x;\r\n  }\r\n\r\n  // x1 is x reduced to a value near 1.\r\n  x1 = x;\r\n\r\n  // Taylor series.\r\n  // ln(y) = ln((1 + x)/(1 - x)) = 2(x + x^3/3 + x^5/5 + x^7/7 + ...)\r\n  // where x = (y - 1)/(y + 1)    (|x| < 1)\r\n  sum = numerator = x = divide(x.minus(1), x.plus(1), wpr, 1);\r\n  x2 = finalise(x.times(x), wpr, 1);\r\n  denominator = 3;\r\n\r\n  for (;;) {\r\n    numerator = finalise(numerator.times(x2), wpr, 1);\r\n    t = sum.plus(divide(numerator, new Ctor(denominator), wpr, 1));\r\n\r\n    if (digitsToString(t.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {\r\n      sum = sum.times(2);\r\n\r\n      // Reverse the argument reduction. Check that e is not 0 because, besides preventing an\r\n      // unnecessary calculation, -0 + 0 = +0 and to ensure correct rounding -0 needs to stay -0.\r\n      if (e !== 0) sum = sum.plus(getLn10(Ctor, wpr + 2, pr).times(e + ''));\r\n      sum = divide(sum, new Ctor(n), wpr, 1);\r\n\r\n      // Is rm > 3 and the first 4 rounding digits 4999, or rm < 4 (or the summation has\r\n      // been repeated previously) and the first 4 rounding digits 9999?\r\n      // If so, restart the summation with a higher precision, otherwise\r\n      // e.g. with precision: 12, rounding: 1\r\n      // ln(135520028.6126091714265381533) = 18.7246299999 when it should be 18.72463.\r\n      // `wpr - guard` is the index of first rounding digit.\r\n      if (sd == null) {\r\n        if (checkRoundingDigits(sum.d, wpr - guard, rm, rep)) {\r\n          Ctor.precision = wpr += guard;\r\n          t = numerator = x = divide(x1.minus(1), x1.plus(1), wpr, 1);\r\n          x2 = finalise(x.times(x), wpr, 1);\r\n          denominator = rep = 1;\r\n        } else {\r\n          return finalise(sum, Ctor.precision = pr, rm, external = true);\r\n        }\r\n      } else {\r\n        Ctor.precision = pr;\r\n        return sum;\r\n      }\r\n    }\r\n\r\n    sum = t;\r\n    denominator += 2;\r\n  }\r\n}\r\n\r\n\r\n// Infinity, NaN.\r\nfunction nonFiniteToString(x) {\r\n  // Unsigned.\r\n  return String(x.s * x.s / 0);\r\n}\r\n\r\n\r\n/*\r\n * Parse the value of a new Decimal `x` from string `str`.\r\n */\r\nfunction parseDecimal(x, str) {\r\n  var e, i, len;\r\n\r\n  // TODO BigInt str: no need to check for decimal point, exponential form or leading zeros.\r\n  // Decimal point?\r\n  if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n  // Exponential form?\r\n  if ((i = str.search(/e/i)) > 0) {\r\n\r\n    // Determine exponent.\r\n    if (e < 0) e = i;\r\n    e += +str.slice(i + 1);\r\n    str = str.substring(0, i);\r\n  } else if (e < 0) {\r\n\r\n    // Integer.\r\n    e = str.length;\r\n  }\r\n\r\n  // Determine leading zeros.\r\n  for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n  // Determine trailing zeros.\r\n  for (len = str.length; str.charCodeAt(len - 1) === 48; --len);\r\n  str = str.slice(i, len);\r\n\r\n  if (str) {\r\n    len -= i;\r\n    x.e = e = e - i - 1;\r\n    x.d = [];\r\n\r\n    // Transform base\r\n\r\n    // e is the base 10 exponent.\r\n    // i is where to slice str to get the first word of the digits array.\r\n    i = (e + 1) % LOG_BASE;\r\n    if (e < 0) i += LOG_BASE;\r\n\r\n    if (i < len) {\r\n      if (i) x.d.push(+str.slice(0, i));\r\n      for (len -= LOG_BASE; i < len;) x.d.push(+str.slice(i, i += LOG_BASE));\r\n      str = str.slice(i);\r\n      i = LOG_BASE - str.length;\r\n    } else {\r\n      i -= len;\r\n    }\r\n\r\n    for (; i--;) str += '0';\r\n    x.d.push(+str);\r\n\r\n    if (external) {\r\n\r\n      // Overflow?\r\n      if (x.e > x.constructor.maxE) {\r\n\r\n        // Infinity.\r\n        x.d = null;\r\n        x.e = NaN;\r\n\r\n      // Underflow?\r\n      } else if (x.e < x.constructor.minE) {\r\n\r\n        // Zero.\r\n        x.e = 0;\r\n        x.d = [0];\r\n        // x.constructor.underflow = true;\r\n      } // else x.constructor.underflow = false;\r\n    }\r\n  } else {\r\n\r\n    // Zero.\r\n    x.e = 0;\r\n    x.d = [0];\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Parse the value of a new Decimal `x` from a string `str`, which is not a decimal value.\r\n */\r\nfunction parseOther(x, str) {\r\n  var base, Ctor, divisor, i, isFloat, len, p, xd, xe;\r\n\r\n  if (str.indexOf('_') > -1) {\r\n    str = str.replace(/(\\d)_(?=\\d)/g, '$1');\r\n    if (isDecimal.test(str)) return parseDecimal(x, str);\r\n  } else if (str === 'Infinity' || str === 'NaN') {\r\n    if (!+str) x.s = NaN;\r\n    x.e = NaN;\r\n    x.d = null;\r\n    return x;\r\n  }\r\n\r\n  if (isHex.test(str))  {\r\n    base = 16;\r\n    str = str.toLowerCase();\r\n  } else if (isBinary.test(str))  {\r\n    base = 2;\r\n  } else if (isOctal.test(str))  {\r\n    base = 8;\r\n  } else {\r\n    throw Error(invalidArgument + str);\r\n  }\r\n\r\n  // Is there a binary exponent part?\r\n  i = str.search(/p/i);\r\n\r\n  if (i > 0) {\r\n    p = +str.slice(i + 1);\r\n    str = str.substring(2, i);\r\n  } else {\r\n    str = str.slice(2);\r\n  }\r\n\r\n  // Convert `str` as an integer then divide the result by `base` raised to a power such that the\r\n  // fraction part will be restored.\r\n  i = str.indexOf('.');\r\n  isFloat = i >= 0;\r\n  Ctor = x.constructor;\r\n\r\n  if (isFloat) {\r\n    str = str.replace('.', '');\r\n    len = str.length;\r\n    i = len - i;\r\n\r\n    // log[10](16) = 1.2041... , log[10](88) = 1.9444....\r\n    divisor = intPow(Ctor, new Ctor(base), i, i * 2);\r\n  }\r\n\r\n  xd = convertBase(str, base, BASE);\r\n  xe = xd.length - 1;\r\n\r\n  // Remove trailing zeros.\r\n  for (i = xe; xd[i] === 0; --i) xd.pop();\r\n  if (i < 0) return new Ctor(x.s * 0);\r\n  x.e = getBase10Exponent(xd, xe);\r\n  x.d = xd;\r\n  external = false;\r\n\r\n  // At what precision to perform the division to ensure exact conversion?\r\n  // maxDecimalIntegerPartDigitCount = ceil(log[10](b) * otherBaseIntegerPartDigitCount)\r\n  // log[10](2) = 0.30103, log[10](8) = 0.90309, log[10](16) = 1.20412\r\n  // E.g. ceil(1.2 * 3) = 4, so up to 4 decimal digits are needed to represent 3 hex int digits.\r\n  // maxDecimalFractionPartDigitCount = {Hex:4|Oct:3|Bin:1} * otherBaseFractionPartDigitCount\r\n  // Therefore using 4 * the number of digits of str will always be enough.\r\n  if (isFloat) x = divide(x, divisor, len * 4);\r\n\r\n  // Multiply by the binary exponent part if present.\r\n  if (p) x = x.times(Math.abs(p) < 54 ? mathpow(2, p) : Decimal.pow(2, p));\r\n  external = true;\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * sin(x) = x - x^3/3! + x^5/5! - ...\r\n * |x| < pi/2\r\n *\r\n */\r\nfunction sine(Ctor, x) {\r\n  var k,\r\n    len = x.d.length;\r\n\r\n  if (len < 3) {\r\n    return x.isZero() ? x : taylorSeries(Ctor, 2, x, x);\r\n  }\r\n\r\n  // Argument reduction: sin(5x) = 16*sin^5(x) - 20*sin^3(x) + 5*sin(x)\r\n  // i.e. sin(x) = 16*sin^5(x/5) - 20*sin^3(x/5) + 5*sin(x/5)\r\n  // and  sin(x) = sin(x/5)(5 + sin^2(x/5)(16sin^2(x/5) - 20))\r\n\r\n  // Estimate the optimum number of times to use the argument reduction.\r\n  k = 1.4 * Math.sqrt(len);\r\n  k = k > 16 ? 16 : k | 0;\r\n\r\n  x = x.times(1 / tinyPow(5, k));\r\n  x = taylorSeries(Ctor, 2, x, x);\r\n\r\n  // Reverse argument reduction\r\n  var sin2_x,\r\n    d5 = new Ctor(5),\r\n    d16 = new Ctor(16),\r\n    d20 = new Ctor(20);\r\n  for (; k--;) {\r\n    sin2_x = x.times(x);\r\n    x = x.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))));\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n// Calculate Taylor series for `cos`, `cosh`, `sin` and `sinh`.\r\nfunction taylorSeries(Ctor, n, x, y, isHyperbolic) {\r\n  var j, t, u, x2,\r\n    i = 1,\r\n    pr = Ctor.precision,\r\n    k = Math.ceil(pr / LOG_BASE);\r\n\r\n  external = false;\r\n  x2 = x.times(x);\r\n  u = new Ctor(y);\r\n\r\n  for (;;) {\r\n    t = divide(u.times(x2), new Ctor(n++ * n++), pr, 1);\r\n    u = isHyperbolic ? y.plus(t) : y.minus(t);\r\n    y = divide(t.times(x2), new Ctor(n++ * n++), pr, 1);\r\n    t = u.plus(y);\r\n\r\n    if (t.d[k] !== void 0) {\r\n      for (j = k; t.d[j] === u.d[j] && j--;);\r\n      if (j == -1) break;\r\n    }\r\n\r\n    j = u;\r\n    u = y;\r\n    y = t;\r\n    t = j;\r\n    i++;\r\n  }\r\n\r\n  external = true;\r\n  t.d.length = k + 1;\r\n\r\n  return t;\r\n}\r\n\r\n\r\n// Exponent e must be positive and non-zero.\r\nfunction tinyPow(b, e) {\r\n  var n = b;\r\n  while (--e) n *= b;\r\n  return n;\r\n}\r\n\r\n\r\n// Return the absolute value of `x` reduced to less than or equal to half pi.\r\nfunction toLessThanHalfPi(Ctor, x) {\r\n  var t,\r\n    isNeg = x.s < 0,\r\n    pi = getPi(Ctor, Ctor.precision, 1),\r\n    halfPi = pi.times(0.5);\r\n\r\n  x = x.abs();\r\n\r\n  if (x.lte(halfPi)) {\r\n    quadrant = isNeg ? 4 : 1;\r\n    return x;\r\n  }\r\n\r\n  t = x.divToInt(pi);\r\n\r\n  if (t.isZero()) {\r\n    quadrant = isNeg ? 3 : 2;\r\n  } else {\r\n    x = x.minus(t.times(pi));\r\n\r\n    // 0 <= x < pi\r\n    if (x.lte(halfPi)) {\r\n      quadrant = isOdd(t) ? (isNeg ? 2 : 3) : (isNeg ? 4 : 1);\r\n      return x;\r\n    }\r\n\r\n    quadrant = isOdd(t) ? (isNeg ? 1 : 4) : (isNeg ? 3 : 2);\r\n  }\r\n\r\n  return x.minus(pi).abs();\r\n}\r\n\r\n\r\n/*\r\n * Return the value of Decimal `x` as a string in base `baseOut`.\r\n *\r\n * If the optional `sd` argument is present include a binary exponent suffix.\r\n */\r\nfunction toStringBinary(x, baseOut, sd, rm) {\r\n  var base, e, i, k, len, roundUp, str, xd, y,\r\n    Ctor = x.constructor,\r\n    isExp = sd !== void 0;\r\n\r\n  if (isExp) {\r\n    checkInt32(sd, 1, MAX_DIGITS);\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n  } else {\r\n    sd = Ctor.precision;\r\n    rm = Ctor.rounding;\r\n  }\r\n\r\n  if (!x.isFinite()) {\r\n    str = nonFiniteToString(x);\r\n  } else {\r\n    str = finiteToString(x);\r\n    i = str.indexOf('.');\r\n\r\n    // Use exponential notation according to `toExpPos` and `toExpNeg`? No, but if required:\r\n    // maxBinaryExponent = floor((decimalExponent + 1) * log[2](10))\r\n    // minBinaryExponent = floor(decimalExponent * log[2](10))\r\n    // log[2](10) = 3.321928094887362347870319429489390175864\r\n\r\n    if (isExp) {\r\n      base = 2;\r\n      if (baseOut == 16) {\r\n        sd = sd * 4 - 3;\r\n      } else if (baseOut == 8) {\r\n        sd = sd * 3 - 2;\r\n      }\r\n    } else {\r\n      base = baseOut;\r\n    }\r\n\r\n    // Convert the number as an integer then divide the result by its base raised to a power such\r\n    // that the fraction part will be restored.\r\n\r\n    // Non-integer.\r\n    if (i >= 0) {\r\n      str = str.replace('.', '');\r\n      y = new Ctor(1);\r\n      y.e = str.length - i;\r\n      y.d = convertBase(finiteToString(y), 10, base);\r\n      y.e = y.d.length;\r\n    }\r\n\r\n    xd = convertBase(str, 10, base);\r\n    e = len = xd.length;\r\n\r\n    // Remove trailing zeros.\r\n    for (; xd[--len] == 0;) xd.pop();\r\n\r\n    if (!xd[0]) {\r\n      str = isExp ? '0p+0' : '0';\r\n    } else {\r\n      if (i < 0) {\r\n        e--;\r\n      } else {\r\n        x = new Ctor(x);\r\n        x.d = xd;\r\n        x.e = e;\r\n        x = divide(x, y, sd, rm, 0, base);\r\n        xd = x.d;\r\n        e = x.e;\r\n        roundUp = inexact;\r\n      }\r\n\r\n      // The rounding digit, i.e. the digit after the digit that may be rounded up.\r\n      i = xd[sd];\r\n      k = base / 2;\r\n      roundUp = roundUp || xd[sd + 1] !== void 0;\r\n\r\n      roundUp = rm < 4\r\n        ? (i !== void 0 || roundUp) && (rm === 0 || rm === (x.s < 0 ? 3 : 2))\r\n        : i > k || i === k && (rm === 4 || roundUp || rm === 6 && xd[sd - 1] & 1 ||\r\n          rm === (x.s < 0 ? 8 : 7));\r\n\r\n      xd.length = sd;\r\n\r\n      if (roundUp) {\r\n\r\n        // Rounding up may mean the previous digit has to be rounded up and so on.\r\n        for (; ++xd[--sd] > base - 1;) {\r\n          xd[sd] = 0;\r\n          if (!sd) {\r\n            ++e;\r\n            xd.unshift(1);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Determine trailing zeros.\r\n      for (len = xd.length; !xd[len - 1]; --len);\r\n\r\n      // E.g. [4, 11, 15] becomes 4bf.\r\n      for (i = 0, str = ''; i < len; i++) str += NUMERALS.charAt(xd[i]);\r\n\r\n      // Add binary exponent suffix?\r\n      if (isExp) {\r\n        if (len > 1) {\r\n          if (baseOut == 16 || baseOut == 8) {\r\n            i = baseOut == 16 ? 4 : 3;\r\n            for (--len; len % i; len++) str += '0';\r\n            xd = convertBase(str, base, baseOut);\r\n            for (len = xd.length; !xd[len - 1]; --len);\r\n\r\n            // xd[0] will always be be 1\r\n            for (i = 1, str = '1.'; i < len; i++) str += NUMERALS.charAt(xd[i]);\r\n          } else {\r\n            str = str.charAt(0) + '.' + str.slice(1);\r\n          }\r\n        }\r\n\r\n        str =  str + (e < 0 ? 'p' : 'p+') + e;\r\n      } else if (e < 0) {\r\n        for (; ++e;) str = '0' + str;\r\n        str = '0.' + str;\r\n      } else {\r\n        if (++e > len) for (e -= len; e-- ;) str += '0';\r\n        else if (e < len) str = str.slice(0, e) + '.' + str.slice(e);\r\n      }\r\n    }\r\n\r\n    str = (baseOut == 16 ? '0x' : baseOut == 2 ? '0b' : baseOut == 8 ? '0o' : '') + str;\r\n  }\r\n\r\n  return x.s < 0 ? '-' + str : str;\r\n}\r\n\r\n\r\n// Does not strip trailing zeros.\r\nfunction truncate(arr, len) {\r\n  if (arr.length > len) {\r\n    arr.length = len;\r\n    return true;\r\n  }\r\n}\r\n\r\n\r\n// Decimal methods\r\n\r\n\r\n/*\r\n *  abs\r\n *  acos\r\n *  acosh\r\n *  add\r\n *  asin\r\n *  asinh\r\n *  atan\r\n *  atanh\r\n *  atan2\r\n *  cbrt\r\n *  ceil\r\n *  clamp\r\n *  clone\r\n *  config\r\n *  cos\r\n *  cosh\r\n *  div\r\n *  exp\r\n *  floor\r\n *  hypot\r\n *  ln\r\n *  log\r\n *  log2\r\n *  log10\r\n *  max\r\n *  min\r\n *  mod\r\n *  mul\r\n *  pow\r\n *  random\r\n *  round\r\n *  set\r\n *  sign\r\n *  sin\r\n *  sinh\r\n *  sqrt\r\n *  sub\r\n *  sum\r\n *  tan\r\n *  tanh\r\n *  trunc\r\n */\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the absolute value of `x`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction abs(x) {\r\n  return new this(x).abs();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arccosine in radians of `x`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction acos(x) {\r\n  return new this(x).acos();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic cosine of `x`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction acosh(x) {\r\n  return new this(x).acosh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the sum of `x` and `y`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction add(x, y) {\r\n  return new this(x).plus(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arcsine in radians of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction asin(x) {\r\n  return new this(x).asin();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic sine of `x`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction asinh(x) {\r\n  return new this(x).asinh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arctangent in radians of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction atan(x) {\r\n  return new this(x).atan();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic tangent of `x`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction atanh(x) {\r\n  return new this(x).atanh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arctangent in radians of `y/x` in the range -pi to pi\r\n * (inclusive), rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-pi, pi]\r\n *\r\n * y {number|string|bigint|Decimal} The y-coordinate.\r\n * x {number|string|bigint|Decimal} The x-coordinate.\r\n *\r\n * atan2(0, -0)               = pi\r\n * atan2(0, +0)               = 0\r\n * atan2(0, -x)               = pi for x > 0\r\n * atan2(0, x)                = 0 for x > 0\r\n * atan2(-y, 0)               = -pi/2 for y > 0\r\n * atan2(y, 0)                = pi/2 for y > 0\r\n * atan2(y, -Infinity)        = pi for finite y > 0\r\n * atan2(y, +Infinity)        = 0 for finite y > 0\r\n * atan2(Infinity, x)         = pi/2 for finite x\r\n * atan2(Infinity, -Infinity) = 3*pi/4\r\n * atan2(Infinity, +Infinity) = pi/4\r\n * atan2(NaN, x) = NaN\r\n * atan2(y, NaN) = NaN\r\n *\r\n */\r\nfunction atan2(y, x) {\r\n  y = new this(y);\r\n  x = new this(x);\r\n  var r,\r\n    pr = this.precision,\r\n    rm = this.rounding,\r\n    wpr = pr + 4;\r\n\r\n  // Either NaN\r\n  if (!y.s || !x.s) {\r\n    r = new this(NaN);\r\n\r\n  // Both Infinity\r\n  } else if (!y.d && !x.d) {\r\n    r = getPi(this, wpr, 1).times(x.s > 0 ? 0.25 : 0.75);\r\n    r.s = y.s;\r\n\r\n  // x is Infinity or y is 0\r\n  } else if (!x.d || y.isZero()) {\r\n    r = x.s < 0 ? getPi(this, pr, rm) : new this(0);\r\n    r.s = y.s;\r\n\r\n  // y is Infinity or x is 0\r\n  } else if (!y.d || x.isZero()) {\r\n    r = getPi(this, wpr, 1).times(0.5);\r\n    r.s = y.s;\r\n\r\n  // Both non-zero and finite\r\n  } else if (x.s < 0) {\r\n    this.precision = wpr;\r\n    this.rounding = 1;\r\n    r = this.atan(divide(y, x, wpr, 1));\r\n    x = getPi(this, wpr, 1);\r\n    this.precision = pr;\r\n    this.rounding = rm;\r\n    r = y.s < 0 ? r.minus(x) : r.plus(x);\r\n  } else {\r\n    r = this.atan(divide(y, x, wpr, 1));\r\n  }\r\n\r\n  return r;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the cube root of `x`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction cbrt(x) {\r\n  return new this(x).cbrt();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` rounded to an integer using `ROUND_CEIL`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction ceil(x) {\r\n  return finalise(x = new this(x), x.e + 1, 2);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` clamped to the range delineated by `min` and `max`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * min {number|string|bigint|Decimal}\r\n * max {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction clamp(x, min, max) {\r\n  return new this(x).clamp(min, max);\r\n}\r\n\r\n\r\n/*\r\n * Configure global settings for a Decimal constructor.\r\n *\r\n * `obj` is an object with one or more of the following properties,\r\n *\r\n *   precision  {number}\r\n *   rounding   {number}\r\n *   toExpNeg   {number}\r\n *   toExpPos   {number}\r\n *   maxE       {number}\r\n *   minE       {number}\r\n *   modulo     {number}\r\n *   crypto     {boolean|number}\r\n *   defaults   {true}\r\n *\r\n * E.g. Decimal.config({ precision: 20, rounding: 4 })\r\n *\r\n */\r\nfunction config(obj) {\r\n  if (!obj || typeof obj !== 'object') throw Error(decimalError + 'Object expected');\r\n  var i, p, v,\r\n    useDefaults = obj.defaults === true,\r\n    ps = [\r\n      'precision', 1, MAX_DIGITS,\r\n      'rounding', 0, 8,\r\n      'toExpNeg', -EXP_LIMIT, 0,\r\n      'toExpPos', 0, EXP_LIMIT,\r\n      'maxE', 0, EXP_LIMIT,\r\n      'minE', -EXP_LIMIT, 0,\r\n      'modulo', 0, 9\r\n    ];\r\n\r\n  for (i = 0; i < ps.length; i += 3) {\r\n    if (p = ps[i], useDefaults) this[p] = DEFAULTS[p];\r\n    if ((v = obj[p]) !== void 0) {\r\n      if (mathfloor(v) === v && v >= ps[i + 1] && v <= ps[i + 2]) this[p] = v;\r\n      else throw Error(invalidArgument + p + ': ' + v);\r\n    }\r\n  }\r\n\r\n  if (p = 'crypto', useDefaults) this[p] = DEFAULTS[p];\r\n  if ((v = obj[p]) !== void 0) {\r\n    if (v === true || v === false || v === 0 || v === 1) {\r\n      if (v) {\r\n        if (typeof crypto != 'undefined' && crypto &&\r\n          (crypto.getRandomValues || crypto.randomBytes)) {\r\n          this[p] = true;\r\n        } else {\r\n          throw Error(cryptoUnavailable);\r\n        }\r\n      } else {\r\n        this[p] = false;\r\n      }\r\n    } else {\r\n      throw Error(invalidArgument + p + ': ' + v);\r\n    }\r\n  }\r\n\r\n  return this;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the cosine of `x`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction cos(x) {\r\n  return new this(x).cos();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic cosine of `x`, rounded to precision\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction cosh(x) {\r\n  return new this(x).cosh();\r\n}\r\n\r\n\r\n/*\r\n * Create and return a Decimal constructor with the same configuration properties as this Decimal\r\n * constructor.\r\n *\r\n */\r\nfunction clone(obj) {\r\n  var i, p, ps;\r\n\r\n  /*\r\n   * The Decimal constructor and exported function.\r\n   * Return a new Decimal instance.\r\n   *\r\n   * v {number|string|bigint|Decimal} A numeric value.\r\n   *\r\n   */\r\n  function Decimal(v) {\r\n    var e, i, t,\r\n      x = this;\r\n\r\n    // Decimal called without new.\r\n    if (!(x instanceof Decimal)) return new Decimal(v);\r\n\r\n    // Retain a reference to this Decimal constructor, and shadow Decimal.prototype.constructor\r\n    // which points to Object.\r\n    x.constructor = Decimal;\r\n\r\n    if (isDecimalInstance(v)) {\r\n      x.s = v.s;\r\n\r\n      if (external) {\r\n        if (!v.d || v.e > Decimal.maxE) {\r\n\r\n          // Infinity.\r\n          x.e = NaN;\r\n          x.d = null;\r\n        } else if (v.e < Decimal.minE) {\r\n\r\n          // Zero.\r\n          x.e = 0;\r\n          x.d = [0];\r\n        } else {\r\n          x.e = v.e;\r\n          x.d = v.d.slice();\r\n        }\r\n      } else {\r\n        x.e = v.e;\r\n        x.d = v.d ? v.d.slice() : v.d;\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    t = typeof v;\r\n\r\n    if (t === 'number') {\r\n      if (v === 0) {\r\n        x.s = 1 / v < 0 ? -1 : 1;\r\n        x.e = 0;\r\n        x.d = [0];\r\n        return;\r\n      }\r\n\r\n      if (v < 0) {\r\n        v = -v;\r\n        x.s = -1;\r\n      } else {\r\n        x.s = 1;\r\n      }\r\n\r\n      // Fast path for small integers.\r\n      if (v === ~~v && v < 1e7) {\r\n        for (e = 0, i = v; i >= 10; i /= 10) e++;\r\n\r\n        if (external) {\r\n          if (e > Decimal.maxE) {\r\n            x.e = NaN;\r\n            x.d = null;\r\n          } else if (e < Decimal.minE) {\r\n            x.e = 0;\r\n            x.d = [0];\r\n          } else {\r\n            x.e = e;\r\n            x.d = [v];\r\n          }\r\n        } else {\r\n          x.e = e;\r\n          x.d = [v];\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      // Infinity or NaN?\r\n      if (v * 0 !== 0) {\r\n        if (!v) x.s = NaN;\r\n        x.e = NaN;\r\n        x.d = null;\r\n        return;\r\n      }\r\n\r\n      return parseDecimal(x, v.toString());\r\n    }\r\n\r\n    if (t === 'string') {\r\n      if ((i = v.charCodeAt(0)) === 45) {  // minus sign\r\n        v = v.slice(1);\r\n        x.s = -1;\r\n      } else {\r\n        if (i === 43) v = v.slice(1);  // plus sign\r\n        x.s = 1;\r\n      }\r\n\r\n      return isDecimal.test(v) ? parseDecimal(x, v) : parseOther(x, v);\r\n    }\r\n\r\n    if (t === 'bigint') {\r\n      if (v < 0) {\r\n        v = -v;\r\n        x.s = -1;\r\n      } else {\r\n        x.s = 1;\r\n      }\r\n\r\n      return parseDecimal(x, v.toString());\r\n    }\r\n\r\n    throw Error(invalidArgument + v);\r\n  }\r\n\r\n  Decimal.prototype = P;\r\n\r\n  Decimal.ROUND_UP = 0;\r\n  Decimal.ROUND_DOWN = 1;\r\n  Decimal.ROUND_CEIL = 2;\r\n  Decimal.ROUND_FLOOR = 3;\r\n  Decimal.ROUND_HALF_UP = 4;\r\n  Decimal.ROUND_HALF_DOWN = 5;\r\n  Decimal.ROUND_HALF_EVEN = 6;\r\n  Decimal.ROUND_HALF_CEIL = 7;\r\n  Decimal.ROUND_HALF_FLOOR = 8;\r\n  Decimal.EUCLID = 9;\r\n\r\n  Decimal.config = Decimal.set = config;\r\n  Decimal.clone = clone;\r\n  Decimal.isDecimal = isDecimalInstance;\r\n\r\n  Decimal.abs = abs;\r\n  Decimal.acos = acos;\r\n  Decimal.acosh = acosh;        // ES6\r\n  Decimal.add = add;\r\n  Decimal.asin = asin;\r\n  Decimal.asinh = asinh;        // ES6\r\n  Decimal.atan = atan;\r\n  Decimal.atanh = atanh;        // ES6\r\n  Decimal.atan2 = atan2;\r\n  Decimal.cbrt = cbrt;          // ES6\r\n  Decimal.ceil = ceil;\r\n  Decimal.clamp = clamp;\r\n  Decimal.cos = cos;\r\n  Decimal.cosh = cosh;          // ES6\r\n  Decimal.div = div;\r\n  Decimal.exp = exp;\r\n  Decimal.floor = floor;\r\n  Decimal.hypot = hypot;        // ES6\r\n  Decimal.ln = ln;\r\n  Decimal.log = log;\r\n  Decimal.log10 = log10;        // ES6\r\n  Decimal.log2 = log2;          // ES6\r\n  Decimal.max = max;\r\n  Decimal.min = min;\r\n  Decimal.mod = mod;\r\n  Decimal.mul = mul;\r\n  Decimal.pow = pow;\r\n  Decimal.random = random;\r\n  Decimal.round = round;\r\n  Decimal.sign = sign;          // ES6\r\n  Decimal.sin = sin;\r\n  Decimal.sinh = sinh;          // ES6\r\n  Decimal.sqrt = sqrt;\r\n  Decimal.sub = sub;\r\n  Decimal.sum = sum;\r\n  Decimal.tan = tan;\r\n  Decimal.tanh = tanh;          // ES6\r\n  Decimal.trunc = trunc;        // ES6\r\n\r\n  if (obj === void 0) obj = {};\r\n  if (obj) {\r\n    if (obj.defaults !== true) {\r\n      ps = ['precision', 'rounding', 'toExpNeg', 'toExpPos', 'maxE', 'minE', 'modulo', 'crypto'];\r\n      for (i = 0; i < ps.length;) if (!obj.hasOwnProperty(p = ps[i++])) obj[p] = this[p];\r\n    }\r\n  }\r\n\r\n  Decimal.config(obj);\r\n\r\n  return Decimal;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` divided by `y`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction div(x, y) {\r\n  return new this(x).div(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural exponential of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} The power to which to raise the base of the natural log.\r\n *\r\n */\r\nfunction exp(x) {\r\n  return new this(x).exp();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` round to an integer using `ROUND_FLOOR`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction floor(x) {\r\n  return finalise(x = new this(x), x.e + 1, 3);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the square root of the sum of the squares of the arguments,\r\n * rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * hypot(a, b, ...) = sqrt(a^2 + b^2 + ...)\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction hypot() {\r\n  var i, n,\r\n    t = new this(0);\r\n\r\n  external = false;\r\n\r\n  for (i = 0; i < arguments.length;) {\r\n    n = new this(arguments[i++]);\r\n    if (!n.d) {\r\n      if (n.s) {\r\n        external = true;\r\n        return new this(1 / 0);\r\n      }\r\n      t = n;\r\n    } else if (t.d) {\r\n      t = t.plus(n.times(n));\r\n    }\r\n  }\r\n\r\n  external = true;\r\n\r\n  return t.sqrt();\r\n}\r\n\r\n\r\n/*\r\n * Return true if object is a Decimal instance (where Decimal is any Decimal constructor),\r\n * otherwise return false.\r\n *\r\n */\r\nfunction isDecimalInstance(obj) {\r\n  return obj instanceof Decimal || obj && obj.toStringTag === tag || false;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural logarithm of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction ln(x) {\r\n  return new this(x).ln();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the log of `x` to the base `y`, or to base 10 if no base\r\n * is specified, rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * log[y](x)\r\n *\r\n * x {number|string|bigint|Decimal} The argument of the logarithm.\r\n * y {number|string|bigint|Decimal} The base of the logarithm.\r\n *\r\n */\r\nfunction log(x, y) {\r\n  return new this(x).log(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the base 2 logarithm of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction log2(x) {\r\n  return new this(x).log(2);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the base 10 logarithm of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction log10(x) {\r\n  return new this(x).log(10);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the maximum of the arguments.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction max() {\r\n  return maxOrMin(this, arguments, -1);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the minimum of the arguments.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction min() {\r\n  return maxOrMin(this, arguments, 1);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` modulo `y`, rounded to `precision` significant digits\r\n * using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction mod(x, y) {\r\n  return new this(x).mod(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` multiplied by `y`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction mul(x, y) {\r\n  return new this(x).mul(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` raised to the power `y`, rounded to precision\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} The base.\r\n * y {number|string|bigint|Decimal} The exponent.\r\n *\r\n */\r\nfunction pow(x, y) {\r\n  return new this(x).pow(y);\r\n}\r\n\r\n\r\n/*\r\n * Returns a new Decimal with a random value equal to or greater than 0 and less than 1, and with\r\n * `sd`, or `Decimal.precision` if `sd` is omitted, significant digits (or less if trailing zeros\r\n * are produced).\r\n *\r\n * [sd] {number} Significant digits. Integer, 0 to MAX_DIGITS inclusive.\r\n *\r\n */\r\nfunction random(sd) {\r\n  var d, e, k, n,\r\n    i = 0,\r\n    r = new this(1),\r\n    rd = [];\r\n\r\n  if (sd === void 0) sd = this.precision;\r\n  else checkInt32(sd, 1, MAX_DIGITS);\r\n\r\n  k = Math.ceil(sd / LOG_BASE);\r\n\r\n  if (!this.crypto) {\r\n    for (; i < k;) rd[i++] = Math.random() * 1e7 | 0;\r\n\r\n  // Browsers supporting crypto.getRandomValues.\r\n  } else if (crypto.getRandomValues) {\r\n    d = crypto.getRandomValues(new Uint32Array(k));\r\n\r\n    for (; i < k;) {\r\n      n = d[i];\r\n\r\n      // 0 <= n < 4294967296\r\n      // Probability n >= 4.29e9, is 4967296 / 4294967296 = 0.00116 (1 in 865).\r\n      if (n >= 4.29e9) {\r\n        d[i] = crypto.getRandomValues(new Uint32Array(1))[0];\r\n      } else {\r\n\r\n        // 0 <= n <= 4289999999\r\n        // 0 <= (n % 1e7) <= 9999999\r\n        rd[i++] = n % 1e7;\r\n      }\r\n    }\r\n\r\n  // Node.js supporting crypto.randomBytes.\r\n  } else if (crypto.randomBytes) {\r\n\r\n    // buffer\r\n    d = crypto.randomBytes(k *= 4);\r\n\r\n    for (; i < k;) {\r\n\r\n      // 0 <= n < 2147483648\r\n      n = d[i] + (d[i + 1] << 8) + (d[i + 2] << 16) + ((d[i + 3] & 0x7f) << 24);\r\n\r\n      // Probability n >= 2.14e9, is 7483648 / 2147483648 = 0.0035 (1 in 286).\r\n      if (n >= 2.14e9) {\r\n        crypto.randomBytes(4).copy(d, i);\r\n      } else {\r\n\r\n        // 0 <= n <= 2139999999\r\n        // 0 <= (n % 1e7) <= 9999999\r\n        rd.push(n % 1e7);\r\n        i += 4;\r\n      }\r\n    }\r\n\r\n    i = k / 4;\r\n  } else {\r\n    throw Error(cryptoUnavailable);\r\n  }\r\n\r\n  k = rd[--i];\r\n  sd %= LOG_BASE;\r\n\r\n  // Convert trailing digits to zeros according to sd.\r\n  if (k && sd) {\r\n    n = mathpow(10, LOG_BASE - sd);\r\n    rd[i] = (k / n | 0) * n;\r\n  }\r\n\r\n  // Remove trailing words which are zero.\r\n  for (; rd[i] === 0; i--) rd.pop();\r\n\r\n  // Zero?\r\n  if (i < 0) {\r\n    e = 0;\r\n    rd = [0];\r\n  } else {\r\n    e = -1;\r\n\r\n    // Remove leading words which are zero and adjust exponent accordingly.\r\n    for (; rd[0] === 0; e -= LOG_BASE) rd.shift();\r\n\r\n    // Count the digits of the first word of rd to determine leading zeros.\r\n    for (k = 1, n = rd[0]; n >= 10; n /= 10) k++;\r\n\r\n    // Adjust the exponent for leading zeros of the first word of rd.\r\n    if (k < LOG_BASE) e -= LOG_BASE - k;\r\n  }\r\n\r\n  r.e = e;\r\n  r.d = rd;\r\n\r\n  return r;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` rounded to an integer using rounding mode `rounding`.\r\n *\r\n * To emulate `Math.round`, set rounding to 7 (ROUND_HALF_CEIL).\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction round(x) {\r\n  return finalise(x = new this(x), x.e + 1, this.rounding);\r\n}\r\n\r\n\r\n/*\r\n * Return\r\n *   1    if x > 0,\r\n *  -1    if x < 0,\r\n *   0    if x is 0,\r\n *  -0    if x is -0,\r\n *   NaN  otherwise\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction sign(x) {\r\n  x = new this(x);\r\n  return x.d ? (x.d[0] ? x.s : 0 * x.s) : x.s || NaN;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the sine of `x`, rounded to `precision` significant digits\r\n * using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction sin(x) {\r\n  return new this(x).sin();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic sine of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction sinh(x) {\r\n  return new this(x).sinh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the square root of `x`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction sqrt(x) {\r\n  return new this(x).sqrt();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` minus `y`, rounded to `precision` significant digits\r\n * using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction sub(x, y) {\r\n  return new this(x).sub(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the sum of the arguments, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * Only the result is rounded, not the intermediate calculations.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction sum() {\r\n  var i = 0,\r\n    args = arguments,\r\n    x = new this(args[i]);\r\n\r\n  external = false;\r\n  for (; x.s && ++i < args.length;) x = x.plus(args[i]);\r\n  external = true;\r\n\r\n  return finalise(x, this.precision, this.rounding);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the tangent of `x`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction tan(x) {\r\n  return new this(x).tan();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic tangent of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction tanh(x) {\r\n  return new this(x).tanh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` truncated to an integer.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction trunc(x) {\r\n  return finalise(x = new this(x), x.e + 1, 1);\r\n}\r\n\r\n\r\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toString;\r\nP[Symbol.toStringTag] = 'Decimal';\r\n\r\n// Create and configure initial Decimal constructor.\r\nexport var Decimal = P.constructor = clone(DEFAULTS);\r\n\r\n// Create the internal constants from their string values.\r\nLN10 = new Decimal(LN10);\r\nPI = new Decimal(PI);\r\n\r\nexport default Decimal;\r\n","import { Decimal } from 'decimal.js'\n\nimport { DecimalJsLike } from '../core/types/exported/DecimalJsLike'\n\nexport function isDecimalJsLike(value: unknown): value is DecimalJsLike {\n  if (Decimal.isDecimal(value)) {\n    return true\n  }\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value['s'] === 'number' &&\n    typeof value['e'] === 'number' &&\n    typeof value['toFixed'] === 'function' &&\n    Array.isArray(value['d'])\n  )\n}\n","export * from './convert'\nexport * from './dmmf'\n","import { DatamodelEnum, SchemaEnum } from './dmmf'\n\nexport function datamodelEnumToSchemaEnum(datamodelEnum: DatamodelEnum): SchemaEnum {\n  return {\n    name: datamodelEnum.name,\n    values: datamodelEnum.values.map((v) => v.name),\n  }\n}\n","import { ReadonlyDeep } from './util'\n\nexport type Document = ReadonlyDeep<{\n  datamodel: Datamodel\n  schema: Schema\n  mappings: Mappings\n}>\n\nexport type Mappings = ReadonlyDeep<{\n  modelOperations: ModelMapping[]\n  otherOperations: {\n    read: string[]\n    write: string[]\n  }\n}>\n\nexport type OtherOperationMappings = ReadonlyDeep<{\n  read: string[]\n  write: string[]\n}>\n\nexport type DatamodelEnum = ReadonlyDeep<{\n  name: string\n  values: EnumValue[]\n  dbName?: string | null\n  documentation?: string\n}>\n\nexport type SchemaEnum = ReadonlyDeep<{\n  name: string\n  values: string[]\n}>\n\nexport type EnumValue = ReadonlyDeep<{\n  name: string\n  dbName: string | null\n}>\n\nexport type Datamodel = ReadonlyDeep<{\n  models: Model[]\n  enums: DatamodelEnum[]\n  types: Model[]\n  indexes: Index[]\n}>\n\nexport type uniqueIndex = ReadonlyDeep<{\n  name: string\n  fields: string[]\n}>\nexport type PrimaryKey = ReadonlyDeep<{\n  name: string | null\n  fields: string[]\n}>\nexport type Model = ReadonlyDeep<{\n  name: string\n  dbName: string | null\n  schema: string | null\n  fields: Field[]\n  uniqueFields: string[][]\n  uniqueIndexes: uniqueIndex[]\n  documentation?: string\n  primaryKey: PrimaryKey | null\n  isGenerated?: boolean\n}>\n\nexport type FieldKind = 'scalar' | 'object' | 'enum' | 'unsupported'\n\nexport type FieldNamespace = 'model' | 'prisma'\nexport type FieldLocation = 'scalar' | 'inputObjectTypes' | 'outputObjectTypes' | 'enumTypes' | 'fieldRefTypes'\n\nexport type Field = ReadonlyDeep<{\n  kind: FieldKind\n  name: string\n  isRequired: boolean\n  isList: boolean\n  isUnique: boolean\n  isId: boolean\n  isReadOnly: boolean\n  isGenerated?: boolean // does not exist on 'type' but does on 'model'\n  isUpdatedAt?: boolean // does not exist on 'type' but does on 'model'\n  /**\n   * Describes the data type in the same the way it is defined in the Prisma schema:\n   * BigInt, Boolean, Bytes, DateTime, Decimal, Float, Int, JSON, String, $ModelName\n   */\n  type: string\n  /**\n   * Native database type, if specified.\n   * For example, `@db.VarChar(191)` is encoded as `['VarChar', ['191']]`,\n   * `@db.Text` is encoded as `['Text', []]`.\n   */\n  nativeType?: [string, string[]] | null\n  dbName?: string | null\n  hasDefaultValue: boolean\n  default?: FieldDefault | FieldDefaultScalar | FieldDefaultScalar[]\n  relationFromFields?: string[]\n  relationToFields?: string[]\n  relationOnDelete?: string\n  relationOnUpdate?: string\n  relationName?: string\n  documentation?: string\n}>\n\nexport type FieldDefault = ReadonlyDeep<{\n  name: string\n  args: Array<string | number>\n}>\n\nexport type FieldDefaultScalar = string | boolean | number\n\nexport type Index = ReadonlyDeep<{\n  model: string\n  type: IndexType\n  isDefinedOnField: boolean\n  name?: string\n  dbName?: string\n  algorithm?: string\n  clustered?: boolean\n  fields: IndexField[]\n}>\n\nexport type IndexType = 'id' | 'normal' | 'unique' | 'fulltext'\n\nexport type IndexField = ReadonlyDeep<{\n  name: string\n  sortOrder?: SortOrder\n  length?: number\n  operatorClass?: string\n}>\n\nexport type SortOrder = 'asc' | 'desc'\n\nexport type Schema = ReadonlyDeep<{\n  rootQueryType?: string\n  rootMutationType?: string\n  inputObjectTypes: {\n    // For now there are no `model` InputTypes\n    model?: InputType[]\n    prisma?: InputType[]\n  }\n  outputObjectTypes: {\n    model: OutputType[]\n    prisma: OutputType[]\n  }\n  enumTypes: {\n    model?: SchemaEnum[]\n    prisma: SchemaEnum[]\n  }\n  fieldRefTypes: {\n    prisma?: FieldRefType[]\n  }\n}>\n\nexport type Query = ReadonlyDeep<{\n  name: string\n  args: SchemaArg[]\n  output: QueryOutput\n}>\n\nexport type QueryOutput = ReadonlyDeep<{\n  name: string\n  isRequired: boolean\n  isList: boolean\n}>\n\nexport type TypeRef<AllowedLocations extends FieldLocation> = {\n  isList: boolean\n  type: string\n  location: AllowedLocations\n  namespace?: FieldNamespace\n}\n\nexport type InputTypeRef = TypeRef<'scalar' | 'inputObjectTypes' | 'enumTypes' | 'fieldRefTypes'>\n\nexport type SchemaArg = ReadonlyDeep<{\n  name: string\n  comment?: string\n  isNullable: boolean\n  isRequired: boolean\n  inputTypes: InputTypeRef[]\n  requiresOtherFields?: string[]\n  deprecation?: Deprecation\n}>\n\nexport type OutputType = ReadonlyDeep<{\n  name: string\n  fields: SchemaField[]\n}>\n\nexport type SchemaField = ReadonlyDeep<{\n  name: string\n  isNullable?: boolean\n  outputType: OutputTypeRef\n  args: SchemaArg[]\n  deprecation?: Deprecation\n  documentation?: string\n}>\n\nexport type OutputTypeRef = TypeRef<'scalar' | 'outputObjectTypes' | 'enumTypes'>\n\nexport type Deprecation = ReadonlyDeep<{\n  sinceVersion: string\n  reason: string\n  plannedRemovalVersion?: string\n}>\n\nexport type InputType = ReadonlyDeep<{\n  name: string\n  constraints: {\n    maxNumFields: number | null\n    minNumFields: number | null\n    fields?: string[]\n  }\n  meta?: {\n    source?: string\n    grouping?: string\n  }\n  fields: SchemaArg[]\n}>\n\nexport type FieldRefType = ReadonlyDeep<{\n  name: string\n  allowTypes: FieldRefAllowType[]\n  fields: SchemaArg[]\n}>\n\nexport type FieldRefAllowType = TypeRef<'scalar' | 'enumTypes'>\n\nexport type ModelMapping = ReadonlyDeep<{\n  model: string\n  plural: string\n  findUnique?: string | null\n  findUniqueOrThrow?: string | null\n  findFirst?: string | null\n  findFirstOrThrow?: string | null\n  findMany?: string | null\n  create?: string | null\n  createMany?: string | null\n  createManyAndReturn?: string | null\n  update?: string | null\n  updateMany?: string | null\n  updateManyAndReturn?: string | null\n  upsert?: string | null\n  delete?: string | null\n  deleteMany?: string | null\n  aggregate?: string | null\n  groupBy?: string | null\n  count?: string | null\n  findRaw?: string | null\n  aggregateRaw?: string | null\n}>\n\nexport enum ModelAction {\n  findUnique = 'findUnique',\n  findUniqueOrThrow = 'findUniqueOrThrow',\n  findFirst = 'findFirst',\n  findFirstOrThrow = 'findFirstOrThrow',\n  findMany = 'findMany',\n  create = 'create',\n  createMany = 'createMany',\n  createManyAndReturn = 'createManyAndReturn',\n  update = 'update',\n  updateMany = 'updateMany',\n  updateManyAndReturn = 'updateManyAndReturn',\n  upsert = 'upsert',\n  delete = 'delete',\n  deleteMany = 'deleteMany',\n  groupBy = 'groupBy',\n  count = 'count', // TODO: count does not actually exist in DMMF\n  aggregate = 'aggregate',\n  findRaw = 'findRaw',\n  aggregateRaw = 'aggregateRaw',\n}\n","import * as DMMF from '@prisma/dmmf'\nimport indentString from 'indent-string'\nimport { bold, dim, gray, red, underline } from 'kleur/colors'\n\nimport { CallSite, LocationInFile } from './CallSite'\nimport { SourceFileSlice } from './SourceFileSlice'\n\ndeclare global {\n  /**\n   * a global variable that is injected by us via jest to make our snapshots\n   * work in clients that cannot read from disk (e.g. wasm or edge clients)\n   */\n  let $getTemplateParameters: typeof getTemplateParameters | undefined\n}\n\nexport interface ErrorArgs {\n  callsite?: CallSite\n  originalMethod: string\n  message: string\n  isPanic?: boolean\n  showColors?: boolean\n  callArguments?: string\n}\n\ntype Colors = {\n  red: (str: string) => string\n  gray: (str: string) => string\n  dim: (str: string) => string\n  bold: (str: string) => string\n  underline: (str: string) => string\n  highlightSource: (source: SourceFileSlice) => SourceFileSlice\n}\n\nconst colorsEnabled: Colors = {\n  red,\n  gray,\n  dim,\n  bold,\n  underline,\n  highlightSource: (source) => source.highlight(),\n}\n\nconst colorsDisabled: Colors = {\n  red: (str) => str,\n  gray: (str) => str,\n  dim: (str) => str,\n  bold: (str) => str,\n  underline: (str) => str,\n  highlightSource: (source) => source,\n}\n\ntype ErrorContextTemplateParameters = {\n  functionName: string\n  message: string\n  location?: LocationInFile\n  contextLines?: SourceFileSlice\n  callArguments?: string\n  isPanic: boolean\n}\n\nfunction getRawTemplateParameters({\n  message,\n  originalMethod,\n  isPanic,\n  callArguments,\n}: ErrorArgs): ErrorContextTemplateParameters {\n  return {\n    functionName: `prisma.${originalMethod}()`,\n    message,\n    isPanic: isPanic ?? false,\n    callArguments,\n  }\n}\n\nexport function getTemplateParameters(\n  { callsite, message, originalMethod, isPanic, callArguments }: ErrorArgs,\n  colors: Colors,\n): ErrorContextTemplateParameters {\n  const templateParameters = getRawTemplateParameters({ message, originalMethod, isPanic, callArguments })\n\n  // @ts-ignore\n  if (!callsite || typeof window !== 'undefined') {\n    return templateParameters\n  }\n\n  if (process.env.NODE_ENV === 'production') {\n    return templateParameters\n  }\n\n  const callLocation = callsite.getLocation()\n  if (!callLocation || !callLocation.lineNumber || !callLocation.columnNumber) {\n    return templateParameters\n  }\n\n  const contextFirstLine = Math.max(1, callLocation.lineNumber - 3)\n  let source = SourceFileSlice.read(callLocation.fileName)?.slice(contextFirstLine, callLocation.lineNumber)\n  const invocationLine = source?.lineAt(callLocation.lineNumber)\n  if (source && invocationLine) {\n    const invocationLineIndent = getIndent(invocationLine)\n    const invocationCallCode = findPrismaActionCall(invocationLine)\n    if (!invocationCallCode) {\n      return templateParameters\n    }\n    templateParameters.functionName = `${invocationCallCode.code})`\n    templateParameters.location = callLocation\n\n    if (!isPanic) {\n      source = source.mapLineAt(callLocation.lineNumber, (line) => line.slice(0, invocationCallCode.openingBraceIndex))\n    }\n\n    source = colors.highlightSource(source)\n    const numberColumnWidth = String(source.lastLineNumber).length\n    templateParameters.contextLines = source\n      .mapLines((line, lineNumber) => colors.gray(String(lineNumber).padStart(numberColumnWidth)) + ' ' + line)\n      .mapLines((line) => colors.dim(line))\n      .prependSymbolAt(callLocation.lineNumber, colors.bold(colors.red('')))\n\n    if (callArguments) {\n      let indentValue = invocationLineIndent + numberColumnWidth + 1 /* space between number and code */\n      indentValue += 2 // arrow + space between arrow and number\n\n      // indent all lines but first, because first line of the arguments will be printed\n      // on the same line as the function call\n      templateParameters.callArguments = indentString(callArguments, indentValue).slice(indentValue)\n    }\n  }\n  return templateParameters\n}\n\nfunction findPrismaActionCall(str: string): { code: string; openingBraceIndex: number } | null {\n  const allActions = Object.keys(DMMF.ModelAction).join('|')\n  const regexp = new RegExp(String.raw`\\.(${allActions})\\(`)\n  const match = regexp.exec(str)\n  if (match) {\n    const openingBraceIndex = match.index + match[0].length\n    // to get the code we are slicing the string up to a found brace. We start\n    // with first non-space character if space is found in the line before that or\n    // 0 if it is not.\n    const statementStart = str.lastIndexOf(' ', match.index) + 1\n    return {\n      code: str.slice(statementStart, openingBraceIndex),\n      openingBraceIndex,\n    }\n  }\n  return null\n}\n\nfunction getIndent(line: string): number {\n  let spaceCount = 0\n  for (let i = 0; i < line.length; i++) {\n    if (line.charAt(i) !== ' ') {\n      return spaceCount\n    }\n    spaceCount++\n  }\n\n  return spaceCount\n}\n\nfunction stringifyErrorMessage(\n  { functionName, location, message, isPanic, contextLines, callArguments }: ErrorContextTemplateParameters,\n  colors: Colors,\n) {\n  const lines: string[] = ['']\n\n  const introSuffix = location ? ' in' : ':'\n  if (isPanic) {\n    lines.push(colors.red(`Oops, an unknown error occurred! This is ${colors.bold('on us')}, you did nothing wrong.`))\n    lines.push(colors.red(`It occurred in the ${colors.bold(`\\`${functionName}\\``)} invocation${introSuffix}`))\n  } else {\n    lines.push(colors.red(`Invalid ${colors.bold(`\\`${functionName}\\``)} invocation${introSuffix}`))\n  }\n\n  if (location) {\n    lines.push(colors.underline(stringifyLocationInFile(location)))\n  }\n\n  if (contextLines) {\n    lines.push('')\n\n    const contextLineParts = [contextLines.toString()]\n\n    if (callArguments) {\n      contextLineParts.push(callArguments)\n      contextLineParts.push(colors.dim(')'))\n    }\n    lines.push(contextLineParts.join(''))\n    if (callArguments) {\n      lines.push('')\n    }\n  } else {\n    lines.push('')\n    if (callArguments) {\n      lines.push(callArguments)\n    }\n    lines.push('')\n  }\n\n  lines.push(message)\n  return lines.join('\\n')\n}\n\nfunction stringifyLocationInFile(location: LocationInFile): string {\n  const parts = [location.fileName]\n  if (location.lineNumber) {\n    parts.push(String(location.lineNumber))\n  }\n\n  if (location.columnNumber) {\n    parts.push(String(location.columnNumber))\n  }\n\n  return parts.join(':')\n}\n\nexport function createErrorMessageWithContext(args: ErrorArgs): string {\n  const colors = args.showColors ? colorsEnabled : colorsDisabled\n  let templateParameters: ErrorContextTemplateParameters\n\n  if (\n    TARGET_BUILD_TYPE === 'wasm-engine-edge' ||\n    TARGET_BUILD_TYPE === 'wasm-compiler-edge' ||\n    TARGET_BUILD_TYPE === 'edge'\n  ) {\n    if (typeof $getTemplateParameters !== 'undefined') {\n      templateParameters = $getTemplateParameters(args, colors)\n    } else {\n      templateParameters = getRawTemplateParameters(args)\n    }\n  } else {\n    templateParameters = getTemplateParameters(args, colors)\n  }\n\n  return stringifyErrorMessage(templateParameters, colors)\n}\n","import fs from 'fs'\n\nimport { highlightTS } from '../highlight/highlight'\nimport { dedent } from './dedent'\n\n/**\n * Class represents a source code or it's slice.\n * Provides various methods for manipulating individual lines\n * of the files using original files line numbers, even if the file was\n * sliced\n */\nexport class SourceFileSlice {\n  /**\n   * First line, stored in the slice\n   */\n  readonly firstLineNumber: number\n  private lines: string[]\n\n  static read(filePath: string): SourceFileSlice | null {\n    let content: string\n    try {\n      content = fs.readFileSync(filePath, 'utf-8')\n    } catch (e) {\n      return null\n    }\n\n    return SourceFileSlice.fromContent(content)\n  }\n\n  static fromContent(content: string): SourceFileSlice {\n    const lines = content.split(/\\r?\\n/)\n\n    return new SourceFileSlice(1, lines)\n  }\n\n  private constructor(firstLine: number, lines: string[]) {\n    this.firstLineNumber = firstLine\n    this.lines = lines\n  }\n\n  /**\n   * First line, stored in the slice\n   */\n  get lastLineNumber(): number {\n    return this.firstLineNumber + this.lines.length - 1\n  }\n\n  /**\n   * Returns new `SourceFileLines` object, where specified\n   * `lineNumber` is transformed, using provided `mapFn`\n   * @param lineNumber\n   * @param mapFn\n   * @returns\n   */\n  mapLineAt(lineNumber: number, mapFn: (line: string) => string): SourceFileSlice {\n    if (lineNumber < this.firstLineNumber || lineNumber > this.lines.length + this.firstLineNumber) {\n      return this\n    }\n    const idx = lineNumber - this.firstLineNumber\n    const newLines = [...this.lines]\n    newLines[idx] = mapFn(newLines[idx])\n    return new SourceFileSlice(this.firstLineNumber, newLines)\n  }\n\n  /**\n   * Returns new `SourceFileLines` object, where each line is transformed\n   * with provided `mapFn` callback. Callback receives content of the line and\n   * original line number\n   * @param mapFn\n   * @returns\n   */\n  mapLines(mapFn: (line: string, lineNumber: number) => string): SourceFileSlice {\n    return new SourceFileSlice(\n      this.firstLineNumber,\n      this.lines.map((line, i) => mapFn(line, this.firstLineNumber + i)),\n    )\n  }\n\n  /**\n   * Returns contents of the specified line\n   * @param lineNumber\n   * @returns\n   */\n  lineAt(lineNumber: number): string | undefined {\n    return this.lines[lineNumber - this.firstLineNumber]\n  }\n\n  /**\n   * Prepends a character to the specified line and adds padding\n   * to all the other lines so that they'll align\n   * @param atLine\n   * @param str\n   * @returns\n   */\n  prependSymbolAt(atLine: number, str: string): SourceFileSlice {\n    return this.mapLines((line, lineNumber) => {\n      if (lineNumber === atLine) {\n        return `${str} ${line}`\n      }\n      return `  ${line}`\n    })\n  }\n\n  /**\n   * Creates a new slice from a subset of specified lines of the new code\n   * Lines of a slice can still be manipulated using their number in original file\n   *\n   * @example\n   * ```ts\n   * const slice = source.slice(80, 100)\n   * slice.lineAt(80) === source.lineAt(80)\n   * ```\n   *\n   * @param fromLine\n   * @param toLine\n   * @returns\n   */\n  slice(fromLine: number, toLine: number): SourceFileSlice {\n    const slicedLines = this.lines.slice(fromLine - 1, toLine).join('\\n')\n    return new SourceFileSlice(fromLine, dedent(slicedLines).split('\\n'))\n  }\n\n  /**\n   * Returns new `SourceFileLines` object, where code inside of it have been\n   * highlighted as typescript\n   * @returns\n   */\n  highlight(): SourceFileSlice {\n    const highlighted = highlightTS(this.toString())\n    return new SourceFileSlice(this.firstLineNumber, highlighted.split('\\n'))\n  }\n\n  toString(): string {\n    return this.lines.join('\\n')\n  }\n}\n","import { blue, bold, cyan, gray, green, yellow } from 'kleur/colors'\n\nimport type { Theme } from './types'\n\nexport const theme: Theme = {\n  keyword: cyan,\n  entity: cyan,\n  value: (s) => bold(blue(s)),\n  punctuation: blue,\n  directive: cyan,\n  function: cyan,\n  variable: (s) => bold(blue(s)),\n  string: (s) => bold(green(s)),\n  boolean: yellow,\n  number: cyan,\n  comment: gray,\n}\n","import { theme } from './theme'\n\nconst identity = (str: string) => str\n\n/* eslint-disable */\n\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\nconst _self: any = {}\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n * MIT license http://www.opensource.org/licenses/mit-license.php/\n * @author Lea Verou http://lea.verou.me\n */\n\n// Private helper vars\nlet uniqueId = 0\n\nexport var Prism: any = {\n  manual: _self.Prism && _self.Prism.manual,\n  disableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n  util: {\n    encode: function (tokens: any) {\n      if (tokens instanceof Token) {\n        const anyTokens: any = tokens\n        return new Token(anyTokens.type, Prism.util.encode(anyTokens.content), anyTokens.alias)\n      } else if (Array.isArray(tokens)) {\n        return tokens.map(Prism.util.encode)\n      } else {\n        return tokens\n          .replace(/&/g, '&amp;')\n          .replace(/</g, '&lt;')\n          .replace(/\\u00a0/g, ' ')\n      }\n    },\n\n    type: function (o) {\n      return Object.prototype.toString.call(o).slice(8, -1)\n    },\n\n    objId: function (obj) {\n      if (!obj['__id']) {\n        Object.defineProperty(obj, '__id', { value: ++uniqueId })\n      }\n      return obj['__id']\n    },\n\n    // Deep clone a language definition (e.g. to extend it)\n    clone: function deepClone(o, visited?: any) {\n      let clone,\n        id,\n        type = Prism.util.type(o)\n      visited = visited || {}\n\n      switch (type) {\n        case 'Object':\n          id = Prism.util.objId(o)\n          if (visited[id]) {\n            return visited[id]\n          }\n          clone = {}\n          visited[id] = clone\n\n          for (const key in o) {\n            if (o.hasOwnProperty(key)) {\n              clone[key] = deepClone(o[key], visited)\n            }\n          }\n\n          return clone\n\n        case 'Array':\n          id = Prism.util.objId(o)\n          if (visited[id]) {\n            return visited[id]\n          }\n          clone = []\n          visited[id] = clone\n\n          o.forEach(function (v, i) {\n            clone[i] = deepClone(v, visited)\n          })\n\n          return clone\n\n        default:\n          return o\n      }\n    },\n  },\n\n  languages: {\n    extend: function (id, redef) {\n      const lang = Prism.util.clone(Prism.languages[id])\n\n      for (const key in redef) {\n        lang[key] = redef[key]\n      }\n\n      return lang\n    },\n\n    /**\n     * Insert a token before another token in a language literal\n     * As this needs to recreate the object (we cannot actually insert before keys in object literals),\n     * we cannot just provide an object, we need an object and a key.\n     * @param inside The key (or language id) of the parent\n     * @param before The key to insert before.\n     * @param insert Object with the key/value pairs to insert\n     * @param root The object that contains `inside`. If equal to Prism.languages, it can be omitted.\n     */\n    insertBefore: function (inside, before, insert, root) {\n      root = root || Prism.languages\n      const grammar = root[inside]\n      const ret = {}\n\n      for (const token in grammar) {\n        if (grammar.hasOwnProperty(token)) {\n          if (token == before) {\n            for (const newToken in insert) {\n              if (insert.hasOwnProperty(newToken)) {\n                ret[newToken] = insert[newToken]\n              }\n            }\n          }\n\n          // Do not insert token which also occur in insert. See #1525\n          if (!insert.hasOwnProperty(token)) {\n            ret[token] = grammar[token]\n          }\n        }\n      }\n\n      const old = root[inside]\n      root[inside] = ret\n\n      // Update references in other language definitions\n      Prism.languages.DFS(Prism.languages, function (this: any, key, value) {\n        if (value === old && key != inside) {\n          this[key] = ret\n        }\n      })\n\n      return ret\n    },\n\n    // Traverse a language definition with Depth First Search\n    DFS: function DFS(o, callback, type?: any, visited?: any) {\n      visited = visited || {}\n\n      const objId = Prism.util.objId\n\n      for (const i in o) {\n        if (o.hasOwnProperty(i)) {\n          callback.call(o, i, o[i], type || i)\n\n          const property = o[i],\n            propertyType = Prism.util.type(property)\n\n          if (propertyType === 'Object' && !visited[objId(property)]) {\n            visited[objId(property)] = true\n            DFS(property, callback, null, visited)\n          } else if (propertyType === 'Array' && !visited[objId(property)]) {\n            visited[objId(property)] = true\n            DFS(property, callback, i, visited)\n          }\n        }\n      }\n    },\n  },\n  plugins: {},\n\n  highlight: function (text, grammar, language) {\n    const env: any = {\n      code: text,\n      grammar: grammar,\n      language: language,\n    }\n    Prism.hooks.run('before-tokenize', env)\n    env.tokens = Prism.tokenize(env.code, env.grammar)\n    Prism.hooks.run('after-tokenize', env)\n    return Token.stringify(Prism.util.encode(env.tokens), env.language)\n  },\n\n  matchGrammar: function (text, strarr, grammar, index, startPos, oneshot, target?: any) {\n    for (const token in grammar) {\n      if (!grammar.hasOwnProperty(token) || !grammar[token]) {\n        continue\n      }\n\n      if (token == target) {\n        return\n      }\n\n      let patterns = grammar[token]\n      patterns = Prism.util.type(patterns) === 'Array' ? patterns : [patterns]\n\n      for (let j = 0; j < patterns.length; ++j) {\n        let pattern = patterns[j],\n          inside = pattern.inside,\n          lookbehind = !!pattern.lookbehind,\n          greedy = !!pattern.greedy,\n          lookbehindLength = 0,\n          alias = pattern.alias\n\n        if (greedy && !pattern.pattern.global) {\n          // Without the global flag, lastIndex won't work\n          const flags = pattern.pattern.toString().match(/[imuy]*$/)[0]\n          pattern.pattern = RegExp(pattern.pattern.source, flags + 'g')\n        }\n\n        pattern = pattern.pattern || pattern\n\n        // Dont cache length as it changes during the loop\n        for (let i = index, pos = startPos; i < strarr.length; pos += strarr[i].length, ++i) {\n          let str = strarr[i]\n\n          if (strarr.length > text.length) {\n            // Something went terribly wrong, ABORT, ABORT!\n            return\n          }\n\n          if (str instanceof Token) {\n            continue\n          }\n\n          if (greedy && i != strarr.length - 1) {\n            pattern.lastIndex = pos\n            var match = pattern.exec(text)\n            if (!match) {\n              break\n            }\n\n            var from = match.index + (lookbehind ? match[1].length : 0),\n              to = match.index + match[0].length,\n              k = i,\n              p = pos\n\n            for (let len = strarr.length; k < len && (p < to || (!strarr[k].type && !strarr[k - 1].greedy)); ++k) {\n              p += strarr[k].length\n              // Move the index i to the element in strarr that is closest to from\n              if (from >= p) {\n                ++i\n                pos = p\n              }\n            }\n\n            // If strarr[i] is a Token, then the match starts inside another Token, which is invalid\n            if (strarr[i] instanceof Token) {\n              continue\n            }\n\n            // Number of tokens to delete and replace with the new match\n            delNum = k - i\n            str = text.slice(pos, p)\n            match.index -= pos\n          } else {\n            pattern.lastIndex = 0\n\n            var match = pattern.exec(str),\n              delNum = 1\n          }\n\n          if (!match) {\n            if (oneshot) {\n              break\n            }\n\n            continue\n          }\n\n          if (lookbehind) {\n            lookbehindLength = match[1] ? match[1].length : 0\n          }\n\n          var from = match.index + lookbehindLength,\n            match = match[0].slice(lookbehindLength),\n            to = from + match.length,\n            before = str.slice(0, from),\n            after = str.slice(to)\n\n          const args: any = [i, delNum]\n\n          if (before) {\n            ++i\n            pos += before.length\n            args.push(before)\n          }\n\n          const wrapped = new Token(token, inside ? Prism.tokenize(match, inside) : match, alias, match, greedy)\n\n          args.push(wrapped)\n\n          if (after) {\n            args.push(after)\n          }\n\n          Array.prototype.splice.apply(strarr, args)\n\n          if (delNum != 1) Prism.matchGrammar(text, strarr, grammar, i, pos, true, token)\n\n          if (oneshot) break\n        }\n      }\n    }\n  },\n\n  tokenize: function (text, grammar) {\n    const strarr = [text]\n\n    const rest = grammar.rest\n\n    if (rest) {\n      for (const token in rest) {\n        grammar[token] = rest[token]\n      }\n\n      delete grammar.rest\n    }\n\n    Prism.matchGrammar(text, strarr, grammar, 0, 0, false)\n\n    return strarr\n  },\n\n  hooks: {\n    all: {},\n\n    add: function (name, callback) {\n      const hooks = Prism.hooks.all\n\n      hooks[name] = hooks[name] || []\n\n      hooks[name].push(callback)\n    },\n\n    run: function (name, env) {\n      const callbacks = Prism.hooks.all[name]\n\n      if (!callbacks || !callbacks.length) {\n        return\n      }\n\n      for (var i = 0, callback; (callback = callbacks[i++]); ) {\n        callback(env)\n      }\n    },\n  },\n\n  Token: Token,\n}\n\nPrism.languages.clike = {\n  comment: [\n    {\n      pattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n      lookbehind: true,\n    },\n    {\n      pattern: /(^|[^\\\\:])\\/\\/.*/,\n      lookbehind: true,\n      greedy: true,\n    },\n  ],\n  string: {\n    pattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true,\n  },\n  'class-name': {\n    pattern: /((?:\\b(?:class|interface|extends|implements|trait|instanceof|new)\\s+)|(?:catch\\s+\\())[\\w.\\\\]+/i,\n    lookbehind: true,\n    inside: {\n      punctuation: /[.\\\\]/,\n    },\n  },\n  keyword: /\\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\b/,\n  boolean: /\\b(?:true|false)\\b/,\n  function: /\\w+(?=\\()/,\n  number: /\\b0x[\\da-f]+\\b|(?:\\b\\d+\\.?\\d*|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n  operator: /--?|\\+\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\|\\|?|\\?|\\*|\\/|~|\\^|%/,\n  punctuation: /[{}[\\];(),.:]/,\n}\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n  'class-name': [\n    Prism.languages.clike['class-name'],\n    {\n      pattern: /(^|[^$\\w\\xA0-\\uFFFF])[_$A-Z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\.(?:prototype|constructor))/,\n      lookbehind: true,\n    },\n  ],\n  keyword: [\n    {\n      pattern: /((?:^|})\\s*)(?:catch|finally)\\b/,\n      lookbehind: true,\n    },\n    {\n      pattern:\n        /(^|[^.])\\b(?:as|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n      lookbehind: true,\n    },\n  ],\n  number:\n    /\\b(?:(?:0[xX](?:[\\dA-Fa-f](?:_[\\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\\d(?:_\\d)?)+n|NaN|Infinity)\\b|(?:\\b(?:\\d(?:_\\d)?)+\\.?(?:\\d(?:_\\d)?)*|\\B\\.(?:\\d(?:_\\d)?)+)(?:[Ee][+-]?(?:\\d(?:_\\d)?)+)?/,\n  // Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n  function: /[_$a-zA-Z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n  operator: /-[-=]?|\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\|[|=]?|\\*\\*?=?|\\/=?|~|\\^=?|%=?|\\?|\\.{3}/,\n})\n\nPrism.languages.javascript['class-name'][0].pattern =\n  /(\\b(?:class|interface|extends|implements|instanceof|new)\\s+)[\\w.\\\\]+/\n\nPrism.languages.insertBefore('javascript', 'keyword', {\n  regex: {\n    pattern:\n      /((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s])\\s*)\\/(\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[gimyus]{0,6}(?=\\s*($|[\\r\\n,.;})\\]]))/,\n    lookbehind: true,\n    greedy: true,\n  },\n  // This must be declared before keyword because we use \"function\" inside the look-forward\n  'function-variable': {\n    pattern:\n      /[_$a-zA-Z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|[_$a-zA-Z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*)\\s*=>))/,\n    alias: 'function',\n  },\n  parameter: [\n    {\n      pattern: /(function(?:\\s+[_$A-Za-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*)?\\s*\\(\\s*)(?!\\s)(?:[^()]|\\([^()]*\\))+?(?=\\s*\\))/,\n      lookbehind: true,\n      inside: Prism.languages.javascript,\n    },\n    {\n      pattern: /[_$a-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\s*=>)/i,\n      inside: Prism.languages.javascript,\n    },\n    {\n      pattern: /(\\(\\s*)(?!\\s)(?:[^()]|\\([^()]*\\))+?(?=\\s*\\)\\s*=>)/,\n      lookbehind: true,\n      inside: Prism.languages.javascript,\n    },\n    {\n      pattern:\n        /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:[_$A-Za-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*\\s*)\\(\\s*)(?!\\s)(?:[^()]|\\([^()]*\\))+?(?=\\s*\\)\\s*\\{)/,\n      lookbehind: true,\n      inside: Prism.languages.javascript,\n    },\n  ],\n  constant: /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/,\n})\n\nif (Prism.languages.markup) {\n  Prism.languages.markup.tag.addInlined('script', 'javascript')\n}\n\nPrism.languages.js = Prism.languages.javascript\n\nPrism.languages.typescript = Prism.languages.extend('javascript', {\n  // From JavaScript Prism keyword list and TypeScript language spec: https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#221-reserved-words\n  keyword:\n    /\\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\\b/,\n  builtin: /\\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\\b/,\n})\n\nPrism.languages.ts = Prism.languages.typescript\n\nexport function Token(this: any, type, content, alias, matchedStr?: any, greedy?: any) {\n  this.type = type\n  this.content = content\n  this.alias = alias\n  // Copy of the full string this token was created from\n  this.length = (matchedStr || '').length | 0\n  this.greedy = !!greedy\n}\n\nToken.stringify = function (o, language?: any) {\n  if (typeof o == 'string') {\n    return o\n  }\n\n  if (Array.isArray(o)) {\n    return o\n      .map(function (element) {\n        return Token.stringify(element, language)\n      })\n      .join('')\n  }\n\n  return getColorForSyntaxKind(o.type)(o.content)\n}\n\nfunction getColorForSyntaxKind(syntaxKind: string) {\n  return theme[syntaxKind] || identity\n}\n","import { Prism, Token } from './prism'\nimport type { SyntaxDefinition } from './types'\n\nexport function highlightTS(str: string) {\n  return highlight(str, Prism.languages.javascript)\n}\n\nfunction highlight(str: string, grammar: SyntaxDefinition) {\n  const tokens = Prism.tokenize(str, grammar)\n  return tokens.map((t) => Token.stringify(t)).join('')\n}\n","import strip from 'strip-indent'\n\nexport function dedent(str: string): string {\n  return strip(str)\n}\n","import { uncapitalize } from '@prisma/client-common'\nimport levenshtein from 'js-levenshtein'\n\nimport {\n  ArgumentDescription,\n  EmptySelectionError,\n  InputTypeDescription,\n  InvalidArgumentTypeError,\n  InvalidArgumentValueError,\n  OutputTypeDescription,\n  RequiredArgumentMissingError,\n  SomeFieldsMissingError,\n  TooManyFieldsGivenError,\n  UnknownArgumentError,\n  UnknownInputFieldError,\n  UnknownSelectionFieldError,\n  ValueTooLargeError,\n} from '../engines'\nimport { GlobalOmitOptions } from '../jsonProtocol/serializeJsonQuery'\nimport {\n  IncludeOnScalarError,\n  InvalidSelectionValueError,\n  MutuallyExclusiveFieldsError,\n  ValidationError,\n} from '../types/ValidationError'\nimport { applyUnionError } from './applyUnionError'\nimport { ArgumentsRenderingTree } from './ArgumentsRenderingTree'\nimport { Colors } from './base'\nimport { ObjectField } from './ObjectField'\nimport { ObjectFieldSuggestion } from './ObjectFieldSuggestion'\nimport { ObjectValue } from './ObjectValue'\nimport { ScalarValue } from './ScalarValue'\nimport { SuggestionObjectValue } from './SuggestionObjectValue'\n\n/**\n * Given the validation error and arguments rendering tree, applies corresponding\n * formatting to an error tree and adds all relevant messages.\n *\n * @param error\n * @param args\n */\nexport function applyValidationError(\n  error: ValidationError,\n  args: ArgumentsRenderingTree,\n  globalOmit?: GlobalOmitOptions,\n): void {\n  switch (error.kind) {\n    case 'MutuallyExclusiveFields':\n      applyMutuallyExclusiveFieldsError(error, args)\n      break\n    case 'IncludeOnScalar':\n      applyIncludeOnScalarError(error, args)\n      break\n    case 'EmptySelection':\n      applyEmptySelectionError(error, args, globalOmit)\n      break\n    case 'UnknownSelectionField':\n      applyUnknownSelectionFieldError(error, args)\n      break\n    case 'InvalidSelectionValue':\n      applyInvalidSelectionValueError(error, args)\n      break\n    case 'UnknownArgument':\n      applyUnknownArgumentError(error, args)\n      break\n    case 'UnknownInputField':\n      applyUnknownInputFieldError(error, args)\n      break\n    case 'RequiredArgumentMissing':\n      applyRequiredArgumentMissingError(error, args)\n      break\n    case 'InvalidArgumentType':\n      applyInvalidArgumentTypeError(error, args)\n      break\n    case 'InvalidArgumentValue':\n      applyInvalidArgumentValueError(error, args)\n      break\n    case 'ValueTooLarge':\n      applyValueTooLargeError(error, args)\n      break\n    case 'SomeFieldsMissing':\n      applySomeFieldsMissingError(error, args)\n      break\n    case 'TooManyFieldsGiven':\n      applyTooManyFieldsGivenError(error, args)\n      break\n    case 'Union':\n      applyUnionError(error, args, globalOmit)\n      break\n    default:\n      throw new Error('not implemented: ' + error.kind)\n  }\n}\n\nfunction applyMutuallyExclusiveFieldsError(error: MutuallyExclusiveFieldsError, argsTree: ArgumentsRenderingTree) {\n  const object = argsTree.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n  if (object) {\n    object.getField(error.firstField)?.markAsError()\n    object.getField(error.secondField)?.markAsError()\n  }\n\n  argsTree.addErrorMessage(\n    (colors) =>\n      `Please ${colors.bold('either')} use ${colors.green(`\\`${error.firstField}\\``)} or ${colors.green(\n        `\\`${error.secondField}\\``,\n      )}, but ${colors.red('not both')} at the same time.`,\n  )\n}\n\nfunction applyIncludeOnScalarError(error: IncludeOnScalarError, argsTree: ArgumentsRenderingTree) {\n  const [selectionPath, field] = splitPath(error.selectionPath)\n  const outputType = error.outputType\n\n  const object = argsTree.arguments.getDeepSelectionParent(selectionPath)?.value\n  if (object) {\n    object.getField(field)?.markAsError()\n\n    if (outputType) {\n      for (const field of outputType.fields) {\n        if (field.isRelation) {\n          object.addSuggestion(new ObjectFieldSuggestion(field.name, 'true'))\n        }\n      }\n    }\n  }\n\n  argsTree.addErrorMessage((colors) => {\n    let msg = `Invalid scalar field ${colors.red(`\\`${field}\\``)} for ${colors.bold('include')} statement`\n    if (outputType) {\n      msg += ` on model ${colors.bold(outputType.name)}. ${availableOptionsMessage(colors)}`\n    } else {\n      msg += '.'\n    }\n\n    msg += `\\nNote that ${colors.bold('include')} statements only accept relation fields.`\n    return msg\n  })\n}\n\nfunction applyEmptySelectionError(\n  error: EmptySelectionError,\n  argsTree: ArgumentsRenderingTree,\n  globalOmit?: GlobalOmitOptions,\n) {\n  const subSelection = argsTree.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n  if (subSelection) {\n    const omit = subSelection.getField('omit')?.value.asObject()\n    if (omit) {\n      applyEmptySelectionErrorOmit(error, argsTree, omit)\n      return\n    }\n    if (subSelection.hasField('select')) {\n      applyEmptySelectionErrorSelect(error, argsTree)\n      return\n    }\n  }\n\n  if (globalOmit?.[uncapitalize(error.outputType.name)]) {\n    applyEmptySelectionErrorGlobalOmit(error, argsTree)\n    return\n  }\n\n  // should never happen, but in case it does\n  argsTree.addErrorMessage(() => `Unknown field at \"${error.selectionPath.join('.')} selection\"`)\n}\n\n// case for `EmptySelectionError`, triggered by excessive omit\nfunction applyEmptySelectionErrorOmit(\n  error: EmptySelectionError,\n  argsTree: ArgumentsRenderingTree,\n  omitValue: ObjectValue,\n) {\n  omitValue.removeAllFields()\n  for (const field of error.outputType.fields) {\n    omitValue.addSuggestion(new ObjectFieldSuggestion(field.name, 'false'))\n  }\n\n  argsTree.addErrorMessage((colors) => {\n    return `The ${colors.red('omit')} statement includes every field of the model ${colors.bold(\n      error.outputType.name,\n    )}. At least one field must be included in the result`\n  })\n}\n\n// case for `EmptySelectionError`, triggered by empty/falsy `select`\nfunction applyEmptySelectionErrorSelect(error: EmptySelectionError, argsTree: ArgumentsRenderingTree) {\n  const outputType = error.outputType\n  const selection = argsTree.arguments.getDeepSelectionParent(error.selectionPath)?.value\n  const isEmpty = selection?.isEmpty() ?? false\n\n  if (selection) {\n    // If selection has fields and we get EmptySelection error, it means all fields within the\n    // selection are false. We have 2 possible ways to handle suggestions here:\n    //\n    // 1. Suggest only the fields, not present inside of the selection. Example:\n    //\n    // {\n    //   select: {\n    //     id: false\n    //     posts: false,\n    // ?   name?: true\n    // ?   email?: true\n    //  }\n    // }\n    // There are couple of possible problems here. First, we are assuming that user needs to\n    // add new field to the selection, rather than change one of the existing ones to true.\n    // Second, we might end up in a situation where all fields are already used in selection and we have nothing left to suggest.\n    //\n    // 2.Completely ignore users input and suggest all the fields. Example rendering:\n    // {\n    //  select: {\n    //  ?   id?: true\n    //  ?   posts?: true,\n    //  ?   name?: true\n    //  ?   email?: true\n    //   }\n    //  }\n    //\n    // So we will be suggesting to either change one of the fields to true, or add a new one which would be true.\n    // This is the approach we are taking and in order to it, we need to remove all the fields from selection. Code\n    // below will then add them back as a suggestion.\n    selection.removeAllFields()\n    addSelectionSuggestions(selection, outputType)\n  }\n\n  argsTree.addErrorMessage((colors) => {\n    if (isEmpty) {\n      return `The ${colors.red('`select`')} statement for type ${colors.bold(\n        outputType.name,\n      )} must not be empty. ${availableOptionsMessage(colors)}`\n    }\n    return `The ${colors.red('`select`')} statement for type ${colors.bold(outputType.name)} needs ${colors.bold(\n      'at least one truthy value',\n    )}.`\n  })\n}\n\n// case for `EmptySelectionError`, triggered by excessive global omit\nfunction applyEmptySelectionErrorGlobalOmit(error: EmptySelectionError, argsTree: ArgumentsRenderingTree) {\n  const suggestedOmitConfig = new SuggestionObjectValue()\n  for (const field of error.outputType.fields) {\n    if (!field.isRelation) {\n      suggestedOmitConfig.addField(field.name, 'false')\n    }\n  }\n\n  const omitSuggestion = new ObjectFieldSuggestion('omit', suggestedOmitConfig).makeRequired()\n\n  if (error.selectionPath.length === 0) {\n    argsTree.arguments.addSuggestion(omitSuggestion)\n  } else {\n    const [parentPath, fieldName] = splitPath(error.selectionPath)\n    const parent = argsTree.arguments.getDeepSelectionParent(parentPath)?.value.asObject()\n    const field = parent?.getField(fieldName)\n    if (field) {\n      const fieldValue = field?.value.asObject() ?? new ObjectValue()\n      fieldValue.addSuggestion(omitSuggestion)\n      field.value = fieldValue\n    }\n  }\n\n  // neither select, nor omit are used, but global omit global omit configuration for the model exists\n  argsTree.addErrorMessage((colors) => {\n    return `The global ${colors.red('omit')} configuration excludes every field of the model ${colors.bold(\n      error.outputType.name,\n    )}. At least one field must be included in the result`\n  })\n}\n\nfunction applyUnknownSelectionFieldError(error: UnknownSelectionFieldError, argsTree: ArgumentsRenderingTree) {\n  const locateResult = locateSelectionField(error.selectionPath, argsTree)\n  if (locateResult.parentKind !== 'unknown') {\n    locateResult.field.markAsError()\n    const parent = locateResult.parent\n    switch (locateResult.parentKind) {\n      case 'select':\n        addSelectionSuggestions(parent, error.outputType)\n        break\n      case 'include':\n        addInclusionSuggestions(parent, error.outputType)\n        break\n      case 'omit':\n        addOmissionSuggestions(parent, error.outputType)\n        break\n    }\n  }\n  argsTree.addErrorMessage((colors) => {\n    const parts = [`Unknown field ${colors.red(`\\`${locateResult.fieldName}\\``)}`]\n    if (locateResult.parentKind !== 'unknown') {\n      parts.push(`for ${colors.bold(locateResult.parentKind)} statement`)\n    }\n    parts.push(`on model ${colors.bold(`\\`${error.outputType.name}\\``)}.`)\n    parts.push(availableOptionsMessage(colors))\n    return parts.join(' ')\n  })\n}\n\nfunction applyInvalidSelectionValueError(error: InvalidSelectionValueError, argsTree: ArgumentsRenderingTree) {\n  const locateResult = locateSelectionField(error.selectionPath, argsTree)\n  if (locateResult.parentKind !== 'unknown') {\n    locateResult.field.value.markAsError()\n  }\n\n  argsTree.addErrorMessage((colors) => {\n    return `Invalid value for selection field \\`${colors.red(locateResult.fieldName)}\\`: ${error.underlyingError}`\n  })\n}\n\nfunction applyUnknownArgumentError(error: UnknownArgumentError, argsTree: ArgumentsRenderingTree) {\n  const argName = error.argumentPath[0]\n  const selection = argsTree.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n\n  if (selection) {\n    selection.getField(argName)?.markAsError()\n    addArgumentsSuggestions(selection, error.arguments)\n  }\n\n  argsTree.addErrorMessage((colors) =>\n    unknownArgumentMessage(\n      colors,\n      argName,\n      error.arguments.map((arg) => arg.name),\n    ),\n  )\n}\n\nfunction applyUnknownInputFieldError(error: UnknownInputFieldError, argsTree: ArgumentsRenderingTree) {\n  const [argParentPath, argName] = splitPath(error.argumentPath)\n  const selection = argsTree.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n\n  if (selection) {\n    selection.getDeepField(error.argumentPath)?.markAsError()\n    const argParent = selection.getDeepFieldValue(argParentPath)?.asObject()\n    if (argParent) {\n      addInputSuggestions(argParent, error.inputType)\n    }\n  }\n\n  argsTree.addErrorMessage((colors) =>\n    unknownArgumentMessage(\n      colors,\n      argName,\n      error.inputType.fields.map((f) => f.name),\n    ),\n  )\n}\n\nfunction unknownArgumentMessage(colors: Colors, argName: string, options: string[]) {\n  const parts = [`Unknown argument \\`${colors.red(argName)}\\`.`]\n  const suggestion = getSuggestion(argName, options)\n\n  if (suggestion) {\n    parts.push(`Did you mean \\`${colors.green(suggestion)}\\`?`)\n  }\n\n  if (options.length > 0) {\n    parts.push(availableOptionsMessage(colors))\n  }\n\n  return parts.join(' ')\n}\n\nfunction applyRequiredArgumentMissingError(error: RequiredArgumentMissingError, args: ArgumentsRenderingTree) {\n  let existingField: ObjectField | undefined = undefined\n\n  args.addErrorMessage((colors) => {\n    if (existingField?.value instanceof ScalarValue && existingField.value.text === 'null') {\n      return `Argument \\`${colors.green(argumentName)}\\` must not be ${colors.red('null')}.`\n    }\n    return `Argument \\`${colors.green(argumentName)}\\` is missing.`\n  })\n  const selection = args.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n  if (!selection) {\n    return\n  }\n\n  const [argParent, argumentName] = splitPath(error.argumentPath)\n  const objectSuggestion = new SuggestionObjectValue()\n  const parent = selection.getDeepFieldValue(argParent)?.asObject()\n  if (!parent) {\n    return\n  }\n\n  existingField = parent.getField(argumentName)\n  if (existingField) {\n    parent.removeField(argumentName)\n  }\n\n  if (error.inputTypes.length === 1 && error.inputTypes[0].kind === 'object') {\n    for (const field of error.inputTypes[0].fields) {\n      objectSuggestion.addField(field.name, field.typeNames.join(' | '))\n    }\n\n    parent.addSuggestion(new ObjectFieldSuggestion(argumentName, objectSuggestion).makeRequired())\n  } else {\n    const typeName = error.inputTypes.map(getInputTypeName).join(' | ')\n    parent.addSuggestion(new ObjectFieldSuggestion(argumentName, typeName).makeRequired())\n  }\n\n  if (error.dependentArgumentPath) {\n    selection.getDeepField(error.dependentArgumentPath)?.markAsError()\n    const [, dependentArgumentName] = splitPath(error.dependentArgumentPath)\n    args.addErrorMessage((colors) => {\n      return `Argument \\`${colors.green(argumentName)}\\` is required because argument \\`${colors.green(\n        dependentArgumentName,\n      )}\\` was provided.`\n    })\n  }\n}\n\nfunction getInputTypeName(description: InputTypeDescription) {\n  if (description.kind === 'list') {\n    return `${getInputTypeName(description.elementType)}[]`\n  }\n  return description.name\n}\n\nfunction applyInvalidArgumentTypeError(error: InvalidArgumentTypeError, args: ArgumentsRenderingTree) {\n  const argName = error.argument.name\n  const selection = args.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n  if (selection) {\n    selection.getDeepFieldValue(error.argumentPath)?.markAsError()\n  }\n\n  args.addErrorMessage((colors) => {\n    const expected = joinWithPreposition(\n      'or',\n      error.argument.typeNames.map((type) => colors.green(type)),\n    )\n    // TODO: print value\n    return `Argument \\`${colors.bold(argName)}\\`: Invalid value provided. Expected ${expected}, provided ${colors.red(\n      error.inferredType,\n    )}.`\n  })\n}\n\nfunction applyInvalidArgumentValueError(error: InvalidArgumentValueError, args: ArgumentsRenderingTree) {\n  const argName = error.argument.name\n  const selection = args.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n  if (selection) {\n    selection.getDeepFieldValue(error.argumentPath)?.markAsError()\n  }\n\n  args.addErrorMessage((colors) => {\n    const parts = [`Invalid value for argument \\`${colors.bold(argName)}\\``]\n    if (error.underlyingError) {\n      parts.push(`: ${error.underlyingError}`)\n    }\n    parts.push('.')\n    if (error.argument.typeNames.length > 0) {\n      const expected = joinWithPreposition(\n        'or',\n        error.argument.typeNames.map((type) => colors.green(type)),\n      )\n      parts.push(` Expected ${expected}.`)\n    }\n    return parts.join('')\n  })\n}\n\nfunction applyValueTooLargeError(error: ValueTooLargeError, args: ArgumentsRenderingTree) {\n  const argName = error.argument.name\n  const selection = args.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n  let printedValue: string | undefined\n  if (selection) {\n    const field = selection.getDeepField(error.argumentPath)\n    const value = field?.value\n    value?.markAsError()\n    if (value instanceof ScalarValue) {\n      printedValue = value.text\n    }\n  }\n\n  args.addErrorMessage((colors) => {\n    const parts: string[] = ['Unable to fit value']\n    if (printedValue) {\n      parts.push(colors.red(printedValue))\n    }\n    parts.push(`into a 64-bit signed integer for field \\`${colors.bold(argName)}\\``)\n\n    return parts.join(' ')\n  })\n}\n\nfunction applySomeFieldsMissingError(error: SomeFieldsMissingError, args: ArgumentsRenderingTree) {\n  const argumentName = error.argumentPath[error.argumentPath.length - 1]\n  const selection = args.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n  if (selection) {\n    const argument = selection.getDeepFieldValue(error.argumentPath)?.asObject()\n    if (argument) {\n      addInputSuggestions(argument, error.inputType)\n    }\n  }\n\n  args.addErrorMessage((colors) => {\n    const parts = [`Argument \\`${colors.bold(argumentName)}\\` of type ${colors.bold(error.inputType.name)} needs`]\n    if (error.constraints.minFieldCount === 1) {\n      if (error.constraints.requiredFields) {\n        parts.push(\n          `${colors.green('at least one of')} ${joinWithPreposition(\n            'or',\n            error.constraints.requiredFields.map((f) => `\\`${colors.bold(f)}\\``),\n          )} arguments.`,\n        )\n      } else {\n        parts.push(`${colors.green('at least one')} argument.`)\n      }\n    } else {\n      parts.push(`${colors.green(`at least ${error.constraints.minFieldCount}`)} arguments.`)\n    }\n    parts.push(availableOptionsMessage(colors))\n    return parts.join(' ')\n  })\n}\n\nfunction applyTooManyFieldsGivenError(error: TooManyFieldsGivenError, args: ArgumentsRenderingTree) {\n  const argumentName = error.argumentPath[error.argumentPath.length - 1]\n  const selection = args.arguments.getDeepSubSelectionValue(error.selectionPath)?.asObject()\n  let providedArguments: string[] = []\n  if (selection) {\n    const argument = selection.getDeepFieldValue(error.argumentPath)?.asObject()\n    if (argument) {\n      argument.markAsError()\n      providedArguments = Object.keys(argument.getFields())\n    }\n  }\n\n  args.addErrorMessage((colors) => {\n    const parts = [`Argument \\`${colors.bold(argumentName)}\\` of type ${colors.bold(error.inputType.name)} needs`]\n    if (error.constraints.minFieldCount === 1 && error.constraints.maxFieldCount == 1) {\n      parts.push(`${colors.green('exactly one')} argument,`)\n    } else if (error.constraints.maxFieldCount == 1) {\n      parts.push(`${colors.green('at most one')} argument,`)\n    } else {\n      parts.push(`${colors.green(`at most ${error.constraints.maxFieldCount}`)} arguments,`)\n    }\n\n    parts.push(\n      `but you provided ${joinWithPreposition(\n        'and',\n        providedArguments.map((arg) => colors.red(arg)),\n      )}. Please choose`,\n    )\n\n    if (error.constraints.maxFieldCount === 1) {\n      parts.push('one.')\n    } else {\n      parts.push(`${error.constraints.maxFieldCount}.`)\n    }\n\n    return parts.join(' ')\n  })\n}\n\nfunction addSelectionSuggestions(selection: ObjectValue, outputType: OutputTypeDescription) {\n  for (const field of outputType.fields) {\n    if (!selection.hasField(field.name)) {\n      selection.addSuggestion(new ObjectFieldSuggestion(field.name, 'true'))\n    }\n  }\n}\n\nfunction addInclusionSuggestions(selection: ObjectValue, outputType: OutputTypeDescription) {\n  for (const field of outputType.fields) {\n    if (field.isRelation && !selection.hasField(field.name)) {\n      selection.addSuggestion(new ObjectFieldSuggestion(field.name, 'true'))\n    }\n  }\n}\n\nfunction addOmissionSuggestions(selection: ObjectValue, outputType: OutputTypeDescription) {\n  for (const field of outputType.fields) {\n    if (!selection.hasField(field.name) && !field.isRelation) {\n      selection.addSuggestion(new ObjectFieldSuggestion(field.name, 'true'))\n    }\n  }\n}\n\nfunction addArgumentsSuggestions(argumentsParent: ObjectValue, args: ArgumentDescription[]) {\n  for (const arg of args) {\n    if (!argumentsParent.hasField(arg.name)) {\n      argumentsParent.addSuggestion(new ObjectFieldSuggestion(arg.name, arg.typeNames.join(' | ')))\n    }\n  }\n}\n\nfunction locateSelectionField(selectionPath: string[], argsTree: ArgumentsRenderingTree) {\n  const [parentPath, fieldName] = splitPath(selectionPath)\n\n  const subSelection = argsTree.arguments.getDeepSubSelectionValue(parentPath)?.asObject()\n  if (!subSelection) {\n    return { parentKind: 'unknown' as const, fieldName }\n  }\n  const select = subSelection.getFieldValue('select')?.asObject()\n  const include = subSelection.getFieldValue('include')?.asObject()\n  const omit = subSelection.getFieldValue('omit')?.asObject()\n  let field = select?.getField(fieldName)\n  if (select && field) {\n    return { parentKind: 'select' as const, parent: select, field, fieldName }\n  }\n  field = include?.getField(fieldName)\n  if (include && field) {\n    return { parentKind: 'include' as const, field, parent: include, fieldName }\n  }\n\n  field = omit?.getField(fieldName)\n  if (omit && field) {\n    return { parentKind: 'omit' as const, field, parent: omit, fieldName }\n  }\n  return { parentKind: 'unknown' as const, fieldName }\n}\n\nfunction addInputSuggestions(parent: ObjectValue, inputType: InputTypeDescription) {\n  if (inputType.kind !== 'object') {\n    return\n  }\n\n  for (const field of inputType.fields) {\n    if (!parent.hasField(field.name)) {\n      parent.addSuggestion(new ObjectFieldSuggestion(field.name, field.typeNames.join(' | ')))\n    }\n  }\n}\n\nfunction splitPath(path: string[]): [parentPath: string[], fieldName: string] {\n  const selectionPath = [...path]\n  const fieldName = selectionPath.pop()\n  if (!fieldName) {\n    throw new Error('unexpected empty path')\n  }\n  return [selectionPath, fieldName]\n}\n\nfunction availableOptionsMessage({ green, enabled }: Colors) {\n  return `Available options are ` + (enabled ? `listed in ${green('green')}` : `marked with ?`) + '.'\n}\n\nfunction joinWithPreposition(preposition: 'and' | 'or', items: string[]): string {\n  if (items.length === 1) {\n    return items[0]\n  }\n  const itemsCopy = [...items]\n  const lastItem = itemsCopy.pop()\n  return `${itemsCopy.join(', ')} ${preposition} ${lastItem}`\n}\n\n/**\n * Options with edit distance above this value will never be suggested\n */\nconst MAX_EDIT_DISTANCE = 3\n\nfunction getSuggestion(str: string, options: string[]): string | undefined {\n  let minDistance = Infinity\n  let result: string | undefined\n\n  for (const option of options) {\n    const editDistance = levenshtein(str, option)\n    if (editDistance > MAX_EDIT_DISTANCE) {\n      continue\n    }\n    if (editDistance < minDistance) {\n      minDistance = editDistance\n      result = option\n    }\n  }\n  return result\n}\n","import { maxWithComparator } from '@prisma/internals'\n\nimport { EngineValidationError, InvalidArgumentTypeError, UnionError } from '../engines'\nimport { GlobalOmitOptions } from '../jsonProtocol/serializeJsonQuery'\nimport { applyValidationError } from './applyValidationError'\nimport { ArgumentsRenderingTree } from './ArgumentsRenderingTree'\n\ntype NonUnionError = Exclude<EngineValidationError, UnionError>\n\n/**\n * When a particular field has multiple allowed types on the schema level\n * and none of them match users input, engine returns special kind of error: UnionError.\n * This error acts as a container for individual errors for each non-matching type.\n * In that case, we need to make a guess which of the errors corresponds users intent the most.\n * General algorithm of processing them is the following:\n * - flatten all nested errors and get a single list of all possible errors\n * - merge individual InvalidArgumentType errors at the same path\n * - pick the best error based on combined argument and selection paths length and type of the error.\n *\n * For details of each step, see other comments in this file.\n * @param error\n * @param args\n */\nexport function applyUnionError(error: UnionError, args: ArgumentsRenderingTree, globalOmit?: GlobalOmitOptions) {\n  const allErrors = flattenUnionError(error)\n  const merged = mergeInvalidArgumentTypeErrors(allErrors)\n  const bestError = getBestScoringError(merged)\n  if (bestError) {\n    applyValidationError(bestError, args, globalOmit)\n  } else {\n    args.addErrorMessage(() => 'Unknown error')\n  }\n}\n\nfunction flattenUnionError(error: UnionError): NonUnionError[] {\n  return error.errors.flatMap((error) => {\n    if (error.kind === 'Union') {\n      return flattenUnionError(error)\n    }\n    return [error]\n  })\n}\n\n/**\n * Iterates over provided error list and merges all InvalidArgumentType\n * with matching selectionPath and argumentPath into one. For example,\n * if the list has an error, saying that `where.arg` does not match `Int`\n * and another, saying that `where.arg` does not match IntFilter, resulting\n * list will contain a single error for `where.arg` saying it does not\n * match `Int | IntFilter`\n * @param errorList\n * @returns\n */\nfunction mergeInvalidArgumentTypeErrors(errorList: NonUnionError[]) {\n  const invalidArgsError = new Map<string, InvalidArgumentTypeError>()\n  const result: NonUnionError[] = []\n\n  for (const error of errorList) {\n    if (error.kind !== 'InvalidArgumentType') {\n      result.push(error)\n      continue\n    }\n\n    const key = `${error.selectionPath.join('.')}:${error.argumentPath.join('.')}`\n    const prevError = invalidArgsError.get(key)\n    if (!prevError) {\n      invalidArgsError.set(key, error)\n    } else {\n      invalidArgsError.set(key, {\n        ...error,\n        argument: {\n          ...error.argument,\n          typeNames: uniqueConcat(prevError.argument.typeNames, error.argument.typeNames),\n        },\n      })\n    }\n  }\n\n  result.push(...invalidArgsError.values())\n  return result\n}\n\nfunction uniqueConcat<T>(head: T[], tail: T[]): T[] {\n  return [...new Set(head.concat(tail))]\n}\n\n/**\n * Function that attempts to pick the best error from the list\n * by ranking them. In most cases, highest ranking error would be the one\n * which has the longest combined \"selectionPath\" + \"argumentPath\". Justification\n * for that is that type that made it deeper into validation tree before failing\n * is probably closer to the one user actually wanted to do.\n *\n * However, if two errors are at the same depth level, we introduce additional ranking based\n * on error type. See `getErrorTypeScore` function for details\n * @param errors\n * @returns\n */\nfunction getBestScoringError(errors: NonUnionError[]) {\n  return maxWithComparator(errors, (errorA, errorB) => {\n    const aPathLength = getCombinedPathLength(errorA)\n    const bPathLength = getCombinedPathLength(errorB)\n    if (aPathLength !== bPathLength) {\n      return aPathLength - bPathLength\n    }\n    return getErrorTypeScore(errorA) - getErrorTypeScore(errorB)\n  })\n}\n\nfunction getCombinedPathLength(error: EngineValidationError) {\n  let score = 0\n  if (Array.isArray(error['selectionPath'])) {\n    score += error['selectionPath'].length\n  }\n\n  if (Array.isArray(error['argumentPath'])) {\n    score += error['argumentPath'].length\n  }\n  return score\n}\n\n/**\n * Function is invoked to determine most relevant error based on its type.\n * Specific numbers returned from this function do not really matter, it's only\n * important how they compare relatively to each other.\n *\n * Current logic is:\n * - InvalidArgumentValue/ValueTooLarge is treated as the best possible error to display\n * since when it is present we know that the field causing the error is defined on the schema\n * and provided value has correct type, it's just that value violates some other constraint.\n * - Next candidate is `InvalidArgumentType` error. We know the field user specified can exists in\n * this spot, it's just that value provided has incorrect type.\n * - All other engine-side errors follow. At that point it's difficult to say which of them is more relevant,\n * so we treat them equally. We might adjust this logic in the future.\n * - RequiredArgumentMissing is penalized because this error is often used to disambiguate\n * union types and what is required in one arm of the union might be fine to leave out in another\n * @param error\n * @returns\n */\nfunction getErrorTypeScore(error: EngineValidationError): number {\n  switch (error.kind) {\n    case 'InvalidArgumentValue':\n    case 'ValueTooLarge':\n      return 20\n    case 'InvalidArgumentType':\n      return 10\n    case 'RequiredArgumentMissing':\n      return -10\n    default:\n      return 0\n  }\n}\n","import { ErrorBasicBuilder, ErrorWriter } from './base'\nimport { SuggestionObjectValue } from './SuggestionObjectValue'\n\nexport class ObjectFieldSuggestion implements ErrorBasicBuilder {\n  public isRequired = false\n  constructor(\n    readonly name: string,\n    readonly value: string | SuggestionObjectValue,\n  ) {}\n\n  makeRequired() {\n    this.isRequired = true\n    return this\n  }\n\n  write(writer: ErrorWriter): void {\n    const {\n      colors: { green },\n    } = writer.context\n\n    writer.addMarginSymbol(green(this.isRequired ? '+' : '?'))\n    writer.write(green(this.name))\n\n    if (!this.isRequired) {\n      writer.write(green('?'))\n    }\n\n    writer.write(green(`: `))\n    if (typeof this.value === 'string') {\n      writer.write(green(this.value))\n    } else {\n      writer.write(this.value)\n    }\n  }\n}\n","export * from './AnyDeclarationBuilder'\nexport * from './ArraySpread'\nexport * from './ArrayType'\nexport * from './BasicBuilder'\nexport * from './Class'\nexport * from './ConditionalType'\nexport * from './ConstDeclaration'\nexport * from './DocComment'\nexport * from './Export'\nexport * from './ExportFrom'\nexport * from './File'\nexport * from './FunctionCall'\nexport * from './FunctionType'\nexport * from './GenericParameter'\nexport * from './helpers'\nexport * from './Import'\nexport * from './Interface'\nexport * from './IntersectionType'\nexport * from './KeyofType'\nexport * from './KeyType'\nexport * from './Method'\nexport * from './NamedType'\nexport * from './NamedValue'\nexport * from './NamespaceDeclaration'\nexport * from './ObjectType'\nexport * from './Parameter'\nexport * from './PrimitiveType'\nexport * from './Property'\nexport * from './stringify'\nexport * from './StringLiteralType'\nexport * from './TupleType'\nexport * from './TypeBuilder'\nexport * from './TypeDeclaration'\nexport * from './UnionType'\nexport * from './ValueBuilder'\nexport * from './WellKnownSymbol'\nexport * from './Writer'\n","import type { BasicBuilder } from './BasicBuilder'\n\nexport const INDENT_SIZE = 2\n/**\n * Helper class for building long multi-line formatted strings from building blocks.\n * Can use either plain strings or `Builder` objects, that would encapsulate formatting logic.\n */\nexport class Writer<ContextType = undefined> {\n  private lines: string[] = []\n  private currentLine = ''\n  private currentIndent = 0\n  private marginSymbol?: string\n  private afterNextNewLineCallback?: () => void\n\n  constructor(\n    startingIndent = 0,\n    readonly context: ContextType,\n  ) {\n    this.currentIndent = startingIndent\n  }\n\n  /**\n   * Adds provided value to the current line. Does not end the line.\n   *\n   * @param value\n   * @returns\n   */\n  write(value: string | BasicBuilder<ContextType>): this {\n    if (typeof value === 'string') {\n      this.currentLine += value\n    } else {\n      value.write(this)\n    }\n    return this\n  }\n\n  /**\n   * Adds several `values` to the current line, separated by `separator`. Both values and separator\n   * can also be `Builder` instances for more advanced formatting.\n   *\n   * @param separator\n   * @param values\n   * @param writeItem allow to customize how individual item is written\n   * @returns\n   */\n  writeJoined<T extends string | BasicBuilder<ContextType>>(\n    separator: string | BasicBuilder<ContextType>,\n    values: T[],\n    writeItem: (item: T, writer: this) => void = (item, w) => w.write(item),\n  ): this {\n    const last = values.length - 1\n    for (let i = 0; i < values.length; i++) {\n      writeItem(values[i], this)\n      if (i !== last) {\n        this.write(separator)\n      }\n    }\n    return this\n  }\n\n  /**\n   * Adds a string to current line, flushes current line and starts a new line.\n   * @param line\n   * @returns\n   */\n  writeLine(line: string | BasicBuilder<ContextType>): this {\n    return this.write(line).newLine()\n  }\n\n  /**\n   * Flushes current line and starts a new line. New line starts at previously configured indentation level\n   * @returns\n   */\n  newLine(): this {\n    this.lines.push(this.indentedCurrentLine())\n    this.currentLine = ''\n    this.marginSymbol = undefined\n\n    const afterNextNewLineCallback = this.afterNextNewLineCallback\n    this.afterNextNewLineCallback = undefined\n    afterNextNewLineCallback?.()\n    return this\n  }\n\n  /**\n   * Increases indentation level by 1, calls provided callback and then decreases indentation again.\n   * Could be used for writing indented blocks of text:\n   *\n   * @example\n   * ```ts\n   * writer\n   *   .writeLine('{')\n   *   .withIndent(() => {\n   *      writer.writeLine('foo: 123');\n   *      writer.writeLine('bar: 456');\n   *   })\n   *   .writeLine('}')\n   * ```\n   * @param callback\n   * @returns\n   */\n  withIndent(callback: (writer: this) => void): this {\n    this.indent()\n    callback(this)\n    this.unindent()\n    return this\n  }\n\n  /**\n   * Calls provided callback next time when new line is started.\n   * Callback is called after old line have already been flushed and a new\n   * line have been started. Can be used for adding \"between the lines\" decorations,\n   * such as underlines.\n   *\n   * @param callback\n   * @returns\n   */\n  afterNextNewline(callback: () => void) {\n    this.afterNextNewLineCallback = callback\n    return this\n  }\n\n  /**\n   * Increases indentation level of the current line by 1\n   * @returns\n   */\n  indent(): this {\n    this.currentIndent++\n    return this\n  }\n\n  /**\n   * Decreases indentation level of the current line by 1, if it is possible\n   * @returns\n   */\n  unindent(): this {\n    if (this.currentIndent > 0) {\n      this.currentIndent--\n    }\n    return this\n  }\n\n  /**\n   * Adds a symbol, that will replace the first character of the current line (including indentation)\n   * when it is flushed. Can be used for adding markers to the line.\n   *\n   * Note: if indentation level of the line is 0, it will replace the first actually printed character\n   * of the line. Use with caution.\n   * @param symbol\n   * @returns\n   */\n  addMarginSymbol(symbol: string): this {\n    this.marginSymbol = symbol\n    return this\n  }\n\n  toString() {\n    return this.lines.concat(this.indentedCurrentLine()).join('\\n')\n  }\n\n  getCurrentLineLength() {\n    return this.currentLine.length\n  }\n\n  private indentedCurrentLine(): string {\n    const line = this.currentLine.padStart(this.currentLine.length + INDENT_SIZE * this.currentIndent)\n    if (this.marginSymbol) {\n      return this.marginSymbol + line.slice(1)\n    }\n    return line\n  }\n}\n","import { ErrorBasicBuilder, ErrorWriter } from './base'\nimport { Field } from './Field'\nimport { Value } from './Value'\n\nexport class ArrayField implements ErrorBasicBuilder, Field {\n  constructor(public value: Value) {}\n  write(writer: ErrorWriter): void {\n    writer.write(this.value)\n  }\n\n  markAsError(): void {\n    this.value.markAsError()\n  }\n}\n","import { BasicBuilder, Writer } from '@prisma/ts-builders'\nimport { bold, dim, green, red } from 'kleur/colors'\n\ntype ColorFn = (str: string) => string\nexport type Colors = {\n  bold: ColorFn\n  red: ColorFn\n  green: ColorFn\n  dim: ColorFn\n  // if false, all color functions are useless\n  readonly enabled: boolean\n}\n\nconst noop = (str: string) => str\n\nexport const inactiveColors: Colors = {\n  bold: noop,\n  red: noop,\n  green: noop,\n  dim: noop,\n  enabled: false,\n}\n\nexport const activeColors: Colors = {\n  bold,\n  red,\n  green,\n  dim,\n  enabled: true,\n}\n\nexport type ErrorRenderContext = {\n  colors: Colors\n}\n\nexport type ErrorWriter = Writer<ErrorRenderContext>\nexport type ErrorBasicBuilder = BasicBuilder<ErrorRenderContext>\n\nexport const fieldsSeparator: ErrorBasicBuilder = {\n  write(writer) {\n    writer.writeLine(',')\n  },\n}\n","import { ErrorBasicBuilder, ErrorWriter } from './base'\n\nexport type ColorFn = (str: string) => string\n\nexport class FormattedString implements ErrorBasicBuilder {\n  private isUnderlined = false\n  private color: ColorFn = (str) => str\n  constructor(public contents: string) {}\n\n  underline(): this {\n    this.isUnderlined = true\n    return this\n  }\n\n  setColor(color: ColorFn): this {\n    this.color = color\n    return this\n  }\n\n  write(writer: ErrorWriter): void {\n    const paddingSize = writer.getCurrentLineLength()\n    writer.write(this.color(this.contents))\n    if (this.isUnderlined) {\n      writer.afterNextNewline(() => {\n        writer.write(' '.repeat(paddingSize)).writeLine(this.color('~'.repeat(this.contents.length)))\n      })\n    }\n  }\n}\n","import { ErrorBasicBuilder, ErrorWriter } from './base'\nimport { ObjectValue } from './ObjectValue'\n\nexport abstract class Value implements ErrorBasicBuilder {\n  abstract write(writer: ErrorWriter): void\n\n  /**\n   * Returns total width the value when it is rendered. Used\n   * for determining underline width.\n   */\n  abstract getPrintWidth(): number\n\n  public hasError = false\n\n  markAsError(): this {\n    this.hasError = true\n    return this\n  }\n\n  abstract asObject(): ObjectValue | undefined\n}\n","import { INDENT_SIZE } from '@prisma/ts-builders'\n\nimport { ArrayField } from './ArrayField'\nimport { ErrorWriter, fieldsSeparator } from './base'\nimport { FormattedString } from './FormattedString'\nimport { Value } from './Value'\n\nexport class ArrayValue extends Value {\n  private items: ArrayField[] = []\n\n  addItem(item: Value): this {\n    this.items.push(new ArrayField(item))\n    return this\n  }\n\n  getField(index: number): ArrayField | undefined {\n    return this.items[index]\n  }\n\n  override getPrintWidth(): number {\n    if (this.items.length === 0) {\n      return 2\n    }\n    const maxItemWidth = Math.max(...this.items.map((item) => item.value.getPrintWidth()))\n    return maxItemWidth + INDENT_SIZE\n  }\n\n  override write(writer: ErrorWriter): void {\n    if (this.items.length === 0) {\n      this.writeEmpty(writer)\n      return\n    }\n    this.writeWithItems(writer)\n  }\n\n  private writeEmpty(writer: ErrorWriter) {\n    const output = new FormattedString('[]')\n    if (this.hasError) {\n      output.setColor(writer.context.colors.red).underline()\n    }\n    writer.write(output)\n  }\n\n  private writeWithItems(writer: ErrorWriter) {\n    const { colors } = writer.context\n\n    writer\n      .writeLine('[')\n      .withIndent(() => writer.writeJoined(fieldsSeparator, this.items).newLine())\n      .write(']')\n\n    if (this.hasError) {\n      writer.afterNextNewline(() => {\n        writer.writeLine(colors.red('~'.repeat(this.getPrintWidth())))\n      })\n    }\n  }\n\n  override asObject(): undefined {\n    return undefined\n  }\n}\n","import { INDENT_SIZE } from '@prisma/ts-builders'\n\nimport { ArrayValue } from './ArrayValue'\nimport { ErrorWriter, fieldsSeparator } from './base'\nimport { Field } from './Field'\nimport { FormattedString } from './FormattedString'\nimport { ObjectField } from './ObjectField'\nimport { ObjectFieldSuggestion } from './ObjectFieldSuggestion'\nimport { Value } from './Value'\n\ntype SelectionParent = {\n  kind: 'include' | 'select'\n  value: ObjectValue\n}\n\n/**\n * Class for representing object value within rendering tree. Also used for accessing\n * different fields of the object.\n *\n * Terminology used within:\n * - selection parent = either `select` or `include` property value. For example for object\n * `{ select: { posts: true }}`, selection parent is `{ posts: true }`\n * - sub selection: value of a property of selection parent. Can be deep. In that case, specified\n * path is expected to not contain either `select` or `include` values in between (the way engine reports `selectionPath`).\n * For example, for this query:\n *\n * {\n *   include: {\n *     posts: {\n *       select: { attachments: { where: { published: true }} }\n *     }\n *   }\n * }\n * Value of sub selection at path [posts, attachments] is { where: { published: true }}\n */\nexport class ObjectValue extends Value {\n  private fields: Record<string, ObjectField> = {}\n  private suggestions: ObjectFieldSuggestion[] = []\n\n  addField(field: ObjectField) {\n    this.fields[field.name] = field\n  }\n\n  addSuggestion(suggestion: ObjectFieldSuggestion) {\n    this.suggestions.push(suggestion)\n  }\n\n  getField(key: string): ObjectField | undefined {\n    return this.fields[key]\n  }\n\n  getDeepField(path: string[]): Field | undefined {\n    const [head, ...tail] = path\n    const firstField = this.getField(head)\n    if (!firstField) {\n      return undefined\n    }\n    let field: Field = firstField\n    for (const segment of tail) {\n      let nextField: Field | undefined\n\n      if (field.value instanceof ObjectValue) {\n        nextField = field.value.getField(segment)\n      } else if (field.value instanceof ArrayValue) {\n        nextField = field.value.getField(Number(segment))\n      }\n      if (!nextField) {\n        return undefined\n      }\n      field = nextField\n    }\n    return field\n  }\n\n  getDeepFieldValue(path: string[]) {\n    if (path.length === 0) {\n      return this\n    }\n    return this.getDeepField(path)?.value\n  }\n\n  hasField(key: string) {\n    return Boolean(this.getField(key))\n  }\n\n  removeAllFields() {\n    this.fields = {}\n  }\n\n  removeField(key: string) {\n    delete this.fields[key]\n  }\n\n  getFields() {\n    return this.fields\n  }\n\n  isEmpty(): boolean {\n    return Object.keys(this.fields).length === 0\n  }\n\n  getFieldValue(key: string): Value | undefined {\n    return this.getField(key)?.value\n  }\n\n  getDeepSubSelectionValue(path: string[]): Value | undefined {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let selection: Value = this\n    for (const segment of path) {\n      if (!(selection instanceof ObjectValue)) {\n        return undefined\n      }\n      const next = selection.getSubSelectionValue(segment)\n      if (!next) {\n        return undefined\n      }\n\n      selection = next\n    }\n\n    return selection\n  }\n\n  getDeepSelectionParent(path: string[]): SelectionParent | undefined {\n    const thisParent = this.getSelectionParent()\n    if (!thisParent) {\n      return undefined\n    }\n\n    let parent = thisParent\n\n    for (const segment of path) {\n      const next = parent.value.getFieldValue(segment)\n      if (!next || !(next instanceof ObjectValue)) {\n        return undefined\n      }\n\n      const nextParent = next.getSelectionParent()\n      if (!nextParent) {\n        return undefined\n      }\n      parent = nextParent\n    }\n\n    return parent\n  }\n\n  getSelectionParent(): SelectionParent | undefined {\n    const select = this.getField('select')?.value.asObject()\n    if (select) {\n      return { kind: 'select', value: select }\n    }\n\n    const include = this.getField('include')?.value.asObject()\n    if (include) {\n      return { kind: 'include', value: include }\n    }\n    return undefined\n  }\n\n  getSubSelectionValue(key: string): Value | undefined {\n    return this.getSelectionParent()?.value.fields[key].value\n  }\n\n  override getPrintWidth(): number {\n    const fields = Object.values(this.fields)\n    if (fields.length == 0) {\n      return 2 // {}\n    }\n    const maxFieldWidth = Math.max(...fields.map((f) => f.getPrintWidth()))\n    return maxFieldWidth + INDENT_SIZE\n  }\n\n  override write(writer: ErrorWriter): void {\n    const fields = Object.values(this.fields)\n    if (fields.length === 0 && this.suggestions.length === 0) {\n      this.writeEmpty(writer)\n      return\n    }\n\n    this.writeWithContents(writer, fields)\n  }\n\n  override asObject(): ObjectValue {\n    return this\n  }\n\n  private writeEmpty(writer: ErrorWriter) {\n    const output = new FormattedString('{}')\n    if (this.hasError) {\n      output.setColor(writer.context.colors.red).underline()\n    }\n\n    writer.write(output)\n  }\n\n  private writeWithContents(writer: ErrorWriter, fields: ObjectField[]) {\n    writer.writeLine('{').withIndent(() => {\n      writer.writeJoined(fieldsSeparator, [...fields, ...this.suggestions]).newLine()\n    })\n\n    writer.write('}')\n    if (this.hasError) {\n      writer.afterNextNewline(() => {\n        writer.writeLine(writer.context.colors.red('~'.repeat(this.getPrintWidth())))\n      })\n    }\n  }\n}\n","import { ErrorWriter } from './base'\nimport { FormattedString } from './FormattedString'\nimport { Value } from './Value'\n\nexport class ScalarValue extends Value {\n  constructor(readonly text: string) {\n    super()\n  }\n\n  override getPrintWidth(): number {\n    return this.text.length\n  }\n\n  override write(writer: ErrorWriter): void {\n    const string = new FormattedString(this.text)\n    if (this.hasError) {\n      string.underline().setColor(writer.context.colors.red)\n    }\n    writer.write(string)\n  }\n\n  override asObject(): undefined {\n    return undefined\n  }\n}\n","import { ErrorBasicBuilder, ErrorWriter, fieldsSeparator } from './base'\n\nexport class SuggestionObjectValue implements ErrorBasicBuilder {\n  private fields: ErrorBasicBuilder[] = []\n\n  addField(name: string, value: string) {\n    this.fields.push({\n      write(writer) {\n        const { green, dim } = writer.context.colors\n        writer.write(green(dim(`${name}: ${value}`))).addMarginSymbol(green(dim('+')))\n      },\n    })\n    return this\n  }\n\n  write(writer: ErrorWriter): void {\n    const {\n      colors: { green },\n    } = writer.context\n    writer\n      .writeLine(green('{'))\n      .withIndent(() => {\n        writer.writeJoined(fieldsSeparator, this.fields).newLine()\n      })\n      .write(green('}'))\n      .addMarginSymbol(green('+'))\n  }\n}\n","import { FieldRef } from '../types/exported/FieldRef'\n\nexport class FieldRefImpl<Model, FieldType> implements FieldRef<Model, FieldType> {\n  public readonly modelName: Model\n  public readonly name: string\n  public readonly typeName: FieldType\n  public readonly isList: boolean\n  public readonly isEnum: boolean\n\n  constructor(modelName: Model, name: string, fieldType: FieldType, isList: boolean, isEnum: boolean) {\n    this.modelName = modelName\n    this.name = name\n    this.typeName = fieldType\n    this.isList = isList\n    this.isEnum = isEnum\n  }\n\n  _toGraphQLInputType() {\n    const listPrefix = this.isList ? `List` : ''\n    const enumPrefix = this.isEnum ? 'Enum' : ''\n\n    return `${listPrefix}${enumPrefix}${this.typeName}FieldRefInput<${this.modelName}>`\n  }\n}\n\nexport function isFieldRef(value: unknown): value is FieldRef<string, unknown> {\n  return value instanceof FieldRefImpl\n}\n","/**\n * Module-private symbol used to distinguish between instances of\n * `ObjectEnumValue` created inside and outside this module.\n */\nconst secret = Symbol()\n\n/**\n * Emulate a private property via a WeakMap manually. Using native private\n * properties is a breaking change for downstream users with minimal TypeScript\n * configs, because TypeScript uses ES3 as the default target.\n *\n * TODO: replace this with a `#representation` private property in the\n * `ObjectEnumValue` class and document minimal required `target` for TypeScript.\n */\nconst representations = new WeakMap<ObjectEnumValue, string>()\n\n/**\n * Base class for unique values of object-valued enums.\n */\nexport abstract class ObjectEnumValue {\n  constructor(arg?: symbol) {\n    if (arg === secret) {\n      representations.set(this, `Prisma.${this._getName()}`)\n    } else {\n      representations.set(this, `new Prisma.${this._getNamespace()}.${this._getName()}()`)\n    }\n  }\n\n  abstract _getNamespace(): string\n\n  _getName() {\n    return this.constructor.name\n  }\n\n  toString() {\n    return representations.get(this)!\n  }\n}\n\nclass NullTypesEnumValue extends ObjectEnumValue {\n  override _getNamespace() {\n    return 'NullTypes'\n  }\n}\n\nclass DbNull extends NullTypesEnumValue {\n  // Phantom private property to prevent structural type equality\n  // eslint-disable-next-line no-unused-private-class-members\n  readonly #_brand_DbNull!: void\n}\nsetClassName(DbNull, 'DbNull')\n\nclass JsonNull extends NullTypesEnumValue {\n  // Phantom private property to prevent structural type equality\n  // eslint-disable-next-line no-unused-private-class-members\n  readonly #_brand_JsonNull!: void\n}\nsetClassName(JsonNull, 'JsonNull')\n\nclass AnyNull extends NullTypesEnumValue {\n  // Phantom private property to prevent structural type equality\n  // eslint-disable-next-line no-unused-private-class-members\n  readonly #_brand_AnyNull!: void\n}\nsetClassName(AnyNull, 'AnyNull')\n\nexport const objectEnumValues = {\n  classes: {\n    DbNull,\n    JsonNull,\n    AnyNull,\n  },\n  instances: {\n    DbNull: new DbNull(secret),\n    JsonNull: new JsonNull(secret),\n    AnyNull: new AnyNull(secret),\n  },\n}\n\n/**\n * See helper in @internals package. Can not be used here\n * because importing internal breaks browser build.\n *\n * @param classObject\n * @param name\n */\nfunction setClassName(classObject: Function, name: string) {\n  Object.defineProperty(classObject, 'name', {\n    value: name,\n    configurable: true,\n  })\n}\n","import { ErrorBasicBuilder, ErrorWriter } from './base'\nimport { Field } from './Field'\nimport { FormattedString } from './FormattedString'\nimport { Value } from './Value'\n\nconst separator = ': '\nexport class ObjectField implements ErrorBasicBuilder, Field {\n  hasError = false\n  constructor(\n    readonly name: string,\n    public value: Value,\n  ) {}\n\n  markAsError() {\n    this.hasError = true\n  }\n\n  getPrintWidth() {\n    return this.name.length + this.value.getPrintWidth() + separator.length\n  }\n\n  write(writer: ErrorWriter): void {\n    const name = new FormattedString(this.name)\n    if (this.hasError) {\n      name.underline().setColor(writer.context.colors.red)\n    }\n    writer.write(name).write(separator).write(this.value)\n  }\n}\n","import { uncapitalize } from '@prisma/client-common'\nimport { Writer } from '@prisma/ts-builders'\n\nimport { ErrorFormat } from '../../getPrismaClient'\nimport { isValidDate } from '../../utils/date'\nimport { isDecimalJsLike } from '../../utils/decimalJsLike'\nimport { isFieldRef } from '../model/FieldRef'\nimport { ObjectEnumValue } from '../types/exported/ObjectEnums'\nimport { ArrayValue } from './ArrayValue'\nimport { activeColors, Colors, ErrorBasicBuilder, ErrorWriter, inactiveColors } from './base'\nimport { ObjectField } from './ObjectField'\nimport { ObjectValue } from './ObjectValue'\nimport { ScalarValue } from './ScalarValue'\n\ntype MessageRender = (colors: Colors) => string\n\nexport class ArgumentsRenderingTree implements ErrorBasicBuilder {\n  readonly arguments: ObjectValue\n  private errorMessages: MessageRender[] = []\n\n  constructor(args: ObjectValue) {\n    this.arguments = args\n  }\n\n  write(writer: ErrorWriter): void {\n    writer.write(this.arguments)\n  }\n\n  addErrorMessage(renderer: MessageRender) {\n    this.errorMessages.push(renderer)\n  }\n\n  renderAllMessages(colors: Colors): string {\n    return this.errorMessages.map((messageRenderer) => messageRenderer(colors)).join('\\n')\n  }\n}\n\n/**\n * Given JS call arguments, produces rendering tree for outputting rich errors into the console\n * Difference between rendering tree and plain object is that fields and values can have different attributes:\n * colors, underlines, markers on the margins. `applyValidationError` function will then apply specific formatting\n * to the rendering tree.\n *\n * @param args\n * @returns\n */\nexport function buildArgumentsRenderingTree(args: Record<PropertyKey, unknown>): ArgumentsRenderingTree {\n  return new ArgumentsRenderingTree(buildInputObject(args))\n}\n\nfunction buildInputObject(inputObject: Record<PropertyKey, unknown>) {\n  const object = new ObjectValue()\n\n  for (const [key, value] of Object.entries(inputObject)) {\n    const field = new ObjectField(key, buildInputValue(value))\n    object.addField(field)\n  }\n  return object\n}\n\nfunction buildInputValue(value: unknown) {\n  if (typeof value === 'string') {\n    return new ScalarValue(JSON.stringify(value))\n  }\n\n  if (typeof value === 'number' || typeof value === 'boolean') {\n    return new ScalarValue(String(value))\n  }\n\n  if (typeof value === 'bigint') {\n    return new ScalarValue(`${value}n`)\n  }\n\n  if (value === null) {\n    return new ScalarValue('null')\n  }\n\n  if (value === undefined) {\n    return new ScalarValue('undefined')\n  }\n\n  if (isDecimalJsLike(value)) {\n    return new ScalarValue(`new Prisma.Decimal(\"${value.toFixed()}\")`)\n  }\n\n  if (value instanceof Uint8Array) {\n    if (Buffer.isBuffer(value)) {\n      return new ScalarValue(`Buffer.alloc(${value.byteLength})`)\n    }\n    return new ScalarValue(`new Uint8Array(${value.byteLength})`)\n  }\n\n  if (value instanceof Date) {\n    const dateStr = isValidDate(value) ? value.toISOString() : 'Invalid Date'\n    return new ScalarValue(`new Date(\"${dateStr}\")`)\n  }\n\n  if (value instanceof ObjectEnumValue) {\n    return new ScalarValue(`Prisma.${value._getName()}`)\n  }\n\n  if (isFieldRef(value)) {\n    return new ScalarValue(`prisma.${uncapitalize(value.modelName)}.$fields.${value.name}`)\n  }\n\n  if (Array.isArray(value)) {\n    return buildInputArray(value)\n  }\n\n  if (typeof value === 'object') {\n    return buildInputObject(value as Record<PropertyKey, unknown>)\n  }\n\n  return new ScalarValue(Object.prototype.toString.call(value))\n}\n\nfunction buildInputArray(array: unknown[]) {\n  const result = new ArrayValue()\n  for (const item of array) {\n    result.addItem(buildInputValue(item))\n  }\n  return result\n}\n\nexport function renderArgsTree(argsTree: ArgumentsRenderingTree, errorFormat: ErrorFormat) {\n  const colors = errorFormat === 'pretty' ? activeColors : inactiveColors\n\n  const message = argsTree.renderAllMessages(colors)\n  const args = new Writer(0, { colors }).write(argsTree).toString()\n\n  return { message, args }\n}\n","import { ErrorFormat } from '../../getPrismaClient'\nimport { CallSite } from '../../utils/CallSite'\nimport { createErrorMessageWithContext } from '../../utils/createErrorMessageWithContext'\nimport { PrismaClientValidationError } from '../errors/PrismaClientValidationError'\nimport { GlobalOmitOptions } from '../jsonProtocol/serializeJsonQuery'\nimport { JsArgs } from '../types/exported/JsApi'\nimport { ValidationError } from '../types/ValidationError'\nimport { applyValidationError } from './applyValidationError'\nimport { buildArgumentsRenderingTree, renderArgsTree } from './ArgumentsRenderingTree'\n\ntype ExceptionParams = {\n  errors: ValidationError[]\n  args: JsArgs\n  callsite?: CallSite\n  originalMethod: string\n  errorFormat: ErrorFormat\n  clientVersion: string\n  globalOmit?: GlobalOmitOptions\n}\n\nexport function throwValidationException({\n  args,\n  errors,\n  errorFormat,\n  callsite,\n  originalMethod,\n  clientVersion,\n  globalOmit,\n}: ExceptionParams): never {\n  const argsTree = buildArgumentsRenderingTree(args)\n  for (const error of errors) {\n    applyValidationError(error, argsTree, globalOmit)\n  }\n\n  const { message, args: renderedArgs } = renderArgsTree(argsTree, errorFormat)\n\n  const messageWithContext = createErrorMessageWithContext({\n    message,\n    callsite,\n    originalMethod,\n    showColors: errorFormat === 'pretty',\n    callArguments: renderedArgs,\n  })\n\n  throw new PrismaClientValidationError(messageWithContext, { clientVersion })\n}\n","/**\n * Transforms a model name coming from the DMMF to a runtime model name.\n * @param name\n * @returns\n */\nexport function dmmfToJSModelName(name: string) {\n  return name.replace(/^./, (str) => str.toLowerCase())\n}\n","import { Cache } from '@prisma/client-common'\nimport { mapObjectValues } from '@prisma/internals'\n\nimport { dmmfToJSModelName } from '../model/utils/dmmfToJSModelName'\nimport { ExtensionArgs, ResultArg, ResultArgsFieldCompute } from '../types/exported/ExtensionArgs'\nimport { Omission, Selection } from '../types/exported/JsApi'\n\nexport type ComputedField = {\n  name: string\n  needs: string[]\n  compute: ResultArgsFieldCompute\n}\n\nexport type ComputedFieldsMap = {\n  [fieldName: string]: ComputedField\n}\n\n/**\n * Given the list of previously resolved computed fields, new extension and dmmf model name, produces a map\n * of all computed fields that may be applied to this model, accounting for all previous and past extensions.\n *\n * All naming conflicts which could be produced by the plain list of extensions are resolved as follows:\n * - extension, that declared later always wins\n * - in a single extension, specific model takes precedence over $allModels\n *\n * Additionally, resolves all `needs` dependencies down to the model fields. For example,\n * if `nameAndTitle` field depends on `fullName` computed field and `title` model field and\n * `fullName` field depends on `firstName` and `lastName` field, full list of `nameAndTitle` dependencies\n * would be `firstName`, `lastName`, `title`.\n * @param previousComputedFields\n * @param extension\n * @param dmmfModelName\n * @returns\n */\nexport function getComputedFields(\n  previousComputedFields: ComputedFieldsMap | undefined,\n  extension: ExtensionArgs,\n  dmmfModelName: string,\n) {\n  const jsName = dmmfToJSModelName(dmmfModelName)\n  if (!extension.result || !(extension.result.$allModels || extension.result[jsName])) {\n    return previousComputedFields\n  }\n\n  return resolveDependencies({\n    ...previousComputedFields,\n    ...getComputedFieldsFromModel(extension.name, previousComputedFields, extension.result.$allModels),\n    ...getComputedFieldsFromModel(extension.name, previousComputedFields, extension.result[jsName]),\n  })\n}\n\nexport function resolveDependencies(computedFields: ComputedFieldsMap): ComputedFieldsMap {\n  const cache = new Cache<string, string[]>()\n  const resolveNeeds = (fieldName: string, visitedFields: Set<string>) => {\n    return cache.getOrCreate(fieldName, () => {\n      if (visitedFields.has(fieldName)) {\n        return [fieldName]\n      }\n      visitedFields.add(fieldName)\n      if (!computedFields[fieldName]) {\n        return [fieldName]\n      }\n      return computedFields[fieldName].needs.flatMap((fieldDep) => resolveNeeds(fieldDep, visitedFields))\n    })\n  }\n\n  return mapObjectValues(computedFields, (field) => {\n    return {\n      ...field,\n      needs: resolveNeeds(field.name, new Set()),\n    }\n  })\n}\n\nfunction getComputedFieldsFromModel(\n  name: string | undefined,\n  previousComputedFields: ComputedFieldsMap | undefined,\n  modelResult: ResultArg | undefined,\n): ComputedFieldsMap {\n  if (!modelResult) {\n    return {}\n  }\n\n  return mapObjectValues(modelResult, ({ needs, compute }, fieldName) => ({\n    name: fieldName,\n    needs: needs ? Object.keys(needs).filter((key) => needs[key]) : [],\n    compute: composeCompute(previousComputedFields, fieldName, compute),\n  }))\n}\n\nfunction composeCompute(\n  previousComputedFields: ComputedFieldsMap | undefined,\n  fieldName: string,\n  nextCompute: ResultArgsFieldCompute,\n): ResultArgsFieldCompute {\n  const previousCompute = previousComputedFields?.[fieldName]?.compute\n  if (!previousCompute) {\n    return nextCompute\n  }\n  return (model) => {\n    return nextCompute({ ...model, [fieldName]: previousCompute(model) })\n  }\n}\n\nexport function computeEngineSideSelection(\n  selection: Selection,\n  computedFields: ComputedFieldsMap | undefined,\n): Selection {\n  if (!computedFields) {\n    return selection\n  }\n  const result = { ...selection }\n\n  for (const field of Object.values(computedFields)) {\n    if (!selection[field.name]) {\n      continue\n    }\n\n    for (const dependency of field.needs) {\n      result[dependency] = true\n    }\n  }\n  return result\n}\n\n/**\n * Given user-supplied omissions, computes the results to send to the engine, taking\n * into account dependencies of the computed field. Consider following example:\n *\n * ```\n * const xprisma = prisma.$extends({\n *       result: {\n *         user: {\n *           sanitizedPassword: {\n *             needs: { password: true },\n *             compute(user) {\n *               return sanitze(user.password)\n *             },\n *           },\n *         },\n *       },\n * })\n *\n * const user = await xprisma.user.findFirstOrThrow({\n *       omit: {\n *         password: true,\n *       },\n * })\n * ```\n *\n * In that case, user wants to omit the `password` but not `sanitizedPassword`.\n * Since `sanitizedPassword` can not be computed without `password`, we can not let\n * the engine handle omission in this case - we have to still query `password` from the\n * database and omit it on the client, after computing `sanitizedPassword`.\n *\n * This function removes the omission (thus, including the field into result set) if it is a dependency of\n * a non-omitted computed field. Client-side omission after we get a response is handled by `applyResultExtensions`\n *\n * @param omission\n * @param computedFields\n * @returns\n */\nexport function computeEngineSideOmissions(\n  omission: Omission,\n  computedFields: ComputedFieldsMap | undefined,\n): Omission {\n  if (!computedFields) {\n    return omission\n  }\n  const result = { ...omission }\n\n  for (const field of Object.values(computedFields)) {\n    if (omission[field.name]) {\n      continue\n    }\n\n    for (const dependency of field.needs) {\n      delete result[dependency]\n    }\n  }\n  return result\n}\n","import { Cache, lazyProperty } from '@prisma/client-common'\n\nimport { dmmfToJSModelName } from '../model/utils/dmmfToJSModelName'\nimport { ClientArg, ExtensionArgs, ModelArg, QueryOptionsCb } from '../types/exported/ExtensionArgs'\nimport { BatchQueryOptionsCb, QueryOptionsPrivate } from '../types/internal/ExtensionsInternalArgs'\nimport { ComputedFieldsMap, getComputedFields } from './resultUtils'\n\nclass MergedExtensionsListNode {\n  private computedFieldsCache = new Cache<string, ComputedFieldsMap | undefined>()\n  private modelExtensionsCache = new Cache<string, ModelArg | undefined>()\n  private queryCallbacksCache = new Cache<string, QueryOptionsCb[]>()\n\n  private clientExtensions = lazyProperty(() => {\n    if (!this.extension.client) {\n      return this.previous?.getAllClientExtensions()\n    }\n\n    return {\n      ...this.previous?.getAllClientExtensions(),\n      ...this.extension.client,\n    }\n  })\n\n  private batchCallbacks = lazyProperty(() => {\n    const previous: BatchQueryOptionsCb[] = this.previous?.getAllBatchQueryCallbacks() ?? []\n    const newCb = (this.extension as QueryOptionsPrivate).query?.$__internalBatch\n    if (!newCb) {\n      return previous\n    }\n    return previous.concat(newCb)\n  })\n\n  constructor(\n    public extension: ExtensionArgs,\n    public previous?: MergedExtensionsListNode,\n  ) {}\n\n  getAllComputedFields(dmmfModelName: string): ComputedFieldsMap | undefined {\n    return this.computedFieldsCache.getOrCreate(dmmfModelName, () => {\n      return getComputedFields(this.previous?.getAllComputedFields(dmmfModelName), this.extension, dmmfModelName)\n    })\n  }\n\n  getAllClientExtensions(): ClientArg | undefined {\n    return this.clientExtensions.get()\n  }\n\n  getAllModelExtensions(dmmfModelName: string): ModelArg | undefined {\n    return this.modelExtensionsCache.getOrCreate(dmmfModelName, () => {\n      const jsModelName = dmmfToJSModelName(dmmfModelName)\n      if (!this.extension.model || !(this.extension.model[jsModelName] || this.extension.model.$allModels)) {\n        return this.previous?.getAllModelExtensions(dmmfModelName)\n      }\n\n      return {\n        ...this.previous?.getAllModelExtensions(dmmfModelName),\n        ...this.extension.model.$allModels,\n        ...this.extension.model[jsModelName],\n      }\n    })\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  getAllQueryCallbacks(jsModelName: string | '$none', operation: string) {\n    return this.queryCallbacksCache.getOrCreate(`${jsModelName}:${operation}`, () => {\n      const prevCbs = this.previous?.getAllQueryCallbacks(jsModelName, operation) ?? []\n      const newCbs: QueryOptionsCb[] = []\n      const query = this.extension.query\n\n      if (!query || !(query[jsModelName] || query['$allModels'] || query[operation] || query['$allOperations'])) {\n        return prevCbs\n      }\n\n      if (query[jsModelName] !== undefined) {\n        if (query[jsModelName][operation] !== undefined) {\n          newCbs.push(query[jsModelName][operation])\n        }\n\n        // when the model-bound extension has a wildcard for the operation\n        if (query[jsModelName]['$allOperations'] !== undefined) {\n          newCbs.push(query[jsModelName]['$allOperations'])\n        }\n      }\n\n      // when the extension isn't model-bound, apply it to all models\n      // '$none' is a special case for top-level operations without model\n      if (jsModelName !== '$none' && query['$allModels'] !== undefined) {\n        if (query['$allModels'][operation] !== undefined) {\n          newCbs.push(query['$allModels'][operation])\n        }\n\n        // when the non-model-bound extension has a wildcard for the operation\n        if (query['$allModels']['$allOperations'] !== undefined) {\n          newCbs.push(query['$allModels']['$allOperations'])\n        }\n      }\n\n      // when the extension is not bound to a model & is a top-level operation\n      if (query[operation] !== undefined) {\n        newCbs.push(query[operation] as QueryOptionsCb)\n      }\n\n      // when the extension is not bound to a model & is any top-level operation\n      if (query['$allOperations'] !== undefined) {\n        newCbs.push(query['$allOperations'] as QueryOptionsCb)\n      }\n\n      return prevCbs.concat(newCbs)\n    })\n  }\n\n  getAllBatchQueryCallbacks() {\n    return this.batchCallbacks.get()\n  }\n}\n\n/**\n * Class that holds the list of all extensions, applied to particular instance,\n * as well as resolved versions of the components that need to apply on\n * different levels. Main idea of this class: avoid re-resolving as much of the\n * stuff as possible when new extensions are added while also delaying the\n * resolve until the point it is actually needed. For example, computed fields\n * of the model won't be resolved unless the model is actually queried. Neither\n * adding extensions with `client` component only cause other components to\n * recompute.\n */\nexport class MergedExtensionsList {\n  private constructor(private head?: MergedExtensionsListNode) {}\n\n  static empty() {\n    return new MergedExtensionsList()\n  }\n\n  static single(extension: ExtensionArgs) {\n    return new MergedExtensionsList(new MergedExtensionsListNode(extension))\n  }\n\n  isEmpty(): boolean {\n    return this.head === undefined\n  }\n\n  append(extension: ExtensionArgs) {\n    return new MergedExtensionsList(new MergedExtensionsListNode(extension, this.head))\n  }\n\n  getAllComputedFields(dmmfModelName: string): ComputedFieldsMap | undefined {\n    return this.head?.getAllComputedFields(dmmfModelName)\n  }\n\n  getAllClientExtensions() {\n    return this.head?.getAllClientExtensions()\n  }\n\n  getAllModelExtensions(dmmfModelName: string) {\n    return this.head?.getAllModelExtensions(dmmfModelName)\n  }\n\n  getAllQueryCallbacks(jsModelName: string, operation: string) {\n    return this.head?.getAllQueryCallbacks(jsModelName, operation) ?? []\n  }\n\n  getAllBatchQueryCallbacks() {\n    return this.head?.getAllBatchQueryCallbacks() ?? []\n  }\n}\n","import { Param } from '../types/exported/Param'\n\nexport class ParamImpl<Type, Name extends string> implements Param<Type, Name> {\n  constructor(public readonly name: Name) {}\n}\n\nexport function isParam(value: unknown): value is Param<unknown, string> {\n  return value instanceof ParamImpl\n}\n\nexport function createParam(name: string): Param<unknown, string> {\n  return new ParamImpl(name)\n}\n","// private symbol that prevents direct construction of a class\nconst secret = Symbol()\n\nexport class Skip {\n  constructor(param?: symbol) {\n    if (param !== secret) {\n      throw new Error(`Skip instance can not be constructed directly`)\n    }\n  }\n\n  ifUndefined<T>(value: T | undefined): T | Skip {\n    if (value === undefined) {\n      return skip\n    }\n    return value\n  }\n}\n\nexport const skip = new Skip(secret)\n\nexport function isSkip(value: unknown): value is Skip {\n  return value instanceof Skip\n}\n","import { RuntimeDataModel, RuntimeModel, uncapitalize } from '@prisma/client-common'\nimport { assertNever } from '@prisma/internals'\n\nimport { ErrorFormat } from '../../getPrismaClient'\nimport { CallSite } from '../../utils/CallSite'\nimport { isDate, isValidDate } from '../../utils/date'\nimport { isDecimalJsLike } from '../../utils/decimalJsLike'\nimport {\n  JsonArgumentValue,\n  JsonFieldSelection,\n  JsonQuery,\n  JsonQueryAction,\n  JsonSelectionSet,\n  OutputTypeDescription,\n  RawTaggedValue,\n} from '../engines'\nimport { throwValidationException } from '../errorRendering/throwValidationException'\nimport { MergedExtensionsList } from '../extensions/MergedExtensionsList'\nimport { computeEngineSideOmissions, computeEngineSideSelection } from '../extensions/resultUtils'\nimport { isFieldRef } from '../model/FieldRef'\nimport { isParam } from '../model/Param'\nimport { isSkip, Skip } from '../types'\nimport {\n  Action,\n  JsArgs,\n  JsInputValue,\n  JsonConvertible,\n  Omission,\n  RawParameters,\n  Selection,\n} from '../types/exported/JsApi'\nimport { ObjectEnumValue, objectEnumValues } from '../types/exported/ObjectEnums'\nimport { ValidationError } from '../types/ValidationError'\n\nconst jsActionToProtocolAction: Record<Action, JsonQueryAction> = {\n  findUnique: 'findUnique',\n  findUniqueOrThrow: 'findUniqueOrThrow',\n  findFirst: 'findFirst',\n  findFirstOrThrow: 'findFirstOrThrow',\n  findMany: 'findMany',\n  count: 'aggregate',\n  create: 'createOne',\n  createMany: 'createMany',\n  createManyAndReturn: 'createManyAndReturn',\n  update: 'updateOne',\n  updateMany: 'updateMany',\n  updateManyAndReturn: 'updateManyAndReturn',\n  upsert: 'upsertOne',\n  delete: 'deleteOne',\n  deleteMany: 'deleteMany',\n  executeRaw: 'executeRaw',\n  queryRaw: 'queryRaw',\n  aggregate: 'aggregate',\n  groupBy: 'groupBy',\n  runCommandRaw: 'runCommandRaw',\n  findRaw: 'findRaw',\n  aggregateRaw: 'aggregateRaw',\n}\n\nexport type GlobalOmitOptions = {\n  [modelName: string]: {\n    [fieldName: string]: boolean\n  }\n}\n\nexport type SerializeParams = {\n  runtimeDataModel: RuntimeDataModel\n  modelName?: string\n  action: Action\n  args?: JsArgs\n  extensions?: MergedExtensionsList\n  callsite?: CallSite\n  clientMethod: string\n  clientVersion: string\n  errorFormat: ErrorFormat\n  previewFeatures: string[]\n  globalOmit?: GlobalOmitOptions\n}\n\nconst STRICT_UNDEFINED_ERROR_MESSAGE = 'explicitly `undefined` values are not allowed'\n\nexport function serializeJsonQuery({\n  modelName,\n  action,\n  args,\n  runtimeDataModel,\n  extensions = MergedExtensionsList.empty(),\n  callsite,\n  clientMethod,\n  errorFormat,\n  clientVersion,\n  previewFeatures,\n  globalOmit,\n}: SerializeParams): JsonQuery {\n  const context = new SerializeContext({\n    runtimeDataModel,\n    modelName,\n    action,\n    rootArgs: args,\n    callsite,\n    extensions,\n    selectionPath: [],\n    argumentPath: [],\n    originalMethod: clientMethod,\n    errorFormat,\n    clientVersion,\n    previewFeatures,\n    globalOmit,\n  })\n  return {\n    modelName,\n    action: jsActionToProtocolAction[action],\n    query: serializeFieldSelection(args, context),\n  }\n}\n\nfunction serializeFieldSelection(\n  { select, include, ...args }: JsArgs = {},\n  context: SerializeContext,\n): JsonFieldSelection {\n  const omit = args.omit\n  delete args.omit\n  return {\n    arguments: serializeArgumentsObject(args, context),\n    selection: serializeSelectionSet(select, include, omit, context),\n  }\n}\n\nfunction serializeSelectionSet(\n  select: Selection | undefined,\n  include: Selection | undefined,\n  omit: Omission | undefined,\n  context: SerializeContext,\n): JsonSelectionSet {\n  if (select) {\n    if (include) {\n      context.throwValidationError({\n        kind: 'MutuallyExclusiveFields',\n        firstField: 'include',\n        secondField: 'select',\n        selectionPath: context.getSelectionPath(),\n      })\n    } else if (omit) {\n      context.throwValidationError({\n        kind: 'MutuallyExclusiveFields',\n        firstField: 'omit',\n        secondField: 'select',\n        selectionPath: context.getSelectionPath(),\n      })\n    }\n    return createExplicitSelection(select, context)\n  }\n\n  return createImplicitSelection(context, include, omit)\n}\n\nfunction createImplicitSelection(\n  context: SerializeContext,\n  include: Selection | undefined,\n  omit: Omission | undefined,\n) {\n  const selectionSet: JsonSelectionSet = {}\n\n  if (context.modelOrType && !context.isRawAction()) {\n    selectionSet.$composites = true\n    selectionSet.$scalars = true\n  }\n\n  if (include) {\n    addIncludedRelations(selectionSet, include, context)\n  }\n\n  omitFields(selectionSet, omit, context)\n\n  return selectionSet\n}\n\nfunction addIncludedRelations(selectionSet: JsonSelectionSet, include: Selection, context: SerializeContext) {\n  for (const [key, value] of Object.entries(include)) {\n    if (isSkip(value)) {\n      continue\n    }\n    const nestedContext = context.nestSelection(key)\n    validateSelectionForUndefined(value, nestedContext)\n    if (value === false || value === undefined) {\n      selectionSet[key] = false\n      continue\n    }\n\n    const field = context.findField(key)\n    if (field && field.kind !== 'object') {\n      context.throwValidationError({\n        kind: 'IncludeOnScalar',\n        selectionPath: context.getSelectionPath().concat(key),\n        outputType: context.getOutputTypeDescription(),\n      })\n    }\n    if (field) {\n      selectionSet[key] = serializeFieldSelection(value === true ? {} : value, nestedContext)\n      continue\n    }\n\n    if (value === true) {\n      selectionSet[key] = true\n      continue\n    }\n\n    // value is an object, field is unknown\n    // this can either be user error (in that case, qe will respond with an error)\n    // or virtual field not present on datamodel (like `_count`).\n    // Since we don't know which one cast is, we still attempt to serialize selection\n    selectionSet[key] = serializeFieldSelection(value, nestedContext)\n  }\n}\n\nfunction omitFields(selectionSet: JsonSelectionSet, localOmit: Omission | undefined, context: SerializeContext) {\n  const computedFields = context.getComputedFields()\n  const combinedOmits = { ...context.getGlobalOmit(), ...localOmit }\n  const omitWithComputedFields = computeEngineSideOmissions(combinedOmits, computedFields)\n  for (const [key, value] of Object.entries(omitWithComputedFields)) {\n    if (isSkip(value)) {\n      continue\n    }\n    validateSelectionForUndefined(value, context.nestSelection(key))\n    const field = context.findField(key)\n    if (computedFields?.[key] && !field) {\n      continue\n    }\n    selectionSet[key] = !value\n  }\n}\n\nfunction createExplicitSelection(select: Selection, context: SerializeContext) {\n  const selectionSet: JsonSelectionSet = {}\n  const computedFields = context.getComputedFields()\n  const selectWithComputedFields = computeEngineSideSelection(select, computedFields)\n\n  for (const [key, value] of Object.entries(selectWithComputedFields)) {\n    if (isSkip(value)) {\n      continue\n    }\n    const nestedContext = context.nestSelection(key)\n    validateSelectionForUndefined(value, nestedContext)\n    const field = context.findField(key)\n    if (computedFields?.[key] && !field) {\n      continue\n    }\n    if (value === false || value === undefined || isSkip(value)) {\n      selectionSet[key] = false\n      continue\n    }\n    if (value === true) {\n      if (field?.kind === 'object') {\n        selectionSet[key] = serializeFieldSelection({}, nestedContext)\n      } else {\n        selectionSet[key] = true\n      }\n      continue\n    }\n    selectionSet[key] = serializeFieldSelection(value, nestedContext)\n  }\n  return selectionSet\n}\n\nfunction serializeArgumentsValue(\n  jsValue: Exclude<JsInputValue, undefined | Skip>,\n  context: SerializeContext,\n): JsonArgumentValue {\n  if (jsValue === null) {\n    return null\n  }\n\n  if (typeof jsValue === 'string' || typeof jsValue === 'number' || typeof jsValue === 'boolean') {\n    return jsValue\n  }\n\n  if (typeof jsValue === 'bigint') {\n    return { $type: 'BigInt', value: String(jsValue) }\n  }\n\n  if (isDate(jsValue)) {\n    if (isValidDate(jsValue)) {\n      return { $type: 'DateTime', value: jsValue.toISOString() }\n    } else {\n      context.throwValidationError({\n        kind: 'InvalidArgumentValue',\n        selectionPath: context.getSelectionPath(),\n        argumentPath: context.getArgumentPath(),\n        argument: {\n          name: context.getArgumentName(),\n          typeNames: ['Date'],\n        },\n        underlyingError: 'Provided Date object is invalid',\n      })\n    }\n  }\n\n  if (isParam(jsValue)) {\n    return { $type: 'Param', value: jsValue.name }\n  }\n\n  if (isFieldRef(jsValue)) {\n    return { $type: 'FieldRef', value: { _ref: jsValue.name, _container: jsValue.modelName } }\n  }\n\n  if (Array.isArray(jsValue)) {\n    return serializeArgumentsArray(jsValue, context)\n  }\n\n  if (ArrayBuffer.isView(jsValue)) {\n    const { buffer, byteOffset, byteLength } = jsValue\n    return { $type: 'Bytes', value: Buffer.from(buffer, byteOffset, byteLength).toString('base64') }\n  }\n\n  if (isRawParameters(jsValue)) {\n    return jsValue.values\n  }\n\n  if (isDecimalJsLike(jsValue)) {\n    return { $type: 'Decimal', value: jsValue.toFixed() }\n  }\n\n  if (jsValue instanceof ObjectEnumValue) {\n    if (jsValue !== objectEnumValues.instances[jsValue._getName()]) {\n      throw new Error('Invalid ObjectEnumValue')\n    }\n    return { $type: 'Enum', value: jsValue._getName() }\n  }\n\n  if (isJSONConvertible(jsValue)) {\n    return jsValue.toJSON() as JsonArgumentValue\n  }\n\n  if (typeof jsValue === 'object') {\n    return serializeArgumentsObject(jsValue, context)\n  }\n\n  context.throwValidationError({\n    kind: 'InvalidArgumentValue',\n    selectionPath: context.getSelectionPath(),\n    argumentPath: context.getArgumentPath(),\n    argument: {\n      name: context.getArgumentName(),\n      typeNames: [],\n    },\n    underlyingError: `We could not serialize ${Object.prototype.toString.call(\n      jsValue,\n    )} value. Serialize the object to JSON or implement a \".toJSON()\" method on it`,\n  })\n}\n\nfunction serializeArgumentsObject(\n  object: Record<string, JsInputValue>,\n  context: SerializeContext,\n): Record<string, JsonArgumentValue> | RawTaggedValue {\n  if (object['$type']) {\n    return { $type: 'Raw', value: object }\n  }\n  const result: Record<string, JsonArgumentValue> = {}\n  for (const key in object) {\n    const value = object[key]\n    const nestedContext = context.nestArgument(key)\n    if (isSkip(value)) {\n      continue\n    }\n    if (value !== undefined) {\n      result[key] = serializeArgumentsValue(value, nestedContext)\n    } else if (context.isPreviewFeatureOn('strictUndefinedChecks')) {\n      context.throwValidationError({\n        kind: 'InvalidArgumentValue',\n        argumentPath: nestedContext.getArgumentPath(),\n        selectionPath: context.getSelectionPath(),\n        argument: { name: context.getArgumentName(), typeNames: [] },\n        underlyingError: STRICT_UNDEFINED_ERROR_MESSAGE,\n      })\n    }\n  }\n  return result\n}\n\nfunction serializeArgumentsArray(array: JsInputValue[], context: SerializeContext): JsonArgumentValue[] {\n  const result: JsonArgumentValue[] = []\n  for (let i = 0; i < array.length; i++) {\n    const itemContext = context.nestArgument(String(i))\n    const value = array[i]\n    if (value === undefined || isSkip(value)) {\n      const valueName = value === undefined ? 'undefined' : `Prisma.skip`\n      context.throwValidationError({\n        kind: 'InvalidArgumentValue',\n        selectionPath: itemContext.getSelectionPath(),\n        argumentPath: itemContext.getArgumentPath(),\n        argument: {\n          name: `${context.getArgumentName()}[${i}]`,\n          typeNames: [],\n        },\n        underlyingError: `Can not use \\`${valueName}\\` value within array. Use \\`null\\` or filter out \\`${valueName}\\` values`,\n      })\n    }\n    result.push(serializeArgumentsValue(value, itemContext))\n  }\n  return result\n}\n\nfunction isRawParameters(value: JsInputValue): value is RawParameters {\n  return typeof value === 'object' && value !== null && value['__prismaRawParameters__'] === true\n}\n\nfunction isJSONConvertible(value: JsInputValue): value is JsonConvertible {\n  return typeof value === 'object' && value !== null && typeof value['toJSON'] === 'function'\n}\n\nfunction validateSelectionForUndefined(value: unknown, context: SerializeContext) {\n  if (value === undefined && context.isPreviewFeatureOn('strictUndefinedChecks')) {\n    context.throwValidationError({\n      kind: 'InvalidSelectionValue',\n      selectionPath: context.getSelectionPath(),\n      underlyingError: STRICT_UNDEFINED_ERROR_MESSAGE,\n    })\n  }\n}\n\ntype ContextParams = {\n  runtimeDataModel: RuntimeDataModel\n  originalMethod: string\n  rootArgs: JsArgs | undefined\n  extensions: MergedExtensionsList\n  selectionPath: string[]\n  argumentPath: string[]\n  modelName?: string\n  action: Action\n  callsite?: CallSite\n  errorFormat: ErrorFormat\n  clientVersion: string\n  previewFeatures: string[]\n  globalOmit?: GlobalOmitOptions\n}\n\nclass SerializeContext {\n  public readonly modelOrType: RuntimeModel | undefined\n  constructor(private params: ContextParams) {\n    if (this.params.modelName) {\n      // TODO: throw if not found\n      this.modelOrType =\n        this.params.runtimeDataModel.models[this.params.modelName] ??\n        this.params.runtimeDataModel.types[this.params.modelName]\n    }\n  }\n\n  throwValidationError(error: ValidationError): never {\n    throwValidationException({\n      errors: [error],\n      originalMethod: this.params.originalMethod,\n      args: this.params.rootArgs ?? {},\n      callsite: this.params.callsite,\n      errorFormat: this.params.errorFormat,\n      clientVersion: this.params.clientVersion,\n      globalOmit: this.params.globalOmit,\n    })\n  }\n\n  getSelectionPath() {\n    return this.params.selectionPath\n  }\n\n  getArgumentPath() {\n    return this.params.argumentPath\n  }\n\n  getArgumentName() {\n    return this.params.argumentPath[this.params.argumentPath.length - 1]\n  }\n\n  getOutputTypeDescription(): OutputTypeDescription | undefined {\n    if (!this.params.modelName || !this.modelOrType) {\n      return undefined\n    }\n    return {\n      name: this.params.modelName,\n      fields: this.modelOrType.fields.map((field) => ({\n        name: field.name,\n        typeName: 'boolean',\n        isRelation: field.kind === 'object',\n      })),\n    }\n  }\n\n  isRawAction() {\n    return ['executeRaw', 'queryRaw', 'runCommandRaw', 'findRaw', 'aggregateRaw'].includes(this.params.action)\n  }\n\n  isPreviewFeatureOn(previewFeature: string) {\n    return this.params.previewFeatures.includes(previewFeature)\n  }\n\n  getComputedFields() {\n    if (!this.params.modelName) {\n      return undefined\n    }\n\n    return this.params.extensions.getAllComputedFields(this.params.modelName)\n  }\n\n  findField(name: string) {\n    return this.modelOrType?.fields.find((field) => field.name === name)\n  }\n\n  nestSelection(fieldName: string) {\n    const field = this.findField(fieldName)\n    const modelName = field?.kind === 'object' ? field.type : undefined\n\n    return new SerializeContext({\n      ...this.params,\n      modelName,\n      selectionPath: this.params.selectionPath.concat(fieldName),\n    })\n  }\n\n  getGlobalOmit(): Record<string, boolean> {\n    if (this.params.modelName && this.shouldApplyGlobalOmit()) {\n      return this.params.globalOmit?.[uncapitalize(this.params.modelName)] ?? {}\n    }\n    return {}\n  }\n\n  shouldApplyGlobalOmit(): boolean {\n    switch (this.params.action) {\n      case 'findFirst':\n      case 'findFirstOrThrow':\n      case 'findUniqueOrThrow':\n      case 'findMany':\n      case 'upsert':\n      case 'findUnique':\n      case 'createManyAndReturn':\n      case 'create':\n      case 'update':\n      case 'updateManyAndReturn':\n      case 'delete':\n        return true\n      case 'executeRaw':\n      case 'aggregateRaw':\n      case 'runCommandRaw':\n      case 'findRaw':\n      case 'createMany':\n      case 'deleteMany':\n      case 'groupBy':\n      case 'updateMany':\n      case 'count':\n      case 'aggregate':\n      case 'queryRaw':\n        return false\n      default:\n        assertNever(this.params.action, 'Unknown action')\n    }\n  }\n\n  nestArgument(fieldName: string) {\n    return new SerializeContext({\n      ...this.params,\n      argumentPath: this.params.argumentPath.concat(fieldName),\n    })\n  }\n}\n","import { Client } from '../../getPrismaClient'\nimport type { Metric, MetricHistogram, MetricHistogramBucket, Metrics } from '../engines'\nimport { PrismaClientValidationError } from '../errors/PrismaClientValidationError'\n\nexport type MetricsOptions = {\n  /**\n   * Labels to add to every metrics in key-value format\n   */\n  globalLabels?: Record<string, string>\n}\n\nfunction checkPreviewFeatureFlag(client: Client) {\n  if (!client._hasPreviewFlag('metrics')) {\n    throw new PrismaClientValidationError('`metrics` preview feature must be enabled in order to access metrics API', {\n      clientVersion: client._clientVersion,\n    })\n  }\n}\n\nexport class MetricsClient {\n  private _client: Client\n\n  constructor(client: Client) {\n    this._client = client\n  }\n\n  /**\n   * Returns all metrics gathered up to this point in prometheus format.\n   * Result of this call can be exposed directly to prometheus scraping endpoint\n   *\n   * @param options\n   * @returns\n   */\n  prometheus(options?: MetricsOptions): Promise<string> {\n    checkPreviewFeatureFlag(this._client)\n\n    return this._client._engine.metrics({ format: 'prometheus', ...options })\n  }\n\n  /**\n   * Returns all metrics gathered up to this point in prometheus format.\n   *\n   * @param options\n   * @returns\n   */\n  json(options?: MetricsOptions): Promise<Metrics> {\n    checkPreviewFeatureFlag(this._client)\n\n    return this._client._engine.metrics({ format: 'json', ...options })\n  }\n}\n\nexport type { Metric, MetricHistogram, MetricHistogramBucket, Metrics }\n","import { BaseDMMF, lazyProperty, RuntimeDataModel } from '@prisma/client-common'\n\nexport function defineDmmfProperty(target: object, runtimeDataModel: RuntimeDataModel) {\n  const dmmfLazy = lazyProperty(() => runtimeDataModelToBaseDmmf(runtimeDataModel))\n\n  Object.defineProperty(target, 'dmmf', {\n    get: () => dmmfLazy.get(),\n  })\n}\n\nfunction runtimeDataModelToBaseDmmf(runtimeDataModel: RuntimeDataModel): BaseDMMF {\n  if (TARGET_BUILD_TYPE === 'wasm-engine-edge' || TARGET_BUILD_TYPE === 'wasm-compiler-edge') {\n    throw new Error('Prisma.dmmf is not available when running in edge runtimes.')\n  }\n\n  return {\n    datamodel: {\n      models: buildDMMFList(runtimeDataModel.models),\n      enums: buildDMMFList(runtimeDataModel.enums),\n      types: buildDMMFList(runtimeDataModel.types),\n    },\n  }\n}\n\nfunction buildDMMFList<T>(map: Record<string, T>): Array<T & { name: string }> {\n  return Object.entries(map).map(([name, props]) => ({ name, ...props }))\n}\n","type TypedSqlInternal = {\n  sql: string\n  values: readonly unknown[]\n}\n\nconst internals = new WeakMap<TypedSql<any, any>, TypedSqlInternal>()\nconst TypedSqlMarker = '$$PrismaTypedSql'\n\nexport declare const PrivateResultType: unique symbol\n\nexport class TypedSql<Values extends readonly unknown[], Result> {\n  declare [PrivateResultType]: Result\n\n  constructor(sql: string, values: Values) {\n    internals.set(this, {\n      sql,\n      values,\n    })\n\n    Object.defineProperty(this, TypedSqlMarker, { value: TypedSqlMarker })\n  }\n\n  get sql(): string {\n    return internals.get(this)!.sql\n  }\n\n  get values(): Values {\n    return internals.get(this)!.values as Values\n  }\n}\n\nexport type UnknownTypedSql = TypedSql<unknown[], unknown>\n\nexport function makeTypedQueryFactory(sql: string) {\n  return (...values) => new TypedSql(sql, values)\n}\n\n// used so we could detect typed sql instances, created by different instance of runtime\n// or after hmr trigger\nexport function isTypedSql(value: unknown): value is UnknownTypedSql {\n  return value != null && value[TypedSqlMarker] === TypedSqlMarker\n}\n","import type { Context } from '@opentelemetry/api'\nimport { GetPrismaClientConfig, RuntimeDataModel } from '@prisma/client-common'\nimport { clearLogs, Debug } from '@prisma/debug'\nimport type { SqlDriverAdapterFactory } from '@prisma/driver-adapter-utils'\nimport { version as enginesVersion } from '@prisma/engines-version/package.json'\nimport { ExtendedSpanOptions, logger, TracingHelper, tryLoadEnvs } from '@prisma/internals'\nimport { AsyncResource } from 'async_hooks'\nimport { EventEmitter } from 'events'\nimport fs from 'fs'\nimport path from 'path'\nimport { RawValue, Sql } from 'sql-template-tag'\n\nimport {\n  PrismaClientInitializationError,\n  PrismaClientKnownRequestError,\n  PrismaClientUnknownRequestError,\n  PrismaClientValidationError,\n} from '.'\nimport { addProperty, createCompositeProxy, removeProperties } from './core/compositeProxy'\nimport { BatchTransactionOptions, Engine, EngineConfig, Options } from './core/engines'\nimport { AccelerateEngineConfig } from './core/engines/accelerate/AccelerateEngine'\nimport { AccelerateExtensionFetchDecorator } from './core/engines/common/Engine'\nimport { EngineEvent, LogEmitter } from './core/engines/common/types/Events'\nimport type * as Transaction from './core/engines/common/types/Transaction'\nimport { getBatchRequestPayload } from './core/engines/common/utils/getBatchRequestPayload'\nimport { prettyPrintArguments } from './core/errorRendering/prettyPrintArguments'\nimport { prismaGraphQLToJSError } from './core/errors/utils/prismaGraphQLToJSError'\nimport { $extends } from './core/extensions/$extends'\nimport { applyAllResultExtensions } from './core/extensions/applyAllResultExtensions'\nimport { applyQueryExtensions } from './core/extensions/applyQueryExtensions'\nimport { MergedExtensionsList } from './core/extensions/MergedExtensionsList'\nimport { checkPlatformCaching } from './core/init/checkPlatformCaching'\nimport { getDatasourceOverrides } from './core/init/getDatasourceOverrides'\nimport { getEngineInstance } from './core/init/getEngineInstance'\nimport { getPreviewFeatures } from './core/init/getPreviewFeatures'\nimport { resolveDatasourceUrl } from './core/init/resolveDatasourceUrl'\nimport { GlobalOmitOptions, serializeJsonQuery } from './core/jsonProtocol/serializeJsonQuery'\nimport { MetricsClient } from './core/metrics/MetricsClient'\nimport {\n  applyModelsAndClientExtensions,\n  unApplyModelsAndClientExtensions,\n} from './core/model/applyModelsAndClientExtensions'\nimport { rawCommandArgsMapper } from './core/raw-query/rawCommandArgsMapper'\nimport {\n  checkAlter,\n  rawQueryArgsMapper,\n  sqlMiddlewareArgsMapper,\n  templateStringMiddlewareArgsMapper,\n} from './core/raw-query/rawQueryArgsMapper'\nimport { createPrismaPromiseFactory } from './core/request/createPrismaPromise'\nimport {\n  PrismaPromise,\n  PrismaPromiseInteractiveTransaction,\n  PrismaPromiseTransaction,\n} from './core/request/PrismaPromise'\nimport { UserArgs } from './core/request/UserArgs'\nimport { getTracingHelper } from './core/tracing/TracingHelper'\nimport { getLockCountPromise } from './core/transaction/utils/createLockCountPromise'\nimport { itxClientDenyList } from './core/types/exported/itxClientDenyList'\nimport { JsInputValue } from './core/types/exported/JsApi'\nimport { RawQueryArgs } from './core/types/exported/RawQueryArgs'\nimport { UnknownTypedSql } from './core/types/exported/TypedSql'\nimport { getLogLevel } from './getLogLevel'\nimport type { QueryMiddlewareParams } from './QueryMiddlewareParams'\nimport { RequestHandler } from './RequestHandler'\nimport { CallSite, getCallSite } from './utils/CallSite'\nimport { clientVersion } from './utils/clientVersion'\nimport { validatePrismaClientOptions } from './utils/validatePrismaClientOptions'\nimport { waitForBatch } from './utils/waitForBatch'\n\nconst debug = Debug('prisma:client')\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var NODE_CLIENT: true\n  const TARGET_BUILD_TYPE:\n    | 'binary'\n    | 'library'\n    | 'edge'\n    | 'wasm-engine-edge'\n    | 'wasm-compiler-edge'\n    | 'react-native'\n    | 'client'\n}\n\n// used by esbuild for tree-shaking\ntypeof globalThis === 'object' ? (globalThis.NODE_CLIENT = true) : 0\n\nexport type ErrorFormat = 'pretty' | 'colorless' | 'minimal'\n\nexport type Datasource = { url?: string }\nexport type Datasources = { [name in string]: Datasource }\n\nexport type PrismaClientOptions = {\n  /**\n   * Overwrites the primary datasource url from your schema.prisma file\n   */\n  datasourceUrl?: string\n  /**\n   * Instance of a Driver Adapter, e.g., like one provided by `@prisma/adapter-planetscale.\n   */\n  adapter?: SqlDriverAdapterFactory | null\n\n  /**\n   * Overwrites the datasource url from your schema.prisma file\n   */\n  datasources?: Datasources\n\n  /**\n   * @default \"colorless\"\n   */\n  errorFormat?: ErrorFormat\n\n  /**\n   * The default values for Transaction options\n   * maxWait ?= 2000\n   * timeout ?= 5000\n   */\n  transactionOptions?: Transaction.Options\n\n  /**\n   * @example\n   * \\`\\`\\`\n   * // Defaults to stdout\n   * log: ['query', 'info', 'warn']\n   *\n   * // Emit as events\n   * log: [\n   *  { emit: 'stdout', level: 'query' },\n   *  { emit: 'stdout', level: 'info' },\n   *  { emit: 'stdout', level: 'warn' }\n   * ]\n   * \\`\\`\\`\n   * Read more in our [docs](https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/logging#the-log-option).\n   */\n  log?: Array<LogLevel | LogDefinition>\n\n  omit?: GlobalOmitOptions\n\n  /**\n   * @internal\n   * You probably don't want to use this. \\`__internal\\` is used by internal tooling.\n   */\n  __internal?: {\n    debug?: boolean\n    engine?: {\n      cwd?: string\n      binaryPath?: string\n      endpoint?: string\n      allowTriggerPanic?: boolean\n    }\n    /** This can be used for testing purposes */\n    configOverride?: (config: GetPrismaClientConfig) => GetPrismaClientConfig\n  }\n}\n\nexport type Unpacker = (data: any) => any\n\nexport type InternalRequestParams = {\n  /**\n   * The original client method being called.\n   * Even though the rootField / operation can be changed,\n   * this method stays as it is, as it's what the user's\n   * code looks like\n   */\n  clientMethod: string // TODO what is this\n  /**\n   * Name of js model that triggered the request. Might be used\n   * for warnings or error messages\n   */\n  jsModelName?: string\n  // Extra headers for data proxy.\n  callsite?: CallSite\n  transaction?: PrismaPromiseTransaction\n  unpacker?: Unpacker // TODO what is this\n  otelParentCtx?: Context\n  /** Used to \"desugar\" a user input into an \"expanded\" one */\n  argsMapper?: (args?: UserArgs) => UserArgs\n\n  /** Used to convert args for middleware and back */\n  middlewareArgsMapper?: MiddlewareArgsMapper<unknown, unknown>\n  /** Used for Accelerate client extension via Data Proxy */\n  customDataProxyFetch?: AccelerateExtensionFetchDecorator\n} & Omit<QueryMiddlewareParams, 'runInTransaction'>\n\nexport type MiddlewareArgsMapper<RequestArgs, MiddlewareArgs> = {\n  requestArgsToMiddlewareArgs(requestArgs: RequestArgs): MiddlewareArgs\n  middlewareArgsToRequestArgs(middlewareArgs: MiddlewareArgs): RequestArgs\n}\n\nconst noopMiddlewareArgsMapper: MiddlewareArgsMapper<unknown, unknown> = {\n  requestArgsToMiddlewareArgs: (param) => param,\n  middlewareArgsToRequestArgs: (param) => param,\n}\n\n/* Types for Logging */\nexport type LogLevel = 'info' | 'query' | 'warn' | 'error'\nexport type LogDefinition = {\n  level: LogLevel\n  emit: 'stdout' | 'event'\n}\n\nexport type QueryEvent = {\n  timestamp: Date\n  query: string\n  params: string\n  duration: number\n  target: string\n}\n\nexport type LogEvent = {\n  timestamp: Date\n  message: string\n  target: string\n}\n/* End Types for Logging */\n\ntype ExtendedEventType = LogLevel | 'beforeExit'\ntype EventCallback<E extends ExtendedEventType> = [E] extends ['beforeExit']\n  ? () => Promise<void>\n  : [E] extends [LogLevel]\n    ? (event: EngineEvent<E>) => void\n    : never\n\nconst TX_ID = Symbol.for('prisma.client.transaction.id')\n\nconst BatchTxIdCounter = {\n  id: 0,\n  nextId() {\n    return ++this.id\n  },\n}\n\nexport type Client = ReturnType<typeof getPrismaClient> extends new () => infer T ? T : never\n\nexport function getPrismaClient(config: GetPrismaClientConfig) {\n  class PrismaClient {\n    _originalClient = this\n    _runtimeDataModel: RuntimeDataModel\n    _requestHandler: RequestHandler\n    _connectionPromise?: Promise<any>\n    _disconnectionPromise?: Promise<any>\n    _engineConfig: EngineConfig\n    _accelerateEngineConfig: AccelerateEngineConfig\n    _clientVersion: string\n    _errorFormat: ErrorFormat\n    _tracingHelper: TracingHelper\n    _previewFeatures: string[]\n    _activeProvider: string\n    _globalOmit?: GlobalOmitOptions\n    _extensions: MergedExtensionsList\n    /**\n     * @remarks This is used internally by Policy, do not rename or remove\n     */\n    _engine: Engine\n    /**\n     * A fully constructed/applied Client that references the parent\n     * PrismaClient. This is used for Client extensions only.\n     */\n    _appliedParent: PrismaClient\n    _createPrismaPromise = createPrismaPromiseFactory()\n\n    constructor(optionsArg?: PrismaClientOptions) {\n      config = optionsArg?.__internal?.configOverride?.(config) ?? config\n\n      checkPlatformCaching(config)\n\n      if (optionsArg) {\n        validatePrismaClientOptions(optionsArg, config)\n      }\n\n      // prevents unhandled error events when users do not explicitly listen to them\n      const logEmitter = new EventEmitter().on('error', () => {}) as LogEmitter\n\n      this._extensions = MergedExtensionsList.empty()\n      this._previewFeatures = getPreviewFeatures(config)\n      this._clientVersion = config.clientVersion ?? clientVersion\n      this._activeProvider = config.activeProvider\n      this._globalOmit = optionsArg?.omit\n      this._tracingHelper = getTracingHelper()\n      const envPaths = config.relativeEnvPaths && {\n        rootEnvPath:\n          config.relativeEnvPaths.rootEnvPath && path.resolve(config.dirname, config.relativeEnvPaths.rootEnvPath),\n        schemaEnvPath:\n          config.relativeEnvPaths.schemaEnvPath && path.resolve(config.dirname, config.relativeEnvPaths.schemaEnvPath),\n      }\n\n      /**\n       * Initialise and validate the Driver Adapter, if provided.\n       */\n\n      let adapter: SqlDriverAdapterFactory | undefined\n      if (optionsArg?.adapter) {\n        adapter = optionsArg.adapter\n\n        // Note:\n        // - `getConfig(..).datasources[0].provider` can be `postgresql`, `postgres`, `mysql`, or other known providers\n        // - `getConfig(..).datasources[0].activeProvider`, stored in `config.activeProvider`, can be `postgresql`, `mysql`, or other known providers\n        // - `adapter.provider` can be `postgres`, `mysql`, or `sqlite`, and changing this requires changes to Rust as well,\n        //    see https://github.com/prisma/prisma-engines/blob/d116c37d7d27aee74fdd840fc85ab2b45407e5ce/query-engine/driver-adapters/src/types.rs#L22-L23.\n        //\n        // TODO: Normalize these provider names once and for all in Prisma 6.\n        const expectedDriverAdapterProvider =\n          config.activeProvider === 'postgresql'\n            ? 'postgres'\n            : // CockroachDB is only accessible through Postgres driver adapters\n              config.activeProvider === 'cockroachdb'\n              ? 'postgres'\n              : config.activeProvider\n\n        if (adapter.provider !== expectedDriverAdapterProvider) {\n          throw new PrismaClientInitializationError(\n            `The Driver Adapter \\`${adapter.adapterName}\\`, based on \\`${adapter.provider}\\`, is not compatible with the provider \\`${expectedDriverAdapterProvider}\\` specified in the Prisma schema.`,\n            this._clientVersion,\n          )\n        }\n\n        if (optionsArg.datasources || optionsArg.datasourceUrl !== undefined) {\n          throw new PrismaClientInitializationError(\n            `Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.`,\n            this._clientVersion,\n          )\n        }\n      }\n\n      const loadedEnv = // for node we load the env from files, for edge only via env injections\n        (NODE_CLIENT && !adapter && envPaths && tryLoadEnvs(envPaths, { conflictCheck: 'none' })) ||\n        config.injectableEdgeEnv?.()\n\n      try {\n        const options: PrismaClientOptions = optionsArg ?? {}\n        const internal = options.__internal ?? {}\n\n        const useDebug = internal.debug === true\n        if (useDebug) {\n          Debug.enable('prisma:client')\n        }\n\n        let cwd = path.resolve(config.dirname, config.relativePath)\n\n        // TODO this logic should not be needed anymore #findSync\n        if (!fs.existsSync(cwd)) {\n          cwd = config.dirname\n        }\n\n        debug('dirname', config.dirname)\n        debug('relativePath', config.relativePath)\n        debug('cwd', cwd)\n\n        const engineConfig = internal.engine || {}\n\n        if (options.errorFormat) {\n          this._errorFormat = options.errorFormat\n        } else if (process.env.NODE_ENV === 'production') {\n          this._errorFormat = 'minimal'\n        } else if (process.env.NO_COLOR) {\n          this._errorFormat = 'colorless'\n        } else {\n          this._errorFormat = 'colorless' // default errorFormat\n        }\n\n        this._runtimeDataModel = config.runtimeDataModel\n\n        this._engineConfig = {\n          cwd,\n          dirname: config.dirname,\n          enableDebugLogs: useDebug,\n          allowTriggerPanic: engineConfig.allowTriggerPanic,\n          prismaPath: engineConfig.binaryPath ?? undefined,\n          engineEndpoint: engineConfig.endpoint,\n          generator: config.generator,\n          showColors: this._errorFormat === 'pretty',\n          logLevel: options.log && (getLogLevel(options.log) as any), // TODO\n          logQueries:\n            options.log &&\n            Boolean(\n              typeof options.log === 'string'\n                ? options.log === 'query'\n                : options.log.find((o) => (typeof o === 'string' ? o === 'query' : o.level === 'query')),\n            ),\n          env: loadedEnv?.parsed ?? {},\n          flags: [],\n          engineWasm: config.engineWasm,\n          compilerWasm: config.compilerWasm,\n          clientVersion: config.clientVersion,\n          engineVersion: config.engineVersion,\n          previewFeatures: this._previewFeatures,\n          activeProvider: config.activeProvider,\n          inlineSchema: config.inlineSchema,\n          overrideDatasources: getDatasourceOverrides(options, config.datasourceNames),\n          inlineDatasources: config.inlineDatasources,\n          inlineSchemaHash: config.inlineSchemaHash,\n          tracingHelper: this._tracingHelper,\n          transactionOptions: {\n            maxWait: options.transactionOptions?.maxWait ?? 2000,\n            timeout: options.transactionOptions?.timeout ?? 5000,\n            isolationLevel: options.transactionOptions?.isolationLevel,\n          },\n          logEmitter,\n          isBundled: config.isBundled,\n          adapter,\n        }\n\n        this._accelerateEngineConfig = {\n          ...this._engineConfig,\n          // share runtime utils to accelerate\n          accelerateUtils: {\n            resolveDatasourceUrl,\n            getBatchRequestPayload,\n            prismaGraphQLToJSError,\n            PrismaClientUnknownRequestError,\n            PrismaClientInitializationError,\n            PrismaClientKnownRequestError,\n            debug: Debug('prisma:client:accelerateEngine'),\n            engineVersion: enginesVersion,\n            clientVersion: config.clientVersion,\n          },\n        }\n\n        debug('clientVersion', config.clientVersion)\n\n        this._engine = getEngineInstance(config, this._engineConfig)\n        this._requestHandler = new RequestHandler(this, logEmitter)\n\n        if (options.log) {\n          for (const log of options.log) {\n            const level = typeof log === 'string' ? log : log.emit === 'stdout' ? log.level : null\n            if (level) {\n              this.$on(level, (event) => {\n                logger.log(`${logger.tags[level] ?? ''}`, (event as LogEvent).message || (event as QueryEvent).query)\n              })\n            }\n          }\n        }\n      } catch (e: any) {\n        e.clientVersion = this._clientVersion\n        throw e\n      }\n\n      // the first client has no parent so it is its own parent client\n      // this is used for extensions to reference their parent client\n      return (this._appliedParent = applyModelsAndClientExtensions(this))\n      // this applied client is also a custom constructor return value\n    }\n\n    get [Symbol.toStringTag]() {\n      return 'PrismaClient'\n    }\n\n    $on<E extends ExtendedEventType>(eventType: E, callback: EventCallback<E>): PrismaClient {\n      if (eventType === 'beforeExit') {\n        this._engine.onBeforeExit(callback as EventCallback<'beforeExit'>)\n      } else if (eventType) {\n        this._engineConfig.logEmitter.on(eventType, callback as EventCallback<LogLevel>)\n      }\n      return this\n    }\n\n    $connect() {\n      try {\n        return this._engine.start()\n      } catch (e: any) {\n        e.clientVersion = this._clientVersion\n        throw e\n      }\n    }\n\n    /**\n     * Disconnect from the database\n     */\n    async $disconnect() {\n      try {\n        await this._engine.stop()\n      } catch (e: any) {\n        e.clientVersion = this._clientVersion\n        throw e\n      } finally {\n        // Debug module keeps a list of last 100 logs regardless of environment\n        // variables. This can cause a memory leak. It's especially bad in jest\n        // environment where keeping an error in this list prevents jest sandbox\n        // from being GCed. Clearing logs on disconnect helps to avoid that\n        clearLogs()\n      }\n    }\n\n    /**\n     * Executes a raw query and always returns a number\n     */\n    $executeRawInternal(\n      transaction: PrismaPromiseTransaction | undefined,\n      clientMethod: string,\n      args: RawQueryArgs,\n      middlewareArgsMapper?: MiddlewareArgsMapper<unknown, unknown>,\n    ): Promise<number> {\n      const activeProvider = this._activeProvider\n\n      return this._request({\n        action: 'executeRaw',\n        args,\n        transaction,\n        clientMethod,\n        argsMapper: rawQueryArgsMapper({ clientMethod, activeProvider }),\n        callsite: getCallSite(this._errorFormat),\n        dataPath: [],\n        middlewareArgsMapper,\n      })\n    }\n\n    /**\n     * Executes a raw query provided through a safe tag function\n     * @see https://github.com/prisma/prisma/issues/7142\n     *\n     * @param query\n     * @param values\n     * @returns\n     */\n    $executeRaw(query: TemplateStringsArray | Sql, ...values: any[]) {\n      return this._createPrismaPromise((transaction) => {\n        if ((query as TemplateStringsArray).raw !== undefined || (query as Sql).sql !== undefined) {\n          const [sql, argsMapper] = toSql(query, values)\n          checkAlter(\n            this._activeProvider,\n            sql.text,\n            sql.values,\n            Array.isArray(query) ? 'prisma.$executeRaw`<SQL>`' : 'prisma.$executeRaw(sql`<SQL>`)',\n          )\n          return this.$executeRawInternal(transaction, '$executeRaw', sql, argsMapper)\n        }\n\n        throw new PrismaClientValidationError(\n          `\\`$executeRaw\\` is a tag function, please use it like the following:\n\\`\\`\\`\nconst result = await prisma.$executeRaw\\`UPDATE User SET cool = \\${true} WHERE email = \\${'user@email.com'};\\`\n\\`\\`\\`\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n`,\n          { clientVersion: this._clientVersion },\n        )\n      })\n    }\n\n    /**\n     * Unsafe counterpart of `$executeRaw` that is susceptible to SQL injections\n     * @see https://github.com/prisma/prisma/issues/7142\n     *\n     * @param query\n     * @param values\n     * @returns\n     */\n    $executeRawUnsafe(query: string, ...values: RawValue[]) {\n      return this._createPrismaPromise((transaction) => {\n        checkAlter(this._activeProvider, query, values, 'prisma.$executeRawUnsafe(<SQL>, [...values])')\n        return this.$executeRawInternal(transaction, '$executeRawUnsafe', [query, ...values])\n      })\n    }\n\n    /**\n     * Executes a raw command only for MongoDB\n     *\n     * @param command\n     * @returns\n     */\n    $runCommandRaw(command: Record<string, JsInputValue>) {\n      if (config.activeProvider !== 'mongodb') {\n        throw new PrismaClientValidationError(\n          `The ${config.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,\n          { clientVersion: this._clientVersion },\n        )\n      }\n\n      return this._createPrismaPromise((transaction) => {\n        return this._request({\n          args: command,\n          clientMethod: '$runCommandRaw',\n          dataPath: [],\n          action: 'runCommandRaw',\n          argsMapper: rawCommandArgsMapper,\n          callsite: getCallSite(this._errorFormat),\n          transaction: transaction,\n        })\n      })\n    }\n\n    /**\n     * Executes a raw query and returns selected data\n     */\n    async $queryRawInternal(\n      transaction: PrismaPromiseTransaction | undefined,\n      clientMethod: string,\n      args: RawQueryArgs,\n      middlewareArgsMapper?: MiddlewareArgsMapper<unknown, unknown>,\n    ) {\n      const activeProvider = this._activeProvider\n\n      return this._request({\n        action: 'queryRaw',\n        args,\n        transaction,\n        clientMethod,\n        argsMapper: rawQueryArgsMapper({ clientMethod, activeProvider }),\n        callsite: getCallSite(this._errorFormat),\n        dataPath: [],\n        middlewareArgsMapper,\n      })\n    }\n\n    /**\n     * Executes a raw query provided through a safe tag function\n     * @see https://github.com/prisma/prisma/issues/7142\n     *\n     * @param query\n     * @param values\n     * @returns\n     */\n    $queryRaw(query: TemplateStringsArray | Sql, ...values: any[]) {\n      return this._createPrismaPromise((transaction) => {\n        if ((query as TemplateStringsArray).raw !== undefined || (query as Sql).sql !== undefined) {\n          return this.$queryRawInternal(transaction, '$queryRaw', ...toSql(query, values))\n        }\n\n        throw new PrismaClientValidationError(\n          `\\`$queryRaw\\` is a tag function, please use it like the following:\n\\`\\`\\`\nconst result = await prisma.$queryRaw\\`SELECT * FROM User WHERE id = \\${1} OR email = \\${'user@email.com'};\\`\n\\`\\`\\`\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n`,\n          { clientVersion: this._clientVersion },\n        )\n      })\n    }\n\n    /**\n     * Counterpart to $queryRaw, that returns strongly typed results\n     * @param typedSql\n     */\n    $queryRawTyped(typedSql: UnknownTypedSql) {\n      return this._createPrismaPromise((transaction) => {\n        if (!this._hasPreviewFlag('typedSql')) {\n          throw new PrismaClientValidationError(\n            '`typedSql` preview feature must be enabled in order to access $queryRawTyped API',\n            { clientVersion: this._clientVersion },\n          )\n        }\n        return this.$queryRawInternal(transaction, '$queryRawTyped', typedSql)\n      })\n    }\n\n    /**\n     * Unsafe counterpart of `$queryRaw` that is susceptible to SQL injections\n     * @see https://github.com/prisma/prisma/issues/7142\n     *\n     * @param query\n     * @param values\n     * @returns\n     */\n    $queryRawUnsafe(query: string, ...values: RawValue[]) {\n      return this._createPrismaPromise((transaction) => {\n        return this.$queryRawInternal(transaction, '$queryRawUnsafe', [query, ...values])\n      })\n    }\n\n    /**\n     * Execute a batch of requests in a transaction\n     * @param requests\n     * @param options\n     */\n    _transactionWithArray({\n      promises,\n      options,\n    }: {\n      promises: Array<PrismaPromise<any>>\n      options?: BatchTransactionOptions\n    }): Promise<any> {\n      const id = BatchTxIdCounter.nextId()\n      const lock = getLockCountPromise(promises.length)\n\n      const requests = promises.map((request, index) => {\n        if (request?.[Symbol.toStringTag] !== 'PrismaPromise') {\n          throw new Error(\n            `All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.`,\n          )\n        }\n\n        const isolationLevel = options?.isolationLevel ?? this._engineConfig.transactionOptions.isolationLevel\n        const transaction = { kind: 'batch', id, index, isolationLevel, lock } as const\n        return request.requestTransaction?.(transaction) ?? request\n      })\n\n      return waitForBatch(requests)\n    }\n\n    /**\n     * Perform a long-running transaction\n     * @param callback\n     * @param options\n     * @returns\n     */\n    async _transactionWithCallback({\n      callback,\n      options,\n    }: {\n      callback: (client: Client) => Promise<unknown>\n      options?: Options\n    }) {\n      const headers = { traceparent: this._tracingHelper.getTraceParent() }\n\n      const optionsWithDefaults: Options = {\n        maxWait: options?.maxWait ?? this._engineConfig.transactionOptions.maxWait,\n        timeout: options?.timeout ?? this._engineConfig.transactionOptions.timeout,\n        isolationLevel: options?.isolationLevel ?? this._engineConfig.transactionOptions.isolationLevel,\n      }\n      const info = await this._engine.transaction('start', headers, optionsWithDefaults)\n\n      let result: unknown\n      try {\n        // execute user logic with a proxied the client\n        const transaction = { kind: 'itx', ...info } as const\n\n        result = await callback(this._createItxClient(transaction))\n\n        // it went well, then we commit the transaction\n        await this._engine.transaction('commit', headers, info)\n      } catch (e: any) {\n        // it went bad, then we rollback the transaction\n        await this._engine.transaction('rollback', headers, info).catch(() => {})\n\n        throw e // silent rollback, throw original error\n      }\n\n      return result\n    }\n\n    _createItxClient(transaction: PrismaPromiseInteractiveTransaction): Client {\n      return createCompositeProxy(\n        applyModelsAndClientExtensions(\n          createCompositeProxy(unApplyModelsAndClientExtensions(this), [\n            addProperty('_appliedParent', () => this._appliedParent._createItxClient(transaction)),\n            addProperty('_createPrismaPromise', () => createPrismaPromiseFactory(transaction)),\n            addProperty(TX_ID, () => transaction.id),\n          ]),\n        ),\n        [removeProperties(itxClientDenyList)],\n      )\n    }\n\n    /**\n     * Execute queries within a transaction\n     * @param input a callback or a query list\n     * @param options to set timeouts (callback)\n     * @returns\n     */\n    $transaction(input: any, options?: any) {\n      let callback: () => Promise<any>\n\n      // iTx - Interactive transaction\n      if (typeof input === 'function') {\n        if (this._engineConfig.adapter?.adapterName === '@prisma/adapter-d1') {\n          callback = () => {\n            throw new Error(\n              'Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.',\n            )\n          }\n        } else {\n          callback = () => this._transactionWithCallback({ callback: input, options })\n        }\n      } else {\n        // Batch transaction\n        callback = () => this._transactionWithArray({ promises: input, options })\n      }\n\n      const spanOptions = {\n        name: 'transaction',\n        attributes: { method: '$transaction' },\n      }\n\n      return this._tracingHelper.runInChildSpan(spanOptions, callback)\n    }\n\n    /**\n     * Runs the middlewares over params before executing a request\n     * @param internalParams\n     * @returns\n     */\n    _request(internalParams: InternalRequestParams): Promise<any> {\n      // this is the otel context that is active at the callsite\n      internalParams.otelParentCtx = this._tracingHelper.getActiveContext()\n      const middlewareArgsMapper = internalParams.middlewareArgsMapper ?? noopMiddlewareArgsMapper\n\n      // make sure that we don't leak extra properties to users\n      const params: QueryMiddlewareParams = {\n        args: middlewareArgsMapper.requestArgsToMiddlewareArgs(internalParams.args),\n        dataPath: internalParams.dataPath,\n        runInTransaction: Boolean(internalParams.transaction),\n        action: internalParams.action,\n        model: internalParams.model,\n      }\n\n      // span options for opentelemetry instrumentation\n      const spanOptions = {\n        operation: {\n          name: 'operation',\n          attributes: {\n            method: params.action,\n            model: params.model,\n            name: params.model ? `${params.model}.${params.action}` : params.action,\n          },\n        } as ExtendedSpanOptions,\n      }\n\n      // prepare recursive fn that will pipe params through middlewares\n      const consumer = async (changedMiddlewareParams: QueryMiddlewareParams) => {\n        // we proceed with request execution\n        // before we send the execution request, we use the changed params\n        const { runInTransaction, args, ...changedRequestParams } = changedMiddlewareParams\n        const requestParams = {\n          ...internalParams,\n          ...changedRequestParams,\n        }\n\n        if (args) {\n          requestParams.args = middlewareArgsMapper.middlewareArgsToRequestArgs(args)\n        }\n\n        // if middleware switched off `runInTransaction`, unset `transaction`\n        // property on request as well so it will be executed outside of the tx\n        if (internalParams.transaction !== undefined && runInTransaction === false) {\n          delete requestParams.transaction // client extensions check for this\n        }\n\n        const result = await applyQueryExtensions(this, requestParams) // also executes the query\n        if (!requestParams.model) {\n          return result\n        }\n        return applyAllResultExtensions({\n          result,\n          modelName: requestParams.model,\n          args: requestParams.args,\n          extensions: this._extensions,\n          runtimeDataModel: this._runtimeDataModel,\n          globalOmit: this._globalOmit,\n        })\n      }\n\n      return this._tracingHelper.runInChildSpan(spanOptions.operation, () => {\n        if (NODE_CLIENT) {\n          // https://github.com/prisma/prisma/issues/3148 not for edge client\n          const asyncRes = new AsyncResource('prisma-client-request')\n          return asyncRes.runInAsyncScope(() => consumer(params))\n        }\n\n        return consumer(params)\n      })\n    }\n\n    async _executeRequest({\n      args,\n      clientMethod,\n      dataPath,\n      callsite,\n      action,\n      model,\n      argsMapper,\n      transaction,\n      unpacker,\n      otelParentCtx,\n      customDataProxyFetch,\n    }: InternalRequestParams) {\n      try {\n        // execute argument transformation before execution\n        args = argsMapper ? argsMapper(args) : args\n\n        const spanOptions: ExtendedSpanOptions = {\n          name: 'serialize',\n        }\n\n        const message = this._tracingHelper.runInChildSpan(spanOptions, () =>\n          serializeJsonQuery({\n            modelName: model,\n            runtimeDataModel: this._runtimeDataModel,\n            action,\n            args,\n            clientMethod,\n            callsite,\n            extensions: this._extensions,\n            errorFormat: this._errorFormat,\n            clientVersion: this._clientVersion,\n            previewFeatures: this._previewFeatures,\n            globalOmit: this._globalOmit,\n          }),\n        )\n\n        // as prettyPrintArguments takes a bit of compute\n        // we only want to do it, if debug is enabled for 'prisma-client'\n        if (Debug.enabled('prisma:client')) {\n          debug(`Prisma Client call:`)\n          debug(`prisma.${clientMethod}(${prettyPrintArguments(args)})`)\n          debug(`Generated request:`)\n          debug(JSON.stringify(message, null, 2) + '\\n')\n        }\n\n        if (transaction?.kind === 'batch') {\n          /** @see {@link getLockCountPromise} */\n          await transaction.lock\n        }\n\n        return this._requestHandler.request({\n          protocolQuery: message,\n          modelName: model,\n          action,\n          clientMethod,\n          dataPath,\n          callsite,\n          args,\n          extensions: this._extensions,\n          transaction,\n          unpacker,\n          otelParentCtx,\n          otelChildCtx: this._tracingHelper.getActiveContext(),\n          globalOmit: this._globalOmit,\n          customDataProxyFetch,\n        })\n      } catch (e) {\n        e.clientVersion = this._clientVersion\n        throw e\n      }\n    }\n\n    $metrics = new MetricsClient(this)\n\n    /**\n     * Shortcut for checking a preview flag\n     * @param feature preview flag\n     * @returns\n     */\n    _hasPreviewFlag(feature: string) {\n      return !!this._engineConfig.previewFeatures?.includes(feature)\n    }\n\n    $applyPendingMigrations(): Promise<void> {\n      return this._engine.applyPendingMigrations()\n    }\n\n    $extends = $extends\n  }\n\n  return PrismaClient\n}\n\nfunction toSql(query: TemplateStringsArray | Sql, values: unknown[]): [Sql, MiddlewareArgsMapper<unknown, unknown>] {\n  if (isTemplateStringArray(query)) {\n    return [new Sql(query, values), templateStringMiddlewareArgsMapper]\n  }\n\n  return [query, sqlMiddlewareArgsMapper]\n}\n\nfunction isTemplateStringArray(value: unknown): value is TemplateStringsArray {\n  return Array.isArray(value) && Array.isArray(value['raw'])\n}\n","/**\n * Values supported by SQL engine.\n */\nexport type Value = unknown;\n\n/**\n * Supported value or SQL instance.\n */\nexport type RawValue = Value | Sql;\n\n/**\n * A SQL instance can be nested within each other to build SQL strings.\n */\nexport class Sql {\n  readonly values: Value[];\n  readonly strings: string[];\n\n  constructor(rawStrings: readonly string[], rawValues: readonly RawValue[]) {\n    if (rawStrings.length - 1 !== rawValues.length) {\n      if (rawStrings.length === 0) {\n        throw new TypeError(\"Expected at least 1 string\");\n      }\n\n      throw new TypeError(\n        `Expected ${rawStrings.length} strings to have ${\n          rawStrings.length - 1\n        } values`,\n      );\n    }\n\n    const valuesLength = rawValues.reduce<number>(\n      (len, value) => len + (value instanceof Sql ? value.values.length : 1),\n      0,\n    );\n\n    this.values = new Array(valuesLength);\n    this.strings = new Array(valuesLength + 1);\n\n    this.strings[0] = rawStrings[0];\n\n    // Iterate over raw values, strings, and children. The value is always\n    // positioned between two strings, e.g. `index + 1`.\n    let i = 0,\n      pos = 0;\n    while (i < rawValues.length) {\n      const child = rawValues[i++];\n      const rawString = rawStrings[i];\n\n      // Check for nested `sql` queries.\n      if (child instanceof Sql) {\n        // Append child prefix text to current string.\n        this.strings[pos] += child.strings[0];\n\n        let childIndex = 0;\n        while (childIndex < child.values.length) {\n          this.values[pos++] = child.values[childIndex++];\n          this.strings[pos] = child.strings[childIndex];\n        }\n\n        // Append raw string to current string.\n        this.strings[pos] += rawString;\n      } else {\n        this.values[pos++] = child;\n        this.strings[pos] = rawString;\n      }\n    }\n  }\n\n  get sql() {\n    const len = this.strings.length;\n    let i = 1;\n    let value = this.strings[0];\n    while (i < len) value += `?${this.strings[i++]}`;\n    return value;\n  }\n\n  get statement() {\n    const len = this.strings.length;\n    let i = 1;\n    let value = this.strings[0];\n    while (i < len) value += `:${i}${this.strings[i++]}`;\n    return value;\n  }\n\n  get text() {\n    const len = this.strings.length;\n    let i = 1;\n    let value = this.strings[0];\n    while (i < len) value += `$${i}${this.strings[i++]}`;\n    return value;\n  }\n\n  inspect() {\n    return {\n      sql: this.sql,\n      statement: this.statement,\n      text: this.text,\n      values: this.values,\n    };\n  }\n}\n\n/**\n * Create a SQL query for a list of values.\n */\nexport function join(\n  values: readonly RawValue[],\n  separator = \",\",\n  prefix = \"\",\n  suffix = \"\",\n) {\n  if (values.length === 0) {\n    throw new TypeError(\n      \"Expected `join([])` to be called with an array of multiple elements, but got an empty array\",\n    );\n  }\n\n  return new Sql(\n    [prefix, ...Array(values.length - 1).fill(separator), suffix],\n    values,\n  );\n}\n\n/**\n * Create a SQL query for a list of structured values.\n */\nexport function bulk(\n  data: ReadonlyArray<ReadonlyArray<RawValue>>,\n  separator = \",\",\n  prefix = \"\",\n  suffix = \"\",\n) {\n  const length = data.length && data[0].length;\n\n  if (length === 0) {\n    throw new TypeError(\n      \"Expected `bulk([][])` to be called with a nested array of multiple elements, but got an empty array\",\n    );\n  }\n\n  const values = data.map((item, index) => {\n    if (item.length !== length) {\n      throw new TypeError(\n        `Expected \\`bulk([${index}][])\\` to have a length of ${length}, but got ${item.length}`,\n      );\n    }\n\n    return new Sql([\"(\", ...Array(item.length - 1).fill(separator), \")\"], item);\n  });\n\n  return new Sql(\n    [prefix, ...Array(values.length - 1).fill(separator), suffix],\n    values,\n  );\n}\n\n/**\n * Create raw SQL statement.\n */\nexport function raw(value: string) {\n  return new Sql([value], []);\n}\n\n/**\n * Placeholder value for \"no text\".\n */\nexport const empty = raw(\"\");\n\n/**\n * Create a SQL object from a template string.\n */\nexport default function sql(\n  strings: readonly string[],\n  ...values: readonly RawValue[]\n) {\n  return new Sql(strings, values);\n}\n","import type { CompositeProxyLayer } from './createCompositeProxy'\n\n/**\n * Composite proxy layer that forwards all reads\n * to provided object\n *\n * @param object\n * @returns\n */\nexport function addObjectProperties(object: object): CompositeProxyLayer {\n  return {\n    getKeys() {\n      return Object.keys(object)\n    },\n\n    getPropertyValue(key) {\n      return object[key]\n    },\n  }\n}\n","import { CompositeProxyLayer } from './createCompositeProxy'\n\n/**\n * Composite proxy layer, that adds a single property to the target\n * @param key  the name of the property\n * @param factory the function that returns the value of the property\n * @returns\n */\nexport function addProperty(key: string | symbol, factory: () => unknown): CompositeProxyLayer {\n  return {\n    getKeys() {\n      return [key]\n    },\n\n    getPropertyValue() {\n      return factory()\n    },\n  }\n}\n","import { Cache } from '@prisma/client-common'\n\nimport { CompositeProxyLayer } from './createCompositeProxy'\n\n/**\n * Composite proxy layer that adds caching to another\n * layer.\n *\n * @param baseLayer\n * @returns\n */\nexport function cacheProperties<KeyType extends string | symbol>(\n  baseLayer: CompositeProxyLayer<KeyType>,\n): CompositeProxyLayer<KeyType> {\n  const cache = new Cache<KeyType, unknown>()\n  return {\n    getKeys() {\n      return baseLayer.getKeys()\n    },\n\n    getPropertyValue(key) {\n      return cache.getOrCreate(key, () => baseLayer.getPropertyValue(key))\n    },\n\n    getPropertyDescriptor(key) {\n      return baseLayer.getPropertyDescriptor?.(key)\n    },\n  }\n}\n","export const defaultPropertyDescriptor = {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n}\n\nexport function defaultProxyHandlers<T extends object>(ownKeys: (string | symbol)[]) {\n  const _ownKeys = new Set(ownKeys)\n  return {\n    getPrototypeOf: () => Object.prototype,\n    getOwnPropertyDescriptor: () => defaultPropertyDescriptor,\n    has: (target: T, prop: string | symbol) => _ownKeys.has(prop),\n    set: (target: T, prop: string | symbol, value: any) => {\n      return _ownKeys.add(prop) && Reflect.set(target, prop, value)\n    },\n    ownKeys: () => [..._ownKeys],\n  } as const\n}\n","import { defaultPropertyDescriptor } from '../model/utils/defaultProxyHandlers'\n\nexport interface CompositeProxyLayer<KeyType extends string | symbol = string | symbol> {\n  /**\n   * Returns a list of keys, defined by a layer\n   */\n  getKeys(): ReadonlyArray<KeyType>\n\n  /**\n   * Returns a value for a property for a given key (one of the keys, returned\n   * from `getKeys`)\n   * @param key\n   */\n  getPropertyValue(key: KeyType): unknown\n\n  /**\n   * Gets a descriptor for given property. If not implemented or undefined is returned, { enumerable: true, writeable: true, configurable: true} is defaulted\n   * is used\n   * @param key\n   */\n  getPropertyDescriptor?(key: KeyType): PropertyDescriptor | undefined\n\n  /**\n   * Allows to override results for hasOwnProperty/in operator. If not implemented, returns true\n   * @param key\n   */\n  has?(key: KeyType): boolean\n}\n\nconst customInspect = Symbol.for('nodejs.util.inspect.custom')\n\n/**\n * Creates a proxy from a set of layers.\n * Each layer is a building for a proxy (potentially, reusable) that\n * can add or override property on top of the target.\n * When multiple layers define the same property, last one wins\n *\n * @param target\n * @param layers\n * @returns\n */\nexport function createCompositeProxy<T extends object>(target: T, layers: CompositeProxyLayer[]): T {\n  const keysToLayerMap = mapKeysToLayers(layers)\n  const overwrittenKeys = new Set<string | symbol>()\n\n  const proxy = new Proxy(target, {\n    get(target, prop) {\n      // explicit overwrites of a property have highest priority\n      if (overwrittenKeys.has(prop)) {\n        return target[prop]\n      }\n\n      // next, we see if property is defined in one of the layers\n      const layer = keysToLayerMap.get(prop)\n      if (layer) {\n        return layer.getPropertyValue(prop)\n      }\n\n      // finally, we read a prop from target\n      return target[prop]\n    },\n\n    has(target, prop) {\n      if (overwrittenKeys.has(prop)) {\n        return true\n      }\n      const layer = keysToLayerMap.get(prop)\n      if (layer) {\n        return layer.has?.(prop) ?? true\n      }\n\n      return Reflect.has(target, prop)\n    },\n\n    ownKeys(target) {\n      const targetKeys = getExistingKeys(Reflect.ownKeys(target), keysToLayerMap)\n      const layerKeys = getExistingKeys(Array.from(keysToLayerMap.keys()), keysToLayerMap)\n      return [...new Set([...targetKeys, ...layerKeys, ...overwrittenKeys])]\n    },\n\n    set(target, prop, value) {\n      const layer = keysToLayerMap.get(prop)\n      if (layer?.getPropertyDescriptor?.(prop)?.writable === false) {\n        return false\n      }\n      overwrittenKeys.add(prop)\n      return Reflect.set(target, prop, value)\n    },\n\n    getOwnPropertyDescriptor(target, prop) {\n      const original = Reflect.getOwnPropertyDescriptor(target, prop)\n      if (original && !original.configurable) {\n        // non-configurable properties can not change descriptors\n        return original\n      }\n\n      const layer = keysToLayerMap.get(prop)\n      if (layer) {\n        if (layer.getPropertyDescriptor) {\n          return {\n            ...defaultPropertyDescriptor,\n            ...layer?.getPropertyDescriptor(prop),\n          }\n        }\n        return defaultPropertyDescriptor\n      }\n\n      return original\n    },\n\n    defineProperty(target, property, attributes) {\n      overwrittenKeys.add(property)\n      return Reflect.defineProperty(target, property, attributes)\n    },\n\n    getPrototypeOf: () => Object.prototype,\n  })\n\n  proxy[customInspect] = function () {\n    // Default node.js console.log and util.inspect deliberately avoid triggering any proxy traps and log\n    // original target. This is not we want for our usecases: we want console.log to output the result as if\n    // the properties actually existed on the target. Using spread operator forces us to produce correct object\n    const toLog = { ...this }\n    delete toLog[customInspect]\n    return toLog\n  }\n  return proxy\n}\n\nfunction mapKeysToLayers(layers: CompositeProxyLayer[]) {\n  const keysToLayerMap = new Map<string | symbol, CompositeProxyLayer>()\n  for (const layer of layers) {\n    const keys = layer.getKeys()\n    for (const key of keys) {\n      keysToLayerMap.set(key, layer)\n    }\n  }\n  return keysToLayerMap\n}\n\nfunction getExistingKeys(keys: Array<string | symbol>, keysToLayerMap: Map<string | symbol, CompositeProxyLayer>) {\n  return keys.filter((key) => {\n    const layer = keysToLayerMap.get(key)\n    return layer?.has?.(key) ?? true\n  })\n}\n","import { CompositeProxyLayer } from './createCompositeProxy'\n\nexport function removeProperties(keys: ReadonlyArray<string | symbol>): CompositeProxyLayer {\n  return {\n    getKeys() {\n      return keys\n    },\n\n    has() {\n      return false\n    },\n\n    getPropertyValue() {\n      return undefined\n    },\n  }\n}\n","import { TransactionOptions } from '../Engine'\nimport { JsonQuery } from '../types/JsonProtocol'\nimport { QueryEngineBatchRequest } from '../types/QueryEngine'\n\nexport function getBatchRequestPayload(\n  batch: JsonQuery[],\n  transaction?: TransactionOptions<unknown>,\n): QueryEngineBatchRequest {\n  return {\n    batch,\n    transaction: transaction?.kind === 'batch' ? { isolationLevel: transaction.options.isolationLevel } : undefined,\n  }\n}\n","import { Writer } from '@prisma/ts-builders'\n\nimport { JsArgs } from '../types/exported/JsApi'\nimport { buildArgumentsRenderingTree } from './ArgumentsRenderingTree'\nimport { inactiveColors } from './base'\n\nexport function prettyPrintArguments(args?: JsArgs): string {\n  if (args === undefined) {\n    return ''\n  }\n  const tree = buildArgumentsRenderingTree(args)\n  const writer = new Writer(0, { colors: inactiveColors })\n  return writer.write(tree).toString()\n}\n","import { RequestError } from '../../engines/common/types/RequestError'\nimport { PrismaClientKnownRequestError } from '../PrismaClientKnownRequestError'\nimport { PrismaClientUnknownRequestError } from '../PrismaClientUnknownRequestError'\n\nconst TOO_MANY_CONNECTIONS_ERROR = 'P2037'\n\nexport function prismaGraphQLToJSError(\n  { error, user_facing_error }: RequestError,\n  clientVersion: string,\n  activeProvider: string,\n): PrismaClientKnownRequestError | PrismaClientUnknownRequestError {\n  if (user_facing_error.error_code) {\n    return new PrismaClientKnownRequestError(getKnownErrorMessage(user_facing_error, activeProvider), {\n      code: user_facing_error.error_code,\n      clientVersion,\n      meta: user_facing_error.meta,\n      batchRequestIdx: user_facing_error.batch_request_idx,\n    })\n  }\n\n  return new PrismaClientUnknownRequestError(error, {\n    clientVersion,\n    batchRequestIdx: user_facing_error.batch_request_idx,\n  })\n}\n\nfunction getKnownErrorMessage(userFacingError: RequestError['user_facing_error'], activeProvider: string) {\n  let message = userFacingError.message\n  if (\n    (activeProvider === 'postgresql' || activeProvider === 'postgres' || activeProvider === 'mysql') &&\n    userFacingError.error_code === TOO_MANY_CONNECTIONS_ERROR\n  ) {\n    message +=\n      '\\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate'\n  }\n\n  return message\n}\n","var UNKNOWN_FUNCTION = '<unknown>';\n/**\n * This parses the different stack traces and puts them into one format\n * This borrows heavily from TraceKit (https://github.com/csnover/TraceKit)\n */\n\nfunction parse(stackString) {\n  var lines = stackString.split('\\n');\n  return lines.reduce(function (stack, line) {\n    var parseResult = parseChrome(line) || parseWinjs(line) || parseGecko(line) || parseNode(line) || parseJSC(line);\n\n    if (parseResult) {\n      stack.push(parseResult);\n    }\n\n    return stack;\n  }, []);\n}\nvar chromeRe = /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|rsc|<anonymous>|\\/|[a-z]:\\\\|\\\\\\\\).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nvar chromeEvalRe = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\n\nfunction parseChrome(line) {\n  var parts = chromeRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  var isNative = parts[2] && parts[2].indexOf('native') === 0; // start of line\n\n  var isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n\n  var submatch = chromeEvalRe.exec(parts[2]);\n\n  if (isEval && submatch != null) {\n    // throw out eval line/column and use top-most line/column number\n    parts[2] = submatch[1]; // url\n\n    parts[3] = submatch[2]; // line\n\n    parts[4] = submatch[3]; // column\n  }\n\n  return {\n    file: !isNative ? parts[2] : null,\n    methodName: parts[1] || UNKNOWN_FUNCTION,\n    arguments: isNative ? [parts[2]] : [],\n    lineNumber: parts[3] ? +parts[3] : null,\n    column: parts[4] ? +parts[4] : null\n  };\n}\n\nvar winjsRe = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|rsc|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\n\nfunction parseWinjs(line) {\n  var parts = winjsRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  return {\n    file: parts[2],\n    methodName: parts[1] || UNKNOWN_FUNCTION,\n    arguments: [],\n    lineNumber: +parts[3],\n    column: parts[4] ? +parts[4] : null\n  };\n}\n\nvar geckoRe = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|rsc|resource|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar geckoEvalRe = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\n\nfunction parseGecko(line) {\n  var parts = geckoRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  var isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n  var submatch = geckoEvalRe.exec(parts[3]);\n\n  if (isEval && submatch != null) {\n    // throw out eval line/column and use top-most line number\n    parts[3] = submatch[1];\n    parts[4] = submatch[2];\n    parts[5] = null; // no column when eval\n  }\n\n  return {\n    file: parts[3],\n    methodName: parts[1] || UNKNOWN_FUNCTION,\n    arguments: parts[2] ? parts[2].split(',') : [],\n    lineNumber: parts[4] ? +parts[4] : null,\n    column: parts[5] ? +parts[5] : null\n  };\n}\n\nvar javaScriptCoreRe = /^\\s*(?:([^@]*)(?:\\((.*?)\\))?@)?(\\S.*?):(\\d+)(?::(\\d+))?\\s*$/i;\n\nfunction parseJSC(line) {\n  var parts = javaScriptCoreRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  return {\n    file: parts[3],\n    methodName: parts[1] || UNKNOWN_FUNCTION,\n    arguments: [],\n    lineNumber: +parts[4],\n    column: parts[5] ? +parts[5] : null\n  };\n}\n\nvar nodeRe = /^\\s*at (?:((?:\\[object object\\])?[^\\\\/]+(?: \\[as \\S+\\])?) )?\\(?(.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\n\nfunction parseNode(line) {\n  var parts = nodeRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  return {\n    file: parts[2],\n    methodName: parts[1] || UNKNOWN_FUNCTION,\n    arguments: [],\n    lineNumber: +parts[3],\n    column: parts[4] ? +parts[4] : null\n  };\n}\n\nexport { parse };\n","import { pathToPosix } from '@prisma/internals'\nimport * as stackTraceParser from 'stacktrace-parser'\n\nimport { ErrorFormat } from '../getPrismaClient'\n\ndeclare global {\n  /**\n   * a global variable that is injected by us via jest to make our snapshots\n   * work in clients that cannot read from disk (e.g. wasm or edge clients)\n   */\n  let $EnabledCallSite: typeof EnabledCallSite | undefined\n}\n\nexport type LocationInFile = {\n  fileName: string\n  lineNumber: number | null\n  columnNumber: number | null\n}\n\nexport interface CallSite {\n  getLocation(): LocationInFile | null\n}\n\nclass DisabledCallSite implements CallSite {\n  getLocation(): LocationInFile | null {\n    return null\n  }\n}\n\nexport class EnabledCallSite implements CallSite {\n  private _error: Error\n  constructor() {\n    this._error = new Error()\n  }\n  getLocation(): LocationInFile | null {\n    const stack = this._error.stack\n    if (!stack) {\n      return null\n    }\n    const stackFrames = stackTraceParser.parse(stack)\n    // TODO: more resilient logic to check that it's not relative to cwd\n    const frame = stackFrames.find((t) => {\n      // Here we are trying to find the location in the user's code which caused the error\n      if (!t.file) {\n        return false\n      }\n\n      // convert windows path to posix path\n      const posixFile = pathToPosix(t.file)\n      return (\n        posixFile !== '<anonymous>' && // Ignore as we can not read an <anonymous> file\n        !posixFile.includes('@prisma') && // Internal, unbundled code\n        !posixFile.includes('/packages/client/src/runtime/') && // Runtime sources when source maps are used\n        !posixFile.endsWith('/runtime/binary.js') && // Bundled runtimes\n        !posixFile.endsWith('/runtime/library.js') &&\n        !posixFile.endsWith('/runtime/edge.js') &&\n        !posixFile.endsWith('/runtime/edge-esm.js') &&\n        !posixFile.startsWith('internal/') && // We don't want internal nodejs files\n        !t.methodName.includes('new ') && // \"new CallSite\" call and maybe other constructors\n        !t.methodName.includes('getCallSite') && // getCallSite function from this module\n        !t.methodName.includes('Proxy.') && // Model proxies\n        t.methodName.split('.').length < 4\n      )\n    })\n\n    if (!frame || !frame.file) {\n      return null\n    }\n\n    return {\n      fileName: frame.file,\n      lineNumber: frame.lineNumber,\n      columnNumber: frame.column,\n    }\n  }\n}\n\nexport function getCallSite(errorFormat: ErrorFormat): CallSite {\n  if (\n    errorFormat === 'minimal' ||\n    TARGET_BUILD_TYPE === 'wasm-engine-edge' ||\n    TARGET_BUILD_TYPE === 'wasm-compiler-edge' ||\n    TARGET_BUILD_TYPE === 'edge'\n  ) {\n    if (typeof $EnabledCallSite === 'function' && errorFormat !== 'minimal') {\n      return new $EnabledCallSite()\n    } else {\n      return new DisabledCallSite()\n    }\n  } else {\n    return new EnabledCallSite()\n  }\n}\n","export const aggregateMap = {\n  _avg: true,\n  _count: true,\n  _sum: true,\n  _min: true,\n  _max: true,\n}\n","import type { UserArgs } from '../../request/UserArgs'\nimport type { ModelAction } from '../applyModel'\nimport { aggregateMap } from './utils/aggregateMap'\n\n/**\n * Transforms the `userArgs` for the `.aggregate` shorthand. It is an API sugar\n * for not having to do things like: `{select: {_avg: {select: {age: true}}}}`.\n * The goal here is to desugar it into something that is understood by the QE.\n * @param args to transform\n * @returns\n */\nexport function desugarUserArgs(args: UserArgs = {}) {\n  const _args = desugarCountInUserArgs(args)\n  const userArgsEntries = Object.entries(_args)\n\n  return userArgsEntries.reduce(\n    (aggregateArgs, [key, value]) => {\n      if (aggregateMap[key] !== undefined) {\n        // if it's an aggregate, we re-wrap into select\n        aggregateArgs['select']![key] = { select: value }\n      } else {\n        aggregateArgs[key] = value // or leave it alone\n      }\n\n      return aggregateArgs\n    },\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    { select: {} } as UserArgs & { select: UserArgs },\n  )\n}\n\n/**\n * Desugar `userArgs` when it contains `{_count: true}`.\n * @param args the user input\n * @returns\n */\nfunction desugarCountInUserArgs(args: UserArgs = {}) {\n  if (typeof args['_count'] === 'boolean') {\n    return { ...args, _count: { _all: args['_count'] } }\n  }\n\n  return args\n}\n\n/**\n * Creates an unpacker that adds sugar to the basic result of the QE. An\n * unpacker helps to transform a result before returning it to the user.\n * @param args the user input\n * @returns\n */\nexport function createUnpacker(args: UserArgs = {}) {\n  return (data: object) => {\n    if (typeof args['_count'] === 'boolean') {\n      data['_count'] = data['_count']['_all']\n    }\n\n    return data\n  }\n}\n\n/**\n * Executes the `.aggregate` action on a model.\n * @see {desugarUserArgs}\n * @param args the user input to desugar\n * @param modelAction a callback action that triggers request execution\n * @returns\n */\nexport function aggregate(args: UserArgs, modelAction: ModelAction) {\n  const aggregateUnpacker = createUnpacker(args)\n\n  return modelAction({\n    action: 'aggregate',\n    unpacker: aggregateUnpacker,\n    argsMapper: desugarUserArgs,\n  })(args)\n}\n","import type { UserArgs } from '../../request/UserArgs'\nimport type { ModelAction } from '../applyModel'\nimport { createUnpacker as createUnpackerAggregate, desugarUserArgs as desugarUserArgsAggregate } from './aggregate'\n\n/**\n * Transforms the `userArgs` for the `.count` shorthand. It is an API sugar. It\n * reuses the logic from the `.aggregate` shorthand to add additional handling.\n * The goal here is to desugar it into something that is understood by the QE.\n * @param args to transform\n * @returns\n */\nfunction desugarUserArgs(args: UserArgs = {}) {\n  const { select, ..._args } = args // exclude select\n\n  if (typeof select === 'object') {\n    return desugarUserArgsAggregate({ ..._args, _count: select })\n  } else {\n    return desugarUserArgsAggregate({ ..._args, _count: { _all: true } })\n  }\n}\n\n/**\n * Creates an unpacker that adds sugar to the basic result of the QE. An\n * unpacker helps to transform a result before returning it to the user.\n * @param args the user input\n * @returns\n */\nexport function createUnpacker(args: UserArgs = {}) {\n  if (typeof args['select'] === 'object') {\n    return (data: object) => createUnpackerAggregate(args)(data)['_count']\n  } else {\n    return (data: object) => createUnpackerAggregate(args)(data)['_count']['_all']\n  }\n}\n\n/**\n * Executes the `.count` action on a model via {@link aggregate}.\n * @param args the user input to desugar\n * @param modelAction a callback action that triggers request execution\n * @returns\n */\nexport function count(args: UserArgs, modelAction: ModelAction) {\n  return modelAction({\n    action: 'count',\n    unpacker: createUnpacker(args),\n    argsMapper: desugarUserArgs,\n  })(args)\n}\n","import type { UserArgs } from '../../request/UserArgs'\nimport type { ModelAction } from '../applyModel'\nimport { desugarUserArgs as desugarUserArgsAggregate } from './aggregate'\n\n/**\n * Transforms the `userArgs` for the `.groupBy` shorthand. It is an API sugar.\n * It reuses the logic from the `.aggregate` shorthand and adds additional\n * handling for the `by` clause. The goal here is to desugar it into something\n * that is understood by the QE.\n * @param args to transform\n * @returns\n */\nfunction desugarUserArgs(args: UserArgs = {}) {\n  const _args = desugarUserArgsAggregate(args)\n\n  // we desugar the array into { [key]: boolean }\n  if (Array.isArray(_args['by'])) {\n    for (const key of _args['by']) {\n      if (typeof key === 'string') {\n        _args['select'][key] = true\n      }\n    }\n  } else if (typeof _args['by'] === 'string') {\n    _args['select'][_args['by']] = true\n  }\n\n  return _args\n}\n\n/**\n * Creates an unpacker that adds sugar to the basic result of the QE. An\n * unpacker helps to transform a result before returning it to the user.\n * @param args the user input\n * @returns\n */\nexport function createUnpacker(args: UserArgs = {}) {\n  return (data: object[]) => {\n    if (typeof args?.['_count'] === 'boolean') {\n      data.forEach((row) => {\n        row['_count'] = row['_count']['_all']\n      })\n    }\n\n    return data\n  }\n}\n\n/**\n * Executes the `.groupBy` action on a model by reusing {@link aggregate}.\n * @param args the user input to desugar\n * @param modelAction a callback action that triggers request execution\n * @returns\n */\nexport function groupBy(args: UserArgs, modelAction: ModelAction) {\n  return modelAction({\n    action: 'groupBy',\n    unpacker: createUnpacker(args),\n    argsMapper: desugarUserArgs,\n  })(args)\n}\n","import type { Client } from '../../getPrismaClient'\nimport type { UserArgs } from '../request/UserArgs'\nimport { Action } from '../types/exported/JsApi'\nimport { aggregate } from './aggregates/aggregate'\nimport { count } from './aggregates/count'\nimport { groupBy } from './aggregates/groupBy'\nimport type { ModelAction } from './applyModel'\n\n/**\n * Dynamically returns the appropriate aggregate action for a given `action`.\n * With this, we are able to provide an aggregate api that has a better DX. In\n * short, we manipulate the user input which is designed to have DX to transform\n * it into something that the engines understand. Similarly, we take the engine\n * output for that input and produce something that is easier to work with.\n * @param action that tells which aggregate action to execute\n * @param modelAction a callback action that triggers request execution\n * @returns\n */\nexport function applyAggregates(client: Client, action: Action, modelAction: ModelAction) {\n  // we effectively take over the aggregate api to perform data changes\n  if (action === 'aggregate') return (userArgs?: UserArgs) => aggregate(userArgs, modelAction)\n  if (action === 'count') return (userArgs?: UserArgs) => count(userArgs, modelAction)\n  if (action === 'groupBy') return (userArgs?: UserArgs) => groupBy(userArgs, modelAction)\n\n  return undefined\n}\n","import { keyBy, RuntimeModel } from '@prisma/client-common'\n\nimport { FieldRefImpl } from './FieldRef'\nimport { defaultProxyHandlers } from './utils/defaultProxyHandlers'\n\nexport type FieldProxy = {\n  readonly [key: string]: FieldRefImpl<string, string>\n}\n\nexport function applyFieldsProxy(modelName: string, model: RuntimeModel): FieldProxy {\n  const scalarFieldsList = model.fields.filter((field) => !field.relationName)\n  const scalarFields = keyBy(scalarFieldsList, 'name')\n  return new Proxy(\n    {},\n    {\n      get(target, prop) {\n        if (prop in target || typeof prop === 'symbol') {\n          return target[prop]\n        }\n        const dmmfField = scalarFields[prop]\n        if (dmmfField) {\n          return new FieldRefImpl(modelName, prop, dmmfField.type, dmmfField.isList, dmmfField.kind === 'enum')\n        }\n\n        return undefined\n      },\n      ...defaultProxyHandlers(Object.keys(scalarFields)),\n    },\n  )\n}\n","// Taken from https://gist.github.com/LukeChannings/15c92cef5a016a8b21a0\n\n// ensure the keys being passed is an array of key paths\n// example: 'a.b' becomes ['a', 'b'] unless it was already ['a', 'b']\nconst keys = (ks: string | string[]) => (Array.isArray(ks) ? ks : ks.split('.'))\n\n// traverse the set of keys left to right,\n// returning the current value in each iteration.\n// if at any point the value for the current key does not exist,\n// return the default value\nexport const deepGet = (o, kp: string[]) => keys(kp).reduce((o, k) => o && o[k], o)\n\n// traverse the set of keys right to left,\n// returning a new object containing both properties from the object\n// we were originally passed and our new property.\n//\n// Example:\n// If o = { a: { b: { c: 1 } } }\n//\n// deepSet(o, ['a', 'b', 'c'], 2) will progress thus:\n// 1. c = Object.assign({}, {c: 1}, { c: 2 })\n// 2. b = Object.assign({}, { b: { c: 1 } }, { b: c })\n// 3. returned = Object.assign({}, { a: { b: { c: 1 } } }, { a: b })\nexport const deepSet = (o: any, kp: string | string[], v: any) =>\n  keys(kp).reduceRight((v, k, i, ks) => Object.assign({}, deepGet(o, ks.slice(0, i)), { [k]: v }), v)\n","import type * as DMMF from '@prisma/dmmf'\n\nimport type { Client } from '../../getPrismaClient'\nimport { getCallSite } from '../../utils/CallSite'\nimport { deepSet } from '../../utils/deep-set'\nimport type { UserArgs } from '../request/UserArgs'\nimport type { ModelAction } from './applyModel'\nimport { defaultProxyHandlers } from './utils/defaultProxyHandlers'\n\n/**\n * The fluent API makes that nested relations can be retrieved at once. It's a\n * helper for writing `select` statements on relations with a chaining api.\n * Because of this, we automatically add `select` statements to the query, that\n * also means that we need to provide a `dataPath` for unpacking nested values.\n * @see {getNextUserArgs}\n * @param dmmfModelName\n * @param prevDataPath\n * @returns\n */\nfunction getNextDataPath(fluentPropName?: string, prevDataPath?: string[]) {\n  if (fluentPropName === undefined || prevDataPath === undefined) return []\n\n  return [...prevDataPath, 'select', fluentPropName]\n}\n\n/**\n * @see {getNextDataPath} for introduction. The goal of the fluent API is to\n * make it easy to retrieve nested relations. For this, we construct the query\n * args that are necessary to retrieve the nested relations. It consists of\n * nesting `select` statements each time that we access a relation.\n * @param callArgs usually passed on the last call of the chaining api\n * @param prevArgs when multiple chaining occurs, they are the previous\n * @param nextDataPath path where to set `callArgs` in `prevArgs`\n * @example\n * ```ts\n * prisma.user.findUnique().link().user()\n *\n * // will end up with an args like this:\n * // args {\n * //   \"where\": {\n * //     \"email\": \"1639498523518@gmail.com\"\n * //   },\n * //   \"select\": {\n * //     \"link\": {\n * //       \"select\": {\n * //         \"user\": true\n * //       }\n * //     }\n * //   }\n * // }\n * ```\n */\nfunction getNextUserArgs(callArgs: UserArgs, prevArgs: UserArgs, nextDataPath: string[]): UserArgs {\n  if (prevArgs === undefined) return callArgs ?? {}\n\n  return deepSet(prevArgs, nextDataPath, callArgs || true)\n}\n\n/**\n * Dynamically creates a fluent API from a `modelAction` and a `dmmfModelName`.\n * We use the current `dmmfModelName` to determine what can be chained on next.\n * The fluent API allows to chain on model relations to provide an alternative\n * way to fetch and access nested data all at once. When triggered, it calls\n * `modelActions` after having accumulated `prevDataPath` and `prevUserArgs`\n * with the chaining. You can find an example of usage at {@link applyModel}.\n * @param client to provide dmmf information\n * @param dmmfModelName the dmmf name of the model to apply the api to\n * @param modelAction a callback action that triggers request execution\n * @param fluentPropName the name of the api link that was just called\n * @param prevDataPath the dataPath from the previous api link\n * @param prevUserArgs the userArgs from the previous api link\n * @remarks optional parameters are empty on the first call via\n * {@link applyModel}\n * @returns\n */\nexport function applyFluent(\n  client: Client,\n  dmmfModelName: string,\n  modelAction: ModelAction,\n  fluentPropName?: string,\n  prevDataPath?: string[],\n  prevUserArgs?: UserArgs,\n) {\n  // we retrieve the model that is described from the DMMF\n  const dmmfModel = client._runtimeDataModel.models[dmmfModelName]\n\n  // map[field.name] === field, basically for quick access\n  const dmmfModelFieldMap = dmmfModel.fields.reduce(\n    (acc, field) => ({ ...acc, [field.name]: field }),\n    {} as { [dmmfModelFieldName: string]: DMMF.Field },\n  )\n\n  // we return a regular model action but proxy its return\n  return (userArgs?: UserArgs) => {\n    const callsite = getCallSite(client._errorFormat)\n    // ! first call: nextDataPath => [], nextUserArgs => userArgs\n    const nextDataPath = getNextDataPath(fluentPropName, prevDataPath)\n    const nextUserArgs = getNextUserArgs(userArgs, prevUserArgs, nextDataPath)\n    const prismaPromise = modelAction({ dataPath: nextDataPath, callsite })(nextUserArgs)\n    // TODO: use an unpacker here instead of ClientFetcher logic\n    // TODO: once it's done we can deprecate the use of dataPath\n    const ownKeys = getOwnKeys(client, dmmfModelName)\n\n    // we take control of the return promise to allow chaining\n    return new Proxy(prismaPromise, {\n      get(target, prop: string) {\n        // fluent api only works on fields that are relational\n        if (!ownKeys.includes(prop)) return target[prop]\n\n        // here we are sure that prop is a field of type object\n        const dmmfModelName = dmmfModelFieldMap[prop].type\n        const modelArgs = [dmmfModelName, modelAction, prop] as const\n        const dataArgs = [nextDataPath, nextUserArgs] as const\n\n        // we allow for chaining more with this recursive call\n        return applyFluent(client, ...modelArgs, ...dataArgs)\n      },\n      ...defaultProxyHandlers([...ownKeys, ...Object.getOwnPropertyNames(prismaPromise)]),\n    })\n  }\n}\n\n// the only accessible fields are relations to be chained on\nfunction getOwnKeys(client: Client, dmmfModelName: string) {\n  return client._runtimeDataModel.models[dmmfModelName].fields\n    .filter((field) => field.kind === 'object') // relations\n    .map((field) => field.name)\n}\n","import * as DMMF from '@prisma/dmmf'\nimport type { O } from 'ts-toolbelt'\n\nimport { type Client, type InternalRequestParams } from '../../getPrismaClient'\nimport { getCallSite } from '../../utils/CallSite'\nimport {\n  addObjectProperties,\n  addProperty,\n  cacheProperties,\n  CompositeProxyLayer,\n  createCompositeProxy,\n} from '../compositeProxy'\nimport type { PrismaPromise } from '../request/PrismaPromise'\nimport type { UserArgs } from '../request/UserArgs'\nimport { applyAggregates } from './applyAggregates'\nimport { applyFieldsProxy } from './applyFieldsProxy'\nimport { applyFluent } from './applyFluent'\nimport { dmmfToJSModelName } from './utils/dmmfToJSModelName'\n\nexport type ModelAction = (\n  paramOverrides: O.Optional<InternalRequestParams>,\n) => (userArgs?: UserArgs) => PrismaPromise<unknown>\n\nconst fluentProps = [\n  'findUnique',\n  'findUniqueOrThrow',\n  'findFirst',\n  'findFirstOrThrow',\n  'create',\n  'update',\n  'upsert',\n  'delete',\n] as const\nconst aggregateProps = ['aggregate', 'count', 'groupBy'] as const\n\n/**\n * Dynamically creates a model interface via a proxy.\n * @param client to trigger the request execution\n * @param dmmfModelName the dmmf name of the model\n * @returns\n */\nexport function applyModel(client: Client, dmmfModelName: string) {\n  const modelExtensions = client._extensions.getAllModelExtensions(dmmfModelName) ?? {}\n\n  const layers = [\n    modelActionsLayer(client, dmmfModelName),\n    fieldsPropertyLayer(client, dmmfModelName),\n    addObjectProperties(modelExtensions),\n    addProperty('name', () => dmmfModelName),\n    addProperty('$name', () => dmmfModelName),\n    addProperty('$parent', () => client._appliedParent),\n  ]\n\n  return createCompositeProxy({}, layers)\n}\n\n/**\n * Dynamically creates a model interface via a proxy.\n * @param client to trigger the request execution\n * @param dmmfModelName the dmmf name of the model\n * @returns\n */\nfunction modelActionsLayer(client: Client, dmmfModelName: string): CompositeProxyLayer<string> {\n  // we use the javascript model name for display purposes\n  const jsModelName = dmmfToJSModelName(dmmfModelName)\n  const ownKeys = Object.keys(DMMF.ModelAction).concat('count')\n\n  return {\n    getKeys() {\n      return ownKeys\n    },\n\n    getPropertyValue(key) {\n      const dmmfActionName = key as DMMF.ModelAction\n\n      // we return a function as the model action that we want to expose\n      // it takes user args and executes the request in a Prisma Promise\n      const action = (paramOverrides: O.Optional<InternalRequestParams>) => (userArgs?: UserArgs) => {\n        const callSite = getCallSite(client._errorFormat) // used for showing better errors\n\n        return client._createPrismaPromise(\n          (transaction) => {\n            const params: InternalRequestParams = {\n              // data and its dataPath for nested results\n              args: userArgs,\n              dataPath: [],\n\n              // action name and its related model\n              action: dmmfActionName,\n              model: dmmfModelName,\n\n              // method name for display only\n              clientMethod: `${jsModelName}.${key}`,\n              jsModelName,\n\n              // transaction information\n              transaction,\n\n              // stack trace\n              callsite: callSite,\n            }\n\n            return client._request({ ...params, ...paramOverrides })\n          },\n          {\n            action: dmmfActionName,\n            args: userArgs,\n            model: dmmfModelName,\n          },\n        )\n      }\n\n      // we give the control over action for building the fluent api\n      if ((fluentProps as readonly string[]).includes(dmmfActionName)) {\n        return applyFluent(client, dmmfModelName, action)\n      }\n\n      // we handle the edge case of aggregates that need extra steps\n      if (isValidAggregateName(key)) {\n        return applyAggregates(client, key, action)\n      }\n\n      return action({}) // and by default, don't override any params\n    },\n  }\n}\n\nfunction isValidAggregateName(action: string): action is (typeof aggregateProps)[number] {\n  return (aggregateProps as readonly string[]).includes(action)\n}\n\nfunction fieldsPropertyLayer(client: Client, dmmfModelName: string) {\n  return cacheProperties(\n    addProperty('fields', () => {\n      const model = client._runtimeDataModel.models[dmmfModelName]\n      return applyFieldsProxy(dmmfModelName, model)\n    }),\n  )\n}\n","/**\n * Transforms a model name coming from the runtime to a DMMF model name.\n * @param name\n * @returns\n */\nexport function jsToDMMFModelName(name: string) {\n  return name.replace(/^./, (str) => str.toUpperCase())\n}\n","import type { Client } from '../../getPrismaClient'\nimport {\n  addObjectProperties,\n  addProperty,\n  cacheProperties,\n  CompositeProxyLayer,\n  createCompositeProxy,\n} from '../compositeProxy'\nimport { applyModel } from './applyModel'\nimport { dmmfToJSModelName } from './utils/dmmfToJSModelName'\nimport { jsToDMMFModelName } from './utils/jsToDMMFModelName'\n\n// symbol we use for storing raw, unproxied\n// client instance, so we later can retrieve it\n// via `unapplyModels` methods\nconst rawClient = Symbol()\n\n/**\n * Dynamically creates a model proxy interface for a give name. For each prop\n * accessed on this proxy, it will lookup the dmmf to find if that model exists.\n * If it is the case, it will create a proxy for that model via {@link applyModel}.\n * @param client to create the proxy around\n * @returns a proxy to access models\n */\nexport function applyModelsAndClientExtensions(client: Client) {\n  const layers = [\n    rootLayer(client),\n    modelsLayer(client),\n    addProperty(rawClient, () => client),\n    addProperty('$parent', () => client._appliedParent),\n  ]\n  const clientExtensions = client._extensions.getAllClientExtensions()\n  if (clientExtensions) {\n    layers.push(addObjectProperties(clientExtensions))\n  }\n  return createCompositeProxy(client, layers)\n}\n\nfunction rootLayer(client: Client): CompositeProxyLayer {\n  const prototype = Object.getPrototypeOf(client._originalClient)\n  const allKeys = [...new Set(Object.getOwnPropertyNames(prototype))]\n\n  return {\n    getKeys() {\n      return allKeys\n    },\n\n    getPropertyValue(prop) {\n      return client[prop]\n    },\n  }\n}\n\nfunction modelsLayer(client: Client): CompositeProxyLayer {\n  const dmmfModelKeys = Object.keys(client._runtimeDataModel.models)\n  const jsModelKeys = dmmfModelKeys.map(dmmfToJSModelName)\n  const allKeys = [...new Set(dmmfModelKeys.concat(jsModelKeys))]\n\n  return cacheProperties({\n    getKeys() {\n      return allKeys\n    },\n\n    getPropertyValue(prop) {\n      const dmmfModelName = jsToDMMFModelName(prop)\n      // creates a new model proxy on the fly and caches it\n      if (client._runtimeDataModel.models[dmmfModelName] !== undefined) {\n        return applyModel(client, dmmfModelName)\n      }\n\n      // above silently failed if model name is lower cased\n      if (client._runtimeDataModel.models[prop] !== undefined) {\n        return applyModel(client, prop)\n      }\n\n      return undefined\n    },\n\n    getPropertyDescriptor(key) {\n      if (!jsModelKeys.includes(key)) {\n        return { enumerable: false }\n      }\n\n      return undefined\n    },\n  })\n}\n\nexport function unApplyModelsAndClientExtensions(client: Client): Client {\n  if (client[rawClient]) {\n    return client[rawClient]\n  }\n  return client\n}\n","import { Client } from '../../getPrismaClient'\nimport { AccelerateEngine } from '../engines/accelerate/AccelerateEngine'\nimport { applyModelsAndClientExtensions } from '../model/applyModelsAndClientExtensions'\nimport { ExtensionArgs } from '../types/exported'\n\n/**\n * @param this\n */\nexport function $extends(this: Client, extension: ExtensionArgs | ((client: Client) => Client)): Client {\n  if (typeof extension === 'function') {\n    return extension(this)\n  }\n\n  if (extension.client?.__AccelerateEngine) {\n    const Engine = extension.client.__AccelerateEngine as typeof AccelerateEngine\n    this._originalClient._engine = new Engine(this._originalClient._accelerateEngineConfig)\n  }\n\n  const newClient = Object.create(this._originalClient, {\n    _extensions: { value: this._extensions.append(extension) },\n    _appliedParent: { value: this, configurable: true },\n    $on: { value: undefined },\n  }) as Client\n\n  return applyModelsAndClientExtensions(newClient)\n}\n","import { hasOwnProperty } from '@prisma/internals'\n\nimport {\n  addProperty,\n  cacheProperties,\n  CompositeProxyLayer,\n  createCompositeProxy,\n  removeProperties,\n} from '../compositeProxy'\nimport { Omission, Selection } from '../types/exported/JsApi'\nimport { MergedExtensionsList } from './MergedExtensionsList'\nimport { ComputedField } from './resultUtils'\n\ntype ApplyExtensionsArgs = {\n  result: object\n  select?: Selection\n  omit?: Omission\n  modelName: string\n  extensions: MergedExtensionsList\n}\n\n/**\n * Given a part of a query result, it's model name and a list of extension,\n * applies computed fields to the results. Fields are computed lazily on a first access,\n * after that the result of computation is cached. In case `select` is used, all dependencies\n * of the computed fields would be excluded from final result, unless they are also specified in the select.\n *\n * This function applies computed fields to a single object only: it does not traverse relationships.\n * For full functionality, it is meant to be combined with `visitQueryResult`.\n *\n * @param params\n * @returns\n */\nexport function applyResultExtensions({ result, modelName, select, omit, extensions }: ApplyExtensionsArgs) {\n  const computedFields = extensions.getAllComputedFields(modelName)\n  if (!computedFields) {\n    return result\n  }\n\n  const computedPropertiesLayers: CompositeProxyLayer[] = []\n  const maskingLayers: CompositeProxyLayer[] = []\n\n  for (const field of Object.values(computedFields)) {\n    if (omit) {\n      if (omit[field.name]) {\n        continue\n      }\n      const toMask = field.needs.filter((prop) => omit[prop])\n      if (toMask.length > 0) {\n        maskingLayers.push(removeProperties(toMask))\n      }\n    } else if (select) {\n      if (!select[field.name]) {\n        continue\n      }\n\n      const toMask = field.needs.filter((prop) => !select[prop])\n      if (toMask.length > 0) {\n        maskingLayers.push(removeProperties(toMask))\n      }\n    }\n\n    if (areNeedsMet(result, field.needs)) {\n      computedPropertiesLayers.push(\n        computedPropertyLayer(field, createCompositeProxy(result, computedPropertiesLayers)),\n      )\n    }\n  }\n\n  if (computedPropertiesLayers.length > 0 || maskingLayers.length > 0) {\n    return createCompositeProxy(result, [...computedPropertiesLayers, ...maskingLayers])\n  }\n  return result\n}\n\nfunction areNeedsMet(result: object, neededProperties: string[]) {\n  return neededProperties.every((property) => hasOwnProperty(result, property))\n}\n\nfunction computedPropertyLayer(field: ComputedField, result: object): CompositeProxyLayer {\n  return cacheProperties(addProperty(field.name, () => field.compute(result)))\n}\n","import { RuntimeDataModel } from '@prisma/client-common'\n\nimport { isSkip } from '../types'\nimport { JsArgs, Selection } from '../types/exported/JsApi'\n\ntype ModelVisitor = (value: object, modelName: string, queryArgs: JsArgs) => object | undefined\n\ntype VisitParams = {\n  result: object\n  args: JsArgs\n  modelName: string\n  runtimeDataModel: RuntimeDataModel\n  visitor: ModelVisitor\n}\n\n/**\n * Function recursively walks through provided query response using `include` and `select`\n * query parameters and calls `visitor` callback for each model it encounters.\n * `visitor` receives the value of a particular response section, model it corresponds to and\n * the arguments used to query it. If visitor returns any non-undefined value that value will\n * replace corresponding part of the final result.\n *\n * @param params\n * @returns\n */\nexport function visitQueryResult({ visitor, result, args, runtimeDataModel, modelName }: VisitParams) {\n  if (Array.isArray(result)) {\n    for (let i = 0; i < result.length; i++) {\n      result[i] = visitQueryResult({\n        result: result[i],\n        args,\n        modelName,\n        runtimeDataModel,\n        visitor,\n      })\n    }\n    return result\n  }\n  const visitResult = visitor(result, modelName, args) ?? result\n  if (args.include) {\n    visitNested({\n      includeOrSelect: args.include,\n      result: visitResult,\n      parentModelName: modelName,\n      runtimeDataModel,\n      visitor,\n    })\n  }\n  if (args.select) {\n    visitNested({\n      includeOrSelect: args.select,\n      result: visitResult,\n      parentModelName: modelName,\n      runtimeDataModel,\n      visitor,\n    })\n  }\n  return visitResult\n}\n\ntype VisitNestedParams = {\n  includeOrSelect: Selection\n  result: object\n  parentModelName: string\n  runtimeDataModel: RuntimeDataModel\n  visitor: ModelVisitor\n}\n\nfunction visitNested({ includeOrSelect, result, parentModelName, runtimeDataModel, visitor }: VisitNestedParams) {\n  for (const [fieldName, subConfig] of Object.entries(includeOrSelect)) {\n    if (!subConfig || result[fieldName] == null || isSkip(subConfig)) {\n      continue\n    }\n    const parentModel = runtimeDataModel.models[parentModelName]\n    const field = parentModel.fields.find((field) => field.name === fieldName)\n    if (!field || field.kind !== 'object' || !field.relationName) {\n      continue\n    }\n    const args = typeof subConfig === 'object' ? subConfig : {}\n    result[fieldName] = visitQueryResult({\n      visitor,\n      result: result[fieldName],\n      args,\n      modelName: field.type,\n      runtimeDataModel,\n    })\n  }\n}\n","import { RuntimeDataModel } from '@prisma/client-common'\n\nimport { GlobalOmitOptions } from '../jsonProtocol/serializeJsonQuery'\nimport { dmmfToJSModelName } from '../model/utils/dmmfToJSModelName'\nimport { JsArgs } from '../types/exported/JsApi'\nimport { applyResultExtensions } from './applyResultExtensions'\nimport { MergedExtensionsList } from './MergedExtensionsList'\nimport { visitQueryResult } from './visitQueryResult'\n\ntype ApplyAllResultExtensionsParams = {\n  result: object | null\n  modelName: string\n  args: JsArgs\n  extensions: MergedExtensionsList\n  runtimeDataModel: RuntimeDataModel\n  globalOmit?: GlobalOmitOptions\n}\n\n/**\n * Walks the result of the query and applies all possible result extensions\n * to all parts of it, including nested relations\n */\nexport function applyAllResultExtensions({\n  result,\n  modelName,\n  args,\n  extensions,\n  runtimeDataModel,\n  globalOmit,\n}: ApplyAllResultExtensionsParams) {\n  // We return the result directly (not applying result extensions) if\n  // - there is no extension to apply\n  // - result is `null`\n  // - result is not an object (e.g. `.count()`)\n  if (extensions.isEmpty() || result == null || typeof result !== 'object') {\n    return result\n  }\n  const model = runtimeDataModel.models[modelName]\n  if (!model) {\n    return result\n  }\n\n  return visitQueryResult({\n    result,\n    args: args ?? {},\n    modelName,\n    runtimeDataModel,\n    visitor: (value, dmmfModelName, args) => {\n      const jsName = dmmfToJSModelName(dmmfModelName)\n      return applyResultExtensions({\n        result: value,\n        modelName: jsName,\n        select: args.select,\n        // passing omit only if explicit select is not set - those 2 options are\n        // mutually exclusive\n        omit: args.select ? undefined : { ...globalOmit?.[jsName], ...args.omit },\n        extensions,\n      })\n    },\n  })\n}\n","const denylist = ['$connect', '$disconnect', '$on', '$transaction', '$extends'] as const\n\nexport const itxClientDenyList = denylist as ReadonlyArray<string | symbol>\n\nexport type ITXClientDenyList = (typeof denylist)[number]\n","import { assertNever } from '@prisma/internals'\nimport Decimal from 'decimal.js'\nimport { Sql } from 'sql-template-tag'\n\nimport { isFieldRef } from '../core/model/FieldRef'\nimport { isTypedSql, TypedSql, UnknownTypedSql } from '../core/types/exported'\nimport { JsArgs, JsInputValue } from '../core/types/exported/JsApi'\nimport { ObjectEnumValue } from '../core/types/exported/ObjectEnums'\nimport { RawQueryArgs } from '../core/types/exported/RawQueryArgs'\nimport { isDate } from './date'\nimport { isDecimalJsLike } from './decimalJsLike'\n\nexport function deepCloneArgs(args: JsArgs | RawQueryArgs): JsArgs | RawQueryArgs {\n  if (args instanceof Sql) {\n    return cloneSql(args)\n  }\n\n  if (isTypedSql(args)) {\n    return cloneTypedSql(args)\n  }\n\n  if (Array.isArray(args)) {\n    const clone: RawQueryArgs = [args[0]]\n\n    for (let i = 1; i < args.length; i++) {\n      clone[i] = deepCloneValue(args[i] as JsInputValue)\n    }\n\n    return clone\n  }\n  const clone: JsArgs = {}\n  for (const k in args) {\n    clone[k] = deepCloneValue(args[k])\n  }\n  return clone\n}\n\nfunction cloneSql(rawParam: Sql): Sql {\n  return new Sql(rawParam.strings, rawParam.values)\n}\n\nfunction cloneTypedSql(rawParam: UnknownTypedSql): UnknownTypedSql {\n  return new TypedSql(rawParam.sql, rawParam.values)\n}\n\n// based on https://github.com/lukeed/klona/blob/v2.0.6/src/index.js\nfunction deepCloneValue(x: JsInputValue): JsInputValue {\n  if (typeof x !== 'object' || x == null || x instanceof ObjectEnumValue || isFieldRef(x)) {\n    return x\n  }\n\n  if (isDecimalJsLike(x)) {\n    return new Decimal(x.toFixed())\n  }\n\n  if (isDate(x)) {\n    return new Date(+x)\n  }\n\n  if (ArrayBuffer.isView(x)) {\n    return x.slice(0)\n  }\n\n  if (Array.isArray(x)) {\n    let k = x.length\n    let copy\n    for (copy = Array(k); k--; ) {\n      copy[k] = deepCloneValue(x[k])\n    }\n    return copy\n  }\n\n  if (typeof x === 'object') {\n    const copy = {}\n    for (const k in x) {\n      if (k === '__proto__') {\n        Object.defineProperty(copy, k, {\n          value: deepCloneValue(x[k]),\n          configurable: true,\n          enumerable: true,\n          writable: true,\n        })\n      } else {\n        copy[k] = deepCloneValue(x[k])\n      }\n    }\n    return copy\n  }\n\n  assertNever(x, 'Unknown value')\n}\n","import { Client, InternalRequestParams } from '../../getPrismaClient'\nimport { RequestParams } from '../../RequestHandler'\nimport { deepCloneArgs } from '../../utils/deepCloneArgs'\nimport { AccelerateExtensionFetchDecorator } from '../engines'\nimport { QueryOptionsCb } from '../types/exported/ExtensionArgs'\nimport { BatchInternalParams, BatchQueryOptionsCb } from '../types/internal/ExtensionsInternalArgs'\n\nfunction iterateAndCallQueryCallbacks(\n  client: Client,\n  params: InternalRequestParams,\n  queryCbs: QueryOptionsCb[],\n  i = 0,\n) {\n  return client._createPrismaPromise((transaction) => {\n    // we need to keep track of the previous customDataProxyFetch\n    const prevCustomFetch = params.customDataProxyFetch\n\n    // allow query extensions to re-wrap in transactions\n    // this will automatically discard the prev batch tx\n    if ('transaction' in params && transaction !== undefined) {\n      if (params.transaction?.kind === 'batch') {\n        void params.transaction.lock.then() // discard\n      }\n      params.transaction = transaction\n    }\n\n    // if we are done recursing, we execute the request\n    if (i === queryCbs.length) {\n      return client._executeRequest(params)\n    }\n\n    // if not, call the next query cb and recurse query\n    return queryCbs[i]({\n      model: params.model,\n      operation: params.model ? params.action : params.clientMethod,\n      args: deepCloneArgs(params.args ?? {}),\n      // @ts-expect-error because not part of public API\n      __internalParams: params,\n      query: (args, __internalParams = params) => {\n        // we need to keep track of the current customDataProxyFetch\n        // this is to cascade customDataProxyFetch like a middleware\n        const currCustomFetch = __internalParams.customDataProxyFetch\n        __internalParams.customDataProxyFetch = composeCustomDataProxyFetch(prevCustomFetch, currCustomFetch)\n        __internalParams.args = args\n\n        return iterateAndCallQueryCallbacks(client, __internalParams, queryCbs, i + 1)\n      },\n    })\n  })\n}\n\nexport function applyQueryExtensions(client: Client, params: InternalRequestParams): Promise<any> {\n  const { jsModelName, action, clientMethod } = params\n  const operation = jsModelName ? action : clientMethod\n\n  // query extensions only apply to model-bound operations\n  if (client._extensions.isEmpty()) {\n    return client._executeRequest(params)\n  }\n\n  // get the cached query cbs for a given model and action\n  const cbs = client._extensions.getAllQueryCallbacks(jsModelName ?? '$none', operation)\n\n  return iterateAndCallQueryCallbacks(client, params, cbs)\n}\n\ntype BatchExecuteCallback = (params: BatchInternalParams) => Promise<unknown[]>\n\nexport function createApplyBatchExtensionsFunction(executeBatch: BatchExecuteCallback) {\n  return (requests: RequestParams[]) => {\n    const params = { requests }\n    const callbacks = requests[0].extensions.getAllBatchQueryCallbacks()\n    if (!callbacks.length) {\n      return executeBatch(params)\n    }\n\n    return iterateAndCallBatchCallbacks(params, callbacks, 0, executeBatch)\n  }\n}\n\nexport function iterateAndCallBatchCallbacks(\n  params: BatchInternalParams,\n  callbacks: BatchQueryOptionsCb[],\n  i: number,\n  executeBatch: BatchExecuteCallback,\n) {\n  if (i === callbacks.length) {\n    return executeBatch(params)\n  }\n\n  const prevFetch = params.customDataProxyFetch\n  const transaction = params.requests[0].transaction\n  return callbacks[i]({\n    args: {\n      queries: params.requests.map((request) => ({\n        model: request.modelName,\n        operation: request.action,\n        args: request.args,\n      })),\n      transaction: transaction\n        ? {\n            isolationLevel: transaction.kind === 'batch' ? transaction.isolationLevel : undefined,\n          }\n        : undefined,\n    },\n    __internalParams: params,\n    query(_args, __internalParams = params) {\n      const nextFetch = __internalParams.customDataProxyFetch\n      __internalParams.customDataProxyFetch = composeCustomDataProxyFetch(prevFetch, nextFetch)\n      return iterateAndCallBatchCallbacks(__internalParams, callbacks, i + 1, executeBatch)\n    },\n  })\n}\n\nconst noopFetch: AccelerateExtensionFetchDecorator = (f) => f\nfunction composeCustomDataProxyFetch(prevFetch = noopFetch, nextFetch = noopFetch): AccelerateExtensionFetchDecorator {\n  return (f) => prevFetch(nextFetch(f))\n}\n","import { GetPrismaClientConfig } from '@prisma/client-common'\nimport { Debug } from '@prisma/debug'\n\nimport { PrismaClientInitializationError } from '../errors/PrismaClientInitializationError'\n\nconst debug = Debug('prisma:client')\n\n/**\n * Known platforms that have caching issues. Updating this list will also update\n * the error message and the link to the docs, so add docs/links as needed. The\n * key from this map comes from the `ciName` property of the `ci-info` package.\n */\nconst cachingPlatforms = {\n  Vercel: 'vercel',\n  'Netlify CI': 'netlify',\n} as const\n\ntype Config = Pick<GetPrismaClientConfig, 'postinstall' | 'ciName' | 'clientVersion' | 'generator'>\n\n/**\n * Throws an error if the client has been generated via auto-install and the\n * platform is known to have caching issues. In that case, we will display a\n * useful error message, and ask the user to run `prisma generate` manually.\n *\n * This function is specifically about dealing with `node_modules` caching.\n *\n * @returns\n */\nexport function checkPlatformCaching({ postinstall, ciName, clientVersion, generator }: Config) {\n  debug('checkPlatformCaching:postinstall', postinstall)\n  debug('checkPlatformCaching:ciName', ciName)\n\n  // if client was not generated manually\n  if (postinstall !== true) return\n\n  // check if a custom output directory is used\n  if (generator?.output) {\n    const output = generator.output.fromEnvVar ?? generator.output.value\n\n    if (typeof output === 'string') {\n      // The generator is using a custom output directory, so we can skip the caching check\n      return\n    }\n  }\n\n  // and we generated on one a caching CI\n  if (ciName && ciName in cachingPlatforms) {\n    const message = `Prisma has detected that this project was built on ${ciName}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \\`prisma generate\\` command during the build process.\n\nLearn how: https://pris.ly/d/${cachingPlatforms[ciName]}-build`\n\n    console.error(message) // display a nice and visible error message\n\n    // also throw an error so that the user can catch it and handle it\n    throw new PrismaClientInitializationError(message, clientVersion)\n  }\n}\n","import { Datasources, PrismaClientOptions } from '../../getPrismaClient'\n\nexport function getDatasourceOverrides(\n  options: PrismaClientOptions | undefined,\n  datasourceNames: string[],\n): Datasources {\n  if (!options) {\n    return {}\n  }\n\n  if (options.datasources) {\n    return options.datasources\n  }\n\n  if (options.datasourceUrl) {\n    const primaryDatasource = datasourceNames[0]\n    return { [primaryDatasource]: { url: options.datasourceUrl } }\n  }\n  return {}\n}\n","import { Debug } from '@prisma/debug'\nimport { getEnginesPath } from '@prisma/engines'\nimport { BinaryTarget, getBinaryTargetForCurrentPlatform, getNodeAPIName } from '@prisma/get-platform'\nimport { chmodPlusX, ClientEngineType } from '@prisma/internals'\nimport fs from 'fs'\nimport path from 'path'\n\nimport { PrismaClientInitializationError } from '../../errors/PrismaClientInitializationError'\nimport { EngineConfig } from './Engine'\nimport { binaryTargetsWasIncorrectlyPinned } from './errors/engine-not-found/binaryTargetsWasIncorrectlyPinned'\nimport { bundlerHasTamperedWithEngineCopy } from './errors/engine-not-found/bundlerHasTamperedWithEngineCopy'\nimport { EngineNotFoundErrorInput } from './errors/engine-not-found/EngineNotFoundErrorInput'\nimport { nativeGeneratedOnDifferentPlatform } from './errors/engine-not-found/nativeGeneratedOnDifferentPlatform'\nimport { toolingHasTamperedWithEngineCopy } from './errors/engine-not-found/toolingHasTamperedWithEngineCopy'\n\nconst debug = Debug('prisma:client:engines:resolveEnginePath')\n\n// this name will be injected by esbuild when we build/bundle the runtime\nconst runtimeFileRegex = () => new RegExp(`runtime[\\\\\\\\/]${TARGET_BUILD_TYPE}\\\\.m?js$`)\n\n/**\n * Resolves the path of a given engine type (binary or library) and config. If\n * the engine could not be found, we will try to help the user by providing\n * helpful error messages.\n * @param engineType\n * @param config\n * @returns\n */\nexport async function resolveEnginePath(engineType: ClientEngineType, config: EngineConfig) {\n  // if the user provided a custom path, or if engine previously found\n  const prismaPath =\n    {\n      binary: process.env.PRISMA_QUERY_ENGINE_BINARY,\n      library: process.env.PRISMA_QUERY_ENGINE_LIBRARY,\n    }[engineType] ?? config.prismaPath\n\n  if (prismaPath !== undefined) return prismaPath\n\n  // otherwise we will search to find the nearest query engine file\n  const { enginePath, searchedLocations } = await findEnginePath(engineType, config)\n\n  debug('enginePath', enginePath)\n\n  // if we find it, we apply +x chmod to the binary, cache, and return\n  if (enginePath !== undefined && engineType === ClientEngineType.Binary) chmodPlusX(enginePath)\n  if (enginePath !== undefined) return (config.prismaPath = enginePath)\n\n  // if we don't find it, then we will throw helpful error messages\n  const binaryTarget = await getBinaryTargetForCurrentPlatform()\n  const generatorBinaryTargets = config.generator?.binaryTargets ?? []\n  const hasNativeBinaryTarget = generatorBinaryTargets.some((bt) => bt.native)\n  const hasMissingBinaryTarget = !generatorBinaryTargets.some((bt) => bt.value === binaryTarget)\n  const clientHasBeenBundled = __filename.match(runtimeFileRegex()) === null // runtime name\n\n  const errorInput: EngineNotFoundErrorInput = {\n    searchedLocations,\n    generatorBinaryTargets,\n    generator: config.generator!,\n    runtimeBinaryTarget: binaryTarget,\n    queryEngineName: getQueryEngineName(engineType, binaryTarget),\n    expectedLocation: path.relative(process.cwd(), config.dirname), // TODO pathToPosix\n    errorStack: new Error().stack,\n  }\n\n  let errorMessage: string\n  if (hasNativeBinaryTarget && hasMissingBinaryTarget) {\n    errorMessage = nativeGeneratedOnDifferentPlatform(errorInput)\n  } else if (hasMissingBinaryTarget) {\n    errorMessage = binaryTargetsWasIncorrectlyPinned(errorInput)\n  } else if (clientHasBeenBundled) {\n    errorMessage = bundlerHasTamperedWithEngineCopy(errorInput)\n  } else {\n    errorMessage = toolingHasTamperedWithEngineCopy(errorInput)\n  }\n\n  throw new PrismaClientInitializationError(errorMessage, config.clientVersion!)\n}\n\n/**\n * Core logic for the resolution of the engine path. This function will search\n * for the engine in multiple locations, and return the first one that is found.\n * @param engineType\n * @param config\n * @returns\n */\nasync function findEnginePath(engineType: ClientEngineType, config: EngineConfig) {\n  const binaryTarget = await getBinaryTargetForCurrentPlatform()\n  const searchedLocations: string[] = []\n\n  const searchLocations: string[] = [\n    config.dirname, // generation directory\n    path.resolve(__dirname, '..'), // generation directory one level up\n    config.generator?.output?.value ?? __dirname, // custom generator local path\n    path.resolve(__dirname, '../../../.prisma/client'), // dot prisma node_modules ???\n    '/tmp/prisma-engines', // used for netlify\n    config.cwd, // cwdPath, not cwd\n  ]\n\n  if (__filename.includes('resolveEnginePath')) {\n    searchLocations.push(getEnginesPath()) // for old tests\n  }\n\n  for (const location of searchLocations) {\n    const engineName = getQueryEngineName(engineType, binaryTarget)\n    const enginePath = path.join(location, engineName)\n\n    searchedLocations.push(location)\n    if (fs.existsSync(enginePath)) {\n      return { enginePath, searchedLocations }\n    }\n  }\n\n  return { enginePath: undefined, searchedLocations }\n}\n\n/**\n * Utility function to get the name of the query engine file for a given engine\n * and a given binary target.\n * @param engineType\n * @param binaryTarget\n * @returns\n */\nexport function getQueryEngineName(engineType: ClientEngineType, binaryTarget: BinaryTarget) {\n  if (engineType === ClientEngineType.Library) {\n    return getNodeAPIName(binaryTarget, 'fs')\n  } else {\n    return `query-engine-${binaryTarget}${binaryTarget === 'windows' ? '.exe' : ''}`\n  }\n}\n","import { printGeneratorConfig } from '@prisma/internals'\n\nimport { EngineNotFoundErrorInput } from './EngineNotFoundErrorInput'\n\nexport function addRuntimeToYourBinaryTargets(input: EngineNotFoundErrorInput) {\n  const { runtimeBinaryTarget } = input\n\n  return `Add \"${runtimeBinaryTarget}\" to \\`binaryTargets\\` in the \"schema.prisma\" file and run \\`prisma generate\\` after saving it:\n\n${getGeneratorBlockSuggestion(input)}`\n}\n\nfunction getGeneratorBlockSuggestion(input: EngineNotFoundErrorInput) {\n  const { generator, generatorBinaryTargets, runtimeBinaryTarget } = input\n  const suggestedBinaryTarget = { fromEnvVar: null, value: runtimeBinaryTarget }\n  const binaryTargets = [...generatorBinaryTargets, suggestedBinaryTarget]\n\n  return printGeneratorConfig({ ...generator, binaryTargets })\n}\n","import { EngineNotFoundErrorInput } from './EngineNotFoundErrorInput'\n\nexport function queryEngineCannotBeFound(input: EngineNotFoundErrorInput) {\n  const { runtimeBinaryTarget } = input\n\n  return `Prisma Client could not locate the Query Engine for runtime \"${runtimeBinaryTarget}\".`\n}\n","import { EngineNotFoundErrorInput } from './EngineNotFoundErrorInput'\n\nexport function theseLocationsHaveBeenSearched(input: EngineNotFoundErrorInput) {\n  const { searchedLocations } = input\n\n  const uniqueSearchLocations = [...new Set(searchedLocations)]\n  const formattedSearchLocations = uniqueSearchLocations.map((location) => `  ${location}`).join('\\n')\n\n  return `The following locations have been searched:\n${formattedSearchLocations}`\n}\n","import { addRuntimeToYourBinaryTargets } from './addRuntimeToYourBinaryTargets'\nimport { EngineNotFoundErrorInput } from './EngineNotFoundErrorInput'\nimport { queryEngineCannotBeFound } from './queryEngineCannotBeFound'\nimport { theseLocationsHaveBeenSearched } from './theseLocationsHaveBeenSearched'\n\nexport function binaryTargetsWasIncorrectlyPinned(input: EngineNotFoundErrorInput) {\n  const { runtimeBinaryTarget } = input\n\n  return `${queryEngineCannotBeFound(input)}\n\nThis happened because \\`binaryTargets\\` have been pinned, but the actual deployment also required \"${runtimeBinaryTarget}\".\n${addRuntimeToYourBinaryTargets(input)}\n\n${theseLocationsHaveBeenSearched(input)}`\n}\n","export function weWouldAppreciateIfYouCouldShareInfo(prisly: string) {\n  return `We would appreciate if you could take the time to share some information with us.\nPlease help us by answering a few questions: https://pris.ly/${prisly}`\n}\n","import { EngineNotFoundErrorInput } from './EngineNotFoundErrorInput'\n\nexport function howToFixEngineNotFoundNextjs(input: EngineNotFoundErrorInput) {\n  const { errorStack } = input\n\n  if (errorStack?.match(/\\/\\.next|\\/next@|\\/next\\//)) {\n    return `\\n\\nWe detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`\n  }\n\n  return ''\n}\n","import { weWouldAppreciateIfYouCouldShareInfo } from '../weWouldAppreciateIfYouCouldShareInfo'\nimport { EngineNotFoundErrorInput } from './EngineNotFoundErrorInput'\nimport { howToFixEngineNotFoundNextjs } from './howToFixEngineNotFoundNextjs'\nimport { queryEngineCannotBeFound } from './queryEngineCannotBeFound'\nimport { theseLocationsHaveBeenSearched } from './theseLocationsHaveBeenSearched'\n\nexport function bundlerHasTamperedWithEngineCopy(input: EngineNotFoundErrorInput) {\n  const { queryEngineName } = input\n\n  return `${queryEngineCannotBeFound(input)}${howToFixEngineNotFoundNextjs(input)}\n\nThis is likely caused by a bundler that has not copied \"${queryEngineName}\" next to the resulting bundle.\nEnsure that \"${queryEngineName}\" has been copied next to the bundle or in \"${input.expectedLocation}\".\n\n${weWouldAppreciateIfYouCouldShareInfo('engine-not-found-bundler-investigation')}\n\n${theseLocationsHaveBeenSearched(input)}`\n}\n","import { addRuntimeToYourBinaryTargets } from './addRuntimeToYourBinaryTargets'\nimport { EngineNotFoundErrorInput } from './EngineNotFoundErrorInput'\nimport { queryEngineCannotBeFound } from './queryEngineCannotBeFound'\nimport { theseLocationsHaveBeenSearched } from './theseLocationsHaveBeenSearched'\n\nexport function nativeGeneratedOnDifferentPlatform(input: EngineNotFoundErrorInput) {\n  const { runtimeBinaryTarget, generatorBinaryTargets } = input\n  const nativeBinaryTarget = generatorBinaryTargets.find((bt) => bt.native)\n\n  return `${queryEngineCannotBeFound(input)}\n\nThis happened because Prisma Client was generated for \"${\n    nativeBinaryTarget?.value ?? 'unknown'\n  }\", but the actual deployment required \"${runtimeBinaryTarget}\".\n${addRuntimeToYourBinaryTargets(input)}\n\n${theseLocationsHaveBeenSearched(input)}`\n}\n","import { weWouldAppreciateIfYouCouldShareInfo } from '../weWouldAppreciateIfYouCouldShareInfo'\nimport { EngineNotFoundErrorInput } from './EngineNotFoundErrorInput'\nimport { howToFixEngineNotFoundNextjs } from './howToFixEngineNotFoundNextjs'\nimport { queryEngineCannotBeFound } from './queryEngineCannotBeFound'\nimport { theseLocationsHaveBeenSearched } from './theseLocationsHaveBeenSearched'\n\nexport function toolingHasTamperedWithEngineCopy(input: EngineNotFoundErrorInput) {\n  const { queryEngineName } = input\n\n  return `${queryEngineCannotBeFound(input)}${howToFixEngineNotFoundNextjs(input)}\n\nThis is likely caused by tooling that has not copied \"${queryEngineName}\" to the deployment folder.\nEnsure that you ran \\`prisma generate\\` and that \"${queryEngineName}\" has been copied to \"${input.expectedLocation}\".\n\n${weWouldAppreciateIfYouCouldShareInfo('engine-not-found-tooling-investigation')}\n\n${theseLocationsHaveBeenSearched(input)}`\n}\n","export function maskQuery(query?: string): string {\n  if (!query) {\n    return ''\n  }\n  return (\n    query\n      // replace all strings with X\n      .replace(/\".*\"/g, '\"X\"')\n      // replace all numbers with 5\n      .replace(/[\\s:\\[]([+-]?([0-9]*[.])?[0-9]+)/g, (substr) => {\n        return `${substr[0]}5`\n      })\n  )\n}\n","/**\n * Removes the leading timestamps (from docker) and trailing ms (from debug)\n * @param logs logs to normalize\n */\nexport function normalizeLogs(logs: string): string {\n  return logs\n    .split('\\n')\n    .map((l) => {\n      return l\n        .replace(/^\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z)\\s*/, '')\n        .replace(/\\+\\d+\\s*ms$/, '')\n    })\n    .join('\\n')\n}\n","import newGitHubIssueUrl from 'new-github-issue-url'\n\nexport function getGitHubIssueUrl({\n  title,\n  user = 'prisma',\n  repo = 'prisma',\n  template = 'bug_report.yml',\n  body,\n}: {\n  title: string\n  user?: string\n  repo?: string\n  template?: string\n  body?: string\n}): string {\n  return newGitHubIssueUrl({\n    user,\n    repo,\n    template,\n    title,\n    body,\n  })\n}\n","import { getLogs } from '@prisma/debug'\nimport { underline } from 'kleur/colors'\nimport stripAnsi from 'strip-ansi'\n\nimport type { ErrorWithLinkInput } from '../types/ErrorWithLinkInput'\nimport { maskQuery } from './maskQuery'\nimport { normalizeLogs } from './normalizeLogs'\nimport { getGitHubIssueUrl } from './util'\n\nexport function getErrorMessageWithLink({\n  version,\n  binaryTarget,\n  title,\n  description,\n  engineVersion,\n  database,\n  query,\n}: ErrorWithLinkInput) {\n  const gotLogs = getLogs(6000 - (query?.length ?? 0))\n  const logs = normalizeLogs(stripAnsi(gotLogs))\n  const moreInfo = description ? `# Description\\n\\`\\`\\`\\n${description}\\n\\`\\`\\`` : ''\n  const body = stripAnsi(\n    `Hi Prisma Team! My Prisma Client just crashed. This is the report:\n## Versions\n\n| Name            | Version            |\n|-----------------|--------------------|\n| Node            | ${process.version?.padEnd(19)}| \n| OS              | ${binaryTarget?.padEnd(19)}|\n| Prisma Client   | ${version?.padEnd(19)}|\n| Query Engine    | ${engineVersion?.padEnd(19)}|\n| Database        | ${database?.padEnd(19)}|\n\n${moreInfo}\n\n## Logs\n\\`\\`\\`\n${logs}\n\\`\\`\\`\n\n## Client Snippet\n\\`\\`\\`ts\n// PLEASE FILL YOUR CODE SNIPPET HERE\n\\`\\`\\`\n\n## Schema\n\\`\\`\\`prisma\n// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE\n\\`\\`\\`\n\n## Prisma Engine Query\n\\`\\`\\`\n${query ? maskQuery(query) : ''}\n\\`\\`\\`\n`,\n  )\n\n  const url = getGitHubIssueUrl({ title, body })\n  return `${title}\n\nThis is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.\n\n${underline(url)}\n\nIf you want the Prisma team to look into it, please open the link above \nTo increase the chance of success, please post your schema and a snippet of\nhow you used Prisma Client in the issue. \n`\n}\n","import Decimal from 'decimal.js'\n\n// Copied over to avoid the heavy dependency on `@prisma/internals` with its\n// transitive dependencies that are not needed for other query plan executor\n// implementations outside of Prisma Client (e.g. test executor for query\n// engine tests and query plan executor for Accelerate) that also depend on\n// `@prisma/client-engine-runtime`.\nexport function assertNever(_: never, message: string): never {\n  throw new Error(message)\n}\n\n/**\n * Checks if two objects are deeply equal, recursively checking all properties for strict equality.\n */\nexport function isDeepStrictEqual(a: unknown, b: unknown): boolean {\n  return (\n    a === b ||\n    (a !== null &&\n      b !== null &&\n      typeof a === 'object' &&\n      typeof b === 'object' &&\n      Object.keys(a).length === Object.keys(b).length &&\n      Object.keys(a).every((key) => isDeepStrictEqual(a[key], b[key])))\n  )\n}\n\n/**\n * Checks if two objects representing the names and values of key columns match. A match is\n * defined by one of the sets of keys being a subset of the other. This function also\n * converts arguments to the types used by driver adapters if necessary.\n */\nexport function doKeysMatch(lhs: {}, rhs: {}): boolean {\n  const lhsKeys = Object.keys(lhs)\n  const rhsKeys = Object.keys(rhs)\n  const smallerKeyList = lhsKeys.length < rhsKeys.length ? lhsKeys : rhsKeys\n\n  return smallerKeyList.every((key) => {\n    if (typeof lhs[key] === typeof rhs[key] && typeof lhs[key] !== 'object') {\n      // fast path for primitive types\n      return lhs[key] === rhs[key]\n    }\n\n    if (Decimal.isDecimal(lhs[key]) || Decimal.isDecimal(rhs[key])) {\n      const lhsDecimal = asDecimal(lhs[key])\n      const rhsDecimal = asDecimal(rhs[key])\n      return lhsDecimal && rhsDecimal && lhsDecimal.equals(rhsDecimal)\n    } else if (lhs[key] instanceof Uint8Array || rhs[key] instanceof Uint8Array) {\n      const lhsBuffer = asBuffer(lhs[key])\n      const rhsBuffer = asBuffer(rhs[key])\n      return lhsBuffer && rhsBuffer && lhsBuffer.equals(rhsBuffer)\n    } else if (lhs[key] instanceof Date || rhs[key] instanceof Date) {\n      return asDate(lhs[key])?.getTime() === asDate(rhs[key])?.getTime()\n    } else if (typeof lhs[key] === 'bigint' || typeof rhs[key] === 'bigint') {\n      return asBigInt(lhs[key]) === asBigInt(rhs[key])\n    } else if (typeof lhs[key] === 'number' || typeof rhs[key] === 'number') {\n      return asNumber(lhs[key]) === asNumber(rhs[key])\n    }\n\n    return isDeepStrictEqual(lhs[key], rhs[key])\n  })\n}\n\nfunction asDecimal(value: unknown): Decimal | undefined {\n  if (Decimal.isDecimal(value)) {\n    return value\n  } else if (typeof value === 'number' || typeof value === 'string') {\n    return new Decimal(value)\n  } else {\n    return\n  }\n}\n\nfunction asBuffer(value: unknown): Buffer | undefined {\n  if (Buffer.isBuffer(value)) {\n    return value\n  } else if (value instanceof Uint8Array) {\n    return Buffer.from(value.buffer, value.byteOffset, value.byteLength)\n  } else if (typeof value === 'string') {\n    return Buffer.from(value, 'base64')\n  } else {\n    return\n  }\n}\n\nfunction asDate(value: unknown): Date | undefined {\n  if (value instanceof Date) {\n    return value\n  } else if (typeof value === 'string' || typeof value === 'number') {\n    return new Date(value)\n  } else {\n    return\n  }\n}\n\nfunction asBigInt(value: unknown): bigint | undefined {\n  if (typeof value === 'bigint') {\n    return value\n  } else if (typeof value === 'number' || typeof value === 'string') {\n    return BigInt(value)\n  } else {\n    return\n  }\n}\n\nfunction asNumber(value: unknown): number | undefined {\n  if (typeof value === 'number') {\n    return value\n  } else if (typeof value === 'string') {\n    return Number(value)\n  } else {\n    return\n  }\n}\n\n/**\n * `JSON.stringify` wrapper with custom replacer function that handles nested\n * BigInt and Uint8Array values.\n */\nexport function safeJsonStringify(obj: unknown): string {\n  return JSON.stringify(obj, (_key, val) => {\n    if (typeof val === 'bigint') {\n      return val.toString()\n    } else if (ArrayBuffer.isView(val)) {\n      return Buffer.from(val.buffer, val.byteOffset, val.byteLength).toString('base64')\n    }\n    return val\n  })\n}\n","import { Decimal } from 'decimal.js'\n\nimport { assertNever } from './utils'\n\nexport type DateTaggedValue = { $type: 'DateTime'; value: string }\nexport type DecimalTaggedValue = { $type: 'Decimal'; value: string }\nexport type BytesTaggedValue = { $type: 'Bytes'; value: string }\nexport type BigIntTaggedValue = { $type: 'BigInt'; value: string }\nexport type FieldRefTaggedValue = { $type: 'FieldRef'; value: { _ref: string } }\nexport type EnumTaggedValue = { $type: 'Enum'; value: string }\nexport type JsonTaggedValue = { $type: 'Json'; value: string }\n\nexport type JsonInputTaggedValue =\n  | DateTaggedValue\n  | DecimalTaggedValue\n  | BytesTaggedValue\n  | BigIntTaggedValue\n  | FieldRefTaggedValue\n  | JsonTaggedValue\n  | EnumTaggedValue\n\nexport type JsonOutputTaggedValue =\n  | DateTaggedValue\n  | DecimalTaggedValue\n  | BytesTaggedValue\n  | BigIntTaggedValue\n  | JsonTaggedValue\n\nexport type JsOutputValue =\n  | null\n  | string\n  | number\n  | boolean\n  | bigint\n  | Uint8Array\n  | Date\n  | Decimal\n  | JsOutputValue[]\n  | { [key: string]: JsOutputValue }\n\nexport function normalizeJsonProtocolValues(result: unknown): unknown {\n  if (result === null) {\n    return result\n  }\n\n  if (Array.isArray(result)) {\n    return result.map(normalizeJsonProtocolValues)\n  }\n\n  if (typeof result === 'object') {\n    if (isTaggedValue(result)) {\n      return normalizeTaggedValue(result)\n    }\n\n    if (ArrayBuffer.isView(result)) {\n      const buffer = Buffer.from(result.buffer, result.byteOffset, result.byteLength)\n      return buffer.toString('base64')\n    }\n\n    // avoid mapping class instances\n    if (result.constructor !== null && result.constructor.name !== 'Object') {\n      return result\n    }\n\n    return mapObjectValues(result, normalizeJsonProtocolValues)\n  }\n\n  return result\n}\n\nfunction isTaggedValue(value: unknown): value is JsonOutputTaggedValue {\n  return value !== null && typeof value == 'object' && typeof value['$type'] === 'string'\n}\n\n/**\n * Normalizes the value inside a tagged value to match the snapshots in tests.\n * Sometimes there are multiple equally valid representations of the same value\n * (e.g. a decimal string may contain an arbitrary number of trailing zeros,\n * datetime strings may specify the UTC offset as either '+00:00' or 'Z', etc).\n * Since these differences have no effect on the actual values received from the\n * Prisma Client once the response is deserialized to JavaScript values, we don't\n * spend extra CPU cycles on normalizing them in the data mapper. Instead, we\n * patch and normalize them here to ensure they are consistent with the snapshots\n * in the query engine tests.\n */\nfunction normalizeTaggedValue({ $type, value }: JsonOutputTaggedValue): JsonOutputTaggedValue {\n  switch ($type) {\n    case 'BigInt':\n      return { $type, value: String(value) }\n    case 'Bytes':\n      return { $type, value: Buffer.from(value, 'base64').toString('base64') }\n    case 'DateTime':\n      return { $type, value: new Date(value).toISOString() }\n    case 'Decimal':\n      return { $type, value: String(new Decimal(value)) }\n    case 'Json':\n      return { $type, value: JSON.stringify(JSON.parse(value)) }\n    default:\n      assertNever(value, 'Unknown tagged value')\n  }\n}\n\nfunction mapObjectValues<K extends PropertyKey, T, U>(\n  object: Record<K, T>,\n  mapper: (value: T, key: K) => U,\n): Record<K, U> {\n  const result = {} as Record<K, U>\n\n  for (const key of Object.keys(object)) {\n    result[key] = mapper(object[key] as T, key as K)\n  }\n\n  return result\n}\n\nexport function deserializeJsonResponse(result: unknown): unknown {\n  if (result === null) {\n    return result\n  }\n\n  if (Array.isArray(result)) {\n    return result.map(deserializeJsonResponse)\n  }\n\n  if (typeof result === 'object') {\n    if (isTaggedValue(result)) {\n      return deserializeTaggedValue(result)\n    }\n\n    // avoid mapping class instances\n    if (result.constructor !== null && result.constructor.name !== 'Object') {\n      return result\n    }\n\n    return mapObjectValues(result, deserializeJsonResponse)\n  }\n\n  return result\n}\n\nfunction deserializeTaggedValue({ $type, value }: JsonOutputTaggedValue): JsOutputValue {\n  switch ($type) {\n    case 'BigInt':\n      return BigInt(value)\n    case 'Bytes': {\n      const { buffer, byteOffset, byteLength } = Buffer.from(value, 'base64')\n      return new Uint8Array(buffer, byteOffset, byteLength)\n    }\n    case 'DateTime':\n      return new Date(value)\n    case 'Decimal':\n      return new Decimal(value)\n    case 'Json':\n      return JSON.parse(value)\n    default:\n      assertNever(value, 'Unknown tagged value')\n  }\n}\n","{\n  \"name\": \"@prisma/client\",\n  \"version\": \"6.16.3\",\n  \"description\": \"Prisma Client is an auto-generated, type-safe and modern JavaScript/TypeScript ORM for Node.js that's tailored to your data. Supports PostgreSQL, CockroachDB, MySQL, MariaDB, SQL Server, SQLite & MongoDB databases.\",\n  \"keywords\": [\n    \"ORM\",\n    \"Prisma\",\n    \"prisma2\",\n    \"Prisma Client\",\n    \"client\",\n    \"query\",\n    \"query-builder\",\n    \"database\",\n    \"db\",\n    \"JavaScript\",\n    \"JS\",\n    \"TypeScript\",\n    \"TS\",\n    \"SQL\",\n    \"SQLite\",\n    \"pg\",\n    \"Postgres\",\n    \"PostgreSQL\",\n    \"CockroachDB\",\n    \"MySQL\",\n    \"MariaDB\",\n    \"MSSQL\",\n    \"SQL Server\",\n    \"SQLServer\",\n    \"MongoDB\",\n    \"react-native\"\n  ],\n  \"main\": \"default.js\",\n  \"types\": \"default.d.ts\",\n  \"browser\": \"index-browser.js\",\n  \"exports\": {\n    \"./package.json\": \"./package.json\",\n    \".\": {\n      \"require\": {\n        \"types\": \"./default.d.ts\",\n        \"node\": \"./default.js\",\n        \"edge-light\": \"./default.js\",\n        \"workerd\": \"./default.js\",\n        \"worker\": \"./default.js\",\n        \"browser\": \"./index-browser.js\"\n      },\n      \"import\": {\n        \"types\": \"./default.d.ts\",\n        \"node\": \"./default.js\",\n        \"edge-light\": \"./default.js\",\n        \"workerd\": \"./default.js\",\n        \"worker\": \"./default.js\",\n        \"browser\": \"./index-browser.js\"\n      },\n      \"default\": \"./default.js\"\n    },\n    \"./edge\": {\n      \"types\": \"./edge.d.ts\",\n      \"require\": \"./edge.js\",\n      \"import\": \"./edge.js\",\n      \"default\": \"./edge.js\"\n    },\n    \"./react-native\": {\n      \"types\": \"./react-native.d.ts\",\n      \"require\": \"./react-native.js\",\n      \"import\": \"./react-native.js\",\n      \"default\": \"./react-native.js\"\n    },\n    \"./extension\": {\n      \"types\": \"./extension.d.ts\",\n      \"require\": \"./extension.js\",\n      \"import\": \"./extension.js\",\n      \"default\": \"./extension.js\"\n    },\n    \"./index-browser\": {\n      \"types\": \"./index.d.ts\",\n      \"require\": \"./index-browser.js\",\n      \"import\": \"./index-browser.js\",\n      \"default\": \"./index-browser.js\"\n    },\n    \"./index\": {\n      \"types\": \"./index.d.ts\",\n      \"require\": \"./index.js\",\n      \"import\": \"./index.js\",\n      \"default\": \"./index.js\"\n    },\n    \"./wasm\": {\n      \"types\": \"./wasm.d.ts\",\n      \"require\": \"./wasm.js\",\n      \"import\": \"./wasm.mjs\",\n      \"default\": \"./wasm.mjs\"\n    },\n    \"./runtime/client\": {\n      \"types\": \"./runtime/client.d.ts\",\n      \"node\": {\n        \"require\": \"./runtime/client.js\",\n        \"default\": \"./runtime/client.js\"\n      },\n      \"require\": \"./runtime/client.js\",\n      \"import\": \"./runtime/client.mjs\",\n      \"default\": \"./runtime/client.mjs\"\n    },\n    \"./runtime/library\": {\n      \"types\": \"./runtime/library.d.ts\",\n      \"require\": \"./runtime/library.js\",\n      \"import\": \"./runtime/library.mjs\",\n      \"default\": \"./runtime/library.mjs\"\n    },\n    \"./runtime/binary\": {\n      \"types\": \"./runtime/binary.d.ts\",\n      \"require\": \"./runtime/binary.js\",\n      \"import\": \"./runtime/binary.mjs\",\n      \"default\": \"./runtime/binary.mjs\"\n    },\n    \"./runtime/wasm-engine-edge\": {\n      \"types\": \"./runtime/wasm-engine-edge.d.ts\",\n      \"require\": \"./runtime/wasm-engine-edge.js\",\n      \"import\": \"./runtime/wasm-engine-edge.mjs\",\n      \"default\": \"./runtime/wasm-engine-edge.mjs\"\n    },\n    \"./runtime/wasm-compiler-edge\": {\n      \"types\": \"./runtime/wasm-compiler-edge.d.ts\",\n      \"require\": \"./runtime/wasm-compiler-edge.js\",\n      \"import\": \"./runtime/wasm-compiler-edge.mjs\",\n      \"default\": \"./runtime/wasm-compiler-edge.mjs\"\n    },\n    \"./runtime/edge\": {\n      \"types\": \"./runtime/edge.d.ts\",\n      \"require\": \"./runtime/edge.js\",\n      \"import\": \"./runtime/edge-esm.js\",\n      \"default\": \"./runtime/edge-esm.js\"\n    },\n    \"./runtime/react-native\": {\n      \"types\": \"./runtime/react-native.d.ts\",\n      \"require\": \"./runtime/react-native.js\",\n      \"import\": \"./runtime/react-native.js\",\n      \"default\": \"./runtime/react-native.js\"\n    },\n    \"./runtime/index-browser\": {\n      \"types\": \"./runtime/index-browser.d.ts\",\n      \"require\": \"./runtime/index-browser.js\",\n      \"import\": \"./runtime/index-browser.mjs\",\n      \"default\": \"./runtime/index-browser.mjs\"\n    },\n    \"./generator-build\": {\n      \"require\": \"./generator-build/index.js\",\n      \"import\": \"./generator-build/index.js\",\n      \"default\": \"./generator-build/index.js\"\n    },\n    \"./sql\": {\n      \"require\": {\n        \"types\": \"./sql.d.ts\",\n        \"node\": \"./sql.js\",\n        \"default\": \"./sql.js\"\n      },\n      \"import\": {\n        \"types\": \"./sql.d.ts\",\n        \"node\": \"./sql.mjs\",\n        \"default\": \"./sql.mjs\"\n      },\n      \"default\": \"./sql.js\"\n    },\n    \"./*\": \"./*\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"engines\": {\n    \"node\": \">=18.18\"\n  },\n  \"homepage\": \"https://www.prisma.io\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/prisma/prisma.git\",\n    \"directory\": \"packages/client\"\n  },\n  \"author\": \"Tim Suchanek <suchanek@prisma.io>\",\n  \"bugs\": \"https://github.com/prisma/prisma/issues\",\n  \"scripts\": {\n    \"dev\": \"DEV=true tsx helpers/build.ts\",\n    \"build\": \"tsx helpers/build.ts\",\n    \"test\": \"dotenv -e ../../.db.env -- jest --silent\",\n    \"test:e2e\": \"dotenv -e ../../.db.env -- tsx tests/e2e/_utils/run.ts\",\n    \"test:functional\": \"dotenv -e ../../.db.env -- tsx helpers/functional-test/run-tests.ts\",\n    \"test:functional:client\": \"pnpm run test:functional --client-runtime client --engine-type client --runInBand --json --outputFile tests/functional/results.json\",\n    \"test:memory\": \"dotenv -e ../../.db.env -- tsx helpers/memory-tests.ts\",\n    \"test:functional:code\": \"dotenv -e ../../.db.env -- tsx helpers/functional-test/run-tests.ts --no-types\",\n    \"test:functional:types\": \"dotenv -e ../../.db.env -- tsx helpers/functional-test/run-tests.ts --types-only\",\n    \"test-notypes\": \"dotenv -e ../../.db.env -- jest --testPathIgnorePatterns src/__tests__/types/types.test.ts\",\n    \"generate\": \"node scripts/postinstall.js\",\n    \"postinstall\": \"node scripts/postinstall.js\",\n    \"prepublishOnly\": \"pnpm run build\",\n    \"new-test\": \"tsx ./helpers/new-test/new-test.ts\"\n  },\n  \"files\": [\n    \"README.md\",\n    \"runtime\",\n    \"scripts\",\n    \"generator-build\",\n    \"edge.js\",\n    \"edge.d.ts\",\n    \"wasm.js\",\n    \"wasm.d.ts\",\n    \"index.js\",\n    \"index.d.ts\",\n    \"react-native.js\",\n    \"react-native.d.ts\",\n    \"default.js\",\n    \"default.d.ts\",\n    \"index-browser.js\",\n    \"extension.js\",\n    \"extension.d.ts\",\n    \"sql.d.ts\",\n    \"sql.js\",\n    \"sql.mjs\"\n  ],\n  \"devDependencies\": {\n    \"@cloudflare/workers-types\": \"^4.20250408.0\",\n    \"@codspeed/benchmark.js-plugin\": \"4.0.0\",\n    \"@faker-js/faker\": \"9.6.0\",\n    \"@fast-check/jest\": \"2.0.3\",\n    \"@hono/node-server\": \"1.19.0\",\n    \"@inquirer/prompts\": \"7.3.3\",\n    \"@jest/create-cache-key-function\": \"29.7.0\",\n    \"@jest/globals\": \"29.7.0\",\n    \"@jest/test-sequencer\": \"29.7.0\",\n    \"@libsql/client\": \"0.8.1\",\n    \"@neondatabase/serverless\": \"0.10.2\",\n    \"@opentelemetry/api\": \"1.9.0\",\n    \"@opentelemetry/context-async-hooks\": \"2.0.0\",\n    \"@opentelemetry/instrumentation\": \"0.57.2\",\n    \"@opentelemetry/resources\": \"1.30.1\",\n    \"@opentelemetry/sdk-trace-base\": \"1.30.1\",\n    \"@opentelemetry/semantic-conventions\": \"1.30.0\",\n    \"@planetscale/database\": \"1.19.0\",\n    \"@prisma/adapter-better-sqlite3\": \"workspace:*\",\n    \"@prisma/adapter-d1\": \"workspace:*\",\n    \"@prisma/adapter-libsql\": \"workspace:*\",\n    \"@prisma/adapter-mariadb\": \"workspace:*\",\n    \"@prisma/adapter-mssql\": \"workspace:*\",\n    \"@prisma/adapter-neon\": \"workspace:*\",\n    \"@prisma/adapter-pg\": \"workspace:*\",\n    \"@prisma/adapter-planetscale\": \"workspace:*\",\n    \"@prisma/client-common\": \"workspace:*\",\n    \"@prisma/client-engine-runtime\": \"workspace:*\",\n    \"@prisma/client-generator-js\": \"workspace:*\",\n    \"@prisma/client-generator-ts\": \"workspace:*\",\n    \"@prisma/config\": \"workspace:*\",\n    \"@prisma/debug\": \"workspace:*\",\n    \"@prisma/dmmf\": \"workspace:*\",\n    \"@prisma/driver-adapter-utils\": \"workspace:*\",\n    \"@prisma/engines\": \"workspace:*\",\n    \"@prisma/engines-version\": \"6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a\",\n    \"@prisma/fetch-engine\": \"workspace:*\",\n    \"@prisma/generator\": \"workspace:*\",\n    \"@prisma/generator-helper\": \"workspace:*\",\n    \"@prisma/get-platform\": \"workspace:*\",\n    \"@prisma/instrumentation\": \"workspace:*\",\n    \"@prisma/internals\": \"workspace:*\",\n    \"@prisma/migrate\": \"workspace:*\",\n    \"@prisma/mini-proxy\": \"0.9.5\",\n    \"@prisma/query-compiler-wasm\": \"6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a\",\n    \"@prisma/query-engine-wasm\": \"6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a\",\n    \"@prisma/query-plan-executor\": \"workspace:*\",\n    \"@prisma/ts-builders\": \"workspace:*\",\n    \"@snaplet/copycat\": \"6.0.0\",\n    \"@swc-node/register\": \"1.10.9\",\n    \"@swc/core\": \"1.11.5\",\n    \"@swc/jest\": \"0.2.37\",\n    \"@timsuchanek/copy\": \"1.4.5\",\n    \"@types/debug\": \"4.1.12\",\n    \"@types/fs-extra\": \"11.0.4\",\n    \"@types/jest\": \"29.5.14\",\n    \"@types/js-levenshtein\": \"1.1.3\",\n    \"@types/mssql\": \"9.1.5\",\n    \"@types/node\": \"18.19.76\",\n    \"@types/pg\": \"8.11.11\",\n    \"arg\": \"5.0.2\",\n    \"benchmark\": \"2.1.4\",\n    \"cookie-es\": \"2.0.0\",\n    \"decimal.js\": \"10.5.0\",\n    \"execa\": \"5.1.1\",\n    \"expect-type\": \"1.2.2\",\n    \"fs-extra\": \"11.3.0\",\n    \"get-stream\": \"6.0.1\",\n    \"globby\": \"11.1.0\",\n    \"indent-string\": \"4.0.0\",\n    \"jest\": \"29.7.0\",\n    \"jest-extended\": \"4.0.2\",\n    \"jest-junit\": \"16.0.0\",\n    \"jest-serializer-ansi-escapes\": \"4.0.0\",\n    \"jest-snapshot\": \"29.7.0\",\n    \"js-levenshtein\": \"1.1.6\",\n    \"kleur\": \"4.1.5\",\n    \"klona\": \"2.0.6\",\n    \"mariadb\": \"3.4.5\",\n    \"memfs\": \"4.17.2\",\n    \"mssql\": \"11.0.1\",\n    \"new-github-issue-url\": \"0.2.1\",\n    \"p-retry\": \"4.6.2\",\n    \"pg\": \"8.14.1\",\n    \"resolve\": \"1.22.10\",\n    \"rimraf\": \"6.0.1\",\n    \"simple-statistics\": \"7.8.8\",\n    \"sort-keys\": \"5.1.0\",\n    \"source-map-support\": \"0.5.21\",\n    \"sql-template-tag\": \"5.2.1\",\n    \"stacktrace-parser\": \"0.1.11\",\n    \"strip-ansi\": \"7.1.0\",\n    \"strip-indent\": \"4.0.0\",\n    \"tempy\": \"3.0.0\",\n    \"ts-pattern\": \"5.6.2\",\n    \"tsd\": \"0.31.2\",\n    \"typescript\": \"5.4.5\",\n    \"undici\": \"7.4.0\",\n    \"zx\": \"8.4.1\"\n  },\n  \"peerDependencies\": {\n    \"prisma\": \"*\",\n    \"typescript\": \">=5.1.0\"\n  },\n  \"peerDependenciesMeta\": {\n    \"prisma\": {\n      \"optional\": true\n    },\n    \"typescript\": {\n      \"optional\": true\n    }\n  },\n  \"sideEffects\": false\n}","// https://runtime-keys.proposal.wintercg.org/\nexport type RuntimeName = 'workerd' | 'deno' | 'netlify' | 'node' | 'bun' | 'edge-light' | '' /* unknown */\n\n/**\n * Indicates if running in Node.js or a Node.js compatible runtime.\n *\n * **Note:** When running code in Bun and Deno with Node.js compatibility mode, `isNode` flag will be also `true`, indicating running in a Node.js compatible runtime.\n */\nconst isNode = () => globalThis.process?.release?.name === 'node'\n\n/**\n * Indicates if running in Bun runtime.\n */\nconst isBun = () => !!globalThis.Bun || !!globalThis.process?.versions?.bun\n\n/**\n * Indicates if running in Deno runtime.\n */\nconst isDeno = () => !!globalThis.Deno\n\n/**\n * Indicates if running in Netlify runtime.\n */\nconst isNetlify = () => typeof globalThis.Netlify === 'object'\n\n/**\n * Indicates if running in EdgeLight (Vercel Edge) runtime.\n */\nconst isEdgeLight = () => typeof globalThis.EdgeRuntime === 'object'\n\n/**\n * Indicates if running in Cloudflare Workers runtime.\n * See: https://developers.cloudflare.com/workers/runtime-apis/web-standards/#navigatoruseragent\n */\nconst isWorkerd = () => globalThis.navigator?.userAgent === 'Cloudflare-Workers'\n\nfunction detectRuntime(): RuntimeName {\n  // Note: we're currently not taking 'fastly' into account. Why?\n  const runtimeChecks = [\n    [isNetlify, 'netlify'],\n    [isEdgeLight, 'edge-light'],\n    [isWorkerd, 'workerd'],\n    [isDeno, 'deno'],\n    [isBun, 'bun'],\n    [isNode, 'node'],\n  ] as const\n\n  const detectedRuntime =\n    runtimeChecks\n      // TODO: Transforming destructuring to the configured target environment ('chrome58', 'edge16', 'firefox57', 'safari11') is not supported yet,\n      // so we can't write the following code yet:\n      // ```\n      // .flatMap(([isCurrentRuntime, runtime]) => isCurrentRuntime() ? [runtime] : [])\n      // ```\n      .flatMap((check) => (check[0]() ? [check[1]] : []))\n      .at(0) ?? ''\n\n  return detectedRuntime\n}\n\nconst runtimesPrettyNames = {\n  node: 'Node.js',\n  workerd: 'Cloudflare Workers',\n  deno: 'Deno and Deno Deploy',\n  netlify: 'Netlify Edge Functions',\n  'edge-light':\n    'Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)',\n} as const\n\ntype GetRuntimeOutput = {\n  id: RuntimeName\n  prettyName: string\n  isEdge: boolean\n}\n\nexport function getRuntime(): GetRuntimeOutput {\n  const runtimeId = detectRuntime()\n\n  return {\n    id: runtimeId,\n    // Fallback to the runtimeId if the runtime is not in the list\n    prettyName: runtimesPrettyNames[runtimeId] || runtimeId,\n    isEdge: ['workerd', 'deno', 'netlify', 'edge-light'].includes(runtimeId),\n  }\n}\n","import { GetPrismaClientConfig } from '@prisma/client-common'\n\nimport { Datasources } from '../../getPrismaClient'\nimport { getRuntime } from '../../utils/getRuntime'\nimport { PrismaClientInitializationError } from '../errors/PrismaClientInitializationError'\n\nexport function resolveDatasourceUrl({\n  inlineDatasources,\n  overrideDatasources,\n  env,\n  clientVersion,\n}: {\n  inlineDatasources: GetPrismaClientConfig['inlineDatasources']\n  overrideDatasources: Datasources\n  env: Record<string, string | undefined>\n  clientVersion: string\n}) {\n  let resolvedUrl: string | undefined\n  const datasourceName = Object.keys(inlineDatasources)[0]\n  const datasourceUrl = inlineDatasources[datasourceName]?.url\n  const overrideUrl = overrideDatasources[datasourceName]?.url\n\n  if (datasourceName === undefined) {\n    resolvedUrl = undefined\n  } else if (overrideUrl) {\n    resolvedUrl = overrideUrl\n  } else if (datasourceUrl?.value) {\n    resolvedUrl = datasourceUrl.value\n  } else if (datasourceUrl?.fromEnvVar) {\n    resolvedUrl = env[datasourceUrl.fromEnvVar]\n  }\n\n  // env var is set for use but url is undefined\n  if (datasourceUrl?.fromEnvVar !== undefined && resolvedUrl === undefined) {\n    if (\n      (TARGET_BUILD_TYPE === 'edge' ||\n        TARGET_BUILD_TYPE === 'wasm-engine-edge' ||\n        TARGET_BUILD_TYPE === 'wasm-compiler-edge') &&\n      getRuntime().id === 'workerd'\n    ) {\n      throw new PrismaClientInitializationError(\n        `error: Environment variable not found: ${datasourceUrl.fromEnvVar}.\n\nIn Cloudflare module Workers, environment variables are available only in the Worker's \\`env\\` parameter of \\`fetch\\`.\nTo solve this, provide the connection string directly: https://pris.ly/d/cloudflare-datasource-url`,\n        clientVersion,\n      )\n    }\n\n    // error matches as much as possible the usual engine error\n    throw new PrismaClientInitializationError(\n      `error: Environment variable not found: ${datasourceUrl.fromEnvVar}.`,\n      clientVersion,\n    )\n  }\n\n  // should not happen: no override, no env, no direct value\n  if (resolvedUrl === undefined) {\n    throw new PrismaClientInitializationError(\n      `error: Missing URL environment variable, value, or override.`,\n      clientVersion,\n    )\n  }\n\n  return resolvedUrl\n}\n","export interface PrismaClientErrorInfo {\n  clientVersion: string\n  cause?: Error\n}\n\nexport abstract class PrismaClientError extends Error {\n  public abstract name: string\n  public abstract code: string\n  public clientVersion: string\n  public cause?: Error // like https://github.com/es-shims/error-cause\n\n  constructor(message: string, info: PrismaClientErrorInfo) {\n    super(message)\n\n    this.clientVersion = info.clientVersion\n    this.cause = info.cause\n  }\n\n  get [Symbol.toStringTag]() {\n    return this.name\n  }\n}\n","import { PrismaClientError, type PrismaClientErrorInfo } from '../../../errors/PrismaClientError'\n\nexport interface DataProxyErrorInfo extends PrismaClientErrorInfo {\n  isRetryable?: boolean\n}\n\nexport abstract class DataProxyError extends PrismaClientError {\n  isRetryable: boolean\n\n  constructor(message: string, info: DataProxyErrorInfo) {\n    super(message, info)\n\n    this.isRetryable = info.isRetryable ?? true\n  }\n}\n","export function setRetryable<T>(info: T, retryable: boolean) {\n  return {\n    ...info,\n    isRetryable: retryable,\n  }\n}\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyErrorInfo } from './DataProxyError'\nimport { DataProxyError } from './DataProxyError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface InvalidDatasourceErrorInfo extends DataProxyErrorInfo {}\nexport class InvalidDatasourceError extends DataProxyError {\n  public name = 'InvalidDatasourceError'\n  public code = 'P6001'\n\n  constructor(message: string, info: InvalidDatasourceErrorInfo) {\n    super(message, setRetryable(info, false))\n  }\n}\nsetClassName(InvalidDatasourceError, 'InvalidDatasourceError')\n","import { isPrismaPostgresDev, PRISMA_POSTGRES_PROTOCOL } from '@prisma/internals'\n\nimport { resolveDatasourceUrl } from '../../../init/resolveDatasourceUrl'\nimport { InvalidDatasourceError } from '../../data-proxy/errors/InvalidDatasourceError'\nimport { EngineConfig } from '../Engine'\n\nexport interface GetUrlAndApiKeyOptions {\n  clientVersion: string\n  inlineDatasources: EngineConfig['inlineDatasources']\n  overrideDatasources: EngineConfig['overrideDatasources']\n  env: Record<string, string | undefined>\n}\n\nexport interface UrlAndApiKey {\n  url: HttpUrl\n  apiKey: string\n}\n\nexport type HttpUrl = URL & { protocol: 'http' | 'https' }\n\nexport function getUrlAndApiKey(options: GetUrlAndApiKeyOptions): UrlAndApiKey {\n  const errorInfo = { clientVersion: options.clientVersion }\n  const dsName = Object.keys(options.inlineDatasources)[0]\n  const serviceURL = resolveDatasourceUrl({\n    inlineDatasources: options.inlineDatasources,\n    overrideDatasources: options.overrideDatasources,\n    clientVersion: options.clientVersion,\n    env: { ...options.env, ...(typeof process !== 'undefined' ? process.env : {}) },\n  })\n\n  let url: URL\n  try {\n    url = new URL(serviceURL)\n  } catch {\n    throw new InvalidDatasourceError(\n      `Error validating datasource \\`${dsName}\\`: the URL must start with the protocol \\`prisma://\\``,\n      errorInfo,\n    )\n  }\n\n  const { protocol, searchParams } = url\n\n  if (protocol !== 'prisma:' && protocol !== PRISMA_POSTGRES_PROTOCOL) {\n    throw new InvalidDatasourceError(\n      `Error validating datasource \\`${dsName}\\`: the URL must start with the protocol \\`prisma://\\` or \\`prisma+postgres://\\``,\n      errorInfo,\n    )\n  }\n\n  const apiKey = searchParams.get('api_key')\n  if (apiKey === null || apiKey.length < 1) {\n    throw new InvalidDatasourceError(\n      `Error validating datasource \\`${dsName}\\`: the URL must contain a valid API key`,\n      errorInfo,\n    )\n  }\n\n  // To simplify things, `prisma dev`, for now, will not support HTTPS.\n  // In the future, if HTTPS for `prisma dev` becomes a thing, we'll need this line to be dynamic.\n  let httpScheme = isPrismaPostgresDev(url) ? 'http:' : 'https:'\n\n  if (process.env.TEST_CLIENT_ENGINE_REMOTE_EXECUTOR && url.searchParams.has('use_http')) {\n    httpScheme = 'http:'\n  }\n\n  // Switching from `prisma:` or `prisma+postgres:` to `http:` or `https:` by\n  // assigning to the `protocol` property is not allowed by the WHATWG URL API,\n  // it would be silently ignored without throwing an error. We have to manually\n  // update the protocol via string replacement.\n  const httpUrl = new URL(url.href.replace(protocol, httpScheme)) as HttpUrl\n\n  return { apiKey, url: httpUrl }\n}\n","import type { QueryEngineLogLevel } from '@prisma/client-common'\nimport { enginesVersion } from '@prisma/engines-version'\nimport type { TracingHelper } from '@prisma/internals'\n\nexport type AccelerateHeaders = {\n  'Content-Type': string\n  'Prisma-Engine-Hash': string\n  'Prisma-Engine-Version': string\n  'X-Capture-Telemetry'?: string\n  'X-Transaction-Id'?: string\n  Accept: string\n  Authorization: string\n  traceparent?: string\n}\n\ntype HeaderBuilderOptions = {\n  traceparent?: string\n  transactionId?: string\n}\n\nexport class HeaderBuilder {\n  readonly apiKey: string\n  readonly tracingHelper: TracingHelper\n  readonly logLevel: QueryEngineLogLevel\n  readonly logQueries: boolean | undefined\n  readonly engineHash: string\n\n  constructor({\n    apiKey,\n    tracingHelper,\n    logLevel,\n    logQueries,\n    engineHash,\n  }: {\n    apiKey: string\n    tracingHelper: TracingHelper\n    logLevel: QueryEngineLogLevel\n    logQueries: boolean | undefined\n    engineHash: string\n  }) {\n    this.apiKey = apiKey\n    this.tracingHelper = tracingHelper\n    this.logLevel = logLevel\n    this.logQueries = logQueries\n    this.engineHash = engineHash\n  }\n\n  build({ traceparent, transactionId }: HeaderBuilderOptions = {}): AccelerateHeaders {\n    const headers: AccelerateHeaders = {\n      Accept: 'application/json',\n      Authorization: `Bearer ${this.apiKey}`,\n      'Content-Type': 'application/json',\n      'Prisma-Engine-Hash': this.engineHash,\n      'Prisma-Engine-Version': enginesVersion,\n    }\n\n    if (this.tracingHelper.isEnabled()) {\n      headers.traceparent = traceparent ?? this.tracingHelper.getTraceParent()\n    }\n\n    if (transactionId) {\n      headers['X-Transaction-Id'] = transactionId\n    }\n\n    const captureTelemetry = this.#buildCaptureSettings()\n\n    if (captureTelemetry.length > 0) {\n      headers['X-Capture-Telemetry'] = captureTelemetry.join(', ')\n    }\n\n    return headers\n  }\n\n  #buildCaptureSettings(): string[] {\n    const captureTelemetry: string[] = []\n\n    if (this.tracingHelper.isEnabled()) {\n      captureTelemetry.push('tracing')\n    }\n\n    if (this.logLevel) {\n      captureTelemetry.push(this.logLevel)\n    }\n\n    if (this.logQueries) {\n      captureTelemetry.push('query')\n    }\n\n    return captureTelemetry\n  }\n}\n","export type EngineTimestamp = [seconds: number, nanoseconds: number]\n\n/**\n * Converts engine timestamp to JS timestamp, as accepted by `Date` constructor\n */\nexport function convertEngineTimestamp(timestamp: EngineTimestamp): number {\n  return timestamp[0] * 1e3 + timestamp[1] / 1e6\n}\n\n/**\n * Parses a `Date` from engine timestamp\n */\nexport function dateFromEngineTimestamp(timestamp: EngineTimestamp): Date {\n  return new Date(convertEngineTimestamp(timestamp))\n}\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyErrorInfo } from './DataProxyError'\nimport { DataProxyError } from './DataProxyError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface ForcedRetryErrorInfo extends DataProxyErrorInfo {}\n\nexport class ForcedRetryError extends DataProxyError {\n  public name = 'ForcedRetryError'\n  public code = 'P5001'\n\n  constructor(info: ForcedRetryErrorInfo) {\n    super('This request must be retried', setRetryable(info, true))\n  }\n}\nsetClassName(ForcedRetryError, 'ForcedRetryError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyErrorInfo } from './DataProxyError'\nimport { DataProxyError } from './DataProxyError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface NotImplementedYetErrorInfo extends DataProxyErrorInfo {}\n\nexport class NotImplementedYetError extends DataProxyError {\n  public name = 'NotImplementedYetError'\n  public code = 'P5004'\n\n  constructor(message: string, info: NotImplementedYetErrorInfo) {\n    super(message, setRetryable(info, false))\n  }\n}\nsetClassName(NotImplementedYetError, 'NotImplementedYetError')\n","import type { DataProxyErrorInfo } from './DataProxyError'\nimport { DataProxyError } from './DataProxyError'\n\nexport interface DataProxyAPIErrorInfo extends DataProxyErrorInfo {\n  response: Response\n}\n\nexport abstract class DataProxyAPIError extends DataProxyError {\n  response: Response\n\n  constructor(message: string, info: DataProxyAPIErrorInfo) {\n    super(message, info)\n\n    this.response = info.response\n\n    // add request id to response message if it is present in the response header\n    const requestId = this.response.headers.get('prisma-request-id')\n    if (requestId) {\n      const messageSuffix = `(The request id was: ${requestId})`\n      this.message = this.message + ' ' + messageSuffix\n    }\n  }\n}\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface SchemaMissingErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport class SchemaMissingError extends DataProxyAPIError {\n  public name = 'SchemaMissingError'\n  public code = 'P5005'\n\n  constructor(info: DataProxyAPIErrorInfo) {\n    super('Schema needs to be uploaded', setRetryable(info, true))\n  }\n}\nsetClassName(SchemaMissingError, 'SchemaMissingError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface BadRequestErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport const BAD_REQUEST_DEFAULT_MESSAGE = 'This request could not be understood by the server'\n\nexport class BadRequestError extends DataProxyAPIError {\n  public name = 'BadRequestError'\n  public code = 'P5000'\n\n  constructor(info: BadRequestErrorInfo, message?: string, code?: string) {\n    super(message || BAD_REQUEST_DEFAULT_MESSAGE, setRetryable(info, false))\n    if (code) this.code = code\n  }\n}\nsetClassName(BadRequestError, 'BadRequestError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface HealthcheckTimeoutErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport class HealthcheckTimeoutError extends DataProxyAPIError {\n  public name = 'HealthcheckTimeoutError'\n  public code = 'P5013'\n  public logs: string[]\n\n  constructor(info: HealthcheckTimeoutErrorInfo, logs: string[]) {\n    super('Engine not started: healthcheck timeout', setRetryable(info, true))\n    this.logs = logs\n  }\n}\nsetClassName(HealthcheckTimeoutError, 'HealthcheckTimeoutError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface EngineStartupErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport class EngineStartupError extends DataProxyAPIError {\n  public name = 'EngineStartupError'\n  public code = 'P5014'\n  public logs: string[]\n\n  constructor(info: EngineStartupErrorInfo, message: string, logs: string[]) {\n    super(message, setRetryable(info, true))\n    this.logs = logs\n  }\n}\nsetClassName(EngineStartupError, 'EngineStartupError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface EngineVersionNotSupportedErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport class EngineVersionNotSupportedError extends DataProxyAPIError {\n  public name = 'EngineVersionNotSupportedError'\n  public code = 'P5012'\n\n  constructor(info: EngineVersionNotSupportedErrorInfo) {\n    super('Engine version is not supported', setRetryable(info, false))\n  }\n}\nsetClassName(EngineVersionNotSupportedError, 'EngineVersionNotSupportedError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface GatewayTimeoutErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport const GATEWAY_TIMEOUT_DEFAULT_MESSAGE = 'Request timed out'\n\nexport class GatewayTimeoutError extends DataProxyAPIError {\n  public name = 'GatewayTimeoutError'\n  public code = 'P5009'\n\n  constructor(info: GatewayTimeoutErrorInfo, message = GATEWAY_TIMEOUT_DEFAULT_MESSAGE) {\n    super(message, setRetryable(info, false))\n  }\n}\nsetClassName(GatewayTimeoutError, 'GatewayTimeoutError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface InteractiveTransactionErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport const INTERACTIVE_TRANSACTION_ERROR_DEFAULT_MESSAGE = 'Interactive transaction error'\n\nexport class InteractiveTransactionError extends DataProxyAPIError {\n  public name = 'InteractiveTransactionError'\n  public code = 'P5015'\n\n  constructor(info: InteractiveTransactionErrorInfo, message = INTERACTIVE_TRANSACTION_ERROR_DEFAULT_MESSAGE) {\n    super(message, setRetryable(info, false))\n  }\n}\nsetClassName(InteractiveTransactionError, 'InteractiveTransactionError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface InvalidRequestErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport const INVALID_REQUEST_DEFAULT_MESSAGE = 'Request parameters are invalid'\n\n/**\n * Used when the request validation failed.\n * The difference from `BadRequestError` is the latter is used when the server couldn't understand the request,\n * while this error means the server could understand it but rejected due to some parameters being invalid.\n */\nexport class InvalidRequestError extends DataProxyAPIError {\n  public name = 'InvalidRequestError'\n  public code = 'P5011'\n\n  constructor(info: InvalidRequestErrorInfo, message = INVALID_REQUEST_DEFAULT_MESSAGE) {\n    super(message, setRetryable(info, false))\n  }\n}\nsetClassName(InvalidRequestError, 'InvalidRequestError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface NotFoundErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport const NOT_FOUND_DEFAULT_MESSAGE = 'Requested resource does not exist'\n\nexport class NotFoundError extends DataProxyAPIError {\n  public name = 'NotFoundError'\n  public code = 'P5003'\n\n  constructor(info: NotFoundErrorInfo, message = NOT_FOUND_DEFAULT_MESSAGE) {\n    super(message, setRetryable(info, false))\n  }\n}\nsetClassName(NotFoundError, 'NotFoundError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface ServerErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport const SERVER_ERROR_DEFAULT_MESSAGE = 'Unknown server error'\n\nexport class ServerError extends DataProxyAPIError {\n  public name = 'ServerError'\n  public code = 'P5006'\n  public logs?: string[]\n\n  constructor(info: ServerErrorInfo, message?: string, logs?: string[]) {\n    super(message || SERVER_ERROR_DEFAULT_MESSAGE, setRetryable(info, true))\n    this.logs = logs\n  }\n}\nsetClassName(ServerError, 'ServerError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface UnauthorizedErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport const UNAUTHORIZED_DEFAULT_MESSAGE = 'Unauthorized, check your connection string'\n\nexport class UnauthorizedError extends DataProxyAPIError {\n  public name = 'UnauthorizedError'\n  public code = 'P5007'\n\n  constructor(info: UnauthorizedErrorInfo, message = UNAUTHORIZED_DEFAULT_MESSAGE) {\n    super(message, setRetryable(info, false))\n  }\n}\nsetClassName(UnauthorizedError, 'UnauthorizedError')\n","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyAPIErrorInfo } from './DataProxyAPIError'\nimport { DataProxyAPIError } from './DataProxyAPIError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface UsageExceededErrorInfo extends DataProxyAPIErrorInfo {}\n\nexport const USAGE_EXCEEDED_DEFAULT_MESSAGE = 'Usage exceeded, retry again later'\n\nexport class UsageExceededError extends DataProxyAPIError {\n  public name = 'UsageExceededError'\n  public code = 'P5008'\n\n  constructor(info: UsageExceededErrorInfo, message = USAGE_EXCEEDED_DEFAULT_MESSAGE) {\n    super(message, setRetryable(info, true))\n  }\n}\nsetClassName(UsageExceededError, 'UsageExceededError')\n","import { PrismaClientInitializationError } from '../../../../errors/PrismaClientInitializationError'\nimport { PrismaClientKnownRequestError } from '../../../../errors/PrismaClientKnownRequestError'\nimport { BAD_REQUEST_DEFAULT_MESSAGE, BadRequestError } from '../BadRequestError'\nimport type { DataProxyError } from '../DataProxyError'\nimport { HealthcheckTimeoutError } from '../EngineHealthcheckTimeoutError'\nimport { EngineStartupError } from '../EngineStartupError'\nimport { EngineVersionNotSupportedError } from '../EngineVersionNotSupportedError'\nimport { GATEWAY_TIMEOUT_DEFAULT_MESSAGE, GatewayTimeoutError } from '../GatewayTimeoutError'\nimport { InteractiveTransactionError } from '../InteractiveTransactionError'\nimport { InvalidRequestError } from '../InvalidRequestError'\nimport { NOT_FOUND_DEFAULT_MESSAGE, NotFoundError } from '../NotFoundError'\nimport { SchemaMissingError } from '../SchemaMissingError'\nimport { SERVER_ERROR_DEFAULT_MESSAGE, ServerError } from '../ServerError'\nimport { UNAUTHORIZED_DEFAULT_MESSAGE, UnauthorizedError } from '../UnauthorizedError'\nimport { USAGE_EXCEEDED_DEFAULT_MESSAGE, UsageExceededError } from '../UsageExceededError'\n\ntype DataProxyHttpError =\n  | 'InternalDataProxyError'\n  | { EngineNotStarted: { reason: EngineNotStartedReason } }\n  | { InteractiveTransactionMisrouted: { reason: InteractiveTransactionMisroutedReason } }\n  | { InvalidRequestError: { reason: string } }\n\ntype EngineNotStartedReason =\n  | 'SchemaMissing'\n  | 'EngineVersionNotSupported'\n  | { EngineStartupError: { msg: string; logs: string[] } }\n  | { KnownEngineStartupError: { msg: string; error_code: string } }\n  | { HealthcheckTimeout: { logs: string[] } }\n\ntype InteractiveTransactionMisroutedReason = 'IDParseError' | 'NoQueryEngineFoundError' | 'TransactionStartError'\n\ntype QueryEngineError = {\n  is_panic: boolean\n  message: string\n  error_code: string\n}\n\ntype ResponseErrorBody =\n  | { type: 'DataProxyError'; body: DataProxyHttpError }\n  | { type: 'QueryEngineError'; body: QueryEngineError }\n  | { type: 'UnknownJsonError'; body: unknown }\n  | { type: 'UnknownTextError'; body: string }\n  | { type: 'EmptyError' }\n\nasync function getResponseErrorBody(response: Response): Promise<ResponseErrorBody> {\n  let text: string\n\n  try {\n    text = await response.text()\n  } catch {\n    return { type: 'EmptyError' }\n  }\n\n  try {\n    const error = JSON.parse(text)\n\n    if (typeof error === 'string') {\n      switch (error) {\n        case 'InternalDataProxyError':\n          return { type: 'DataProxyError', body: error }\n        default:\n          return { type: 'UnknownTextError', body: error }\n      }\n    }\n\n    if (typeof error === 'object' && error !== null) {\n      if ('is_panic' in error && 'message' in error && 'error_code' in error) {\n        return { type: 'QueryEngineError', body: error }\n      }\n\n      if ('EngineNotStarted' in error || 'InteractiveTransactionMisrouted' in error || 'InvalidRequestError' in error) {\n        const reason = (Object.values(error as object)[0] as any).reason\n        if (typeof reason === 'string' && !['SchemaMissing', 'EngineVersionNotSupported'].includes(reason)) {\n          return { type: 'UnknownJsonError', body: error }\n        }\n        return { type: 'DataProxyError', body: error }\n      }\n    }\n\n    return { type: 'UnknownJsonError', body: error }\n  } catch {\n    return text === '' ? { type: 'EmptyError' } : { type: 'UnknownTextError', body: text }\n  }\n}\n\nexport async function responseToError(response: Response, clientVersion: string): Promise<DataProxyError | undefined> {\n  if (response.ok) return undefined\n\n  const info = { clientVersion, response }\n  const error = await getResponseErrorBody(response)\n\n  if (error.type === 'QueryEngineError') {\n    throw new PrismaClientKnownRequestError(error.body.message, { code: error.body.error_code, clientVersion })\n  }\n\n  if (error.type === 'DataProxyError') {\n    if (error.body === 'InternalDataProxyError') {\n      throw new ServerError(info, 'Internal Data Proxy error')\n    }\n\n    if ('EngineNotStarted' in error.body) {\n      if (error.body.EngineNotStarted.reason === 'SchemaMissing') {\n        return new SchemaMissingError(info)\n      }\n      if (error.body.EngineNotStarted.reason === 'EngineVersionNotSupported') {\n        throw new EngineVersionNotSupportedError(info)\n      }\n      if ('EngineStartupError' in error.body.EngineNotStarted.reason) {\n        const { msg, logs } = error.body.EngineNotStarted.reason.EngineStartupError\n        throw new EngineStartupError(info, msg, logs)\n      }\n      if ('KnownEngineStartupError' in error.body.EngineNotStarted.reason) {\n        const { msg, error_code } = error.body.EngineNotStarted.reason.KnownEngineStartupError\n        throw new PrismaClientInitializationError(msg, clientVersion, error_code)\n      }\n      if ('HealthcheckTimeout' in error.body.EngineNotStarted.reason) {\n        const { logs } = error.body.EngineNotStarted.reason.HealthcheckTimeout\n        throw new HealthcheckTimeoutError(info, logs)\n      }\n    }\n\n    if ('InteractiveTransactionMisrouted' in error.body) {\n      const messageByReason: Record<InteractiveTransactionMisroutedReason, string> = {\n        IDParseError: 'Could not parse interactive transaction ID',\n        NoQueryEngineFoundError: 'Could not find Query Engine for the specified host and transaction ID',\n        TransactionStartError: 'Could not start interactive transaction',\n      }\n      throw new InteractiveTransactionError(info, messageByReason[error.body.InteractiveTransactionMisrouted.reason])\n    }\n\n    if ('InvalidRequestError' in error.body) {\n      throw new InvalidRequestError(info, error.body.InvalidRequestError.reason)\n    }\n  }\n\n  if (response.status === 401 || response.status === 403) {\n    throw new UnauthorizedError(info, buildErrorMessage(UNAUTHORIZED_DEFAULT_MESSAGE, error))\n  }\n\n  if (response.status === 404) {\n    return new NotFoundError(info, buildErrorMessage(NOT_FOUND_DEFAULT_MESSAGE, error))\n  }\n\n  if (response.status === 429) {\n    throw new UsageExceededError(info, buildErrorMessage(USAGE_EXCEEDED_DEFAULT_MESSAGE, error))\n  }\n\n  if (response.status === 504) {\n    throw new GatewayTimeoutError(info, buildErrorMessage(GATEWAY_TIMEOUT_DEFAULT_MESSAGE, error))\n  }\n\n  if (response.status >= 500) {\n    throw new ServerError(info, buildErrorMessage(SERVER_ERROR_DEFAULT_MESSAGE, error))\n  }\n\n  if (response.status >= 400) {\n    throw new BadRequestError(info, buildErrorMessage(BAD_REQUEST_DEFAULT_MESSAGE, error))\n  }\n\n  return undefined\n}\n\nfunction buildErrorMessage(defaultMessage: string, errorBody: ResponseErrorBody): string {\n  if (errorBody.type === 'EmptyError') {\n    return defaultMessage\n  }\n  return `${defaultMessage}: ${JSON.stringify(errorBody)}`\n}\n","const BACKOFF_INTERVAL = 50\n\nexport function backOff(n: number): Promise<number> {\n  const baseDelay = Math.pow(2, n) * BACKOFF_INTERVAL\n  const jitter = Math.ceil(Math.random() * baseDelay) - Math.ceil(baseDelay / 2)\n  const total = baseDelay + jitter\n\n  return new Promise((done) => setTimeout(() => done(total), total))\n}\n","/*\nbtoa version, that correctly handles multibyte strings\nAdapted from https://gist.github.com/jonleighton/958841\nMIT LICENSE\nCopyright 2011 Jon Leighton\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\nconst encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nexport function toBase64(str: string) {\n  const bytes = new TextEncoder().encode(str)\n  let base64 = ''\n  const byteLength = bytes.byteLength\n  const byteRemainder = byteLength % 3\n  const mainLength = byteLength - byteRemainder\n\n  let a: number, b: number, c: number, d: number\n  let chunk: number\n\n  // Main loop deals with bytes in chunks of 3\n  for (let i = 0; i < mainLength; i = i + 3) {\n    // Combine the three bytes into a single integer\n    chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\n\n    // Use bitmasks to extract 6-bit segments from the triplet\n    a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\n    b = (chunk & 258048) >> 12 // 258048   = (2^6 - 1) << 12\n    c = (chunk & 4032) >> 6 // 4032     = (2^6 - 1) << 6\n    d = chunk & 63 // 63       = 2^6 - 1\n\n    // Convert the raw binary segments to the appropriate ASCII encoding\n    base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\n  }\n\n  // Deal with the remaining bytes and padding\n  if (byteRemainder == 1) {\n    chunk = bytes[mainLength]\n\n    a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\n\n    // Set the 4 least significant bits to zero\n    b = (chunk & 3) << 4 // 3   = 2^2 - 1\n\n    base64 += encodings[a] + encodings[b] + '=='\n  } else if (byteRemainder == 2) {\n    chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\n\n    a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\n    b = (chunk & 1008) >> 4 // 1008  = (2^6 - 1) << 4\n\n    // Set the 2 least significant bits to zero\n    c = (chunk & 15) << 2 // 15    = 2^4 - 1\n\n    base64 += encodings[a] + encodings[b] + encodings[c] + '='\n  }\n\n  return base64\n}\n","import { PrismaClientInitializationError } from '../../../errors/PrismaClientInitializationError'\nimport { EngineConfig } from '../..'\n\nexport function checkForbiddenMetrics(engineConfig: EngineConfig) {\n  const isMetricsEnabled = !!engineConfig.generator?.previewFeatures.some((feature) => {\n    return feature.toLowerCase().includes('metrics')\n  })\n\n  if (isMetricsEnabled) {\n    throw new PrismaClientInitializationError(\n      `The \\`metrics\\` preview feature is not yet available with Accelerate.\nPlease remove \\`metrics\\` from the \\`previewFeatures\\` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate`,\n      engineConfig.clientVersion,\n    )\n  }\n}\n","{\n  \"name\": \"@prisma/engines\",\n  \"version\": \"6.16.3\",\n  \"description\": \"This package is intended for Prisma's internal use\",\n  \"main\": \"dist/index.js\",\n  \"types\": \"dist/index.d.ts\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/prisma/prisma.git\",\n    \"directory\": \"packages/engines\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"author\": \"Tim Suchanek <suchanek@prisma.io>\",\n  \"devDependencies\": {\n    \"@swc/core\": \"1.11.5\",\n    \"@swc/jest\": \"0.2.37\",\n    \"@types/jest\": \"29.5.14\",\n    \"@types/node\": \"18.19.76\",\n    \"execa\": \"5.1.1\",\n    \"typescript\": \"5.4.5\",\n    \"vitest\": \"3.2.4\"\n  },\n  \"dependencies\": {\n    \"@prisma/debug\": \"workspace:*\",\n    \"@prisma/engines-version\": \"6.16.1-1.bb420e667c1820a8c05a38023385f6cc7ef8e83a\",\n    \"@prisma/fetch-engine\": \"workspace:*\",\n    \"@prisma/get-platform\": \"workspace:*\"\n  },\n  \"scripts\": {\n    \"dev\": \"DEV=true tsx helpers/build.ts\",\n    \"build\": \"tsx helpers/build.ts\",\n    \"test\": \"vitest run\",\n    \"prepublishOnly\": \"pnpm run build\",\n    \"postinstall\": \"node scripts/postinstall.js\"\n  },\n  \"files\": [\n    \"dist\",\n    \"download\",\n    \"scripts\"\n  ],\n  \"sideEffects\": false\n}","import { setClassName } from '@prisma/internals'\n\nimport type { DataProxyErrorInfo } from './DataProxyError'\nimport { DataProxyError } from './DataProxyError'\nimport { setRetryable } from './utils/setRetryable'\n\nexport interface RequestErrorInfo extends DataProxyErrorInfo {}\n\nexport class RequestError extends DataProxyError {\n  public name = 'RequestError'\n  public code = 'P5010'\n\n  constructor(message: string, info: RequestErrorInfo) {\n    super(`Cannot fetch data from service:\\n${message}`, setRetryable(info, true))\n  }\n}\nsetClassName(RequestError, 'RequestError')\n","import { AccelerateExtensionFetchDecorator } from '../../common/Engine'\nimport { RequestError } from '../errors/NetworkError'\n\n/**\n * `fetch` wrapper that applies the `customDataProxyFetch` override and handles\n * errors to attach error code.\n */\nexport async function request(\n  url: string,\n  options: RequestInit & { clientVersion: string },\n  customFetch: AccelerateExtensionFetchDecorator = (fetch) => fetch,\n): Promise<Response> {\n  const { clientVersion, ...fetchOptions } = options\n  const decoratedFetch = customFetch(fetch) as typeof fetch\n\n  try {\n    return await decoratedFetch(url, fetchOptions)\n  } catch (error) {\n    const message = (error as Error).message ?? 'Unknown error'\n    throw new RequestError(message, { clientVersion, cause: error })\n  }\n}\n","import { Debug } from '@prisma/debug'\nimport { dependencies } from '@prisma/engines/package.json'\n\nimport type { EngineConfig } from '../../common/Engine'\nimport { NotImplementedYetError } from '../errors/NotImplementedYetError'\nimport { request } from './request'\n\nconst semverRegex = /^[1-9][0-9]*\\.[0-9]+\\.[0-9]+$/\nconst debug = Debug('prisma:client:dataproxyEngine')\n\nasync function _getClientVersion(host: string, config: EngineConfig) {\n  const engineVersion = dependencies['@prisma/engines-version']\n  const clientVersion = config.clientVersion ?? 'unknown'\n\n  // Internal override for testing and manual version overrides.\n  // Automated tests should set this to \"0.0.0\" when using mini-proxy.\n  // Edge client does not have access to process.env, so we use globalThis.\n  if (process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION || globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION) {\n    return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION || globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION\n  }\n\n  // for data proxy v2, or accelerate, resolution isn't needed\n  if (host.includes('accelerate') && clientVersion !== '0.0.0' && clientVersion !== 'in-memory') {\n    return clientVersion\n  }\n\n  const [version, suffix] = clientVersion?.split('-') ?? []\n\n  // we expect the version to match the pattern major.minor.patch\n  if (suffix === undefined && semverRegex.test(version)) {\n    return version\n  }\n\n  // if it is an integration or dev version, we resolve its dataproxy\n  // for this we infer the data proxy version from the engine version\n  if (suffix !== undefined || clientVersion === '0.0.0' || clientVersion === 'in-memory') {\n    const [version] = engineVersion.split('-') ?? []\n    const [major, minor, patch] = version.split('.')\n\n    // to ensure that the data proxy exists, we check if it's published\n    // we resolve with the closest or previous version published on npm\n    const pkgURL = prismaPkgURL(`<=${major}.${minor}.${patch}`)\n    const res = await request(pkgURL, { clientVersion })\n\n    if (!res.ok) {\n      throw new Error(\n        `Failed to fetch stable Prisma version, unpkg.com status ${res.status} ${\n          res.statusText\n          // eslint-disable-next-line @typescript-eslint/await-thenable\n        }, response body: ${(await res.text()) || '<empty body>'}`,\n      )\n    }\n\n    // we need to await for edge workers\n    // because it's using the global \"fetch\"\n    // eslint-disable-next-line @typescript-eslint/await-thenable\n    const bodyAsText = await res.text()\n    debug('length of body fetched from unpkg.com', bodyAsText.length)\n\n    let bodyAsJson\n    try {\n      bodyAsJson = JSON.parse(bodyAsText)\n    } catch (e) {\n      console.error('JSON.parse error: body fetched from unpkg.com: ', bodyAsText)\n      throw e\n    }\n\n    return bodyAsJson['version'] as string\n  }\n\n  // nothing matched, meaning that the provided version is invalid\n  throw new NotImplementedYetError('Only `major.minor.patch` versions are supported by Accelerate.', {\n    clientVersion,\n  })\n}\n\n/**\n * Determine the client version to be sent to the DataProxy\n * @param config\n * @returns\n */\nexport async function getClientVersion(host: string, config: EngineConfig) {\n  const version = await _getClientVersion(host, config)\n\n  debug('version', version)\n\n  return version\n}\n\n/**\n * We use unpkg.com to resolve the version of the data proxy. We chose this over\n * registry.npmjs.com because they cache their queries/responses so it is fast.\n * Moreover, unpkg.com is able to support comparison operators like `<=1.0.0`.\n * For us, that means we can provide a version that is too high (not published),\n * and it will be able to resolve to the closest existing (published) version.\n * @param version\n * @returns\n */\nfunction prismaPkgURL(version: string) {\n  return encodeURI(`https://unpkg.com/prisma@${version}/package.json`)\n}\n","import { Debug } from '@prisma/debug'\nimport { TracingHelper } from '@prisma/internals'\n\nimport { PrismaClientKnownRequestError } from '../../errors/PrismaClientKnownRequestError'\nimport { PrismaClientUnknownRequestError } from '../../errors/PrismaClientUnknownRequestError'\nimport { prismaGraphQLToJSError } from '../../errors/utils/prismaGraphQLToJSError'\nimport { getUrlAndApiKey } from '../common/accelerate/getUrlAndApiKey'\nimport { HeaderBuilder } from '../common/accelerate/HeaderBuilder'\nimport type {\n  AccelerateExtensionFetchDecorator,\n  BatchQueryEngineResult,\n  EngineConfig,\n  InteractiveTransactionOptions,\n  RequestBatchOptions,\n  RequestOptions,\n} from '../common/Engine'\nimport { Engine } from '../common/Engine'\nimport type { LogEmitter } from '../common/types/Events'\nimport { JsonQuery } from '../common/types/JsonProtocol'\nimport { Metrics, MetricsOptionsJson, MetricsOptionsPrometheus } from '../common/types/Metrics'\nimport {\n  QueryEngineBatchResult,\n  QueryEngineResult,\n  QueryEngineResultData,\n  QueryEngineResultExtensions,\n} from '../common/types/QueryEngine'\nimport { RequestError } from '../common/types/RequestError'\nimport type * as Tx from '../common/types/Transaction'\nimport { getBatchRequestPayload } from '../common/utils/getBatchRequestPayload'\nimport { DataProxyError } from './errors/DataProxyError'\nimport { ForcedRetryError } from './errors/ForcedRetryError'\nimport { NotImplementedYetError } from './errors/NotImplementedYetError'\nimport { SchemaMissingError } from './errors/SchemaMissingError'\nimport { responseToError } from './errors/utils/responseToError'\nimport { backOff } from './utils/backOff'\nimport { toBase64 } from './utils/base64'\nimport { checkForbiddenMetrics } from './utils/checkForbiddenMetrics'\nimport { dateFromEngineTimestamp } from './utils/EngineTimestamp'\nimport { getClientVersion } from './utils/getClientVersion'\nimport { request } from './utils/request'\n\nconst MAX_RETRIES = 3\n\nconst debug = Debug('prisma:client:dataproxyEngine')\n\ntype DataProxyTxInfoPayload = {\n  endpoint: string\n}\n\ntype DataProxyTxInfo = Tx.InteractiveTransactionInfo<DataProxyTxInfoPayload>\n\ntype RequestInternalOptions = {\n  body: Record<string, unknown>\n  customDataProxyFetch?: AccelerateExtensionFetchDecorator\n  traceparent?: string\n  interactiveTransaction?: InteractiveTransactionOptions<DataProxyTxInfoPayload>\n}\n\ntype StartTransactionResult = {\n  id: string\n  'data-proxy': {\n    endpoint: string\n  }\n  extensions?: QueryEngineResultExtensions\n}\n\ntype CloseTransactionResult = {\n  extensions?: QueryEngineResultExtensions\n}\n\nexport class DataProxyEngine implements Engine<DataProxyTxInfoPayload> {\n  name = 'DataProxyEngine' as const\n\n  private inlineSchema: string\n  readonly inlineSchemaHash: string\n  private inlineDatasources: EngineConfig['inlineDatasources']\n  private config: EngineConfig\n  private logEmitter: LogEmitter\n  private env: { [k in string]?: string }\n\n  private clientVersion: string\n  private engineHash: string\n  private tracingHelper: TracingHelper\n  private remoteClientVersion!: string\n  private host!: string\n  private headerBuilder!: HeaderBuilder\n  private startPromise?: Promise<void>\n  private protocol!: 'http' | 'https'\n\n  constructor(config: EngineConfig) {\n    checkForbiddenMetrics(config)\n\n    this.config = config\n    this.env = config.env\n    // TODO (perf) schema should be uploaded as-is\n    this.inlineSchema = toBase64(config.inlineSchema)\n    this.inlineDatasources = config.inlineDatasources\n    this.inlineSchemaHash = config.inlineSchemaHash\n    this.clientVersion = config.clientVersion\n    this.engineHash = config.engineVersion\n    this.logEmitter = config.logEmitter\n    this.tracingHelper = config.tracingHelper\n  }\n\n  apiKey(): string {\n    return this.headerBuilder.apiKey\n  }\n\n  // The version is the engine hash\n  // that we expect to have on the remote QE\n  version() {\n    return this.engineHash\n  }\n\n  /**\n   * This is not a real \"start\" method, but rather a deferred initialization. We\n   * will only parse the URL on the first request to match the behavior of other\n   * engines, they will only throw errors on their very first request. This is\n   * needed in case the URL is misconfigured.\n   */\n  async start() {\n    if (this.startPromise !== undefined) {\n      await this.startPromise\n    }\n\n    this.startPromise = (async () => {\n      const { apiKey, url } = this.getURLAndAPIKey()\n\n      this.host = url.host\n      this.protocol = url.protocol\n      this.headerBuilder = new HeaderBuilder({\n        apiKey,\n        tracingHelper: this.tracingHelper,\n        logLevel: this.config.logLevel ?? 'error',\n        logQueries: this.config.logQueries,\n        engineHash: this.engineHash,\n      })\n\n      this.remoteClientVersion = await getClientVersion(this.host, this.config)\n\n      debug('host', this.host)\n      debug('protocol', this.protocol)\n    })()\n\n    await this.startPromise\n  }\n\n  async stop() {}\n\n  private propagateResponseExtensions(extensions: QueryEngineResultExtensions): void {\n    if (extensions?.logs?.length) {\n      extensions.logs.forEach((log) => {\n        switch (log.level) {\n          case 'debug':\n          case 'trace':\n            debug(log)\n            break\n\n          case 'error':\n          case 'warn':\n          case 'info': {\n            this.logEmitter.emit(log.level, {\n              timestamp: dateFromEngineTimestamp(log.timestamp),\n              message: log.attributes.message ?? '',\n              target: log.target ?? 'BinaryEngine',\n            })\n            break\n          }\n\n          case 'query': {\n            this.logEmitter.emit('query', {\n              query: log.attributes.query ?? '',\n              // first part is in seconds, second is in nanoseconds, we need to convert both to milliseconds\n              timestamp: dateFromEngineTimestamp(log.timestamp),\n              duration: log.attributes.duration_ms ?? 0,\n              params: log.attributes.params ?? '',\n              target: log.target ?? 'BinaryEngine',\n            })\n\n            break\n          }\n\n          default:\n            log.level satisfies never\n        }\n      })\n    }\n\n    if (extensions?.traces?.length) {\n      this.tracingHelper.dispatchEngineSpans(extensions.traces)\n    }\n  }\n\n  onBeforeExit() {\n    throw new Error('\"beforeExit\" hook is not applicable to the remote query engine')\n  }\n\n  private async url(action: string) {\n    await this.start()\n\n    return `${this.protocol}//${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${action}`\n  }\n\n  private async uploadSchema() {\n    const spanOptions = {\n      name: 'schemaUpload',\n      internal: true,\n    }\n\n    return this.tracingHelper.runInChildSpan(spanOptions, async () => {\n      const response = await request(await this.url('schema'), {\n        method: 'PUT',\n        headers: this.headerBuilder.build(),\n        body: this.inlineSchema,\n        clientVersion: this.clientVersion,\n      })\n\n      if (!response.ok) {\n        debug('schema response status', response.status)\n      }\n\n      const error = await responseToError(response, this.clientVersion)\n\n      if (error) {\n        this.logEmitter.emit('warn', {\n          message: `Error while uploading schema: ${error.message}`,\n          timestamp: new Date(),\n          target: '',\n        })\n        throw error\n      } else {\n        this.logEmitter.emit('info', {\n          message: `Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,\n          timestamp: new Date(),\n          target: '',\n        })\n      }\n    })\n  }\n\n  request<T>(\n    query: JsonQuery,\n    { traceparent, interactiveTransaction, customDataProxyFetch }: RequestOptions<DataProxyTxInfoPayload>,\n  ) {\n    return this.requestInternal<T>({\n      body: query,\n      traceparent,\n      interactiveTransaction,\n      customDataProxyFetch,\n    })\n  }\n\n  async requestBatch<T>(\n    queries: JsonQuery[],\n    { traceparent, transaction, customDataProxyFetch }: RequestBatchOptions<DataProxyTxInfoPayload>,\n  ): Promise<BatchQueryEngineResult<T>[]> {\n    const interactiveTransaction = transaction?.kind === 'itx' ? transaction.options : undefined\n\n    const body = getBatchRequestPayload(queries, transaction)\n\n    const batchResult = await this.requestInternal<T, true>({\n      body,\n      customDataProxyFetch,\n      interactiveTransaction,\n      traceparent,\n    })\n\n    return batchResult.map((result) => {\n      if (result.extensions) {\n        this.propagateResponseExtensions(result.extensions)\n      }\n\n      if ('errors' in result) {\n        return this.convertProtocolErrorsToClientError(result.errors)\n      }\n\n      return result\n    })\n  }\n\n  private requestInternal<T, Batch extends boolean = false>({\n    body,\n    traceparent,\n    customDataProxyFetch,\n    interactiveTransaction,\n  }: RequestInternalOptions): Promise<Batch extends true ? QueryEngineResult<T>[] : QueryEngineResultData<T>> {\n    return this.withRetry({\n      actionGerund: 'querying',\n      callback: async ({ logHttpCall }) => {\n        const url = interactiveTransaction\n          ? `${interactiveTransaction.payload.endpoint}/graphql`\n          : await this.url('graphql')\n\n        logHttpCall(url)\n\n        const response = await request(\n          url,\n          {\n            method: 'POST',\n            headers: this.headerBuilder.build({ traceparent, transactionId: interactiveTransaction?.id }),\n            body: JSON.stringify(body),\n            clientVersion: this.clientVersion,\n          },\n          customDataProxyFetch,\n        )\n\n        if (!response.ok) {\n          debug('graphql response status', response.status)\n        }\n\n        await this.handleError(await responseToError(response, this.clientVersion))\n\n        const result = (await response.json()) as Batch extends true ? QueryEngineBatchResult<T> : QueryEngineResult<T>\n\n        if (result.extensions) {\n          this.propagateResponseExtensions(result.extensions)\n        }\n\n        if ('errors' in result) {\n          throw this.convertProtocolErrorsToClientError(result.errors)\n        }\n\n        if ('batchResult' in result) {\n          // TODO: TypeScript 5.8+ should be able to narrow the expected result type correctly,\n          // so this will be assignable (https://github.com/microsoft/TypeScript/pull/56941).\n          // Since these are internal types, we should be able to rely on it once TypeScript 5.8\n          // is released, and change this to just `return result.batchResult`.\n          return result.batchResult as QueryEngineResult<T>[] as Batch extends true\n            ? QueryEngineResult<T>[]\n            : QueryEngineResultData<T>\n        }\n\n        // TODO: TypeScript 5.8+ should be able to narrow the expected result type correctly,\n        // so this will be assignable (https://github.com/microsoft/TypeScript/pull/56941).\n        // Since these are internal types, we should be able to rely on it once TypeScript 5.8\n        // is released, and change this to just `return result`.\n        return result as QueryEngineResultData<T> as Batch extends true\n          ? QueryEngineResult<T>[]\n          : QueryEngineResultData<T>\n      },\n    })\n  }\n\n  /**\n   * Send START, COMMIT, or ROLLBACK to the Query Engine\n   * @param action START, COMMIT, or ROLLBACK\n   * @param headers headers for tracing\n   * @param options to change the default timeouts\n   * @param info transaction information for the QE\n   */\n  transaction(action: 'start', headers: Tx.TransactionHeaders, options: Tx.Options): Promise<DataProxyTxInfo>\n  transaction(action: 'commit', headers: Tx.TransactionHeaders, info: DataProxyTxInfo): Promise<undefined>\n  transaction(action: 'rollback', headers: Tx.TransactionHeaders, info: DataProxyTxInfo): Promise<undefined>\n  async transaction(action: any, headers: Tx.TransactionHeaders, arg?: any) {\n    const actionToGerund = {\n      start: 'starting',\n      commit: 'committing',\n      rollback: 'rolling back',\n    }\n\n    return this.withRetry({\n      actionGerund: `${actionToGerund[action]} transaction`,\n      callback: async ({ logHttpCall }) => {\n        if (action === 'start') {\n          const body = JSON.stringify({\n            max_wait: arg.maxWait,\n            timeout: arg.timeout,\n            isolation_level: arg.isolationLevel,\n          })\n\n          const url = await this.url('transaction/start')\n\n          logHttpCall(url)\n\n          const response = await request(url, {\n            method: 'POST',\n            headers: this.headerBuilder.build({ traceparent: headers.traceparent }),\n            body,\n            clientVersion: this.clientVersion,\n          })\n\n          await this.handleError(await responseToError(response, this.clientVersion))\n\n          const result = (await response.json()) as StartTransactionResult\n\n          const { extensions } = result\n          if (extensions) {\n            this.propagateResponseExtensions(extensions)\n          }\n\n          const id = result.id as string\n          const endpoint = result['data-proxy'].endpoint as string\n\n          return { id, payload: { endpoint } }\n        } else {\n          const url = `${arg.payload.endpoint}/${action}`\n\n          logHttpCall(url)\n\n          const response = await request(url, {\n            method: 'POST',\n            headers: this.headerBuilder.build({ traceparent: headers.traceparent }),\n            clientVersion: this.clientVersion,\n          })\n\n          await this.handleError(await responseToError(response, this.clientVersion))\n\n          const result = (await response.json()) as CloseTransactionResult\n\n          const { extensions } = result\n          if (extensions) {\n            this.propagateResponseExtensions(extensions)\n          }\n\n          return undefined\n        }\n      },\n    })\n  }\n\n  private getURLAndAPIKey() {\n    return getUrlAndApiKey({\n      clientVersion: this.clientVersion,\n      env: this.env,\n      inlineDatasources: this.inlineDatasources,\n      overrideDatasources: this.config.overrideDatasources,\n    })\n  }\n\n  metrics(options: MetricsOptionsJson): Promise<Metrics>\n  metrics(options: MetricsOptionsPrometheus): Promise<string>\n  metrics(): Promise<Metrics> | Promise<string> {\n    throw new NotImplementedYetError('Metrics are not yet supported for Accelerate', {\n      clientVersion: this.clientVersion,\n    })\n  }\n\n  private async withRetry<T>(args: {\n    callback: (api: { logHttpCall: (url: string) => void }) => Promise<T>\n    actionGerund: string\n  }): Promise<T> {\n    for (let attempt = 0; ; attempt++) {\n      const logHttpCall = (url: string) => {\n        this.logEmitter.emit('info', {\n          message: `Calling ${url} (n=${attempt})`,\n          timestamp: new Date(),\n          target: '',\n        })\n      }\n\n      try {\n        return await args.callback({ logHttpCall })\n      } catch (e) {\n        if (!(e instanceof DataProxyError)) throw e\n        if (!e.isRetryable) throw e\n        if (attempt >= MAX_RETRIES) {\n          if (e instanceof ForcedRetryError) {\n            throw e.cause\n          } else {\n            throw e\n          }\n        }\n\n        this.logEmitter.emit('warn', {\n          message: `Attempt ${attempt + 1}/${MAX_RETRIES} failed for ${args.actionGerund}: ${e.message ?? '(unknown)'}`,\n          timestamp: new Date(),\n          target: '',\n        })\n\n        const delay = await backOff(attempt)\n\n        this.logEmitter.emit('warn', {\n          message: `Retrying after ${delay}ms`,\n          timestamp: new Date(),\n          target: '',\n        })\n      }\n    }\n  }\n\n  private async handleError(error: DataProxyError | undefined): Promise<void> {\n    if (error instanceof SchemaMissingError) {\n      await this.uploadSchema()\n      throw new ForcedRetryError({\n        clientVersion: this.clientVersion,\n        cause: error,\n      })\n    } else if (error) {\n      throw error\n    }\n  }\n\n  private convertProtocolErrorsToClientError(\n    errors: RequestError[],\n  ): PrismaClientKnownRequestError | PrismaClientUnknownRequestError {\n    // TODO: handle Rust panics and driver adapter errors correctly. See `LibraryEngine#buildQueryError`.\n    if (errors.length === 1) {\n      return prismaGraphQLToJSError(errors[0], this.config.clientVersion, this.config.activeProvider!)\n    } else {\n      return new PrismaClientUnknownRequestError(JSON.stringify(errors), {\n        clientVersion: this.config.clientVersion,\n      })\n    }\n  }\n\n  applyPendingMigrations(): Promise<void> {\n    throw new Error('Method not implemented.')\n  }\n}\n","import { TransactionOptions } from '../Engine'\n\nexport function getInteractiveTransactionId(transaction?: TransactionOptions<unknown>): string | undefined {\n  if (transaction?.kind === 'itx') {\n    return transaction.options.id\n  }\n  return undefined\n}\n","import { getPlatformInfo } from '@prisma/get-platform'\nimport { ClientEngineType, handleLibraryLoadingErrors } from '@prisma/internals'\nimport os from 'os'\nimport path from 'path'\n\nimport { PrismaClientInitializationError } from '../../errors/PrismaClientInitializationError'\nimport { EngineConfig } from '../common/Engine'\nimport { resolveEnginePath } from '../common/resolveEnginePath'\nimport { Library, LibraryLoader } from './types/Library'\n\nconst libraryCacheSymbol = Symbol('PrismaLibraryEngineCache')\n\ntype LibraryCache = Record<string, Library | undefined>\n\ntype GlobalWithCache = typeof globalThis & {\n  [libraryCacheSymbol]?: LibraryCache\n}\n\nfunction getLibraryCache(): LibraryCache {\n  const globalWithCache = globalThis as GlobalWithCache\n  if (globalWithCache[libraryCacheSymbol] === undefined) {\n    globalWithCache[libraryCacheSymbol] = {}\n  }\n  return globalWithCache[libraryCacheSymbol]\n}\n\nexport function load(libraryPath: string): Library {\n  const cache = getLibraryCache()\n\n  if (cache[libraryPath] !== undefined) {\n    return cache[libraryPath]!\n  }\n\n  // `toNamespacedPath` is required for native addons on Windows, but it's a no-op on other systems.\n  // We call it here unconditionally just like `.node` CommonJS loader in Node.js does.\n  const fullLibraryPath = path.toNamespacedPath(libraryPath)\n  const libraryModule = { exports: {} as Library }\n\n  let flags = 0\n\n  if (process.platform !== 'win32') {\n    // Add RTLD_LAZY and RTLD_DEEPBIND on Unix.\n    //\n    // RTLD_LAZY: this is what Node.js uses by default on all Unix-like systems\n    // if no flags were passed to dlopen from JavaScript side.\n    //\n    // RTLD_DEEPBIND: this is not a part of POSIX standard but a widely\n    // supported extension. It prevents issues when we dynamically link to\n    // system OpenSSL on Linux but the dynamic linker resolves the symbols from\n    // the Node.js binary instead.\n    //\n    // @ts-expect-error TODO: typings don't define dlopen -- needs to be fixed upstream\n    flags = os.constants.dlopen.RTLD_LAZY | os.constants.dlopen.RTLD_DEEPBIND\n  }\n\n  // @ts-expect-error TODO: typings don't define dlopen -- needs to be fixed upstream\n  process.dlopen(libraryModule, fullLibraryPath, flags)\n\n  cache[libraryPath] = libraryModule.exports\n  return libraryModule.exports\n}\n\nexport const defaultLibraryLoader: LibraryLoader = {\n  async loadLibrary(config: EngineConfig): Promise<Library> {\n    const platformInfo = await getPlatformInfo()\n    const enginePath = await resolveEnginePath(ClientEngineType.Library, config)\n\n    try {\n      return config.tracingHelper.runInChildSpan({ name: 'loadLibrary', internal: true }, () => load(enginePath))\n    } catch (e) {\n      const errorMessage = handleLibraryLoadingErrors({ e: e as Error, platformInfo, id: enginePath })\n\n      throw new PrismaClientInitializationError(errorMessage, config.clientVersion!)\n    }\n  },\n}\n","// this import points directly to ./query_engine_bg.js it is generated with >>>\n// wasm-bindgen --browser. --browser is the leanest and most agnostic option\n// that is also easy to integrate with our bundling.\n// import * as wasmBindgenRuntime from '@prisma/query-engine-wasm/query_engine_bg.js'\nimport { QueryEngineConstructor } from '@prisma/client-common'\n\nimport { getRuntime } from '../../../utils/getRuntime'\nimport { PrismaClientInitializationError } from '../../errors/PrismaClientInitializationError'\nimport { LibraryLoader } from './types/Library'\n\nlet loadedWasmInstance: Promise<QueryEngineConstructor>\nexport const wasmLibraryLoader: LibraryLoader = {\n  async loadLibrary(config) {\n    const { clientVersion, adapter, engineWasm } = config\n\n    if (adapter === undefined) {\n      throw new PrismaClientInitializationError(\n        `The \\`adapter\\` option for \\`PrismaClient\\` is required in this context (${getRuntime().prettyName})`,\n        clientVersion,\n      )\n    }\n\n    if (engineWasm === undefined) {\n      throw new PrismaClientInitializationError('WASM engine was unexpectedly `undefined`', clientVersion)\n    }\n\n    // we only create the instance once for efficiency and also because wasm\n    // bindgen keeps an internal cache of its instance already, when the wasm\n    // engine is loaded more than once it crashes with `unwrap_throw failed`.\n    if (loadedWasmInstance === undefined) {\n      loadedWasmInstance = (async () => {\n        const runtime = await engineWasm.getRuntime()\n        const wasmModule = await engineWasm.getQueryEngineWasmModule()\n\n        if (wasmModule === undefined || wasmModule === null) {\n          throw new PrismaClientInitializationError(\n            'The loaded wasm module was unexpectedly `undefined` or `null` once loaded',\n            clientVersion,\n          )\n        }\n\n        // from https://developers.cloudflare.com/workers/runtime-apis/webassembly/rust/#javascript-plumbing-wasm-bindgen\n        const options = { './query_engine_bg.js': runtime }\n        const instance = new WebAssembly.Instance(wasmModule, options)\n        const wbindgen_start = instance.exports.__wbindgen_start as () => void\n        runtime.__wbg_set_wasm(instance.exports)\n        wbindgen_start()\n        return runtime.QueryEngine\n      })()\n    }\n\n    const QueryEngine = await loadedWasmInstance\n\n    return {\n      debugPanic() {\n        return Promise.reject('{}') // not used\n      },\n      dmmf() {\n        return Promise.resolve('{}') // not used\n      },\n      version() {\n        return { commit: 'unknown', version: 'unknown' } // not used\n      },\n      QueryEngine,\n    }\n  },\n}\n","import { QueryEngineConstructor, QueryEngineInstance, QueryEngineLogLevel } from '@prisma/client-common'\nimport { Debug } from '@prisma/debug'\nimport { bindAdapter, ErrorCapturingSqlDriverAdapter, ErrorRecord, ErrorRegistry } from '@prisma/driver-adapter-utils'\nimport type { BinaryTarget } from '@prisma/get-platform'\nimport { assertNodeAPISupported, binaryTargets, getBinaryTargetForCurrentPlatform } from '@prisma/get-platform'\nimport { assertAlways, EngineTrace, TracingHelper } from '@prisma/internals'\nimport { bold, green, red } from 'kleur/colors'\n\nimport { PrismaClientInitializationError } from '../../errors/PrismaClientInitializationError'\nimport { PrismaClientKnownRequestError } from '../../errors/PrismaClientKnownRequestError'\nimport { PrismaClientRustPanicError } from '../../errors/PrismaClientRustPanicError'\nimport { PrismaClientUnknownRequestError } from '../../errors/PrismaClientUnknownRequestError'\nimport { prismaGraphQLToJSError } from '../../errors/utils/prismaGraphQLToJSError'\nimport type { BatchQueryEngineResult, EngineConfig, RequestBatchOptions, RequestOptions } from '../common/Engine'\nimport { Engine } from '../common/Engine'\nimport { LogEmitter, LogEventType } from '../common/types/Events'\nimport { JsonQuery } from '../common/types/JsonProtocol'\nimport { EngineMetricsOptions, Metrics, MetricsOptionsJson, MetricsOptionsPrometheus } from '../common/types/Metrics'\nimport type {\n  QueryEngineEvent,\n  QueryEnginePanicEvent,\n  QueryEngineQueryEvent,\n  RustRequestError,\n  SyncRustError,\n} from '../common/types/QueryEngine'\nimport { RequestError } from '../common/types/RequestError'\nimport type * as Tx from '../common/types/Transaction'\nimport { getBatchRequestPayload } from '../common/utils/getBatchRequestPayload'\nimport { getErrorMessageWithLink as genericGetErrorMessageWithLink } from '../common/utils/getErrorMessageWithLink'\nimport { getInteractiveTransactionId } from '../common/utils/getInteractiveTransactionId'\nimport { defaultLibraryLoader } from './DefaultLibraryLoader'\nimport { reactNativeLibraryLoader } from './ReactNativeLibraryLoader'\nimport type { Library, LibraryLoader } from './types/Library'\nimport { wasmLibraryLoader } from './WasmLibraryLoader'\n\nconst DRIVER_ADAPTER_EXTERNAL_ERROR = 'P2036'\nconst debug = Debug('prisma:client:libraryEngine')\n\nfunction isQueryEvent(event: QueryEngineEvent): event is QueryEngineQueryEvent {\n  return event['item_type'] === 'query' && 'query' in event\n}\nfunction isPanicEvent(event: QueryEngineEvent): event is QueryEnginePanicEvent {\n  if ('level' in event) {\n    return event.level === 'error' && event['message'] === 'PANIC'\n  } else {\n    return false\n  }\n}\n\nconst knownBinaryTargets: BinaryTarget[] = [...binaryTargets, 'native']\n\nconst MAX_REQUEST_ID = 0xffffffffffffffffn\nlet NEXT_REQUEST_ID = 1n\n\nfunction nextRequestId(): bigint {\n  const requestId = NEXT_REQUEST_ID++\n  if (NEXT_REQUEST_ID > MAX_REQUEST_ID) {\n    NEXT_REQUEST_ID = 1n\n  }\n  return requestId\n}\n\nexport class LibraryEngine implements Engine<undefined> {\n  name = 'LibraryEngine' as const\n  engine?: ReturnType<typeof this.wrapEngine>\n  libraryInstantiationPromise?: Promise<void>\n  libraryStartingPromise?: Promise<void>\n  libraryStoppingPromise?: Promise<void>\n  libraryStarted: boolean\n  executingQueryPromise?: Promise<any>\n  config: EngineConfig\n  QueryEngineConstructor?: QueryEngineConstructor\n  libraryLoader: LibraryLoader\n  library?: Library\n  logEmitter: LogEmitter\n  libQueryEnginePath?: string\n  binaryTarget?: BinaryTarget\n  datasourceOverrides?: Record<string, string>\n  datamodel: string\n  logQueries: boolean\n  logLevel: QueryEngineLogLevel\n  lastQuery?: string\n  loggerRustPanic?: any\n  tracingHelper: TracingHelper\n  adapterPromise: Promise<ErrorCapturingSqlDriverAdapter> | undefined\n\n  versionInfo?: {\n    commit: string\n    version: string\n  }\n\n  constructor(config: EngineConfig, libraryLoader?: LibraryLoader) {\n    if (TARGET_BUILD_TYPE === 'react-native') {\n      this.libraryLoader = reactNativeLibraryLoader\n    } else if (TARGET_BUILD_TYPE === 'library') {\n      this.libraryLoader = libraryLoader ?? defaultLibraryLoader\n\n      // this can only be true if PRISMA_CLIENT_FORCE_WASM=true\n      if (config.engineWasm !== undefined) {\n        this.libraryLoader = libraryLoader ?? wasmLibraryLoader\n      }\n    } else if (TARGET_BUILD_TYPE === 'wasm-engine-edge') {\n      this.libraryLoader = libraryLoader ?? wasmLibraryLoader\n    } else {\n      throw new Error(`Invalid TARGET_BUILD_TYPE: ${TARGET_BUILD_TYPE}`)\n    }\n\n    this.config = config\n    this.libraryStarted = false\n    this.logQueries = config.logQueries ?? false\n    this.logLevel = config.logLevel ?? 'error'\n    this.logEmitter = config.logEmitter\n    this.datamodel = config.inlineSchema\n    this.tracingHelper = config.tracingHelper\n\n    if (config.enableDebugLogs) {\n      this.logLevel = 'debug'\n    }\n\n    // compute the datasource override for library engine\n    const dsOverrideName = Object.keys(config.overrideDatasources)[0]\n    const dsOverrideUrl = config.overrideDatasources[dsOverrideName]?.url\n    if (dsOverrideName !== undefined && dsOverrideUrl !== undefined) {\n      this.datasourceOverrides = { [dsOverrideName]: dsOverrideUrl }\n    }\n\n    this.libraryInstantiationPromise = this.instantiateLibrary()\n  }\n\n  private wrapEngine(engine: QueryEngineInstance) {\n    return {\n      applyPendingMigrations: engine.applyPendingMigrations?.bind(engine),\n      commitTransaction: this.withRequestId(engine.commitTransaction.bind(engine)),\n      connect: this.withRequestId(engine.connect.bind(engine)),\n      disconnect: this.withRequestId(engine.disconnect.bind(engine)),\n      metrics: engine.metrics?.bind(engine),\n      query: this.withRequestId(engine.query.bind(engine)),\n      rollbackTransaction: this.withRequestId(engine.rollbackTransaction.bind(engine)),\n      sdlSchema: engine.sdlSchema?.bind(engine),\n      startTransaction: this.withRequestId(engine.startTransaction.bind(engine)),\n      trace: engine.trace.bind(engine),\n      free: engine.free?.bind(engine),\n    }\n  }\n\n  private withRequestId<T extends unknown[], U>(\n    fn: (...args: [...T, string]) => Promise<U>,\n  ): (...args: T) => Promise<U> {\n    return async (...args) => {\n      const requestId = nextRequestId().toString()\n      try {\n        return await fn(...args, requestId)\n      } finally {\n        if (this.tracingHelper.isEnabled()) {\n          const traceJson = await this.engine?.trace(requestId)\n          if (traceJson) {\n            const trace = JSON.parse(traceJson) as EngineTrace\n            this.tracingHelper.dispatchEngineSpans(trace.spans)\n          }\n        }\n      }\n    }\n  }\n\n  async applyPendingMigrations(): Promise<void> {\n    if (TARGET_BUILD_TYPE === 'react-native') {\n      await this.start()\n      await this.engine?.applyPendingMigrations!()\n    } else {\n      throw new Error('Cannot call this method from this type of engine instance')\n    }\n  }\n\n  async transaction(\n    action: 'start',\n    headers: Tx.TransactionHeaders,\n    options: Tx.Options,\n  ): Promise<Tx.InteractiveTransactionInfo<undefined>>\n  async transaction(\n    action: 'commit',\n    headers: Tx.TransactionHeaders,\n    info: Tx.InteractiveTransactionInfo<undefined>,\n  ): Promise<undefined>\n  async transaction(\n    action: 'rollback',\n    headers: Tx.TransactionHeaders,\n    info: Tx.InteractiveTransactionInfo<undefined>,\n  ): Promise<undefined>\n  async transaction(action: any, headers: Tx.TransactionHeaders, arg?: any) {\n    await this.start()\n    const adapter = await this.adapterPromise\n\n    const headerStr = JSON.stringify(headers)\n\n    let result: string | undefined\n    if (action === 'start') {\n      const jsonOptions = JSON.stringify({\n        max_wait: arg.maxWait,\n        timeout: arg.timeout,\n        isolation_level: arg.isolationLevel,\n      })\n\n      result = await this.engine?.startTransaction(jsonOptions, headerStr)\n    } else if (action === 'commit') {\n      result = await this.engine?.commitTransaction(arg.id, headerStr)\n    } else if (action === 'rollback') {\n      result = await this.engine?.rollbackTransaction(arg.id, headerStr)\n    }\n\n    const response = this.parseEngineResponse<{ [K: string]: unknown }>(result)\n\n    if (isUserFacingError(response)) {\n      const externalError = this.getExternalAdapterError(response, adapter?.errorRegistry)\n      if (externalError) {\n        throw externalError.error\n      }\n      throw new PrismaClientKnownRequestError(response.message, {\n        code: response.error_code as string,\n        clientVersion: this.config.clientVersion as string,\n        meta: response.meta,\n      })\n    } else if (typeof response.message === 'string') {\n      throw new PrismaClientUnknownRequestError(response.message, {\n        clientVersion: this.config.clientVersion!,\n      })\n    }\n\n    return response as Tx.InteractiveTransactionInfo<undefined> | undefined\n  }\n\n  private async instantiateLibrary(): Promise<void> {\n    debug('internalSetup')\n    if (this.libraryInstantiationPromise) {\n      return this.libraryInstantiationPromise\n    }\n\n    if (TARGET_BUILD_TYPE === 'library') {\n      assertNodeAPISupported()\n    }\n\n    this.binaryTarget = await this.getCurrentBinaryTarget()\n\n    await this.tracingHelper.runInChildSpan('load_engine', () => this.loadEngine())\n\n    this.version()\n  }\n\n  private async getCurrentBinaryTarget() {\n    if (TARGET_BUILD_TYPE === 'library') {\n      if (this.binaryTarget) return this.binaryTarget\n      const binaryTarget = await this.tracingHelper.runInChildSpan('detect_platform', () =>\n        getBinaryTargetForCurrentPlatform(),\n      )\n      if (!knownBinaryTargets.includes(binaryTarget)) {\n        throw new PrismaClientInitializationError(\n          `Unknown ${red('PRISMA_QUERY_ENGINE_LIBRARY')} ${red(bold(binaryTarget))}. Possible binaryTargets: ${green(\n            knownBinaryTargets.join(', '),\n          )} or a path to the query engine library.\nYou may have to run ${green('prisma generate')} for your changes to take effect.`,\n          this.config.clientVersion!,\n        )\n      }\n\n      return binaryTarget\n    }\n\n    return undefined\n  }\n\n  private parseEngineResponse<T>(response?: string): T {\n    if (!response) {\n      throw new PrismaClientUnknownRequestError(`Response from the Engine was empty`, {\n        clientVersion: this.config.clientVersion!,\n      })\n    }\n\n    try {\n      return JSON.parse(response) as T\n    } catch (err) {\n      throw new PrismaClientUnknownRequestError(`Unable to JSON.parse response from engine`, {\n        clientVersion: this.config.clientVersion!,\n      })\n    }\n  }\n\n  private async loadEngine(): Promise<void> {\n    if (this.engine) {\n      return\n    }\n\n    if (!this.QueryEngineConstructor) {\n      this.library = await this.libraryLoader.loadLibrary(this.config)\n      this.QueryEngineConstructor = this.library.QueryEngine\n    }\n    try {\n      // Using strong reference to `this` inside of log callback will prevent\n      // this instance from being GCed while native engine is alive. At the\n      // same time, `this.engine` field will prevent native instance from\n      // being GCed. Using weak ref helps to avoid this cycle\n      const weakThis = new WeakRef(this)\n\n      if (!this.adapterPromise) {\n        this.adapterPromise = this.config.adapter?.connect()?.then(bindAdapter)\n      }\n      const adapter = await this.adapterPromise\n\n      if (adapter) {\n        debug('Using driver adapter: %O', adapter)\n      }\n\n      this.engine = this.wrapEngine(\n        new this.QueryEngineConstructor(\n          {\n            datamodel: this.datamodel,\n            env: process.env,\n            logQueries: this.config.logQueries ?? false,\n            ignoreEnvVarErrors: true,\n            datasourceOverrides: this.datasourceOverrides ?? {},\n            logLevel: this.logLevel,\n            configDir: this.config.cwd,\n            engineProtocol: 'json',\n            enableTracing: this.tracingHelper.isEnabled(),\n          },\n          (log) => {\n            weakThis.deref()?.logger(log)\n          },\n          adapter,\n        ),\n      )\n    } catch (_e) {\n      const e = _e as Error\n      const error = this.parseInitError(e.message)\n      if (typeof error === 'string') {\n        throw e\n      } else {\n        throw new PrismaClientInitializationError(error.message, this.config.clientVersion!, error.error_code)\n      }\n    }\n  }\n\n  private logger(log: string) {\n    const event = this.parseEngineResponse<QueryEngineEvent | null>(log)\n    if (!event) return\n\n    event.level = event?.level.toLowerCase() ?? 'unknown'\n    if (isQueryEvent(event)) {\n      this.logEmitter.emit('query', {\n        timestamp: new Date(),\n        query: event.query,\n        params: event.params,\n        duration: Number(event.duration_ms),\n        target: event.module_path,\n      })\n    } else if (isPanicEvent(event) && TARGET_BUILD_TYPE !== 'wasm-engine-edge') {\n      // The error built is saved to be thrown later\n      this.loggerRustPanic = new PrismaClientRustPanicError(\n        getErrorMessageWithLink(\n          this,\n          `${event.message}: ${event.reason} in ${event.file}:${event.line}:${event.column}`,\n        ),\n        this.config.clientVersion!,\n      )\n    } else {\n      this.logEmitter.emit(event.level as LogEventType, {\n        timestamp: new Date(),\n        message: event.message,\n        target: event.module_path,\n      })\n    }\n  }\n\n  private parseInitError(str: string): SyncRustError | string {\n    try {\n      const error = JSON.parse(str)\n      return error\n    } catch (e) {\n      //\n    }\n    return str\n  }\n\n  private parseRequestError(str: string): RustRequestError | string {\n    try {\n      const error = JSON.parse(str)\n      return error\n    } catch (e) {\n      //\n    }\n    return str\n  }\n\n  onBeforeExit() {\n    throw new Error(\n      '\"beforeExit\" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.',\n    )\n  }\n\n  async start(): Promise<void> {\n    if (!this.libraryInstantiationPromise) {\n      this.libraryInstantiationPromise = this.instantiateLibrary()\n    }\n    await this.libraryInstantiationPromise\n    await this.libraryStoppingPromise\n\n    if (this.libraryStartingPromise) {\n      debug(`library already starting, this.libraryStarted: ${this.libraryStarted}`)\n      return this.libraryStartingPromise\n    }\n\n    if (this.libraryStarted) {\n      return\n    }\n\n    const startFn = async () => {\n      debug('library starting')\n\n      try {\n        const headers = {\n          traceparent: this.tracingHelper.getTraceParent(),\n        }\n\n        await this.engine?.connect(JSON.stringify(headers))\n\n        this.libraryStarted = true\n\n        if (!this.adapterPromise) {\n          this.adapterPromise = this.config.adapter?.connect()?.then(bindAdapter)\n        }\n        await this.adapterPromise\n\n        debug('library started')\n      } catch (err) {\n        const error = this.parseInitError(err.message as string)\n\n        // The error message thrown by the query engine should be a stringified JSON\n        // if parsing fails then we just reject the error\n        if (typeof error === 'string') {\n          throw err\n        } else {\n          throw new PrismaClientInitializationError(error.message, this.config.clientVersion!, error.error_code)\n        }\n      } finally {\n        this.libraryStartingPromise = undefined\n      }\n    }\n\n    this.libraryStartingPromise = this.tracingHelper.runInChildSpan('connect', startFn)\n\n    return this.libraryStartingPromise\n  }\n\n  async stop(): Promise<void> {\n    await this.libraryInstantiationPromise\n    await this.libraryStartingPromise\n    await this.executingQueryPromise\n\n    if (this.libraryStoppingPromise) {\n      debug('library is already stopping')\n      return this.libraryStoppingPromise\n    }\n\n    if (!this.libraryStarted) {\n      await (await this.adapterPromise)?.dispose()\n      this.adapterPromise = undefined\n      return\n    }\n\n    const stopFn = async () => {\n      await new Promise((r) => setImmediate(r)) // defer to next tick\n\n      debug('library stopping')\n\n      const headers = {\n        traceparent: this.tracingHelper.getTraceParent(),\n      }\n\n      await this.engine?.disconnect(JSON.stringify(headers))\n      // Only the WASM engine has a free method that we need to call to ensure the engine is freed upon disconnect.\n      // Otherwise it causes memory leaks as the WASM engine instance still references this LibraryEngine.\n      if (this.engine?.free) {\n        this.engine.free()\n      }\n      this.engine = undefined\n\n      this.libraryStarted = false\n      this.libraryStoppingPromise = undefined\n      this.libraryInstantiationPromise = undefined\n\n      await (await this.adapterPromise)?.dispose()\n      this.adapterPromise = undefined\n\n      debug('library stopped')\n    }\n\n    this.libraryStoppingPromise = this.tracingHelper.runInChildSpan('disconnect', stopFn)\n\n    return this.libraryStoppingPromise\n  }\n\n  version(): string {\n    this.versionInfo = this.library?.version()\n    return this.versionInfo?.version ?? 'unknown'\n  }\n  /**\n   * Triggers an artificial panic\n   */\n  debugPanic(message?: string): Promise<never> {\n    return this.library?.debugPanic(message) as Promise<never>\n  }\n\n  async request<T>(\n    query: JsonQuery,\n    { traceparent, interactiveTransaction }: RequestOptions<undefined>,\n  ): Promise<{ data: T }> {\n    debug(`sending request, this.libraryStarted: ${this.libraryStarted}`)\n    const headerStr = JSON.stringify({ traceparent }) // object equivalent to http headers for the library\n    const queryStr = JSON.stringify(query)\n\n    try {\n      await this.start()\n      const adapter = await this.adapterPromise\n\n      this.executingQueryPromise = this.engine?.query(queryStr, headerStr, interactiveTransaction?.id)\n\n      this.lastQuery = queryStr\n      const data = this.parseEngineResponse<any>(await this.executingQueryPromise)\n\n      if (data.errors) {\n        if (data.errors.length === 1) {\n          throw this.buildQueryError(data.errors[0], adapter?.errorRegistry)\n        }\n        // this case should not happen, as the query engine only returns one error\n        throw new PrismaClientUnknownRequestError(JSON.stringify(data.errors), {\n          clientVersion: this.config.clientVersion!,\n        })\n      } else if (this.loggerRustPanic) {\n        throw this.loggerRustPanic\n      }\n      return { data }\n    } catch (e: any) {\n      if (e instanceof PrismaClientInitializationError) {\n        throw e\n      }\n      if (e.code === 'GenericFailure' && e.message?.startsWith('PANIC:') && TARGET_BUILD_TYPE !== 'wasm-engine-edge') {\n        throw new PrismaClientRustPanicError(getErrorMessageWithLink(this, e.message), this.config.clientVersion!)\n      }\n      const error = this.parseRequestError(e.message)\n      if (typeof error === 'string') {\n        throw e\n      } else {\n        throw new PrismaClientUnknownRequestError(`${error.message}\\n${error.backtrace}`, {\n          clientVersion: this.config.clientVersion!,\n        })\n      }\n    }\n  }\n\n  async requestBatch<T>(\n    queries: JsonQuery[],\n    { transaction, traceparent }: RequestBatchOptions<undefined>,\n  ): Promise<BatchQueryEngineResult<T>[]> {\n    debug('requestBatch')\n    const request = getBatchRequestPayload(queries, transaction)\n    await this.start()\n    const adapter = await this.adapterPromise\n\n    this.lastQuery = JSON.stringify(request)\n\n    this.executingQueryPromise = this.engine?.query(\n      this.lastQuery,\n      JSON.stringify({ traceparent }),\n      getInteractiveTransactionId(transaction),\n    )\n\n    const result = await this.executingQueryPromise\n    const data = this.parseEngineResponse<any>(result)\n\n    if (data.errors) {\n      if (data.errors.length === 1) {\n        throw this.buildQueryError(data.errors[0], adapter?.errorRegistry)\n      }\n      // this case should not happen, as the query engine only returns one error\n      throw new PrismaClientUnknownRequestError(JSON.stringify(data.errors), {\n        clientVersion: this.config.clientVersion!,\n      })\n    }\n\n    const { batchResult, errors } = data\n    if (Array.isArray(batchResult)) {\n      return batchResult.map((result) => {\n        if (result.errors && result.errors.length > 0) {\n          return this.loggerRustPanic ?? this.buildQueryError(result.errors[0], adapter?.errorRegistry)\n        }\n        return {\n          data: result,\n        }\n      })\n    } else {\n      if (errors && errors.length === 1) {\n        throw new Error(errors[0].error)\n      }\n      throw new Error(JSON.stringify(data))\n    }\n  }\n\n  private buildQueryError(error: RequestError, registry?: ErrorRegistry) {\n    if (error.user_facing_error.is_panic && TARGET_BUILD_TYPE !== 'wasm-engine-edge') {\n      return new PrismaClientRustPanicError(\n        getErrorMessageWithLink(this, error.user_facing_error.message),\n        this.config.clientVersion!,\n      )\n    }\n\n    const externalError = this.getExternalAdapterError(error.user_facing_error, registry)\n\n    return externalError\n      ? externalError.error\n      : prismaGraphQLToJSError(error, this.config.clientVersion!, this.config.activeProvider!)\n  }\n\n  private getExternalAdapterError(\n    error: RequestError['user_facing_error'],\n    registry?: ErrorRegistry,\n  ): ErrorRecord | undefined {\n    if (error.error_code === DRIVER_ADAPTER_EXTERNAL_ERROR && registry) {\n      const id = error.meta?.id\n      assertAlways(typeof id === 'number', 'Malformed external JS error received from the engine')\n      const errorRecord = registry.consumeError(id)\n      assertAlways(errorRecord, `External error with reported id was not registered`)\n      return errorRecord\n    }\n    return undefined\n  }\n\n  async metrics(options: MetricsOptionsJson): Promise<Metrics>\n  async metrics(options: MetricsOptionsPrometheus): Promise<string>\n  async metrics(options: EngineMetricsOptions): Promise<Metrics | string> {\n    await this.start()\n    // TODO: add `metrics` method stub in c-abi engine and make it non-optional.\n    // The stub should return an error like in WASM so we handle this gracefully.\n    const responseString = await this.engine!.metrics!(JSON.stringify(options))\n    if (options.format === 'prometheus') {\n      return responseString\n    }\n    return this.parseEngineResponse(responseString)\n  }\n}\n\nfunction isUserFacingError(e: unknown): e is RequestError['user_facing_error'] {\n  return typeof e === 'object' && e !== null && e['error_code'] !== undefined\n}\n\nfunction getErrorMessageWithLink(engine: LibraryEngine, title: string) {\n  return genericGetErrorMessageWithLink({\n    binaryTarget: engine.binaryTarget,\n    title,\n    version: engine.config.clientVersion!,\n    engineVersion: engine.versionInfo?.commit,\n    database: engine.config.activeProvider as any,\n    query: engine.lastQuery!,\n  })\n}\n","import type { SqlDriverAdapterFactory } from '@prisma/driver-adapter-utils'\nimport { isPrismaPostgres } from '@prisma/internals'\n\n/**\n * - `copyEngine === false` implies Prisma Accelerate usage\n * - If we detect Prisma Accelerate usage, we want to recommend using `--no-engine` in production.\n * - Driver Adapters should NOT be used with `prisma generate `--no-engine`\n * - Driver Adapters should NOT be imported from `@prisma/client/edge` endpoint\n * - Accelerate should NOT be used with Driver Adapters\n * - Prisma Postgres can be used with either Accelerate or Driver Adapters\n */\n\ntype WarningDiagnostic = { _tag: 'warning'; value: [key: string, message: string, ...args: unknown[]] }\ntype ErrorDiagnostic = { _tag: 'error'; value: string }\n\ntype ValidateEngineInstanceConfigParams = {\n  url?: string\n  adapter?: SqlDriverAdapterFactory\n  copyEngine: boolean\n\n  /**\n   * The type indicates that {@link validateEngineInstanceConfig} only cares about\n   * the {@link targetBuildType} being `edge`. If all other input options are fixed,\n   * changing the value of this param to something else will exhibit no different\n   * validation behavior.\n   */\n  targetBuildType: 'edge' | (string & {}) // typeof TARGET_BUILD_TYPE\n}\n\ntype WithDiagnostics =\n  | {\n      ok: true\n\n      diagnostics: {\n        warnings: WarningDiagnostic[]\n        errors?: never\n      }\n    }\n  | {\n      ok: false\n\n      diagnostics: {\n        warnings: WarningDiagnostic[]\n        errors: [ErrorDiagnostic, ...ErrorDiagnostic[]]\n      }\n    }\n\ntype ValidateEngineInstanceConfigOutput = WithDiagnostics & {\n  isUsing: {\n    accelerate: boolean\n    ppg: boolean\n    driverAdapters: boolean\n  }\n}\n\n/**\n * Validates the engine instance configuration, without side effects.\n * @param url The URL passed to the Prisma Client constructor\n * @param adapter The driver adapter passed to the Prisma Client constructor\n * @param copyEngine Whether the engine was copied. `prisma generate --no-engine` implies `copyEngine: false`\n * @param targetBuildType The target build type\n */\nexport function validateEngineInstanceConfig({\n  url,\n  adapter,\n  copyEngine,\n  targetBuildType,\n}: ValidateEngineInstanceConfigParams): ValidateEngineInstanceConfigOutput {\n  const warnings = [] as WarningDiagnostic[]\n  const errors = [] as ErrorDiagnostic[]\n\n  const pushWarning = (input: WarningDiagnostic['value']) => {\n    warnings.push({ _tag: 'warning', value: input })\n  }\n\n  const pushError = (input: string[]) => {\n    const value = input.join('\\n')\n    errors.push({ _tag: 'error', value })\n  }\n\n  const isUsingPrismaAccelerate = Boolean(url?.startsWith('prisma://'))\n  const isUsingPrismaPostgres = isPrismaPostgres(url)\n  const isUsingDriverAdapters = Boolean(adapter)\n  const isAccelerateUrlScheme = isUsingPrismaAccelerate || isUsingPrismaPostgres\n\n  if (\n    !isUsingDriverAdapters &&\n    copyEngine &&\n    isAccelerateUrlScheme &&\n    targetBuildType !== 'client' &&\n    targetBuildType !== 'wasm-compiler-edge'\n  ) {\n    pushWarning([\n      'recommend--no-engine',\n      'In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)',\n    ])\n  }\n\n  const isAccelerateConfigured = isAccelerateUrlScheme || !copyEngine\n\n  if (isUsingDriverAdapters && (isAccelerateConfigured || targetBuildType === 'edge')) {\n    if (targetBuildType === 'edge') {\n      pushError([\n        `Prisma Client was configured to use the \\`adapter\\` option but it was imported via its \\`/edge\\` endpoint.`,\n        `Please either remove the \\`/edge\\` endpoint or remove the \\`adapter\\` from the Prisma Client constructor.`,\n      ])\n    } else if (isAccelerateUrlScheme) {\n      pushError([\n        `You've provided both a driver adapter and an Accelerate database URL. Driver adapters currently cannot connect to Accelerate.`,\n        `Please provide either a driver adapter with a direct database URL or an Accelerate URL and no driver adapter.`,\n      ])\n    } else if (!copyEngine) {\n      pushError([\n        `Prisma Client was configured to use the \\`adapter\\` option but \\`prisma generate\\` was run with \\`--no-engine\\`.`,\n        `Please run \\`prisma generate\\` without \\`--no-engine\\` to be able to use Prisma Client with the adapter.`,\n      ])\n    }\n  }\n\n  const isUsing = {\n    accelerate: isAccelerateConfigured,\n    ppg: isUsingPrismaPostgres,\n    driverAdapters: isUsingDriverAdapters,\n  }\n\n  function isNonEmptyArray<T>(arr: T[]): arr is [T, ...T[]] {\n    return arr.length > 0\n  }\n\n  if (isNonEmptyArray(errors)) {\n    return {\n      ok: false,\n      diagnostics: {\n        warnings,\n        errors,\n      },\n      isUsing,\n    }\n  }\n\n  return {\n    ok: true,\n    diagnostics: { warnings },\n    isUsing,\n  }\n}\n","import { GetPrismaClientConfig } from '@prisma/client-common'\nimport { ClientEngineType, getClientEngineType, warnOnce } from '@prisma/internals'\n\nimport { BinaryEngine, ClientEngine, DataProxyEngine, Engine, EngineConfig, LibraryEngine } from '../engines'\nimport { AccelerateEngine } from '../engines/accelerate/AccelerateEngine'\nimport { PrismaClientValidationError } from '../errors/PrismaClientValidationError'\nimport { resolveDatasourceUrl } from './resolveDatasourceUrl'\nimport { validateEngineInstanceConfig } from './validateEngineInstanceConfig'\n\n/**\n * Get the engine instance based on the engine type and the target engine type\n * (binary, library, data proxy). If the URL is a prisma:// URL, it will always\n * use the DataProxyEngine. Basically decides which engine to load.\n * @param clientConfig\n * @param engineConfig\n * @returns\n */\nexport function getEngineInstance({ copyEngine = true }: GetPrismaClientConfig, engineConfig: EngineConfig): Engine {\n  let url: string | undefined\n\n  try {\n    url = resolveDatasourceUrl({\n      inlineDatasources: engineConfig.inlineDatasources,\n      overrideDatasources: engineConfig.overrideDatasources,\n      env: { ...engineConfig.env, ...process.env },\n      clientVersion: engineConfig.clientVersion,\n    })\n  } catch {\n    // the error does not matter, but that means we don't have a valid url which\n    // means we can't use the DataProxyEngine and will default to LibraryEngine\n  }\n\n  const { ok, isUsing, diagnostics } = validateEngineInstanceConfig({\n    url,\n    adapter: engineConfig.adapter,\n    copyEngine,\n    targetBuildType: TARGET_BUILD_TYPE,\n  })\n\n  for (const warning of diagnostics.warnings) {\n    warnOnce(...warning.value)\n  }\n\n  if (!ok) {\n    const error = diagnostics.errors[0]\n    throw new PrismaClientValidationError(error.value, { clientVersion: engineConfig.clientVersion })\n  }\n\n  const engineType = getClientEngineType(engineConfig.generator!)\n\n  const libraryEngineConfigured = engineType === ClientEngineType.Library\n  const binaryEngineConfigured = engineType === ClientEngineType.Binary\n  const clientEngineConfigured = engineType === ClientEngineType.Client\n\n  // TODO: one day we may want to completely deprecate `@prisma/client/edge` in favor of wasm build\n  // TODO: After having moved the DataProxyEngine to Accelerate\n  // - Replace DataProxyEngine with AccelerateEngine via `@prisma/extension-accelerate`\n  // - Delete DataProxyEngine and all related files\n  // - Update the DataProxy tests to use the /wasm endpoint, but keep ecosystem-tests as they are\n\n  // When a local driver adapter is configured, the URL from the datasource\n  // block in the Prisma schema is no longer relevant as driver adapters don't\n  // use it. Therefore, a configured driver adapter takes precedence over the\n  // Accelerate or PPg URL in the schema file.\n  const clientEngineUsesRemoteExecutor = (isUsing.accelerate || isUsing.ppg) && !isUsing.driverAdapters\n\n  if (TARGET_BUILD_TYPE === 'react-native') return new LibraryEngine(engineConfig)\n  else if (clientEngineConfigured && TARGET_BUILD_TYPE === 'client')\n    return new ClientEngine(engineConfig, clientEngineUsesRemoteExecutor)\n  else if (clientEngineConfigured && TARGET_BUILD_TYPE === 'wasm-compiler-edge')\n    return new ClientEngine(engineConfig, clientEngineUsesRemoteExecutor)\n  else if (isUsing.accelerate && TARGET_BUILD_TYPE !== 'wasm-engine-edge') return new DataProxyEngine(engineConfig)\n  else if (isUsing.driverAdapters && TARGET_BUILD_TYPE === 'wasm-engine-edge') return new LibraryEngine(engineConfig)\n  else if (libraryEngineConfigured && TARGET_BUILD_TYPE === 'library') return new LibraryEngine(engineConfig)\n  else if (binaryEngineConfigured && TARGET_BUILD_TYPE === 'binary') return new BinaryEngine(engineConfig)\n  else if (isUsing.accelerate && TARGET_BUILD_TYPE === 'wasm-engine-edge') return new AccelerateEngine(engineConfig)\n  // reasonable fallbacks in case the conditions above aren't met, we should still try the correct engine\n  else if (TARGET_BUILD_TYPE === 'edge') return new DataProxyEngine(engineConfig)\n  else if (TARGET_BUILD_TYPE === 'library') return new LibraryEngine(engineConfig)\n  else if (TARGET_BUILD_TYPE === 'binary') return new BinaryEngine(engineConfig)\n  else if (TARGET_BUILD_TYPE === 'client') return new ClientEngine(engineConfig, clientEngineUsesRemoteExecutor)\n  // if either accelerate or wasm library could not be loaded for some reason, we throw an error\n  else if (TARGET_BUILD_TYPE === 'wasm-engine-edge' || TARGET_BUILD_TYPE === 'wasm-compiler-edge') {\n    return new MisconfiguredEngine({ clientVersion: engineConfig.clientVersion }) as Engine\n  }\n\n  return TARGET_BUILD_TYPE satisfies never\n}\n\nclass MisconfiguredEngine {\n  constructor(options: { clientVersion: string }) {\n    return new Proxy(this, {\n      get(_target, _prop) {\n        const message = `In order to run Prisma Client on edge runtime, either:\n- Use Prisma Accelerate: https://pris.ly/d/accelerate\n- Use Driver Adapters: https://pris.ly/d/driver-adapters`\n\n        throw new PrismaClientValidationError(message, options)\n      },\n    })\n  }\n}\n","import { GetPrismaClientConfig } from '@prisma/client-common'\n\ntype Config = Pick<GetPrismaClientConfig, 'generator'>\n\n/**\n * Get preview features from the configuration stored in the generated client.\n */\nexport function getPreviewFeatures({ generator }: Config): string[] {\n  return generator?.previewFeatures ?? []\n}\n","export const rawCommandArgsMapper = (command: object) => ({\n  command,\n})\n","import type { Sql } from 'sql-template-tag'\n\n// Generate something like: SELECT * FROM User WHERE name = @P1 AND email = @P2 ...\nexport const mssqlPreparedStatement = (sql: Sql) => {\n  return sql.strings.reduce((acc, str, idx) => `${acc}@P${idx}${str}`)\n}\n","import Decimal from 'decimal.js'\n\nimport { isDate } from './date'\n\nexport function serializeRawParameters(parameters: any[]): string {\n  try {\n    return serializeRawParametersInternal(parameters, 'fast')\n  } catch (error) {\n    // Got TypeError, try replacing values unsupported by JSON (i.e., BigInts)\n    // with strings inside arrays and objects.\n    return serializeRawParametersInternal(parameters, 'slow')\n  }\n}\n\nfunction serializeRawParametersInternal(parameters: any[], objectSerialization: 'fast' | 'slow'): string {\n  return JSON.stringify(parameters.map((parameter) => encodeParameter(parameter, objectSerialization)))\n}\n\nfunction encodeParameter(parameter: any, objectSerialization: 'fast' | 'slow'): unknown {\n  if (Array.isArray(parameter)) {\n    return parameter.map((item) => encodeParameter(item, objectSerialization))\n  }\n  if (typeof parameter === 'bigint') {\n    return {\n      prisma__type: 'bigint',\n      prisma__value: parameter.toString(),\n    }\n  }\n\n  if (isDate(parameter)) {\n    return {\n      prisma__type: 'date',\n      prisma__value: parameter.toJSON(),\n    }\n  }\n\n  if (Decimal.isDecimal(parameter)) {\n    return {\n      prisma__type: 'decimal',\n      prisma__value: parameter.toJSON(),\n    }\n  }\n\n  if (Buffer.isBuffer(parameter)) {\n    return {\n      prisma__type: 'bytes',\n      prisma__value: parameter.toString('base64'),\n    }\n  }\n\n  if (isArrayBufferLike(parameter)) {\n    return {\n      prisma__type: 'bytes',\n      prisma__value: Buffer.from(parameter).toString('base64'),\n    }\n  }\n\n  if (ArrayBuffer.isView(parameter)) {\n    const { buffer, byteOffset, byteLength } = parameter\n    return {\n      prisma__type: 'bytes',\n      prisma__value: Buffer.from(buffer, byteOffset, byteLength).toString('base64'),\n    }\n  }\n\n  if (typeof parameter === 'object' && objectSerialization === 'slow') {\n    return preprocessObject(parameter)\n  }\n\n  return parameter\n}\n\nfunction isArrayBufferLike(value: any): value is ArrayBufferLike {\n  if (value instanceof ArrayBuffer || value instanceof SharedArrayBuffer) {\n    return true\n  }\n\n  if (typeof value === 'object' && value !== null) {\n    return value[Symbol.toStringTag] === 'ArrayBuffer' || value[Symbol.toStringTag] === 'SharedArrayBuffer'\n  }\n\n  return false\n}\n\nfunction preprocessObject(obj: any): unknown {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj\n  }\n\n  if (typeof obj.toJSON === 'function') {\n    return obj.toJSON()\n  }\n\n  // TODO: map from blaze would've been convenient here to map arrays and objects uniformly,\n  // but importing it in this file causes compilation errors in tsd tests.\n\n  if (Array.isArray(obj)) {\n    return obj.map(preprocessValueInObject)\n  }\n\n  const result = {} as any\n\n  for (const key of Object.keys(obj as object)) {\n    result[key] = preprocessValueInObject(obj[key])\n  }\n\n  return result\n}\n\nfunction preprocessValueInObject(value: any): unknown {\n  if (typeof value === 'bigint') {\n    return value.toString()\n  }\n\n  return preprocessObject(value)\n}\n","import { Debug } from '@prisma/debug'\nimport { Sql } from 'sql-template-tag'\n\nimport { MiddlewareArgsMapper } from '../../getPrismaClient'\nimport { mssqlPreparedStatement } from '../../utils/mssqlPreparedStatement'\nimport { serializeRawParameters } from '../../utils/serializeRawParameters'\nimport { isTypedSql } from '../types/exported'\nimport { RawQueryArgs } from '../types/exported/RawQueryArgs'\n\nconst ALTER_RE = /^(\\s*alter\\s)/i\n\nconst debug = Debug('prisma:client')\n\n// TODO also check/disallow for CREATE, DROP\nexport function checkAlter(activeProvider: string, query: string, values: unknown[], invalidCall: string) {\n  if (activeProvider !== 'postgresql' && activeProvider !== 'cockroachdb') {\n    return\n  }\n  if (values.length > 0 && ALTER_RE.exec(query)) {\n    // See https://github.com/prisma/prisma-client-js/issues/940 for more info\n    throw new Error(`Running ALTER using ${invalidCall} is not supported\nUsing the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.\n\nExample:\n  await prisma.$executeRawUnsafe(\\`ALTER USER prisma WITH PASSWORD '\\${password}'\\`)\n\nMore Information: https://pris.ly/d/execute-raw\n`)\n  }\n}\n\ntype RawQueryArgsMapperInput = {\n  clientMethod: string\n  activeProvider: string\n}\n\nexport const rawQueryArgsMapper =\n  ({ clientMethod, activeProvider }: RawQueryArgsMapperInput) =>\n  (args: RawQueryArgs) => {\n    // TODO Clean up types\n    let queryString = ''\n    let parameters: { values: string; __prismaRawParameters__: true } | undefined\n    if (isTypedSql(args)) {\n      queryString = args.sql\n      parameters = {\n        values: serializeRawParameters(args.values),\n        __prismaRawParameters__: true,\n      }\n    } else if (Array.isArray(args)) {\n      // If this was called as prisma.$executeRaw(<SQL>, [...values]), assume it is a pre-prepared SQL statement, and forward it without any changes\n      const [query, ...values] = args\n      queryString = query\n      parameters = {\n        values: serializeRawParameters(values || []),\n        __prismaRawParameters__: true,\n      }\n    } else {\n      // If this was called as prisma.$executeRaw`<SQL>` try to generate a SQL prepared statement\n      switch (activeProvider) {\n        case 'sqlite':\n        case 'mysql': {\n          queryString = args.sql\n          parameters = {\n            values: serializeRawParameters(args.values),\n            __prismaRawParameters__: true,\n          }\n          break\n        }\n\n        case 'cockroachdb':\n        case 'postgresql':\n        case 'postgres': {\n          queryString = args.text\n\n          parameters = {\n            values: serializeRawParameters(args.values),\n            __prismaRawParameters__: true,\n          }\n          break\n        }\n\n        case 'sqlserver': {\n          queryString = mssqlPreparedStatement(args)\n          parameters = {\n            values: serializeRawParameters(args.values),\n            __prismaRawParameters__: true,\n          }\n          break\n        }\n        default: {\n          throw new Error(`The ${activeProvider} provider does not support ${clientMethod}`)\n        }\n      }\n    }\n\n    if (parameters?.values) {\n      debug(`prisma.${clientMethod}(${queryString}, ${parameters.values})`)\n    } else {\n      debug(`prisma.${clientMethod}(${queryString})`)\n    }\n\n    return { query: queryString, parameters }\n  }\n\ntype MiddlewareRawArgsTemplateString = [string[], ...unknown[]]\ntype MiddlewareRawArgsSql = [Sql]\n\nexport const templateStringMiddlewareArgsMapper: MiddlewareArgsMapper<Sql, MiddlewareRawArgsTemplateString> = {\n  requestArgsToMiddlewareArgs(sql) {\n    return [sql.strings, ...sql.values]\n  },\n\n  middlewareArgsToRequestArgs(requestArgs) {\n    const [strings, ...values] = requestArgs\n    return new Sql(strings, values)\n  },\n}\n\nexport const sqlMiddlewareArgsMapper: MiddlewareArgsMapper<Sql, MiddlewareRawArgsSql> = {\n  requestArgsToMiddlewareArgs(sql) {\n    return [sql]\n  },\n\n  middlewareArgsToRequestArgs(requestArgs) {\n    return requestArgs[0]\n  },\n}\n","import type { PrismaOperationSpec, PrismaPromise, PrismaPromiseTransaction } from './PrismaPromise'\n\nexport type PrismaPromiseCallback = (transaction?: PrismaPromiseTransaction) => Promise<unknown>\n\n/**\n * Creates a [[PrismaPromise]]. It is Prisma's implementation of `Promise` which\n * is essentially a proxy for `Promise`. All the transaction-compatible client\n * methods return one, this allows for pre-preparing queries without executing\n * them until `.then` is called. It's the foundation of Prisma's query batching.\n * @param callback that will be wrapped within our promise implementation\n * @see [[PrismaPromise]]\n * @returns\n */\nexport type PrismaPromiseFactory = <T extends PrismaOperationSpec<unknown>>(\n  callback: PrismaPromiseCallback,\n  op?: T,\n) => PrismaPromise<unknown>\n\n/**\n * Creates a factory, that allows creating PrismaPromises, bound to a specific transactions\n * @param transaction\n * @returns\n */\nexport function createPrismaPromiseFactory(transaction?: PrismaPromiseTransaction): PrismaPromiseFactory {\n  return function createPrismaPromise<TSpec extends PrismaOperationSpec<unknown>>(\n    callback: PrismaPromiseCallback,\n    op?: TSpec,\n  ): PrismaPromise<unknown, TSpec> {\n    let promise: PrismaPromise<unknown> | undefined\n    const _callback = (callbackTransaction = transaction): PrismaPromise<unknown> => {\n      try {\n        // promises cannot be triggered twice after resolving\n        if (callbackTransaction === undefined || callbackTransaction?.kind === 'itx') {\n          return (promise ??= valueToPromise(callback(callbackTransaction)))\n        }\n\n        // but for batch tx we can trigger them again & again\n        return valueToPromise(callback(callbackTransaction))\n      } catch (error) {\n        // if the callback throws, then we reject the promise\n        // and that is because exceptions are not always async\n        return Promise.reject(error) as PrismaPromise<unknown>\n      }\n    }\n\n    return {\n      get spec() {\n        return op!\n      },\n\n      then(onFulfilled, onRejected) {\n        return _callback().then(onFulfilled, onRejected)\n      },\n      catch(onRejected) {\n        return _callback().catch(onRejected)\n      },\n      finally(onFinally) {\n        return _callback().finally(onFinally)\n      },\n\n      requestTransaction(batchTransaction) {\n        const promise = _callback(batchTransaction)\n\n        if (promise.requestTransaction) {\n          // we want to have support for nested promises\n          return promise.requestTransaction(batchTransaction)\n        }\n\n        return promise\n      },\n      [Symbol.toStringTag]: 'PrismaPromise',\n    }\n  }\n}\n\nfunction valueToPromise<T>(thing: T): PrismaPromise<T> {\n  if (typeof thing['then'] === 'function') {\n    return thing as PrismaPromise<T>\n  }\n\n  return Promise.resolve(thing) as PrismaPromise<T>\n}\n","import type { Context } from '@opentelemetry/api'\nimport { EngineSpan, ExtendedSpanOptions, SpanCallback, TracingHelper, version } from '@prisma/internals'\n\nconst majorVersion = version.split('.')[0]\n\nexport const disabledTracingHelper: TracingHelper = {\n  isEnabled() {\n    return false\n  },\n  getTraceParent() {\n    // https://www.w3.org/TR/trace-context/#examples-of-http-traceparent-headers\n    // If traceparent ends with -00 this trace will not be sampled\n    // the query engine needs the `10` for the span and trace id otherwise it does not parse this\n    return `00-10-10-00`\n  },\n\n  dispatchEngineSpans() {},\n\n  getActiveContext() {\n    return undefined\n  },\n\n  runInChildSpan<R>(options: string | ExtendedSpanOptions, callback: SpanCallback<R>): R {\n    return callback()\n  },\n}\n\n/**\n * Tracing helper that can dynamically switch between enabled/disabled states\n * Needed because tracing can be disabled and enabled with the calls to\n * PrismaInstrumentation::disable/enable at any point\n */\nclass DynamicTracingHelper implements TracingHelper {\n  isEnabled(): boolean {\n    return this.getGlobalTracingHelper().isEnabled()\n  }\n  getTraceParent(context: Context) {\n    return this.getGlobalTracingHelper().getTraceParent(context)\n  }\n\n  dispatchEngineSpans(spans: EngineSpan[]) {\n    return this.getGlobalTracingHelper().dispatchEngineSpans(spans)\n  }\n\n  getActiveContext() {\n    return this.getGlobalTracingHelper().getActiveContext()\n  }\n  runInChildSpan<R>(options: string | ExtendedSpanOptions, callback: SpanCallback<R>): R {\n    return this.getGlobalTracingHelper().runInChildSpan(options, callback)\n  }\n\n  private getGlobalTracingHelper(): TracingHelper {\n    // These globals are defined in `@prisma/instrumentation`\n    const versionedPrismaInstrumentationGlobal = globalThis[`V${majorVersion}_PRISMA_INSTRUMENTATION`]\n    const fallbackPrismaInstrumentationGlobal = globalThis.PRISMA_INSTRUMENTATION\n\n    return (\n      versionedPrismaInstrumentationGlobal?.helper ??\n      // TODO(v7): In future major versions, the tracing helper should only be read from the versioned global field.\n      // This is to ensure that instrumentation libraries (including `@prisma/instrumentation`) can register tracing helpers with compatible interfaces for each major version - thus preventing potential crashes in case instrumentation libraries are not yet updated for a new major, allowing for easier migration.\n      // Currently, the versioned helper is preferred and the fallback helper is picked up for backwards compatibility.\n      fallbackPrismaInstrumentationGlobal?.helper ??\n      disabledTracingHelper\n    )\n  }\n}\n\nexport function getTracingHelper(): TracingHelper {\n  return new DynamicTracingHelper()\n}\n","/**\n * Creates an exotic promise that opens after x `await`s.\n * @remarks\n * This is currently used for locking regular transactions.\n * This ensures that all queries are executed at once/batched.\n * Even if middlewares are in use, they'll all execute at once.\n * @param knock the amount of awaits to open the promise\n * @param cb the callback to execute and value to return\n * @returns\n */\nexport function getLockCountPromise<V = void>(knock: number, cb: () => V | void = () => {}) {\n  let resolve: (v: V | void) => void\n  const lock = new Promise<V | void>((res) => (resolve = res))\n\n  return {\n    then(onFulfilled) {\n      if (--knock === 0) resolve(cb())\n\n      return onFulfilled?.(lock as unknown as V | void)\n    },\n  } as PromiseLike<V | void>\n}\n","type LogLevel = 'info' | 'query' | 'warn' | 'error'\ntype LogDefinition = {\n  level: LogLevel\n  emit: 'stdout' | 'event'\n}\n\nexport function getLogLevel(log: LogLevel | Array<LogLevel | LogDefinition>): LogLevel | undefined {\n  if (typeof log === 'string') {\n    return log\n  }\n  return log.reduce<LogLevel | undefined>((acc, curr) => {\n    const currentLevel = typeof curr === 'string' ? curr : curr.level\n    if (currentLevel === 'query') {\n      return acc\n    }\n    if (!acc) {\n      return currentLevel\n    }\n    if (curr === 'info' || acc === 'info') {\n      // info has precedence\n      return 'info'\n    }\n    return currentLevel\n  }, undefined)\n}\n","export interface ErrorWithBatchIndex {\n  batchRequestIdx?: number\n}\n\nexport function hasBatchIndex(value: object): value is Required<ErrorWithBatchIndex> {\n  return typeof value['batchRequestIdx'] === 'number'\n}\n","import { JsonQuery } from '../engines'\n\nexport function getBatchId(query: JsonQuery): string | undefined {\n  if (query.action !== 'findUnique' && query.action !== 'findUniqueOrThrow') {\n    return undefined\n  }\n  const parts: string[] = []\n  if (query.modelName) {\n    parts.push(query.modelName)\n  }\n\n  if (query.query.arguments) {\n    parts.push(buildKeysString(query.query.arguments))\n  }\n  parts.push(buildKeysString(query.query.selection))\n\n  return parts.join('')\n}\n\nfunction buildKeysString(obj: object): string {\n  const keysArray = Object.keys(obj)\n    .sort()\n    .map((key) => {\n      const value = obj[key]\n      if (typeof value === 'object' && value !== null) {\n        return `(${key} ${buildKeysString(value)})`\n      }\n      return key\n    })\n\n  return `(${keysArray.join(' ')})`\n}\n","import { JsonQueryAction } from '../engines'\n\nconst writeMap: Record<JsonQueryAction, boolean> = {\n  aggregate: false,\n  aggregateRaw: false,\n  createMany: true,\n  createManyAndReturn: true,\n  createOne: true,\n  deleteMany: true,\n  deleteOne: true,\n  executeRaw: true,\n  findFirst: false,\n  findFirstOrThrow: false,\n  findMany: false,\n  findRaw: false,\n  findUnique: false,\n  findUniqueOrThrow: false,\n  groupBy: false,\n  queryRaw: false,\n  runCommandRaw: true,\n  updateMany: true,\n  updateManyAndReturn: true,\n  updateOne: true,\n  upsertOne: true,\n}\n\nexport function isWrite(action: JsonQueryAction): boolean {\n  return writeMap[action]\n}\n","interface Job {\n  resolve: (data: any) => void\n  reject: (data: any) => void\n  request: any\n}\n\nexport type DataLoaderOptions<T> = {\n  singleLoader: (request: T) => Promise<any>\n  batchLoader: (request: T[]) => Promise<any[]>\n  batchBy: (request: T) => string | undefined\n  // Specifies the order in which requests in a batch would\n  // be sorted. See Array.prototype.sort callback\n  batchOrder: (requestA: T, requestB: T) => number\n}\n\nexport class DataLoader<T = unknown> {\n  batches: { [key: string]: Job[] }\n  private tickActive = false\n  constructor(private options: DataLoaderOptions<T>) {\n    this.batches = {}\n  }\n\n  request(request: T): Promise<any> {\n    const hash = this.options.batchBy(request)\n    if (!hash) {\n      return this.options.singleLoader(request)\n    }\n    if (!this.batches[hash]) {\n      this.batches[hash] = []\n\n      // make sure, that we only tick once at a time\n      if (!this.tickActive) {\n        this.tickActive = true\n        process.nextTick(() => {\n          this.dispatchBatches()\n          this.tickActive = false\n        })\n      }\n    }\n\n    return new Promise((resolve, reject) => {\n      this.batches[hash].push({\n        request,\n        resolve,\n        reject,\n      })\n    })\n  }\n\n  private dispatchBatches() {\n    for (const key in this.batches) {\n      const batch = this.batches[key]\n      delete this.batches[key]\n\n      // only batch if necessary\n      // this might occur, if there's e.g. only 1 findUnique in the batch\n      if (batch.length === 1) {\n        this.options\n          .singleLoader(batch[0].request)\n          .then((result) => {\n            if (result instanceof Error) {\n              batch[0].reject(result)\n            } else {\n              batch[0].resolve(result)\n            }\n          })\n          .catch((e) => {\n            batch[0].reject(e)\n          })\n      } else {\n        batch.sort((a, b) => this.options.batchOrder(a.request, b.request))\n        this.options\n          .batchLoader(batch.map((j) => j.request))\n          .then((results) => {\n            if (results instanceof Error) {\n              for (let i = 0; i < batch.length; i++) {\n                batch[i].reject(results)\n              }\n            } else {\n              for (let i = 0; i < batch.length; i++) {\n                const value = results[i]\n                if (value instanceof Error) {\n                  batch[i].reject(value)\n                } else {\n                  batch[i].resolve(value)\n                }\n              }\n            }\n          })\n          .catch((e) => {\n            for (let i = 0; i < batch.length; i++) {\n              batch[i].reject(e)\n            }\n          })\n      }\n    }\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'DataLoader'\n  }\n}\n","import type { QueryIntrospectionBuiltinType } from '@prisma/generator'\nimport Decimal from 'decimal.js'\n\nexport type RawResponse = {\n  columns: string[]\n  types: QueryIntrospectionBuiltinType[]\n  rows: unknown[][]\n}\n\nfunction deserializeValue(type: QueryIntrospectionBuiltinType, value: unknown): unknown {\n  if (value === null) {\n    return value\n  }\n\n  switch (type) {\n    case 'bigint':\n      return BigInt(value as string)\n\n    case 'bytes': {\n      const { buffer, byteOffset, byteLength } = Buffer.from(value as string, 'base64')\n      return new Uint8Array(buffer, byteOffset, byteLength)\n    }\n\n    case 'decimal':\n      return new Decimal(value as string)\n\n    case 'datetime':\n    case 'date':\n      return new Date(value as string)\n\n    case 'time':\n      return new Date(`1970-01-01T${value}Z`)\n\n    case 'bigint-array':\n      return (value as unknown[]).map((v: unknown) => deserializeValue('bigint', v))\n    case 'bytes-array':\n      return (value as unknown[]).map((v: unknown) => deserializeValue('bytes', v))\n    case 'decimal-array':\n      return (value as unknown[]).map((v: unknown) => deserializeValue('decimal', v))\n    case 'datetime-array':\n      return (value as unknown[]).map((v: unknown) => deserializeValue('datetime', v))\n    case 'date-array':\n      return (value as unknown[]).map((v: unknown) => deserializeValue('date', v))\n    case 'time-array':\n      return (value as unknown[]).map((v: unknown) => deserializeValue('time', v))\n\n    default:\n      return value\n  }\n}\n\ntype DeserializedResponse = Array<Record<string, unknown>>\n\nexport function deserializeRawResult(response: RawResponse): DeserializedResponse {\n  const deserializedResponse: DeserializedResponse = []\n  // Performance optimization. See https://github.com/brianc/node-postgres/issues/3042\n  const prebuiltEmptyObject = createPrebuiltEmptyResultObject(response)\n\n  for (let i = 0; i < response.rows.length; i++) {\n    const row = response.rows[i]\n    const mappedRow = { ...prebuiltEmptyObject } as Record<string, unknown>\n\n    for (let j = 0; j < row.length; j++) {\n      mappedRow[response.columns[j]] = deserializeValue(response.types[j], row[j])\n    }\n\n    deserializedResponse.push(mappedRow)\n  }\n\n  return deserializedResponse\n}\n\nfunction createPrebuiltEmptyResultObject(response: RawResponse): Record<string, null> {\n  const row = {}\n\n  for (let i = 0; i < response.columns.length; i++) {\n    row[response.columns[i]] = null\n  }\n\n  return row\n}\n","import { Context } from '@opentelemetry/api'\nimport { deserializeJsonResponse } from '@prisma/client-engine-runtime'\nimport { Debug } from '@prisma/debug'\nimport { assertNever } from '@prisma/internals'\nimport stripAnsi from 'strip-ansi'\n\nimport {\n  EngineValidationError,\n  InteractiveTransactionOptions,\n  JsonQuery,\n  LogEmitter,\n  TransactionOptions,\n} from '../runtime/core/engines'\nimport {\n  PrismaClientInitializationError,\n  PrismaClientKnownRequestError,\n  PrismaClientRustPanicError,\n  PrismaClientUnknownRequestError,\n} from '.'\nimport { AccelerateExtensionFetchDecorator } from './core/engines/common/Engine'\nimport { QueryEngineResultData } from './core/engines/common/types/QueryEngine'\nimport { throwValidationException } from './core/errorRendering/throwValidationException'\nimport { hasBatchIndex } from './core/errors/ErrorWithBatchIndex'\nimport { createApplyBatchExtensionsFunction } from './core/extensions/applyQueryExtensions'\nimport { MergedExtensionsList } from './core/extensions/MergedExtensionsList'\nimport { getBatchId } from './core/jsonProtocol/getBatchId'\nimport { isWrite } from './core/jsonProtocol/isWrite'\nimport { GlobalOmitOptions } from './core/jsonProtocol/serializeJsonQuery'\nimport { PrismaPromiseInteractiveTransaction, PrismaPromiseTransaction } from './core/request/PrismaPromise'\nimport { Action, JsArgs } from './core/types/exported/JsApi'\nimport { DataLoader } from './DataLoader'\nimport type { Client, Unpacker } from './getPrismaClient'\nimport { CallSite } from './utils/CallSite'\nimport { createErrorMessageWithContext } from './utils/createErrorMessageWithContext'\nimport { deepGet } from './utils/deep-set'\nimport { deserializeRawResult, RawResponse } from './utils/deserializeRawResults'\n\nconst debug = Debug('prisma:client:request_handler')\n\nexport type RequestParams = {\n  modelName?: string\n  action: Action\n  protocolQuery: JsonQuery\n  dataPath: string[]\n  clientMethod: string\n  callsite?: CallSite\n  transaction?: PrismaPromiseTransaction\n  extensions: MergedExtensionsList\n  args?: any\n  headers?: Record<string, string>\n  unpacker?: Unpacker\n  otelParentCtx?: Context\n  otelChildCtx?: Context\n  globalOmit?: GlobalOmitOptions\n  customDataProxyFetch?: AccelerateExtensionFetchDecorator\n}\n\nexport type HandleErrorParams = {\n  args: JsArgs\n  error: any\n  clientMethod: string\n  callsite?: CallSite\n  transaction?: PrismaPromiseTransaction\n  modelName?: string\n  globalOmit?: GlobalOmitOptions\n}\n\nexport class RequestHandler {\n  client: Client\n  dataloader: DataLoader<RequestParams>\n  private logEmitter?: LogEmitter\n\n  constructor(client: Client, logEmitter?: LogEmitter) {\n    this.logEmitter = logEmitter\n    this.client = client\n\n    this.dataloader = new DataLoader({\n      batchLoader: createApplyBatchExtensionsFunction(async ({ requests, customDataProxyFetch }) => {\n        const { transaction, otelParentCtx } = requests[0]\n        const queries = requests.map((r) => r.protocolQuery)\n        const traceparent = this.client._tracingHelper.getTraceParent(otelParentCtx)\n\n        // TODO: pass the child information to QE for it to issue links to queries\n        // const links = requests.map((r) => trace.getSpanContext(r.otelChildCtx!))\n\n        const containsWrite = requests.some((r) => isWrite(r.protocolQuery.action))\n\n        const results = await this.client._engine.requestBatch(queries, {\n          traceparent,\n          transaction: getTransactionOptions(transaction),\n          containsWrite,\n          customDataProxyFetch,\n        })\n\n        return results.map((result, i) => {\n          if (result instanceof Error) {\n            return result\n          }\n\n          try {\n            return this.mapQueryEngineResult(requests[i], result)\n          } catch (error) {\n            return error\n          }\n        })\n      }),\n\n      singleLoader: async (request) => {\n        const interactiveTransaction =\n          request.transaction?.kind === 'itx' ? getItxTransactionOptions(request.transaction) : undefined\n\n        const response = await this.client._engine.request(request.protocolQuery, {\n          traceparent: this.client._tracingHelper.getTraceParent(),\n          interactiveTransaction,\n          isWrite: isWrite(request.protocolQuery.action),\n          customDataProxyFetch: request.customDataProxyFetch,\n        })\n        return this.mapQueryEngineResult(request, response)\n      },\n\n      batchBy: (request) => {\n        if (request.transaction?.id) {\n          return `transaction-${request.transaction.id}`\n        }\n\n        return getBatchId(request.protocolQuery)\n      },\n\n      batchOrder(requestA, requestB) {\n        if (requestA.transaction?.kind === 'batch' && requestB.transaction?.kind === 'batch') {\n          return requestA.transaction.index - requestB.transaction.index\n        }\n        return 0\n      },\n    })\n  }\n\n  async request(params: RequestParams) {\n    try {\n      return await this.dataloader.request(params)\n    } catch (error) {\n      const { clientMethod, callsite, transaction, args, modelName } = params\n      this.handleAndLogRequestError({\n        error,\n        clientMethod,\n        callsite,\n        transaction,\n        args,\n        modelName,\n        globalOmit: params.globalOmit,\n      })\n    }\n  }\n\n  mapQueryEngineResult({ dataPath, unpacker }: RequestParams, response: QueryEngineResultData<any>) {\n    const data = response?.data\n\n    /**\n     * Unpack\n     */\n    const result = this.unpack(data, dataPath, unpacker)\n    if (process.env.PRISMA_CLIENT_GET_TIME) {\n      return { data: result }\n    }\n    return result\n  }\n\n  /**\n   * Handles the error and logs it, logging the error is done synchronously waiting for the event\n   * handlers to finish.\n   */\n  handleAndLogRequestError(params: HandleErrorParams): never {\n    try {\n      this.handleRequestError(params)\n    } catch (err) {\n      if (this.logEmitter) {\n        this.logEmitter.emit('error', { message: err.message, target: params.clientMethod, timestamp: new Date() })\n      }\n      throw err\n    }\n  }\n\n  handleRequestError({\n    error,\n    clientMethod,\n    callsite,\n    transaction,\n    args,\n    modelName,\n    globalOmit,\n  }: HandleErrorParams): never {\n    debug(error)\n\n    if (isMismatchingBatchIndex(error, transaction)) {\n      // if this is batch error and current request was not it's cause, we don't add\n      // context information to the error: this wasn't a request that caused batch to fail\n      throw error\n    }\n\n    if (error instanceof PrismaClientKnownRequestError && isValidationError(error)) {\n      const validationError = convertValidationError(error.meta as EngineValidationError)\n      throwValidationException({\n        args,\n        errors: [validationError],\n        callsite,\n        errorFormat: this.client._errorFormat,\n        originalMethod: clientMethod,\n        clientVersion: this.client._clientVersion,\n        globalOmit,\n      })\n    }\n\n    let message = error.message\n    if (callsite) {\n      message = createErrorMessageWithContext({\n        callsite,\n        originalMethod: clientMethod,\n        isPanic: error.isPanic,\n        showColors: this.client._errorFormat === 'pretty',\n        message,\n      })\n    }\n\n    message = this.sanitizeMessage(message)\n    // TODO: Do request with callsite instead, so we don't need to rethrow\n    if (error.code) {\n      const meta = modelName ? { modelName, ...error.meta } : error.meta\n      throw new PrismaClientKnownRequestError(message, {\n        code: error.code,\n        clientVersion: this.client._clientVersion,\n        meta,\n        batchRequestIdx: error.batchRequestIdx,\n      })\n    } else if (error.isPanic) {\n      throw new PrismaClientRustPanicError(message, this.client._clientVersion)\n    } else if (error instanceof PrismaClientUnknownRequestError) {\n      throw new PrismaClientUnknownRequestError(message, {\n        clientVersion: this.client._clientVersion,\n        batchRequestIdx: error.batchRequestIdx,\n      })\n    } else if (error instanceof PrismaClientInitializationError) {\n      throw new PrismaClientInitializationError(message, this.client._clientVersion)\n    } else if (error instanceof PrismaClientRustPanicError) {\n      throw new PrismaClientRustPanicError(message, this.client._clientVersion)\n    }\n\n    error.clientVersion = this.client._clientVersion\n\n    throw error\n  }\n\n  sanitizeMessage(message) {\n    if (this.client._errorFormat && this.client._errorFormat !== 'pretty') {\n      return stripAnsi(message)\n    }\n    return message\n  }\n\n  unpack(data: unknown, dataPath: string[], unpacker?: Unpacker) {\n    if (!data) {\n      return data\n    }\n    if (data['data']) {\n      data = data['data']\n    }\n\n    if (!data) {\n      return data\n    }\n    const operation = Object.keys(data)[0]\n    const response = Object.values(data)[0]\n    const pathForGet = dataPath.filter((key) => key !== 'select' && key !== 'include')\n    const extractedResponse = deepGet(response, pathForGet)\n    const deserializedResponse =\n      operation === 'queryRaw'\n        ? deserializeRawResult(extractedResponse as RawResponse)\n        : (deserializeJsonResponse(extractedResponse) as unknown)\n\n    return unpacker ? unpacker(deserializedResponse) : deserializedResponse\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'RequestHandler'\n  }\n}\n\nfunction getTransactionOptions<PayloadType>(\n  transaction?: PrismaPromiseTransaction<PayloadType>,\n): TransactionOptions<PayloadType> | undefined {\n  if (!transaction) {\n    return undefined\n  }\n\n  if (transaction.kind === 'batch') {\n    return {\n      kind: 'batch',\n      options: {\n        isolationLevel: transaction.isolationLevel,\n      },\n    }\n  }\n\n  if (transaction.kind === 'itx') {\n    return {\n      kind: 'itx',\n      options: getItxTransactionOptions(transaction),\n    }\n  }\n\n  assertNever(transaction, 'Unknown transaction kind')\n}\n\nfunction getItxTransactionOptions<PayloadType>(\n  transaction: PrismaPromiseInteractiveTransaction<PayloadType>,\n): InteractiveTransactionOptions<PayloadType> {\n  return {\n    id: transaction.id,\n    payload: transaction.payload,\n  }\n}\n\nfunction isMismatchingBatchIndex(error: any, transaction: PrismaPromiseTransaction | undefined) {\n  return hasBatchIndex(error) && transaction?.kind === 'batch' && error.batchRequestIdx !== transaction.index\n}\n\nfunction isValidationError(error: PrismaClientKnownRequestError) {\n  return (\n    error.code === 'P2009' || // validation error\n    error.code === 'P2012' // required argument missing\n  )\n}\n\n/**\n * Engine validation errors include extra segment for selectionPath - root query field.\n * This function removes it (since it does not exist on js arguments). In case of `Union`\n * error type, removes heading element from selectionPath of nested errors as well.\n * @param error\n * @returns\n */\nfunction convertValidationError(error: EngineValidationError): EngineValidationError {\n  if (error.kind === 'Union') {\n    return {\n      kind: 'Union',\n      errors: error.errors.map(convertValidationError),\n    }\n  }\n\n  if (Array.isArray(error['selectionPath'])) {\n    const [, ...selectionPath] = error['selectionPath']\n\n    return {\n      ...error,\n      selectionPath,\n    } as EngineValidationError\n  }\n\n  return error\n}\n","import { version } from '../../../package.json'\n\nexport const clientVersion = version as string\n","import { GetPrismaClientConfig, RuntimeDataModel, RuntimeModel, uncapitalize } from '@prisma/client-common'\nimport { ClientEngineType, getClientEngineType } from '@prisma/internals'\nimport leven from 'js-levenshtein'\n\nimport { buildArgumentsRenderingTree, renderArgsTree } from '../core/errorRendering/ArgumentsRenderingTree'\nimport { PrismaClientConstructorValidationError } from '../core/errors/PrismaClientConstructorValidationError'\nimport type { ErrorFormat, LogLevel, PrismaClientOptions } from '../getPrismaClient'\n\nconst knownProperties = [\n  'datasources',\n  'datasourceUrl',\n  'errorFormat',\n  'adapter',\n  'log',\n  'transactionOptions',\n  'omit',\n  '__internal',\n]\nconst errorFormats: ErrorFormat[] = ['pretty', 'colorless', 'minimal']\nconst logLevels: LogLevel[] = ['info', 'query', 'warn', 'error']\n\ntype OmitValidationError =\n  | { kind: 'UnknownModel'; modelKey: string }\n  | { kind: 'UnknownField'; modelKey: string; fieldName: string }\n  | { kind: 'RelationInOmit'; modelKey: string; fieldName: string }\n  | { kind: 'InvalidFieldValue'; modelKey: string; fieldName: string }\n\n/**\n * Subset of `GetPrismaClientConfig` which is used during validation.\n * Feel free to allow more properties when necessary but don't forget to add\n * them in the mock config in `validatePrismaClientOptions.test.ts`.\n */\ntype ClientConfig = Pick<GetPrismaClientConfig, 'datasourceNames' | 'generator' | 'runtimeDataModel'>\n\nconst validators: {\n  [K in keyof PrismaClientOptions]-?: (\n    option: PrismaClientOptions[K],\n    config: ClientConfig,\n    dataModel: RuntimeDataModel,\n  ) => void\n} = {\n  datasources: (options, { datasourceNames }) => {\n    if (!options) {\n      return\n    }\n    if (typeof options !== 'object' || Array.isArray(options)) {\n      throw new PrismaClientConstructorValidationError(\n        `Invalid value ${JSON.stringify(options)} for \"datasources\" provided to PrismaClient constructor`,\n      )\n    }\n\n    for (const [key, value] of Object.entries(options)) {\n      if (!datasourceNames.includes(key)) {\n        const didYouMean =\n          getDidYouMean(key, datasourceNames) || ` Available datasources: ${datasourceNames.join(', ')}`\n        throw new PrismaClientConstructorValidationError(\n          `Unknown datasource ${key} provided to PrismaClient constructor.${didYouMean}`,\n        )\n      }\n      if (typeof value !== 'object' || Array.isArray(value)) {\n        throw new PrismaClientConstructorValidationError(\n          `Invalid value ${JSON.stringify(options)} for datasource \"${key}\" provided to PrismaClient constructor.\nIt should have this form: { url: \"CONNECTION_STRING\" }`,\n        )\n      }\n      if (value && typeof value === 'object') {\n        for (const [key1, value1] of Object.entries(value)) {\n          if (key1 !== 'url') {\n            throw new PrismaClientConstructorValidationError(\n              `Invalid value ${JSON.stringify(options)} for datasource \"${key}\" provided to PrismaClient constructor.\nIt should have this form: { url: \"CONNECTION_STRING\" }`,\n            )\n          }\n          if (typeof value1 !== 'string') {\n            throw new PrismaClientConstructorValidationError(\n              `Invalid value ${JSON.stringify(value1)} for datasource \"${key}\" provided to PrismaClient constructor.\nIt should have this form: { url: \"CONNECTION_STRING\" }`,\n            )\n          }\n        }\n      }\n    }\n  },\n  adapter: (adapter, config) => {\n    if (!adapter && getClientEngineType(config.generator) === ClientEngineType.Client) {\n      throw new PrismaClientConstructorValidationError(\n        `Using engine type \"client\" requires a driver adapter to be provided to PrismaClient constructor.`,\n      )\n    }\n\n    if (adapter === null) {\n      return\n    }\n\n    if (adapter === undefined) {\n      throw new PrismaClientConstructorValidationError(\n        `\"adapter\" property must not be undefined, use null to conditionally disable driver adapters.`,\n      )\n    }\n\n    if (getClientEngineType(config.generator) === ClientEngineType.Binary) {\n      throw new PrismaClientConstructorValidationError(\n        `Cannot use a driver adapter with the \"binary\" Query Engine. Please use the \"library\" Query Engine.`,\n      )\n    }\n  },\n  datasourceUrl: (options) => {\n    if (typeof options !== 'undefined' && typeof options !== 'string') {\n      throw new PrismaClientConstructorValidationError(\n        `Invalid value ${JSON.stringify(options)} for \"datasourceUrl\" provided to PrismaClient constructor.\nExpected string or undefined.`,\n      )\n    }\n  },\n  errorFormat: (options) => {\n    if (!options) {\n      return\n    }\n    if (typeof options !== 'string') {\n      throw new PrismaClientConstructorValidationError(\n        `Invalid value ${JSON.stringify(options)} for \"errorFormat\" provided to PrismaClient constructor.`,\n      )\n    }\n    if (!errorFormats.includes(options as ErrorFormat)) {\n      const didYouMean = getDidYouMean(options, errorFormats)\n      throw new PrismaClientConstructorValidationError(\n        `Invalid errorFormat ${options} provided to PrismaClient constructor.${didYouMean}`,\n      )\n    }\n  },\n  log: (options) => {\n    if (!options) {\n      return\n    }\n    if (!Array.isArray(options)) {\n      throw new PrismaClientConstructorValidationError(\n        `Invalid value ${JSON.stringify(options)} for \"log\" provided to PrismaClient constructor.`,\n      )\n    }\n\n    function validateLogLevel(level: any) {\n      if (typeof level === 'string') {\n        if (!logLevels.includes(level as LogLevel)) {\n          const didYouMean = getDidYouMean(level, logLevels)\n          throw new PrismaClientConstructorValidationError(\n            `Invalid log level \"${level}\" provided to PrismaClient constructor.${didYouMean}`,\n          )\n        }\n      }\n    }\n\n    for (const option of options) {\n      validateLogLevel(option)\n\n      const logValidators = {\n        level: validateLogLevel,\n        emit: (value) => {\n          const emits = ['stdout', 'event']\n          if (!emits.includes(value)) {\n            const didYouMean = getDidYouMean(value, emits)\n            throw new PrismaClientConstructorValidationError(\n              `Invalid value ${JSON.stringify(\n                value,\n              )} for \"emit\" in logLevel provided to PrismaClient constructor.${didYouMean}`,\n            )\n          }\n        },\n      }\n\n      if (option && typeof option === 'object') {\n        for (const [key, value] of Object.entries(option)) {\n          if (logValidators[key]) {\n            logValidators[key](value)\n          } else {\n            throw new PrismaClientConstructorValidationError(\n              `Invalid property ${key} for \"log\" provided to PrismaClient constructor`,\n            )\n          }\n        }\n      }\n    }\n  },\n  transactionOptions: (options: any) => {\n    if (!options) {\n      return\n    }\n\n    const maxWait = options.maxWait\n    if (maxWait != null && maxWait <= 0) {\n      throw new PrismaClientConstructorValidationError(\n        `Invalid value ${maxWait} for maxWait in \"transactionOptions\" provided to PrismaClient constructor. maxWait needs to be greater than 0`,\n      )\n    }\n\n    const timeout = options.timeout\n    if (timeout != null && timeout <= 0) {\n      throw new PrismaClientConstructorValidationError(\n        `Invalid value ${timeout} for timeout in \"transactionOptions\" provided to PrismaClient constructor. timeout needs to be greater than 0`,\n      )\n    }\n  },\n  omit: (options: unknown, config) => {\n    if (typeof options !== 'object') {\n      throw new PrismaClientConstructorValidationError(`\"omit\" option is expected to be an object.`)\n    }\n    if (options === null) {\n      throw new PrismaClientConstructorValidationError(`\"omit\" option can not be \\`null\\``)\n    }\n\n    const validationErrors: OmitValidationError[] = []\n    for (const [modelKey, modelConfig] of Object.entries(options)) {\n      const modelOrType = getModelOrTypeByKey(modelKey, config.runtimeDataModel)\n      if (!modelOrType) {\n        validationErrors.push({ kind: 'UnknownModel', modelKey: modelKey })\n        continue\n      }\n      for (const [fieldName, value] of Object.entries(modelConfig)) {\n        const field = modelOrType.fields.find((field) => field.name === fieldName)\n        if (!field) {\n          validationErrors.push({ kind: 'UnknownField', modelKey, fieldName })\n          continue\n        }\n        if (field.relationName) {\n          validationErrors.push({ kind: 'RelationInOmit', modelKey, fieldName })\n          continue\n        }\n        if (typeof value !== 'boolean') {\n          validationErrors.push({ kind: 'InvalidFieldValue', modelKey, fieldName })\n        }\n      }\n    }\n    if (validationErrors.length > 0) {\n      throw new PrismaClientConstructorValidationError(\n        renderOmitValidationErrors(options as Record<string, unknown>, validationErrors),\n      )\n    }\n  },\n  __internal: (value) => {\n    if (!value) {\n      return\n    }\n    const knownKeys = ['debug', 'engine', 'configOverride']\n    if (typeof value !== 'object') {\n      throw new PrismaClientConstructorValidationError(\n        `Invalid value ${JSON.stringify(value)} for \"__internal\" to PrismaClient constructor`,\n      )\n    }\n    for (const [key] of Object.entries(value)) {\n      if (!knownKeys.includes(key)) {\n        const didYouMean = getDidYouMean(key, knownKeys)\n        throw new PrismaClientConstructorValidationError(\n          `Invalid property ${JSON.stringify(key)} for \"__internal\" provided to PrismaClient constructor.${didYouMean}`,\n        )\n      }\n    }\n    // TODO: Add more validation here\n    // but as this is an internal, non user-facing api, it's not urgent\n  },\n}\n\nexport function validatePrismaClientOptions(options: PrismaClientOptions, config: ClientConfig) {\n  for (const [key, value] of Object.entries(options)) {\n    if (!knownProperties.includes(key)) {\n      const didYouMean = getDidYouMean(key, knownProperties)\n      throw new PrismaClientConstructorValidationError(\n        `Unknown property ${key} provided to PrismaClient constructor.${didYouMean}`,\n      )\n    }\n    validators[key](value, config)\n  }\n\n  if (options.datasourceUrl && options.datasources) {\n    throw new PrismaClientConstructorValidationError(\n      'Can not use \"datasourceUrl\" and \"datasources\" options at the same time. Pick one of them',\n    )\n  }\n}\n\nfunction getDidYouMean(str: string, options: string[]): string {\n  if (options.length === 0) {\n    return ''\n  }\n\n  if (typeof str !== 'string') {\n    return ''\n  }\n\n  const alternative = getAlternative(str, options)\n  if (!alternative) {\n    return ''\n  }\n\n  return ` Did you mean \"${alternative}\"?`\n}\n\nfunction getAlternative(str: string, options: string[]): null | string {\n  if (options.length === 0) {\n    return null\n  }\n\n  const optionsWithDistances = options.map((value) => ({\n    value,\n    distance: leven(str, value),\n  }))\n\n  optionsWithDistances.sort((a, b) => {\n    return a.distance < b.distance ? -1 : 1\n  })\n\n  const bestAlternative = optionsWithDistances[0]\n  if (bestAlternative.distance < 3) {\n    return bestAlternative.value\n  }\n\n  return null\n}\n\nfunction getModelOrTypeByKey(modelKey: string, runtimeDataModel: RuntimeDataModel): RuntimeModel | undefined {\n  return findByKey(runtimeDataModel.models, modelKey) ?? findByKey(runtimeDataModel.types, modelKey)\n}\n\nfunction findByKey<T>(map: Record<string, T>, key: string): T | undefined {\n  const foundKey = Object.keys(map).find((mapKey) => uncapitalize(mapKey) === key)\n  if (foundKey) {\n    return map[foundKey]\n  }\n  return undefined\n}\n\nfunction renderOmitValidationErrors(\n  omitConfig: Record<PropertyKey, unknown>,\n  validationErrors: OmitValidationError[],\n): string {\n  const argsTree = buildArgumentsRenderingTree(omitConfig)\n  for (const error of validationErrors) {\n    switch (error.kind) {\n      case 'UnknownModel':\n        argsTree.arguments.getField(error.modelKey)?.markAsError()\n        argsTree.addErrorMessage(() => `Unknown model name: ${error.modelKey}.`)\n        break\n      case 'UnknownField':\n        argsTree.arguments.getDeepField([error.modelKey, error.fieldName])?.markAsError()\n        argsTree.addErrorMessage(() => `Model \"${error.modelKey}\" does not have a field named \"${error.fieldName}\".`)\n        break\n      case 'RelationInOmit':\n        argsTree.arguments.getDeepField([error.modelKey, error.fieldName])?.markAsError()\n        argsTree.addErrorMessage(() => `Relations are already excluded by default and can not be specified in \"omit\".`)\n        break\n      case 'InvalidFieldValue':\n        argsTree.arguments.getDeepFieldValue([error.modelKey, error.fieldName])?.markAsError()\n        argsTree.addErrorMessage(() => `Omit field option value must be a boolean.`)\n        break\n    }\n  }\n  const { message, args } = renderArgsTree(argsTree, 'colorless')\n  return `Error validating \"omit\" option:\\n\\n${args}\\n\\n${message}`\n}\n","import { setClassName } from '@prisma/internals'\n\nexport class PrismaClientConstructorValidationError extends Error {\n  constructor(message: string) {\n    super(message + `\\nRead more at https://pris.ly/d/client-constructor`)\n    this.name = 'PrismaClientConstructorValidationError'\n  }\n  get [Symbol.toStringTag]() {\n    return 'PrismaClientConstructorValidationError'\n  }\n}\nsetClassName(PrismaClientConstructorValidationError, 'PrismaClientConstructorValidationError')\n","import { hasBatchIndex } from '../core/errors/ErrorWithBatchIndex'\n\n/**\n * Waits for result of batch $transaction and picks the best possible error to report if any\n * of the request fails. Best error is determined as follows:\n *\n * - if engine have reported an error without batch request index, then the batch is immediately rejected\n * with this error without waiting for other promises\n * - if engine have reported and index of failed request in the batch and that index matches the position of the\n * particular request in the batch, batch is rejected with that error\n * - if batch request index is reported and it does not match current request position, wait for other requests. If no indices\n * match request positions, reject with the earliest error in the batch\n *\n * @param promises\n * @returns\n */\nexport function waitForBatch<T extends PromiseLike<unknown>[]>(\n  promises: T,\n): Promise<{ [K in keyof T]: Awaited<T[K]> }> {\n  if (promises.length === 0) {\n    return Promise.resolve([] as { [K in keyof T]: Awaited<T[K]> })\n  }\n  return new Promise((resolve, reject) => {\n    const successfulResults = new Array(promises.length) as { [K in keyof T]: Awaited<T[K]> }\n    let bestError: unknown = null\n    let done = false\n    let settledPromisesCount = 0\n\n    const settleOnePromise = () => {\n      if (done) {\n        return\n      }\n      settledPromisesCount++\n      if (settledPromisesCount === promises.length) {\n        done = true\n        if (bestError) {\n          reject(bestError)\n        } else {\n          resolve(successfulResults)\n        }\n      }\n    }\n\n    const immediatelyReject = (error: unknown) => {\n      if (!done) {\n        done = true\n        reject(error)\n      }\n    }\n\n    for (let i = 0; i < promises.length; i++) {\n      promises[i].then(\n        (result) => {\n          successfulResults[i] = result\n          settleOnePromise()\n        },\n        (error) => {\n          if (!hasBatchIndex(error)) {\n            immediatelyReject(error)\n            return\n          }\n\n          if (error.batchRequestIdx === i) {\n            immediatelyReject(error)\n          } else {\n            if (!bestError) {\n              bestError = error\n            }\n            settleOnePromise()\n          }\n        },\n      )\n    }\n  })\n}\n","/**\n * List of properties that won't throw exception on access and return undefined instead\n */\nconst allowList = new Set([\n  'toJSON', // used by JSON.stringify\n  '$$typeof', // used by old React tooling\n  'asymmetricMatch', // used by Jest\n  Symbol.iterator, // used by various JS constructs/methods\n  Symbol.toStringTag, // Used by .toString()\n  Symbol.isConcatSpreadable, // Used by Array#concat,\n  Symbol.toPrimitive, // Used when getting converted to primitive values\n])\n/**\n * Generates more strict variant of an enum which, unlike regular enum,\n * throws on non-existing property access. This can be useful in following situations:\n * - we have an API, that accepts both `undefined` and `SomeEnumType` as an input\n * - enum values are generated dynamically from DMMF.\n *\n * In that case, if using normal enums and no compile-time typechecking, using non-existing property\n * will result in `undefined` value being used, which will be accepted. Using strict enum\n * in this case will help to have a runtime exception, telling you that you are probably doing something wrong.\n *\n * Note: if you need to check for existence of a value in the enum you can still use either\n * `in` operator or `hasOwnProperty` function.\n *\n * @param definition\n * @returns\n */\nexport function makeStrictEnum<T extends Record<PropertyKey, string | number>>(definition: T): T {\n  return new Proxy(definition, {\n    get(target, property) {\n      if (property in target) {\n        return target[property]\n      }\n      if (allowList.has(property)) {\n        return undefined\n      }\n      throw new TypeError(`Invalid enum value: ${String(property)}`)\n    },\n  })\n}\n","import { tryLoadEnvs } from '@prisma/internals'\n\nexport function warnEnvConflicts(envPaths) {\n  tryLoadEnvs(envPaths, { conflictCheck: 'warn' })\n}\n","\n/* !!! This is code generated by Prisma. Do not edit directly. !!!\n/* eslint-disable */\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nconst {\n  PrismaClientKnownRequestError,\n  PrismaClientUnknownRequestError,\n  PrismaClientRustPanicError,\n  PrismaClientInitializationError,\n  PrismaClientValidationError,\n  getPrismaClient,\n  sqltag,\n  empty,\n  join,\n  raw,\n  skip,\n  Decimal,\n  Debug,\n  objectEnumValues,\n  makeStrictEnum,\n  Extensions,\n  warnOnce,\n  defineDmmfProperty,\n  Public,\n  getRuntime,\n  createParam,\n} = require('@prisma/client/runtime/library.js')\n\n\nconst Prisma = {}\n\nexports.Prisma = Prisma\nexports.$Enums = {}\n\n/**\n * Prisma Client JS version: 6.16.2\n * Query Engine version: 1c57fdcd7e44b29b9313256c76699e91c3ac3c43\n */\nPrisma.prismaVersion = {\n  client: \"6.16.2\",\n  engine: \"1c57fdcd7e44b29b9313256c76699e91c3ac3c43\"\n}\n\nPrisma.PrismaClientKnownRequestError = PrismaClientKnownRequestError;\nPrisma.PrismaClientUnknownRequestError = PrismaClientUnknownRequestError\nPrisma.PrismaClientRustPanicError = PrismaClientRustPanicError\nPrisma.PrismaClientInitializationError = PrismaClientInitializationError\nPrisma.PrismaClientValidationError = PrismaClientValidationError\nPrisma.Decimal = Decimal\n\n/**\n * Re-export of sql-template-tag\n */\nPrisma.sql = sqltag\nPrisma.empty = empty\nPrisma.join = join\nPrisma.raw = raw\nPrisma.validator = Public.validator\n\n/**\n* Extensions\n*/\nPrisma.getExtensionContext = Extensions.getExtensionContext\nPrisma.defineExtension = Extensions.defineExtension\n\n/**\n * Shorthand utilities for JSON filtering\n */\nPrisma.DbNull = objectEnumValues.instances.DbNull\nPrisma.JsonNull = objectEnumValues.instances.JsonNull\nPrisma.AnyNull = objectEnumValues.instances.AnyNull\n\nPrisma.NullTypes = {\n  DbNull: objectEnumValues.classes.DbNull,\n  JsonNull: objectEnumValues.classes.JsonNull,\n  AnyNull: objectEnumValues.classes.AnyNull\n}\n\n\n\n\n  const path = require('path')\n\n/**\n * Enums\n */\nexports.Prisma.TransactionIsolationLevel = makeStrictEnum({\n  ReadUncommitted: 'ReadUncommitted',\n  ReadCommitted: 'ReadCommitted',\n  RepeatableRead: 'RepeatableRead',\n  Serializable: 'Serializable'\n});\n\nexports.Prisma.UserScalarFieldEnum = {\n  id: 'id',\n  email: 'email',\n  password: 'password',\n  firstName: 'firstName',\n  lastName: 'lastName',\n  phone: 'phone',\n  role: 'role',\n  isActive: 'isActive',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  merchantId: 'merchantId',\n  outletId: 'outletId',\n  deletedAt: 'deletedAt'\n};\n\nexports.Prisma.MerchantScalarFieldEnum = {\n  id: 'id',\n  name: 'name',\n  email: 'email',\n  phone: 'phone',\n  address: 'address',\n  city: 'city',\n  state: 'state',\n  zipCode: 'zipCode',\n  country: 'country',\n  businessType: 'businessType',\n  taxId: 'taxId',\n  website: 'website',\n  description: 'description',\n  planId: 'planId',\n  subscriptionStatus: 'subscriptionStatus',\n  totalRevenue: 'totalRevenue',\n  lastActiveAt: 'lastActiveAt',\n  isActive: 'isActive',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  pricingConfig: 'pricingConfig',\n  pricingType: 'pricingType'\n};\n\nexports.Prisma.OutletScalarFieldEnum = {\n  id: 'id',\n  name: 'name',\n  address: 'address',\n  description: 'description',\n  isActive: 'isActive',\n  isDefault: 'isDefault',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  merchantId: 'merchantId',\n  phone: 'phone',\n  city: 'city',\n  country: 'country',\n  state: 'state',\n  zipCode: 'zipCode'\n};\n\nexports.Prisma.CategoryScalarFieldEnum = {\n  id: 'id',\n  name: 'name',\n  description: 'description',\n  isActive: 'isActive',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  merchantId: 'merchantId'\n};\n\nexports.Prisma.ProductScalarFieldEnum = {\n  id: 'id',\n  name: 'name',\n  description: 'description',\n  barcode: 'barcode',\n  totalStock: 'totalStock',\n  rentPrice: 'rentPrice',\n  salePrice: 'salePrice',\n  deposit: 'deposit',\n  images: 'images',\n  isActive: 'isActive',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  merchantId: 'merchantId',\n  categoryId: 'categoryId'\n};\n\nexports.Prisma.OutletStockScalarFieldEnum = {\n  id: 'id',\n  stock: 'stock',\n  available: 'available',\n  renting: 'renting',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  productId: 'productId',\n  outletId: 'outletId'\n};\n\nexports.Prisma.CustomerScalarFieldEnum = {\n  id: 'id',\n  firstName: 'firstName',\n  lastName: 'lastName',\n  email: 'email',\n  phone: 'phone',\n  address: 'address',\n  city: 'city',\n  state: 'state',\n  zipCode: 'zipCode',\n  country: 'country',\n  dateOfBirth: 'dateOfBirth',\n  idNumber: 'idNumber',\n  idType: 'idType',\n  notes: 'notes',\n  isActive: 'isActive',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  merchantId: 'merchantId'\n};\n\nexports.Prisma.OrderScalarFieldEnum = {\n  id: 'id',\n  orderNumber: 'orderNumber',\n  orderType: 'orderType',\n  status: 'status',\n  totalAmount: 'totalAmount',\n  depositAmount: 'depositAmount',\n  securityDeposit: 'securityDeposit',\n  damageFee: 'damageFee',\n  lateFee: 'lateFee',\n  discountType: 'discountType',\n  discountValue: 'discountValue',\n  discountAmount: 'discountAmount',\n  pickupPlanAt: 'pickupPlanAt',\n  returnPlanAt: 'returnPlanAt',\n  pickedUpAt: 'pickedUpAt',\n  returnedAt: 'returnedAt',\n  rentalDuration: 'rentalDuration',\n  isReadyToDeliver: 'isReadyToDeliver',\n  collateralType: 'collateralType',\n  collateralDetails: 'collateralDetails',\n  notes: 'notes',\n  pickupNotes: 'pickupNotes',\n  returnNotes: 'returnNotes',\n  damageNotes: 'damageNotes',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  outletId: 'outletId',\n  customerId: 'customerId',\n  createdById: 'createdById'\n};\n\nexports.Prisma.OrderItemScalarFieldEnum = {\n  id: 'id',\n  quantity: 'quantity',\n  unitPrice: 'unitPrice',\n  totalPrice: 'totalPrice',\n  deposit: 'deposit',\n  orderId: 'orderId',\n  productId: 'productId',\n  notes: 'notes',\n  rentalDays: 'rentalDays'\n};\n\nexports.Prisma.PaymentScalarFieldEnum = {\n  id: 'id',\n  amount: 'amount',\n  currency: 'currency',\n  method: 'method',\n  type: 'type',\n  status: 'status',\n  reference: 'reference',\n  transactionId: 'transactionId',\n  invoiceNumber: 'invoiceNumber',\n  description: 'description',\n  notes: 'notes',\n  failureReason: 'failureReason',\n  metadata: 'metadata',\n  processedAt: 'processedAt',\n  processedBy: 'processedBy',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  orderId: 'orderId',\n  subscriptionId: 'subscriptionId',\n  merchantId: 'merchantId'\n};\n\nexports.Prisma.PlanScalarFieldEnum = {\n  id: 'id',\n  name: 'name',\n  description: 'description',\n  basePrice: 'basePrice',\n  currency: 'currency',\n  trialDays: 'trialDays',\n  limits: 'limits',\n  features: 'features',\n  isActive: 'isActive',\n  isPopular: 'isPopular',\n  sortOrder: 'sortOrder',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  deletedAt: 'deletedAt'\n};\n\nexports.Prisma.SubscriptionScalarFieldEnum = {\n  id: 'id',\n  merchantId: 'merchantId',\n  planId: 'planId',\n  status: 'status',\n  currentPeriodStart: 'currentPeriodStart',\n  currentPeriodEnd: 'currentPeriodEnd',\n  trialStart: 'trialStart',\n  trialEnd: 'trialEnd',\n  cancelAtPeriodEnd: 'cancelAtPeriodEnd',\n  canceledAt: 'canceledAt',\n  cancelReason: 'cancelReason',\n  amount: 'amount',\n  currency: 'currency',\n  interval: 'interval',\n  intervalCount: 'intervalCount',\n  period: 'period',\n  discount: 'discount',\n  savings: 'savings',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt'\n};\n\nexports.Prisma.SubscriptionActivityScalarFieldEnum = {\n  id: 'id',\n  subscriptionId: 'subscriptionId',\n  type: 'type',\n  description: 'description',\n  metadata: 'metadata',\n  performedBy: 'performedBy',\n  createdAt: 'createdAt',\n  reason: 'reason'\n};\n\nexports.Prisma.AuditLogScalarFieldEnum = {\n  id: 'id',\n  entityType: 'entityType',\n  entityId: 'entityId',\n  action: 'action',\n  details: 'details',\n  userId: 'userId',\n  ipAddress: 'ipAddress',\n  userAgent: 'userAgent',\n  createdAt: 'createdAt'\n};\n\nexports.Prisma.SortOrder = {\n  asc: 'asc',\n  desc: 'desc'\n};\n\nexports.Prisma.QueryMode = {\n  default: 'default',\n  insensitive: 'insensitive'\n};\n\nexports.Prisma.NullsOrder = {\n  first: 'first',\n  last: 'last'\n};\n\n\nexports.Prisma.ModelName = {\n  User: 'User',\n  Merchant: 'Merchant',\n  Outlet: 'Outlet',\n  Category: 'Category',\n  Product: 'Product',\n  OutletStock: 'OutletStock',\n  Customer: 'Customer',\n  Order: 'Order',\n  OrderItem: 'OrderItem',\n  Payment: 'Payment',\n  Plan: 'Plan',\n  Subscription: 'Subscription',\n  SubscriptionActivity: 'SubscriptionActivity',\n  AuditLog: 'AuditLog'\n};\n/**\n * Create the Client\n */\nconst config = {\n  \"generator\": {\n    \"name\": \"client\",\n    \"provider\": {\n      \"fromEnvVar\": null,\n      \"value\": \"prisma-client-js\"\n    },\n    \"output\": {\n      \"value\": \"/Users/mac/Source-Code/rentalshop-nextjs/node_modules/@prisma/client\",\n      \"fromEnvVar\": null\n    },\n    \"config\": {\n      \"engineType\": \"library\"\n    },\n    \"binaryTargets\": [\n      {\n        \"fromEnvVar\": null,\n        \"value\": \"darwin-arm64\",\n        \"native\": true\n      },\n      {\n        \"fromEnvVar\": null,\n        \"value\": \"debian-openssl-3.0.x\"\n      },\n      {\n        \"fromEnvVar\": null,\n        \"value\": \"linux-musl-openssl-3.0.x\"\n      }\n    ],\n    \"previewFeatures\": [],\n    \"sourceFilePath\": \"/Users/mac/Source-Code/rentalshop-nextjs/prisma/schema.prisma\"\n  },\n  \"relativeEnvPaths\": {\n    \"rootEnvPath\": null,\n    \"schemaEnvPath\": \"../../../.env\"\n  },\n  \"relativePath\": \"../../../prisma\",\n  \"clientVersion\": \"6.16.2\",\n  \"engineVersion\": \"1c57fdcd7e44b29b9313256c76699e91c3ac3c43\",\n  \"datasourceNames\": [\n    \"db\"\n  ],\n  \"activeProvider\": \"postgresql\",\n  \"postinstall\": false,\n  \"inlineDatasources\": {\n    \"db\": {\n      \"url\": {\n        \"fromEnvVar\": \"DATABASE_URL\",\n        \"value\": null\n      }\n    }\n  },\n  \"inlineSchema\": \"generator client {\\n  provider      = \\\"prisma-client-js\\\"\\n  binaryTargets = [\\\"native\\\", \\\"debian-openssl-3.0.x\\\", \\\"linux-musl-openssl-3.0.x\\\"]\\n}\\n\\ndatasource db {\\n  provider = \\\"postgresql\\\"\\n  url      = env(\\\"DATABASE_URL\\\")\\n}\\n\\nmodel User {\\n  id                     Int                    @id @default(autoincrement())\\n  email                  String                 @unique\\n  password               String\\n  firstName              String\\n  lastName               String\\n  phone                  String?\\n  role                   String                 @default(\\\"OUTLET_STAFF\\\")\\n  isActive               Boolean                @default(true)\\n  createdAt              DateTime               @default(now())\\n  updatedAt              DateTime               @updatedAt\\n  merchantId             Int?\\n  outletId               Int?\\n  deletedAt              DateTime?\\n  auditLogs              AuditLog[]\\n  createdOrders          Order[]\\n  subscriptionActivities SubscriptionActivity[]\\n  merchant               Merchant?              @relation(fields: [merchantId], references: [id])\\n  outlet                 Outlet?                @relation(fields: [outletId], references: [id])\\n\\n  @@unique([merchantId, email])\\n  @@unique([merchantId, phone])\\n  @@index([email])\\n  @@index([merchantId])\\n  @@index([outletId])\\n  @@index([deletedAt])\\n}\\n\\nmodel Merchant {\\n  id                 Int           @id @default(autoincrement())\\n  name               String\\n  email              String        @unique\\n  phone              String?\\n  address            String?\\n  city               String?\\n  state              String?\\n  zipCode            String?\\n  country            String?\\n  businessType       String?\\n  taxId              String?\\n  website            String?\\n  description        String?\\n  planId             Int?\\n  subscriptionStatus String        @default(\\\"trial\\\")\\n  totalRevenue       Float         @default(0)\\n  lastActiveAt       DateTime?\\n  isActive           Boolean       @default(true)\\n  createdAt          DateTime      @default(now())\\n  updatedAt          DateTime      @updatedAt\\n  pricingConfig      String?       @default(\\\"{\\\\\\\"businessType\\\\\\\":\\\\\\\"GENERAL\\\\\\\",\\\\\\\"defaultPricingType\\\\\\\":\\\\\\\"FIXED\\\\\\\",\\\\\\\"businessRules\\\\\\\":{\\\\\\\"requireRentalDates\\\\\\\":false,\\\\\\\"showPricingOptions\\\\\\\":false},\\\\\\\"durationLimits\\\\\\\":{\\\\\\\"minDuration\\\\\\\":1,\\\\\\\"maxDuration\\\\\\\":1,\\\\\\\"defaultDuration\\\\\\\":1}}\\\")\\n  pricingType        String?\\n  categories         Category[]\\n  customers          Customer[]\\n  Plan               Plan?         @relation(fields: [planId], references: [id])\\n  outlets            Outlet[]\\n  payments           Payment[]\\n  products           Product[]\\n  subscription       Subscription?\\n  users              User[]\\n\\n  @@index([name])\\n  @@index([email])\\n  @@index([subscriptionStatus])\\n  @@index([planId])\\n}\\n\\nmodel Outlet {\\n  id          Int           @id @default(autoincrement())\\n  name        String\\n  address     String?\\n  description String?\\n  isActive    Boolean       @default(true)\\n  isDefault   Boolean       @default(false)\\n  createdAt   DateTime      @default(now())\\n  updatedAt   DateTime      @updatedAt\\n  merchantId  Int\\n  phone       String?\\n  city        String?\\n  country     String?\\n  state       String?\\n  zipCode     String?\\n  orders      Order[]\\n  merchant    Merchant      @relation(fields: [merchantId], references: [id], onDelete: Cascade)\\n  products    OutletStock[]\\n  users       User[]\\n\\n  @@index([merchantId])\\n  @@index([name])\\n  @@index([isDefault])\\n}\\n\\nmodel Category {\\n  id          Int       @id @default(autoincrement())\\n  name        String\\n  description String?\\n  isActive    Boolean   @default(true)\\n  createdAt   DateTime  @default(now())\\n  updatedAt   DateTime  @updatedAt\\n  merchantId  Int\\n  merchant    Merchant  @relation(fields: [merchantId], references: [id], onDelete: Cascade)\\n  products    Product[]\\n\\n  @@unique([merchantId, name])\\n  @@index([merchantId])\\n}\\n\\nmodel Product {\\n  id          Int           @id @default(autoincrement())\\n  name        String\\n  description String?\\n  barcode     String?       @unique\\n  totalStock  Int           @default(0)\\n  rentPrice   Float\\n  salePrice   Float?\\n  deposit     Float         @default(0)\\n  images      String?\\n  isActive    Boolean       @default(true)\\n  createdAt   DateTime      @default(now())\\n  updatedAt   DateTime      @updatedAt\\n  merchantId  Int\\n  categoryId  Int\\n  orderItems  OrderItem[]\\n  outletStock OutletStock[]\\n  merchant    Merchant      @relation(fields: [merchantId], references: [id], onDelete: Cascade)\\n  category    Category      @relation(fields: [categoryId], references: [id], onDelete: Cascade)\\n\\n  @@index([merchantId])\\n  @@index([categoryId])\\n  @@index([barcode])\\n  @@index([name])\\n}\\n\\nmodel OutletStock {\\n  id        Int      @id @default(autoincrement())\\n  stock     Int      @default(0)\\n  available Int      @default(0)\\n  renting   Int      @default(0)\\n  createdAt DateTime @default(now())\\n  updatedAt DateTime @updatedAt\\n  productId Int\\n  outletId  Int\\n  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)\\n  outlet    Outlet   @relation(fields: [outletId], references: [id], onDelete: Cascade)\\n\\n  @@unique([productId, outletId])\\n  @@index([outletId, available])\\n  @@index([productId])\\n}\\n\\nmodel Customer {\\n  id          Int       @id @default(autoincrement())\\n  firstName   String\\n  lastName    String\\n  email       String?\\n  phone       String\\n  address     String?\\n  city        String?\\n  state       String?\\n  zipCode     String?\\n  country     String?\\n  dateOfBirth DateTime?\\n  idNumber    String?\\n  idType      String?\\n  notes       String?\\n  isActive    Boolean   @default(true)\\n  createdAt   DateTime  @default(now())\\n  updatedAt   DateTime  @updatedAt\\n  merchantId  Int\\n  merchant    Merchant  @relation(fields: [merchantId], references: [id], onDelete: Cascade)\\n  orders      Order[]\\n\\n  @@unique([merchantId, phone])\\n  @@index([merchantId, firstName, lastName])\\n}\\n\\nmodel Order {\\n  id                Int         @id @default(autoincrement())\\n  orderNumber       String      @unique\\n  orderType         String\\n  status            String      @default(\\\"RESERVED\\\")\\n  totalAmount       Float\\n  depositAmount     Float       @default(0)\\n  securityDeposit   Float       @default(0)\\n  damageFee         Float       @default(0)\\n  lateFee           Float       @default(0)\\n  discountType      String?\\n  discountValue     Float       @default(0)\\n  discountAmount    Float       @default(0)\\n  pickupPlanAt      DateTime?\\n  returnPlanAt      DateTime?\\n  pickedUpAt        DateTime?\\n  returnedAt        DateTime?\\n  rentalDuration    Int?\\n  isReadyToDeliver  Boolean     @default(false)\\n  collateralType    String?\\n  collateralDetails String?\\n  notes             String?\\n  pickupNotes       String?\\n  returnNotes       String?\\n  damageNotes       String?\\n  createdAt         DateTime    @default(now())\\n  updatedAt         DateTime    @updatedAt\\n  outletId          Int\\n  customerId        Int?\\n  createdById       Int\\n  customer          Customer?   @relation(fields: [customerId], references: [id])\\n  outlet            Outlet      @relation(fields: [outletId], references: [id])\\n  createdBy         User        @relation(fields: [createdById], references: [id])\\n  orderItems        OrderItem[]\\n  payments          Payment[]\\n\\n  @@index([status, outletId])\\n  @@index([customerId, createdAt(sort: Desc)])\\n  @@index([pickupPlanAt, returnPlanAt])\\n  @@index([orderNumber])\\n  @@index([isReadyToDeliver, outletId])\\n  @@index([createdAt])\\n  @@index([outletId, createdAt])\\n  @@index([orderType, status])\\n  @@index([outletId, status, createdAt])\\n  @@index([createdById, createdAt])\\n  @@index([totalAmount])\\n  @@index([status, orderType, createdAt])\\n}\\n\\nmodel OrderItem {\\n  id         Int     @id @default(autoincrement())\\n  quantity   Int     @default(1)\\n  unitPrice  Float\\n  totalPrice Float\\n  deposit    Float   @default(0)\\n  orderId    Int\\n  productId  Int\\n  notes      String?\\n  rentalDays Int?\\n  product    Product @relation(fields: [productId], references: [id])\\n  order      Order   @relation(fields: [orderId], references: [id], onDelete: Cascade)\\n\\n  @@index([orderId, productId])\\n}\\n\\nmodel Payment {\\n  id             Int           @id @default(autoincrement())\\n  amount         Float\\n  currency       String        @default(\\\"USD\\\")\\n  method         String\\n  type           String\\n  status         String        @default(\\\"PENDING\\\")\\n  reference      String?\\n  transactionId  String?\\n  invoiceNumber  String?\\n  description    String?\\n  notes          String?\\n  failureReason  String?\\n  metadata       String?\\n  processedAt    DateTime?\\n  processedBy    String?\\n  createdAt      DateTime      @default(now())\\n  updatedAt      DateTime      @updatedAt\\n  orderId        Int?\\n  subscriptionId Int?\\n  merchantId     Int?\\n  order          Order?        @relation(fields: [orderId], references: [id], onDelete: Cascade)\\n  subscription   Subscription? @relation(fields: [subscriptionId], references: [id], onDelete: Cascade)\\n  merchant       Merchant?     @relation(fields: [merchantId], references: [id], onDelete: Cascade)\\n\\n  @@index([orderId, status])\\n  @@index([subscriptionId, status])\\n  @@index([merchantId, status])\\n  @@index([status])\\n  @@index([type])\\n  @@index([method])\\n  @@index([currency])\\n}\\n\\nmodel Plan {\\n  id            Int            @id @default(autoincrement())\\n  name          String         @unique\\n  description   String\\n  basePrice     Float\\n  currency      String         @default(\\\"USD\\\")\\n  trialDays     Int            @default(14)\\n  limits        String         @default(\\\"{\\\\\\\"outlets\\\\\\\": 0, \\\\\\\"users\\\\\\\": 0, \\\\\\\"products\\\\\\\": 0, \\\\\\\"customers\\\\\\\": 0}\\\")\\n  features      String         @default(\\\"[]\\\")\\n  isActive      Boolean        @default(true)\\n  isPopular     Boolean        @default(false)\\n  sortOrder     Int            @default(0)\\n  createdAt     DateTime       @default(now())\\n  updatedAt     DateTime       @updatedAt\\n  deletedAt     DateTime?\\n  Merchant      Merchant[]\\n  subscriptions Subscription[]\\n\\n  @@index([isActive])\\n  @@index([sortOrder])\\n  @@index([deletedAt])\\n}\\n\\nmodel Subscription {\\n  id                 Int                    @id @default(autoincrement())\\n  merchantId         Int                    @unique\\n  planId             Int\\n  status             String                 @default(\\\"trial\\\")\\n  currentPeriodStart DateTime\\n  currentPeriodEnd   DateTime\\n  trialStart         DateTime?\\n  trialEnd           DateTime?\\n  cancelAtPeriodEnd  Boolean                @default(false)\\n  canceledAt         DateTime?\\n  cancelReason       String?\\n  amount             Float\\n  currency           String                 @default(\\\"USD\\\")\\n  interval           String                 @default(\\\"month\\\")\\n  intervalCount      Int                    @default(1)\\n  period             Int                    @default(1)\\n  discount           Float                  @default(0)\\n  savings            Float                  @default(0)\\n  createdAt          DateTime               @default(now())\\n  updatedAt          DateTime               @updatedAt\\n  payments           Payment[]\\n  plan               Plan                   @relation(fields: [planId], references: [id])\\n  merchant           Merchant               @relation(fields: [merchantId], references: [id], onDelete: Cascade)\\n  activities         SubscriptionActivity[]\\n\\n  @@index([merchantId])\\n  @@index([planId])\\n  @@index([status])\\n}\\n\\nmodel SubscriptionActivity {\\n  id             Int          @id @default(autoincrement())\\n  subscriptionId Int\\n  type           String\\n  description    String\\n  metadata       String?\\n  performedBy    Int?\\n  createdAt      DateTime     @default(now())\\n  reason         String?\\n  user           User?        @relation(fields: [performedBy], references: [id])\\n  subscription   Subscription @relation(fields: [subscriptionId], references: [id], onDelete: Cascade)\\n\\n  @@index([subscriptionId])\\n  @@index([type])\\n  @@index([createdAt])\\n}\\n\\nmodel AuditLog {\\n  id         Int      @id @default(autoincrement())\\n  entityType String\\n  entityId   String\\n  action     String\\n  details    String\\n  userId     Int?\\n  ipAddress  String?\\n  userAgent  String?\\n  createdAt  DateTime @default(now())\\n  user       User?    @relation(fields: [userId], references: [id])\\n\\n  @@index([entityType, entityId])\\n  @@index([userId])\\n  @@index([action])\\n  @@index([createdAt])\\n}\\n\",\n  \"inlineSchemaHash\": \"8a32b01ae52b32d4b45b75fc94675c33e0a9c2b505343706a0346515c89a2910\",\n  \"copyEngine\": true\n}\n\nconst fs = require('fs')\n\nconfig.dirname = __dirname\nif (!fs.existsSync(path.join(__dirname, 'schema.prisma'))) {\n  const alternativePaths = [\n    \"node_modules/.prisma/client\",\n    \".prisma/client\",\n  ]\n  \n  const alternativePath = alternativePaths.find((altPath) => {\n    return fs.existsSync(path.join(process.cwd(), altPath, 'schema.prisma'))\n  }) ?? alternativePaths[0]\n\n  config.dirname = path.join(process.cwd(), alternativePath)\n  config.isBundled = true\n}\n\nconfig.runtimeDataModel = JSON.parse(\"{\\\"models\\\":{\\\"User\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"email\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":true,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"password\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"firstName\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"lastName\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"phone\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"role\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"OUTLET_STAFF\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isActive\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":true,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"merchantId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"outletId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"deletedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"auditLogs\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"AuditLog\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"AuditLogToUser\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdOrders\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Order\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderToUser\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"subscriptionActivities\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"SubscriptionActivity\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"SubscriptionActivityToUser\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchant\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Merchant\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToUser\\\",\\\"relationFromFields\\\":[\\\"merchantId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"outlet\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Outlet\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OutletToUser\\\",\\\"relationFromFields\\\":[\\\"outletId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[[\\\"merchantId\\\",\\\"email\\\"],[\\\"merchantId\\\",\\\"phone\\\"]],\\\"uniqueIndexes\\\":[{\\\"name\\\":null,\\\"fields\\\":[\\\"merchantId\\\",\\\"email\\\"]},{\\\"name\\\":null,\\\"fields\\\":[\\\"merchantId\\\",\\\"phone\\\"]}],\\\"isGenerated\\\":false},\\\"Merchant\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"name\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"email\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":true,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"phone\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"address\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"city\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"state\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"zipCode\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"country\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"businessType\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"taxId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"website\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"description\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"planId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"subscriptionStatus\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"trial\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"totalRevenue\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"lastActiveAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isActive\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":true,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"pricingConfig\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"{\\\\\\\"businessType\\\\\\\":\\\\\\\"GENERAL\\\\\\\",\\\\\\\"defaultPricingType\\\\\\\":\\\\\\\"FIXED\\\\\\\",\\\\\\\"businessRules\\\\\\\":{\\\\\\\"requireRentalDates\\\\\\\":false,\\\\\\\"showPricingOptions\\\\\\\":false},\\\\\\\"durationLimits\\\\\\\":{\\\\\\\"minDuration\\\\\\\":1,\\\\\\\"maxDuration\\\\\\\":1,\\\\\\\"defaultDuration\\\\\\\":1}}\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"pricingType\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"categories\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Category\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"CategoryToMerchant\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"customers\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Customer\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"CustomerToMerchant\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"Plan\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Plan\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToPlan\\\",\\\"relationFromFields\\\":[\\\"planId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"outlets\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Outlet\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToOutlet\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"payments\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Payment\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToPayment\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"products\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Product\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToProduct\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"subscription\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Subscription\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToSubscription\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"users\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"User\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToUser\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"Outlet\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"name\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"address\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"description\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isActive\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":true,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isDefault\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":false,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"merchantId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"phone\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"city\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"country\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"state\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"zipCode\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"orders\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Order\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderToOutlet\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchant\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Merchant\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToOutlet\\\",\\\"relationFromFields\\\":[\\\"merchantId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"products\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"OutletStock\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OutletToOutletStock\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"users\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"User\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OutletToUser\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"Category\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"name\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"description\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isActive\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":true,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"merchantId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchant\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Merchant\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"CategoryToMerchant\\\",\\\"relationFromFields\\\":[\\\"merchantId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"products\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Product\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"CategoryToProduct\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[[\\\"merchantId\\\",\\\"name\\\"]],\\\"uniqueIndexes\\\":[{\\\"name\\\":null,\\\"fields\\\":[\\\"merchantId\\\",\\\"name\\\"]}],\\\"isGenerated\\\":false},\\\"Product\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"name\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"description\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"barcode\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":true,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"totalStock\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"rentPrice\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"salePrice\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"deposit\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"images\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isActive\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":true,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"merchantId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"categoryId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"orderItems\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"OrderItem\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderItemToProduct\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"outletStock\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"OutletStock\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OutletStockToProduct\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchant\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Merchant\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToProduct\\\",\\\"relationFromFields\\\":[\\\"merchantId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"category\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Category\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"CategoryToProduct\\\",\\\"relationFromFields\\\":[\\\"categoryId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"OutletStock\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"stock\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"available\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"renting\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"productId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"outletId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"product\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Product\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OutletStockToProduct\\\",\\\"relationFromFields\\\":[\\\"productId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"outlet\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Outlet\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OutletToOutletStock\\\",\\\"relationFromFields\\\":[\\\"outletId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[[\\\"productId\\\",\\\"outletId\\\"]],\\\"uniqueIndexes\\\":[{\\\"name\\\":null,\\\"fields\\\":[\\\"productId\\\",\\\"outletId\\\"]}],\\\"isGenerated\\\":false},\\\"Customer\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"firstName\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"lastName\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"email\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"phone\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"address\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"city\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"state\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"zipCode\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"country\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"dateOfBirth\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"idNumber\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"idType\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"notes\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isActive\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":true,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"merchantId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchant\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Merchant\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"CustomerToMerchant\\\",\\\"relationFromFields\\\":[\\\"merchantId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"orders\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Order\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"CustomerToOrder\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[[\\\"merchantId\\\",\\\"phone\\\"]],\\\"uniqueIndexes\\\":[{\\\"name\\\":null,\\\"fields\\\":[\\\"merchantId\\\",\\\"phone\\\"]}],\\\"isGenerated\\\":false},\\\"Order\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"orderNumber\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":true,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"orderType\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"status\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"RESERVED\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"totalAmount\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"depositAmount\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"securityDeposit\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"damageFee\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"lateFee\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"discountType\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"discountValue\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"discountAmount\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"pickupPlanAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"returnPlanAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"pickedUpAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"returnedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"rentalDuration\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isReadyToDeliver\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":false,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"collateralType\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"collateralDetails\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"notes\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"pickupNotes\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"returnNotes\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"damageNotes\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"outletId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"customerId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdById\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"customer\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Customer\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"CustomerToOrder\\\",\\\"relationFromFields\\\":[\\\"customerId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"outlet\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Outlet\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderToOutlet\\\",\\\"relationFromFields\\\":[\\\"outletId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdBy\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"User\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderToUser\\\",\\\"relationFromFields\\\":[\\\"createdById\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"orderItems\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"OrderItem\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderToOrderItem\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"payments\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Payment\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderToPayment\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"OrderItem\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"quantity\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":1,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"unitPrice\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"totalPrice\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"deposit\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"orderId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"productId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"notes\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"rentalDays\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"product\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Product\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderItemToProduct\\\",\\\"relationFromFields\\\":[\\\"productId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"order\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Order\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderToOrderItem\\\",\\\"relationFromFields\\\":[\\\"orderId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"Payment\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"amount\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"currency\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"USD\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"method\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"type\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"status\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"PENDING\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"reference\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"transactionId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"invoiceNumber\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"description\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"notes\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"failureReason\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"metadata\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"processedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"processedBy\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"orderId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"subscriptionId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchantId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"order\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Order\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"OrderToPayment\\\",\\\"relationFromFields\\\":[\\\"orderId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"subscription\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Subscription\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"PaymentToSubscription\\\",\\\"relationFromFields\\\":[\\\"subscriptionId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchant\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Merchant\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToPayment\\\",\\\"relationFromFields\\\":[\\\"merchantId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"Plan\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"name\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":true,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"description\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"basePrice\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"currency\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"USD\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"trialDays\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":14,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"limits\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"{\\\\\\\"outlets\\\\\\\": 0, \\\\\\\"users\\\\\\\": 0, \\\\\\\"products\\\\\\\": 0, \\\\\\\"customers\\\\\\\": 0}\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"features\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"[]\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isActive\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":true,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"isPopular\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":false,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"sortOrder\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"deletedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"Merchant\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Merchant\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToPlan\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"subscriptions\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Subscription\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"PlanToSubscription\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"Subscription\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchantId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":true,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"planId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"status\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"trial\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"currentPeriodStart\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"currentPeriodEnd\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"trialStart\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"trialEnd\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"cancelAtPeriodEnd\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Boolean\\\",\\\"nativeType\\\":null,\\\"default\\\":false,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"canceledAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"cancelReason\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"amount\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"currency\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"USD\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"interval\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"default\\\":\\\"month\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"intervalCount\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":1,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"period\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":1,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"discount\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"savings\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Float\\\",\\\"nativeType\\\":null,\\\"default\\\":0,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"updatedAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":true},{\\\"name\\\":\\\"payments\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Payment\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"PaymentToSubscription\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"plan\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Plan\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"PlanToSubscription\\\",\\\"relationFromFields\\\":[\\\"planId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"merchant\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Merchant\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"MerchantToSubscription\\\",\\\"relationFromFields\\\":[\\\"merchantId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"activities\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":true,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"SubscriptionActivity\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"SubscriptionToSubscriptionActivity\\\",\\\"relationFromFields\\\":[],\\\"relationToFields\\\":[],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"SubscriptionActivity\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"subscriptionId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"type\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"description\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"metadata\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"performedBy\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"reason\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"user\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"User\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"SubscriptionActivityToUser\\\",\\\"relationFromFields\\\":[\\\"performedBy\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"subscription\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Subscription\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"SubscriptionToSubscriptionActivity\\\",\\\"relationFromFields\\\":[\\\"subscriptionId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"relationOnDelete\\\":\\\"Cascade\\\",\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false},\\\"AuditLog\\\":{\\\"dbName\\\":null,\\\"schema\\\":null,\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":true,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"autoincrement\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"entityType\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"entityId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"action\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"details\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"userId\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":true,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"Int\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"ipAddress\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"userAgent\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"String\\\",\\\"nativeType\\\":null,\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"createdAt\\\",\\\"kind\\\":\\\"scalar\\\",\\\"isList\\\":false,\\\"isRequired\\\":true,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":true,\\\"type\\\":\\\"DateTime\\\",\\\"nativeType\\\":null,\\\"default\\\":{\\\"name\\\":\\\"now\\\",\\\"args\\\":[]},\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false},{\\\"name\\\":\\\"user\\\",\\\"kind\\\":\\\"object\\\",\\\"isList\\\":false,\\\"isRequired\\\":false,\\\"isUnique\\\":false,\\\"isId\\\":false,\\\"isReadOnly\\\":false,\\\"hasDefaultValue\\\":false,\\\"type\\\":\\\"User\\\",\\\"nativeType\\\":null,\\\"relationName\\\":\\\"AuditLogToUser\\\",\\\"relationFromFields\\\":[\\\"userId\\\"],\\\"relationToFields\\\":[\\\"id\\\"],\\\"isGenerated\\\":false,\\\"isUpdatedAt\\\":false}],\\\"primaryKey\\\":null,\\\"uniqueFields\\\":[],\\\"uniqueIndexes\\\":[],\\\"isGenerated\\\":false}},\\\"enums\\\":{},\\\"types\\\":{}}\")\ndefineDmmfProperty(exports.Prisma, config.runtimeDataModel)\nconfig.engineWasm = undefined\nconfig.compilerWasm = undefined\n\n\nconst { warnEnvConflicts } = require('@prisma/client/runtime/library.js')\n\nwarnEnvConflicts({\n    rootEnvPath: config.relativeEnvPaths.rootEnvPath && path.resolve(config.dirname, config.relativeEnvPaths.rootEnvPath),\n    schemaEnvPath: config.relativeEnvPaths.schemaEnvPath && path.resolve(config.dirname, config.relativeEnvPaths.schemaEnvPath)\n})\n\nconst PrismaClient = getPrismaClient(config)\nexports.PrismaClient = PrismaClient\nObject.assign(exports, Prisma)\n\n// file annotations for bundling tools to include these files\npath.join(__dirname, \"libquery_engine-darwin-arm64.dylib.node\");\npath.join(process.cwd(), \"node_modules/.prisma/client/libquery_engine-darwin-arm64.dylib.node\")\n\n// file annotations for bundling tools to include these files\npath.join(__dirname, \"libquery_engine-debian-openssl-3.0.x.so.node\");\npath.join(process.cwd(), \"node_modules/.prisma/client/libquery_engine-debian-openssl-3.0.x.so.node\")\n\n// file annotations for bundling tools to include these files\npath.join(__dirname, \"libquery_engine-linux-musl-openssl-3.0.x.so.node\");\npath.join(process.cwd(), \"node_modules/.prisma/client/libquery_engine-linux-musl-openssl-3.0.x.so.node\")\n// file annotations for bundling tools to include these files\npath.join(__dirname, \"schema.prisma\");\npath.join(process.cwd(), \"node_modules/.prisma/client/schema.prisma\")\n","\n/* !!! This is code generated by Prisma. Do not edit directly. !!!\n/* eslint-disable */\nmodule.exports = { ...require('#main-entry-point') }","module.exports = {\n  ...require('.prisma/client/default'),\n}\n","/**\n * String Utility Functions\n * \n * Provides common string manipulation and validation functions\n */\n\n/**\n * Format phone number for display\n */\nexport const formatPhoneNumber = (phone: string): string => {\n  // Remove all non-digit characters\n  const cleaned = phone.replace(/\\D/g, '');\n  \n  // Format Vietnamese phone number\n  if (cleaned.length === 10) {\n    return `${cleaned.slice(0, 3)} ${cleaned.slice(3, 6)} ${cleaned.slice(6)}`;\n  } else if (cleaned.length === 11) {\n    return `${cleaned.slice(0, 4)} ${cleaned.slice(4, 7)} ${cleaned.slice(7)}`;\n  }\n  \n  return phone;\n};\n\n/**\n * Generate URL-friendly slug from text\n */\nexport const generateSlug = (text: string): string => {\n  return text\n    .toLowerCase()\n    .replace(/[^\\w\\s-]/g, '')\n    .replace(/[\\s_-]+/g, '-')\n    .replace(/^-+|-+$/g, '');\n};\n\n/**\n * Truncate text to specified length with ellipsis\n */\nexport const truncateText = (text: string, maxLength: number): string => {\n  if (text.length <= maxLength) return text;\n  return text.slice(0, maxLength) + '...';\n};\n\n/**\n * Validate email format\n */\nexport const isValidEmail = (email: string): boolean => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n};\n\n/**\n * Validate Vietnamese phone number format\n */\nexport const isValidPhone = (phone: string): boolean => {\n  const phoneRegex = /^(\\+84|84|0)[3|5|7|8|9][0-9]{8}$/;\n  return phoneRegex.test(phone.replace(/\\s/g, ''));\n};\n\n/**\n * Capitalize first letter of each word\n */\nexport const capitalizeWords = (text: string): string => {\n  return text\n    .toLowerCase()\n    .split(' ')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(' ');\n};\n\n/**\n * Remove extra whitespace and normalize spaces\n */\nexport const normalizeWhitespace = (text: string): string => {\n  return text.replace(/\\s+/g, ' ').trim();\n};\n\n/**\n * Generate random string of specified length\n */\nexport const generateRandomString = (length: number): string => {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let result = '';\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n};\n\n/**\n * Check if string is empty or only whitespace\n */\nexport const isEmpty = (text: string): boolean => {\n  return !text || text.trim().length === 0;\n};\n\n/**\n * Extract initials from name\n */\nexport const getInitials = (name: string): string => {\n  return name\n    .split(' ')\n    .map(word => word.charAt(0).toUpperCase())\n    .join('')\n    .slice(0, 2);\n};\n","/**\n * Function Utility Functions\n * \n * Provides common function manipulation utilities like debounce and throttle\n */\n\n/**\n * Debounce function execution\n * Delays execution until after wait time has passed since last invocation\n */\nexport const debounce = <T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): ((...args: Parameters<T>) => void) => {\n  let timeout: NodeJS.Timeout;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n};\n\n/**\n * Throttle function execution\n * Limits execution to once per specified time period\n */\nexport const throttle = <T extends (...args: any[]) => any>(\n  func: T,\n  limit: number\n): ((...args: Parameters<T>) => void) => {\n  let inThrottle: boolean;\n  return (...args: Parameters<T>) => {\n    if (!inThrottle) {\n      func(...args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n};\n\n/**\n * Memoize function results\n * Caches function results based on input parameters\n */\nexport const memoize = <T extends (...args: any[]) => any>(\n  func: T,\n  keyGenerator?: (...args: Parameters<T>) => string\n): T => {\n  const cache = new Map<string, ReturnType<T>>();\n  \n  return ((...args: Parameters<T>) => {\n    const key = keyGenerator ? keyGenerator(...args) : JSON.stringify(args);\n    \n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    \n    const result = func(...args);\n    cache.set(key, result);\n    return result;\n  }) as T;\n};\n\n/**\n * Retry function execution with exponential backoff\n */\nexport const retry = async <T>(\n  fn: () => Promise<T>,\n  maxAttempts: number = 3,\n  baseDelay: number = 1000\n): Promise<T> => {\n  let lastError: Error;\n  \n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n    try {\n      return await fn();\n    } catch (error) {\n      lastError = error as Error;\n      \n      if (attempt === maxAttempts) {\n        throw lastError;\n      }\n      \n      const delay = baseDelay * Math.pow(2, attempt - 1);\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  \n  throw lastError!;\n};\n\n/**\n * Create a function that only executes once\n */\nexport const once = <T extends (...args: any[]) => any>(func: T): T => {\n  let called = false;\n  let result: ReturnType<T>;\n  \n  return ((...args: Parameters<T>) => {\n    if (!called) {\n      called = true;\n      result = func(...args);\n    }\n    return result;\n  }) as T;\n};\n\n/**\n * Create a function that executes after a delay\n */\nexport const delay = (ms: number): Promise<void> => {\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\n\n/**\n * Create a timeout promise that rejects after specified time\n */\nexport const timeout = <T>(promise: Promise<T>, ms: number): Promise<T> => {\n  return Promise.race([\n    promise,\n    new Promise<never>((_, reject) => \n      setTimeout(() => reject(new Error('Operation timed out')), ms)\n    )\n  ]);\n};\n","import CONSTANTS from '@rentalshop/constants';\nimport type { User, LoginCredentials } from '@rentalshop/types';\nimport type { ApiResponse, ErrorCode } from './errors';\nimport { analyzeError } from './errors'; // Import analyzeError for handleApiErrorForUI\n\nconst API = CONSTANTS.API;\n\n// formatCurrency is now exported from ./currency.ts for centralized currency management\n\n// String utilities are now exported from ./string-utils.ts\n// Function utilities are now exported from ./function-utils.ts\n// This file focuses on API utilities and authentication functions\n\n// ============================================================================\n// API UTILITIES\n// ============================================================================\n\n// ApiResponse interface moved to errors.ts for unified error handling\n\n/**\n * Create API URL with proper base URL\n */\nexport const createApiUrl = (endpoint: string): string => {\n  // Remove leading slash if present\n  const cleanEndpoint = endpoint.startsWith('/') ? endpoint.slice(1) : endpoint;\n  \n  // Check if it's already a full URL\n  if (cleanEndpoint.startsWith('http://') || cleanEndpoint.startsWith('https://')) {\n    return cleanEndpoint;\n  }\n  \n  // For relative endpoints, construct full URL\n  if (cleanEndpoint.startsWith('api/')) {\n    // Use centralized API URL configuration\n    try {\n      const { apiUrls } = require('../config/api');\n      return `${apiUrls.base}/${cleanEndpoint}`;\n    } catch {\n      // Fallback to environment variable if centralized config not available\n      const baseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3002';\n      return `${baseUrl}/${cleanEndpoint}`;\n    }\n  }\n  \n  // Default to relative API path\n  return `/api/${cleanEndpoint}`;\n};\n\n/**\n * Authenticated fetch wrapper for API calls\n * Handles authentication headers and common error cases\n */\n/**\n * Public fetch wrapper for unauthenticated requests (login, register, etc.)\n * Does not require authentication token\n */\nexport const publicFetch = async (\n  url: string,\n  options: RequestInit = {}\n): Promise<Response> => {\n  console.log(' FRONTEND: publicFetch called with URL:', url);\n  console.log(' FRONTEND: publicFetch options:', options);\n  \n  // Input validation\n  if (!url || typeof url !== 'string') {\n    console.log(' FRONTEND: URL validation failed');\n    throw new Error('URL is required and must be a string');\n  }\n\n  // Set default headers using API constants\n  const headers: Record<string, string> = {\n    [API.HEADERS.CONTENT_TYPE]: API.CONTENT_TYPES.JSON,\n    [API.HEADERS.ACCEPT]: API.CONTENT_TYPES.JSON,\n  };\n\n  // Create full URL\n  const fullUrl = createApiUrl(url);\n\n  // Merge headers\n  const requestOptions: RequestInit = {\n    ...options,\n    headers: {\n      ...headers,\n      ...options.headers,\n    },\n  };\n\n  console.log(` PUBLIC REQUEST: ${requestOptions.method || 'GET'} ${fullUrl}`);\n  \n  try {\n    const response = await fetch(fullUrl, requestOptions);\n    console.log(` PUBLIC RESPONSE: ${response.status} ${response.statusText}`);\n    return response;\n  } catch (error) {\n    console.error(` PUBLIC REQUEST FAILED:`, error);\n    throw error;\n  }\n};\n\n/**\n * Authenticated fetch wrapper for API calls\n * \n * Best Practices:\n * - Proper error handling and user feedback\n * - Automatic token cleanup on auth failure\n * - Consistent header management\n * - Type-safe implementation\n */\nexport const authenticatedFetch = async (\n  url: string,\n  options: RequestInit = {}\n): Promise<Response> => {\n  console.log(' FRONTEND: authenticatedFetch called with URL:', url);\n  console.log(' FRONTEND: authenticatedFetch options:', options);\n  \n  // Input validation\n  if (!url || typeof url !== 'string') {\n    console.log(' FRONTEND: URL validation failed');\n    throw new Error('URL is required and must be a string');\n  }\n\n  // Get token from localStorage (client-side only) - CONSOLIDATED APPROACH\n  const token = getAuthToken();\n  console.log(' FRONTEND: Token from localStorage:', token ? `${token.substring(0, 20)}...` : 'NO TOKEN');\n  \n  // TEMPORARY DEBUG: Check if token is expired or invalid\n  if (token && typeof window !== 'undefined') {\n    try {\n      const parts = token.split('.');\n      if (parts.length === 3) {\n        const payload = JSON.parse(atob(parts[1]));\n        const now = Math.floor(Date.now() / 1000);\n        console.log(' FRONTEND: Token debug:', {\n          userId: payload.userId,\n          email: payload.email,\n          role: payload.role,\n          exp: payload.exp,\n          now: now,\n          expired: payload.exp < now,\n          timeUntilExpiry: payload.exp - now\n        });\n        \n        // If token is expired, clear it\n        if (payload.exp < now) {\n          console.log(' FRONTEND: Token is expired, clearing auth data');\n          clearAuthData();\n          throw new Error('Token expired - please log in again');\n        }\n      }\n    } catch (error) {\n      console.log(' FRONTEND: Token validation failed:', error);\n      clearAuthData();\n      throw new Error('Invalid token - please log in again');\n    }\n  }\n  \n  // Check if user is authenticated before making the request\n  if (!token && typeof window !== 'undefined') {\n    console.log(' FRONTEND: No token found, cleaning up and redirecting to login');\n    // Clean up any stale auth data\n    clearAuthData();\n    // Redirect to login page\n    setTimeout(() => {\n      // window.location.href = '/login';\n    }, 100);\n    throw new Error('Authentication required');\n  }\n  \n  // Set default headers using API constants\n  const headers: Record<string, string> = {\n    [API.HEADERS.CONTENT_TYPE]: API.CONTENT_TYPES.JSON,\n    [API.HEADERS.ACCEPT]: API.CONTENT_TYPES.JSON,\n    ...(options.headers as Record<string, string>),\n  };\n  \n  // Add authorization header if token exists\n  if (token) {\n    headers[API.HEADERS.AUTHORIZATION] = `Bearer ${token}`;\n    console.log(' FRONTEND: Authorization header set:', `Bearer ${token.substring(0, 20)}...`);\n  }\n  \n  console.log(' FRONTEND: Final headers:', headers);\n  \n  // Set default options using API constants\n  const defaultOptions: RequestInit = {\n    method: API.METHODS.GET,\n    headers,\n    ...options,\n  };\n  \n  console.log(' FRONTEND: Final request options:', defaultOptions);\n  \n  try {\n    console.log(' FRONTEND: Making fetch request to:', url);\n    console.log(' FRONTEND: Request body:', options.body);\n    const response = await fetch(url, defaultOptions);\n    console.log(' FRONTEND: Response received:', {\n      status: response.status,\n      statusText: response.statusText,\n      ok: response.ok,\n      url: response.url,\n      headers: Object.fromEntries(response.headers.entries())\n    });\n    \n    // Handle subscription errors (402 Payment Required)\n    if (response.status === API.STATUS.PAYMENT_REQUIRED) {\n      console.log(' FRONTEND: 402 Payment Required response received (subscription error)');\n      \n      try {\n        const errorData = await response.clone().json();\n        console.log(' FRONTEND: 402 Error details:', errorData);\n        \n        // Don't redirect to login for subscription errors - let the app handle it\n        throw new Error(errorData.message || 'Subscription issue detected');\n      } catch (parseError) {\n        console.log(' FRONTEND: Could not parse 402 error response');\n        throw new Error('Subscription issue detected');\n      }\n    }\n    \n    // Handle authentication errors (401 Unauthorized)\n    if (response.status === API.STATUS.UNAUTHORIZED) {\n      console.log(' FRONTEND: 401 Unauthorized response received');\n      \n      // Handle unauthorized - clean up auth data and redirect immediately\n      if (typeof window !== 'undefined') {\n        console.log(' FRONTEND: Cleaning up auth data and redirecting to login');\n        clearAuthData();\n        // Immediate redirect on 401 error\n        window.location.href = '/login';\n      }\n      throw new Error('Unauthorized access - redirecting to login');\n    }\n    \n    if (response.status === API.STATUS.FORBIDDEN) {\n      throw new Error('Access forbidden - insufficient permissions');\n    }\n    \n    if (response.status >= 500) {\n      throw new Error('Server error - please try again later');\n    }\n    \n    if (response.status >= API.STATUS.INTERNAL_SERVER_ERROR) {\n      throw new Error('Server error occurred');\n    }\n    \n    return response;\n  } catch (error) {\n    // Handle network errors using API constants\n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      throw new Error(API.ERROR_CODES.NETWORK_ERROR);\n    }\n    throw error;\n  }\n};\n\n\n\n\n/**\n * Parse API response\n * \n * This function handles the nested API response structure:\n * API returns: { success: true, data: { ... }, message: \"...\" }\n * We extract: { success: true, data: { ... } }\n * \n * This allows frontend to access user data directly via response.data\n * instead of response.data.data\n */\nexport const parseApiResponse = async <T>(response: Response): Promise<ApiResponse<T>> => {\n  console.log(' DEBUG: parseApiResponse called with status:', response.status);\n  console.log(' DEBUG: Response OK:', response.ok);\n  console.log(' DEBUG: Response URL:', response.url);\n  \n  // Subscription status checking is now handled in authenticatedFetch\n  \n  if (!response.ok) {\n    console.error(' DEBUG: parseApiResponse - Response not OK, status:', response.status);\n    console.error(' DEBUG: parseApiResponse - Response statusText:', response.statusText);\n    console.error(' DEBUG: parseApiResponse - Response URL:', response.url);\n    \n    // Handle unauthorized responses by redirecting to login\n    if (response.status === API.STATUS.UNAUTHORIZED) {\n      if (typeof window !== 'undefined') {\n        console.error(' DEBUG: parseApiResponse - UNAUTHORIZED RESPONSE!');\n        console.error(' DEBUG: This will trigger auto-redirect to login page!');\n        console.error(' parseApiResponse: Unauthorized access - token may be expired or invalid');\n        console.error(' parseApiResponse: Response status:', response.status);\n        console.error(' parseApiResponse: Response URL:', response.url);\n        \n        // Try to get response body for more details\n        try {\n          const responseText = await response.clone().text();\n          console.error(' parseApiResponse - Response body:', responseText);\n        } catch (e) {\n          console.error(' parseApiResponse - Could not read response body:', e);\n        }\n        \n        clearAuthData();\n        // Immediate redirect on 401 error\n        console.error(' DEBUG: parseApiResponse - REDIRECTING TO LOGIN PAGE NOW!');\n        // window.location.href = '/login';\n      }\n      throw new Error('Unauthorized access - redirecting to login');\n    }\n    \n    const errorText = await response.text();\n    console.log(' parseApiResponse: Error response text:', errorText);\n    \n    try {\n      const errorData = JSON.parse(errorText);\n      console.log(' parseApiResponse: Parsed error data:', errorData);\n      \n      // Handle structured error responses that include both message and error code\n      if (errorData.success === false && errorData.message && errorData.error) {\n        console.log(' parseApiResponse: Structured error response detected');\n        const result = {\n          success: false as const,\n          message: errorData.message, // Use the user-friendly message\n          error: errorData.error as ErrorCode, // Preserve the error code for specific handling\n        };\n        console.log(' parseApiResponse: Returning structured error:', result);\n        return result;\n      }\n      \n      // Handle API error responses with error field (most common case)\n      if (errorData.success === false && errorData.error) {\n        console.log(' parseApiResponse: API error response detected');\n        \n        // Check if this is a subscription-related \"Invalid token\" error\n        const isSubscriptionInvalidToken = (\n          errorData.error === 'Invalid token' && (\n            // Check for subscription-related context\n            errorData.subscriptionError === true ||\n            errorData.context === 'subscription' ||\n            errorData.context === 'plan' ||\n            errorData.subscriptionStatus === 'cancelled' ||\n            errorData.subscriptionStatus === 'expired' ||\n            // Check if this came from a subscription-related endpoint\n            response.url.includes('/subscription') ||\n            response.url.includes('/plan') ||\n            response.url.includes('/billing') ||\n            // Check for subscription-specific error codes\n            errorData.errorCode === 'SUBSCRIPTION_CANCELLED' ||\n            errorData.errorCode === 'PLAN_CANCELLED' ||\n            errorData.errorCode === 'SUBSCRIPTION_EXPIRED'\n          )\n        );\n        \n        const result = {\n          success: false as const,\n          message: errorData.error, // Use the error message directly\n          error: errorData.errorCode as ErrorCode || 'INTERNAL_SERVER_ERROR',\n          // Add subscription context if detected\n          ...(isSubscriptionInvalidToken && {\n            details: 'subscription'\n          })\n        };\n        console.log(' parseApiResponse: Returning API error:', result);\n        return result;\n      }\n      \n      // Handle legacy error responses\n      console.log(' parseApiResponse: Legacy error response detected');\n      \n      // Check if this is a subscription-related \"Invalid token\" error using message field\n      const isSubscriptionInvalidTokenMessage = (\n        errorData.message === 'Invalid token' && (\n          // Check for subscription-related context\n          errorData.subscriptionError === true ||\n          errorData.context === 'subscription' ||\n          errorData.context === 'plan' ||\n          errorData.subscriptionStatus === 'cancelled' ||\n          errorData.subscriptionStatus === 'expired' ||\n          // Check if this came from a subscription-related endpoint\n          response.url.includes('/subscription') ||\n          response.url.includes('/plan') ||\n          response.url.includes('/billing') ||\n          // Check for subscription-specific error codes\n          errorData.errorCode === 'SUBSCRIPTION_CANCELLED' ||\n          errorData.errorCode === 'PLAN_CANCELLED' ||\n          errorData.errorCode === 'SUBSCRIPTION_EXPIRED'\n        )\n      );\n      \n      const result = {\n        success: false as const,\n        message: errorData.message || `HTTP ${response.status}: ${response.statusText}`,\n        error: errorData.errorCode as ErrorCode || 'INTERNAL_SERVER_ERROR',\n        // Add subscription context if detected\n        ...(isSubscriptionInvalidTokenMessage && {\n          details: 'subscription'\n        })\n      };\n      console.log(' parseApiResponse: Returning legacy error:', result);\n      return result;\n    } catch {\n      console.log(' parseApiResponse: Failed to parse error JSON, using fallback');\n      const result = {\n        success: false as const,\n        message: `HTTP ${response.status}: ${response.statusText}`,\n        error: 'INTERNAL_SERVER_ERROR' as ErrorCode,\n      };\n      console.log(' parseApiResponse: Returning fallback error:', result);\n      return result;\n    }\n  }\n\n  try {\n    const responseData = await response.json();\n    \n    // Handle nested API response structure\n    // API returns: { success: true, data: { ... }, message: \"...\" }\n    // We extract: { success: true, data: { ... } }\n    if (responseData.success && responseData.data !== undefined) {\n      return {\n        success: true as const,\n        data: responseData.data, // Extract the nested data\n      };\n    }\n    \n    // Fallback for non-standard responses\n    return {\n      success: true as const,\n      data: responseData,\n    };\n  } catch (error) {\n    return {\n      success: false as const,\n      message: 'Failed to parse response',\n      error: 'INTERNAL_SERVER_ERROR' as ErrorCode,\n    };\n  }\n};\n\n/**\n * Execute with data refresh\n */\nexport const executeWithDataRefresh = async <T>(\n  operation: () => Promise<T>,\n  refreshCallback?: () => void\n): Promise<T> => {\n  try {\n    const result = await operation();\n    if (refreshCallback) {\n      refreshCallback();\n    }\n    return result;\n  } catch (error) {\n    console.error('Operation failed:', error);\n    throw error;\n  }\n};\n\n// handleApiError is now exported from ./error-handling.ts for centralized error handling\n\n/**\n * Check if user is authenticated\n */\nexport const isAuthenticated = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  const token = getAuthToken();\n  return !!token;\n};\n\n/**\n * Redirect to login if not authenticated\n */\nexport const requireAuth = (): void => {\n  if (!isAuthenticated()) {\n    if (typeof window !== 'undefined') {\n      console.log(' User not authenticated, redirecting to login');\n      clearAuthData();\n      // window.location.href = '/login';\n    }\n  }\n};\n\n// ============================================================================\n// AUTHENTICATION STORAGE UTILITIES (NON-DUPLICATE)\n// ============================================================================\n\nimport { UserRole } from '@rentalshop/types';\n\nexport interface StoredUser {\n  id: number;\n  firstName: string;\n  lastName: string;\n  name: string;\n  email: string;\n  phone: string;\n  role: UserRole;\n  isActive: boolean;\n  createdAt: Date | string;\n  emailVerified: boolean;\n  updatedAt: Date | string;\n  merchantId?: number;\n  outletId?: number;\n  token: string;\n  expiresAt: number;\n}\n\n/**\n * Get stored authentication token - CONSOLIDATED APPROACH\n */\nexport const getAuthToken = (): string | null => {\n  if (typeof window === 'undefined') return null;\n  \n  // Try new consolidated format first\n  const authData = localStorage.getItem('authData');\n  if (authData) {\n    try {\n      const parsed = JSON.parse(authData);\n      if (parsed.token && parsed.expiresAt) {\n        // Check if token is expired\n        if (Date.now() > parsed.expiresAt) {\n          console.log(' Token is expired, clearing auth data');\n          clearAuthData();\n          return null;\n        }\n        return parsed.token;\n      }\n    } catch (error) {\n      console.warn('Failed to parse authData:', error);\n      clearAuthData();\n      return null;\n    }\n  }\n  \n  // Fallback to old format for backward compatibility\n  const token = localStorage.getItem('authToken');\n  if (token) {\n    // Check if token is actually expired by decoding it\n    try {\n      const parts = token.split('.');\n      if (parts.length === 3) {\n        const payload = JSON.parse(atob(parts[1]));\n        if (payload.exp) {\n          const now = Math.floor(Date.now() / 1000);\n          if (payload.exp < now) {\n            console.log(' Token is expired, clearing auth data');\n            clearAuthData();\n            return null;\n          }\n        }\n      }\n    } catch (error) {\n      console.warn('Failed to decode JWT token for expiration check:', error);\n      clearAuthData();\n      return null;\n    }\n    return token;\n  }\n  \n  return null;\n};\n\n/**\n * Get stored user data\n */\nexport const getStoredUser = (): StoredUser | null => {\n  if (typeof window === 'undefined') return null;\n  \n  try {\n    // First try the new consolidated authData\n    const authData = localStorage.getItem('authData');\n    if (authData) {\n      const parsed = JSON.parse(authData);\n      if (parsed.user) {\n        // Check if token is expired\n        if (parsed.expiresAt && Date.now() > parsed.expiresAt) {\n          clearAuthData();\n          return null;\n        }\n        return parsed.user as StoredUser;\n      }\n    }\n    \n    // Fallback to old userData for backward compatibility\n    const userData = localStorage.getItem('userData');\n    if (userData) {\n      const user = JSON.parse(userData) as StoredUser;\n      \n      // Check if token is expired\n      if (user.expiresAt && Date.now() > user.expiresAt) {\n        clearAuthData();\n        return null;\n      }\n      \n      return user;\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Failed to parse stored user data:', error);\n    clearAuthData();\n    return null;\n  }\n};\n\n/**\n * Store authentication data - CONSOLIDATED APPROACH\n * Only stores ONE item: 'authData' with everything needed\n */\nexport const storeAuthData = (token: string, user: User): void => {\n  if (typeof window === 'undefined') return;\n  \n  // Decode JWT token to get actual expiration time\n  let expiresAt = Date.now() + (24 * 60 * 60 * 1000); // Default fallback\n  try {\n    const parts = token.split('.');\n    if (parts.length === 3) {\n      const payload = JSON.parse(atob(parts[1]));\n      if (payload.exp) {\n        expiresAt = payload.exp * 1000; // Convert to milliseconds\n      }\n    }\n  } catch (error) {\n    console.warn('Failed to decode JWT token for expiration time:', error);\n  }\n  \n  const authData = {\n    token,\n    user: {\n      id: user.id,\n      firstName: user.firstName,\n      lastName: user.lastName,\n      name: user.name,\n      email: user.email,\n      phone: user.phone,\n      role: user.role,\n      isActive: user.isActive,\n      createdAt: user.createdAt,\n      emailVerified: user.emailVerified,\n      updatedAt: user.updatedAt,\n      merchantId: user.merchantId ? Number(user.merchantId) : undefined,\n      outletId: user.outletId ? Number(user.outletId) : undefined,\n    },\n    expiresAt, // Use actual JWT expiration time\n  };\n  \n  // CONSOLIDATED: Only store ONE item with everything\n  localStorage.setItem('authData', JSON.stringify(authData));\n  \n  // Clean up old redundant items\n  localStorage.removeItem('authToken');\n  localStorage.removeItem('user');\n  localStorage.removeItem('userData');\n  \n  console.log(' Auth data stored in consolidated format');\n};\n\n/**\n * Clear authentication data - CONSOLIDATED APPROACH\n */\nexport const clearAuthData = (): void => {\n  if (typeof window === 'undefined') return;\n  \n  console.log(' Clearing auth data from localStorage');\n  \n  // Clear new consolidated format\n  localStorage.removeItem('authData');\n  \n  // Clear old redundant formats\n  localStorage.removeItem('authToken');\n  localStorage.removeItem('user');\n  localStorage.removeItem('userData');\n  \n  console.log(' All auth data cleared');\n};\n\n/**\n * Get current authenticated user\n */\nexport const getCurrentUser = (): StoredUser | null => {\n  return getStoredUser();\n};\n\n/**\n * Force clear all auth data and redirect to login\n * Use this when you need to force a fresh login\n */\nexport const forceLogout = (): void => {\n  if (typeof window === 'undefined') return;\n  \n  console.log(' Force logout - clearing all auth data');\n  clearAuthData();\n  \n  // Immediate redirect to login page\n  // window.location.href = '/login';\n};\n\n/**\n * Handle API response with proper error handling\n */\nexport const handleApiResponse = async <T>(response: Response): Promise<ApiResponse<T>> => {\n  return await parseApiResponse<T>(response);\n};\n\n/**\n * Handle 401 authentication errors - MODERN PATTERN\n * Automatically redirects to login page and clears auth data\n */\nexport const handleAuthError = (error: Error): void => {\n  const errorMessage = error.message.toLowerCase();\n  \n  // Check if it's an authentication error\n  if (errorMessage.includes('unauthorized') || \n      errorMessage.includes('authentication required') ||\n      errorMessage.includes('token expired') ||\n      errorMessage.includes('invalid token')) {\n    \n    console.log(' Authentication error detected:', error.message);\n    \n    // Clear auth data\n    clearAuthData();\n    \n    // Redirect to login page\n    if (typeof window !== 'undefined') {\n      console.log(' Redirecting to login page...');\n      window.location.href = '/login';\n    }\n  }\n};\n\n// ============================================================================\n// TOAST UTILITIES (for UI components)\n// ============================================================================\n\n/**\n * Get toast type based on error type\n */\nexport const getToastType = (errorType: 'auth' | 'permission' | 'subscription' | 'network' | 'validation' | 'unknown'): 'error' | 'warning' | 'info' => {\n  switch (errorType) {\n    case 'auth':\n      return 'error';\n    case 'permission':\n      return 'error';\n    case 'subscription':\n      return 'warning';\n    case 'network':\n      return 'warning';\n    case 'validation':\n      return 'warning';\n    case 'unknown':\n      return 'error';\n    default:\n      return 'error';\n  }\n};\n\n/**\n * Wrap API call with error handling for UI\n */\nexport const withErrorHandlingForUI = async <T>(\n  apiCall: () => Promise<T>\n): Promise<{ data?: T; error?: any }> => {\n  try {\n    const data = await apiCall();\n    return { data };\n  } catch (error) {\n    return { error };\n  }\n};\n\n/**\n * Handle API error for UI display\n */\nexport const handleApiErrorForUI = (error: any): { message: string; type: string } => {\n  const errorInfo = analyzeError(error);\n  return {\n    message: errorInfo.message,\n    type: errorInfo.type\n  };\n}; ","import { z } from 'zod';\nimport { clearAuthData } from './common';\nimport CONSTANTS from '@rentalshop/constants';\n\nconst API = CONSTANTS.API;\n\n// ============================================================================\n// UNIFIED ERROR HANDLING SYSTEM - DRY PRINCIPLE\n// ============================================================================\n\n/**\n * Core Error Codes - Simplified and Unified\n */\nexport enum ErrorCode {\n  // Authentication & Authorization\n  UNAUTHORIZED = 'UNAUTHORIZED',\n  FORBIDDEN = 'FORBIDDEN',\n  INVALID_TOKEN = 'INVALID_TOKEN',\n  TOKEN_EXPIRED = 'TOKEN_EXPIRED',\n  INVALID_CREDENTIALS = 'INVALID_CREDENTIALS',\n  \n  // Validation Errors\n  VALIDATION_ERROR = 'VALIDATION_ERROR',\n  INVALID_INPUT = 'INVALID_INPUT',\n  MISSING_REQUIRED_FIELD = 'MISSING_REQUIRED_FIELD',\n  \n  // Database Errors\n  DATABASE_ERROR = 'DATABASE_ERROR',\n  DUPLICATE_ENTRY = 'DUPLICATE_ENTRY',\n  FOREIGN_KEY_CONSTRAINT = 'FOREIGN_KEY_CONSTRAINT',\n  NOT_FOUND = 'NOT_FOUND',\n  \n  // Business Logic Errors\n  PLAN_LIMIT_EXCEEDED = 'PLAN_LIMIT_EXCEEDED',\n  INSUFFICIENT_PERMISSIONS = 'INSUFFICIENT_PERMISSIONS',\n  BUSINESS_RULE_VIOLATION = 'BUSINESS_RULE_VIOLATION',\n  ACCOUNT_DEACTIVATED = 'ACCOUNT_DEACTIVATED',\n  SUBSCRIPTION_EXPIRED = 'SUBSCRIPTION_EXPIRED',\n  SUBSCRIPTION_CANCELLED = 'SUBSCRIPTION_CANCELLED',\n  SUBSCRIPTION_PAUSED = 'SUBSCRIPTION_PAUSED',\n  TRIAL_EXPIRED = 'TRIAL_EXPIRED',\n  ORDER_ALREADY_EXISTS = 'ORDER_ALREADY_EXISTS',\n  PRODUCT_OUT_OF_STOCK = 'PRODUCT_OUT_OF_STOCK',\n  INVALID_ORDER_STATUS = 'INVALID_ORDER_STATUS',\n  PAYMENT_FAILED = 'PAYMENT_FAILED',\n  INVALID_PAYMENT_METHOD = 'INVALID_PAYMENT_METHOD',\n  \n  // Resource Specific Errors\n  EMAIL_EXISTS = 'EMAIL_EXISTS',\n  PHONE_EXISTS = 'PHONE_EXISTS',\n  USER_NOT_FOUND = 'USER_NOT_FOUND',\n  MERCHANT_NOT_FOUND = 'MERCHANT_NOT_FOUND',\n  OUTLET_NOT_FOUND = 'OUTLET_NOT_FOUND',\n  PRODUCT_NOT_FOUND = 'PRODUCT_NOT_FOUND',\n  ORDER_NOT_FOUND = 'ORDER_NOT_FOUND',\n  CUSTOMER_NOT_FOUND = 'CUSTOMER_NOT_FOUND',\n  CATEGORY_NOT_FOUND = 'CATEGORY_NOT_FOUND',\n  PLAN_NOT_FOUND = 'PLAN_NOT_FOUND',\n  SUBSCRIPTION_NOT_FOUND = 'SUBSCRIPTION_NOT_FOUND',\n  PAYMENT_NOT_FOUND = 'PAYMENT_NOT_FOUND',\n  AUDIT_LOG_NOT_FOUND = 'AUDIT_LOG_NOT_FOUND',\n  BILLING_CYCLE_NOT_FOUND = 'BILLING_CYCLE_NOT_FOUND',\n  PLAN_VARIANT_NOT_FOUND = 'PLAN_VARIANT_NOT_FOUND',\n  \n  // System Errors\n  INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR',\n  SERVICE_UNAVAILABLE = 'SERVICE_UNAVAILABLE',\n  NETWORK_ERROR = 'NETWORK_ERROR',\n  \n  // File Upload Errors\n  FILE_TOO_LARGE = 'FILE_TOO_LARGE',\n  INVALID_FILE_TYPE = 'INVALID_FILE_TYPE',\n  UPLOAD_FAILED = 'UPLOAD_FAILED'\n}\n\n// ============================================================================\n// ERROR RESPONSE TYPES - Unified Format\n// ============================================================================\n\nexport interface ApiErrorResponse {\n  success: false;\n  message: string;\n  error: ErrorCode;\n  details?: string;\n  field?: string;\n}\n\nexport interface ApiSuccessResponse<T = any> {\n  success: true;\n  data: T;\n  message?: string;\n}\n\nexport type ApiResponse<T = any> = ApiSuccessResponse<T> | ApiErrorResponse;\n\n// ============================================================================\n// TYPE GUARDS - Type-safe response checking\n// ============================================================================\n\nexport function isSuccessResponse<T>(response: ApiResponse<T>): response is ApiSuccessResponse<T> {\n  return response.success === true;\n}\n\nexport function isErrorResponse(response: ApiResponse<any>): response is ApiErrorResponse {\n  return response.success === false;\n}\n\n// ============================================================================\n// ERROR MESSAGE MAPPINGS - DRY and Consistent\n// ============================================================================\n\nexport const ERROR_MESSAGES: Record<ErrorCode, string> = {\n  // Authentication & Authorization\n  [ErrorCode.UNAUTHORIZED]: 'Authentication required',\n  [ErrorCode.FORBIDDEN]: 'Access denied',\n  [ErrorCode.INVALID_TOKEN]: 'Invalid authentication token',\n  [ErrorCode.TOKEN_EXPIRED]: 'Authentication token has expired',\n  [ErrorCode.INVALID_CREDENTIALS]: 'Invalid email or password',\n  \n  // Validation Errors\n  [ErrorCode.VALIDATION_ERROR]: 'Input validation failed',\n  [ErrorCode.INVALID_INPUT]: 'Invalid input provided',\n  [ErrorCode.MISSING_REQUIRED_FIELD]: 'Required field is missing',\n  \n  // Database Errors\n  [ErrorCode.DATABASE_ERROR]: 'Database operation failed',\n  [ErrorCode.DUPLICATE_ENTRY]: 'Record already exists',\n  [ErrorCode.FOREIGN_KEY_CONSTRAINT]: 'Invalid reference',\n  [ErrorCode.NOT_FOUND]: 'Resource not found',\n  \n  // Business Logic Errors\n  [ErrorCode.PLAN_LIMIT_EXCEEDED]: 'Plan limit exceeded',\n  [ErrorCode.INSUFFICIENT_PERMISSIONS]: 'Insufficient permissions',\n  [ErrorCode.BUSINESS_RULE_VIOLATION]: 'Business rule violation',\n  [ErrorCode.ACCOUNT_DEACTIVATED]: 'Account is deactivated',\n  [ErrorCode.SUBSCRIPTION_EXPIRED]: 'Subscription has expired',\n  [ErrorCode.SUBSCRIPTION_CANCELLED]: 'Subscription has been cancelled',\n  [ErrorCode.SUBSCRIPTION_PAUSED]: 'Subscription is paused',\n  [ErrorCode.TRIAL_EXPIRED]: 'Trial period has expired',\n  [ErrorCode.ORDER_ALREADY_EXISTS]: 'Order already exists',\n  [ErrorCode.PRODUCT_OUT_OF_STOCK]: 'Product is out of stock',\n  [ErrorCode.INVALID_ORDER_STATUS]: 'Invalid order status',\n  [ErrorCode.PAYMENT_FAILED]: 'Payment processing failed',\n  [ErrorCode.INVALID_PAYMENT_METHOD]: 'Invalid payment method',\n  \n  // Resource Specific Errors\n  [ErrorCode.EMAIL_EXISTS]: 'Email address is already registered',\n  [ErrorCode.PHONE_EXISTS]: 'Phone number is already registered',\n  [ErrorCode.USER_NOT_FOUND]: 'User not found',\n  [ErrorCode.MERCHANT_NOT_FOUND]: 'Merchant not found',\n  [ErrorCode.OUTLET_NOT_FOUND]: 'Outlet not found',\n  [ErrorCode.PRODUCT_NOT_FOUND]: 'Product not found',\n  [ErrorCode.ORDER_NOT_FOUND]: 'Order not found',\n  [ErrorCode.CUSTOMER_NOT_FOUND]: 'Customer not found',\n  [ErrorCode.CATEGORY_NOT_FOUND]: 'Category not found',\n  [ErrorCode.PLAN_NOT_FOUND]: 'Plan not found',\n  [ErrorCode.SUBSCRIPTION_NOT_FOUND]: 'Subscription not found',\n  [ErrorCode.PAYMENT_NOT_FOUND]: 'Payment not found',\n  [ErrorCode.AUDIT_LOG_NOT_FOUND]: 'Audit log not found',\n  [ErrorCode.BILLING_CYCLE_NOT_FOUND]: 'Billing cycle not found',\n  [ErrorCode.PLAN_VARIANT_NOT_FOUND]: 'Plan variant not found',\n  \n  // System Errors\n  [ErrorCode.INTERNAL_SERVER_ERROR]: 'Internal server error',\n  [ErrorCode.SERVICE_UNAVAILABLE]: 'Service temporarily unavailable',\n  [ErrorCode.NETWORK_ERROR]: 'Network error occurred',\n  \n  // File Upload Errors\n  [ErrorCode.FILE_TOO_LARGE]: 'File size exceeds limit',\n  [ErrorCode.INVALID_FILE_TYPE]: 'Invalid file type',\n  [ErrorCode.UPLOAD_FAILED]: 'File upload failed'\n};\n\n// ============================================================================\n// HTTP STATUS CODE MAPPINGS - DRY and Consistent\n// ============================================================================\n\nexport const ERROR_STATUS_CODES: Record<ErrorCode, number> = {\n  // Authentication & Authorization (4xx)\n  [ErrorCode.UNAUTHORIZED]: 401,\n  [ErrorCode.FORBIDDEN]: 403,\n  [ErrorCode.INVALID_TOKEN]: 401,\n  [ErrorCode.TOKEN_EXPIRED]: 401,\n  [ErrorCode.INVALID_CREDENTIALS]: 401,\n  \n  // Validation Errors (4xx)\n  [ErrorCode.VALIDATION_ERROR]: 400,\n  [ErrorCode.INVALID_INPUT]: 400,\n  [ErrorCode.MISSING_REQUIRED_FIELD]: 400,\n  \n  // Database Errors (4xx/5xx)\n  [ErrorCode.DATABASE_ERROR]: 500,\n  [ErrorCode.DUPLICATE_ENTRY]: 409,\n  [ErrorCode.FOREIGN_KEY_CONSTRAINT]: 400,\n  [ErrorCode.NOT_FOUND]: 404,\n  \n  // Business Logic Errors (4xx)\n  [ErrorCode.PLAN_LIMIT_EXCEEDED]: 403,\n  [ErrorCode.INSUFFICIENT_PERMISSIONS]: 403,\n  [ErrorCode.BUSINESS_RULE_VIOLATION]: 422,\n  [ErrorCode.ACCOUNT_DEACTIVATED]: 403,\n  [ErrorCode.SUBSCRIPTION_EXPIRED]: 402,\n  [ErrorCode.SUBSCRIPTION_CANCELLED]: 402,\n  [ErrorCode.SUBSCRIPTION_PAUSED]: 402,\n  [ErrorCode.TRIAL_EXPIRED]: 402,\n  [ErrorCode.ORDER_ALREADY_EXISTS]: 409,\n  [ErrorCode.PRODUCT_OUT_OF_STOCK]: 422,\n  [ErrorCode.INVALID_ORDER_STATUS]: 422,\n  [ErrorCode.PAYMENT_FAILED]: 402,\n  [ErrorCode.INVALID_PAYMENT_METHOD]: 400,\n  \n  // Resource Specific Errors (4xx)\n  [ErrorCode.EMAIL_EXISTS]: 409,\n  [ErrorCode.PHONE_EXISTS]: 409,\n  [ErrorCode.USER_NOT_FOUND]: 404,\n  [ErrorCode.MERCHANT_NOT_FOUND]: 404,\n  [ErrorCode.OUTLET_NOT_FOUND]: 404,\n  [ErrorCode.PRODUCT_NOT_FOUND]: 404,\n  [ErrorCode.ORDER_NOT_FOUND]: 404,\n  [ErrorCode.CUSTOMER_NOT_FOUND]: 404,\n  [ErrorCode.CATEGORY_NOT_FOUND]: 404,\n  [ErrorCode.PLAN_NOT_FOUND]: 404,\n  [ErrorCode.SUBSCRIPTION_NOT_FOUND]: 404,\n  [ErrorCode.PAYMENT_NOT_FOUND]: 404,\n  [ErrorCode.AUDIT_LOG_NOT_FOUND]: 404,\n  [ErrorCode.BILLING_CYCLE_NOT_FOUND]: 404,\n  [ErrorCode.PLAN_VARIANT_NOT_FOUND]: 404,\n  \n  // System Errors (5xx)\n  [ErrorCode.INTERNAL_SERVER_ERROR]: 500,\n  [ErrorCode.SERVICE_UNAVAILABLE]: 503,\n  [ErrorCode.NETWORK_ERROR]: 503,\n  \n  // File Upload Errors (4xx)\n  [ErrorCode.FILE_TOO_LARGE]: 413,\n  [ErrorCode.INVALID_FILE_TYPE]: 400,\n  [ErrorCode.UPLOAD_FAILED]: 500\n};\n\n// ============================================================================\n// ERROR CLASSES - Unified and Simplified\n// ============================================================================\n\nexport class ApiError extends Error {\n  public readonly code: ErrorCode;\n  public readonly statusCode: number;\n  public readonly details?: string;\n  public readonly field?: string;\n\n  constructor(\n    code: ErrorCode,\n    message?: string,\n    details?: string,\n    field?: string\n  ) {\n    const errorMessage = message || ERROR_MESSAGES[code];\n    super(errorMessage);\n    \n    this.name = 'ApiError';\n    this.code = code;\n    this.statusCode = ERROR_STATUS_CODES[code];\n    this.details = details;\n    this.field = field;\n  }\n\n  toResponse(): ApiErrorResponse {\n    return {\n      success: false,\n      message: this.message,\n      error: this.code,\n      details: this.details,\n      field: this.field\n    };\n  }\n}\n\n// ============================================================================\n// CONVENIENCE ERROR CLASSES\n// ============================================================================\n\nexport class ValidationError extends ApiError {\n  constructor(message: string, details?: string, field?: string) {\n    super(ErrorCode.VALIDATION_ERROR, message, details, field);\n    this.name = 'ValidationError';\n  }\n}\n\nexport class DuplicateError extends ApiError {\n  constructor(code: ErrorCode, message?: string, details?: string, field?: string) {\n    super(code, message, details, field);\n    this.name = 'DuplicateError';\n  }\n}\n\nexport class NotFoundError extends ApiError {\n  constructor(code: ErrorCode, message?: string, details?: string) {\n    super(code, message, details);\n    this.name = 'NotFoundError';\n  }\n}\n\nexport class UnauthorizedError extends ApiError {\n  constructor(message?: string, details?: string) {\n    super(ErrorCode.UNAUTHORIZED, message, details);\n    this.name = 'UnauthorizedError';\n  }\n}\n\nexport class ForbiddenError extends ApiError {\n  constructor(message?: string, details?: string) {\n    super(ErrorCode.FORBIDDEN, message, details);\n    this.name = 'ForbiddenError';\n  }\n}\n\nexport class PlanLimitError extends ApiError {\n  constructor(message?: string, details?: string) {\n    super(ErrorCode.PLAN_LIMIT_EXCEEDED, message, details);\n    this.name = 'PlanLimitError';\n  }\n}\n\n// ============================================================================\n// ERROR RESPONSE BUILDERS - DRY and Consistent\n// ============================================================================\n\nexport function createErrorResponse(\n  code: ErrorCode,\n  message?: string,\n  details?: string,\n  field?: string\n): ApiErrorResponse {\n  return {\n    success: false,\n    message: message || ERROR_MESSAGES[code],\n    error: code,\n    details,\n    field\n  };\n}\n\nexport function createSuccessResponse<T>(\n  data: T,\n  message?: string\n): ApiSuccessResponse<T> {\n  return {\n    success: true,\n    data,\n    message\n  };\n}\n\n// ============================================================================\n// DATABASE ERROR HANDLERS - Unified and Comprehensive\n// ============================================================================\n\nexport function handlePrismaError(error: any): ApiError {\n  console.error(' Prisma Error Details:', {\n    code: error.code,\n    message: error.message,\n    meta: error.meta\n  });\n\n  switch (error.code) {\n    case 'P2002': {\n      // Unique constraint violation\n      const target = error.meta?.target;\n      const field = Array.isArray(target) ? target[0] : target;\n      \n      if (field?.includes('email')) {\n        return new ApiError(\n          ErrorCode.EMAIL_EXISTS,\n          `Email address is already registered`,\n          `Field: ${field}`,\n          'email'\n        );\n      }\n      \n      if (field?.includes('phone')) {\n        return new ApiError(\n          ErrorCode.PHONE_EXISTS,\n          `Phone number is already registered`,\n          `Field: ${field}`,\n          'phone'\n        );\n      }\n      \n      return new ApiError(\n        ErrorCode.DUPLICATE_ENTRY,\n        'Record with this information already exists',\n        `Field: ${field}`\n      );\n    }\n    \n    case 'P2003': {\n      // Foreign key constraint violation\n      const fieldName = error.meta?.field_name;\n      return new ApiError(\n        ErrorCode.FOREIGN_KEY_CONSTRAINT,\n        `Invalid reference: ${fieldName}`,\n        `Field: ${fieldName}`\n      );\n    }\n    \n    case 'P2025': {\n      // Record not found\n      return new ApiError(\n        ErrorCode.NOT_FOUND,\n        'Record not found',\n        error.message\n      );\n    }\n    \n    case 'P2014': {\n      // Relation violation\n      return new ApiError(\n        ErrorCode.BUSINESS_RULE_VIOLATION,\n        'Cannot perform this operation due to existing relationships',\n        error.message\n      );\n    }\n    \n    default: {\n      return new ApiError(\n        ErrorCode.DATABASE_ERROR,\n        'Database operation failed',\n        error.message\n      );\n    }\n  }\n}\n\n// ============================================================================\n// VALIDATION ERROR HANDLERS\n// ============================================================================\n\nexport function handleValidationError(error: any): ApiError {\n  if (error.name === 'ZodError') {\n    const firstError = error.errors[0];\n    const field = firstError.path.join('.');\n    \n    return new ApiError(\n      ErrorCode.VALIDATION_ERROR,\n      firstError.message,\n      `Field: ${field}`,\n      field\n    );\n  }\n  \n  return new ApiError(\n    ErrorCode.INVALID_INPUT,\n    error.message || 'Validation failed'\n  );\n}\n\n// ============================================================================\n// BUSINESS LOGIC ERROR HANDLERS\n// ============================================================================\n\nexport function handleBusinessError(error: any): ApiError {\n  if (error instanceof ApiError) {\n    return error;\n  }\n  \n  if (error.message?.includes('not found')) {\n    if (error.message.includes('Merchant')) {\n      return new ApiError(ErrorCode.MERCHANT_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Outlet')) {\n      return new ApiError(ErrorCode.OUTLET_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('User')) {\n      return new ApiError(ErrorCode.USER_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Product')) {\n      return new ApiError(ErrorCode.PRODUCT_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Order')) {\n      return new ApiError(ErrorCode.ORDER_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Customer')) {\n      return new ApiError(ErrorCode.CUSTOMER_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Category')) {\n      return new ApiError(ErrorCode.CATEGORY_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Plan')) {\n      return new ApiError(ErrorCode.PLAN_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Subscription')) {\n      return new ApiError(ErrorCode.SUBSCRIPTION_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Payment')) {\n      return new ApiError(ErrorCode.PAYMENT_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Audit log')) {\n      return new ApiError(ErrorCode.AUDIT_LOG_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Billing cycle')) {\n      return new ApiError(ErrorCode.BILLING_CYCLE_NOT_FOUND, error.message);\n    }\n    if (error.message.includes('Plan variant')) {\n      return new ApiError(ErrorCode.PLAN_VARIANT_NOT_FOUND, error.message);\n    }\n  }\n  \n  if (error.message?.includes('already registered')) {\n    if (error.message.includes('Email')) {\n      return new ApiError(ErrorCode.EMAIL_EXISTS, error.message);\n    }\n    if (error.message.includes('Phone')) {\n      return new ApiError(ErrorCode.PHONE_EXISTS, error.message);\n    }\n  }\n  \n  if (error.message?.includes('already exists')) {\n    if (error.message.includes('order')) {\n      return new ApiError(ErrorCode.ORDER_ALREADY_EXISTS, error.message);\n    }\n  }\n  \n  if (error.message?.includes('Plan limit')) {\n    return new ApiError(ErrorCode.PLAN_LIMIT_EXCEEDED, error.message);\n  }\n  \n  if (error.message?.includes('permission')) {\n    return new ApiError(ErrorCode.INSUFFICIENT_PERMISSIONS, error.message);\n  }\n  \n  if (error.message?.includes('deactivated')) {\n    return new ApiError(ErrorCode.ACCOUNT_DEACTIVATED, error.message);\n  }\n  \n  if (error.message?.includes('subscription')) {\n    if (error.message.includes('expired')) {\n      return new ApiError(ErrorCode.SUBSCRIPTION_EXPIRED, error.message);\n    }\n    if (error.message.includes('cancelled')) {\n      return new ApiError(ErrorCode.SUBSCRIPTION_CANCELLED, error.message);\n    }\n    if (error.message.includes('paused')) {\n      return new ApiError(ErrorCode.SUBSCRIPTION_PAUSED, error.message);\n    }\n  }\n  \n  if (error.message?.includes('trial')) {\n    if (error.message.includes('expired')) {\n      return new ApiError(ErrorCode.TRIAL_EXPIRED, error.message);\n    }\n  }\n  \n  if (error.message?.includes('out of stock')) {\n    return new ApiError(ErrorCode.PRODUCT_OUT_OF_STOCK, error.message);\n  }\n  \n  if (error.message?.includes('payment')) {\n    if (error.message.includes('failed')) {\n      return new ApiError(ErrorCode.PAYMENT_FAILED, error.message);\n    }\n    if (error.message.includes('invalid')) {\n      return new ApiError(ErrorCode.INVALID_PAYMENT_METHOD, error.message);\n    }\n  }\n  \n  if (error.message?.includes('invalid order status')) {\n    return new ApiError(ErrorCode.INVALID_ORDER_STATUS, error.message);\n  }\n  \n  return new ApiError(\n    ErrorCode.BUSINESS_RULE_VIOLATION,\n    error.message || 'Business rule violation'\n  );\n}\n\n// ============================================================================\n// GLOBAL ERROR HANDLER - DRY and Comprehensive\n// ============================================================================\n\nexport function handleApiError(error: any): {\n  response: ApiErrorResponse;\n  statusCode: number;\n} {\n  console.error(' API Error:', error);\n  \n  let apiError: ApiError;\n  \n  // Handle different error types\n  if (error instanceof ApiError) {\n    apiError = error;\n  } else if (error.code && error.code.startsWith('P')) {\n    // Prisma errors\n    apiError = handlePrismaError(error);\n  } else if (error.name === 'ZodError') {\n    // Validation errors\n    apiError = handleValidationError(error);\n  } else {\n    // Business logic or other errors\n    apiError = handleBusinessError(error);\n  }\n  \n  const response = createErrorResponse(\n    apiError.code,\n    apiError.message,\n    apiError.details,\n    apiError.field\n  );\n\n  return {\n    response,\n    statusCode: apiError.statusCode\n  };\n}\n\n// ============================================================================\n// ERROR ANALYSIS & HANDLING (from error-handling.ts)\n// ============================================================================\n\n/**\n * Error types for better user experience\n */\nexport type ErrorType = 'auth' | 'permission' | 'subscription' | 'network' | 'validation' | 'unknown';\n\n/**\n * Enhanced error information for better handling\n */\nexport interface ErrorInfo {\n  type: ErrorType;\n  message: string;\n  title: string;\n  showLoginButton: boolean;\n  originalError: any;\n}\n\n/**\n * Check if an error is authentication-related (401)\n */\nexport const isAuthError = (error: any): boolean => {\n  return (\n    error?.message?.includes('Authentication required') ||\n    error?.message?.includes('Unauthorized') ||\n    error?.message?.includes('Invalid token') ||\n    error?.message?.includes('Token expired') ||\n    error?.status === API.STATUS.UNAUTHORIZED ||\n    error?.status === 401\n  );\n};\n\n/**\n * Check if an error is permission-related (403)\n */\nexport const isPermissionError = (error: any): boolean => {\n  return (\n    error?.message?.includes('Forbidden') ||\n    error?.message?.includes('Access denied') ||\n    error?.message?.includes('Insufficient permissions') ||\n    error?.status === API.STATUS.FORBIDDEN ||\n    error?.status === 403\n  );\n};\n\n/**\n * Check if an error is subscription-related (402)\n */\nconst isSubscriptionErrorNew = (error: any): boolean => {\n  if (!error) return false;\n\n  const message = error.message || error.error || '';\n  const code = error.code || '';\n\n  return (\n    code === 'PLAN_LIMIT_EXCEEDED' ||\n    message.toLowerCase().includes('subscription') ||\n    message.toLowerCase().includes('plan limit') ||\n    message.toLowerCase().includes('trial expired') ||\n    message.toLowerCase().includes('cancelled') ||\n    message.toLowerCase().includes('expired') ||\n    message.toLowerCase().includes('suspended') ||\n    message.toLowerCase().includes('past due') ||\n    message.toLowerCase().includes('paused')\n  );\n};\n\n/**\n * Check if an error is network-related\n */\nexport const isNetworkError = (error: any): boolean => {\n  return (\n    error?.message?.includes('Network Error') ||\n    error?.message?.includes('Failed to fetch') ||\n    error?.message?.includes('Connection failed') ||\n    error?.status === API.STATUS.SERVICE_UNAVAILABLE ||\n    error?.status === 503\n  );\n};\n\n/**\n * Check if an error is validation-related (400)\n */\nexport const isValidationError = (error: any): boolean => {\n  return (\n    error?.message?.includes('Validation failed') ||\n    error?.message?.includes('Invalid input') ||\n    error?.message?.includes('Required field') ||\n    error?.status === API.STATUS.BAD_REQUEST ||\n    error?.status === 400\n  );\n};\n\n/**\n * Analyze error and provide enhanced information\n */\nexport const analyzeError = (error: any): ErrorInfo => {\n  console.log(' analyzeError called with:', error);\n\n  // Authentication errors\n  if (isAuthError(error)) {\n    console.log(' analyzeError: Detected auth error, clearing auth data');\n    clearAuthData();\n    \n    return {\n      type: 'auth',\n      message: 'Your session has expired. Please log in again.',\n      title: 'Session Expired',\n      showLoginButton: true,\n      originalError: error\n    };\n  }\n\n  // Permission errors\n  if (isPermissionError(error)) {\n    return {\n      type: 'permission',\n      message: 'You do not have permission to perform this action.',\n      title: 'Access Denied',\n      showLoginButton: false,\n      originalError: error\n    };\n  }\n\n  // Subscription errors\n  if (isSubscriptionErrorNew(error)) {\n    return {\n      type: 'subscription',\n      message: 'Your subscription has expired or been cancelled. Please renew to continue.',\n      title: 'Subscription Issue',\n      showLoginButton: false,\n      originalError: error\n    };\n  }\n\n  // Network errors\n  if (isNetworkError(error)) {\n    return {\n      type: 'network',\n      message: 'Network connection failed. Please check your internet connection and try again.',\n      title: 'Connection Error',\n      showLoginButton: false,\n      originalError: error\n    };\n  }\n\n  // Validation errors\n  if (isValidationError(error)) {\n    return {\n      type: 'validation',\n      message: 'Please check your input and try again.',\n      title: 'Invalid Input',\n      showLoginButton: false,\n      originalError: error\n    };\n  }\n\n  // Unknown errors\n  return {\n    type: 'unknown',\n    message: 'An unexpected error occurred. Please try again later.',\n    title: 'Error',\n    showLoginButton: false,\n    originalError: error\n  };\n}; ","// ============================================================================\n// REFACTORED PRICING CALCULATOR SYSTEM\n// ============================================================================\n\nimport { Plan, Product, Merchant, PricingType, BusinessType, PricingDurationLimits, PricingBusinessRules } from '@rentalshop/types';\nimport { BillingInterval, BUSINESS_TYPE_DEFAULTS } from '@rentalshop/constants';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface PricingBreakdown {\n  basePrice: number;\n  totalPrice: number;\n  discount: number;\n  discountAmount: number;\n  finalPrice: number;\n  monthlyEquivalent: number;\n  billingInterval: BillingInterval;\n  totalMonths: number;\n}\n\nexport interface PricingConfig {\n  discounts: {\n    month: number;\n    quarter: number;\n    semiAnnual: number;\n    year: number;\n  };\n  intervals: {\n    month: { interval: BillingInterval; intervalCount: number };\n    quarter: { interval: BillingInterval; intervalCount: number };\n    semiAnnual: { interval: BillingInterval; intervalCount: number };\n    year: { interval: BillingInterval; intervalCount: number };\n  };\n}\n\n// ============================================================================\n// PRICING RESOLUTION INTERFACES (from pricing-resolver.ts)\n// ============================================================================\n\nexport interface PricingInfo {\n  pricingType: PricingType;\n  pricePerUnit: number;\n  minDuration: number;\n  maxDuration: number;\n  requireRentalDates: boolean;\n  showPricingOptions: boolean;\n}\n\nexport interface CalculatedPricing {\n  unitPrice: number;\n  totalPrice: number;\n  deposit: number;\n  pricingType: PricingType;\n  duration?: number;\n  durationUnit?: string;\n}\n\n// ============================================================================\n// VALIDATION INTERFACES (from pricing-validation.ts)\n// ============================================================================\n\nexport interface ValidationResult {\n  isValid: boolean;\n  error?: string;\n  warning?: string;\n  suggestions?: string[];\n}\n\nexport interface RentalPeriodValidation {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n  suggestions: string[];\n}\n\n// ============================================================================\n// DISCOUNT CALCULATOR\n// ============================================================================\n\nexport class DiscountCalculator {\n  private config: PricingConfig;\n\n  constructor(config: PricingConfig) {\n    this.config = config;\n  }\n\n  /**\n   * Calculate discount amount for billing interval\n   */\n  calculateDiscount(totalPrice: number, billingInterval: BillingInterval): {\n    discount: number;\n    discountAmount: number;\n  } {\n    const discountPercentage = this.getDiscountPercentage(billingInterval);\n    const discountAmount = (totalPrice * discountPercentage) / 100;\n\n    return {\n      discount: discountPercentage,\n      discountAmount\n    };\n  }\n\n  /**\n   * Get discount percentage for billing interval\n   */\n  private getDiscountPercentage(billingInterval: BillingInterval): number {\n    return this.config.discounts[billingInterval] || 0;\n  }\n}\n\n// ============================================================================\n// BILLING INTERVAL CALCULATOR\n// ============================================================================\n\nexport class BillingIntervalCalculator {\n  private config: PricingConfig;\n\n  constructor(config: PricingConfig) {\n    this.config = config;\n  }\n\n  /**\n   * Get total months for billing interval\n   */\n  getTotalMonths(billingInterval: BillingInterval): number {\n    const intervalMap = {\n      month: 1,\n      quarter: 3,\n      semiAnnual: 6,\n      year: 12\n    };\n\n    return intervalMap[billingInterval] || 1;\n  }\n\n  /**\n   * Get all available billing intervals\n   */\n  getAllIntervals(): BillingInterval[] {\n    return ['month', 'quarter', 'semiAnnual', 'year'];\n  }\n}\n\n// ============================================================================\n// PRORATION CALCULATOR\n// ============================================================================\n\nexport class ProrationCalculator {\n  private discountCalculator: DiscountCalculator;\n  private intervalCalculator: BillingIntervalCalculator;\n\n  constructor(config: PricingConfig) {\n    this.discountCalculator = new DiscountCalculator(config);\n    this.intervalCalculator = new BillingIntervalCalculator(config);\n  }\n\n  /**\n   * Calculate prorated amount for plan changes\n   */\n  calculateProratedAmount(\n    currentPlan: Plan,\n    newPlan: Plan,\n    billingInterval: BillingInterval,\n    daysRemaining: number\n  ): {\n    currentPlanRefund: number;\n    newPlanCharge: number;\n    netAmount: number;\n  } {\n    // Calculate total months for the billing interval\n    const totalMonths = this.intervalCalculator.getTotalMonths(billingInterval);\n\n    // Calculate daily rates\n    const currentDailyRate = (currentPlan.basePrice * totalMonths) / (totalMonths * 30);\n    const newDailyRate = (newPlan.basePrice * totalMonths) / (totalMonths * 30);\n\n    // Calculate refund for current plan\n    const currentPlanRefund = currentDailyRate * daysRemaining;\n\n    // Calculate charge for new plan\n    const newPlanCharge = newDailyRate * daysRemaining;\n\n    // Net amount (positive means customer owes money, negative means refund)\n    const netAmount = newPlanCharge - currentPlanRefund;\n\n    return {\n      currentPlanRefund,\n      newPlanCharge,\n      netAmount\n    };\n  }\n}\n\n// ============================================================================\n// PRICE FORMATTER\n// ============================================================================\n\nexport class PriceFormatter {\n  /**\n   * Format price for display\n   */\n  static formatPrice(price: number, currency: string = 'USD'): string {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency,\n      minimumFractionDigits: 2\n    }).format(price);\n  }\n\n  /**\n   * Format discount for display\n   */\n  static formatDiscount(discount: number): string {\n    if (discount === 0) {\n      return 'No discount';\n    }\n    return `${discount}% off`;\n  }\n\n  /**\n   * Format billing interval for display\n   */\n  static formatBillingInterval(interval: BillingInterval): string {\n    const intervalMap = {\n      month: 'Monthly',\n      quarter: 'Quarterly',\n      semiAnnual: 'Semi-Annual',\n      year: 'Yearly'\n    };\n\n    return intervalMap[interval] || interval;\n  }\n}\n\n// ============================================================================\n// PRICING COMPARISON ENGINE\n// ============================================================================\n\nexport class PricingComparisonEngine {\n  private discountCalculator: DiscountCalculator;\n  private intervalCalculator: BillingIntervalCalculator;\n\n  constructor(config: PricingConfig) {\n    this.discountCalculator = new DiscountCalculator(config);\n    this.intervalCalculator = new BillingIntervalCalculator(config);\n  }\n\n  /**\n   * Get pricing comparison between two plans\n   */\n  getPricingComparison(\n    plan1: Plan,\n    plan2: Plan,\n    billingInterval: BillingInterval\n  ): {\n    plan1: PricingBreakdown;\n    plan2: PricingBreakdown;\n    difference: number;\n    savings: number;\n  } {\n    const plan1Pricing = this.calculatePricingBreakdown(plan1, billingInterval);\n    const plan2Pricing = this.calculatePricingBreakdown(plan2, billingInterval);\n    const difference = plan2Pricing.finalPrice - plan1Pricing.finalPrice;\n    const savings = Math.abs(difference);\n\n    return {\n      plan1: plan1Pricing,\n      plan2: plan2Pricing,\n      difference,\n      savings\n    };\n  }\n\n  /**\n   * Calculate pricing breakdown for a plan\n   */\n  private calculatePricingBreakdown(plan: Plan, billingInterval: BillingInterval): PricingBreakdown {\n    const totalMonths = this.intervalCalculator.getTotalMonths(billingInterval);\n    const totalPrice = plan.basePrice * totalMonths;\n    const discountInfo = this.discountCalculator.calculateDiscount(totalPrice, billingInterval);\n    const finalPrice = totalPrice - discountInfo.discountAmount;\n    const monthlyEquivalent = finalPrice / totalMonths;\n\n    return {\n      basePrice: plan.basePrice,\n      totalPrice,\n      discount: discountInfo.discount,\n      discountAmount: discountInfo.discountAmount,\n      finalPrice,\n      monthlyEquivalent,\n      billingInterval,\n      totalMonths\n    };\n  }\n}\n\n// ============================================================================\n// MAIN PRICING CALCULATOR (SIMPLIFIED)\n// ============================================================================\n\nexport class PricingCalculator {\n  private config: PricingConfig;\n  private discountCalculator: DiscountCalculator;\n  private intervalCalculator: BillingIntervalCalculator;\n  private prorationCalculator: ProrationCalculator;\n  private comparisonEngine: PricingComparisonEngine;\n\n  constructor(config: PricingConfig = DEFAULT_PRICING_CONFIG) {\n    this.config = config;\n    this.discountCalculator = new DiscountCalculator(config);\n    this.intervalCalculator = new BillingIntervalCalculator(config);\n    this.prorationCalculator = new ProrationCalculator(config);\n    this.comparisonEngine = new PricingComparisonEngine(config);\n  }\n\n  /**\n   * Calculate subscription price based on plan and billing interval\n   */\n  calculateSubscriptionPrice(plan: Plan, billingInterval: BillingInterval): number {\n    const breakdown = this.getPricingBreakdown(plan, billingInterval);\n    return breakdown.finalPrice;\n  }\n\n  /**\n   * Get detailed pricing breakdown\n   */\n  getPricingBreakdown(plan: Plan, billingInterval: BillingInterval): PricingBreakdown {\n    const totalMonths = this.intervalCalculator.getTotalMonths(billingInterval);\n    const totalPrice = plan.basePrice * totalMonths;\n    const discountInfo = this.discountCalculator.calculateDiscount(totalPrice, billingInterval);\n    const finalPrice = totalPrice - discountInfo.discountAmount;\n    const monthlyEquivalent = finalPrice / totalMonths;\n\n    return {\n      basePrice: plan.basePrice,\n      totalPrice,\n      discount: discountInfo.discount,\n      discountAmount: discountInfo.discountAmount,\n      finalPrice,\n      monthlyEquivalent,\n      billingInterval,\n      totalMonths\n    };\n  }\n\n  /**\n   * Get all pricing options for a plan\n   */\n  getAllPricingOptions(plan: Plan): Record<BillingInterval, PricingBreakdown> {\n    const intervals = this.intervalCalculator.getAllIntervals();\n    const pricing: Record<BillingInterval, PricingBreakdown> = {} as any;\n\n    for (const interval of intervals) {\n      pricing[interval] = this.getPricingBreakdown(plan, interval);\n    }\n\n    return pricing;\n  }\n\n  /**\n   * Get pricing comparison between two plans\n   */\n  getPricingComparison(plan1: Plan, plan2: Plan, billingInterval: BillingInterval) {\n    return this.comparisonEngine.getPricingComparison(plan1, plan2, billingInterval);\n  }\n\n  /**\n   * Calculate prorated amount for plan changes\n   */\n  calculateProratedAmount(\n    currentPlan: Plan,\n    newPlan: Plan,\n    billingInterval: BillingInterval,\n    daysRemaining: number\n  ) {\n    return this.prorationCalculator.calculateProratedAmount(\n      currentPlan,\n      newPlan,\n      billingInterval,\n      daysRemaining\n    );\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(newConfig: PricingConfig): void {\n    this.config = newConfig;\n    this.discountCalculator = new DiscountCalculator(newConfig);\n    this.intervalCalculator = new BillingIntervalCalculator(newConfig);\n    this.prorationCalculator = new ProrationCalculator(newConfig);\n    this.comparisonEngine = new PricingComparisonEngine(newConfig);\n  }\n\n  getConfig(): PricingConfig {\n    return { ...this.config };\n  }\n}\n\n// ============================================================================\n// FACTORY FUNCTIONS\n// ============================================================================\n\nexport function createPricingCalculator(config?: PricingConfig): PricingCalculator {\n  return new PricingCalculator(config);\n}\n\nexport function createDiscountCalculator(config: PricingConfig): DiscountCalculator {\n  return new DiscountCalculator(config);\n}\n\nexport function createBillingIntervalCalculator(config: PricingConfig): BillingIntervalCalculator {\n  return new BillingIntervalCalculator(config);\n}\n\nexport function createProrationCalculator(config: PricingConfig): ProrationCalculator {\n  return new ProrationCalculator(config);\n}\n\nexport function createPricingComparisonEngine(config: PricingConfig): PricingComparisonEngine {\n  return new PricingComparisonEngine(config);\n}\n\n// ============================================================================\n// DEFAULT CONFIG\n// ============================================================================\n\nexport const DEFAULT_PRICING_CONFIG: PricingConfig = {\n  discounts: {\n    month: 0,        // 0% discount\n    quarter: 10,     // 10% discount\n    semiAnnual: 15,  // 15% discount\n    year: 20         // 20% discount\n  },\n  intervals: {\n    month: { interval: 'month' as const, intervalCount: 1 },\n    quarter: { interval: 'month' as const, intervalCount: 3 },\n    semiAnnual: { interval: 'month' as const, intervalCount: 6 },\n    year: { interval: 'year' as const, intervalCount: 1 }\n  }\n};\n\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n\n// Export default instance\nexport const pricingCalculator = new PricingCalculator();\n\n// Export utility functions\nexport const calculateSubscriptionPrice = (plan: Plan, billingInterval: BillingInterval) =>\n  pricingCalculator.calculateSubscriptionPrice(plan, billingInterval);\n\nexport const getPricingBreakdown = (plan: Plan, billingInterval: BillingInterval) =>\n  pricingCalculator.getPricingBreakdown(plan, billingInterval);\n\nexport const getAllPricingOptions = (plan: Plan) =>\n  pricingCalculator.getAllPricingOptions(plan);\n\nexport const getPricingComparison = (plan1: Plan, plan2: Plan, billingInterval: BillingInterval) =>\n  pricingCalculator.getPricingComparison(plan1, plan2, billingInterval);\n\nexport const calculateProratedAmount = (\n  currentPlan: Plan,\n  newPlan: Plan,\n  billingInterval: BillingInterval,\n  daysRemaining: number\n) => pricingCalculator.calculateProratedAmount(currentPlan, newPlan, billingInterval, daysRemaining);\n\n// ============================================================================\n// ADDITIONAL UTILITY FUNCTIONS (for UI components)\n// ============================================================================\n\n/**\n * Format billing cycle for display\n */\nexport const formatBillingCycle = (billingInterval: BillingInterval): string => {\n  switch (billingInterval) {\n    case 'month':\n      return 'Monthly';\n    case 'quarter':\n      return 'Quarterly';\n    case 'semiAnnual':\n      return 'Semi-Annual';\n    case 'year':\n      return 'Yearly';\n    default:\n      return billingInterval;\n  }\n};\n\n/**\n * Get billing cycle discount percentage\n */\nexport const getBillingCycleDiscount = (billingInterval: BillingInterval): number => {\n  return DEFAULT_PRICING_CONFIG.discounts[billingInterval] || 0;\n};\n\n/**\n * Calculate renewal price\n */\nexport const calculateRenewalPrice = (plan: Plan, billingInterval: BillingInterval): number => {\n  return calculateSubscriptionPrice(plan, billingInterval);\n};\n\n/**\n * Calculate savings amount\n */\nexport const calculateSavings = (originalPrice: number, discountedPrice: number): number => {\n  return Math.max(0, originalPrice - discountedPrice);\n};\n\n/**\n * Get discount percentage\n */\nexport const getDiscountPercentage = (billingInterval: BillingInterval): number => {\n  return DEFAULT_PRICING_CONFIG.discounts[billingInterval] || 0;\n};\n\n/**\n * Calculate discounted price\n */\nexport const calculateDiscountedPrice = (originalPrice: number, discountPercentage: number): number => {\n  const discountAmount = originalPrice * (discountPercentage / 100);\n  return Math.max(0, originalPrice - discountAmount);\n};\n\n// ============================================================================\n// PRICING RESOLVER CLASS (from pricing-resolver.ts)\n// ============================================================================\n\nexport class PricingResolver {\n  /**\n   * Resolve pricing type cho product da trn merchant config\n   * Simple: Ch dng pricingType t merchant (khng cn pricingConfig object)\n   */\n  static resolvePricingType(\n    product: Product,\n    merchant: Merchant\n  ): PricingType {\n    // Use pricingType directly from merchant\n    return (merchant.pricingType as PricingType) || 'FIXED';\n  }\n  \n  /**\n   * Get effective pricing config cho product\n   */\n  static getEffectivePricingConfig(\n    product: Product,\n    merchant: Merchant\n  ): PricingInfo {\n    const pricingType = this.resolvePricingType(product, merchant);\n    \n    return {\n      pricingType,\n      pricePerUnit: product.rentPrice || 0,\n      minDuration: 1,\n      maxDuration: 365,\n      requireRentalDates: false,\n      showPricingOptions: true\n    };\n  }\n\n  /**\n   * Calculate pricing cho product\n   */\n  static calculatePricing(\n    product: Product,\n    merchant: Merchant,\n    duration?: number,\n    quantity: number = 1\n  ): CalculatedPricing {\n    const config = this.getEffectivePricingConfig(product, merchant);\n    const unitPrice = config.pricePerUnit;\n    const totalPrice = unitPrice * quantity * (duration || 1);\n    \n    return {\n      unitPrice,\n      totalPrice,\n      deposit: product.deposit || 0,\n      pricingType: config.pricingType,\n      duration,\n      durationUnit: 'days'\n    };\n  }\n}\n\n// ============================================================================\n// PRICING VALIDATOR CLASS (from pricing-validation.ts)\n// ============================================================================\n\nexport class PricingValidator {\n  /**\n   * Validate rental period for a product\n   */\n  static validateRentalPeriod(\n    product: Product,\n    merchant: Merchant,\n    rentalStartAt: Date,\n    rentalEndAt: Date,\n    quantity: number = 1\n  ): RentalPeriodValidation {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n    const suggestions: string[] = [];\n\n    // Get pricing type from merchant (simplified - no need for pricingConfig object)\n    const pricingType = merchant.pricingType || 'FIXED';\n    const businessType = merchant.businessType || 'GENERAL';\n\n    // Validate rental dates\n    if (rentalStartAt >= rentalEndAt) {\n      errors.push('Rental start date must be before end date');\n    }\n\n    // Calculate duration in days\n    const durationMs = rentalEndAt.getTime() - rentalStartAt.getTime();\n    const durationDays = Math.ceil(durationMs / (1000 * 60 * 60 * 24));\n\n    // Use default duration limits (simplified)\n    const minDuration = 1;\n    const maxDuration = 365;\n    \n    if (durationDays < minDuration) {\n      errors.push(`Minimum rental duration is ${minDuration} day`);\n      suggestions.push(`Please select at least ${minDuration} day`);\n    }\n\n    if (durationDays > maxDuration) {\n      warnings.push(`Rental duration (${durationDays} days) exceeds recommended maximum (${maxDuration} days)`);\n      suggestions.push('Consider splitting into multiple rentals');\n    }\n\n    // Validate quantity\n    if (quantity <= 0) {\n      errors.push('Quantity must be greater than 0');\n    }\n\n    if (quantity > 100) {\n      warnings.push('Large quantity rental detected');\n      suggestions.push('Consider bulk pricing or contact for custom quote');\n    }\n\n    // Validate product availability\n    if (product.stock < quantity) {\n      errors.push(`Insufficient stock. Available: ${product.stock}, Requested: ${quantity}`);\n    }\n\n    // Validate pricing\n    if (!product.rentPrice || product.rentPrice <= 0) {\n      errors.push('Invalid product pricing');\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      suggestions\n    };\n  }\n\n  /**\n   * Validate pricing configuration\n   */\n  static validatePricingConfig(config: any): ValidationResult {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    // Check required fields\n    if (!config.defaultPricingType) {\n      errors.push('Default pricing type is required');\n    }\n\n    if (!config.durationLimits) {\n      errors.push('Duration limits are required');\n    } else {\n      if (!config.durationLimits.minDays || config.durationLimits.minDays < 1) {\n        errors.push('Minimum duration must be at least 1 day');\n      }\n      if (!config.durationLimits.maxDays || config.durationLimits.maxDays < 1) {\n        errors.push('Maximum duration must be at least 1 day');\n      }\n      if (config.durationLimits.minDays >= config.durationLimits.maxDays) {\n        errors.push('Minimum duration must be less than maximum duration');\n      }\n    }\n\n    // Check business rules\n    if (config.businessRules) {\n      if (config.businessRules.requireDeposit && config.businessRules.depositPercentage <= 0) {\n        errors.push('Deposit percentage must be greater than 0 when deposits are required');\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      error: errors.length > 0 ? errors.join('; ') : undefined,\n      warning: warnings.length > 0 ? warnings.join('; ') : undefined,\n      suggestions: errors.length > 0 ? ['Review pricing configuration'] : undefined\n    };\n  }\n}\n","import { PrismaClient } from '@prisma/client';\n\n// Global Prisma client instance for singleton pattern\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\n// Create a singleton Prisma client instance\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient({\n  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n});\n\n// Store the instance globally in development to prevent multiple instances\nif (process.env.NODE_ENV !== 'production') {\n  globalForPrisma.prisma = prisma;\n} ","// ============================================================================\n// SIMPLIFIED SUBSCRIPTION DATABASE FUNCTIONS\n// ============================================================================\n\nimport { prisma } from './client';\nimport { calculateSubscriptionPrice, getPricingBreakdown } from '@rentalshop/utils';\nimport type { \n  Subscription, \n  Plan, \n  PlanLimits,\n  SubscriptionCreateInput, \n  SubscriptionUpdateInput,\n  SubscriptionStatus,\n  BillingInterval\n} from '@rentalshop/types';\n\n// ============================================================================\n// PRICING UTILITIES\n// ============================================================================\n\n/**\n * Generate pricing object from base price\n */\nfunction generatePricingFromBasePrice(basePrice: number) {\n  const monthlyPrice = basePrice;\n  const quarterlyPrice = monthlyPrice * 3;\n  const yearlyPrice = monthlyPrice * 12;\n  \n  return {\n    monthly: {\n      price: monthlyPrice,\n      discount: 0,\n      savings: 0\n    },\n    quarterly: {\n      price: quarterlyPrice,\n      discount: 5, // 5% discount for quarterly\n      savings: quarterlyPrice * 0.05\n    },\n    yearly: {\n      price: yearlyPrice,\n      discount: 15, // 15% discount for yearly\n      savings: yearlyPrice * 0.15\n    }\n  };\n}\n\n/**\n * Convert Prisma plan object to our Plan type\n */\nfunction convertPrismaPlanToPlan(prismaPlan: any): Plan {\n  return {\n    id: prismaPlan.id,\n    name: prismaPlan.name,\n    description: prismaPlan.description,\n    basePrice: prismaPlan.basePrice,\n    currency: prismaPlan.currency,\n    trialDays: prismaPlan.trialDays,\n    limits: JSON.parse(prismaPlan.limits as string) as PlanLimits,\n    features: JSON.parse(prismaPlan.features as string) as string[],\n    isActive: prismaPlan.isActive,\n    isPopular: prismaPlan.isPopular,\n    sortOrder: prismaPlan.sortOrder,\n    pricing: generatePricingFromBasePrice(prismaPlan.basePrice),\n    createdAt: prismaPlan.createdAt,\n    updatedAt: prismaPlan.updatedAt,\n    deletedAt: prismaPlan.deletedAt || undefined\n  };\n}\n\n/**\n * Helper function to generate pricing object for a plan\n */\nfunction generatePlanPricing(basePrice: number) {\n  return {\n    monthly: {\n      price: basePrice,\n      discount: 0,\n      savings: 0\n    },\n    quarterly: {\n      price: basePrice * 3 * 0.95, // 5% discount for quarterly\n      discount: 5,\n      savings: basePrice * 3 * 0.05\n    },\n    yearly: {\n      price: basePrice * 12 * 0.85, // 15% discount for yearly\n      discount: 15,\n      savings: basePrice * 12 * 0.15\n    }\n  };\n}\n\n/**\n * Helper function to transform database plan to Plan type\n */\nfunction transformPlanFromDb(plan: any): Plan {\n  return {\n    id: plan.id,\n    name: plan.name,\n    description: plan.description,\n    basePrice: plan.basePrice,\n    currency: plan.currency,\n    trialDays: plan.trialDays,\n    limits: typeof plan.limits === 'string' ? JSON.parse(plan.limits) : plan.limits,\n    features: typeof plan.features === 'string' ? JSON.parse(plan.features) : plan.features,\n    isActive: plan.isActive,\n    isPopular: plan.isPopular,\n    sortOrder: plan.sortOrder,\n    pricing: generatePlanPricing(plan.basePrice),\n    createdAt: plan.createdAt,\n    updatedAt: plan.updatedAt,\n    ...(plan.deletedAt && { deletedAt: plan.deletedAt })\n  };\n}\n\nexport function calculatePlanPricing(plan: Plan): Record<BillingInterval, number> {\n  const pricing: Record<BillingInterval, number> = {} as any;\n  \n  const intervals: BillingInterval[] = ['month', 'quarter', 'semiAnnual', 'year'];\n  \n  for (const interval of intervals) {\n    pricing[interval] = calculateSubscriptionPrice(plan, interval);\n  }\n  \n  return pricing;\n}\n\nexport function calculatePeriodEnd(startDate: Date, billingInterval: BillingInterval): Date {\n  const endDate = new Date(startDate);\n  \n  switch (billingInterval) {\n    case 'month':\n      endDate.setMonth(endDate.getMonth() + 1);\n      break;\n    case 'quarter':\n      endDate.setMonth(endDate.getMonth() + 3);\n      break;\n    case 'semiAnnual':\n      endDate.setMonth(endDate.getMonth() + 6);\n      break;\n    case 'year':\n      endDate.setFullYear(endDate.getFullYear() + 1);\n      break;\n    default:\n      endDate.setMonth(endDate.getMonth() + 1);\n  }\n  \n  return endDate;\n}\n\n// ============================================================================\n// SUBSCRIPTION QUERIES\n// ============================================================================\n\nexport async function getSubscriptionByMerchantId(merchantId: number): Promise<Subscription | null> {\n  // Find the merchant by id\n  const merchant = await prisma.merchant.findUnique({\n    where: { id: merchantId },\n    select: { id: true }\n  });\n  \n  if (!merchant) {\n    return null;\n  }\n  \n  const subscription = await prisma.subscription.findUnique({\n    where: { merchantId: merchant.id },\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    }\n  });\n\n  if (!subscription) return null;\n\n  return {\n    id: subscription.id,\n    merchantId: subscription.merchantId,\n    planId: subscription.planId,\n    status: subscription.status as SubscriptionStatus,\n    billingInterval: subscription.interval as BillingInterval,\n    currentPeriodStart: subscription.currentPeriodStart,\n    currentPeriodEnd: subscription.currentPeriodEnd,\n    amount: subscription.amount,\n    createdAt: subscription.createdAt,\n    updatedAt: subscription.updatedAt,\n    merchant: subscription.merchant,\n    plan: convertPrismaPlanToPlan(subscription.plan)\n  };\n}\n\nexport async function getAllSubscriptions(): Promise<Subscription[]> {\n  const subscriptions = await prisma.subscription.findMany({\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    },\n    orderBy: { createdAt: 'desc' }\n  });\n\n  return subscriptions.map((sub: any) => ({\n    id: sub.id,\n    merchantId: sub.merchantId,\n    planId: sub.planId,\n    status: sub.status as SubscriptionStatus,\n    billingInterval: sub.interval as BillingInterval,\n    currentPeriodStart: sub.currentPeriodStart,\n    currentPeriodEnd: sub.currentPeriodEnd,\n    amount: sub.amount,\n    createdAt: sub.createdAt,\n    updatedAt: sub.updatedAt,\n    merchant: sub.merchant,\n    plan: convertPrismaPlanToPlan(sub.plan)\n  }));\n}\n\n// ============================================================================\n// SUBSCRIPTION SEARCH\n// ============================================================================\n\nexport async function searchSubscriptions(filters: {\n  merchantId?: number;\n  planId?: number;\n  status?: string;\n  startDate?: Date;\n  endDate?: Date;\n  limit?: number;\n  offset?: number;\n}): Promise<{ subscriptions: Subscription[]; total: number; hasMore: boolean }> {\n  const where: any = {};\n\n  // Apply filters\n  if (filters.merchantId) {\n    where.merchantId = filters.merchantId;\n  }\n\n  if (filters.planId) {\n    where.planId = filters.planId;\n  }\n\n  if (filters.status) {\n    where.status = filters.status;\n  }\n\n  if (filters.startDate || filters.endDate) {\n    where.currentPeriodStart = {};\n    if (filters.startDate) where.currentPeriodStart.gte = filters.startDate;\n    if (filters.endDate) where.currentPeriodStart.lte = filters.endDate;\n  }\n\n  // Get total count\n  const total = await prisma.subscription.count({ where });\n\n  // Get subscriptions with pagination\n  const subscriptions = await prisma.subscription.findMany({\n    where,\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    },\n    orderBy: { createdAt: 'desc' },\n    take: filters.limit || 20,\n    skip: filters.offset || 0\n  });\n\n  const hasMore = (filters.offset || 0) + (filters.limit || 20) < total;\n\n  return {\n    subscriptions: subscriptions.map((sub: any) => ({\n      id: sub.id,\n      merchantId: sub.merchantId,\n      planId: sub.planId,\n      status: sub.status as SubscriptionStatus,\n      billingInterval: sub.interval as BillingInterval,\n      currentPeriodStart: sub.currentPeriodStart,\n      currentPeriodEnd: sub.currentPeriodEnd,\n      amount: sub.amount,\n      createdAt: sub.createdAt,\n      updatedAt: sub.updatedAt,\n      merchant: sub.merchant,\n      plan: {\n        id: sub.plan.id,\n        name: sub.plan.name,\n        description: sub.plan.description,\n        basePrice: sub.plan.basePrice,\n        currency: sub.plan.currency,\n        trialDays: sub.plan.trialDays,\n        limits: JSON.parse(sub.plan.limits as string) as PlanLimits,\n        features: JSON.parse(sub.plan.features as string) as string[],\n        isActive: sub.plan.isActive,\n        isPopular: sub.plan.isPopular,\n        sortOrder: sub.plan.sortOrder,\n        pricing: generatePricingFromBasePrice(sub.plan.basePrice),\n        createdAt: sub.plan.createdAt,\n        updatedAt: sub.plan.updatedAt\n      }\n    })),\n    total,\n    hasMore\n  };\n}\n\n// ============================================================================\n// SUBSCRIPTION MUTATIONS\n// ============================================================================\n\nexport async function createSubscription(data: SubscriptionCreateInput): Promise<Subscription> {\n  // Get merchant by id\n  const merchant = await prisma.merchant.findUnique({\n    where: { id: data.merchantId }\n  });\n\n  if (!merchant) {\n    throw new Error('Merchant not found');\n  }\n\n  // Get plan by id\n  const plan = await prisma.plan.findUnique({\n    where: { id: data.planId }\n  });\n\n  if (!plan) {\n    throw new Error('Plan not found');\n  }\n\n  // Check if merchant already has a subscription\n  const existingSubscription = await prisma.subscription.findUnique({\n    where: { merchantId: merchant.id }\n  });\n\n  if (existingSubscription) {\n    throw new Error('Merchant already has a subscription');\n  }\n\n  // Calculate pricing based on billing interval\n  const billingInterval = data.billingInterval || 'month';\n  const convertedPlan = convertPrismaPlanToPlan(plan);\n  const amount = calculateSubscriptionPrice(convertedPlan, billingInterval);\n  \n  // Calculate dates\n  const startDate = data.startDate || new Date();\n  const currentPeriodEnd = calculatePeriodEnd(startDate, billingInterval);\n\n  const subscription = await prisma.subscription.create({\n    data: {\n      merchantId: merchant.id,\n      planId: plan.id,\n      status: data.status || 'trial',\n      interval: billingInterval,\n      currentPeriodStart: startDate,\n      currentPeriodEnd: currentPeriodEnd,\n      amount: amount\n    },\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    }\n  });\n\n  // Update merchant subscription status\n  await prisma.merchant.update({\n    where: { id: merchant.id },\n    data: {\n      subscriptionStatus: subscription.status\n    }\n  });\n\n  return {\n    id: subscription.id,\n    merchantId: subscription.merchantId,\n    planId: subscription.planId,\n    status: subscription.status as SubscriptionStatus,\n    billingInterval: subscription.interval as BillingInterval,\n    currentPeriodStart: subscription.currentPeriodStart,\n    currentPeriodEnd: subscription.currentPeriodEnd,\n    amount: subscription.amount,\n    createdAt: subscription.createdAt,\n    updatedAt: subscription.updatedAt,\n    merchant: subscription.merchant,\n    plan: convertPrismaPlanToPlan(subscription.plan)\n  };\n}\n\n// ============================================================================\n// PLAN FUNCTIONS\n// ============================================================================\n\nexport async function getAllPlans(): Promise<Plan[]> {\n  const plans = await prisma.plan.findMany({\n    where: { isActive: true },\n    orderBy: { sortOrder: 'asc' }\n  });\n\n  return plans.map((plan: any) => convertPrismaPlanToPlan(plan));\n}\n\nexport async function getPlanById(planId: number): Promise<Plan | null> {\n  const plan = await prisma.plan.findUnique({\n    where: { id: planId }\n  });\n\n  if (!plan) return null;\n\n  return {\n    id: plan.id,\n    name: plan.name,\n    description: plan.description,\n    basePrice: plan.basePrice,\n    currency: plan.currency,\n    trialDays: plan.trialDays,\n    limits: JSON.parse(plan.limits as string) as PlanLimits,\n    features: JSON.parse(plan.features as string) as string[],\n    isActive: plan.isActive,\n    isPopular: plan.isPopular,\n    sortOrder: plan.sortOrder,\n    pricing: generatePricingFromBasePrice(plan.basePrice),\n    createdAt: plan.createdAt,\n    updatedAt: plan.updatedAt,\n    deletedAt: plan.deletedAt || undefined\n  };\n}\n\n// ============================================================================\n// SUBSCRIPTION ACTIONS\n// ============================================================================\n\nexport async function changePlan(\n  subscriptionId: number, \n  newPlanId: number, \n  billingInterval: BillingInterval = 'month'\n): Promise<Subscription> {\n  const subscription = await prisma.subscription.findUnique({\n    where: { id: subscriptionId }\n  });\n\n  if (!subscription) {\n    throw new Error('Subscription not found');\n  }\n\n  const plan = await prisma.plan.findUnique({\n    where: { id: newPlanId }\n  });\n\n  if (!plan) {\n    throw new Error('Plan not found');\n  }\n\n  const convertedPlan = convertPrismaPlanToPlan(plan);\n  const amount = calculateSubscriptionPrice(convertedPlan, billingInterval);\n\n  // Calculate new period dates based on billing interval\n  const now = new Date();\n  const newPeriodStart = now;\n  \n  // Calculate period duration in days based on billing interval\n  const getPeriodDays = (interval: BillingInterval): number => {\n    switch (interval) {\n      case 'month': return 30;\n      case 'quarter': return 90;\n      case 'semiAnnual': return 180;\n      case 'year': return 365;\n      default: return 30;\n    }\n  };\n  \n  const periodDays = getPeriodDays(billingInterval);\n  const newPeriodEnd = new Date(now.getTime() + periodDays * 24 * 60 * 60 * 1000);\n\n  const updatedSubscription = await prisma.subscription.update({\n    where: { id: subscriptionId },\n    data: {\n      planId: plan.id,\n      interval: billingInterval,\n      amount: amount,\n      currentPeriodStart: newPeriodStart,\n      currentPeriodEnd: newPeriodEnd,\n      updatedAt: new Date()\n    },\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    }\n  });\n\n  // Update merchant's subscription status\n  await prisma.merchant.update({\n    where: { id: subscription.merchantId },\n    data: { subscriptionStatus: updatedSubscription.status }\n  });\n\n  return {\n    id: updatedSubscription.id,\n    merchantId: updatedSubscription.merchantId,\n    planId: updatedSubscription.planId,\n    status: updatedSubscription.status as SubscriptionStatus,\n    billingInterval: updatedSubscription.interval as BillingInterval,\n    currentPeriodStart: updatedSubscription.currentPeriodStart,\n    currentPeriodEnd: updatedSubscription.currentPeriodEnd,\n    amount: updatedSubscription.amount,\n    createdAt: updatedSubscription.createdAt,\n    updatedAt: updatedSubscription.updatedAt,\n    // Enhanced subscription period information\n    subscriptionPeriod: {\n      startDate: updatedSubscription.currentPeriodStart,\n      endDate: updatedSubscription.currentPeriodEnd,\n      duration: updatedSubscription.interval,\n      isActive: updatedSubscription.status === 'active',\n      daysRemaining: Math.ceil((updatedSubscription.currentPeriodEnd.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24)),\n      nextBillingDate: updatedSubscription.currentPeriodEnd\n    },\n    merchant: updatedSubscription.merchant,\n    plan: convertPrismaPlanToPlan(updatedSubscription.plan)\n  };\n}\n\nexport async function pauseSubscription(subscriptionId: number): Promise<Subscription> {\n  const subscription = await prisma.subscription.update({\n    where: { id: subscriptionId },\n    data: {\n      status: 'paused',\n      updatedAt: new Date()\n    },\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    }\n  });\n\n  return {\n    id: subscription.id,\n    merchantId: subscription.merchantId,\n    planId: subscription.planId,\n    status: subscription.status as SubscriptionStatus,\n    billingInterval: subscription.interval as BillingInterval,\n    currentPeriodStart: subscription.currentPeriodStart,\n    currentPeriodEnd: subscription.currentPeriodEnd,\n    amount: subscription.amount,\n    createdAt: subscription.createdAt,\n    updatedAt: subscription.updatedAt,\n    merchant: subscription.merchant,\n    plan: convertPrismaPlanToPlan(subscription.plan)\n  };\n}\n\nexport async function resumeSubscription(subscriptionId: number): Promise<Subscription> {\n  const subscription = await prisma.subscription.update({\n    where: { id: subscriptionId },\n    data: {\n      status: 'active',\n      updatedAt: new Date()\n    },\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    }\n  });\n\n  return {\n    id: subscription.id,\n    merchantId: subscription.merchantId,\n    planId: subscription.planId,\n    status: subscription.status as SubscriptionStatus,\n    billingInterval: subscription.interval as BillingInterval,\n    currentPeriodStart: subscription.currentPeriodStart,\n    currentPeriodEnd: subscription.currentPeriodEnd,\n    amount: subscription.amount,\n    createdAt: subscription.createdAt,\n    updatedAt: subscription.updatedAt,\n    merchant: subscription.merchant,\n    plan: convertPrismaPlanToPlan(subscription.plan)\n  };\n}\n\nexport async function cancelSubscription(subscriptionId: number): Promise<{ success: boolean; message: string; data?: Subscription; statusCode?: number }> {\n  try {\n    const subscription = await prisma.subscription.update({\n      where: { id: subscriptionId },\n      data: {\n        status: 'cancelled',\n        updatedAt: new Date()\n      },\n      include: {\n        merchant: {\n          select: {\n      id: true,\n            name: true,\n            email: true,\n            subscriptionStatus: true\n          }\n        },\n        plan: true\n      }\n    });\n\n    const result: Subscription = {\n      id: subscription.id,\n      merchantId: subscription.merchantId,\n      planId: subscription.planId,\n      status: subscription.status as SubscriptionStatus,\n      billingInterval: subscription.interval as BillingInterval,\n      currentPeriodStart: subscription.currentPeriodStart,\n      currentPeriodEnd: subscription.currentPeriodEnd,\n      amount: subscription.amount,\n      createdAt: subscription.createdAt,\n      updatedAt: subscription.updatedAt,\n      merchant: subscription.merchant,\n      plan: {\n        id: subscription.plan.id,\n        name: subscription.plan.name,\n        description: subscription.plan.description,\n        basePrice: subscription.plan.basePrice,\n        currency: subscription.plan.currency,\n        trialDays: subscription.plan.trialDays,\n        limits: JSON.parse(subscription.plan.limits as string) as PlanLimits,\n        features: JSON.parse(subscription.plan.features as string) as string[],\n        isActive: subscription.plan.isActive,\n        isPopular: subscription.plan.isPopular,\n        sortOrder: subscription.plan.sortOrder,\n        pricing: generatePricingFromBasePrice(subscription.plan.basePrice),\n        createdAt: subscription.plan.createdAt,\n        updatedAt: subscription.plan.updatedAt\n      }\n    };\n\n    return {\n      success: true,\n      message: 'Subscription cancelled successfully',\n      data: result\n    };\n  } catch (error) {\n    console.error('Error cancelling subscription:', error);\n    return {\n      success: false,\n      message: 'Failed to cancel subscription',\n      statusCode: 500\n    };\n  }\n}\n\n// ============================================================================\n// SUBSCRIPTION RENEWAL FUNCTIONS\n// ============================================================================\n\nexport async function getExpiredSubscriptions(): Promise<Subscription[]> {\n  const now = new Date();\n  \n  const subscriptions = await prisma.subscription.findMany({\n    where: {\n      currentPeriodEnd: {\n        lt: now\n      },\n      status: {\n        in: ['active', 'trial']\n      }\n    },\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    },\n    orderBy: { currentPeriodEnd: 'asc' }\n  });\n\n  return subscriptions.map((sub: any) => ({\n    id: sub.id,\n    merchantId: sub.merchantId,\n    planId: sub.planId,\n    status: sub.status as SubscriptionStatus,\n    billingInterval: sub.interval as BillingInterval,\n    currentPeriodStart: sub.currentPeriodStart,\n    currentPeriodEnd: sub.currentPeriodEnd,\n    amount: sub.amount,\n    createdAt: sub.createdAt,\n    updatedAt: sub.updatedAt,\n    merchant: sub.merchant,\n    plan: convertPrismaPlanToPlan(sub.plan)\n  }));\n}\n\nexport async function getSubscriptionById(id: number): Promise<Subscription | null> {\n  const subscription = await prisma.subscription.findUnique({\n    where: { id },\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    }\n  });\n\n  if (!subscription) return null;\n\n  return {\n    id: subscription.id,\n    merchantId: subscription.merchantId,\n    planId: subscription.planId,\n    status: subscription.status as SubscriptionStatus,\n    billingInterval: subscription.interval as BillingInterval,\n    currentPeriodStart: subscription.currentPeriodStart,\n    currentPeriodEnd: subscription.currentPeriodEnd,\n    amount: subscription.amount,\n    createdAt: subscription.createdAt,\n    updatedAt: subscription.updatedAt,\n    merchant: subscription.merchant,\n    plan: convertPrismaPlanToPlan(subscription.plan)\n  };\n}\n\nexport async function updateSubscription(\n  subscriptionId: number, \n  data: Partial<{\n    status: SubscriptionStatus;\n    currentPeriodStart: Date;\n    currentPeriodEnd: Date;\n    amount: number;\n  }>\n): Promise<Subscription> {\n  const subscription = await prisma.subscription.update({\n    where: { id: subscriptionId },\n    data: {\n      ...data,\n      updatedAt: new Date()\n    },\n    include: {\n      merchant: {\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          subscriptionStatus: true\n        }\n      },\n      plan: true\n    }\n  });\n\n  return {\n    id: subscription.id,\n    merchantId: subscription.merchantId,\n    planId: subscription.planId,\n    status: subscription.status as SubscriptionStatus,\n    billingInterval: subscription.interval as BillingInterval,\n    currentPeriodStart: subscription.currentPeriodStart,\n    currentPeriodEnd: subscription.currentPeriodEnd,\n    amount: subscription.amount,\n    createdAt: subscription.createdAt,\n    updatedAt: subscription.updatedAt,\n    merchant: subscription.merchant,\n    plan: convertPrismaPlanToPlan(subscription.plan)\n  };\n}\n\n// ============================================================================\n// SUBSCRIPTION PAYMENT FUNCTIONS\n// ============================================================================\n\nexport interface SubscriptionPaymentCreateInput {\n  subscriptionId: number;\n  amount: number;\n  currency: string;\n  method: string;\n  status: string;\n  transactionId: string;\n  description?: string;\n  failureReason?: string;\n}\n\nexport interface SubscriptionPayment {\n  id: number;\n  subscriptionId: number;\n  amount: number;\n  currency: string;\n  method: string;\n  status: string;\n  transactionId: string;\n  description?: string;\n  failureReason?: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport async function createSubscriptionPayment(data: SubscriptionPaymentCreateInput): Promise<SubscriptionPayment> {\n  // Find subscription by id\n  const subscription = await prisma.subscription.findUnique({\n    where: { id: data.subscriptionId },\n    select: { id: true }\n  });\n\n  if (!subscription) {\n    throw new Error('Subscription not found');\n  }\n\n  const payment = await prisma.payment.create({\n    data: {\n      subscriptionId: subscription.id,\n      amount: data.amount,\n      currency: data.currency,\n      method: data.method,\n      type: 'SUBSCRIPTION',\n      status: data.status,\n      transactionId: data.transactionId,\n      description: data.description,\n      failureReason: data.failureReason\n    }\n  });\n\n  return {\n    id: payment.id,\n    subscriptionId: data.subscriptionId,\n    amount: payment.amount,\n    currency: payment.currency,\n    method: payment.method,\n    status: payment.status,\n    transactionId: payment.transactionId || '',\n    description: payment.description || undefined,\n    failureReason: payment.failureReason || undefined,\n    createdAt: payment.createdAt,\n    updatedAt: payment.updatedAt\n  };\n}\n\n// ============================================================================\n// SUBSCRIPTION PAYMENT HISTORY\n// ============================================================================\n\n/**\n * Get payment history for a subscription\n * @param subscriptionId - Subscription ID\n * @param filters - Optional filters for payments\n * @returns Payment history with pagination\n */\nexport async function getSubscriptionPaymentHistory(\n  subscriptionId: number,\n  filters?: {\n    status?: string;\n    method?: string;\n    startDate?: Date;\n    endDate?: Date;\n    limit?: number;\n    offset?: number;\n  }\n): Promise<{\n  payments: SubscriptionPayment[];\n  total: number;\n  hasMore: boolean;\n}> {\n  const where: any = {\n    subscriptionId,\n    type: 'SUBSCRIPTION'\n  };\n\n  // Apply filters\n  if (filters?.status) {\n    where.status = filters.status.toUpperCase();\n  }\n\n  if (filters?.method) {\n    where.method = filters.method.toUpperCase();\n  }\n\n  if (filters?.startDate || filters?.endDate) {\n    where.createdAt = {};\n    if (filters.startDate) where.createdAt.gte = filters.startDate;\n    if (filters.endDate) where.createdAt.lte = filters.endDate;\n  }\n\n  const limit = filters?.limit || 20;\n  const offset = filters?.offset || 0;\n\n  // Get total count and payments\n  const [total, payments] = await Promise.all([\n    prisma.payment.count({ where }),\n    prisma.payment.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n      take: limit,\n      skip: offset\n    })\n  ]);\n\n  const hasMore = offset + limit < total;\n\n  return {\n    payments: payments.map(p => ({\n      id: p.id,\n      subscriptionId: subscriptionId,\n      amount: p.amount,\n      currency: p.currency,\n      method: p.method,\n      status: p.status,\n      transactionId: p.transactionId || '',\n      description: p.description || undefined,\n      failureReason: p.failureReason || undefined,\n      createdAt: p.createdAt,\n      updatedAt: p.updatedAt\n    })),\n    total,\n    hasMore\n  };\n}\n\n// ============================================================================\n// SUBSCRIPTION RENEWAL\n// ============================================================================\n\n/**\n * Renew subscription for another month with payment\n * @param subscriptionId - Subscription ID\n * @param paymentData - Payment information\n * @returns Updated subscription and payment record\n */\nexport async function renewSubscription(\n  subscriptionId: number,\n  paymentData: {\n    method: 'STRIPE' | 'TRANSFER';\n    transactionId: string;\n    reference?: string;\n    description?: string;\n  }\n): Promise<{\n  subscription: Subscription;\n  payment: SubscriptionPayment;\n}> {\n  // 1. Get subscription with merchant\n  const subscription = await prisma.subscription.findUnique({\n    where: { id: subscriptionId },\n    include: {\n      merchant: true,\n      plan: true\n    }\n  });\n\n  if (!subscription) {\n    throw new Error('Subscription not found');\n  }\n\n  // 2. Validate subscription can be renewed\n  if (subscription.status === 'cancelled') {\n    throw new Error('Cannot renew cancelled subscription');\n  }\n\n  // 3. Calculate new period (extend by 1 month)\n  const newPeriodStart = subscription.currentPeriodEnd;\n  const newPeriodEnd = calculatePeriodEnd(newPeriodStart, 'month');\n\n  // 4. Use database transaction to ensure atomicity\n  const result = await prisma.$transaction(async (tx) => {\n    // Create payment record\n    const payment = await tx.payment.create({\n      data: {\n        subscriptionId: subscription.id,\n        merchantId: subscription.merchantId,\n        amount: subscription.amount,\n        currency: subscription.currency,\n        method: paymentData.method,\n        type: 'SUBSCRIPTION',\n        status: paymentData.method === 'STRIPE' ? 'COMPLETED' : 'PENDING',\n        transactionId: paymentData.transactionId,\n        reference: paymentData.reference,\n        description: paymentData.description || `Monthly subscription renewal - ${new Date().toLocaleDateString()}`,\n        processedAt: paymentData.method === 'STRIPE' ? new Date() : null\n      }\n    });\n\n    // Update subscription period\n    const updatedSubscription = await tx.subscription.update({\n      where: { id: subscriptionId },\n      data: {\n        currentPeriodStart: newPeriodStart,\n        currentPeriodEnd: newPeriodEnd,\n        status: 'active',\n        updatedAt: new Date()\n      },\n      include: {\n        merchant: {\n          select: {\n            id: true,\n            name: true,\n            email: true,\n            subscriptionStatus: true\n          }\n        },\n        plan: true\n      }\n    });\n\n    // Update merchant status\n    await tx.merchant.update({\n      where: { id: subscription.merchantId },\n      data: {\n        subscriptionStatus: 'active',\n        lastActiveAt: new Date()\n      }\n    });\n\n    return { updatedSubscription, payment };\n  });\n\n  // 5. Return formatted response\n  return {\n    subscription: {\n      id: result.updatedSubscription.id,\n      merchantId: result.updatedSubscription.merchantId,\n      planId: result.updatedSubscription.planId,\n      status: result.updatedSubscription.status as SubscriptionStatus,\n      billingInterval: result.updatedSubscription.interval as BillingInterval,\n      currentPeriodStart: result.updatedSubscription.currentPeriodStart,\n      currentPeriodEnd: result.updatedSubscription.currentPeriodEnd,\n      amount: result.updatedSubscription.amount,\n      createdAt: result.updatedSubscription.createdAt,\n      updatedAt: result.updatedSubscription.updatedAt,\n      merchant: result.updatedSubscription.merchant,\n      plan: convertPrismaPlanToPlan(result.updatedSubscription.plan)\n    },\n    payment: {\n      id: result.payment.id,\n      subscriptionId: subscriptionId,\n      amount: result.payment.amount,\n      currency: result.payment.currency,\n      method: result.payment.method,\n      status: result.payment.status,\n      transactionId: result.payment.transactionId || '',\n      description: result.payment.description || undefined,\n      createdAt: result.payment.createdAt,\n      updatedAt: result.payment.updatedAt\n    }\n  };\n}\n\n// ============================================================================\n// SIMPLIFIED API FUNCTIONS (for db object)\n// ============================================================================\n\nexport const simplifiedSubscriptions = {\n  /**\n   * Find subscription by ID (simplified API)\n   */\n  findById: async (id: number) => {\n    return await prisma.subscription.findUnique({\n      where: { id },\n      include: {\n        merchant: { select: { id: true, name: true } },\n        plan: { select: { id: true, name: true } },\n        payments: {\n          orderBy: { createdAt: 'desc' },\n          take: 5\n        }\n      }\n    });\n  },\n\n  /**\n   * Find subscription by merchant ID (simplified API)\n   */\n  findByMerchantId: async (merchantId: number) => {\n    return await prisma.subscription.findFirst({\n      where: { \n        merchantId,\n        status: { not: 'CANCELLED' }\n      },\n      include: {\n        merchant: { select: { id: true, name: true } },\n        plan: { select: { id: true, name: true } },\n        payments: {\n          orderBy: { createdAt: 'desc' },\n          take: 5\n        }\n      }\n    });\n  },\n\n  /**\n   * Create new subscription (simplified API)\n   */\n  create: async (data: any) => {\n    return await prisma.subscription.create({\n      data,\n      include: {\n        merchant: { select: { id: true, name: true } },\n        plan: { select: { id: true, name: true } }\n      }\n    });\n  },\n\n  /**\n   * Update subscription (simplified API)\n   */\n  update: async (id: number, data: any) => {\n    return await prisma.subscription.update({\n      where: { id },\n      data,\n      include: {\n        merchant: { select: { id: true, name: true } },\n        plan: { select: { id: true, name: true } }\n      }\n    });\n  },\n\n  /**\n   * Delete subscription (simplified API)\n   */\n  delete: async (id: number) => {\n    return await prisma.subscription.update({\n      where: { id },\n      data: { \n        status: 'CANCELLED',\n        canceledAt: new Date()\n      }\n    });\n  },\n\n  /**\n   * Search subscriptions with simple filters (simplified API)\n   */\n  search: async (filters: any) => {\n    const { page = 1, limit = 20, ...whereFilters } = filters;\n    const skip = (page - 1) * limit;\n\n    // Build where clause\n    const where: any = {};\n    \n    if (whereFilters.merchantId) where.merchantId = whereFilters.merchantId;\n    if (whereFilters.planId) where.planId = whereFilters.planId;\n    if (whereFilters.isActive !== undefined) {\n      if (whereFilters.isActive) {\n        where.status = { not: 'CANCELLED' };\n      } else {\n        where.status = 'CANCELLED';\n      }\n    }\n    if (whereFilters.status) where.status = whereFilters.status;\n    \n    // Date range filters\n    if (whereFilters.startDate || whereFilters.endDate) {\n      where.createdAt = {};\n      if (whereFilters.startDate) where.createdAt.gte = whereFilters.startDate;\n      if (whereFilters.endDate) where.createdAt.lte = whereFilters.endDate;\n    }\n\n    const [subscriptions, total] = await Promise.all([\n      prisma.subscription.findMany({\n        where,\n        include: {\n          merchant: { select: { id: true, name: true } },\n          plan: { select: { id: true, name: true } },\n          payments: {\n            orderBy: { createdAt: 'desc' },\n            take: 3\n          }\n        },\n        orderBy: { createdAt: 'desc' },\n        skip,\n        take: limit\n      }),\n      prisma.subscription.count({ where })\n    ]);\n\n    return {\n      data: subscriptions,\n      total,\n      page,\n      limit,\n      hasMore: skip + limit < total\n    };\n  },\n\n  /**\n   * Get expired subscriptions (simplified API)\n   */\n  getExpired: async () => {\n    const now = new Date();\n    \n    return await prisma.subscription.findMany({\n      where: {\n        status: { not: 'CANCELLED' },\n        OR: [\n          { \n            status: 'TRIAL',\n            trialEnd: { lt: now }\n          },\n          {\n            status: 'ACTIVE',\n            currentPeriodEnd: { lt: now }\n          }\n        ]\n      },\n      include: {\n        merchant: { select: { id: true, name: true } },\n        plan: { select: { id: true, name: true } }\n      },\n      orderBy: { currentPeriodEnd: 'asc' }\n    });\n  }\n};","/**\n * Order Number Generator & Configuration\n * \n * Provides robust, concurrent-safe order number generation for rental shop orders.\n * Supports multiple formats, handles race conditions, and includes centralized configuration.\n */\n\nimport { prisma } from './index';\n\n// ============================================================================\n// TYPES & INTERFACES\n// ============================================================================\n\nexport type OrderNumberFormat = 'sequential' | 'date-based' | 'random' | 'random-numeric' | 'hybrid' | 'compact-numeric';\n\nexport interface OrderNumberConfig {\n  format: OrderNumberFormat;\n  outletId: number;\n  prefix?: string;\n  includeDate?: boolean;\n  sequenceLength?: number;\n  randomLength?: number;\n  numericOnly?: boolean;\n}\n\nexport interface OrderNumberResult {\n  orderNumber: string;\n  sequence: number;\n  generatedAt: Date;\n}\n\n// ============================================================================\n// CONFIGURATION\n// ============================================================================\n\n/**\n * Default order number format for new orders\n * \n * Available formats:\n * - 'sequential': ORD-{outletId}-{sequence} (e.g., ORD-001-0001)\n * - 'date-based': ORD-{outletId}-{date}-{sequence} (e.g., ORD-001-20250115-0001)\n * - 'random': ORD-{outletId}-{random} (e.g., ORD-001-A7B9C2)\n * - 'random-numeric': ORD-{outletId}-{random} (e.g., ORD-001-123456)\n * - 'hybrid': ORD-{outletId}-{date}-{random} (e.g., ORD-001-20250115-A7B9)\n * - 'compact-numeric': ORD{outletId}{random} (e.g., ORD00112345)\n */\nexport const ORDER_NUMBER_CONFIG = {\n  // Primary format for all new orders\n  format: 'compact-numeric' as OrderNumberFormat,\n  \n  // Prefix for all order numbers\n  prefix: 'ORD',\n  \n  // Sequence number padding (how many digits)\n  sequenceLength: 4,\n  \n  // Random string length (for random and hybrid formats)\n  randomLength: 6,\n  \n  // Whether to include date in order numbers (for date-based and hybrid)\n  includeDate: true,\n  \n  // Maximum retry attempts for collision resolution\n  maxRetries: 5,\n  \n  // Retry delay in milliseconds (exponential backoff)\n  retryDelay: 10,\n} as const;\n\n/**\n * Format-specific configurations\n */\nexport const FORMAT_CONFIGS = {\n  sequential: {\n    description: 'Sequential numbering per outlet',\n    example: 'ORD-001-0001',\n    pros: ['Outlet identification', 'Easy tracking', 'Human readable'],\n    cons: ['Business intelligence leakage', 'Race conditions possible'],\n    bestFor: 'Small to medium businesses with low concurrency'\n  },\n  \n  'date-based': {\n    description: 'Date-based with daily sequence reset',\n    example: 'ORD-001-20250115-0001',\n    pros: ['Daily organization', 'Better security', 'Easy daily reporting'],\n    cons: ['Longer numbers', 'Still somewhat predictable'],\n    bestFor: 'Medium businesses with daily operations focus'\n  },\n  \n  random: {\n    description: 'Random alphanumeric strings for security',\n    example: 'ORD-001-A7B9C2',\n    pros: ['Maximum security', 'No race conditions', 'Unpredictable'],\n    cons: ['No sequence tracking', 'Harder to manage', 'No business insights'],\n    bestFor: 'Large businesses prioritizing security'\n  },\n  \n  'random-numeric': {\n    description: 'Random numeric strings for security',\n    example: 'ORD-001-123456',\n    pros: ['Maximum security', 'No race conditions', 'Numbers only', 'Unpredictable'],\n    cons: ['No sequence tracking', 'Harder to manage', 'No business insights'],\n    bestFor: 'Businesses needing numeric-only random order numbers'\n  },\n  \n  'compact-numeric': {\n    description: 'Compact format with outlet ID and 5-digit random number',\n    example: 'ORD00112345',\n    pros: ['Compact format', 'Outlet identification', 'Numbers only', 'Short length', 'Easy to read'],\n    cons: ['No sequence tracking', 'Limited randomness (5 digits)'],\n    bestFor: 'Businesses wanting compact, numeric-only order numbers'\n  },\n  \n  hybrid: {\n    description: 'Combines outlet, date, and random elements',\n    example: 'ORD-001-20250115-A7B9',\n    pros: ['Balanced security', 'Outlet identification', 'Date organization'],\n    cons: ['Longer numbers', 'More complex'],\n    bestFor: 'Large businesses needing both security and organization'\n  }\n} as const;\n\n// ============================================================================\n// CONFIGURATION FUNCTIONS\n// ============================================================================\n\n/**\n * Get the current order number configuration\n */\nexport function getOrderNumberConfig() {\n  return ORDER_NUMBER_CONFIG;\n}\n\n/**\n * Update order number configuration (for testing or admin purposes)\n */\nexport function updateOrderNumberConfig(updates: Partial<typeof ORDER_NUMBER_CONFIG>) {\n  Object.assign(ORDER_NUMBER_CONFIG, updates);\n}\n\n/**\n * Get format information for display purposes\n */\nexport function getFormatInfo(format: OrderNumberFormat) {\n  return FORMAT_CONFIGS[format];\n}\n\n/**\n * Get all available formats with their information\n */\nexport function getAllFormats() {\n  return Object.entries(FORMAT_CONFIGS).map(([key, value]) => ({\n    format: key as OrderNumberFormat,\n    ...value\n  }));\n}\n\n/**\n * Validate order number format configuration\n */\nexport function validateOrderNumberConfig(config: typeof ORDER_NUMBER_CONFIG): string[] {\n  const errors: string[] = [];\n  \n  if (!config.prefix || config.prefix.length === 0) {\n    errors.push('Prefix cannot be empty');\n  }\n  \n  if (config.sequenceLength < 1 || config.sequenceLength > 10) {\n    errors.push('Sequence length must be between 1 and 10');\n  }\n  \n  if (config.randomLength < 4 || config.randomLength > 20) {\n    errors.push('Random length must be between 4 and 20');\n  }\n  \n  if (config.maxRetries < 1 || config.maxRetries > 20) {\n    errors.push('Max retries must be between 1 and 20');\n  }\n  \n  if (config.retryDelay < 1 || config.retryDelay > 1000) {\n    errors.push('Retry delay must be between 1 and 1000 milliseconds');\n  }\n  \n  return errors;\n}\n\n/**\n * Get recommended format based on business characteristics\n */\nexport function getRecommendedFormat(businessSize: 'small' | 'medium' | 'large', \n                                   concurrencyLevel: 'low' | 'medium' | 'high',\n                                   securityPriority: 'low' | 'medium' | 'high'): OrderNumberFormat {\n  // Small business with low concurrency and low security needs\n  if (businessSize === 'small' && concurrencyLevel === 'low' && securityPriority === 'low') {\n    return 'compact-numeric';\n  }\n  \n  // Medium business or higher security needs\n  if (businessSize === 'medium' || securityPriority === 'medium') {\n    return 'date-based';\n  }\n  \n  // High concurrency or high security needs\n  if (concurrencyLevel === 'high' || securityPriority === 'high') {\n    return 'random-numeric';\n  }\n  \n  // Large business with balanced needs\n  if (businessSize === 'large') {\n    return 'hybrid';\n  }\n  \n  // Default fallback - compact numeric for easy use\n  return 'compact-numeric';\n}\n\n// ============================================================================\n// ORDER NUMBER GENERATION\n// ============================================================================\n\n/**\n * Generate order number with specified format\n */\nexport async function generateOrderNumber(\n  config: OrderNumberConfig\n): Promise<OrderNumberResult> {\n  const {\n    format = 'sequential',\n    outletId,\n    prefix = 'ORD',\n    includeDate = false,\n    sequenceLength = 4,\n    randomLength = 6,\n    numericOnly = false\n  } = config;\n\n  // Validate outlet exists\n  const outlet = await prisma.outlet.findUnique({\n    where: { id: outletId },\n    select: { id: true, name: true }\n  });\n\n  if (!outlet) {\n    throw new Error(`Outlet with id ${outletId} not found`);\n  }\n\n  const outletIdStr = outlet.id.toString().padStart(3, '0');\n  const generatedAt = new Date();\n\n  switch (format) {\n    case 'sequential':\n      return await generateSequentialNumber(outletIdStr, prefix, sequenceLength);\n    \n    case 'date-based':\n      return await generateDateBasedNumber(outletIdStr, prefix, sequenceLength, generatedAt);\n    \n    case 'random':\n      return await generateRandomNumber(outletIdStr, prefix, randomLength, false);\n    \n    case 'random-numeric':\n      return await generateRandomNumber(outletIdStr, prefix, randomLength, true);\n    \n    case 'compact-numeric':\n      return await generateCompactNumericNumber(outletIdStr, prefix);\n    \n    case 'hybrid':\n      return await generateHybridNumber(outletIdStr, prefix, sequenceLength, generatedAt, numericOnly);\n    \n    default:\n      throw new Error(`Unsupported order number format: ${format}`);\n  }\n}\n\n/**\n * Generate sequential order number: ORD-{outletId}-{sequence}\n * Uses atomic counter to prevent race conditions\n */\nasync function generateSequentialNumber(\n  outletIdStr: string,\n  prefix: string,\n  sequenceLength: number\n): Promise<OrderNumberResult> {\n  const maxRetries = 5;\n  let retryCount = 0;\n\n  while (retryCount < maxRetries) {\n    try {\n      // Use atomic increment with retry logic\n      const result = await prisma.$transaction(async (tx: any) => {\n        // Get current sequence for this outlet\n        const lastOrder = await tx.order.findFirst({\n          where: { \n            orderNumber: { startsWith: `${prefix}-${outletIdStr}-` }\n          },\n          orderBy: { createdAt: 'desc' },\n          select: { orderNumber: true, createdAt: true }\n        });\n\n        let nextSequence = 1;\n        \n        if (lastOrder) {\n          // Extract sequence from last order number\n          const parts = lastOrder.orderNumber.split('-');\n          const lastSequence = parseInt(parts[parts.length - 1]) || 0;\n          nextSequence = lastSequence + 1;\n        }\n\n        const orderNumber = `${prefix}-${outletIdStr}-${nextSequence.toString().padStart(sequenceLength, '0')}`;\n\n        // Check for uniqueness (double-check)\n        const existingOrder = await tx.order.findUnique({\n          where: { orderNumber },\n          select: { id: true }\n        });\n\n        if (existingOrder) {\n          throw new Error('Order number collision detected');\n        }\n\n        return {\n          orderNumber,\n          sequence: nextSequence,\n          generatedAt: new Date()\n        };\n      });\n\n      return result;\n    } catch (error) {\n      retryCount++;\n      if (retryCount >= maxRetries) {\n        const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n        throw new Error(`Failed to generate sequential order number after ${maxRetries} retries: ${errorMessage}`);\n      }\n      \n      // Wait before retry (exponential backoff)\n      await new Promise(resolve => setTimeout(resolve, Math.pow(2, retryCount) * 10));\n    }\n  }\n\n  throw new Error('Maximum retries exceeded');\n}\n\n/**\n * Generate date-based order number: ORD-{outletId}-{date}-{sequence}\n * Resets sequence daily for better organization\n */\nasync function generateDateBasedNumber(\n  outletIdStr: string,\n  prefix: string,\n  sequenceLength: number,\n  generatedAt: Date\n): Promise<OrderNumberResult> {\n  const dateStr = generatedAt.toISOString().split('T')[0].replace(/-/g, '');\n  \n  const result = await prisma.$transaction(async (tx: any) => {\n    // Get last order for this outlet on this date\n    const lastOrder = await tx.order.findFirst({\n      where: { \n        orderNumber: { startsWith: `${prefix}-${outletIdStr}-${dateStr}-` }\n      },\n      orderBy: { createdAt: 'desc' },\n      select: { orderNumber: true }\n    });\n\n    let nextSequence = 1;\n    \n    if (lastOrder) {\n      const parts = lastOrder.orderNumber.split('-');\n      const lastSequence = parseInt(parts[parts.length - 1]) || 0;\n      nextSequence = lastSequence + 1;\n    }\n\n    const orderNumber = `${prefix}-${outletIdStr}-${dateStr}-${nextSequence.toString().padStart(sequenceLength, '0')}`;\n\n    // Check for uniqueness\n    const existingOrder = await tx.order.findUnique({\n      where: { orderNumber },\n      select: { id: true }\n    });\n\n    if (existingOrder) {\n      throw new Error('Order number collision detected');\n    }\n\n    return {\n      orderNumber,\n      sequence: nextSequence,\n      generatedAt\n    };\n  });\n\n  return result;\n}\n\n/**\n * Generate random order number: ORD-{outletId}-{random}\n * Uses crypto-secure random generation\n */\nasync function generateRandomNumber(\n  outletIdStr: string,\n  prefix: string,\n  randomLength: number,\n  numericOnly: boolean = false\n): Promise<OrderNumberResult> {\n  const maxRetries = 10;\n  let retryCount = 0;\n\n  while (retryCount < maxRetries) {\n    try {\n      // Generate crypto-secure random string\n      const randomStr = generateRandomString(randomLength, numericOnly);\n      const orderNumber = `${prefix}-${outletIdStr}-${randomStr}`;\n\n      // Check for uniqueness\n      const existingOrder = await prisma.order.findUnique({\n        where: { orderNumber },\n        select: { id: true }\n      });\n\n      if (!existingOrder) {\n        return {\n          orderNumber,\n          sequence: 0, // No sequence for random\n          generatedAt: new Date()\n        };\n      }\n\n      retryCount++;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      throw new Error(`Failed to generate random order number: ${errorMessage}`);\n    }\n  }\n\n  throw new Error(`Failed to generate unique random order number after ${maxRetries} attempts`);\n}\n\n/**\n * Generate compact numeric order number: ORD{outletId}{random}\n * Format: ORD00112345 (no hyphens, 5-digit random number)\n */\nasync function generateCompactNumericNumber(\n  outletIdStr: string,\n  prefix: string\n): Promise<OrderNumberResult> {\n  const maxRetries = 10;\n  let retryCount = 0;\n\n  while (retryCount < maxRetries) {\n    try {\n      // Generate 5-digit random number\n      const randomStr = generateRandomString(5, true); // 5 digits, numeric only\n      const orderNumber = `${prefix}${outletIdStr}${randomStr}`;\n\n      // Check for uniqueness\n      const existingOrder = await prisma.order.findUnique({\n        where: { orderNumber },\n        select: { id: true }\n      });\n\n      if (!existingOrder) {\n        return {\n          orderNumber,\n          sequence: 0, // No sequence for compact numeric\n          generatedAt: new Date()\n        };\n      }\n\n      retryCount++;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      throw new Error(`Failed to generate compact numeric order number: ${errorMessage}`);\n    }\n  }\n\n  throw new Error(`Failed to generate unique compact numeric order number after ${maxRetries} attempts`);\n}\n\n/**\n * Generate hybrid order number: ORD-{outletId}-{date}-{random}\n * Combines outlet, date, and random for optimal security and organization\n */\nasync function generateHybridNumber(\n  outletIdStr: string,\n  prefix: string,\n  sequenceLength: number,\n  generatedAt: Date,\n  numericOnly: boolean = false\n): Promise<OrderNumberResult> {\n  const dateStr = generatedAt.toISOString().split('T')[0].replace(/-/g, '');\n  const randomStr = generateRandomString(4, numericOnly); // Shorter random part\n  \n  const orderNumber = `${prefix}-${outletIdStr}-${dateStr}-${randomStr}`;\n\n  // Check for uniqueness\n  const existingOrder = await prisma.order.findUnique({\n    where: { orderNumber },\n    select: { id: true }\n  });\n\n  if (existingOrder) {\n    // If collision, try with different random string\n    return generateHybridNumber(outletIdStr, prefix, sequenceLength, generatedAt, numericOnly);\n  }\n\n  return {\n    orderNumber,\n    sequence: 0, // No sequence for hybrid\n    generatedAt\n  };\n}\n\n/**\n * Generate crypto-secure random string\n */\nfunction generateRandomString(length: number, numericOnly: boolean = false): string {\n  const chars = numericOnly ? '0123456789' : 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  const randomBytes = new Uint8Array(length);\n  \n  if (typeof window !== 'undefined' && window.crypto) {\n    // Browser environment\n    window.crypto.getRandomValues(randomBytes);\n  } else {\n    // Node.js environment\n    const crypto = require('crypto');\n    const randomBytesNode = crypto.randomBytes(length);\n    randomBytes.set(randomBytesNode);\n  }\n  \n  return Array.from(randomBytes, byte => chars[byte % chars.length]).join('');\n}\n\n// ============================================================================\n// VALIDATION & PARSING\n// ============================================================================\n\n/**\n * Validate order number format\n */\nexport function validateOrderNumber(orderNumber: string): boolean {\n  const patterns = [\n    /^ORD-\\d{3}-\\d{4}$/, // Sequential: ORD-001-0001\n    /^ORD-\\d{3}-\\d{8}-\\d{4}$/, // Date-based: ORD-001-20250115-0001\n    /^ORD-\\d{3}-[A-Z0-9]{6}$/, // Random: ORD-001-A7B9C2\n    /^ORD-\\d{3}-\\d{6}$/, // Random-numeric: ORD-001-123456\n    /^ORD-\\d{3}-\\d{8}-[A-Z0-9]{4}$/, // Hybrid: ORD-001-20250115-A7B9\n    /^ORD\\d{3}\\d{5}$/ // Compact-numeric: ORD00112345\n  ];\n  \n  return patterns.some(pattern => pattern.test(orderNumber));\n}\n\n/**\n * Parse order number to extract components\n */\nexport function parseOrderNumber(orderNumber: string): {\n  prefix: string;\n  outletId: number;\n  date?: string;\n  sequence?: number;\n  random?: string;\n  format: OrderNumberFormat;\n} | null {\n  if (!validateOrderNumber(orderNumber)) {\n    return null;\n  }\n\n  // Check for compact-numeric format first (no hyphens)\n  if (/^ORD\\d{3}\\d{5}$/.test(orderNumber)) {\n    const outletId = parseInt(orderNumber.substring(3, 6));\n    const random = orderNumber.substring(6);\n    \n    return {\n      prefix: 'ORD',\n      outletId,\n      random,\n      format: 'compact-numeric'\n    };\n  }\n\n  const parts = orderNumber.split('-');\n  \n  if (parts.length === 3) {\n    // Sequential or Random format\n    const sequence = parseInt(parts[2]);\n    const isNumeric = /^\\d+$/.test(parts[2]);\n    \n    return {\n      prefix: parts[0],\n      outletId: parseInt(parts[1]),\n      sequence: isNumeric ? sequence : undefined,\n      random: !isNumeric ? parts[2] : undefined,\n      format: isNumeric ? 'sequential' : 'random'\n    };\n  }\n  \n  if (parts.length === 4) {\n    // Date-based or Hybrid format\n    const sequence = parseInt(parts[3]);\n    const isNumeric = /^\\d+$/.test(parts[3]);\n    \n    return {\n      prefix: parts[0],\n      outletId: parseInt(parts[1]),\n      date: parts[2],\n      sequence: isNumeric ? sequence : undefined,\n      random: !isNumeric ? parts[3] : undefined,\n      format: isNumeric ? 'date-based' : 'hybrid'\n    };\n  }\n  \n  return null;\n}\n\n// ============================================================================\n// STATISTICS & UTILITIES\n// ============================================================================\n\n/**\n * Get order statistics for an outlet\n */\nexport async function getOutletOrderStats(outletId: number): Promise<{\n  totalOrders: number;\n  todayOrders: number;\n  lastOrderNumber?: string;\n  lastOrderDate?: Date;\n}> {\n  const outlet = await prisma.outlet.findUnique({\n    where: { id: outletId },\n    select: { id: true }\n  });\n\n  if (!outlet) {\n    throw new Error(`Outlet with id ${outletId} not found`);\n  }\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n\n  const [totalOrders, todayOrders, lastOrder] = await Promise.all([\n    prisma.order.count({\n      where: { outletId: outlet.id }\n    }),\n    prisma.order.count({\n      where: { \n        outletId: outlet.id,\n        createdAt: {\n          gte: today,\n          lt: tomorrow\n        }\n      }\n    }),\n    prisma.order.findFirst({\n      where: { outletId: outlet.id },\n      orderBy: { createdAt: 'desc' },\n      select: { orderNumber: true, createdAt: true }\n    })\n  ]);\n\n  return {\n    totalOrders,\n    todayOrders,\n    lastOrderNumber: lastOrder?.orderNumber,\n    lastOrderDate: lastOrder?.createdAt\n  };\n}\n\n/**\n * Quick order number generation with default settings\n */\nexport async function createOrderNumber(outletId: number): Promise<string> {\n  const result = await generateOrderNumber({\n    format: 'sequential',\n    outletId,\n    prefix: 'ORD',\n    sequenceLength: 4\n  });\n  \n  return result.orderNumber;\n}\n\n/**\n * Generate order number with specific format\n */\nexport async function createOrderNumberWithFormat(\n  outletId: number, \n  format: OrderNumberFormat\n): Promise<OrderNumberResult> {\n  const config: OrderNumberConfig = {\n    format,\n    outletId,\n    prefix: 'ORD',\n    sequenceLength: 4,\n    randomLength: 6,\n    includeDate: true\n  };\n  \n  return await generateOrderNumber(config);\n}\n\n/**\n * Generate multiple order numbers for testing\n */\nexport async function generateTestOrderNumbers(\n  outletId: number, \n  count: number, \n  format: OrderNumberFormat = 'sequential'\n): Promise<string[]> {\n  const orderNumbers: string[] = [];\n  \n  for (let i = 0; i < count; i++) {\n    const result = await createOrderNumberWithFormat(outletId, format);\n    orderNumbers.push(result.orderNumber);\n  }\n  \n  return orderNumbers;\n}\n\n/**\n * Analyze order number\n */\nexport function analyzeOrderNumber(orderNumber: string) {\n  const isValid = validateOrderNumber(orderNumber);\n  const parsed = parseOrderNumber(orderNumber);\n  \n  return {\n    orderNumber,\n    isValid,\n    parsed,\n    format: parsed?.format || 'unknown',\n    outletId: parsed?.outletId,\n    sequence: parsed?.sequence,\n    date: parsed?.date,\n    random: parsed?.random\n  };\n}\n\n// ============================================================================\n// SIMPLIFIED API FUNCTIONS (for db object)\n// ============================================================================\n\nexport const simplifiedOrderNumbers = {\n  /**\n   * Get outlet order stats (simplified API)\n   */\n  getOutletStats: async (outletId: number) => {\n    return await getOutletOrderStats(outletId);\n  },\n\n  /**\n   * Create order number with format (simplified API)\n   */\n  createWithFormat: async (outletId: number, format: OrderNumberFormat) => {\n    return await createOrderNumberWithFormat(outletId, format);\n  },\n\n  /**\n   * Generate multiple order numbers (simplified API)\n   */\n  generateMultiple: async (outletId: number, count: number, format: OrderNumberFormat = 'sequential') => {\n    return await generateTestOrderNumbers(outletId, count, format);\n  },\n\n  /**\n   * Validate order number format (simplified API)\n   */\n  validateFormat: (orderNumber: string) => {\n    return validateOrderNumber(orderNumber);\n  },\n\n  /**\n   * Get format info (simplified API)\n   */\n  getFormatInfo: (format: OrderNumberFormat) => {\n    return getFormatInfo(format);\n  }\n};","/**\n * Comprehensive Audit Logging System\n * \n * This module provides a complete audit logging solution that tracks:\n * - Who made changes (user, role, context)\n * - What was changed (entity, fields, values)\n * - When changes occurred (timestamp, session)\n * - Where changes came from (IP, user agent)\n * - Why changes were made (business context)\n */\n\nimport { PrismaClient } from '@prisma/client';\n\n// Types for audit logging\nexport interface AuditContext {\n  userId?: number;\n  userEmail?: string;\n  userRole?: string;\n  merchantId?: number;\n  outletId?: number;\n  ipAddress?: string;\n  userAgent?: string;\n  sessionId?: string;\n  requestId?: string;\n  metadata?: Record<string, any>;\n}\n\nexport interface AuditLogData {\n  action: 'CREATE' | 'UPDATE' | 'DELETE' | 'LOGIN' | 'LOGOUT' | 'VIEW' | 'EXPORT' | 'IMPORT' | 'CUSTOM';\n  entityType: string;\n  entityId: string;\n  entityName?: string;\n  oldValues?: Record<string, any>;\n  newValues?: Record<string, any>;\n  changes?: Record<string, { old: any; new: any }>;\n  severity?: 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL';\n  category?: 'GENERAL' | 'SECURITY' | 'BUSINESS' | 'SYSTEM' | 'COMPLIANCE';\n  description?: string;\n  context: AuditContext;\n}\n\nexport interface AuditLogFilter {\n  action?: string;\n  entityType?: string;\n  entityId?: string;\n  userId?: number;\n  merchantId?: number;\n  outletId?: number;\n  severity?: string;\n  category?: string;\n  startDate?: Date;\n  endDate?: Date;\n  limit?: number;\n  offset?: number;\n}\n\n// Audit logger class\nexport class AuditLogger {\n  private prisma: PrismaClient;\n  private idCounter: number = 0;\n\n  constructor(prisma: PrismaClient) {\n    this.prisma = prisma;\n  }\n\n  // Get next public ID\n  private async getNextPublicId(): Promise<number> {\n    // Temporarily disabled - AuditLog model not in schema\n    return 1;\n  }\n\n  // Main logging method\n  async log(data: AuditLogData): Promise<void> {\n    try {\n      console.log(' AuditLogger.log - Starting audit log creation...');\n      const id = await this.getNextPublicId();\n      console.log(' AuditLogger.log - Got id:', id);\n      \n      // Validate foreign key IDs to prevent constraint violations\n      const validatedUserId = await this.validateUserId(data.context.userId);\n      const validatedMerchantId = await this.validateMerchantId(data.context.merchantId);\n      const validatedOutletId = await this.validateOutletId(data.context.outletId);\n      \n      console.log(' AuditLogger.log - About to create audit log with data:', {\n        id,\n        action: data.action,\n        entityType: data.entityType,\n        entityId: data.entityId,\n        userId: validatedUserId,\n        merchantId: validatedMerchantId,\n        outletId: validatedOutletId\n      });\n      \n      // Temporarily disabled - AuditLog model not in schema\n      console.log(' Audit log would be created:', {\n        id,\n        action: data.action,\n        entityType: data.entityType,\n        entityId: data.entityId\n      });\n      console.log(' AuditLogger.log - Audit log created successfully');\n    } catch (error) {\n      // Don't throw errors from audit logging to avoid breaking main operations\n      console.error(' AuditLogger.log - Audit logging failed:', error);\n      console.error(' AuditLogger.log - Error details:', error instanceof Error ? error.message : String(error));\n      console.error(' AuditLogger.log - Error stack:', error instanceof Error ? error.stack : undefined);\n    }\n  }\n\n  // Validate foreign key IDs to prevent constraint violations\n  private async validateUserId(userId?: number): Promise<number | null> {\n    if (!userId) return null;\n    \n    try {\n      const user = await this.prisma.user.findUnique({\n        where: { id: userId },\n        select: { id: true }\n      });\n      return user ? userId : null;\n    } catch (error) {\n      console.warn(' AuditLogger - Failed to validate userId:', userId, error);\n      return null;\n    }\n  }\n\n  private async validateMerchantId(merchantId?: number): Promise<number | null> {\n    if (!merchantId) return null;\n    \n    try {\n      const merchant = await this.prisma.merchant.findUnique({\n        where: { id: merchantId },\n        select: { id: true }\n      });\n      return merchant ? merchantId : null;\n    } catch (error) {\n      console.warn(' AuditLogger - Failed to validate merchantId:', merchantId, error);\n      return null;\n    }\n  }\n\n  private async validateOutletId(outletId?: number): Promise<number | null> {\n    if (!outletId) return null;\n    \n    try {\n      const outlet = await this.prisma.outlet.findUnique({\n        where: { id: outletId },\n        select: { id: true }\n      });\n      return outlet ? outletId : null;\n    } catch (error) {\n      console.warn(' AuditLogger - Failed to validate outletId:', outletId, error);\n      return null;\n    }\n  }\n\n  // Convenience methods for common operations\n  async logCreate(\n    entityType: string,\n    entityId: string,\n    entityName: string,\n    newValues: Record<string, any>,\n    context: AuditContext,\n    description?: string\n  ): Promise<void> {\n    await this.log({\n      action: 'CREATE',\n      entityType,\n      entityId,\n      entityName,\n      newValues,\n      description: description || `Created ${entityType.toLowerCase()}: ${entityName}`,\n      context\n    });\n  }\n\n  async logUpdate(\n    entityType: string,\n    entityId: string,\n    entityName: string,\n    oldValues: Record<string, any>,\n    newValues: Record<string, any>,\n    context: AuditContext,\n    description?: string\n  ): Promise<void> {\n    const changes = this.calculateChanges(oldValues, newValues);\n    \n    await this.log({\n      action: 'UPDATE',\n      entityType,\n      entityId,\n      entityName,\n      oldValues,\n      newValues,\n      changes,\n      description: description || `Updated ${entityType.toLowerCase()}: ${entityName}`,\n      context\n    });\n  }\n\n  async logDelete(\n    entityType: string,\n    entityId: string,\n    entityName: string,\n    oldValues: Record<string, any>,\n    context: AuditContext,\n    description?: string\n  ): Promise<void> {\n    await this.log({\n      action: 'DELETE',\n      entityType,\n      entityId,\n      entityName,\n      oldValues,\n      description: description || `Deleted ${entityType.toLowerCase()}: ${entityName}`,\n      context\n    });\n  }\n\n  async logLogin(\n    userId: number,\n    userEmail: string,\n    userRole: string,\n    context: AuditContext,\n    success: boolean = true\n  ): Promise<void> {\n    await this.log({\n      action: 'LOGIN',\n      entityType: 'User',\n      entityId: userId.toString(),\n      entityName: userEmail,\n      newValues: { success, timestamp: new Date().toISOString() },\n      severity: success ? 'INFO' : 'WARNING',\n      category: 'SECURITY',\n      description: success ? `User logged in: ${userEmail}` : `Failed login attempt: ${userEmail}`,\n      context\n    });\n  }\n\n  async logLogout(\n    userId: number,\n    userEmail: string,\n    context: AuditContext\n  ): Promise<void> {\n    await this.log({\n      action: 'LOGOUT',\n      entityType: 'User',\n      entityId: userId.toString(),\n      entityName: userEmail,\n      category: 'SECURITY',\n      description: `User logged out: ${userEmail}`,\n      context\n    });\n  }\n\n  async logSecurityEvent(\n    event: string,\n    entityType: string,\n    entityId: string,\n    context: AuditContext,\n    severity: 'WARNING' | 'ERROR' | 'CRITICAL' = 'WARNING',\n    description?: string\n  ): Promise<void> {\n    await this.log({\n      action: 'CUSTOM',\n      entityType,\n      entityId,\n      severity,\n      category: 'SECURITY',\n      description: description || `Security event: ${event}`,\n      context\n    });\n  }\n\n  // Calculate changes between old and new values\n  private calculateChanges(oldValues: Record<string, any>, newValues: Record<string, any>): Record<string, { old: any; new: any }> {\n    const changes: Record<string, { old: any; new: any }> = {};\n    \n    // Check for changed fields\n    const allKeys = new Set([...Object.keys(oldValues), ...Object.keys(newValues)]);\n    \n    for (const key of Array.from(allKeys)) {\n      const oldValue = oldValues[key];\n      const newValue = newValues[key];\n      \n      if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {\n        changes[key] = { old: oldValue, new: newValue };\n      }\n    }\n    \n    return changes;\n  }\n\n  // Query audit logs\n  async getAuditLogs(filter: AuditLogFilter = {}): Promise<{\n    logs: any[];\n    total: number;\n    hasMore: boolean;\n  }> {\n    const where: any = {};\n    \n    if (filter.action) where.action = filter.action;\n    if (filter.entityType) where.entityType = filter.entityType;\n    if (filter.entityId) where.entityId = filter.entityId;\n    if (filter.userId) where.userId = filter.userId;\n    if (filter.merchantId) where.merchantId = filter.merchantId;\n    if (filter.outletId) where.outletId = filter.outletId;\n    if (filter.severity) where.severity = filter.severity;\n    if (filter.category) where.category = filter.category;\n    \n    if (filter.startDate || filter.endDate) {\n      where.createdAt = {};\n      if (filter.startDate) where.createdAt.gte = filter.startDate;\n      if (filter.endDate) where.createdAt.lte = filter.endDate;\n    }\n\n    const limit = filter.limit || 50;\n    const offset = filter.offset || 0;\n\n    // Temporarily disabled - AuditLog model not in schema\n    const logs: any[] = [];\n    const total = 0;\n\n    // Transform logs to include parsed JSON fields\n    const transformedLogs = logs.map(log => ({\n      id: log.id,\n      action: log.action,\n      entityType: log.entityType,\n      entityId: log.entityId,\n      entityName: log.entityName,\n      user: log.user ? {\n        id: log.user.id,\n        email: log.user.email,\n        name: `${log.user.firstName} ${log.user.lastName}`,\n        role: log.user.role\n      } : null,\n      merchant: log.merchant ? {\n        id: log.merchant.id,\n        name: log.merchant.name\n      } : null,\n      outlet: log.outlet ? {\n        id: log.outlet.id,\n        name: log.outlet.name\n      } : null,\n      oldValues: log.oldValues ? JSON.parse(log.oldValues) : null,\n      newValues: log.newValues ? JSON.parse(log.newValues) : null,\n      changes: log.changes ? JSON.parse(log.changes) : null,\n      ipAddress: log.ipAddress,\n      userAgent: log.userAgent,\n      sessionId: log.sessionId,\n      requestId: log.requestId,\n      metadata: log.metadata ? JSON.parse(log.metadata) : null,\n      severity: log.severity,\n      category: log.category,\n      description: log.description,\n      createdAt: log.createdAt\n    }));\n\n    return {\n      logs: transformedLogs,\n      total,\n      hasMore: offset + limit < total\n    };\n  }\n\n  // Get audit statistics\n  async getAuditStats(filter: Partial<AuditLogFilter> = {}): Promise<{\n    totalLogs: number;\n    logsByAction: Record<string, number>;\n    logsByEntity: Record<string, number>;\n    logsBySeverity: Record<string, number>;\n    logsByCategory: Record<string, number>;\n    recentActivity: number; // Last 24 hours\n  }> {\n    const where: any = {};\n    \n    if (filter.merchantId) where.merchantId = filter.merchantId;\n    if (filter.outletId) where.outletId = filter.outletId;\n    if (filter.startDate || filter.endDate) {\n      where.createdAt = {};\n      if (filter.startDate) where.createdAt.gte = filter.startDate;\n      if (filter.endDate) where.createdAt.lte = filter.endDate;\n    }\n\n    // Temporarily disabled - AuditLog model not in schema\n    const totalLogs = 0;\n    const actionStats: any[] = [];\n    const entityStats: any[] = [];\n    const severityStats: any[] = [];\n    const categoryStats: any[] = [];\n    const recentActivity = 0;\n\n    return {\n      totalLogs,\n      logsByAction: actionStats.reduce((acc, item) => {\n        acc[item.action] = item._count.action;\n        return acc;\n      }, {} as Record<string, number>),\n      logsByEntity: entityStats.reduce((acc, item) => {\n        acc[item.entityType] = item._count.entityType;\n        return acc;\n      }, {} as Record<string, number>),\n      logsBySeverity: severityStats.reduce((acc, item) => {\n        acc[item.severity] = item._count.severity;\n        return acc;\n      }, {} as Record<string, number>),\n      logsByCategory: categoryStats.reduce((acc, item) => {\n        acc[item.category] = item._count.category;\n        return acc;\n      }, {} as Record<string, number>),\n      recentActivity\n    };\n  }\n}\n\n// Create singleton instance\nlet auditLogger: AuditLogger | null = null;\n\nexport function getAuditLogger(prisma?: PrismaClient): AuditLogger {\n  if (!auditLogger) {\n    if (!prisma) {\n      throw new Error('Prisma client is required for audit logging');\n    }\n    auditLogger = new AuditLogger(prisma);\n  }\n  return auditLogger;\n}\n\n// Helper function to extract audit context from request\nexport function extractAuditContext(request: Request, user?: any): AuditContext {\n  const headers = request.headers;\n  \n  return {\n    userId: user?.id,\n    userEmail: user?.email,\n    userRole: user?.role,\n    merchantId: user?.merchantId,\n    outletId: user?.outletId,\n    ipAddress: headers.get('x-forwarded-for') || headers.get('x-real-ip') || 'unknown',\n    userAgent: headers.get('user-agent') || 'unknown',\n    sessionId: headers.get('x-session-id') || undefined,\n    requestId: headers.get('x-request-id') || undefined,\n    metadata: {\n      method: request.method,\n      url: request.url,\n      timestamp: new Date().toISOString()\n    }\n  };\n}\n","/**\n * Consolidated Subscription Manager\n * \n * Consolidates all subscription functionality into a single, organized class\n * following DRY principles and consistent naming conventions.\n * \n * Consolidates:\n * - subscription-utils-consolidated.ts\n * - subscription-utils.ts\n * - subscription-renewal.ts\n * - subscription-validation.ts\n * - subscription-check.ts\n */\n\nimport { PlanLimitError } from '../core';\nimport { ErrorCode } from './errors';\nimport { getSubscriptionByMerchantId } from '@rentalshop/database';\nimport { prisma } from '@rentalshop/database';\nimport { API } from '@rentalshop/constants';\nimport type { AuthUser, Subscription, SubscriptionStatus } from '@rentalshop/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface SubscriptionPeriod {\n  startDate: Date;\n  endDate: Date;\n  duration: string;\n  isActive: boolean;\n  daysRemaining: number;\n  nextBillingDate: Date;\n  isTrial?: boolean;\n}\n\nexport interface SubscriptionRenewalConfig {\n  paymentGateway: {\n    apiKey: string;\n    webhookSecret: string;\n  };\n  autoRenewEnabled: boolean;\n  gracePeriodDays: number;\n  retryAttempts: number;\n  retryDelayHours: number;\n}\n\nexport interface SubscriptionRenewalResult {\n  subscriptionId: number;\n  success: boolean;\n  status: string;\n  error?: string;\n  paymentId?: number;\n  nextBillingDate?: Date;\n}\n\nexport interface RenewalStats {\n  totalProcessed: number;\n  successful: number;\n  failed: number;\n  skipped: number;\n  errors: string[];\n}\n\nexport interface SubscriptionValidationResult {\n  isValid: boolean;\n  error?: string;\n  statusCode?: number;\n  subscription?: any;\n  merchant?: any;\n  isExpired?: boolean;\n  needsStatusUpdate?: boolean;\n}\n\nexport interface SubscriptionValidationOptions {\n  requireActiveSubscription?: boolean;\n  allowedStatuses?: string[];\n  checkMerchantStatus?: boolean;\n  checkSubscriptionStatus?: boolean;\n  autoUpdateExpired?: boolean;\n}\n\nexport interface RenewalConfig {\n  paymentGateway: {\n    apiKey: string;\n    webhookSecret: string;\n  };\n  autoRenewEnabled: boolean;\n  gracePeriodDays: number;\n  retryAttempts: number;\n  retryDelayHours: number;\n}\n\nexport interface RenewalResult {\n  subscriptionId: number;\n  success: boolean;\n  status: string;\n  error?: string;\n  paymentId?: number;\n  nextBillingDate?: Date;\n}\n\n// ============================================================================\n// SUBSCRIPTION MANAGER CLASS\n// ============================================================================\n\nexport class SubscriptionManager {\n  // ============================================================================\n  // CORE SUBSCRIPTION CHECKING\n  // ============================================================================\n\n  /**\n   * Check if user has valid subscription\n   */\n  static async checkStatus(user: any): Promise<boolean> {\n    try {\n      if (!user?.merchant?.id) {\n        console.log(' SUBSCRIPTION: No merchant found for user');\n        return true; // No merchant = no subscription check needed\n      }\n\n      const subscriptionError = await this.getError(user);\n      return subscriptionError === null;\n    } catch (error) {\n      console.error('Error checking subscription status:', error);\n      return false; // Fail safe - assume subscription is invalid\n    }\n  }\n\n  /**\n   * Check if subscription error should be thrown\n   */\n  static async shouldThrowError(user: any): Promise<boolean> {\n    try {\n      if (!user?.merchant?.id) {\n        return false; // No merchant = no subscription check needed\n      }\n\n      const subscriptionError = await this.getError(user);\n      return subscriptionError !== null;\n    } catch (error) {\n      console.error('Error checking subscription status:', error);\n      return true; // Fail safe - throw error\n    }\n  }\n\n  /**\n   * Get subscription error if any\n   */\n  static async getError(user: any): Promise<PlanLimitError | null> {\n    try {\n      if (!user?.merchant?.id) {\n        return null; // No merchant = no subscription check needed\n      }\n\n      let merchantId: string | number = user.merchant.id;\n\n      // Handle string to numeric ID conversion\n      if (typeof merchantId === 'string') {\n        console.log(' SUBSCRIPTION: Merchant ID is string, converting to numeric id');\n        \n        const numericId = parseInt(merchantId);\n        if (isNaN(numericId)) {\n          console.log(' SUBSCRIPTION: Invalid merchant ID:', merchantId);\n          return new PlanLimitError('Invalid merchant ID', 'SUBSCRIPTION_NOT_FOUND');\n        }\n        \n        merchantId = numericId;\n        console.log(' SUBSCRIPTION: Converted string to id:', merchantId);\n      }\n\n      console.log(' SUBSCRIPTION: Using merchantId:', merchantId, 'type:', typeof merchantId);\n\n      const subscription = await getSubscriptionByMerchantId(merchantId);\n      \n      console.log(' SUBSCRIPTION: Subscription data:', {\n        found: !!subscription,\n        status: subscription?.status,\n        currentPeriodEnd: subscription?.currentPeriodEnd\n      });\n\n      if (!subscription) {\n        console.log(' SUBSCRIPTION: No subscription found for merchant');\n        return new PlanLimitError('No active subscription found', 'SUBSCRIPTION_NOT_FOUND');\n      }\n\n      const status = subscription.status?.toLowerCase();\n      const errorStatuses = ['cancelled', 'expired', 'suspended', 'past_due', 'paused'];\n\n      if (errorStatuses.includes(status)) {\n        console.log(' SUBSCRIPTION: Subscription status is error status:', status);\n        return new PlanLimitError(\n          `Your subscription has been ${status}. Please renew to continue using our services.`,\n          'SUBSCRIPTION_ACCESS_DENIED'\n        );\n      }\n\n      // Additional check: Verify subscription is not actually expired by date\n      if (subscription.currentPeriodEnd) {\n        const currentDate = new Date();\n        const endDate = new Date(subscription.currentPeriodEnd);\n        \n        console.log(' SUBSCRIPTION: Date validation:', {\n          currentDate: currentDate.toISOString(),\n          endDate: endDate.toISOString(),\n          isExpired: currentDate > endDate\n        });\n        \n        if (currentDate > endDate) {\n          console.log(' SUBSCRIPTION: Subscription is past end date, treating as expired');\n          return new PlanLimitError(\n            'Your subscription has expired. Please renew to continue using our services.',\n            'SUBSCRIPTION_EXPIRED'\n          );\n        }\n      }\n\n      console.log(' SUBSCRIPTION: Subscription is valid');\n      return null;\n    } catch (error) {\n      console.error(' SUBSCRIPTION: Error checking subscription status:', error);\n      return new PlanLimitError('Unable to verify subscription status', 'SUBSCRIPTION_ACCESS_DENIED');\n    }\n  }\n\n  // ============================================================================\n  // ADVANCED VALIDATION\n  // ============================================================================\n\n  /**\n   * Comprehensive subscription validation with options\n   */\n  static async validateAccess(\n    user: any,\n    options: SubscriptionValidationOptions = {}\n  ): Promise<SubscriptionValidationResult> {\n    const {\n      requireActiveSubscription = true,\n      allowedStatuses = ['active', 'trial'],\n      checkMerchantStatus = true,\n      checkSubscriptionStatus = true,\n      autoUpdateExpired = false\n    } = options;\n\n    try {\n      // Check if user has merchant\n      if (!user?.merchant?.id) {\n        return {\n          isValid: false,\n          error: 'User not associated with any merchant',\n          statusCode: 400\n        };\n      }\n\n      // Check merchant status\n      if (checkMerchantStatus && user.merchant.status !== 'active') {\n        return {\n          isValid: false,\n          error: `Merchant account is ${user.merchant.status}`,\n          statusCode: 403,\n          merchant: user.merchant\n        };\n      }\n\n      // Check active subscription\n      if (checkSubscriptionStatus && requireActiveSubscription) {\n        const subscriptionError = await this.getError(user);\n        \n        if (subscriptionError) {\n          return {\n            isValid: false,\n            error: subscriptionError.message,\n            statusCode: subscriptionError.statusCode,\n            isExpired: subscriptionError.code === ErrorCode.TOKEN_EXPIRED\n          };\n        }\n      }\n\n      return {\n        isValid: true,\n        subscription: user.subscription,\n        merchant: user.merchant\n      };\n    } catch (error) {\n      console.error('Subscription validation error:', error);\n      return {\n        isValid: false,\n        error: 'Unable to validate subscription access',\n        statusCode: 500\n      };\n    }\n  }\n\n  /**\n   * Check if subscription status allows specific operations\n   */\n  static canPerformOperation(\n    subscriptionStatus: string,\n    operation: 'create' | 'read' | 'update' | 'delete' | 'admin'\n  ): boolean {\n    const status = subscriptionStatus.toLowerCase();\n    \n    switch (operation) {\n      case 'read':\n        return ['active', 'trial', 'past_due'].includes(status);\n      case 'create':\n      case 'update':\n        return ['active', 'trial'].includes(status);\n      case 'delete':\n        return status === 'active';\n      case 'admin':\n        return status === 'active';\n      default:\n        return false;\n    }\n  }\n\n  /**\n   * Get subscription error message for UI display\n   */\n  static getErrorMessage(\n    subscriptionStatus: string,\n    merchantStatus?: string\n  ): string {\n    const status = subscriptionStatus.toLowerCase();\n    \n    if (merchantStatus && merchantStatus !== 'active') {\n      return `Merchant account is ${merchantStatus}. Please contact support.`;\n    }\n    \n    const messages: Record<string, string> = {\n      'cancelled': 'Your subscription has been cancelled. Please contact support to reactivate your account.',\n      'expired': 'Your subscription has expired. Please renew to continue using our services.',\n      'suspended': 'Your subscription has been suspended. Please contact support for assistance.',\n      'past_due': 'Your subscription payment is past due. Please update your payment method.',\n      'paused': 'Your subscription is paused. Please contact support to reactivate your account.'\n    };\n    \n    return messages[status] || 'There is an issue with your subscription. Please contact support.';\n  }\n\n  /**\n   * Get allowed operations for subscription status\n   */\n  static getAllowedOperations(subscriptionStatus: string): string[] {\n    const operations: string[] = [];\n    \n    if (this.canPerformOperation(subscriptionStatus, 'read')) {\n      operations.push('read');\n    }\n    \n    if (this.canPerformOperation(subscriptionStatus, 'create')) {\n      operations.push('create');\n    }\n    \n    if (this.canPerformOperation(subscriptionStatus, 'update')) {\n      operations.push('update');\n    }\n    \n    if (this.canPerformOperation(subscriptionStatus, 'delete')) {\n      operations.push('delete');\n    }\n    \n    if (this.canPerformOperation(subscriptionStatus, 'admin')) {\n      operations.push('admin');\n    }\n    \n    return operations;\n  }\n\n  // ============================================================================\n  // PERIOD UTILITIES\n  // ============================================================================\n\n  /**\n   * Calculate subscription period details\n   */\n  static calculatePeriod(\n    startDate: Date,\n    endDate: Date,\n    status: string,\n    interval: string = 'month'\n  ): SubscriptionPeriod {\n    const now = new Date();\n    const daysRemaining = Math.max(0, Math.ceil((endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)));\n    \n    return {\n      startDate,\n      endDate,\n      duration: interval,\n      isActive: status.toLowerCase() === 'active' || status.toLowerCase() === 'trial',\n      daysRemaining,\n      nextBillingDate: endDate,\n      isTrial: status.toLowerCase() === 'trial'\n    };\n  }\n\n  /**\n   * Format subscription period for display\n   */\n  static formatPeriod(period: SubscriptionPeriod) {\n    const formatDate = (date: Date) => {\n      return new Intl.DateTimeFormat('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      }).format(date);\n    };\n\n    const formatTimeRemaining = (days: number) => {\n      if (days <= 0) return 'Expired';\n      if (days === 1) return '1 day remaining';\n      if (days < 30) return `${days} days remaining`;\n      if (days < 365) {\n        const months = Math.floor(days / 30);\n        return months === 1 ? '1 month remaining' : `${months} months remaining`;\n      }\n      const years = Math.floor(days / 365);\n      return years === 1 ? '1 year remaining' : `${years} years remaining`;\n    };\n\n    return {\n      period: `${formatDate(period.startDate)} - ${formatDate(period.endDate)}`,\n      duration: period.duration,\n      timeRemaining: formatTimeRemaining(period.daysRemaining),\n      nextBilling: formatDate(period.nextBillingDate),\n      isActive: period.isActive,\n      isTrial: period.isTrial\n    };\n  }\n\n  /**\n   * Get subscription status badge\n   */\n  static getStatusBadge(status: string, daysRemaining: number) {\n    const statusConfig = {\n      active: { color: 'bg-green-100 text-green-800', text: 'Active' },\n      trial: { color: 'bg-blue-100 text-blue-800', text: 'Trial' },\n      expired: { color: 'bg-red-100 text-red-800', text: 'Expired' },\n      cancelled: { color: 'bg-gray-100 text-gray-800', text: 'Cancelled' },\n      suspended: { color: 'bg-orange-100 text-orange-800', text: 'Suspended' },\n      past_due: { color: 'bg-yellow-100 text-yellow-800', text: 'Past Due' },\n      paused: { color: 'bg-purple-100 text-purple-800', text: 'Paused' }\n    };\n    \n    const config = statusConfig[status.toLowerCase() as keyof typeof statusConfig] || \n      { color: 'bg-gray-100 text-gray-800', text: status };\n    \n    return {\n      color: config.color,\n      text: config.text,\n      daysRemaining\n    };\n  }\n\n  // ============================================================================\n  // RENEWAL UTILITIES\n  // ============================================================================\n\n  /**\n   * Calculate new billing date based on subscription interval\n   */\n  static calculateNewBillingDate(subscription: any): Date {\n    const currentDate = new Date();\n    const interval = subscription.interval || 'month';\n    const intervalCount = subscription.intervalCount || 1;\n    \n    const newDate = new Date(currentDate);\n    \n    switch (interval) {\n      case 'day':\n        newDate.setDate(newDate.getDate() + intervalCount);\n        break;\n      case 'week':\n        newDate.setDate(newDate.getDate() + (intervalCount * 7));\n        break;\n      case 'month':\n        newDate.setMonth(newDate.getMonth() + intervalCount);\n        break;\n      case 'year':\n        newDate.setFullYear(newDate.getFullYear() + intervalCount);\n        break;\n      default:\n        newDate.setMonth(newDate.getMonth() + intervalCount);\n    }\n    \n    return newDate;\n  }\n\n  /**\n   * Check if subscription is expired\n   */\n  static isExpired(subscription: any): boolean {\n    if (!subscription.currentPeriodEnd) return false;\n    const now = new Date();\n    const endDate = new Date(subscription.currentPeriodEnd);\n    return now > endDate;\n  }\n\n  /**\n   * Check if grace period is exceeded\n   */\n  static isGracePeriodExceeded(\n    subscription: any,\n    gracePeriodDays: number = 7\n  ): boolean {\n    if (!subscription.currentPeriodEnd) return false;\n    \n    const now = new Date();\n    const endDate = new Date(subscription.currentPeriodEnd);\n    const gracePeriodEnd = new Date(endDate.getTime() + (gracePeriodDays * 24 * 60 * 60 * 1000));\n    \n    return now > gracePeriodEnd;\n  }\n\n  /**\n   * Validate subscription for renewal\n   */\n  static validateForRenewal(\n    subscription: any,\n    gracePeriodDays: number = 7\n  ): {\n    canRenew: boolean;\n    reason?: string;\n  } {\n    if (!subscription) {\n      return {\n        canRenew: false,\n        reason: 'Subscription not found'\n      };\n    }\n    \n    if (subscription.status === 'cancelled') {\n      return {\n        canRenew: false,\n        reason: 'Subscription is cancelled'\n      };\n    }\n    \n    if (subscription.status === 'active' && !this.isExpired(subscription)) {\n      return {\n        canRenew: false,\n        reason: 'Subscription is still active'\n      };\n    }\n    \n    if (this.isGracePeriodExceeded(subscription, gracePeriodDays)) {\n      return {\n        canRenew: false,\n        reason: 'Grace period exceeded'\n      };\n    }\n    \n    return {\n      canRenew: true\n    };\n  }\n\n  // ============================================================================\n  // UTILITY FUNCTIONS\n  // ============================================================================\n\n  /**\n   * Get subscription status priority (for sorting/display)\n   */\n  static getStatusPriority(status: string): number {\n    const priorities: Record<string, number> = {\n      'active': 1,\n      'trial': 2,\n      'past_due': 3,\n      'paused': 4,\n      'suspended': 5,\n      'expired': 6,\n      'cancelled': 7\n    };\n    \n    return priorities[status.toLowerCase()] || 999;\n  }\n\n  /**\n   * Sort subscriptions by status priority\n   */\n  static sortByStatus(subscriptions: any[]): any[] {\n    return [...subscriptions].sort((a, b) => {\n      const priorityA = this.getStatusPriority(a.status);\n      const priorityB = this.getStatusPriority(b.status);\n      return priorityA - priorityB;\n    });\n  }\n\n  /**\n   * Check if subscription needs attention\n   */\n  static needsAttention(subscription: any): {\n    needsAttention: boolean;\n    reason?: string;\n    urgency: 'low' | 'medium' | 'high' | 'critical';\n  } {\n    if (!subscription) {\n      return {\n        needsAttention: false,\n        urgency: 'low'\n      };\n    }\n    \n    const status = subscription.status?.toLowerCase();\n    const daysRemaining = subscription.daysRemaining || 0;\n    \n    // Critical: Expired or cancelled\n    if (status === 'expired' || status === 'cancelled') {\n      return {\n        needsAttention: true,\n        reason: `Subscription is ${status}`,\n        urgency: 'critical'\n      };\n    }\n    \n    // High: Suspended or past due\n    if (status === 'suspended' || status === 'past_due') {\n      return {\n        needsAttention: true,\n        reason: `Subscription is ${status}`,\n        urgency: 'high'\n      };\n    }\n    \n    // Medium: Trial ending soon or paused\n    if (status === 'trial' && daysRemaining <= 3) {\n      return {\n        needsAttention: true,\n        reason: 'Trial ending soon',\n        urgency: 'medium'\n      };\n    }\n    \n    if (status === 'paused') {\n      return {\n        needsAttention: true,\n        reason: 'Subscription is paused',\n        urgency: 'medium'\n      };\n    }\n    \n    // Low: Active but ending soon\n    if (status === 'active' && daysRemaining <= 7) {\n      return {\n        needsAttention: true,\n        reason: 'Subscription ending soon',\n        urgency: 'low'\n      };\n    }\n    \n    return {\n      needsAttention: false,\n      urgency: 'low'\n    };\n  }\n}\n\n// ============================================================================\n// BACKWARD COMPATIBILITY EXPORTS\n// ============================================================================\n\n// Export individual functions for backward compatibility\nexport const checkSubscriptionStatus = SubscriptionManager.checkStatus;\nexport const shouldThrowPlanLimitError = SubscriptionManager.shouldThrowError;\nexport const getPlanLimitError = SubscriptionManager.getError;\nexport const getSubscriptionError = SubscriptionManager.getError; // Backward compatibility alias\nexport const validateSubscriptionAccess = SubscriptionManager.validateAccess;\nexport const canPerformOperation = SubscriptionManager.canPerformOperation;\nexport const getPlanLimitErrorMessage = SubscriptionManager.getErrorMessage;\nexport const getAllowedOperations = SubscriptionManager.getAllowedOperations;\nexport const calculateSubscriptionPeriod = SubscriptionManager.calculatePeriod;\nexport const formatSubscriptionPeriod = SubscriptionManager.formatPeriod;\nexport const getSubscriptionStatusBadge = SubscriptionManager.getStatusBadge;\nexport const calculateNewBillingDate = SubscriptionManager.calculateNewBillingDate;\nexport const isSubscriptionExpired = SubscriptionManager.isExpired;\nexport const isGracePeriodExceeded = SubscriptionManager.isGracePeriodExceeded;\nexport const validateForRenewal = SubscriptionManager.validateForRenewal;\nexport const getSubscriptionStatusPriority = SubscriptionManager.getStatusPriority;\nexport const sortSubscriptionsByStatus = SubscriptionManager.sortByStatus;\nexport const subscriptionNeedsAttention = SubscriptionManager.needsAttention;\n","// ============================================================================\n// SIMPLE PRORATION CALCULATION\n// ============================================================================\n\nexport interface ProrationCalculation {\n  isUpgrade: boolean;\n  isDowngrade: boolean;\n  currentPlanPrice: number;\n  newPlanPrice: number;\n  daysRemaining: number;\n  daysInPeriod: number;\n  proratedAmount: number;\n  creditAmount: number;\n  chargeAmount: number;\n  reason: string;\n}\n\n/**\n * Calculate proration for plan changes\n * Simple logic: Charge difference for upgrades, credit for downgrades\n */\nexport function calculateProration(\n  currentSubscription: {\n    amount: number;\n    currentPeriodStart: Date;\n    currentPeriodEnd: Date;\n  },\n  newPlanPrice: number,\n  changeDate: Date = new Date()\n): ProrationCalculation {\n  const currentPrice = currentSubscription.amount;\n  const priceDifference = newPlanPrice - currentPrice;\n  \n  // Calculate days\n  const periodStart = new Date(currentSubscription.currentPeriodStart);\n  const periodEnd = new Date(currentSubscription.currentPeriodEnd);\n  const daysInPeriod = Math.ceil((periodEnd.getTime() - periodStart.getTime()) / (1000 * 60 * 60 * 24));\n  const daysRemaining = Math.ceil((periodEnd.getTime() - changeDate.getTime()) / (1000 * 60 * 60 * 24));\n  \n  // Determine if upgrade or downgrade\n  const isUpgrade = priceDifference > 0;\n  const isDowngrade = priceDifference < 0;\n  \n  // Calculate prorated amounts\n  const dailyRate = Math.abs(priceDifference) / daysInPeriod;\n  const proratedAmount = dailyRate * daysRemaining;\n  \n  let chargeAmount = 0;\n  let creditAmount = 0;\n  let reason = '';\n  \n  if (isUpgrade) {\n    // Charge the prorated difference for upgrades\n    chargeAmount = Math.round(proratedAmount * 100) / 100; // Round to 2 decimal places\n    reason = `Upgrade proration: ${daysRemaining} days remaining at $${dailyRate.toFixed(2)}/day`;\n  } else if (isDowngrade) {\n    // Credit the prorated difference for downgrades\n    creditAmount = Math.round(proratedAmount * 100) / 100;\n    reason = `Downgrade credit: ${daysRemaining} days remaining at $${dailyRate.toFixed(2)}/day`;\n  } else {\n    // Same price - no proration needed\n    reason = 'Same price - no proration needed';\n  }\n  \n  return {\n    isUpgrade,\n    isDowngrade,\n    currentPlanPrice: currentPrice,\n    newPlanPrice,\n    daysRemaining,\n    daysInPeriod,\n    proratedAmount,\n    creditAmount,\n    chargeAmount,\n    reason\n  };\n}\n\n/**\n * Check if proration should be applied\n * Simple rule: Only apply proration for upgrades (charge difference)\n */\nexport function shouldApplyProration(\n  currentPrice: number,\n  newPrice: number\n): boolean {\n  // Only charge proration for upgrades (new price > current price)\n  return newPrice > currentPrice;\n}\n\n/**\n * Format proration for display\n */\nexport function formatProration(proration: ProrationCalculation): string {\n  if (proration.chargeAmount > 0) {\n    return `Charge $${proration.chargeAmount.toFixed(2)} (${proration.reason})`;\n  } else if (proration.creditAmount > 0) {\n    return `Credit $${proration.creditAmount.toFixed(2)} (${proration.reason})`;\n  } else {\n    return 'No proration needed';\n  }\n}\n","/**\n * Centralized Badge Utilities\n * \n * Provides consistent badge generation across all entity types\n * with proper styling and icon handling.\n */\n\nimport React from 'react';\nimport { \n  UserCheck, \n  UserX, \n  CheckCircle, \n  XCircle,\n  MapPin,\n  Building2,\n  Store,\n  User as UserIcon,\n  Shield,\n  Package,\n  DollarSign,\n  TrendingUp,\n  TrendingDown,\n  AlertTriangle,\n  ShoppingCart\n} from 'lucide-react';\nimport { ENTITY_STATUS, USER_ROLE, getStatusColor, getStatusLabel } from '@rentalshop/constants';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface BadgeConfig {\n  color: string;\n  icon: React.ComponentType<{ className?: string }>;\n  text: string;\n}\n\nexport interface StatusBadgeProps {\n  isActive: boolean;\n  entityType?: 'entity' | 'availability';\n}\n\nexport interface RoleBadgeProps {\n  role: string;\n}\n\nexport interface LocationBadgeProps {\n  city?: string;\n  state?: string;\n}\n\nexport interface AvailabilityBadgeProps {\n  available: number;\n  totalStock: number;\n}\n\n// ============================================================================\n// STATUS BADGES\n// ============================================================================\n\n/**\n * Get status badge configuration for any entity\n */\nexport const getStatusBadgeConfig = (isActive: boolean, entityType: 'entity' | 'availability' = 'entity'): BadgeConfig => {\n  const status = isActive ? ENTITY_STATUS.ACTIVE : ENTITY_STATUS.INACTIVE;\n  const colorClass = getStatusColor(status, entityType);\n  const label = getStatusLabel(status, entityType);\n  \n  let Icon: React.ComponentType<{ className?: string }>;\n  \n  switch (entityType) {\n    case 'availability':\n      Icon = isActive ? CheckCircle : XCircle;\n      break;\n    default:\n      Icon = isActive ? UserCheck : UserX;\n  }\n  \n  return {\n    color: colorClass,\n    icon: Icon,\n    text: label\n  };\n};\n\n/**\n * Generate status badge component\n */\nexport const getStatusBadge = ({ isActive, entityType = 'entity' }: StatusBadgeProps) => {\n  const config = getStatusBadgeConfig(isActive, entityType);\n  const Icon = config.icon;\n  \n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n      <Icon className=\"w-3 h-3 mr-1\" />\n      {config.text}\n    </span>\n  );\n};\n\n// ============================================================================\n// ROLE BADGES\n// ============================================================================\n\n/**\n * Get role badge configuration\n */\nexport const getRoleBadgeConfig = (role: string): BadgeConfig => {\n  const roleConfig = {\n    [USER_ROLE.ADMIN]: { color: 'bg-red-100 text-red-800', icon: Shield, text: 'Admin' },\n    [USER_ROLE.MERCHANT]: { color: 'bg-blue-100 text-blue-800', icon: Building2, text: 'Merchant' },\n    [USER_ROLE.OUTLET_ADMIN]: { color: 'bg-green-100 text-green-800', icon: Store, text: 'Outlet Admin' },\n    [USER_ROLE.OUTLET_STAFF]: { color: 'bg-gray-100 text-gray-800', icon: UserIcon, text: 'Outlet Staff' }\n  };\n  \n  return roleConfig[role as keyof typeof roleConfig] || {\n    color: 'bg-gray-100 text-gray-800',\n    icon: UserIcon,\n    text: role\n  };\n};\n\n/**\n * Generate role badge component\n */\nexport const getRoleBadge = ({ role }: RoleBadgeProps) => {\n  const config = getRoleBadgeConfig(role);\n  const Icon = config.icon;\n  \n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n      <Icon className=\"w-3 h-3 mr-1\" />\n      {config.text}\n    </span>\n  );\n};\n\n// ============================================================================\n// LOCATION BADGES\n// ============================================================================\n\n/**\n * Get location badge configuration\n */\nexport const getLocationBadgeConfig = (city?: string, state?: string): BadgeConfig | null => {\n  if (!city && !state) {\n    return null;\n  }\n  \n  const location = [city, state].filter(Boolean).join(', ');\n  \n  return {\n    color: 'bg-blue-100 text-blue-800',\n    icon: MapPin,\n    text: location\n  };\n};\n\n/**\n * Generate location badge component\n */\nexport const getLocationBadge = ({ city, state }: LocationBadgeProps) => {\n  const config = getLocationBadgeConfig(city, state);\n  \n  if (!config) {\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-500\">\n        <MapPin className=\"w-3 h-3 mr-1\" />\n        No location\n      </span>\n    );\n  }\n  \n  const Icon = config.icon;\n  \n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n      <Icon className=\"w-3 h-3 mr-1\" />\n      {config.text}\n    </span>\n  );\n};\n\n// ============================================================================\n// AVAILABILITY BADGES\n// ============================================================================\n\n/**\n * Get availability badge configuration\n */\nexport const getAvailabilityBadgeConfig = (available: number, totalStock: number): BadgeConfig => {\n  const stockPercentage = totalStock > 0 ? (available / totalStock) * 100 : 0;\n  \n  if (available === 0) {\n    return {\n      color: 'bg-red-100 text-red-800',\n      icon: XCircle,\n      text: 'Out of Stock'\n    };\n  } else if (stockPercentage < 20) {\n    return {\n      color: 'bg-orange-100 text-orange-800',\n      icon: AlertTriangle,\n      text: 'Low Stock'\n    };\n  } else if (stockPercentage < 50) {\n    return {\n      color: 'bg-yellow-100 text-yellow-800',\n      icon: TrendingDown,\n      text: 'Limited'\n    };\n  } else {\n    return {\n      color: 'bg-green-100 text-green-800',\n      icon: CheckCircle,\n      text: 'In Stock'\n    };\n  }\n};\n\n/**\n * Generate availability badge component\n */\nexport const getAvailabilityBadge = ({ available, totalStock }: AvailabilityBadgeProps) => {\n  const config = getAvailabilityBadgeConfig(available, totalStock);\n  const Icon = config.icon;\n  \n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n      <Icon className=\"w-3 h-3 mr-1\" />\n      {config.text}\n    </span>\n  );\n};\n\n// ============================================================================\n// PRICE BADGES\n// ============================================================================\n\n/**\n * Get price trend badge configuration\n */\nexport const getPriceTrendBadgeConfig = (currentPrice: number, previousPrice: number): BadgeConfig => {\n  const difference = currentPrice - previousPrice;\n  const percentage = previousPrice > 0 ? (difference / previousPrice) * 100 : 0;\n  \n  if (difference > 0) {\n    return {\n      color: 'bg-red-100 text-red-800',\n      icon: TrendingUp,\n      text: `+${percentage.toFixed(1)}%`\n    };\n  } else if (difference < 0) {\n    return {\n      color: 'bg-green-100 text-green-800',\n      icon: TrendingDown,\n      text: `${percentage.toFixed(1)}%`\n    };\n  } else {\n    return {\n      color: 'bg-gray-100 text-gray-800',\n      icon: DollarSign,\n      text: 'No Change'\n    };\n  }\n};\n\n/**\n * Generate price trend badge component\n */\nexport const getPriceTrendBadge = (currentPrice: number, previousPrice: number) => {\n  const config = getPriceTrendBadgeConfig(currentPrice, previousPrice);\n  const Icon = config.icon;\n  \n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n      <Icon className=\"w-3 h-3 mr-1\" />\n      {config.text}\n    </span>\n  );\n};\n\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n\n/**\n * Generate customer status badge (backward compatibility)\n */\nexport const getCustomerStatusBadge = (isActive: boolean) => \n  getStatusBadge({ isActive, entityType: 'entity' });\n\n/**\n * Generate user status badge (backward compatibility)\n */\nexport const getUserStatusBadge = (isActive: boolean) => \n  getStatusBadge({ isActive, entityType: 'entity' });\n\n/**\n * Generate product status badge (backward compatibility)\n */\nexport const getProductStatusBadge = (isActive: boolean) => \n  getStatusBadge({ isActive, entityType: 'availability' });\n","export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","import { forwardRef, createElement, ReactSVG, SVGProps, ForwardRefExoticComponent, RefAttributes } from 'react';\nimport defaultAttributes from './defaultAttributes';\n\nexport type IconNode = [elementName: keyof ReactSVG, attrs: Record<string, string>][]\n\nexport type SVGAttributes = Partial<SVGProps<SVGSVGElement>>\ntype ComponentAttributes = RefAttributes<SVGSVGElement> & SVGAttributes\n\nexport interface LucideProps extends ComponentAttributes {\n  size?: string | number\n  absoluteStrokeWidth?: boolean\n}\n\nexport type LucideIcon = ForwardRefExoticComponent<LucideProps>;\n/**\n * Converts string to KebabCase\n * Copied from scripts/helper. If anyone knows how to properly import it here\n * then please fix it.\n *\n * @param {string} string\n * @returns {string} A kebabized string\n */\nexport const toKebabCase = (string: string) => string.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n\nconst createLucideIcon = (iconName: string, iconNode: IconNode): LucideIcon => {\n  const Component = forwardRef<SVGSVGElement, LucideProps>(\n    ({ color = 'currentColor', size = 24, strokeWidth = 2, absoluteStrokeWidth, children, ...rest }, ref) =>\n      createElement(\n        'svg',\n        {\n          ref,\n          ...defaultAttributes,\n          width: size,\n          height: size,\n          stroke: color,\n          strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n          className: `lucide lucide-${toKebabCase(iconName)}`,\n          ...rest,\n        },\n        [\n          ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n          ...(\n            (Array.isArray(children) ? children : [children]) || []\n          )\n        ],\n      ),\n  );\n\n  Component.displayName = `${iconName}`;\n\n  return Component;\n};\n\nexport default createLucideIcon\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name AlertTriangle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNzMgMTgtOC0xNGEyIDIgMCAwIDAtMy40OCAwbC04IDE0QTIgMiAwIDAgMCA0IDIxaDE2YTIgMiAwIDAgMCAxLjczLTNaIiAvPgogIDxwYXRoIGQ9Ik0xMiA5djQiIC8+CiAgPHBhdGggZD0iTTEyIDE3aC4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/alert-triangle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst AlertTriangle = createLucideIcon('AlertTriangle', [\n  [\n    'path',\n    {\n      d: 'm21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z',\n      key: 'c3ski4',\n    },\n  ],\n  ['path', { d: 'M12 9v4', key: 'juzpu7' }],\n  ['path', { d: 'M12 17h.01', key: 'p32p05' }],\n]);\n\nexport default AlertTriangle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Building2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAyMlY0YTIgMiAwIDAgMSAyLTJoOGEyIDIgMCAwIDEgMiAydjE4WiIgLz4KICA8cGF0aCBkPSJNNiAxMkg0YTIgMiAwIDAgMC0yIDJ2NmEyIDIgMCAwIDAgMiAyaDIiIC8+CiAgPHBhdGggZD0iTTE4IDloMmEyIDIgMCAwIDEgMiAydjlhMiAyIDAgMCAxLTIgMmgtMiIgLz4KICA8cGF0aCBkPSJNMTAgNmg0IiAvPgogIDxwYXRoIGQ9Ik0xMCAxMGg0IiAvPgogIDxwYXRoIGQ9Ik0xMCAxNGg0IiAvPgogIDxwYXRoIGQ9Ik0xMCAxOGg0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/building-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Building2 = createLucideIcon('Building2', [\n  ['path', { d: 'M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z', key: '1b4qmf' }],\n  ['path', { d: 'M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2', key: 'i71pzd' }],\n  ['path', { d: 'M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2', key: '10jefs' }],\n  ['path', { d: 'M10 6h4', key: '1itunk' }],\n  ['path', { d: 'M10 10h4', key: 'tcdvrf' }],\n  ['path', { d: 'M10 14h4', key: 'kelpxr' }],\n  ['path', { d: 'M10 18h4', key: '1ulq68' }],\n]);\n\nexport default Building2;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTEuMDhWMTJhMTAgMTAgMCAxIDEtNS45My05LjE0IiAvPgogIDxwb2x5bGluZSBwb2ludHM9IjIyIDQgMTIgMTQuMDEgOSAxMS4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/check-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCircle = createLucideIcon('CheckCircle', [\n  ['path', { d: 'M22 11.08V12a10 10 0 1 1-5.93-9.14', key: 'g774vq' }],\n  ['polyline', { points: '22 4 12 14.01 9 11.01', key: '6xbx8j' }],\n]);\n\nexport default CheckCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name DollarSign\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjIiIHkyPSIyMiIgLz4KICA8cGF0aCBkPSJNMTcgNUg5LjVhMy41IDMuNSAwIDAgMCAwIDdoNWEzLjUgMy41IDAgMCAxIDAgN0g2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/dollar-sign\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst DollarSign = createLucideIcon('DollarSign', [\n  ['line', { x1: '12', x2: '12', y1: '2', y2: '22', key: '7eqyqh' }],\n  [\n    'path',\n    { d: 'M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6', key: '1b0p4s' },\n  ],\n]);\n\nexport default DollarSign;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name FileText\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWNy41TDE0LjUgMnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiIC8+CiAgPGxpbmUgeDE9IjE2IiB4Mj0iOCIgeTE9IjEzIiB5Mj0iMTMiIC8+CiAgPGxpbmUgeDE9IjE2IiB4Mj0iOCIgeTE9IjE3IiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjEwIiB4Mj0iOCIgeTE9IjkiIHkyPSI5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-text\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileText = createLucideIcon('FileText', [\n  [\n    'path',\n    {\n      d: 'M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z',\n      key: '1nnpy2',\n    },\n  ],\n  ['polyline', { points: '14 2 14 8 20 8', key: '1ew0cm' }],\n  ['line', { x1: '16', x2: '8', y1: '13', y2: '13', key: '14keom' }],\n  ['line', { x1: '16', x2: '8', y1: '17', y2: '17', key: '17nazh' }],\n  ['line', { x1: '10', x2: '8', y1: '9', y2: '9', key: '1a5vjj' }],\n]);\n\nexport default FileText;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name MapPin\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTBjMCA2LTggMTItOCAxMnMtOC02LTgtMTJhOCA4IDAgMCAxIDE2IDBaIiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTAiIHI9IjMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/map-pin\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MapPin = createLucideIcon('MapPin', [\n  [\n    'path',\n    { d: 'M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z', key: '2oe9fu' },\n  ],\n  ['circle', { cx: '12', cy: '10', r: '3', key: 'ilqhr7' }],\n]);\n\nexport default MapPin;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Package\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYuNSA5LjQgNy41NSA0LjI0IiAvPgogIDxwYXRoIGQ9Ik0yMSAxNlY4YTIgMiAwIDAgMC0xLTEuNzNsLTctNGEyIDIgMCAwIDAtMiAwbC03IDRBMiAyIDAgMCAwIDMgOHY4YTIgMiAwIDAgMCAxIDEuNzNsNyA0YTIgMiAwIDAgMCAyIDBsNy00QTIgMiAwIDAgMCAyMSAxNnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMy4yOSA3IDEyIDEyIDIwLjcxIDciIC8+CiAgPGxpbmUgeDE9IjEyIiB4Mj0iMTIiIHkxPSIyMiIgeTI9IjEyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/package\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Package = createLucideIcon('Package', [\n  ['path', { d: 'M16.5 9.4 7.55 4.24', key: '10qotr' }],\n  [\n    'path',\n    {\n      d: 'M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z',\n      key: 'yt0hxn',\n    },\n  ],\n  ['polyline', { points: '3.29 7 12 12 20.71 7', key: 'ousv84' }],\n  ['line', { x1: '12', x2: '12', y1: '22', y2: '12', key: 'a4e8g8' }],\n]);\n\nexport default Package;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Shield\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjJzOC00IDgtMTBWNWwtOC0zLTggM3Y3YzAgNiA4IDEwIDggMTB6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/shield\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Shield = createLucideIcon('Shield', [\n  ['path', { d: 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z', key: '3xmgem' }],\n]);\n\nexport default Shield;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ShoppingCart\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSI4IiBjeT0iMjEiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iMTkiIGN5PSIyMSIgcj0iMSIgLz4KICA8cGF0aCBkPSJNMi4wNSAyLjA1aDJsMi42NiAxMi40MmEyIDIgMCAwIDAgMiAxLjU4aDkuNzhhMiAyIDAgMCAwIDEuOTUtMS41N2wxLjY1LTcuNDNINS4xMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/shopping-cart\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShoppingCart = createLucideIcon('ShoppingCart', [\n  ['circle', { cx: '8', cy: '21', r: '1', key: 'jimo8o' }],\n  ['circle', { cx: '19', cy: '21', r: '1', key: '13723u' }],\n  [\n    'path',\n    {\n      d: 'M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12',\n      key: '9zh506',\n    },\n  ],\n]);\n\nexport default ShoppingCart;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Store\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMiA3IDQuNDEtNC40MUEyIDIgMCAwIDEgNy44MyAyaDguMzRhMiAyIDAgMCAxIDEuNDIuNTlMMjIgNyIvPgogIDxwYXRoIGQ9Ik00IDEydjhhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0ydi04Ii8+CiAgPHBhdGggZD0iTTE1IDIydi00YTIgMiAwIDAgMC0yLTJoLTJhMiAyIDAgMCAwLTIgMnY0Ii8+CiAgPHBhdGggZD0iTTIgN2gyMCIvPgogIDxwYXRoIGQ9Ik0yMiA3djNhMiAyIDAgMCAxLTIgMnYwYTIuNyAyLjcgMCAwIDEtMS41OS0uNjMuNy43IDAgMCAwLS44MiAwQTIuNyAyLjcgMCAwIDEgMTYgMTJhMi43IDIuNyAwIDAgMS0xLjU5LS42My43LjcgMCAwIDAtLjgyIDBBMi43IDIuNyAwIDAgMSAxMiAxMmEyLjcgMi43IDAgMCAxLTEuNTktLjYzLjcuNyAwIDAgMC0uODIgMEEyLjcgMi43IDAgMCAxIDggMTJhMi43IDIuNyAwIDAgMS0xLjU5LS42My43LjcgMCAwIDAtLjgyIDBBMi43IDIuNyAwIDAgMSA0IDEydjBhMiAyIDAgMCAxLTItMlY3Ii8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/store\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Store = createLucideIcon('Store', [\n  [\n    'path',\n    {\n      d: 'm2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7',\n      key: 'ztvudi',\n    },\n  ],\n  ['path', { d: 'M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8', key: '1b2hhj' }],\n  ['path', { d: 'M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4', key: '2ebpfo' }],\n  ['path', { d: 'M2 7h20', key: '1fcdvo' }],\n  [\n    'path',\n    {\n      d: 'M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7',\n      key: 'jon5kx',\n    },\n  ],\n]);\n\nexport default Store;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TrendingDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIyMiAxNyAxMy41IDguNSA4LjUgMTMuNSAyIDciIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTYgMTcgMjIgMTcgMjIgMTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trending-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingDown = createLucideIcon('TrendingDown', [\n  ['polyline', { points: '22 17 13.5 8.5 8.5 13.5 2 7', key: '1r2t7k' }],\n  ['polyline', { points: '16 17 22 17 22 11', key: '11uiuu' }],\n]);\n\nexport default TrendingDown;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TrendingUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIyMiA3IDEzLjUgMTUuNSA4LjUgMTAuNSAyIDE3IiAvPgogIDxwb2x5bGluZSBwb2ludHM9IjE2IDcgMjIgNyAyMiAxMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/trending-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingUp = createLucideIcon('TrendingUp', [\n  ['polyline', { points: '22 7 13.5 15.5 8.5 10.5 2 17', key: '126l90' }],\n  ['polyline', { points: '16 7 22 7 22 13', key: 'kwv8wd' }],\n]);\n\nexport default TrendingUp;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name UserCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNiAxMSAxOCAxMyAyMiA5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/user-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserCheck = createLucideIcon('UserCheck', [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['polyline', { points: '16 11 18 13 22 9', key: '1pwet4' }],\n]);\n\nexport default UserCheck;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name UserX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8bGluZSB4MT0iMTciIHgyPSIyMiIgeTE9IjgiIHkyPSIxMyIgLz4KICA8bGluZSB4MT0iMjIiIHgyPSIxNyIgeTE9IjgiIHkyPSIxMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/user-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserX = createLucideIcon('UserX', [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['line', { x1: '17', x2: '22', y1: '8', y2: '13', key: '3nzzx3' }],\n  ['line', { x1: '22', x2: '17', y1: '8', y2: '13', key: '1swrse' }],\n]);\n\nexport default UserX;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('User', [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n]);\n\nexport default User;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name XCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtMTUgOS02IDYiIC8+CiAgPHBhdGggZD0ibTkgOSA2IDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst XCircle = createLucideIcon('XCircle', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm15 9-6 6', key: '1uzhvr' }],\n  ['path', { d: 'm9 9 6 6', key: 'z0biqf' }],\n]);\n\nexport default XCircle;\n","import React from 'react';\nimport { \n  User, \n  Phone, \n  Mail,\n  Calendar,\n  FileText,\n  Building2,\n  MapPin\n} from 'lucide-react';\nimport type { Customer, CustomerFilters } from '@rentalshop/types';\nimport { getCustomerStatusBadge, getLocationBadge } from './badge-utils';\n\n/**\n * Get customer location badge configuration and component\n * @param city - Customer city\n * @param state - Customer state\n * @returns JSX element for location badge\n */\nexport const getCustomerLocationBadge = (city?: string, state?: string) => {\n  return getLocationBadge({ city, state });\n};\n\n/**\n * Get customer ID type badge configuration and component\n * @param idType - Customer ID type\n * @returns JSX element for ID type badge\n */\nexport const getCustomerIdTypeBadge = (idType?: string) => {\n  if (!idType) {\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\n        <FileText className=\"w-3 h-3 mr-1\" />\n        No ID\n      </span>\n    );\n  }\n  \n  const idTypeConfig = {\n    'passport': { color: 'bg-purple-100 text-purple-800', text: 'Passport' },\n    'drivers_license': { color: 'bg-blue-100 text-blue-800', text: 'Driver License' },\n    'national_id': { color: 'bg-green-100 text-green-800', text: 'National ID' },\n    'other': { color: 'bg-gray-100 text-gray-800', text: 'Other' }\n  };\n  \n  const config = idTypeConfig[idType as keyof typeof idTypeConfig] || idTypeConfig.other;\n  \n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n      <FileText className=\"w-3 h-3 mr-1\" />\n      {config.text}\n    </span>\n  );\n};\n\n/**\n * Calculate customer statistics from customer array\n * @param customers - Array of customers\n * @returns Object with calculated statistics\n */\nexport const calculateCustomerStats = (customers: Customer[]) => {\n  const customersArray = customers || [];\n  const totalCustomers = customersArray.length;\n  const activeCustomers = customersArray.filter(c => c.isActive).length;\n  const inactiveCustomers = customersArray.filter(c => !c.isActive).length;\n  const customersWithEmail = customersArray.filter(c => c.email && c.email.trim() !== '').length;\n  const customersWithAddress = customersArray.filter(c => c.address && c.address.trim() !== '').length;\n  \n  // Group by location\n  const locationStats = customersArray.reduce((acc, customer) => {\n    const key = `${customer.city || 'Unknown'}, ${customer.state || 'Unknown'}`;\n    acc[key] = (acc[key] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n  \n  const topLocation = Object.entries(locationStats).reduce((max, [location, count]) => \n    count > max.count ? { location, count } : max, \n    { location: 'None', count: 0 }\n  );\n  \n  return { \n    totalCustomers, \n    activeCustomers, \n    inactiveCustomers, \n    customersWithEmail,\n    customersWithAddress,\n    topLocation: topLocation.location,\n    topLocationCount: topLocation.count\n  };\n};\n\n/**\n * Filter customers based on search term and filters\n * @param customers - Array of customers to filter\n * @param searchTerm - Search term for name, email, phone\n * @param filters - Customer filters object\n * @returns Filtered array of customers\n */\nexport const filterCustomers = (\n  customers: Customer[], \n  searchTerm: string, \n  filters: CustomerFilters\n): Customer[] => {\n  return (customers || []).filter(customer => {\n    // Safety check to ensure customer object has required properties\n    if (!customer || typeof customer !== 'object') {\n      return false;\n    }\n    \n    const fullName = `${customer.firstName || ''} ${customer.lastName || ''}`.trim();\n    const matchesSearch = fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         (customer.email || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         (customer.phone || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         (customer.address || '').toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesCity = !filters.city || (customer.city || '').toLowerCase().includes(filters.city.toLowerCase());\n    const matchesState = !filters.state || (customer.state || '').toLowerCase().includes(filters.state.toLowerCase());\n    const matchesCountry = !filters.country || (customer.country || '').toLowerCase().includes(filters.country.toLowerCase());\n    const matchesIdType = !filters.idType || customer.idType === filters.idType;\n    const matchesActive = filters.isActive === undefined || customer.isActive === filters.isActive;\n    const matchesMerchant = !filters.merchantId || customer.merchantId === filters.merchantId;\n    const matchesOutlet = !filters.outletId || customer.outletId === filters.outletId;\n    \n    return matchesSearch && matchesCity && matchesState && matchesCountry && \n           matchesIdType && matchesActive && matchesMerchant && matchesOutlet;\n  });\n};\n\n/**\n * Get customer's full name\n * @param customer - Customer object\n * @returns Full name string\n */\nexport const getCustomerFullName = (customer: Customer): string => {\n  return `${customer.firstName || ''} ${customer.lastName || ''}`.trim();\n};\n\n/**\n * Get customer's display address\n * @param customer - Customer object\n * @returns Formatted address string\n */\nexport const getCustomerAddress = (customer: Customer): string => {\n  const parts = [\n    customer.address,\n    customer.city,\n    customer.state,\n    customer.zipCode,\n    customer.country\n  ].filter(Boolean);\n  \n  return parts.join(', ') || 'No address provided';\n};\n\n/**\n * Get customer's contact info\n * @param customer - Customer object\n * @returns Object with contact information\n */\nexport const getCustomerContactInfo = (customer: Customer) => {\n  return {\n    email: customer.email || 'No email',\n    phone: customer.phone || 'No phone',\n    hasEmail: !!(customer.email && customer.email.trim() !== ''),\n    hasPhone: !!(customer.phone && customer.phone.trim() !== ''),\n    hasAddress: !!(customer.address && customer.address.trim() !== '')\n  };\n};\n\n/**\n * Format customer for display in tables/cards\n * @param customer - Customer object\n * @returns Formatted customer object with display properties\n */\nexport const formatCustomerForDisplay = (customer: Customer) => {\n  return {\n    ...customer,\n    fullName: getCustomerFullName(customer),\n    displayAddress: getCustomerAddress(customer),\n    contactInfo: getCustomerContactInfo(customer),\n    statusBadge: getCustomerStatusBadge(customer.isActive),\n    locationBadge: getCustomerLocationBadge(customer.city, customer.state),\n    idTypeBadge: getCustomerIdTypeBadge(customer.idType)\n  };\n};\n\n/**\n * Validate customer data\n * @param customer - Customer object to validate\n * @returns Object with validation results\n */\nexport const validateCustomer = (customer: Partial<Customer>) => {\n  const errors: string[] = [];\n  \n  if (!customer.firstName || customer.firstName.trim() === '') {\n    errors.push('First name is required');\n  }\n  \n  if (!customer.lastName || customer.lastName.trim() === '') {\n    errors.push('Last name is required');\n  }\n  \n  if (!customer.phone || customer.phone.trim() === '') {\n    errors.push('Phone number is required');\n  }\n  \n  if (customer.email && customer.email.trim() !== '') {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(customer.email)) {\n      errors.push('Invalid email format');\n    }\n  }\n  \n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n/**\n * Get customer age from date of birth\n * @param dateOfBirth - Date of birth string or Date\n * @returns Age in years or null if invalid\n */\nexport const getCustomerAge = (dateOfBirth?: string | Date): number | null => {\n  if (!dateOfBirth) return null;\n  \n  try {\n    const birthDate = new Date(dateOfBirth);\n    const today = new Date();\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    \n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    \n    return age >= 0 ? age : null;\n  } catch {\n    return null;\n  }\n};\n","import React from 'react';\nimport { \n  Package, \n  DollarSign, \n  ShoppingCart,\n  Store,\n  XCircle,\n  AlertTriangle,\n  TrendingDown,\n  CheckCircle\n} from 'lucide-react';\nimport type { Product, ProductWithDetails } from '@rentalshop/types';\nimport { getProductStatusBadge, getAvailabilityBadge, getPriceTrendBadge } from './badge-utils';\n\n/**\n * Get product availability badge configuration and component\n * @param available - Available stock count\n * @param totalStock - Total stock count\n * @returns JSX element for availability badge\n */\nexport const getProductAvailabilityBadge = (available: number, totalStock: number) => {\n  const stockPercentage = totalStock > 0 ? (available / totalStock) * 100 : 0;\n  \n  let config;\n  if (available === 0) {\n    config = { color: 'bg-red-100 text-red-800', icon: XCircle, text: 'Out of Stock' };\n  } else if (stockPercentage < 25) {\n    config = { color: 'bg-orange-100 text-orange-800', icon: AlertTriangle, text: 'Low Stock' };\n  } else if (stockPercentage < 50) {\n    config = { color: 'bg-yellow-100 text-yellow-800', icon: TrendingDown, text: 'Limited Stock' };\n  } else {\n    config = { color: 'bg-green-100 text-green-800', icon: CheckCircle, text: 'In Stock' };\n  }\n  \n  const Icon = config.icon;\n  \n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n      <Icon className=\"w-3 h-3 mr-1\" />\n      {config.text}\n    </span>\n  );\n};\n\n/**\n * Get product type badge configuration and component\n * @param product - Product object\n * @returns JSX element for product type badge\n */\nexport const getProductTypeBadge = (product: Product | ProductWithDetails) => {\n  const hasRentPrice = product.rentPrice && product.rentPrice > 0;\n  const hasSalePrice = product.salePrice && product.salePrice > 0;\n  \n  let config;\n  if (hasRentPrice && hasSalePrice) {\n    config = { color: 'bg-blue-100 text-blue-800', icon: Package, text: 'Rent & Sale' };\n  } else if (hasRentPrice) {\n    config = { color: 'bg-purple-100 text-purple-800', icon: ShoppingCart, text: 'Rental Only' };\n  } else if (hasSalePrice) {\n    config = { color: 'bg-green-100 text-green-800', icon: DollarSign, text: 'Sale Only' };\n  } else {\n    config = { color: 'bg-gray-100 text-gray-800', icon: Package, text: 'No Pricing' };\n  }\n  \n  const Icon = config.icon;\n  \n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n      <Icon className=\"w-3 h-3 mr-1\" />\n      {config.text}\n    </span>\n  );\n};\n\n/**\n * Calculate product statistics from product array\n * @param products - Array of products\n * @returns Object with calculated statistics\n */\nexport const calculateProductStats = (products: Product[] | ProductWithDetails[]) => {\n  const productsArray = products || [];\n  const totalProducts = productsArray.length;\n  const activeProducts = productsArray.filter(p => p.isActive).length;\n  const inactiveProducts = productsArray.filter(p => !p.isActive).length;\n  const inStockProducts = productsArray.filter(p => p.available > 0).length;\n  const outOfStockProducts = productsArray.filter(p => p.available === 0).length;\n  const lowStockProducts = productsArray.filter(p => p.available > 0 && p.available < 5).length;\n  \n  // Calculate total stock value\n  const totalStockValue = productsArray.reduce((sum, product) => {\n    const stockValue = product.available * (product.rentPrice || 0);\n    return sum + stockValue;\n  }, 0);\n  \n  // Calculate average price\n  const productsWithPrice = productsArray.filter(p => p.rentPrice && p.rentPrice > 0);\n  const averagePrice = productsWithPrice.length > 0 \n    ? productsWithPrice.reduce((sum, p) => sum + (p.rentPrice || 0), 0) / productsWithPrice.length\n    : 0;\n  \n  return { \n    totalProducts, \n    activeProducts, \n    inactiveProducts, \n    inStockProducts,\n    outOfStockProducts,\n    lowStockProducts,\n    totalStockValue,\n    averagePrice\n  };\n};\n\n/**\n * Filter products based on search term, category, outlet, and availability\n * @param products - Array of products to filter\n * @param searchTerm - Search term for name, description, barcode\n * @param categoryFilter - Category filter ('all' or specific category ID)\n * @param outletFilter - Outlet filter ('all' or specific outlet ID)\n * @param availabilityFilter - Availability filter ('all', 'in-stock', 'out-of-stock', 'low-stock')\n * @param statusFilter - Status filter ('all', 'active', 'inactive')\n * @returns Filtered array of products\n */\nexport const filterProducts = (\n  products: Product[] | ProductWithDetails[], \n  searchTerm: string, \n  categoryFilter: string,\n  outletFilter: string,\n  availabilityFilter: string,\n  statusFilter: string\n): (Product[] | ProductWithDetails[]) => {\n  return (products || []).filter(product => {\n    // Safety check to ensure product object has required properties\n    if (!product || typeof product !== 'object') {\n      return false;\n    }\n    \n    const matchesSearch = (product.name || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         (product.description || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         (product.barcode || '').toLowerCase().includes(searchTerm.toLowerCase());\n    \n    // Check category - use categoryId for Product, category.id for ProductWithDetails\n    const productCategoryId = 'category' in product ? (product as any).category?.id : product.categoryId;\n    const matchesCategory = categoryFilter === 'all' || \n                           (productCategoryId && productCategoryId.toString() === categoryFilter);\n    \n    // Check outlet - only available in ProductWithDetails\n    const productOutletId = 'outlet' in product ? (product as any).outlet?.id : undefined;\n    const matchesOutlet = outletFilter === 'all' || \n                         (productOutletId && productOutletId.toString() === outletFilter);\n    \n    const matchesAvailability = availabilityFilter === 'all' ||\n                               (availabilityFilter === 'in-stock' && product.available > 0) ||\n                               (availabilityFilter === 'out-of-stock' && product.available === 0) ||\n                               (availabilityFilter === 'low-stock' && product.available > 0 && product.available < 5);\n    \n    const matchesStatus = statusFilter === 'all' || \n                         (statusFilter === 'active' && product.isActive) ||\n                         (statusFilter === 'inactive' && !product.isActive);\n    \n    return matchesSearch && matchesCategory && matchesOutlet && matchesAvailability && matchesStatus;\n  });\n};\n\n/**\n * Format product price for display\n * @param price - Price value\n * @param currency - Currency code (default: USD)\n * @returns Formatted price string\n */\nexport const formatProductPrice = (price: number, currency: string = 'USD'): string => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency\n  }).format(price);\n};\n\n/**\n * Get product's primary image URL\n * @param product - Product object\n * @returns Primary image URL or placeholder\n */\nexport const getProductImageUrl = (product: Product | ProductWithDetails): string => {\n  if (product.images && product.images.length > 0) {\n    return product.images[0];\n  }\n  return '/images/product-placeholder.png'; // Default placeholder\n};\n\n/**\n * Calculate product's stock percentage\n * @param available - Available stock\n * @param totalStock - Total stock\n * @returns Stock percentage (0-100)\n */\nexport const calculateStockPercentage = (available: number, totalStock: number): number => {\n  if (totalStock === 0) return 0;\n  return Math.round((available / totalStock) * 100);\n};\n\n/**\n * Get product's stock status text\n * @param available - Available stock\n * @param totalStock - Total stock\n * @returns Stock status text\n */\nexport const getProductStockStatus = (available: number, totalStock: number): string => {\n  if (available === 0) return 'Out of Stock';\n  if (available < 5) return 'Low Stock';\n  if (available < totalStock * 0.5) return 'Limited Stock';\n  return 'In Stock';\n};\n\n/**\n * Check if product can be rented\n * @param product - Product object\n * @returns Boolean indicating if product can be rented\n */\nexport const canRentProduct = (product: Product | ProductWithDetails): boolean => {\n  return product.isActive && product.available > 0 && product.rentPrice > 0;\n};\n\n/**\n * Check if product can be sold\n * @param product - Product object\n * @returns Boolean indicating if product can be sold\n */\nexport const canSellProduct = (product: Product | ProductWithDetails): boolean => {\n  return product.isActive && product.available > 0 && (product as any).salePrice && (product as any).salePrice > 0;\n};\n\n/**\n * Get product's display name with fallback\n * @param product - Product object\n * @returns Product display name\n */\nexport const getProductDisplayName = (product: Product | ProductWithDetails): string => {\n  return product.name || 'Unnamed Product';\n};\n\n/**\n * Get product's category name with fallback\n * @param product - Product object\n * @returns Category name or 'Uncategorized'\n */\nexport const getProductCategoryName = (product: Product | ProductWithDetails): string => {\n  return 'category' in product ? (product.category?.name || 'Uncategorized') : 'Uncategorized';\n};\n\n/**\n * Get product's outlet name with fallback\n * @param product - Product object\n * @returns Outlet name or 'No Outlet'\n */\nexport const getProductOutletName = (product: Product | ProductWithDetails): string => {\n  return 'outlet' in product ? ((product as any).outlet?.name || 'No Outlet') : 'No Outlet';\n};\n\n/**\n * Sort products by various criteria\n * @param products - Array of products\n * @param sortBy - Sort field ('name', 'price', 'stock', 'createdAt', 'updatedAt')\n * @param sortOrder - Sort order ('asc' or 'desc')\n * @returns Sorted array of products\n */\nexport const sortProducts = (\n  products: Product[] | ProductWithDetails[],\n  sortBy: string,\n  sortOrder: 'asc' | 'desc' = 'asc'\n): (Product[] | ProductWithDetails[]) => {\n  return [...products].sort((a, b) => {\n    let aValue: any;\n    let bValue: any;\n    \n    switch (sortBy) {\n      case 'name':\n        aValue = (a.name || '').toLowerCase();\n        bValue = (b.name || '').toLowerCase();\n        break;\n      case 'price':\n        aValue = a.rentPrice || 0;\n        bValue = b.rentPrice || 0;\n        break;\n      case 'stock':\n        aValue = a.available || 0;\n        bValue = b.available || 0;\n        break;\n      case 'createdAt':\n        aValue = new Date(a.createdAt).getTime();\n        bValue = new Date(b.createdAt).getTime();\n        break;\n      case 'updatedAt':\n        aValue = new Date(a.updatedAt).getTime();\n        bValue = new Date(b.updatedAt).getTime();\n        break;\n      default:\n        aValue = a.name || '';\n        bValue = b.name || '';\n    }\n    \n    if (sortOrder === 'asc') {\n      return aValue > bValue ? 1 : -1;\n    } else {\n      return aValue < bValue ? 1 : -1;\n    }\n  });\n};\n","import React from 'react';\nimport type { User } from '@rentalshop/types';\nimport { getRoleBadge, getStatusBadge } from './badge-utils';\n\n/**\n * Get role badge configuration and component\n * @param role - User role string\n * @returns JSX element for role badge\n */\nexport const getUserRoleBadge = (role: string) => {\n  return getRoleBadge({ role });\n};\n\n// getUserStatusBadge is now exported from ./badge-utils.tsx for centralized badge management\n\n/**\n * Calculate user statistics from user array\n * @param users - Array of users\n * @returns Object with calculated statistics\n */\nexport const calculateUserStats = (users: User[]) => {\n  const usersArray = users || [];\n  const totalUsers = usersArray.length;\n  const activeUsers = usersArray.filter(u => u.isActive).length;\n  const inactiveUsers = usersArray.filter(u => !u.isActive).length;\n  const verifiedUsers = usersArray.filter(u => u.emailVerified).length;\n  const unverifiedUsers = usersArray.filter(u => !u.emailVerified).length;\n  \n  return { \n    totalUsers, \n    activeUsers, \n    inactiveUsers, \n    verifiedUsers, \n    unverifiedUsers \n  };\n};\n\n/**\n * Filter users based on search term, role, and status\n * @param users - Array of users to filter\n * @param searchTerm - Search term for name, email, merchant, outlet\n * @param roleFilter - Role filter ('all' or specific role)\n * @param statusFilter - Status filter ('all', 'ACTIVE', 'INACTIVE')\n * @returns Filtered array of users\n */\nexport const filterUsers = (\n  users: User[], \n  searchTerm: string, \n  roleFilter: string, \n  statusFilter: string\n): User[] => {\n  return (users || []).filter(user => {\n    // Safety check to ensure user object has required properties\n    if (!user || typeof user !== 'object') {\n      return false;\n    }\n    \n    const fullName = `${user.firstName || ''} ${user.lastName || ''}`.trim();\n    const matchesSearch = fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         (user.email || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         (user.merchant?.name && user.merchant.name.toLowerCase().includes(searchTerm.toLowerCase())) ||\n                         (user.outlet?.name && user.outlet.name.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesRole = roleFilter === 'all' || user.role === roleFilter;\n    const matchesStatus = statusFilter === 'all' || \n                         (statusFilter === 'ACTIVE' && user.isActive) ||\n                         (statusFilter === 'INACTIVE' && !user.isActive);\n    \n    return matchesSearch && matchesRole && matchesStatus;\n  });\n};\n\n/**\n * Get user's full name\n * @param user - User object\n * @returns Full name string\n */\nexport const getUserFullName = (user: User): string => {\n  return `${user.firstName || ''} ${user.lastName || ''}`.trim();\n};\n\n/**\n * Check if user can create other users based on role\n * @param userRole - Current user's role\n * @returns Boolean indicating if user can create other users\n */\nexport const canCreateUsers = (userRole?: string): boolean => {\n  return userRole === 'ADMIN' || \n         userRole === 'MERCHANT' || \n         userRole === 'OUTLET_ADMIN';\n};\n","import { z } from 'zod';\nimport { prisma } from '@rentalshop/database';\nimport { ApiError, ErrorCode } from './errors';\nimport { API, PlanLimits, getPlan, hasWebAccess, hasMobileAccess, getPlanPlatform, hasProductPublicCheck } from '@rentalshop/constants';\nimport { AuthUser } from '@rentalshop/types';\n\n// Auth validation schemas\nexport const loginSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  password: z.string().min(6, 'Password must be at least 6 characters'),\n});\n\nexport const registerSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  password: z.string().min(6, 'Password must be at least 6 characters'),\n  // Support both name formats for flexibility\n  name: z.string().min(2, 'Name must be at least 2 characters').optional(),\n  firstName: z.string().min(1, 'First name is required').optional(),\n  lastName: z.string().min(1, 'Last name is required').optional(),\n  phone: z.string().optional(),\n  role: z.enum(['CLIENT', 'SHOP_OWNER', 'ADMIN', 'MERCHANT', 'OUTLET_ADMIN', 'OUTLET_STAFF']).optional(),\n  // For merchant registration\n  businessName: z.string().optional(),\n  // Business configuration (required for merchants)\n  businessType: z.enum(['CLOTHING', 'VEHICLE', 'EQUIPMENT', 'GENERAL']).optional(),\n  pricingType: z.enum(['FIXED', 'HOURLY', 'DAILY', 'WEEKLY']).optional(),\n  // Address fields for merchant registration\n  address: z.string().optional(),\n  city: z.string().optional(),\n  state: z.string().optional(),\n  zipCode: z.string().optional(),\n  country: z.string().min(2, 'Please select a valid country').optional(),\n  // For outlet staff registration\n  merchantCode: z.string().optional(),\n  outletCode: z.string().optional(),\n}).refine((data) => {\n  // Either 'name' or both 'firstName' and 'lastName' must be provided\n  return data.name || (data.firstName && data.lastName);\n}, {\n  message: \"Either 'name' or both 'firstName' and 'lastName' must be provided\"\n}).refine((data) => {\n  // For MERCHANT role, businessType and pricingType are required\n  if (data.role === 'MERCHANT' || data.businessName) {\n    return data.businessType && data.pricingType;\n  }\n  return true;\n}, {\n  message: \"Business type and pricing type are required for merchant registration\"\n});\n\n// Product validation schemas (aligned with API routes and DB types)\nconst outletStockItemSchema = z.object({\n  outletId: z.coerce.number().int().positive('Outlet is required'),\n  stock: z.number().int().min(0, 'Stock must be non-negative'),\n});\n\nexport const productCreateSchema = z.object({\n  name: z.string().min(1, 'Product name is required'),\n  description: z.string().optional(),\n  barcode: z.string().optional(),\n  rentPrice: z.number().nonnegative('Rent price must be non-negative'),\n  salePrice: z.number().nonnegative('Sale price must be non-negative'),\n  deposit: z.number().nonnegative('Deposit must be non-negative').default(0),\n  categoryId: z.coerce.number().int().positive().optional(), // Optional - will use default category if not provided\n  totalStock: z.number().int().min(0, 'Total stock must be non-negative'),\n  images: z.union([z.string(), z.array(z.string())]).optional(), // Allow both string and array for testing\n  merchantId: z.coerce.number().int().positive().optional(), // Optional - required for ADMIN users, auto-assigned for others\n  outletStock: z.array(outletStockItemSchema).min(1, 'At least one outlet stock entry is required'), // Required - every product must have outlet stock\n});\n\nexport const productUpdateSchema = z.object({\n  name: z.string().min(1).optional(),\n  description: z.string().optional(),\n  rentPrice: z.number().nonnegative().optional(),\n  salePrice: z.number().nonnegative().nullable().optional(),\n  deposit: z.number().nonnegative().optional(),\n  images: z.string().optional(),\n  categoryId: z.coerce.number().int().positive().optional(), // Changed from string to number\n  totalStock: z.number().int().min(0).optional(),\n});\n\nexport const productsQuerySchema = z.object({\n  q: z.string().optional(), // Search query parameter (consistent with orders)\n  search: z.string().optional(), // Keep for backward compatibility\n  categoryId: z.coerce.number().int().positive().optional(), // Changed from string to number\n  outletId: z.coerce.number().int().positive().optional(), // Add outlet filtering\n  available: z.coerce.boolean().optional(), // Add availability filter\n  minPrice: z.coerce.number().nonnegative().optional(), // Add price range filters\n  maxPrice: z.coerce.number().nonnegative().optional(), // Add price range filters\n  page: z.coerce.number().int().min(1).default(1),\n  limit: z.coerce.number().int().min(1).max(100).default(20),\n  offset: z.coerce.number().int().min(0).default(0), // Add offset for pagination consistency\n  sortBy: z.string().optional(), // Add sorting support\n  sortOrder: z.enum(['asc', 'desc']).optional(), // Add sorting support\n});\n\n// Rental validation schemas\nexport const rentalSchema = z.object({\n  productId: z.coerce.number().int().positive('Product is required'), // Changed from string to number\n  startDate: z.date(),\n  endDate: z.date(),\n  notes: z.string().optional(),\n}).refine((data) => data.endDate > data.startDate, {\n  message: 'End date must be after start date',\n  path: ['endDate'],\n});\n\nexport type LoginInput = z.infer<typeof loginSchema>;\nexport type RegisterInput = z.infer<typeof registerSchema>;\nexport type ProductCreateInput = z.infer<typeof productCreateSchema>;\nexport type ProductUpdateInput = z.infer<typeof productUpdateSchema>;\nexport type ProductsQuery = z.infer<typeof productsQuerySchema>;\nexport type RentalInput = z.infer<typeof rentalSchema>; \n\n// Customer validation schemas\nexport const customerCreateSchema = z.object({\n  firstName: z.string().min(1, 'First name is required'),\n  lastName: z.string().min(1, 'Last name is required'),\n  email: z.string().email('Invalid email format').optional().or(z.literal('')),\n  phone: z.string().min(1, 'Phone number is required'),\n  merchantId: z.coerce.number().int().positive().optional(), // Optional - only required for ADMIN users, auto-assigned for MERCHANT/OUTLET from JWT\n  address: z.string().optional(),\n  city: z.string().optional(),\n  state: z.string().optional(),\n  zipCode: z.string().optional(),\n  country: z.string().optional(),\n  dateOfBirth: z.string().optional(),\n  idNumber: z.string().optional(),\n  idType: z.enum(['passport', 'drivers_license', 'national_id', 'other']).optional(),\n  notes: z.string().optional(),\n});\n\nexport const customerUpdateSchema = customerCreateSchema.partial().extend({\n  isActive: z.boolean().optional(),\n  idType: z.enum(['passport', 'drivers_license', 'national_id', 'other']).optional(),\n});\n\nexport const customersQuerySchema = z.object({\n  q: z.string().optional(), // Search query parameter (consistent with orders)\n  search: z.string().optional(), // Keep for backward compatibility\n  merchantId: z.coerce.number().int().positive().optional(), // Changed from string to number\n  isActive: z.union([z.string(), z.boolean()]).transform((v) => {\n    if (typeof v === 'boolean') return v;\n    if (v === undefined) return undefined;\n    return v === 'true';\n  }).optional(),\n  city: z.string().optional(),\n  state: z.string().optional(),\n  country: z.string().optional(),\n  idType: z.enum(['passport', 'drivers_license', 'national_id', 'other']).optional(),\n  page: z.coerce.number().int().min(1).default(1),\n  limit: z.coerce.number().int().min(1).max(100).default(20),\n  offset: z.coerce.number().int().min(0).default(0), // Add offset for pagination consistency\n  sortBy: z.string().optional(), // Add sorting support\n  sortOrder: z.enum(['asc', 'desc']).optional(), // Add sorting support\n});\n\n// ============================================================================\n// Orders validation schemas\n// ============================================================================\n\n// Simplified order types: only RENT and SALE\nconst orderTypeEnum = z.enum(['RENT', 'SALE']);\n\n// Order statuses based on order type:\n// RENT: RESERVED (mi cc), PICKUPED (ang thu), RETURNED ( tr), CANCELLED (hy)\n// SALE: COMPLETED v CANCELLED\nconst orderStatusEnum = z.enum(['RESERVED', 'PICKUPED', 'RETURNED', 'COMPLETED', 'CANCELLED']);\n\nexport const ordersQuerySchema = z.object({\n  q: z.string().optional(),\n  outletId: z.coerce.number().int().positive().optional(), // Changed from string to number\n  customerId: z.coerce.number().int().positive().optional(), // Changed from string to number\n  userId: z.coerce.number().int().positive().optional(), // Changed from string to number\n  productId: z.coerce.number().int().positive().optional(), // Add product filtering support\n  orderType: orderTypeEnum.optional(),\n  status: orderStatusEnum.optional(),\n  startDate: z.coerce.date().optional(),\n  endDate: z.coerce.date().optional(),\n  pickupDate: z.coerce.date().optional(),\n  returnDate: z.coerce.date().optional(),\n  minAmount: z.coerce.number().optional(),\n  maxAmount: z.coerce.number().optional(),\n  limit: z.coerce.number().int().min(1).max(100).default(20),\n  offset: z.coerce.number().int().min(0).default(0),\n});\n\nconst orderItemSchema = z.object({\n  productId: z.coerce.number().int().positive(), // Changed from string to number\n  quantity: z.coerce.number().int().positive(),\n  unitPrice: z.coerce.number().nonnegative().default(0),\n  totalPrice: z.coerce.number().nonnegative().optional(), // Made optional since server calculates it\n  deposit: z.coerce.number().nonnegative().default(0),\n  notes: z.string().optional(),\n  startDate: z.coerce.date().optional(),\n  endDate: z.coerce.date().optional(),\n  daysRented: z.coerce.number().int().nonnegative().optional(),\n});\n\n\n\n// Base order schema for both create and update\nconst baseOrderSchema = z.object({\n  // Optional fields for updates (backend generates if missing)\n  orderId: z.coerce.number().int().positive().optional(),\n  orderNumber: z.string().optional(),\n  \n  // Core order fields\n  orderType: orderTypeEnum,\n  customerId: z.coerce.number().int().positive().optional(),\n  outletId: z.coerce.number().int().positive(),\n  pickupPlanAt: z.coerce.date().optional(),\n  returnPlanAt: z.coerce.date().optional(),\n  rentalDuration: z.coerce.number().int().positive().optional(),\n  subtotal: z.coerce.number().nonnegative(),\n  taxAmount: z.coerce.number().nonnegative().optional(),\n  discountType: z.enum(['amount', 'percentage']).optional(),\n  discountValue: z.coerce.number().nonnegative().optional(),\n  discountAmount: z.coerce.number().nonnegative().optional(),\n  totalAmount: z.coerce.number().nonnegative(),\n  depositAmount: z.coerce.number().nonnegative().optional(),\n  securityDeposit: z.coerce.number().nonnegative().optional(),\n  damageFee: z.coerce.number().nonnegative().optional(),\n  lateFee: z.coerce.number().nonnegative().optional(),\n  collateralType: z.string().optional(),\n  collateralDetails: z.string().optional(),\n  notes: z.string().optional(),\n  pickupNotes: z.string().optional(),\n  returnNotes: z.string().optional(),\n  damageNotes: z.string().optional(),\n  customerName: z.string().optional(),\n  customerPhone: z.string().optional(),\n  customerEmail: z.string().email().optional(),\n  isReadyToDeliver: z.boolean().optional(),\n  \n  // Order items management\n  orderItems: z.array(orderItemSchema),\n});\n\nexport const orderCreateSchema = baseOrderSchema;\n\nexport const orderUpdateSchema = baseOrderSchema.partial().extend({\n  // Update-specific fields (not present in create)\n  status: orderStatusEnum.optional(),\n  pickedUpAt: z.coerce.date().optional(),\n  returnedAt: z.coerce.date().optional(),\n});\n\nexport type OrdersQuery = z.infer<typeof ordersQuerySchema>;\nexport type OrderCreateInput = z.infer<typeof orderCreateSchema>;\nexport type OrderUpdatePayload = z.infer<typeof orderUpdateSchema>;\n\n// ============================================================================\n// Users validation schemas\n// ============================================================================\n\nconst userRoleEnum = z.enum(['ADMIN', 'MERCHANT', 'OUTLET_ADMIN', 'OUTLET_STAFF']);\n\nexport const usersQuerySchema = z.object({\n  role: userRoleEnum.optional(),\n  isActive: z.union([z.string(), z.boolean()]).transform((v) => {\n    if (typeof v === 'boolean') return v;\n    if (v === undefined) return undefined;\n    return v === 'true';\n  }).optional(),\n  search: z.string().optional(),\n  page: z.coerce.number().int().min(1).default(1),\n  limit: z.coerce.number().int().min(1).max(100).default(20),\n  sortBy: z.enum(['firstName', 'lastName', 'email', 'createdAt']).default('createdAt').optional(),\n  sortOrder: z.enum(['asc', 'desc']).default('desc').optional(),\n});\n\nexport const userCreateSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n  firstName: z.string().min(1),\n  lastName: z.string().min(1).or(z.literal('')), // Allow empty string for lastName\n  phone: z.string().min(1, 'Phone number is required'), // Phone is now required\n  role: userRoleEnum.optional(),\n  merchantId: z.coerce.number().int().positive().optional(),\n  outletId: z.coerce.number().int().positive().optional(),\n});\n\nexport const userUpdateSchema = z.object({\n  firstName: z.string().min(1).optional(),\n  lastName: z.string().min(1).or(z.literal('')).optional(), // Allow empty string for lastName\n  email: z.string().email().optional(),\n  phone: z.string().min(1, 'Phone number is required').optional(), // Phone is required when provided\n  role: userRoleEnum.optional(),\n  isActive: z.boolean().optional(),\n  merchantId: z.coerce.number().int().positive().optional(),\n  outletId: z.coerce.number().int().positive().optional(),\n});\n\nexport type UsersQuery = z.infer<typeof usersQuerySchema>;\nexport type UserCreateInput = z.infer<typeof userCreateSchema>;\nexport type UserUpdateInput = z.infer<typeof userUpdateSchema>;\n\n// ============================================================================\n// Outlets validation schemas\n// ============================================================================\nexport const outletsQuerySchema = z.object({\n  merchantId: z.coerce.number().int().positive().optional(), // Changed from string to number\n  isActive: z.union([z.string(), z.boolean()]).transform((v) => {\n    if (typeof v === 'boolean') return v;\n    if (v === undefined) return undefined;\n    if (v === 'all') return 'all';\n    return v === 'true';\n  }).optional(),\n  search: z.string().optional(),\n  page: z.coerce.number().int().min(1).default(1),\n  limit: z.coerce.number().int().min(1).max(100).default(50),\n});\n\nexport const outletCreateSchema = z.object({\n  name: z.string().min(1, 'Outlet name is required'),\n  address: z.string().optional(),\n  city: z.string().optional(),\n  state: z.string().optional(),\n  zipCode: z.string().optional(),\n  country: z.string().optional(),\n  phone: z.string().optional(),\n  description: z.string().optional(),\n  status: z.enum(['ACTIVE', 'INACTIVE', 'CLOSED', 'SUSPENDED']).default('ACTIVE'),\n});\n\nexport const outletUpdateSchema = z.object({\n  name: z.string().min(1, 'Outlet name is required').optional(),\n  address: z.string().optional(),\n  phone: z.string().optional(),\n  city: z.string().optional(),\n  state: z.string().optional(),\n  zipCode: z.string().optional(),\n  country: z.string().optional(),\n  description: z.string().optional(),\n  isActive: z.boolean().optional(),\n  status: z.enum(['ACTIVE', 'INACTIVE', 'CLOSED', 'SUSPENDED']).optional(),\n});\n\nexport type OutletsQuery = z.infer<typeof outletsQuerySchema>;\nexport type OutletCreateInput = z.infer<typeof outletCreateSchema>;\nexport type OutletUpdateInput = z.infer<typeof outletUpdateSchema>;\n\n// Plan validation schemas\nexport const planCreateSchema = z.object({\n  name: z.string().min(1, 'Plan name is required'),\n  description: z.string().min(1, 'Plan description is required'),\n  basePrice: z.number().nonnegative('Base price must be non-negative'),\n  currency: z.string().default('USD'),\n  trialDays: z.number().int().min(0, 'Trial days must be non-negative'),\n  limits: z.object({\n    outlets: z.number().int().min(-1, 'Max outlets must be -1 (unlimited) or positive'),\n    users: z.number().int().min(-1, 'Max users must be -1 (unlimited) or positive'),\n    products: z.number().int().min(-1, 'Max products must be -1 (unlimited) or positive'),\n    customers: z.number().int().min(-1, 'Max customers must be -1 (unlimited) or positive'),\n  }),\n  features: z.array(z.string()).default([]),\n  isActive: z.boolean().default(true),\n  isPopular: z.boolean().default(false),\n  sortOrder: z.number().int().default(0),\n});\n\nexport const planUpdateSchema = planCreateSchema.partial();\n\nexport const plansQuerySchema = z.object({\n  search: z.string().optional(),\n  isActive: z.coerce.boolean().optional(),\n  isPopular: z.coerce.boolean().optional(),\n  limit: z.coerce.number().int().min(1).max(100).default(50),\n  offset: z.coerce.number().int().min(0).default(0),\n  sortBy: z.enum(['name', 'price', 'basePrice', 'createdAt', 'sortOrder']).default('sortOrder'),  //  Updated to support basePrice\n  sortOrder: z.enum(['asc', 'desc']).default('asc'),\n});\n\nexport type PlanCreateInput = z.infer<typeof planCreateSchema>;\nexport type PlanUpdateInput = z.infer<typeof planUpdateSchema>;\nexport type PlansQuery = z.infer<typeof plansQuerySchema>;\n\n// ============================================================================\n// Plan Variant validation schemas\n// ============================================================================\n\nexport const planVariantCreateSchema = z.object({\n  planId: z.string().min(1, 'Plan ID is required'),\n  name: z.string().min(1, 'Variant name is required'),\n  duration: z.number().int().positive('Duration must be positive'),\n  price: z.number().nonnegative('Price must be non-negative').optional(),\n  basePrice: z.number().nonnegative('Base price must be non-negative').optional(),\n  discount: z.number().min(0).max(100, 'Discount must be between 0 and 100').default(0),\n  isActive: z.boolean().default(true),\n  isPopular: z.boolean().default(false),\n  sortOrder: z.number().int().default(0),\n});\n\nexport const planVariantUpdateSchema = planVariantCreateSchema.partial().extend({\n  planId: z.string().min(1, 'Plan ID is required').optional(), // Optional for updates\n});\n\nexport const planVariantsQuerySchema = z.object({\n  planId: z.string().optional(),\n  search: z.string().optional(),\n  isActive: z.coerce.boolean().optional(),\n  isPopular: z.coerce.boolean().optional(),\n  duration: z.coerce.number().int().positive().optional(),\n  minPrice: z.coerce.number().nonnegative().optional(),\n  maxPrice: z.coerce.number().nonnegative().optional(),\n  limit: z.coerce.number().int().min(1).max(100).default(50),\n  offset: z.coerce.number().int().min(0).default(0),\n  sortBy: z.enum(['name', 'price', 'duration', 'discount', 'createdAt', 'sortOrder']).default('sortOrder'),\n  sortOrder: z.enum(['asc', 'desc']).default('asc'),\n});\n\nexport type PlanVariantCreateInput = z.infer<typeof planVariantCreateSchema>;\nexport type PlanVariantUpdateInput = z.infer<typeof planVariantUpdateSchema>;\nexport type PlanVariantsQuery = z.infer<typeof planVariantsQuerySchema>;\n\n// ============================================================================\n// Subscription validation schemas\n// ============================================================================\n\nexport const subscriptionCreateSchema = z.object({\n  planId: z.string().min(1, 'Plan ID is required'),\n  planVariantId: z.string().min(1, 'Plan variant ID is required'),\n  merchantId: z.coerce.number().int().positive('Merchant ID is required'),\n  status: z.enum(['trial', 'active', 'past_due', 'cancelled', 'paused', 'expired']).default('active'),\n  billingInterval: z.enum(['month', 'quarter', 'semiAnnual', 'year']).default('month'),\n  amount: z.number().nonnegative('Amount must be non-negative'),\n  currency: z.string().default('USD'),\n  trialStartDate: z.coerce.date().optional(),\n  trialEndDate: z.coerce.date().optional(),\n  currentPeriodStart: z.coerce.date().optional(),\n  currentPeriodEnd: z.coerce.date().optional(),\n  cancelAtPeriodEnd: z.boolean().default(false),\n  cancelledAt: z.coerce.date().optional(),\n  notes: z.string().optional(),\n});\n\nexport const subscriptionUpdateSchema = subscriptionCreateSchema.partial().extend({\n  id: z.coerce.number().int().positive().optional(),\n});\n\nexport const subscriptionsQuerySchema = z.object({\n  merchantId: z.coerce.number().int().positive().optional(),\n  status: z.enum(['active', 'inactive', 'cancelled', 'expired', 'suspended', 'past_due', 'paused']).optional(),\n  planId: z.string().optional(),\n  planVariantId: z.string().optional(),\n  search: z.string().optional(),\n  limit: z.coerce.number().int().min(1).max(100).default(50),\n  offset: z.coerce.number().int().min(0).default(0),\n  sortBy: z.enum(['createdAt', 'currentPeriodEnd', 'amount', 'status']).default('createdAt'),\n  sortOrder: z.enum(['asc', 'desc']).default('desc'),\n});\n\nexport type SubscriptionCreateInput = z.infer<typeof subscriptionCreateSchema>;\nexport type SubscriptionUpdateInput = z.infer<typeof subscriptionUpdateSchema>;\nexport type SubscriptionsQuery = z.infer<typeof subscriptionsQuerySchema>;\n\n// ============================================================================\n// PLAN LIMITS VALIDATION (from plan-limits-validation.ts)\n// ============================================================================\n\nexport interface PlanLimitsValidationResult {\n  isValid: boolean;\n  error?: string;\n  currentCount: number;\n  limit: number;\n  entityType: 'outlets' | 'users' | 'products' | 'customers' | 'orders';\n}\n\nexport interface PlanLimitsInfo {\n  planLimits: PlanLimits;\n  platform: 'mobile' | 'mobile+web';\n  currentCounts: {\n    outlets: number;\n    users: number;\n    products: number;\n    customers: number;\n    orders: number;\n  };\n  isUnlimited: {\n    outlets: boolean;\n    users: boolean;\n    products: boolean;\n    customers: boolean;\n    orders: boolean;\n  };\n  platformAccess: {\n    mobile: boolean;\n    web: boolean;\n    productPublicCheck: boolean;\n  };\n}\n\n/**\n * Get current counts for all entities for a merchant\n */\nexport async function getCurrentEntityCounts(merchantId: number): Promise<{\n  outlets: number;\n  users: number;\n  products: number;\n  customers: number;\n  orders: number;\n}> {\n  try {\n    const [outlets, users, products, customers, orders] = await Promise.all([\n      prisma.outlet.count({ where: { merchantId } }),\n      prisma.user.count({ where: { merchantId } }),\n      prisma.product.count({ where: { merchantId } }),\n      prisma.customer.count({ where: { merchantId } }),\n      prisma.order.count({ where: { outlet: { merchantId } } })\n    ]);\n\n    return {\n      outlets,\n      users,\n      products,\n      customers,\n      orders\n    };\n  } catch (error) {\n    console.error('Error getting entity counts:', error);\n    throw new ApiError(ErrorCode.DATABASE_ERROR, 'Failed to get entity counts');\n  }\n}\n\n/**\n * Get comprehensive plan limits information for a merchant\n */\nexport async function getPlanLimitsInfo(merchantId: number): Promise<PlanLimitsInfo> {\n  try {\n    // Get merchant with subscription\n    const merchant = await prisma.merchant.findUnique({\n      where: { id: merchantId },\n      include: {\n        subscription: true\n      }\n    });\n\n    if (!merchant) {\n      throw new ApiError(ErrorCode.MERCHANT_NOT_FOUND, 'Merchant not found');\n    }\n\n    if (!merchant.subscription) {\n      throw new ApiError(ErrorCode.NOT_FOUND, 'No subscription found for merchant');\n    }\n\n    // Get plan information from database\n    const plan = await prisma.plan.findUnique({\n      where: { id: merchant.subscription.planId }\n    });\n    if (!plan) {\n      throw new ApiError(ErrorCode.NOT_FOUND, 'Plan not found');\n    }\n    const planLimits = JSON.parse(plan.limits);\n    const platform = plan.features.includes('Web dashboard access') ? 'mobile+web' : 'mobile';\n\n    // Get current counts\n    const currentCounts = await getCurrentEntityCounts(merchantId);\n\n    // Check unlimited flags\n    const isUnlimited = {\n      outlets: planLimits.outlets === -1,\n      users: planLimits.users === -1,\n      products: planLimits.products === -1,\n      customers: planLimits.customers === -1,\n      orders: planLimits.orders === -1\n    };\n\n    // Check platform access from plan features\n    const features = JSON.parse(plan.features);\n    const platformAccess = {\n      mobile: true, // All plans have mobile access\n      web: features.includes('Web dashboard access'),\n      productPublicCheck: features.includes('Product public check')\n    };\n\n    return {\n      planLimits,\n      platform: platform || 'mobile',\n      currentCounts,\n      isUnlimited,\n      platformAccess\n    };\n  } catch (error) {\n    console.error('Error getting plan limits info:', error);\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    throw new ApiError(ErrorCode.INTERNAL_SERVER_ERROR, 'Failed to get plan limits information');\n  }\n}\n\n/**\n * Validate if merchant can create a new entity\n */\nexport async function validatePlanLimits(\n  merchantId: number,\n  entityType: 'outlets' | 'users' | 'products' | 'customers' | 'orders'\n): Promise<PlanLimitsValidationResult> {\n  try {\n    const planInfo = await getPlanLimitsInfo(merchantId);\n    const currentCount = planInfo.currentCounts[entityType];\n    const limit = planInfo.planLimits[entityType];\n    const isUnlimited = planInfo.isUnlimited[entityType];\n\n    // If unlimited, always allow\n    if (isUnlimited) {\n      return {\n        isValid: true,\n        currentCount,\n        limit: -1,\n        entityType\n      };\n    }\n\n    // Check if limit is exceeded\n    if (currentCount >= limit) {\n      return {\n        isValid: false,\n        error: `${entityType} limit exceeded. Current: ${currentCount}, Limit: ${limit}`,\n        currentCount,\n        limit,\n        entityType\n      };\n    }\n\n    return {\n      isValid: true,\n      currentCount,\n      limit,\n      entityType\n    };\n  } catch (error) {\n    console.error('Error validating plan limits:', error);\n    throw new ApiError(ErrorCode.INTERNAL_SERVER_ERROR, 'Failed to validate plan limits');\n  }\n}\n\n/**\n * Validate platform access for merchant\n */\nexport function validatePlatformAccess(\n  merchantId: number,\n  platform: 'mobile' | 'web',\n  planInfo: PlanLimitsInfo\n): boolean {\n  switch (platform) {\n    case 'mobile':\n      return planInfo.platformAccess.mobile;\n    case 'web':\n      return planInfo.platformAccess.web;\n    default:\n      return false;\n  }\n}\n\n/**\n * Validate product public check access\n */\nexport function validateProductPublicCheckAccess(planInfo: PlanLimitsInfo): boolean {\n  return planInfo.platformAccess.productPublicCheck;\n}\n\n/**\n * Assert plan limits for a specific entity type\n * Throws an error if the plan limit would be exceeded\n */\nexport async function assertPlanLimit(\n  merchantId: number,\n  entityType: 'outlets' | 'users' | 'products' | 'customers' | 'orders'\n): Promise<void> {\n  try {\n    const validation = await validatePlanLimits(merchantId, entityType);\n    \n    if (!validation.isValid) {\n      throw new ApiError(\n        ErrorCode.PLAN_LIMIT_EXCEEDED,\n        validation.error || `Plan limit exceeded for ${entityType}`\n      );\n    }\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    throw new ApiError(\n      ErrorCode.INTERNAL_SERVER_ERROR,\n      `Failed to validate plan limits for ${entityType}`\n    );\n  }\n}","// ============================================================================\n// CURRENCY UTILITIES\n// ============================================================================\n\nimport { \n  CurrencyCode, \n  Currency, \n  CurrencySettings, \n  CurrencyFormatOptions \n} from '@rentalshop/types';\n\n/**\n * Default currency configuration\n * USD is the base currency (exchangeRate: 1)\n * VND exchange rate is approximate (1 USD  24,500 VND)\n */\nexport const DEFAULT_CURRENCIES: Currency[] = [\n  {\n    code: 'USD',\n    symbol: '$',\n    name: 'US Dollar',\n    locale: 'en-US',\n    minFractionDigits: 2,\n    maxFractionDigits: 2,\n    symbolBefore: true,\n    exchangeRate: 1,\n  },\n  {\n    code: 'VND',\n    symbol: '',\n    name: 'Vietnamese Dong',\n    locale: 'vi-VN',\n    minFractionDigits: 0,\n    maxFractionDigits: 0,\n    symbolBefore: false,\n    exchangeRate: 24500, // 1 USD  24,500 VND\n  },\n];\n\n/**\n * Default currency settings\n */\nexport const DEFAULT_CURRENCY_SETTINGS: CurrencySettings = {\n  currentCurrency: 'USD', // Default to USD\n  baseCurrency: 'USD',\n  availableCurrencies: DEFAULT_CURRENCIES,\n  showSymbol: true,\n  showCode: false,\n};\n\n/**\n * Get currency by code\n * @param code - Currency code\n * @returns Currency configuration or undefined if not found\n */\nexport function getCurrency(code: CurrencyCode): Currency | undefined {\n  return DEFAULT_CURRENCIES.find(currency => currency.code === code);\n}\n\n/**\n * Get current currency configuration\n * @param settings - Currency settings (optional, uses default if not provided)\n * @returns Current currency configuration\n */\nexport function getCurrentCurrency(settings?: CurrencySettings): Currency {\n  const currentSettings = settings || DEFAULT_CURRENCY_SETTINGS;\n  const currency = getCurrency(currentSettings.currentCurrency);\n  \n  if (!currency) {\n    // Fallback to USD if current currency not found\n    return DEFAULT_CURRENCIES.find(c => c.code === 'USD')!;\n  }\n  \n  return currency;\n}\n\n/**\n * Convert amount from one currency to another\n * @param amount - Amount to convert\n * @param fromCurrency - Source currency code\n * @param toCurrency - Target currency code\n * @returns Converted amount\n */\nexport function convertCurrency(\n  amount: number, \n  fromCurrency: CurrencyCode, \n  toCurrency: CurrencyCode\n): number {\n  if (fromCurrency === toCurrency) {\n    return amount;\n  }\n\n  const from = getCurrency(fromCurrency);\n  const to = getCurrency(toCurrency);\n\n  if (!from || !to) {\n    throw new Error(`Invalid currency code: ${fromCurrency} or ${toCurrency}`);\n  }\n\n  // Convert to base currency (USD) first, then to target currency\n  const amountInUSD = amount / from.exchangeRate;\n  return amountInUSD * to.exchangeRate;\n}\n\n/**\n * Format amount as currency with advanced options\n * @param amount - Amount to format\n * @param options - Formatting options\n * @param settings - Currency settings (optional)\n * @returns Formatted currency string\n */\nexport function formatCurrencyAdvanced(\n  amount: number | null | undefined,\n  options: CurrencyFormatOptions = {},\n  settings?: CurrencySettings\n): string {\n  if (amount === null || amount === undefined || isNaN(amount)) {\n    return '0';\n  }\n\n  const currentSettings = settings || DEFAULT_CURRENCY_SETTINGS;\n  const currencyCode = options.currency || currentSettings.currentCurrency;\n  const currency = getCurrency(currencyCode);\n  \n  if (!currency) {\n    throw new Error(`Invalid currency code: ${currencyCode}`);\n  }\n\n  const locale = options.locale || currency.locale;\n  const showSymbol = options.showSymbol ?? currentSettings.showSymbol;\n  const showCode = options.showCode ?? currentSettings.showCode;\n  const fractionDigits = options.fractionDigits ?? currency.maxFractionDigits;\n\n  // Format the number - only show decimals when they exist\n  const formattedNumber = new Intl.NumberFormat(locale, {\n    minimumFractionDigits: 0, // Don't force decimal places\n    maximumFractionDigits: fractionDigits, // Allow up to max decimals\n  }).format(amount);\n\n  // Build the result string\n  let result = formattedNumber;\n\n  if (showSymbol) {\n    if (currency.symbolBefore) {\n      result = `${currency.symbol}${result}`;\n    } else {\n      result = `${result}${currency.symbol}`;\n    }\n  }\n\n  if (showCode) {\n    result = `${result} ${currency.code}`;\n  }\n\n  return result;\n}\n\n/**\n * Format amount as currency (simplified version for backward compatibility)\n * @param amount - Amount to format\n * @param currency - Currency code (optional, uses current currency if not provided)\n * @param locale - Locale for formatting (optional)\n * @returns Formatted currency string\n */\nexport function formatCurrency(\n  amount: number | null | undefined, \n  currency: CurrencyCode = 'USD', \n  locale?: string\n): string {\n  return formatCurrencyAdvanced(amount, { currency, locale });\n}\n\n/**\n * Parse currency string to number\n * @param currencyString - Currency string to parse\n * @param currency - Currency code to parse from\n * @returns Parsed number or null if invalid\n */\nexport function parseCurrency(currencyString: string, currency: CurrencyCode = 'USD'): number | null {\n  if (!currencyString || typeof currencyString !== 'string') {\n    return null;\n  }\n\n  const currencyConfig = getCurrency(currency);\n  if (!currencyConfig) {\n    return null;\n  }\n\n  // Remove currency symbol and code\n  let cleanString = currencyString\n    .replace(new RegExp(`[${currencyConfig.symbol}]`, 'g'), '')\n    .replace(new RegExp(currencyConfig.code, 'gi'), '')\n    .trim();\n\n  // Remove thousand separators and convert decimal separator\n  if (currencyConfig.locale === 'vi-VN') {\n    // Vietnamese format: 1.234,56\n    cleanString = cleanString.replace(/\\./g, '').replace(',', '.');\n  } else {\n    // US format: 1,234.56\n    cleanString = cleanString.replace(/,/g, '');\n  }\n\n  const parsed = parseFloat(cleanString);\n  return isNaN(parsed) ? null : parsed;\n}\n\n/**\n * Get currency display string (symbol + code)\n * @param currency - Currency code\n * @returns Display string (e.g., \"$ USD\" or \" VND\")\n */\nexport function getCurrencyDisplay(currency: CurrencyCode): string {\n  const currencyConfig = getCurrency(currency);\n  if (!currencyConfig) {\n    return currency;\n  }\n\n  if (currencyConfig.symbolBefore) {\n    return `${currencyConfig.symbol} ${currencyConfig.code}`;\n  } else {\n    return `${currencyConfig.code} ${currencyConfig.symbol}`;\n  }\n}\n\n/**\n * Validate currency code\n * @param code - Currency code to validate\n * @returns True if valid, false otherwise\n */\nexport function isValidCurrencyCode(code: string): code is CurrencyCode {\n  return ['USD', 'VND'].includes(code as CurrencyCode);\n}\n\n/**\n * Get exchange rate between two currencies\n * @param fromCurrency - Source currency code\n * @param toCurrency - Target currency code\n * @returns Exchange rate\n */\nexport function getExchangeRate(fromCurrency: CurrencyCode, toCurrency: CurrencyCode): number {\n  if (fromCurrency === toCurrency) {\n    return 1;\n  }\n\n  const from = getCurrency(fromCurrency);\n  const to = getCurrency(toCurrency);\n\n  if (!from || !to) {\n    throw new Error(`Invalid currency code: ${fromCurrency} or ${toCurrency}`);\n  }\n\n  // Calculate exchange rate through base currency (USD)\n  return to.exchangeRate / from.exchangeRate;\n}\n","// ============================================================================\n// PAYMENT GATEWAY CONFIGURATION\n// ============================================================================\n\nexport interface PaymentGatewayConfig {\n  provider: 'stripe' | 'paypal' | 'square';\n  apiKey: string;\n  webhookSecret?: string;\n  environment: 'sandbox' | 'production';\n  defaultGateway?: string;\n}\n\nexport interface PaymentGatewayManager {\n  createPayment: (amount: number, currency: string, metadata?: any) => Promise<any>;\n  processPayment: (paymentId: string) => Promise<any>;\n  refundPayment: (paymentId: string, amount?: number) => Promise<any>;\n}\n\n/**\n * Create payment gateway manager\n * This is a placeholder implementation\n */\nexport function createPaymentGatewayManager(config: PaymentGatewayConfig): PaymentGatewayManager {\n  return {\n    createPayment: async (amount: number, currency: string, metadata?: any) => {\n      console.log('Creating payment:', { amount, currency, metadata });\n      return { id: 'mock-payment-id', status: 'pending' };\n    },\n    processPayment: async (paymentId: string) => {\n      console.log('Processing payment:', paymentId);\n      return { id: paymentId, status: 'completed' };\n    },\n    refundPayment: async (paymentId: string, amount?: number) => {\n      console.log('Refunding payment:', paymentId, amount);\n      return { id: paymentId, status: 'refunded' };\n    }\n  };\n}\n\nexport default {\n  createPaymentGatewayManager\n};\n","/**\n * Order Number Manager Utilities\n * \n * Utility functions for managing order number generation across the application.\n * Provides easy-to-use functions for different order number formats.\n */\n\nimport { \n  getOutletOrderStats,\n  createOrderNumberWithFormat,\n  type OrderNumberFormat\n} from '@rentalshop/database';\n\n/**\n * Get outlet order statistics\n */\nexport async function getOutletStats(outletId: number) {\n  return await getOutletOrderStats(outletId);\n}\n\n/**\n * Compare different order number formats\n */\nexport async function compareOrderNumberFormats(outletId: number) {\n  const formats: OrderNumberFormat[] = ['sequential', 'date-based', 'random', 'hybrid'];\n  const results: Record<string, any> = {};\n  \n  for (const format of formats) {\n    try {\n      const result = await createOrderNumberWithFormat(outletId, format);\n      results[format] = {\n        orderNumber: result.orderNumber,\n        sequence: result.sequence,\n        generatedAt: result.generatedAt,\n        length: result.orderNumber.length\n      };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      results[format] = {\n        error: errorMessage\n      };\n    }\n  }\n  \n  return results;\n}\n\n/**\n * Format recommendations based on business needs\n */\nexport function getFormatRecommendations() {\n  return {\n    smallBusiness: {\n      recommended: 'sequential',\n      reason: 'Simple, easy to track, low concurrency needs',\n      example: 'ORD-001-0001'\n    },\n    mediumBusiness: {\n      recommended: 'date-based',\n      reason: 'Better organization, daily reporting, moderate security',\n      example: 'ORD-001-20250115-0001'\n    },\n    largeBusiness: {\n      recommended: 'hybrid',\n      reason: 'Balanced security and organization, high volume',\n      example: 'ORD-001-20250115-A7B9'\n    },\n    highSecurity: {\n      recommended: 'random',\n      reason: 'Maximum security, no business intelligence leakage',\n      example: 'ORD-001-A7B9C2'\n    }\n  };\n}\n\n/**\n * Migration helper: Convert existing orders to new format\n */\nexport async function migrateOrderNumbers(\n  outletId: number, \n  newFormat: OrderNumberFormat\n): Promise<{ success: boolean; message: string; affectedOrders: number }> {\n  try {\n    // This would need to be implemented based on your migration strategy\n    // For now, return a placeholder\n    return {\n      success: false,\n      message: 'Migration not implemented - requires careful planning to avoid data conflicts',\n      affectedOrders: 0\n    };\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n    return {\n      success: false,\n      message: `Migration failed: ${errorMessage}`,\n      affectedOrders: 0\n    };\n  }\n}\n\n/**\n * Order number format validator\n */\nexport function validateOrderNumberFormat(orderNumber: string): {\n  isValid: boolean;\n  errors: string[];\n  suggestions: string[];\n} {\n  const errors: string[] = [];\n  const suggestions: string[] = [];\n  \n  if (!orderNumber) {\n    errors.push('Order number cannot be empty');\n    return { isValid: false, errors, suggestions };\n  }\n  \n  if (!orderNumber.startsWith('ORD-')) {\n    errors.push('Order number must start with \"ORD-\"');\n    suggestions.push('Use format: ORD-{outletId}-{sequence}');\n  }\n  \n  const parts = orderNumber.split('-');\n  if (parts.length < 3) {\n    errors.push('Order number must have at least 3 parts separated by hyphens');\n    suggestions.push('Use format: ORD-{outletId}-{sequence}');\n  }\n  \n  if (parts.length >= 2) {\n    const outletId = parseInt(parts[1]);\n    if (isNaN(outletId) || outletId < 1) {\n      errors.push('Outlet ID must be a positive number');\n      suggestions.push('Use format: ORD-001-0001 (where 001 is outlet ID)');\n    }\n  }\n  \n  const isValid = errors.length === 0;\n  \n  if (isValid) {\n    suggestions.push('Order number format is valid');\n  }\n  \n  return { isValid, errors, suggestions };\n}\n","import { format, addDays, differenceInDays, isAfter, isBefore, isValid, parseISO } from 'date-fns';\n\n/**\n * Safely convert any date input to a valid Date object\n */\nconst toDate = (date: Date | string | null | undefined): Date | null => {\n  if (!date) return null;\n  \n  if (date instanceof Date) {\n    return isValid(date) ? date : null;\n  }\n  \n  try {\n    const parsed = parseISO(date);\n    return isValid(parsed) ? parsed : null;\n  } catch {\n    return null;\n  }\n};\n\nexport const formatDate = (date: Date | string | null | undefined, formatString: string = 'dd/MM/yyyy'): string => {\n  const dateObj = toDate(date);\n  if (!dateObj) return 'Invalid Date';\n  \n  try {\n    return format(dateObj, formatString);\n  } catch {\n    return 'Invalid Date';\n  }\n};\n\nexport const formatDateTime = (date: Date | string | null | undefined): string => {\n  const dateObj = toDate(date);\n  if (!dateObj) return 'Invalid Date';\n  \n  try {\n    return format(dateObj, 'dd/MM/yyyy HH:mm');\n  } catch {\n    return 'Invalid Date';\n  }\n};\n\nexport const addDaysToDate = (date: Date, days: number): Date => {\n  return addDays(date, days);\n};\n\nexport const getDaysDifference = (startDate: Date, endDate: Date): number => {\n  return differenceInDays(endDate, startDate);\n};\n\nexport const isDateAfter = (date1: Date, date2: Date): boolean => {\n  return isAfter(date1, date2);\n};\n\nexport const isDateBefore = (date1: Date, date2: Date): boolean => {\n  return isBefore(date1, date2);\n};\n\nexport const getCurrentDate = (): Date => {\n  return new Date();\n};\n\nexport const getTomorrow = (): Date => {\n  return addDaysToDate(getCurrentDate(), 1);\n};\n\n/**\n * Format date in a user-friendly way (e.g., \"January 15, 2025\")\n */\nexport const formatDateLong = (date: Date | string | null | undefined): string => {\n  const dateObj = toDate(date);\n  if (!dateObj) return 'Invalid Date';\n  \n  try {\n    return new Intl.DateTimeFormat('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    }).format(dateObj);\n  } catch {\n    return 'Invalid Date';\n  }\n};\n\n/**\n * Format date and time in a user-friendly way (e.g., \"January 15, 2025 at 3:45 PM\")\n */\nexport const formatDateTimeLong = (date: Date | string | null | undefined): string => {\n  const dateObj = toDate(date);\n  if (!dateObj) return 'Invalid Date';\n  \n  try {\n    return new Intl.DateTimeFormat('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    }).format(dateObj);\n  } catch {\n    return 'Invalid Date';\n  }\n};\n\n/**\n * Format date in short format (e.g., \"Jan 15, 2025\")\n */\nexport const formatDateShort = (date: Date | string | null | undefined): string => {\n  const dateObj = toDate(date);\n  if (!dateObj) return 'Invalid Date';\n  \n  try {\n    return new Intl.DateTimeFormat('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    }).format(dateObj);\n  } catch {\n    return 'Invalid Date';\n  }\n};\n\n/**\n * Format date and time in short format (e.g., \"Jan 15, 2025 3:45 PM\")\n */\nexport const formatDateTimeShort = (date: Date | string | null | undefined): string => {\n  const dateObj = toDate(date);\n  if (!dateObj) return 'Invalid Date';\n  \n  try {\n    return new Intl.DateTimeFormat('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    }).format(dateObj);\n  } catch {\n    return 'Invalid Date';\n  }\n}; ","/**\n * Audit Logging Configuration\n * \n * This module provides a configurable audit logging system with tiered approach\n * and smart filtering to optimize performance while maintaining comprehensive coverage.\n */\n\nexport interface AuditEntityConfig {\n  enabled: boolean;\n  logLevel: 'ALL' | 'CREATE_UPDATE_DELETE' | 'CREATE_DELETE' | 'CRITICAL_ONLY';\n  fields: {\n    include: string[];\n    exclude: string[];\n    sensitive: string[];\n  };\n  sampling: {\n    enabled: boolean;\n    rate: number; // 0.0 to 1.0\n  };\n  async: boolean;\n  severity: 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL';\n  category: 'GENERAL' | 'SECURITY' | 'BUSINESS' | 'SYSTEM' | 'COMPLIANCE';\n}\n\nexport interface AuditConfig {\n  global: {\n    enabled: boolean;\n    async: boolean;\n    retentionDays: number;\n    maxLogSize: number; // in bytes\n  };\n  entities: Record<string, AuditEntityConfig>;\n  performance: {\n    maxLogTime: number; // max time to spend on audit logging (ms)\n    batchSize: number;\n    queueSize: number;\n  };\n  features: {\n    changeDetection: boolean;\n    fieldLevelTracking: boolean;\n    userContext: boolean;\n    networkContext: boolean;\n  };\n}\n\n// Default configuration\nexport const defaultAuditConfig: AuditConfig = {\n  global: {\n    enabled: process.env.AUDIT_LOGGING_ENABLED === 'true' || \n             process.env.NODE_ENV === 'production' || \n             process.env.NODE_ENV === 'development' || \n             process.env.NODE_ENV === undefined, // Enable by default in development\n    async: true,\n    retentionDays: parseInt(process.env.AUDIT_RETENTION_DAYS || '90'),\n    maxLogSize: parseInt(process.env.AUDIT_MAX_LOG_SIZE || '1048576') // 1MB\n  },\n  entities: {\n    // Tier 1: Critical Business Operations (Always Log)\n    Customer: {\n      enabled: true,\n      logLevel: 'ALL',\n      fields: {\n        include: ['*'], // All fields\n        exclude: ['password', 'token', 'secret'],\n        sensitive: ['email', 'phone', 'idNumber']\n      },\n      sampling: { enabled: false, rate: 1.0 },\n      async: true,\n      severity: 'INFO',\n      category: 'BUSINESS'\n    },\n    Order: {\n      enabled: true,\n      logLevel: 'ALL',\n      fields: {\n        include: ['*'],\n        exclude: ['paymentToken', 'cardNumber'],\n        sensitive: ['customerId', 'totalAmount']\n      },\n      sampling: { enabled: false, rate: 1.0 },\n      async: true,\n      severity: 'INFO',\n      category: 'BUSINESS'\n    },\n    User: {\n      enabled: true,\n      logLevel: 'ALL',\n      fields: {\n        include: ['*'],\n        exclude: ['password', 'passwordHash', 'token'],\n        sensitive: ['email', 'phone']\n      },\n      sampling: { enabled: false, rate: 1.0 },\n      async: true,\n      severity: 'WARNING',\n      category: 'SECURITY'\n    },\n    Payment: {\n      enabled: true,\n      logLevel: 'ALL',\n      fields: {\n        include: ['*'],\n        exclude: ['cardNumber', 'cvv', 'token'],\n        sensitive: ['amount', 'customerId']\n      },\n      sampling: { enabled: false, rate: 1.0 },\n      async: true,\n      severity: 'WARNING',\n      category: 'BUSINESS'\n    },\n\n    // Tier 2: Important Operations (Selective Logging)\n    Product: {\n      enabled: true,\n      logLevel: 'CREATE_UPDATE_DELETE',\n      fields: {\n        include: ['name', 'price', 'stock', 'category', 'isActive'],\n        exclude: ['description', 'images'],\n        sensitive: ['cost', 'margin']\n      },\n      sampling: { enabled: false, rate: 1.0 },\n      async: true,\n      severity: 'INFO',\n      category: 'BUSINESS'\n    },\n    Settings: {\n      enabled: true,\n      logLevel: 'CREATE_UPDATE_DELETE',\n      fields: {\n        include: ['*'],\n        exclude: ['apiKey', 'secret', 'password'],\n        sensitive: ['value']\n      },\n      sampling: { enabled: false, rate: 1.0 },\n      async: true,\n      severity: 'WARNING',\n      category: 'SYSTEM'\n    },\n    Export: {\n      enabled: true,\n      logLevel: 'ALL',\n      fields: {\n        include: ['*'],\n        exclude: ['data', 'content'],\n        sensitive: ['userId', 'filters']\n      },\n      sampling: { enabled: false, rate: 1.0 },\n      async: true,\n      severity: 'INFO',\n      category: 'BUSINESS'\n    },\n    Merchant: {\n      enabled: true,\n      logLevel: 'CREATE_UPDATE_DELETE',\n      fields: {\n        include: ['name', 'status', 'plan', 'settings'],\n        exclude: ['apiKey', 'webhookSecret'],\n        sensitive: ['email', 'phone']\n      },\n      sampling: { enabled: false, rate: 1.0 },\n      async: true,\n      severity: 'WARNING',\n      category: 'BUSINESS'\n    },\n\n    // Tier 3: Low-Value Operations (Skip or Sample)\n    AuditLog: {\n      enabled: false, // Don't log audit logs\n      logLevel: 'CRITICAL_ONLY',\n      fields: { include: [], exclude: ['*'], sensitive: [] },\n      sampling: { enabled: true, rate: 0.01 },\n      async: true,\n      severity: 'INFO',\n      category: 'SYSTEM'\n    },\n    Session: {\n      enabled: false,\n      logLevel: 'CRITICAL_ONLY',\n      fields: { include: [], exclude: ['*'], sensitive: [] },\n      sampling: { enabled: true, rate: 0.05 },\n      async: true,\n      severity: 'INFO',\n      category: 'SECURITY'\n    }\n  },\n  performance: {\n    maxLogTime: 100, // 100ms max\n    batchSize: 50,\n    queueSize: 1000\n  },\n  features: {\n    changeDetection: true,\n    fieldLevelTracking: true,\n    userContext: true,\n    networkContext: true\n  }\n};\n\n// Environment-based configuration override\nexport function getAuditConfig(): AuditConfig {\n  const config = { ...defaultAuditConfig };\n\n  // Override from environment variables\n  if (process.env.AUDIT_ENTITIES) {\n    const enabledEntities = process.env.AUDIT_ENTITIES.split(',');\n    Object.keys(config.entities).forEach(entity => {\n      config.entities[entity].enabled = enabledEntities.includes(entity);\n    });\n  }\n\n  if (process.env.AUDIT_SAMPLING_RATE) {\n    const samplingRate = parseFloat(process.env.AUDIT_SAMPLING_RATE);\n    Object.keys(config.entities).forEach(entity => {\n      config.entities[entity].sampling.rate = samplingRate;\n    });\n  }\n\n  return config;\n}\n\n// Check if entity should be logged\nexport function shouldLogEntity(entityType: string, action: string): boolean {\n  const config = getAuditConfig();\n  \n  console.log(' shouldLogEntity check:', {\n    entityType,\n    action,\n    globalEnabled: config.global.enabled,\n    entityConfig: config.entities[entityType]\n  });\n  \n  if (!config.global.enabled) {\n    console.log(' Global audit logging is disabled');\n    return false;\n  }\n  \n  const entityConfig = config.entities[entityType];\n  if (!entityConfig || !entityConfig.enabled) {\n    console.log(' Entity not configured or disabled:', entityType);\n    return false;\n  }\n\n  // Check log level\n  switch (entityConfig.logLevel) {\n    case 'ALL':\n      return true;\n    case 'CREATE_UPDATE_DELETE':\n      return ['CREATE', 'UPDATE', 'DELETE'].includes(action);\n    case 'CREATE_DELETE':\n      return ['CREATE', 'DELETE'].includes(action);\n    case 'CRITICAL_ONLY':\n      return ['DELETE', 'LOGIN', 'LOGOUT'].includes(action);\n    default:\n      return false;\n  }\n}\n\n// Check if field should be logged\nexport function shouldLogField(entityType: string, fieldName: string): boolean {\n  const config = getAuditConfig();\n  const entityConfig = config.entities[entityType];\n  \n  if (!entityConfig) return false;\n\n  const { include, exclude } = entityConfig.fields;\n  \n  // Check exclude list first\n  if (exclude.includes('*') || exclude.includes(fieldName)) return false;\n  \n  // Check include list\n  if (include.includes('*')) return true;\n  if (include.includes(fieldName)) return true;\n  \n  return false;\n}\n\n// Check if sampling should be applied\nexport function shouldSample(entityType: string): boolean {\n  const config = getAuditConfig();\n  const entityConfig = config.entities[entityType];\n  \n  if (!entityConfig || !entityConfig.sampling.enabled) return false;\n  \n  return Math.random() < entityConfig.sampling.rate;\n}\n\n// Get entity configuration\nexport function getAuditEntityConfig(entityType: string): AuditEntityConfig | null {\n  const config = getAuditConfig();\n  return config.entities[entityType] || null;\n}\n\n// Sanitize sensitive data\nexport function sanitizeFieldValue(entityType: string, fieldName: string, value: any): any {\n  const config = getAuditConfig();\n  const entityConfig = config.entities[entityType];\n  \n  if (!entityConfig) return value;\n  \n  if (entityConfig.fields.sensitive.includes(fieldName)) {\n    if (typeof value === 'string' && value.length > 4) {\n      return value.substring(0, 2) + '*'.repeat(value.length - 4) + value.substring(value.length - 2);\n    }\n    return '[REDACTED]';\n  }\n  \n  return value;\n}\n\n// Performance monitoring\nexport class AuditPerformanceMonitor {\n  private metrics = {\n    totalLogs: 0,\n    failedLogs: 0,\n    totalTime: 0,\n    averageTime: 0,\n    maxTime: 0\n  };\n\n  startTimer(): () => number {\n    const start = Date.now();\n    return () => {\n      const duration = Date.now() - start;\n      this.updateMetrics(duration);\n      return duration;\n    };\n  }\n\n  private updateMetrics(duration: number) {\n    this.metrics.totalLogs++;\n    this.metrics.totalTime += duration;\n    this.metrics.averageTime = this.metrics.totalTime / this.metrics.totalLogs;\n    this.metrics.maxTime = Math.max(this.metrics.maxTime, duration);\n  }\n\n  recordFailure() {\n    this.metrics.failedLogs++;\n  }\n\n  getMetrics() {\n    return {\n      ...this.metrics,\n      failureRate: this.metrics.failedLogs / this.metrics.totalLogs,\n      performance: {\n        averageTime: this.metrics.averageTime,\n        maxTime: this.metrics.maxTime,\n        isHealthy: this.metrics.averageTime < 100 // 100ms threshold\n      }\n    };\n  }\n\n  reset() {\n    this.metrics = {\n      totalLogs: 0,\n      failedLogs: 0,\n      totalTime: 0,\n      averageTime: 0,\n      maxTime: 0\n    };\n  }\n}\n\n// Global performance monitor\nexport const auditPerformanceMonitor = new AuditPerformanceMonitor();\n","/**\n * Audit Helper Utilities\n * \n * This module provides helper functions to make audit logging easier\n * across all API routes and database operations with selective logging.\n */\n\nimport { PrismaClient } from '@prisma/client';\nimport { AuditLogger } from '@rentalshop/database';\nimport type { AuditContext } from '@rentalshop/database';\nimport { \n  shouldLogEntity, \n  shouldLogField, \n  shouldSample, \n  getAuditEntityConfig,\n  sanitizeFieldValue,\n  auditPerformanceMonitor,\n  type AuditConfig\n} from './audit-config';\n\nexport interface AuditHelperContext {\n  userId?: string;\n  userEmail?: string;\n  userRole?: string;\n  merchantId?: string;\n  outletId?: string;\n  ipAddress?: string;\n  userAgent?: string;\n  sessionId?: string;\n  requestId?: string;\n  metadata?: Record<string, any>;\n}\n\nexport class AuditHelper {\n  private auditLogger: AuditLogger;\n  private prisma: PrismaClient;\n\n  constructor(prisma: PrismaClient) {\n    this.prisma = prisma;\n    this.auditLogger = new AuditLogger(prisma);\n  }\n\n  /**\n   * Log a CREATE operation with selective logging\n   */\n  async logCreate(params: {\n    entityType: string;\n    entityId: string;\n    entityName?: string;\n    newValues: Record<string, any>;\n    description?: string;\n    context: AuditHelperContext;\n    severity?: 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL';\n    category?: 'GENERAL' | 'SECURITY' | 'BUSINESS' | 'SYSTEM' | 'COMPLIANCE';\n  }) {\n    // Check if we should log this entity\n    if (!shouldLogEntity(params.entityType, 'CREATE')) {\n      return;\n    }\n\n    // Check sampling\n    if (shouldSample(params.entityType)) {\n      return;\n    }\n\n    const timer = auditPerformanceMonitor.startTimer();\n    \n    try {\n      // Sanitize and filter values\n      const sanitizedValues = this.sanitizeValues(params.entityType, params.newValues);\n      \n      // Get entity config for default values\n      const entityConfig = getAuditEntityConfig(params.entityType);\n      \n      await this.auditLogger.log({\n        action: 'CREATE',\n        entityType: params.entityType,\n        entityId: params.entityId,\n        entityName: params.entityName,\n        newValues: sanitizedValues,\n        severity: params.severity || entityConfig?.severity || 'INFO',\n        category: params.category || entityConfig?.category || 'BUSINESS',\n        description: params.description || `${params.entityType} created`,\n        context: this.transformContext(params.context)\n      });\n    } catch (error) {\n      console.error('Failed to log CREATE audit:', error);\n      auditPerformanceMonitor.recordFailure();\n    } finally {\n      timer();\n    }\n  }\n\n  /**\n   * Log an UPDATE operation with selective logging\n   */\n  async logUpdate(params: {\n    entityType: string;\n    entityId: string;\n    entityName?: string;\n    oldValues: Record<string, any>;\n    newValues: Record<string, any>;\n    changes?: Record<string, { old: any; new: any }>;\n    description?: string;\n    context: AuditHelperContext;\n    severity?: 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL';\n    category?: 'GENERAL' | 'SECURITY' | 'BUSINESS' | 'SYSTEM' | 'COMPLIANCE';\n  }) {\n    console.log(' Audit Helper - logUpdate called:', {\n      entityType: params.entityType,\n      entityId: params.entityId,\n      shouldLog: shouldLogEntity(params.entityType, 'UPDATE'),\n      shouldSample: shouldSample(params.entityType)\n    });\n\n    // Check if we should log this entity\n    if (!shouldLogEntity(params.entityType, 'UPDATE')) {\n      console.log(' Audit logging skipped: Entity not configured for logging');\n      return;\n    }\n\n    // Check sampling\n    if (shouldSample(params.entityType)) {\n      console.log(' Audit logging skipped: Sampling applied');\n      return;\n    }\n\n    const timer = auditPerformanceMonitor.startTimer();\n    \n    try {\n      // Calculate changes if not provided\n      const changes = params.changes || this.calculateChanges(params.oldValues, params.newValues);\n      \n      // Filter changes to only include significant ones\n      const significantChanges = this.filterSignificantChanges(params.entityType, changes);\n      \n      if (Object.keys(significantChanges).length > 0) {\n        // Sanitize values\n        const sanitizedOldValues = this.sanitizeValues(params.entityType, params.oldValues);\n        const sanitizedNewValues = this.sanitizeValues(params.entityType, params.newValues);\n        \n        // Get entity config for default values\n        const entityConfig = getAuditEntityConfig(params.entityType);\n        \n        await this.auditLogger.log({\n          action: 'UPDATE',\n          entityType: params.entityType,\n          entityId: params.entityId,\n          entityName: params.entityName,\n          oldValues: sanitizedOldValues,\n          newValues: sanitizedNewValues,\n          changes: significantChanges,\n          severity: params.severity || entityConfig?.severity || 'INFO',\n          category: params.category || entityConfig?.category || 'BUSINESS',\n          description: params.description || `${params.entityType} updated`,\n          context: this.transformContext(params.context)\n        });\n      }\n    } catch (error) {\n      console.error('Failed to log UPDATE audit:', error);\n      auditPerformanceMonitor.recordFailure();\n    } finally {\n      timer();\n    }\n  }\n\n  /**\n   * Log a DELETE operation\n   */\n  async logDelete(params: {\n    entityType: string;\n    entityId: string;\n    entityName?: string;\n    oldValues: Record<string, any>;\n    description?: string;\n    context: AuditHelperContext;\n    severity?: 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL';\n    category?: 'GENERAL' | 'SECURITY' | 'BUSINESS' | 'SYSTEM' | 'COMPLIANCE';\n  }) {\n    try {\n      await this.auditLogger.log({\n        action: 'DELETE',\n        entityType: params.entityType,\n        entityId: params.entityId,\n        entityName: params.entityName,\n        oldValues: params.oldValues,\n        severity: params.severity || 'WARNING',\n        category: params.category || 'BUSINESS',\n        description: params.description || `${params.entityType} deleted`,\n        context: this.transformContext(params.context)\n      });\n    } catch (error) {\n      console.error('Failed to log DELETE audit:', error);\n    }\n  }\n\n  /**\n   * Log a custom action\n   */\n  async logCustom(params: {\n    action: string;\n    entityType: string;\n    entityId: string;\n    entityName?: string;\n    description: string;\n    context: AuditHelperContext;\n    severity?: 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL';\n    category?: 'GENERAL' | 'SECURITY' | 'BUSINESS' | 'SYSTEM' | 'COMPLIANCE';\n    metadata?: Record<string, any>;\n  }) {\n    try {\n      await this.auditLogger.log({\n        action: params.action as any, // Cast to allowed action type\n        entityType: params.entityType,\n        entityId: params.entityId,\n        entityName: params.entityName,\n        description: params.description,\n        severity: params.severity || 'INFO',\n        category: params.category || 'GENERAL',\n        context: {\n          ...this.transformContext(params.context),\n          metadata: {\n            ...params.context.metadata,\n            ...params.metadata\n          }\n        }\n      });\n    } catch (error) {\n      console.error('Failed to log CUSTOM audit:', error);\n    }\n  }\n\n  /**\n   * Calculate changes between old and new values\n   */\n  private calculateChanges(oldValues: Record<string, any>, newValues: Record<string, any>): Record<string, { old: any; new: any }> {\n    const changes: Record<string, { old: any; new: any }> = {};\n    \n    // Check all fields in newValues\n    for (const key in newValues) {\n      if (key === 'id' || key === 'createdAt' || key === 'updatedAt') continue;\n      \n      if (oldValues[key] !== newValues[key]) {\n        changes[key] = {\n          old: oldValues[key],\n          new: newValues[key]\n        };\n      }\n    }\n\n    // Check for deleted fields\n    for (const key in oldValues) {\n      if (key === 'id' || key === 'createdAt' || key === 'updatedAt') continue;\n      \n      if (!(key in newValues)) {\n        changes[key] = {\n          old: oldValues[key],\n          new: null\n        };\n      }\n    }\n\n    return changes;\n  }\n\n  /**\n   * Sanitize values based on entity configuration\n   */\n  private sanitizeValues(entityType: string, values: Record<string, any>): Record<string, any> {\n    const sanitized: Record<string, any> = {};\n    \n    for (const [key, value] of Object.entries(values)) {\n      if (shouldLogField(entityType, key)) {\n        sanitized[key] = sanitizeFieldValue(entityType, key, value);\n      }\n    }\n    \n    return sanitized;\n  }\n\n  /**\n   * Filter changes to only include significant ones\n   */\n  private filterSignificantChanges(entityType: string, changes: Record<string, { old: any; new: any }>): Record<string, { old: any; new: any }> {\n    const significant: Record<string, { old: any; new: any }> = {};\n    \n    // Fields that are always considered significant\n    const alwaysSignificant = ['name', 'email', 'phone', 'status', 'role', 'amount', 'price'];\n    \n    // Fields that are usually not significant\n    const usuallyInsignificant = ['updatedAt', 'lastLoginAt', 'viewCount', 'accessCount'];\n    \n    for (const [field, change] of Object.entries(changes)) {\n      // Skip if field shouldn't be logged\n      if (!shouldLogField(entityType, field)) continue;\n      \n      // Always include significant fields\n      if (alwaysSignificant.includes(field)) {\n        significant[field] = change;\n        continue;\n      }\n      \n      // Skip insignificant fields\n      if (usuallyInsignificant.includes(field)) continue;\n      \n      // Include other fields\n      significant[field] = change;\n    }\n    \n    return significant;\n  }\n\n  /**\n   * Transform helper context to audit context\n   */\n  private transformContext(context: AuditHelperContext): AuditContext {\n    return {\n      userId: context.userId ? parseInt(context.userId) : undefined,\n      userEmail: context.userEmail,\n      userRole: context.userRole,\n      merchantId: context.merchantId ? parseInt(context.merchantId) : undefined,\n      outletId: context.outletId ? parseInt(context.outletId) : undefined,\n      ipAddress: context.ipAddress,\n      userAgent: context.userAgent,\n      sessionId: context.sessionId,\n      requestId: context.requestId,\n      metadata: context.metadata\n    };\n  }\n}\n\n/**\n * Create an audit helper instance\n */\nexport function createAuditHelper(prisma: PrismaClient): AuditHelper {\n  return new AuditHelper(prisma);\n}\n\n/**\n * Quick audit logging functions for common operations\n */\nexport async function quickAuditLog(\n  prisma: PrismaClient,\n  operation: 'CREATE' | 'UPDATE' | 'DELETE',\n  entityType: string,\n  entityId: string,\n  context: AuditHelperContext,\n  options?: {\n    entityName?: string;\n    oldValues?: Record<string, any>;\n    newValues?: Record<string, any>;\n    description?: string;\n    severity?: 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL';\n    category?: 'GENERAL' | 'SECURITY' | 'BUSINESS' | 'SYSTEM' | 'COMPLIANCE';\n  }\n) {\n  const auditHelper = new AuditHelper(prisma);\n  \n  switch (operation) {\n    case 'CREATE':\n      await auditHelper.logCreate({\n        entityType,\n        entityId,\n        entityName: options?.entityName,\n        newValues: options?.newValues || {},\n        description: options?.description,\n        context,\n        severity: options?.severity,\n        category: options?.category\n      });\n      break;\n      \n    case 'UPDATE':\n      await auditHelper.logUpdate({\n        entityType,\n        entityId,\n        entityName: options?.entityName,\n        oldValues: options?.oldValues || {},\n        newValues: options?.newValues || {},\n        description: options?.description,\n        context,\n        severity: options?.severity,\n        category: options?.category\n      });\n      break;\n      \n    case 'DELETE':\n      await auditHelper.logDelete({\n        entityType,\n        entityId,\n        entityName: options?.entityName,\n        oldValues: options?.oldValues || {},\n        description: options?.description,\n        context,\n        severity: options?.severity,\n        category: options?.category\n      });\n      break;\n  }\n}\n","import { authenticatedFetch, publicFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\nimport type { User, LoginCredentials, RegisterData } from '@rentalshop/types';\n\n// Local type definitions for missing types\nexport interface AuthResponse {\n  token: string;\n  user: User;\n}\n\n/**\n * Authentication API client\n */\nexport const authApi = {\n  /**\n   * Login user\n   */\n  async login(credentials: LoginCredentials): Promise<ApiResponse<AuthResponse>> {\n    try {\n      const response = await publicFetch(apiUrls.auth.login, {\n        method: 'POST',\n        body: JSON.stringify(credentials),\n      });\n      return await parseApiResponse<AuthResponse>(response);\n    } catch (error) {\n      console.error('Login error:', error);\n      throw new Error('Failed to login');\n    }\n  },\n\n  /**\n   * Register new user\n   */\n  async register(userData: RegisterData): Promise<ApiResponse<AuthResponse>> {\n    const response = await publicFetch(apiUrls.auth.register, {\n      method: 'POST',\n      body: JSON.stringify(userData),\n    });\n    return await parseApiResponse<AuthResponse>(response);\n  },\n\n  /**\n   * Verify authentication token\n   */\n  async verifyToken(): Promise<ApiResponse<User>> {\n    const response = await authenticatedFetch(apiUrls.auth.verify);\n    return await parseApiResponse<User>(response);\n  },\n\n  /**\n   * Refresh authentication token\n   */\n  async refreshToken(): Promise<ApiResponse<{ token: string }>> {\n    const response = await authenticatedFetch(apiUrls.auth.refresh);\n    return await parseApiResponse<{ token: string }>(response);\n  },\n\n  /**\n   * Logout user\n   */\n  async logout(): Promise<ApiResponse<void>> {\n    const response = await authenticatedFetch(apiUrls.auth.logout, {\n      method: 'POST',\n    });\n    return await parseApiResponse<void>(response);\n  },\n\n  /**\n   * Request password reset\n   */\n  async requestPasswordReset(email: string): Promise<ApiResponse<void>> {\n    const response = await fetch(apiUrls.auth.forgotPassword, {\n      method: 'POST',\n      body: JSON.stringify({ email }),\n    });\n    return await parseApiResponse<void>(response);\n  },\n\n  /**\n   * Reset password with token\n   */\n  async resetPassword(token: string, newPassword: string): Promise<ApiResponse<void>> {\n    const response = await fetch(apiUrls.auth.resetPassword, {\n      method: 'POST',\n      body: JSON.stringify({ token, newPassword }),\n    });\n    return await parseApiResponse<void>(response);\n  },\n\n  /**\n   * Change password (authenticated)\n   */\n  async changePassword(currentPassword: string, newPassword: string): Promise<ApiResponse<void>> {\n    const response = await authenticatedFetch(apiUrls.auth.changePassword, {\n      method: 'POST',\n      body: JSON.stringify({ currentPassword, newPassword }),\n    });\n    return await parseApiResponse<void>(response);\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\nimport type { Product, ProductWithStock, ProductCreateInput, ProductUpdateInput, ProductFilters } from '@rentalshop/types';\n\nexport interface ProductsResponse {\n  products: Product[];\n  total: number;\n  page: number;\n  limit: number;\n  offset: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\n/**\n * Products API client for product management operations\n */\nexport const productsApi = {\n  /**\n   * Get all products\n   */\n  async getProducts(): Promise<ApiResponse<Product[]>> {\n    const response = await authenticatedFetch(apiUrls.products.list);\n    const result = await parseApiResponse<Product[]>(response);\n    return result;\n  },\n\n  /**\n   * Get products with pagination\n   */\n  async getProductsPaginated(page: number = 1, limit: number = 50): Promise<ApiResponse<ProductsResponse>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.products.list}?${params.toString()}`);\n    return await parseApiResponse<ProductsResponse>(response);\n  },\n\n  /**\n   * Search products with filters\n   */\n  async searchProducts(filters: ProductFilters): Promise<ApiResponse<Product[]>> {\n    const params = new URLSearchParams();\n    \n    if (filters.search) params.append('q', filters.search); // Use 'q' parameter like orders\n    if (filters.categoryId) params.append('categoryId', filters.categoryId.toString());\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.available !== undefined) params.append('available', filters.available.toString());\n    if (filters.status) params.append('status', filters.status);\n    if (filters.minPrice) params.append('minPrice', filters.minPrice.toString());\n    if (filters.maxPrice) params.append('maxPrice', filters.maxPrice.toString());\n    \n    // Add pagination parameters\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n    // Add page parameter for consistency with user/customer search\n    if (filters.page) params.append('page', filters.page.toString());\n    \n    // Add sorting parameters\n    if (filters.sortBy) params.append('sortBy', filters.sortBy);\n    if (filters.sortOrder) params.append('sortOrder', filters.sortOrder);\n    \n    const response = await authenticatedFetch(`${apiUrls.products.list}?${params.toString()}`);\n    return await parseApiResponse<Product[]>(response);\n  },\n\n  /**\n   * Search products for a specific merchant (admin context)\n   */\n  async searchMerchantProducts(merchantId: number, filters: ProductFilters): Promise<ApiResponse<Product[]>> {\n    const params = new URLSearchParams();\n    \n    if (filters.search) params.append('search', filters.search);\n    if (filters.categoryId) params.append('categoryId', filters.categoryId.toString());\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.available !== undefined) params.append('available', filters.available.toString());\n    if (filters.status) params.append('status', filters.status);\n    if (filters.minPrice) params.append('minPrice', filters.minPrice.toString());\n    if (filters.maxPrice) params.append('maxPrice', filters.maxPrice.toString());\n    \n    // Add pagination parameters\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n    // Add page parameter for consistency with user/customer search\n    if (filters.page) params.append('page', filters.page.toString());\n    \n    const response = await authenticatedFetch(`${apiUrls.merchants.products.list(merchantId)}?${params.toString()}`);\n    return await parseApiResponse<Product[]>(response);\n  },\n\n  /**\n   * Get product by ID\n   */\n  async getProduct(productId: number): Promise<ApiResponse<ProductWithStock>> {\n    const response = await authenticatedFetch(apiUrls.products.update(productId));\n    return await parseApiResponse<ProductWithStock>(response);\n  },\n\n  /**\n   * Get product by ID (alias for getProduct for backward compatibility)\n   */\n  async getProductById(productId: number): Promise<ApiResponse<ProductWithStock>> {\n    return this.getProduct(productId);\n  },\n\n  /**\n   * Create a new product\n   */\n  async createProduct(productData: ProductCreateInput): Promise<ApiResponse<Product>> {\n    const response = await authenticatedFetch(apiUrls.products.create, {\n      method: 'POST',\n      body: JSON.stringify(productData),\n    });\n    return await parseApiResponse<Product>(response);\n  },\n\n  /**\n   * Update an existing product\n   */\n  async updateProduct(productId: number, productData: ProductUpdateInput): Promise<ApiResponse<Product>> {\n    const response = await authenticatedFetch(apiUrls.products.update(productId), {\n      method: 'PUT',\n      body: JSON.stringify(productData),\n    });\n    return await parseApiResponse<Product>(response);\n  },\n\n  /**\n   * Delete a product\n   */\n  async deleteProduct(productId: number): Promise<ApiResponse<void>> {\n    const response = await authenticatedFetch(apiUrls.products.delete(productId), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<void>(response);\n  },\n\n  /**\n   * Get products by category\n   */\n  async getProductsByCategory(categoryId: number): Promise<ApiResponse<Product[]>> {\n    const response = await authenticatedFetch(`${apiUrls.products.list}?categoryId=${categoryId}`);\n    return await parseApiResponse<Product[]>(response);\n  },\n\n  /**\n   * Get products by outlet\n   */\n  async getProductsByOutlet(outletId: number): Promise<ApiResponse<Product[]>> {\n    const response = await authenticatedFetch(`${apiUrls.products.list}?outletId=${outletId}`);\n    return await parseApiResponse<Product[]>(response);\n  },\n\n  /**\n   * Update product stock\n   */\n  async updateProductStock(productId: number, stock: number): Promise<ApiResponse<Product>> {\n    const response = await authenticatedFetch(apiUrls.products.updateStock(productId), {\n      method: 'PATCH',\n      body: JSON.stringify({ stock }),\n    });\n    return await parseApiResponse<Product>(response);\n  },\n\n  /**\n   * Bulk update products\n   */\n  async bulkUpdateProducts(updates: Array<{ id: number; data: Partial<ProductUpdateInput> }>): Promise<ApiResponse<Product[]>> {\n    const response = await authenticatedFetch(apiUrls.products.bulkUpdate, {\n      method: 'PATCH',\n      body: JSON.stringify({ updates }),\n    });\n    return await parseApiResponse<Product[]>(response);\n  }\n};\n\n\n\n\n","import type { \n  CustomerInput, \n  CustomerUpdateInput, \n  CustomerFilters, \n  CustomerSearchFilter \n} from '@rentalshop/types';\nimport { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\n\n// ============================================================================\n// CUSTOMER API TYPES\n// ============================================================================\n\nexport interface CustomerApiResponse<T = any> {\n  success: boolean;\n  data?: T;\n  message?: string;\n  error?: any;\n}\n\nexport interface CustomerSearchResponse {\n  customers: any[];\n  total: number;\n  limit: number;\n  offset: number;\n  hasMore: boolean;\n}\n\nexport interface CustomerListResponse {\n  customers: any[];\n  total: number;\n  page: number;\n  totalPages: number;\n  hasMore: boolean;\n}\n\n// ============================================================================\n// CUSTOMER API (MERGED FUNCTIONALITY)\n// ============================================================================\n\nexport const customersApi = {\n  // ============================================================================\n  // CUSTOMER CRUD OPERATIONS\n  // ============================================================================\n\n  /**\n   * Get all customers\n   */\n  async getCustomers(): Promise<CustomerApiResponse> {\n    const response = await authenticatedFetch(apiUrls.customers.list);\n    return await parseApiResponse<CustomerApiResponse>(response);\n  },\n\n  /**\n   * Get customers with pagination\n   */\n  async getCustomersPaginated(page: number = 1, limit: number = 50): Promise<CustomerApiResponse<CustomerListResponse>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString(),\n      _t: Date.now().toString() // Cache-busting parameter\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.customers.list}?${params.toString()}`);\n    const result = await parseApiResponse<CustomerListResponse>(response);\n    return result; // Return the ApiResponse directly - let consumers use type guards\n  },\n\n  /**\n   * Get customers with filtering and pagination\n   */\n  async getCustomersWithFilters(\n    filters: CustomerFilters = {}, \n    page = 1, \n    limit = 20\n  ): Promise<CustomerApiResponse<CustomerListResponse>> {\n    const params = new URLSearchParams();\n    \n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.isActive !== undefined) params.append('isActive', filters.isActive.toString());\n    if (filters.search) params.append('search', filters.search);\n    if (filters.city) params.append('city', filters.city);\n    if (filters.state) params.append('state', filters.state);\n    if (filters.country) params.append('country', filters.country);\n    if (filters.idType) params.append('idType', filters.idType);\n    \n    params.append('page', page.toString());\n    params.append('limit', limit.toString());\n\n    const response = await authenticatedFetch(`${apiUrls.customers.list}?${params.toString()}`);\n    const result = await parseApiResponse<CustomerListResponse>(response);\n    return result; // Return the ApiResponse directly - let consumers use type guards\n  },\n\n  /**\n   * Search customers with advanced filters\n   */\n  async searchCustomers(filters: CustomerSearchFilter = {}): Promise<CustomerApiResponse<CustomerSearchResponse>> {\n    const params = new URLSearchParams();\n    \n    if (filters.q) params.append('q', filters.q);\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.isActive !== undefined) params.append('isActive', filters.isActive.toString());\n    if (filters.city) params.append('city', filters.city);\n    if (filters.state) params.append('state', filters.state);\n    if (filters.country) params.append('country', filters.country);\n    if (filters.idType) params.append('idType', filters.idType);\n    \n    params.append('limit', (filters.limit || 20).toString());\n    params.append('offset', (filters.offset || 0).toString());\n    params.append('_t', Date.now().toString()); // Cache-busting parameter\n\n    const response = await authenticatedFetch(`${apiUrls.customers.list}?${params.toString()}`);\n    const result = await parseApiResponse<CustomerSearchResponse>(response);\n    return result; // Return the ApiResponse directly - let consumers use type guards\n  },\n\n  /**\n   * Get customer by ID\n   */\n  async getCustomerById(customerId: number): Promise<CustomerApiResponse> {\n    const response = await authenticatedFetch(apiUrls.customers.update(customerId));\n    return await parseApiResponse<CustomerApiResponse>(response);\n  },\n\n  /**\n   * Create new customer\n   */\n  async createCustomer(customerData: CustomerInput): Promise<CustomerApiResponse> {\n    const response = await authenticatedFetch(apiUrls.customers.create, {\n      method: 'POST',\n      body: JSON.stringify(customerData),\n    });\n    return await parseApiResponse<CustomerApiResponse>(response);\n  },\n\n  /**\n   * Update customer\n   */\n  async updateCustomer(customerId: number, customerData: CustomerUpdateInput): Promise<CustomerApiResponse> {\n    const response = await authenticatedFetch(`${apiUrls.customers.list}?id=${customerId}`, {\n      method: 'PUT',\n      body: JSON.stringify(customerData),\n    });\n    return await parseApiResponse<CustomerApiResponse>(response);\n  },\n\n  /**\n   * Delete customer\n   */\n  async deleteCustomer(customerId: number): Promise<CustomerApiResponse> {\n    const response = await authenticatedFetch(apiUrls.customers.delete(customerId), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<CustomerApiResponse>(response);\n  },\n\n  // ============================================================================\n  // TESTING AND DEBUG ENDPOINTS\n  // ============================================================================\n\n  /**\n   * Test customer creation payload validation\n   */\n  async testCustomerPayload(customerData: CustomerInput): Promise<CustomerApiResponse> {\n    const response = await authenticatedFetch('/api/customers/test', {\n      method: 'POST',\n      body: JSON.stringify(customerData)\n    });\n    return await parseApiResponse<CustomerApiResponse>(response);\n  },\n\n  /**\n   * Debug customer creation payload\n   */\n  async debugCustomerPayload(customerData: CustomerInput): Promise<CustomerApiResponse> {\n    const response = await authenticatedFetch('/api/customers/debug', {\n      method: 'POST',\n      body: JSON.stringify(customerData)\n    });\n    return await parseApiResponse<CustomerApiResponse>(response);\n  },\n\n  // ============================================================================\n  // UTILITY METHODS\n  // ============================================================================\n\n  /**\n   * Validate customer data before sending to API\n   */\n  validateCustomerData(data: CustomerInput): { isValid: boolean; errors: string[] } {\n    const errors: string[] = [];\n\n    if (!data.firstName?.trim()) errors.push('First name is required');\n    if (!data.lastName?.trim()) errors.push('Last name is required');\n    if (!data.email?.trim()) errors.push('Email is required');\n    if (!data.phone?.trim()) errors.push('Phone is required');\n    if (!data.merchantId) errors.push('Merchant ID is required');\n\n    // Email validation\n    if (data.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(data.email)) {\n      errors.push('Invalid email format');\n    }\n\n    // Phone validation\n    if (data.phone && !/^[0-9+\\-\\s()]+$/.test(data.phone)) {\n      errors.push('Phone number contains invalid characters');\n    }\n\n    if (data.phone && data.phone.length < 8) {\n      errors.push('Phone number must be at least 8 characters');\n    }\n\n    // ID Type validation\n    if (data.idType && !['passport', 'drivers_license', 'national_id', 'other'].includes(data.idType)) {\n      errors.push('Invalid ID type');\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  },\n\n  /**\n   * Format customer data for API submission\n   */\n  formatCustomerData(data: CustomerInput): CustomerInput {\n    return {\n      ...data,\n      firstName: data.firstName?.trim(),\n      lastName: data.lastName?.trim(),\n      email: data.email?.toLowerCase().trim(),\n      phone: data.phone?.trim(),\n      address: data.address?.trim(),\n      city: data.city?.trim(),\n      state: data.state?.trim(),\n      zipCode: data.zipCode?.trim(),\n      country: data.country?.trim(),\n      idNumber: data.idNumber?.trim(),\n      notes: data.notes?.trim()\n    };\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\nimport type { Order, OrderCreateInput, OrderUpdateInput, OrderFilters } from '@rentalshop/types';\n\nexport interface OrdersResponse {\n  orders: Order[];\n  total: number;\n  page: number;\n  limit: number;\n  offset: number;\n  hasMore: boolean;\n  totalPages: number;\n}\n\n/**\n * Orders API client for order management operations\n */\nexport const ordersApi = {\n  /**\n   * Get all orders\n   */\n  async getOrders(): Promise<ApiResponse<Order[]>> {\n    const response = await authenticatedFetch(apiUrls.orders.list);\n    const result = await parseApiResponse<Order[]>(response);\n    return result;\n  },\n\n  /**\n   * Get orders with pagination\n   */\n  async getOrdersPaginated(page: number = 1, limit: number = 50): Promise<ApiResponse<OrdersResponse>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.orders.list}?${params.toString()}`);\n    return await parseApiResponse<OrdersResponse>(response);\n  },\n\n  /**\n   * Search orders with filters\n   */\n  async searchOrders(filters: OrderFilters): Promise<ApiResponse<OrdersResponse>> {\n    const params = new URLSearchParams();\n    \n    if (filters.search) params.append('q', filters.search);\n    if (filters.status) {\n      // Handle both single status and array of statuses\n      if (Array.isArray(filters.status)) {\n        filters.status.forEach(status => params.append('status', status));\n      } else {\n        params.append('status', filters.status);\n      }\n    }\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.customerId) params.append('customerId', filters.customerId.toString());\n    if (filters.productId) params.append('productId', filters.productId.toString());\n    \n    // Handle date fields - convert to ISO string if it's a Date object\n    if (filters.startDate) {\n      const startDate = filters.startDate instanceof Date ? filters.startDate.toISOString() : filters.startDate;\n      params.append('startDate', startDate);\n    }\n    if (filters.endDate) {\n      const endDate = filters.endDate instanceof Date ? filters.endDate.toISOString() : filters.endDate;\n      params.append('endDate', endDate);\n    }\n    \n    if (filters.orderType) params.append('orderType', filters.orderType);\n    \n    // Add pagination parameters\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n    if (filters.page) params.append('page', filters.page.toString());\n    \n    // Add sorting parameters\n    if (filters.sortBy) params.append('sortBy', filters.sortBy);\n    if (filters.sortOrder) params.append('sortOrder', filters.sortOrder);\n    \n    const response = await authenticatedFetch(`${apiUrls.orders.list}?${params.toString()}`);\n    return await parseApiResponse<OrdersResponse>(response);\n  },\n\n  /**\n   * Get order by ID\n   */\n  async getOrder(orderId: number): Promise<ApiResponse<Order>> {\n    const response = await authenticatedFetch(apiUrls.orders.update(orderId));\n    return await parseApiResponse<Order>(response);\n  },\n\n  /**\n   * Get order by order number (e.g., \"ORD-2110\")\n   */\n  async getOrderByNumber(orderNumber: string): Promise<ApiResponse<Order>> {\n    const response = await authenticatedFetch(apiUrls.orders.getByNumber(orderNumber));\n    return await parseApiResponse<Order>(response);\n  },\n\n  /**\n   * Create a new order\n   */\n  async createOrder(orderData: OrderCreateInput): Promise<ApiResponse<Order>> {\n    const response = await authenticatedFetch(apiUrls.orders.create, {\n      method: 'POST',\n      body: JSON.stringify(orderData),\n    });\n    return await parseApiResponse<Order>(response);\n  },\n\n  /**\n   * Update an existing order\n   */\n  async updateOrder(orderId: number, orderData: OrderUpdateInput): Promise<ApiResponse<Order>> {\n    const response = await authenticatedFetch(apiUrls.orders.update(orderId), {\n      method: 'PUT',\n      body: JSON.stringify(orderData),\n    });\n    return await parseApiResponse<Order>(response);\n  },\n\n  /**\n   * Delete an order\n   */\n  async deleteOrder(orderId: number): Promise<ApiResponse<void>> {\n    const response = await authenticatedFetch(apiUrls.orders.delete(orderId), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<void>(response);\n  },\n\n  /**\n   * Get orders by customer\n   */\n  async getOrdersByCustomer(customerId: number): Promise<ApiResponse<Order[]>> {\n    const response = await authenticatedFetch(`${apiUrls.orders.list}?customerId=${customerId}`);\n    return await parseApiResponse<Order[]>(response);\n  },\n\n  /**\n   * Get orders by outlet\n   */\n  async getOrdersByOutlet(outletId: number): Promise<ApiResponse<Order[]>> {\n    const response = await authenticatedFetch(`${apiUrls.orders.list}?outletId=${outletId}`);\n    return await parseApiResponse<Order[]>(response);\n  },\n\n  /**\n   * Get orders by product ID\n   */\n  async getOrdersByProduct(productId: number): Promise<ApiResponse<Order[]>> {\n    const response = await authenticatedFetch(`${apiUrls.orders.list}?productId=${productId}`);\n    return await parseApiResponse<Order[]>(response);\n  },\n\n  /**\n   * Update order status\n   */\n  async updateOrderStatus(orderId: number, status: string): Promise<ApiResponse<Order>> {\n    const response = await authenticatedFetch(apiUrls.orders.updateStatus(orderId), {\n      method: 'PATCH',\n      body: JSON.stringify({ status }),\n    });\n    return await parseApiResponse<Order>(response);\n  },\n\n  /**\n   * Pickup order (change status to PICKUPED)\n   */\n  async pickupOrder(orderId: number): Promise<ApiResponse<Order>> {\n    return this.updateOrderStatus(orderId, 'PICKUPED');\n  },\n\n  /**\n   * Return order (change status to RETURNED)\n   */\n  async returnOrder(orderId: number): Promise<ApiResponse<Order>> {\n    return this.updateOrderStatus(orderId, 'RETURNED');\n  },\n\n  /**\n   * Cancel order (change status to CANCELLED)\n   */\n  async cancelOrder(orderId: number): Promise<ApiResponse<Order>> {\n    return this.updateOrderStatus(orderId, 'CANCELLED');\n  },\n\n  /**\n   * Update order settings (damage fee, security deposit, collateral, notes)\n   */\n  async updateOrderSettings(orderId: number, settings: {\n    damageFee?: number;\n    securityDeposit?: number;\n    collateralType?: string;\n    collateralDetails?: string;\n    notes?: string;\n  }): Promise<ApiResponse<Order>> {\n    const response = await authenticatedFetch(apiUrls.orders.update(orderId), {\n      method: 'PUT',\n      body: JSON.stringify(settings),\n    });\n    return await parseApiResponse<Order>(response);\n  },\n\n  /**\n   * Get order statistics\n   */\n  async getOrderStats(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.orders.stats);\n    return await parseApiResponse<any>(response);\n  },\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\nimport type { Outlet, OutletCreateInput, OutletUpdateInput } from '@rentalshop/types';\n\nexport interface OutletsResponse {\n  outlets: Outlet[];\n  total: number;\n  page: number;\n  limit: number;\n  hasMore: boolean;\n}\n\n/**\n * Outlets API client for outlet management operations\n */\nexport const outletsApi = {\n  /**\n   * Get all outlets\n   */\n  async getOutlets(): Promise<ApiResponse<OutletsResponse>> {\n    const response = await authenticatedFetch(apiUrls.outlets.list);\n    const result = await parseApiResponse<OutletsResponse>(response);\n    return result;\n  },\n\n  /**\n   * Get outlets with pagination\n   */\n  async getOutletsPaginated(page: number = 1, limit: number = 50): Promise<ApiResponse<OutletsResponse>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.outlets.list}?${params.toString()}`);\n    return await parseApiResponse<OutletsResponse>(response);\n  },\n\n  /**\n   * Get outlet by ID\n   */\n  async getOutlet(outletId: number): Promise<ApiResponse<Outlet>> {\n    const response = await authenticatedFetch(apiUrls.outlets.get(outletId));\n    return await parseApiResponse<Outlet>(response);\n  },\n\n  /**\n   * Create a new outlet\n   */\n  async createOutlet(outletData: OutletCreateInput): Promise<ApiResponse<Outlet>> {\n    const response = await authenticatedFetch(apiUrls.outlets.create, {\n      method: 'POST',\n      body: JSON.stringify(outletData),\n    });\n    return await parseApiResponse<Outlet>(response);\n  },\n\n  /**\n   * Update an existing outlet\n   */\n  async updateOutlet(outletId: number, outletData: OutletUpdateInput): Promise<ApiResponse<Outlet>> {\n    const response = await authenticatedFetch(apiUrls.outlets.update(outletId), {\n      method: 'PUT',\n      body: JSON.stringify(outletData),\n    });\n    return await parseApiResponse<Outlet>(response);\n  },\n\n  /**\n   * Delete an outlet\n   */\n  async deleteOutlet(outletId: number): Promise<ApiResponse<void>> {\n    const response = await authenticatedFetch(apiUrls.outlets.delete(outletId), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<void>(response);\n  },\n\n  /**\n   * Get outlets by shop\n   */\n  async getOutletsByShop(shopId: number): Promise<ApiResponse<OutletsResponse>> {\n    const response = await authenticatedFetch(`${apiUrls.outlets.list}?shopId=${shopId}`);\n    return await parseApiResponse<OutletsResponse>(response);\n  },\n\n  /**\n   * Get outlets by merchant\n   */\n  async getOutletsByMerchant(merchantId: number): Promise<ApiResponse<OutletsResponse>> {\n    console.log(' Outlets API Client: Calling getOutletsByMerchant with merchantId:', merchantId);\n    console.log(' Outlets API Client: API URL:', apiUrls.merchants.outlets.list(merchantId));\n    \n    const response = await authenticatedFetch(apiUrls.merchants.outlets.list(merchantId));\n    console.log(' Outlets API Client: Raw response:', response);\n    \n    const result = await parseApiResponse<OutletsResponse>(response);\n    console.log(' Outlets API Client: Parsed result:', result);\n    console.log(' Outlets API Client: Result success:', result.success);\n    if (result.success) {\n      console.log(' Outlets API Client: Result data:', result.data);\n      console.log(' Outlets API Client: Result outlets count:', result.data?.outlets?.length || 0);\n    } else {\n      console.log(' Outlets API Client: Error:', result.message);\n    }\n    \n    return result;\n  },\n\n  /**\n   * Get outlet statistics\n   */\n  async getOutletStats(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.outlets.stats);\n    return await parseApiResponse<any>(response);\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface Merchant {\n  id: number;\n  name: string;\n  email?: string;\n  phone?: string;\n  address?: string;\n  isActive: boolean;\n  planId?: string;\n  subscriptionStatus?: string;\n  trialEndsAt?: Date | string;\n  totalRevenue?: number;\n  lastActiveAt?: Date | string;\n  createdAt: Date | string;\n  updatedAt: Date | string;\n}\n\nexport interface MerchantsResponse {\n  merchants: Merchant[];\n  total: number;\n  page: number;\n  limit: number;\n  totalPages: number;\n}\n\nexport interface MerchantSearchFilters {\n  q?: string;\n  status?: string;\n  plan?: string;\n  isActive?: boolean;\n  subscriptionStatus?: string;\n  minRevenue?: number;\n  maxRevenue?: number;\n  startDate?: string;\n  endDate?: string;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n  limit?: number;\n  offset?: number;\n}\n\n// ============================================================================\n// MERCHANTS API CLIENT\n// ============================================================================\n\n/**\n * Merchants API client for merchant management operations\n */\nexport const merchantsApi = {\n  /**\n   * Get all merchants\n   */\n  async getMerchants(): Promise<ApiResponse<MerchantsResponse>> {\n    const response = await authenticatedFetch(apiUrls.merchants.list);\n    const result = await parseApiResponse<MerchantsResponse>(response);\n    return result;\n  },\n\n  /**\n   * Get merchants with pagination\n   */\n  async getMerchantsPaginated(page: number = 1, limit: number = 50): Promise<ApiResponse<MerchantsResponse>> {\n    const response = await authenticatedFetch(`${apiUrls.merchants.list}?page=${page}&limit=${limit}`);\n    const result = await parseApiResponse<MerchantsResponse>(response);\n    return result;\n  },\n\n  /**\n   * Search merchants with filters\n   */\n  async searchMerchants(filters: MerchantSearchFilters): Promise<ApiResponse<MerchantsResponse>> {\n    const params = new URLSearchParams();\n    \n    if (filters.q) params.append('q', filters.q);\n    if (filters.status) params.append('status', filters.status);\n    if (filters.plan) params.append('plan', filters.plan);\n    if (filters.isActive !== undefined) params.append('isActive', filters.isActive.toString());\n    if (filters.subscriptionStatus) params.append('subscriptionStatus', filters.subscriptionStatus);\n    if (filters.minRevenue !== undefined) params.append('minRevenue', filters.minRevenue.toString());\n    if (filters.maxRevenue !== undefined) params.append('maxRevenue', filters.maxRevenue.toString());\n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.sortBy) params.append('sortBy', filters.sortBy);\n    if (filters.sortOrder) params.append('sortOrder', filters.sortOrder);\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n    \n    const response = await authenticatedFetch(`${apiUrls.merchants.list}?${params.toString()}`);\n    return await parseApiResponse<MerchantsResponse>(response);\n  },\n\n  /**\n   * Get merchant by ID\n   */\n  async getMerchantById(id: number): Promise<ApiResponse<Merchant>> {\n    const response = await authenticatedFetch(apiUrls.merchants.get(id));\n    const result = await parseApiResponse<Merchant>(response);\n    return result;\n  },\n\n\n  /**\n   * Get merchant detail with full data (subscriptions, outlets, users, etc.)\n   */\n  async getMerchantDetail(id: number): Promise<ApiResponse<Merchant>> {\n    const response = await authenticatedFetch(apiUrls.merchants.get(id));\n    const result = await parseApiResponse<Merchant>(response);\n    return result;\n  },\n\n  /**\n   * Create new merchant\n   */\n  async createMerchant(merchantData: Partial<Merchant>): Promise<ApiResponse<Merchant>> {\n    const response = await authenticatedFetch(apiUrls.merchants.create, {\n      method: 'POST',\n      body: JSON.stringify(merchantData),\n    });\n    const result = await parseApiResponse<Merchant>(response);\n    return result;\n  },\n\n  /**\n   * Register new merchant (public endpoint)\n   */\n  async register(data: {\n    merchantName: string;\n    merchantEmail: string;\n    merchantPhone: string;\n    merchantDescription: string;\n    userEmail: string;\n    userPassword: string;\n    userFirstName: string;\n    userLastName: string;\n    userPhone: string;\n    outletName: string;\n    outletAddress: string;\n    outletDescription: string;\n  }): Promise<ApiResponse<{ merchant: Merchant; user: any }>> {\n    const response = await fetch(apiUrls.merchants.register, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n    return await parseApiResponse<{ merchant: Merchant; user: any }>(response);\n  },\n\n  /**\n   * Update merchant\n   */\n  async updateMerchant(id: number, merchantData: Partial<Merchant>): Promise<ApiResponse<Merchant>> {\n    const response = await authenticatedFetch(apiUrls.merchants.update(id), {\n      method: 'PUT',\n      body: JSON.stringify(merchantData),\n    });\n    const result = await parseApiResponse<Merchant>(response);\n    return result;\n  },\n\n  /**\n   * Delete merchant\n   */\n  async deleteMerchant(id: number): Promise<ApiResponse<void>> {\n    const response = await authenticatedFetch(apiUrls.merchants.delete(id), {\n      method: 'DELETE',\n    });\n    const result = await parseApiResponse<void>(response);\n    return result;\n  },\n\n  /**\n   * Get merchant statistics\n   */\n  async getMerchantStats(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(`${apiUrls.merchants.list}/stats`);\n    const result = await parseApiResponse<any>(response);\n    return result;\n  },\n\n  /**\n   * Update merchant plan\n   */\n  async updateMerchantPlan(merchantId: number, planData: {\n    planId: number;\n    reason?: string;\n    effectiveDate?: string;\n    notifyMerchant?: boolean;\n    billingInterval?: string;\n    duration?: number;\n    discount?: number;\n    totalPrice?: number;\n  }): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.merchants.updatePlan(merchantId), {\n      method: 'PUT',\n      body: JSON.stringify(planData),\n    });\n    const result = await parseApiResponse<any>(response);\n    return result;\n  },\n\n  /**\n   * Get merchant plan history\n   */\n  async getMerchantPlanHistory(merchantId: number): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.merchants.getPlan(merchantId));\n    const result = await parseApiResponse<any>(response);\n    return result;\n  },\n\n  /**\n   * Disable merchant plan\n   */\n  async disableMerchantPlan(merchantId: number, subscriptionId: number, reason: string): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.merchants.extendPlan(merchantId), {\n      method: 'PATCH',\n      body: JSON.stringify({\n        action: 'disable',\n        subscriptionId,\n        reason\n      }),\n    });\n    const result = await parseApiResponse<any>(response);\n    return result;\n  },\n\n  /**\n   * Delete merchant plan\n   */\n  async deleteMerchantPlan(merchantId: number, subscriptionId: number, reason: string): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.merchants.cancelPlan(merchantId), {\n      method: 'PATCH',\n      body: JSON.stringify({\n        action: 'delete',\n        subscriptionId,\n        reason\n      }),\n    });\n    const result = await parseApiResponse<any>(response);\n    return result;\n  },\n\n  // ============================================================================\n  // MERCHANT-SPECIFIC ENDPOINTS\n  // ============================================================================\n\n  /**\n   * Merchant Products\n   */\n  products: {\n    list: async (merchantId: number) => {\n      return authenticatedFetch(apiUrls.merchants.products.list(merchantId));\n    },\n\n    get: async (merchantId: number, productId: number) => {\n      return authenticatedFetch(apiUrls.merchants.products.get(merchantId, productId));\n    },\n\n    create: async (merchantId: number, data: any) => {\n      return authenticatedFetch(apiUrls.merchants.products.create(merchantId), {\n        method: 'POST',\n        body: JSON.stringify(data)\n      });\n    },\n\n    update: async (merchantId: number, productId: number, data: any) => {\n      return authenticatedFetch(apiUrls.merchants.products.update(merchantId, productId), {\n        method: 'PUT',\n        body: JSON.stringify(data)\n      });\n    },\n\n    delete: async (merchantId: number, productId: number) => {\n      return authenticatedFetch(apiUrls.merchants.products.delete(merchantId, productId), {\n        method: 'DELETE'\n      });\n    }\n  },\n\n  /**\n   * Merchant Orders\n   */\n  orders: {\n    list: async (merchantId: number, queryParams?: string) => {\n      const url = queryParams \n        ? `${apiUrls.merchants.orders.list(merchantId)}?${queryParams}`\n        : apiUrls.merchants.orders.list(merchantId);\n      return authenticatedFetch(url);\n    },\n\n    get: async (merchantId: number, orderId: number) => {\n      return authenticatedFetch(apiUrls.merchants.orders.get(merchantId, orderId));\n    },\n\n    create: async (merchantId: number, data: any) => {\n      return authenticatedFetch(apiUrls.merchants.orders.create(merchantId), {\n        method: 'POST',\n        body: JSON.stringify(data)\n      });\n    },\n\n    update: async (merchantId: number, orderId: number, data: any) => {\n      return authenticatedFetch(apiUrls.merchants.orders.update(merchantId, orderId), {\n        method: 'PUT',\n        body: JSON.stringify(data)\n      });\n    },\n\n    delete: async (merchantId: number, orderId: number) => {\n      return authenticatedFetch(apiUrls.merchants.orders.delete(merchantId, orderId), {\n        method: 'DELETE'\n      });\n    }\n  },\n\n  /**\n   * Merchant Users\n   */\n  users: {\n    list: async (merchantId: number) => {\n      return authenticatedFetch(apiUrls.merchants.users.list(merchantId));\n    },\n\n    get: async (merchantId: number, userId: number) => {\n      return authenticatedFetch(apiUrls.merchants.users.get(merchantId, userId));\n    },\n\n    create: async (merchantId: number, data: any) => {\n      return authenticatedFetch(apiUrls.merchants.users.create(merchantId), {\n        method: 'POST',\n        body: JSON.stringify(data)\n      });\n    },\n\n    update: async (merchantId: number, userId: number, data: any) => {\n      return authenticatedFetch(apiUrls.merchants.users.update(merchantId, userId), {\n        method: 'PUT',\n        body: JSON.stringify(data)\n      });\n    },\n\n    delete: async (merchantId: number, userId: number) => {\n      return authenticatedFetch(apiUrls.merchants.users.delete(merchantId, userId), {\n        method: 'DELETE'\n      });\n    }\n  },\n\n  /**\n   * Merchant Outlets\n   */\n  outlets: {\n    list: async (merchantId: number, queryParams?: string) => {\n      const url = queryParams \n        ? `${apiUrls.merchants.outlets.list(merchantId)}?${queryParams}`\n        : apiUrls.merchants.outlets.list(merchantId);\n      return authenticatedFetch(url);\n    },\n\n    get: async (merchantId: number, outletId: number) => {\n      return authenticatedFetch(apiUrls.merchants.outlets.get(merchantId, outletId));\n    },\n\n    create: async (merchantId: number, data: any) => {\n      return authenticatedFetch(apiUrls.merchants.outlets.create(merchantId), {\n        method: 'POST',\n        body: JSON.stringify(data)\n      });\n    },\n\n    update: async (merchantId: number, outletId: number, data: any) => {\n      return authenticatedFetch(apiUrls.merchants.outlets.update(merchantId, outletId), {\n        method: 'PUT',\n        body: JSON.stringify(data)\n      });\n    },\n\n    delete: async (merchantId: number, outletId: number) => {\n      return authenticatedFetch(apiUrls.merchants.outlets.delete(merchantId, outletId), {\n        method: 'DELETE'\n      });\n    }\n  },\n\n  /**\n   * Get merchant pricing configuration\n   */\n  async getPricingConfig(merchantId: number): Promise<ApiResponse<{ merchantId: number; merchantName: string; businessType: string; pricingConfig: any }>> {\n    const response = await authenticatedFetch(apiUrls.merchants.pricing.get(merchantId));\n    const result = await parseApiResponse<{ merchantId: number; merchantName: string; businessType: string; pricingConfig: any }>(response);\n    return result;\n  },\n\n  /**\n   * Update merchant pricing configuration\n   */\n  async updatePricingConfig(merchantId: number, config: any): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.merchants.pricing.update(merchantId), {\n      method: 'PUT',\n      body: JSON.stringify(config),\n    });\n    const result = await parseApiResponse<any>(response);\n    return result;\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\n\nexport interface AnalyticsFilters {\n  startDate?: string;\n  endDate?: string;\n  outletId?: number;\n  merchantId?: number;\n  groupBy?: 'day' | 'week' | 'month' | 'year';\n}\n\nexport interface RevenueData {\n  date: string;\n  revenue: number;\n  orders: number;\n  averageOrderValue: number;\n}\n\nexport interface ProductAnalytics {\n  productId: number;\n  productName: string;\n  totalRentals: number;\n  totalRevenue: number;\n  averageRentalDuration: number;\n  popularity: number;\n}\n\nexport interface CustomerAnalytics {\n  customerId: number;\n  customerName: string;\n  totalOrders: number;\n  totalSpent: number;\n  averageOrderValue: number;\n  lastOrderDate: string;\n}\n\n/**\n * Analytics API client for business intelligence and reporting\n */\nexport const analyticsApi = {\n  /**\n   * Get revenue analytics\n   */\n  async getRevenueAnalytics(filters: AnalyticsFilters): Promise<ApiResponse<RevenueData[]>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.groupBy) params.append('groupBy', filters.groupBy);\n    \n    const response = await authenticatedFetch(`${apiUrls.analytics.revenue}?${params.toString()}`);\n    return await parseApiResponse<RevenueData[]>(response);\n  },\n\n  /**\n   * Get order analytics\n   */\n  async getOrderAnalytics(filters: AnalyticsFilters): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.groupBy) params.append('groupBy', filters.groupBy);\n    \n    const response = await authenticatedFetch(`${apiUrls.analytics.orders}?${params.toString()}`);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get product analytics\n   */\n  async getProductAnalytics(filters: AnalyticsFilters): Promise<ApiResponse<ProductAnalytics[]>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    \n    const response = await authenticatedFetch(`${apiUrls.analytics.topProducts}?${params.toString()}`);\n    return await parseApiResponse<ProductAnalytics[]>(response);\n  },\n\n  /**\n   * Get customer analytics\n   */\n  async getCustomerAnalytics(filters: AnalyticsFilters): Promise<ApiResponse<CustomerAnalytics[]>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    \n    const response = await authenticatedFetch(`${apiUrls.analytics.topCustomers}?${params.toString()}`);\n    return await parseApiResponse<CustomerAnalytics[]>(response);\n  },\n\n  /**\n   * Get inventory analytics\n   */\n  async getInventoryAnalytics(filters: AnalyticsFilters): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    \n    const response = await authenticatedFetch(`${apiUrls.analytics.inventory}?${params.toString()}`);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get dashboard summary\n   */\n  async getDashboardSummary(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.analytics.dashboard);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get system analytics (admin only)\n   */\n  async getSystemAnalytics(filters?: AnalyticsFilters): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    if (filters?.startDate) params.append('startDate', filters.startDate);\n    if (filters?.endDate) params.append('endDate', filters.endDate);\n    if (filters?.groupBy) params.append('groupBy', filters.groupBy);\n    params.append('t', Date.now().toString()); // Add timestamp to bypass cache\n    \n    const url = `${apiUrls.analytics.system}?${params.toString()}`;\n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get recent system activities (admin only)\n   */\n  async getRecentActivities(limit?: number, offset?: number): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    if (limit) params.append('limit', limit.toString());\n    if (offset) params.append('offset', offset.toString());\n    params.append('t', Date.now().toString()); // Add timestamp to bypass cache\n    \n    const url = `${apiUrls.analytics.recentActivities}?${params.toString()}`;\n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get income analytics\n   */\n  async getIncomeAnalytics(filters: AnalyticsFilters = {}): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.groupBy) params.append('groupBy', filters.groupBy);\n    \n    const queryString = params.toString();\n    const url = queryString ? `${apiUrls.analytics.income}?${queryString}` : apiUrls.analytics.income;\n    \n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get order analytics summary\n   */\n  async getOrderAnalyticsSummary(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.analytics.orders);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get top products\n   */\n  async getTopProducts(filters?: AnalyticsFilters): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    if (filters?.startDate) params.append('startDate', filters.startDate);\n    if (filters?.endDate) params.append('endDate', filters.endDate);\n    \n    const url = `${apiUrls.analytics.topProducts}${params.toString() ? `?${params.toString()}` : ''}`;\n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get top customers\n   */\n  async getTopCustomers(filters?: AnalyticsFilters): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    if (filters?.startDate) params.append('startDate', filters.startDate);\n    if (filters?.endDate) params.append('endDate', filters.endDate);\n    \n    const url = `${apiUrls.analytics.topCustomers}${params.toString() ? `?${params.toString()}` : ''}`;\n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get recent orders\n   */\n  async getRecentOrders(filters?: AnalyticsFilters): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    if (filters?.startDate) params.append('startDate', filters.startDate);\n    if (filters?.endDate) params.append('endDate', filters.endDate);\n    \n    const url = `${apiUrls.analytics.recentOrders}${params.toString() ? `?${params.toString()}` : ''}`;\n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get outlet performance comparison\n   */\n  async getOutletPerformance(filters: AnalyticsFilters): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    \n    const response = await authenticatedFetch(`${apiUrls.analytics.outletPerformance}?${params.toString()}`);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get seasonal trends\n   */\n  async getSeasonalTrends(filters: AnalyticsFilters): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    \n    const response = await authenticatedFetch(`${apiUrls.analytics.seasonalTrends}?${params.toString()}`);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Export analytics data\n   */\n  async exportAnalytics(filters: AnalyticsFilters, format: 'csv' | 'excel' = 'csv'): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    \n    if (filters.startDate) params.append('startDate', filters.startDate);\n    if (filters.endDate) params.append('endDate', filters.endDate);\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.groupBy) params.append('groupBy', filters.groupBy);\n    params.append('format', format);\n    \n    const response = await authenticatedFetch(`${apiUrls.analytics.export}?${params.toString()}`);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get today's operational metrics\n   */\n  async getTodayMetrics(): Promise<ApiResponse<{\n    todayPickups: number;\n    todayReturns: number;\n    overdueItems: number;\n    productUtilization: number;\n  }>> {\n    // Add timestamp to bypass cache\n    const url = `${apiUrls.analytics.todayMetrics}?t=${Date.now()}`;\n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get growth metrics\n   */\n  async getGrowthMetrics(filters?: AnalyticsFilters): Promise<ApiResponse<{\n    customerGrowth: number;\n    revenueGrowth: number;\n    customerBase: number;\n  }>> {\n    const params = new URLSearchParams();\n    if (filters?.startDate) params.append('startDate', filters.startDate);\n    if (filters?.endDate) params.append('endDate', filters.endDate);\n    params.append('t', Date.now().toString()); // Add timestamp to bypass cache\n    \n    const url = `${apiUrls.analytics.growthMetrics}?${params.toString()}`;\n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get enhanced dashboard summary with all metrics\n   */\n  async getEnhancedDashboardSummary(filters?: AnalyticsFilters): Promise<ApiResponse<{\n    totalRevenue: number;\n    todayRevenue: number;\n    totalOrders: number;\n    futureIncome: number;\n    todayPickups: number;\n    todayReturns: number;\n    overdueItems: number;\n    productUtilization: number;\n    customerGrowth: number;\n    revenueGrowth: number;\n    customerBase: number;\n  }>> {\n    const params = new URLSearchParams();\n    if (filters?.startDate) params.append('startDate', filters.startDate);\n    if (filters?.endDate) params.append('endDate', filters.endDate);\n    params.append('t', Date.now().toString()); // Add timestamp to bypass cache\n    \n    const url = `${apiUrls.analytics.enhancedDashboard}?${params.toString()}`;\n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<any>(response);\n  }\n};\n","import { authenticatedFetch, parseApiResponse, ApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { Category } from '@rentalshop/types';\n\nexport interface CategoriesResponse {\n  categories: Category[];\n  total: number;\n}\n\n/**\n * Categories API client for category management operations\n */\nexport const categoriesApi = {\n  /**\n   * Get all categories\n   */\n  async getCategories(): Promise<ApiResponse<Category[]>> {\n    const response = await authenticatedFetch(apiUrls.categories.list);\n    const result = await parseApiResponse<Category[]>(response);\n    return result;\n  },\n\n  /**\n   * Get categories with pagination\n   */\n  async getCategoriesPaginated(page: number = 1, limit: number = 50): Promise<ApiResponse<CategoriesResponse>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.categories.list}?${params.toString()}`);\n    return await parseApiResponse<CategoriesResponse>(response);\n  },\n\n  /**\n   * Create a new category\n   */\n  async createCategory(categoryData: Partial<Category>): Promise<ApiResponse<Category>> {\n    const response = await authenticatedFetch(apiUrls.categories.create, {\n      method: 'POST',\n      body: JSON.stringify(categoryData),\n    });\n    return await parseApiResponse<Category>(response);\n  },\n\n  /**\n   * Update an existing category\n   */\n  async updateCategory(categoryId: number, categoryData: Partial<Category>): Promise<ApiResponse<Category>> {\n    const response = await authenticatedFetch(apiUrls.categories.update(categoryId), {\n      method: 'PUT',\n      body: JSON.stringify(categoryData),\n    });\n    return await parseApiResponse<Category>(response);\n  },\n\n  /**\n   * Delete a category\n   */\n  async deleteCategory(categoryId: number): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.categories.delete(categoryId), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<any>(response);\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\n\nexport interface Notification {\n  id: number;\n  type: 'info' | 'success' | 'warning' | 'error';\n  title: string;\n  message: string;\n  isRead: boolean;\n  createdAt: string;\n  data?: any;\n}\n\nexport interface NotificationFilters {\n  type?: string;\n  isRead?: boolean;\n  page?: number;\n  limit?: number;\n}\n\nexport interface NotificationsResponse {\n  notifications: Notification[];\n  total: number;\n  page: number;\n  limit: number;\n  totalPages: number;\n  unreadCount: number;\n}\n\n/**\n * Notifications API client for notification management\n */\nexport const notificationsApi = {\n  /**\n   * Get all notifications\n   */\n  async getNotifications(): Promise<ApiResponse<Notification[]>> {\n    const response = await authenticatedFetch(apiUrls.notifications.list);\n    const result = await parseApiResponse<Notification[]>(response);\n    return result;\n  },\n\n  /**\n   * Get notifications with pagination\n   */\n  async getNotificationsPaginated(page: number = 1, limit: number = 50): Promise<ApiResponse<NotificationsResponse>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.notifications.list}?${params.toString()}`);\n    return await parseApiResponse<NotificationsResponse>(response);\n  },\n\n  /**\n   * Search notifications with filters\n   */\n  async searchNotifications(filters: NotificationFilters): Promise<ApiResponse<Notification[]>> {\n    const params = new URLSearchParams();\n    \n    if (filters.type) params.append('type', filters.type);\n    if (filters.isRead !== undefined) params.append('isRead', filters.isRead.toString());\n    if (filters.page) params.append('page', filters.page.toString());\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    \n    const response = await authenticatedFetch(`${apiUrls.notifications.list}?${params.toString()}`);\n    return await parseApiResponse<Notification[]>(response);\n  },\n\n  /**\n   * Get notification by ID\n   */\n  async getNotification(notificationId: number): Promise<ApiResponse<Notification>> {\n    const response = await authenticatedFetch(apiUrls.notifications.get(notificationId));\n    return await parseApiResponse<Notification>(response);\n  },\n\n  /**\n   * Mark notification as read\n   */\n  async markAsRead(notificationId: number): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.notifications.markRead(notificationId), {\n      method: 'PATCH',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Mark notification as unread\n   */\n  async markAsUnread(notificationId: number): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.notifications.markUnread(notificationId), {\n      method: 'PATCH',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Mark all notifications as read\n   */\n  async markAllAsRead(): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.notifications.markAllRead, {\n      method: 'PATCH',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Delete notification\n   */\n  async deleteNotification(notificationId: number): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.notifications.delete(notificationId), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Delete all read notifications\n   */\n  async deleteAllRead(): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.notifications.deleteAllRead, {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Get unread count\n   */\n  async getUnreadCount(): Promise<ApiResponse<{ count: number }>> {\n    const response = await authenticatedFetch(apiUrls.notifications.unreadCount);\n    return await parseApiResponse<{ count: number }>(response);\n  },\n\n  /**\n   * Get notification preferences\n   */\n  async getPreferences(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.notifications.preferences);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Update notification preferences\n   */\n  async updatePreferences(preferences: any): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.notifications.preferences, {\n      method: 'PUT',\n      body: JSON.stringify(preferences),\n    });\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Send test notification\n   */\n  async sendTestNotification(): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.notifications.test, {\n      method: 'POST',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\nimport type { User, ProfileUpdateInput } from '@rentalshop/types';\n\n/**\n * Profile API client for user profile management\n */\nexport const profileApi = {\n  /**\n   * Get current user profile\n   */\n  async getProfile(): Promise<ApiResponse<User>> {\n    const response = await authenticatedFetch(apiUrls.settings.user);\n    return await parseApiResponse<User>(response);\n  },\n\n  /**\n   * Update current user profile\n   */\n  async updateProfile(profileData: ProfileUpdateInput): Promise<ApiResponse<User>> {\n    const response = await authenticatedFetch(apiUrls.settings.user, {\n      method: 'PUT',\n      body: JSON.stringify(profileData),\n    });\n    return await parseApiResponse<User>(response);\n  },\n\n  /**\n   * Change current user password\n   */\n  async changePassword(passwordData: {\n    currentPassword: string;\n    newPassword: string;\n    confirmPassword: string;\n  }): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.settings.changePassword, {\n      method: 'PATCH',\n      body: JSON.stringify(passwordData),\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Upload profile picture\n   */\n  async uploadProfilePicture(file: File): Promise<ApiResponse<{ imageUrl: string }>> {\n    const formData = new FormData();\n    formData.append('profilePicture', file);\n\n    const response = await authenticatedFetch(apiUrls.settings.uploadPicture, {\n      method: 'POST',\n      body: formData,\n      // Don't set Content-Type header for FormData\n    });\n    return await parseApiResponse<{ imageUrl: string }>(response);\n  },\n\n  /**\n   * Delete profile picture\n   */\n  async deleteProfilePicture(): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.settings.deletePicture, {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Get user preferences\n   */\n  async getPreferences(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.settings.preferences);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Update user preferences\n   */\n  async updatePreferences(preferences: any): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.settings.preferences, {\n      method: 'PUT',\n      body: JSON.stringify(preferences),\n    });\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get user activity log\n   */\n  async getActivityLog(page: number = 1, limit: number = 20): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.settings.activityLog}?${params.toString()}`);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get user notifications\n   */\n  async getNotifications(page: number = 1, limit: number = 20): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.settings.profileNotifications}?${params.toString()}`);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Mark notification as read\n   */\n  async markNotificationAsRead(notificationId: number): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.settings.markNotificationRead(notificationId), {\n      method: 'PATCH',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Mark all notifications as read\n   */\n  async markAllNotificationsAsRead(): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(apiUrls.settings.markAllNotificationsRead, {\n      method: 'PATCH',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  }\n};\n","import { User, UserCreateInput } from '@rentalshop/types';\nimport { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\n\n// ============================================================================\n// USER API TYPES\n// ============================================================================\n\nexport interface UserApiResponse {\n  success: boolean;\n  data?: any;\n  message?: string;\n  error?: string;\n}\n\n// ============================================================================\n// USER API (MERGED FUNCTIONALITY)\n// ============================================================================\n\nexport const usersApi = {\n  // ============================================================================\n  // USER CRUD OPERATIONS\n  // ============================================================================\n\n  /**\n   * Get all users\n   */\n  async getUsers(filters: any = {}, options: any = {}): Promise<UserApiResponse> {\n    const params = new URLSearchParams();\n    \n    // Add filters\n    if (filters.search) params.append('search', filters.search);\n    if (filters.role) params.append('role', filters.role);\n    if (filters.isActive !== undefined) params.append('isActive', filters.isActive.toString());\n    if (filters.status) params.append('status', filters.status);\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    \n    // Add options\n    if (options.page) params.append('page', options.page.toString());\n    if (options.limit) params.append('limit', options.limit.toString());\n    if (options.sortBy) params.append('sortBy', options.sortBy);\n    if (options.sortOrder) params.append('sortOrder', options.sortOrder);\n\n    const queryString = params.toString();\n    const url = queryString ? `${apiUrls.users.list}?${queryString}` : apiUrls.users.list;\n    \n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Get users with pagination\n   */\n  async getUsersPaginated(page: number = 1, limit: number = 50): Promise<UserApiResponse> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.users.list}?${params.toString()}`);\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Search users with filters\n   */\n  async searchUsers(filters: any = {}): Promise<UserApiResponse> {\n    const params = new URLSearchParams();\n    \n    if (filters.search) params.append('search', filters.search);\n    if (filters.role) params.append('role', filters.role);\n    if (filters.status) params.append('status', filters.status);\n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.outletId) params.append('outletId', filters.outletId.toString());\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n    \n    const queryString = params.toString();\n    const url = queryString ? `${apiUrls.users.list}?${queryString}` : apiUrls.users.list;\n    \n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Get user by ID\n   */\n  async getUserById(userId: number): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(apiUrls.users.update(userId));\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Create new user\n   */\n  async createUser(userData: UserCreateInput): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(apiUrls.users.create, {\n      method: 'POST',\n      body: JSON.stringify(userData),\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Update user\n   */\n  async updateUser(userId: number, userData: Partial<User>): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(apiUrls.users.update(userId), {\n      method: 'PUT',\n      body: JSON.stringify(userData),\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Delete user\n   */\n  async deleteUser(userId: number): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(apiUrls.users.delete(userId), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  // ============================================================================\n  // USER MANAGEMENT OPERATIONS\n  // ============================================================================\n\n  /**\n   * Update user by public ID\n   */\n  async updateUserByPublicId(userId: number, userData: Partial<User>): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(apiUrls.users.updateByPublicId(userId), {\n      method: 'PUT',\n      body: JSON.stringify(userData),\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Activate user by public ID\n   */\n  async activateUserByPublicId(userId: number): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(apiUrls.users.activateByPublicId(userId), {\n      method: 'PUT',\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Deactivate user by public ID\n   */\n  async deactivateUserByPublicId(userId: number): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(apiUrls.users.deactivateByPublicId(userId), {\n      method: 'PUT',\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Activate user\n   */\n  async activateUser(userId: number): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(`${apiUrls.users.update(userId)}/activate`, {\n      method: 'PATCH',\n      body: JSON.stringify({ isActive: true }),\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Deactivate user\n   */\n  async deactivateUser(userId: number): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(`${apiUrls.users.update(userId)}/deactivate`, {\n      method: 'PATCH',\n      body: JSON.stringify({ isActive: false }),\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  },\n\n  /**\n   * Change user password\n   */\n  async changePassword(userId: number, newPassword: string): Promise<UserApiResponse> {\n    const response = await authenticatedFetch(`${apiUrls.users.update(userId)}/change-password`, {\n      method: 'PATCH',\n      body: JSON.stringify({ newPassword }),\n    });\n    return await parseApiResponse<UserApiResponse>(response);\n  }\n};\n","// ============================================================================\n// PLANS API CLIENT\n// ============================================================================\n\nimport { authenticatedFetch, parseApiResponse, type ApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { Plan, PlanCreateInput, PlanUpdateInput, PlanFilters } from '@rentalshop/types';\n\n/**\n * Public fetch function for unauthenticated requests\n */\nconst publicFetch = async (url: string, options: RequestInit = {}): Promise<Response> => {\n  const headers: Record<string, string> = {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    ...(options.headers as Record<string, string>),\n  };\n\n  const defaultOptions: RequestInit = {\n    method: 'GET',\n    headers,\n    ...options,\n  };\n\n  return await fetch(url, defaultOptions);\n};\n\nexport interface PlansResponse {\n  plans: Plan[];\n  total: number;\n  hasMore: boolean;\n}\n\nexport interface PlanStats {\n  totalPlans: number;\n  activePlans: number;\n  totalSubscriptions: number;\n  activeSubscriptions: number;\n  totalRevenue: number;\n}\n\n/**\n * Plans API client for plan management operations\n */\nexport const plansApi = {\n  /**\n   * Get all plans with filters and pagination\n   */\n  async getPlans(filters: PlanFilters & { includeInactive?: boolean } = {}): Promise<ApiResponse<PlansResponse>> {\n    const params = new URLSearchParams();\n    \n    if (filters.search) params.append('search', filters.search);\n    if (filters.isActive !== undefined) params.append('isActive', filters.isActive.toString());\n    if (filters.isPopular !== undefined) params.append('isPopular', filters.isPopular.toString());\n    if (filters.includeInactive) params.append('includeInactive', 'true');\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n    if (filters.sortBy) params.append('sortBy', filters.sortBy);\n    if (filters.sortOrder) params.append('sortOrder', filters.sortOrder);\n    \n    const queryString = params.toString();\n    const url = queryString ? `${apiUrls.plans.list}?${queryString}` : apiUrls.plans.list;\n    \n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<PlansResponse>(response);\n  },\n\n  /**\n   * Get a specific plan by ID\n   */\n  async getPlanById(planId: number): Promise<ApiResponse<Plan>> {\n    const response = await authenticatedFetch(apiUrls.plans.get(planId));\n    return await parseApiResponse<Plan>(response);\n  },\n\n  /**\n   * Create a new plan\n   */\n  async createPlan(planData: PlanCreateInput): Promise<ApiResponse<Plan>> {\n    const response = await authenticatedFetch(apiUrls.plans.create, {\n      method: 'POST',\n      body: JSON.stringify(planData),\n    });\n    return await parseApiResponse<Plan>(response);\n  },\n\n  /**\n   * Update an existing plan\n   */\n  async updatePlan(planId: number, planData: PlanUpdateInput): Promise<ApiResponse<Plan>> {\n    const response = await authenticatedFetch(apiUrls.plans.update(planId), {\n      method: 'PUT',\n      body: JSON.stringify(planData),\n    });\n    return await parseApiResponse<Plan>(response);\n  },\n\n  /**\n   * Delete a plan (soft delete)\n   */\n  async deletePlan(planId: number): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.plans.delete(planId), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get plan statistics\n   */\n  async getPlanStats(): Promise<ApiResponse<PlanStats>> {\n    const response = await authenticatedFetch(apiUrls.plans.stats);\n    return await parseApiResponse<PlanStats>(response);\n  },\n\n  /**\n   * Get public plans (for display to users)\n   */\n  async getPublicPlans(): Promise<ApiResponse<Plan[]>> {\n    const response = await authenticatedFetch(apiUrls.plans.public);\n    return await parseApiResponse<Plan[]>(response);\n  }\n};\n\n/**\n * Public plans API client (no authentication required)\n */\nexport const publicPlansApi = {\n  /**\n   * Get public plans with variants (no authentication required)\n   */\n  async getPublicPlansWithVariants(): Promise<ApiResponse<Plan[]>> {\n    const response = await publicFetch(apiUrls.plans.public);\n    return await parseApiResponse<Plan[]>(response);\n  }\n};\n","// ============================================================================\n// BILLING CYCLES API CLIENT\n// ============================================================================\n\nimport { authenticatedFetch, parseApiResponse, type ApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\n\n// ============================================================================\n// BILLING CYCLE TYPES\n// ============================================================================\n\nexport interface BillingCycle {\n  id: number;\n  name: string;\n  value: string;\n  months: number;\n  discount: number;\n  description?: string;\n  isActive: boolean;\n  sortOrder: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface BillingCycleCreateInput {\n  name: string;\n  value: string;\n  months: number;\n  discount?: number;\n  description?: string;\n  isActive?: boolean;\n  sortOrder?: number;\n}\n\nexport interface BillingCycleUpdateInput {\n  name?: string;\n  value?: string;\n  months?: number;\n  discount?: number;\n  description?: string;\n  isActive?: boolean;\n  sortOrder?: number;\n}\n\nexport interface BillingCycleFilters {\n  search?: string;\n  isActive?: boolean;\n  limit?: number;\n  offset?: number;\n  sortBy?: 'name' | 'value' | 'months' | 'discount' | 'sortOrder' | 'createdAt';\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface BillingCyclesResponse {\n  billingCycles: BillingCycle[];\n  total: number;\n  hasMore: boolean;\n}\n\n/**\n * Billing Cycles API client for billing cycle management operations\n */\nexport const billingCyclesApi = {\n  /**\n   * Get all billing cycles with filtering and pagination\n   */\n  async getBillingCycles(filters: BillingCycleFilters = {}): Promise<ApiResponse<BillingCyclesResponse>> {\n    const params = new URLSearchParams();\n    \n    if (filters.search) params.append('search', filters.search);\n    if (filters.isActive !== undefined) params.append('isActive', filters.isActive.toString());\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n    if (filters.sortBy) params.append('sortBy', filters.sortBy);\n    if (filters.sortOrder) params.append('sortOrder', filters.sortOrder);\n    \n    const queryString = params.toString();\n    const url = queryString ? `${apiUrls.billingCycles.list}?${queryString}` : apiUrls.billingCycles.list;\n    \n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<BillingCyclesResponse>(response);\n  },\n\n  /**\n   * Get a specific billing cycle by ID\n   */\n  async getBillingCycle(id: number): Promise<ApiResponse<BillingCycle>> {\n    const response = await authenticatedFetch(apiUrls.billingCycles.get(id));\n    return await parseApiResponse<BillingCycle>(response);\n  },\n\n  /**\n   * Create a new billing cycle\n   */\n  async createBillingCycle(input: BillingCycleCreateInput): Promise<ApiResponse<BillingCycle>> {\n    const response = await authenticatedFetch(apiUrls.billingCycles.create, {\n      method: 'POST',\n      body: JSON.stringify(input),\n    });\n    return await parseApiResponse<BillingCycle>(response);\n  },\n\n  /**\n   * Update an existing billing cycle\n   */\n  async updateBillingCycle(id: number, input: BillingCycleUpdateInput): Promise<ApiResponse<BillingCycle>> {\n    const response = await authenticatedFetch(apiUrls.billingCycles.update(id), {\n      method: 'PUT',\n      body: JSON.stringify(input),\n    });\n    return await parseApiResponse<BillingCycle>(response);\n  },\n\n  /**\n   * Delete a billing cycle\n   */\n  async deleteBillingCycle(id: number): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.billingCycles.delete(id), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Get active billing cycles (for dropdowns and forms)\n   */\n  async getActiveBillingCycles(): Promise<ApiResponse<BillingCyclesResponse>> {\n    const response = await this.getBillingCycles({ \n      isActive: true, \n      sortBy: 'sortOrder', \n      sortOrder: 'asc' \n    });\n    \n    return response; // Return the ApiResponse directly - let consumers use type guards\n  },\n\n  /**\n   * Get billing cycle by value (for internal use)\n   */\n  async getBillingCycleByValue(value: string): Promise<ApiResponse<BillingCycle>> {\n    const response = await this.getBillingCycles({ \n      search: value,\n      isActive: true \n    });\n    \n    if (!response.success || !response.data) {\n      throw new Error('Failed to fetch billing cycles');\n    }\n    \n    const cycle = response.data.billingCycles.find((c: any) => c.value === value);\n    \n    if (!cycle) {\n      throw new Error(`Billing cycle with value '${value}' not found`);\n    }\n\n    return {\n      success: true,\n      data: cycle,\n      message: 'Billing cycle found'\n    };\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\nimport type { Payment, PaymentInput, PaymentUpdateInput } from '@rentalshop/types';\n\n// Local type definitions for API responses\nexport interface PaymentFilters {\n  search?: string;\n  status?: string;\n  method?: string;\n  limit?: number;\n  offset?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface PaymentsResponse {\n  payments: Payment[];\n  total: number;\n  hasMore: boolean;\n}\n\n/**\n * Payments API client for subscription payment management operations\n */\nexport const paymentsApi = {\n  /**\n   * Get all payments with filtering and pagination\n   */\n  async getPayments(filters: PaymentFilters = {}): Promise<ApiResponse<PaymentsResponse>> {\n    const params = new URLSearchParams();\n    \n    if (filters.search) params.append('search', filters.search);\n    if (filters.status) params.append('status', filters.status);\n    if (filters.method) params.append('method', filters.method);\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n    if (filters.sortBy) params.append('sortBy', filters.sortBy);\n    if (filters.sortOrder) params.append('sortOrder', filters.sortOrder);\n    \n    const queryString = params.toString();\n    const url = queryString ? `${apiUrls.payments.list}?${queryString}` : apiUrls.payments.list;\n    \n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<PaymentsResponse>(response);\n  },\n\n  /**\n   * Get a specific payment by ID\n   */\n  async getPayment(id: number): Promise<ApiResponse<Payment>> {\n    const response = await authenticatedFetch(apiUrls.payments.get(id));\n    return await parseApiResponse<Payment>(response);\n  },\n\n  /**\n   * Create a new payment\n   */\n  async createPayment(input: PaymentInput): Promise<ApiResponse<Payment>> {\n    const response = await authenticatedFetch(apiUrls.payments.create, {\n      method: 'POST',\n      body: JSON.stringify(input),\n    });\n    return await parseApiResponse<Payment>(response);\n  },\n\n  /**\n   * Update an existing payment\n   */\n  async updatePayment(id: number, input: PaymentUpdateInput): Promise<ApiResponse<Payment>> {\n    const response = await authenticatedFetch(apiUrls.payments.update(id), {\n      method: 'PUT',\n      body: JSON.stringify(input),\n    });\n    return await parseApiResponse<Payment>(response);\n  },\n\n  /**\n   * Create a manual payment\n   */\n  async createManualPayment(input: ManualPaymentCreateInput): Promise<ApiResponse<ManualPayment>> {\n    const response = await authenticatedFetch(apiUrls.payments.manual, {\n      method: 'POST',\n      body: JSON.stringify(input),\n    });\n    return await parseApiResponse<ManualPayment>(response);\n  },\n\n  /**\n   * Delete a payment\n   */\n  async deletePayment(id: number): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.payments.delete(id), {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Process payment\n   */\n  async processPayment(id: number): Promise<ApiResponse<Payment>> {\n    const response = await authenticatedFetch(apiUrls.payments.process(id), {\n      method: 'POST',\n    });\n    return await parseApiResponse<Payment>(response);\n  },\n\n  /**\n   * Refund payment\n   */\n  async refundPayment(id: number, reason?: string): Promise<ApiResponse<Payment>> {\n    const response = await authenticatedFetch(apiUrls.payments.refund(id), {\n      method: 'POST',\n      body: JSON.stringify({ reason }),\n    });\n    return await parseApiResponse<Payment>(response);\n  },\n\n  /**\n   * Get payment statistics\n   */\n  async getPaymentStats(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.payments.stats);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Export payments\n   */\n  async exportPayments(filters: PaymentFilters = {}): Promise<ApiResponse<{ downloadUrl: string }>> {\n    const params = new URLSearchParams();\n    \n    if (filters.search) params.append('search', filters.search);\n    if (filters.status) params.append('status', filters.status);\n    if (filters.method) params.append('method', filters.method);\n    \n    const queryString = params.toString();\n    const url = queryString ? `${apiUrls.payments.export}?${queryString}` : apiUrls.payments.export;\n    \n    const response = await authenticatedFetch(url);\n    return await parseApiResponse<{ downloadUrl: string }>(response);\n  },\n\n};\n\n// Manual payment types\nexport interface ManualPaymentCreateInput {\n  merchantId: number;\n  planId: number;\n  amount: number;\n  currency: string;\n  method: string;\n  description?: string;\n  extendSubscription?: boolean;\n  monthsToExtend?: number;\n  invoiceNumber?: string;\n  transactionId?: string;\n  startDate?: string;\n  endDate?: string;\n}\n\nexport interface ManualPayment {\n  id: number;\n  amount: number;\n  method: string;\n  type: string;\n  status: string;\n  reference: string;\n  notes?: string;\n  createdAt: string;\n  metadata?: {\n    planId: string;\n    startDate?: string;\n    endDate?: string;\n    extendSubscription?: boolean;\n    monthsToExtend?: number;\n    transactionId?: string;\n    currency: string;\n  };\n}\n","/**\n * Audit Logs API Client\n * \n * This module provides API client functions for audit logs operations.\n * All API requests should be made through these functions, not directly in UI components.\n */\n\nimport { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\n\n// Types\nexport interface AuditLog {\n  id: number;\n  action: string;\n  entityType: string;\n  entityId: string;\n  entityName?: string;\n  user?: {\n    id: number;\n    email: string;\n    name: string;\n    role: string;\n  };\n  merchant?: {\n    id: number;\n    name: string;\n  };\n  outlet?: {\n    id: number;\n    name: string;\n  };\n  oldValues?: Record<string, any>;\n  newValues?: Record<string, any>;\n  changes?: Record<string, { old: any; new: any }>;\n  ipAddress?: string;\n  userAgent?: string;\n  sessionId?: string;\n  requestId?: string;\n  metadata?: Record<string, any>;\n  severity: 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL';\n  category: 'GENERAL' | 'SECURITY' | 'BUSINESS' | 'SYSTEM' | 'COMPLIANCE';\n  description?: string;\n  createdAt: string;\n}\n\nexport interface AuditLogFilter {\n  action?: string;\n  entityType?: string;\n  entityId?: string;\n  userId?: string;\n  merchantId?: string;\n  outletId?: string;\n  severity?: string;\n  category?: string;\n  startDate?: string;\n  endDate?: string;\n  limit?: number;\n  offset?: number;\n}\n\nexport interface AuditLogResponse {\n  success: boolean;\n  data: AuditLog[];\n  pagination: {\n    total: number;\n    limit: number;\n    offset: number;\n    hasMore: boolean;\n  };\n}\n\nexport interface AuditLogStats {\n  totalLogs: number;\n  logsByAction: Record<string, number>;\n  logsByEntity: Record<string, number>;\n  logsBySeverity: Record<string, number>;\n  logsByCategory: Record<string, number>;\n  recentActivity: number;\n}\n\nexport interface AuditLogStatsResponse {\n  success: boolean;\n  data: AuditLogStats;\n}\n\n\n/**\n * Get audit logs with filtering and pagination\n */\nexport async function getAuditLogs(filter: AuditLogFilter = {}): Promise<ApiResponse<AuditLog[]>> {\n  const params = new URLSearchParams();\n  \n  Object.entries(filter).forEach(([key, value]) => {\n    if (value !== undefined && value !== '') {\n      params.append(key, value.toString());\n    }\n  });\n\n  const queryString = params.toString();\n  const url = queryString ? `${apiUrls.auditLogs.list}?${queryString}` : apiUrls.auditLogs.list;\n  \n  const response = await authenticatedFetch(url);\n  return await parseApiResponse<AuditLog[]>(response);\n}\n\n/**\n * Get audit log statistics\n */\nexport async function getAuditLogStats(filter: Partial<AuditLogFilter> = {}): Promise<ApiResponse<AuditLogStats>> {\n  const params = new URLSearchParams();\n  \n  Object.entries(filter).forEach(([key, value]) => {\n    if (value !== undefined && value !== '') {\n      params.append(key, value.toString());\n    }\n  });\n\n  const queryString = params.toString();\n  const url = queryString ? `${apiUrls.auditLogs.stats}?${queryString}` : apiUrls.auditLogs.stats;\n  \n  const response = await authenticatedFetch(url);\n  return await parseApiResponse<AuditLogStats>(response);\n}\n\n/**\n * Export audit logs (if endpoint exists)\n */\nexport async function exportAuditLogs(filter: AuditLogFilter = {}): Promise<Blob> {\n  const params = new URLSearchParams();\n  \n  Object.entries(filter).forEach(([key, value]) => {\n    if (value !== undefined && value !== '') {\n      params.append(key, value.toString());\n    }\n  });\n\n  const queryString = params.toString();\n  const url = queryString ? `${apiUrls.auditLogs.export}?${queryString}` : apiUrls.auditLogs.export;\n  \n  const response = await authenticatedFetch(url, {\n    headers: {\n      'Accept': 'application/octet-stream',\n    },\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`Export failed: ${errorText}`);\n  }\n\n  return response.blob();\n}\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface MerchantSettings {\n  name: string;\n  phone?: string;\n  address?: string;\n  city?: string;\n  state?: string;\n  zipCode?: string;\n  country?: string;\n  businessType?: string;\n  taxId?: string;\n  website?: string;\n  description?: string;\n}\n\nexport interface UserProfile {\n  firstName: string;\n  lastName: string;\n  phone?: string;\n}\n\nexport interface OutletSettings {\n  name: string;\n  phone?: string;\n  address?: string;\n  description?: string;\n}\n\nexport interface BillingInterval {\n  id: string;\n  name: string;\n  duration: number;\n  unit: 'days' | 'weeks' | 'months' | 'years';\n  isActive: boolean;\n}\n\nexport interface BillingSettings {\n  intervals: BillingInterval[];\n  defaultInterval?: string;\n  autoRenewal: boolean;\n  gracePeriod: number; // in days\n}\n\n// ============================================================================\n// SETTINGS API CLIENT\n// ============================================================================\n\n/**\n * Settings API client for user and merchant settings\n */\nexport const settingsApi = {\n  /**\n   * Update merchant settings\n   */\n  async updateMerchantSettings(data: MerchantSettings): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.settings.merchant, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n    \n    const result = await parseApiResponse<any>(response);\n    return result;\n  },\n\n  /**\n   * Update merchant information (alias for updateMerchantSettings)\n   */\n  async updateMerchantInfo(data: MerchantSettings): Promise<ApiResponse<any>> {\n    return this.updateMerchantSettings(data);\n  },\n\n  /**\n   * Get user profile\n   */\n  async getUserProfile(): Promise<ApiResponse<UserProfile>> {\n    const response = await authenticatedFetch(apiUrls.settings.user);\n    const result = await parseApiResponse<UserProfile>(response);\n    return result;\n  },\n\n  /**\n   * Update user profile\n   */\n  async updateUserProfile(data: UserProfile): Promise<ApiResponse<UserProfile>> {\n    const response = await authenticatedFetch(apiUrls.settings.user, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n    const result = await parseApiResponse<UserProfile>(response);\n    return result;\n  },\n\n  /**\n   * Update outlet information\n   */\n  async updateOutletInfo(data: OutletSettings): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.settings.outlet, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n    const result = await parseApiResponse<any>(response);\n    return result;\n  },\n\n  /**\n   * Get billing settings\n   */\n  async getBillingSettings(): Promise<ApiResponse<BillingSettings>> {\n    const response = await authenticatedFetch(apiUrls.settings.billing);\n    return await parseApiResponse<BillingSettings>(response);\n  },\n\n  /**\n   * Update billing settings\n   */\n  async updateBillingSettings(data: BillingSettings): Promise<ApiResponse<BillingSettings>> {\n    const response = await authenticatedFetch(apiUrls.settings.billing, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n    return await parseApiResponse<BillingSettings>(response);\n  },\n\n  /**\n   * Get billing intervals\n   */\n  async getBillingIntervals(): Promise<ApiResponse<BillingInterval[]>> {\n    const response = await authenticatedFetch(`${apiUrls.settings.billing}/intervals`);\n    return await parseApiResponse<BillingInterval[]>(response);\n  },\n\n  /**\n   * Update billing intervals\n   */\n  async updateBillingIntervals(intervals: BillingInterval[]): Promise<ApiResponse<BillingInterval[]>> {\n    const response = await authenticatedFetch(`${apiUrls.settings.billing}/intervals`, {\n      method: 'POST',\n      body: JSON.stringify({ intervals }),\n    });\n    return await parseApiResponse<BillingInterval[]>(response);\n  }\n};","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\nimport type { \n  Subscription, \n  SubscriptionFilters, \n  SubscriptionsResponse, \n  SubscriptionCreateInput, \n  SubscriptionUpdateInput \n} from '@rentalshop/types';\n\n/**\n * Subscriptions API client for subscription management operations\n */\nexport const subscriptionsApi = {\n  /**\n   * Get all subscriptions\n   */\n  async getSubscriptions(): Promise<ApiResponse<Subscription[]>> {\n    const response = await authenticatedFetch(apiUrls.subscriptions.list);\n    const result = await parseApiResponse<Subscription[]>(response);\n    return result;\n  },\n\n  /**\n   * Get subscriptions with pagination\n   */\n  async getSubscriptionsPaginated(page: number = 1, limit: number = 50): Promise<ApiResponse<SubscriptionsResponse>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString()\n    });\n    \n    const response = await authenticatedFetch(`${apiUrls.subscriptions.list}?${params.toString()}`);\n    return await parseApiResponse<SubscriptionsResponse>(response);\n  },\n\n  /**\n   * Search subscriptions with filters\n   */\n  async search(filters: SubscriptionFilters = {}): Promise<ApiResponse<Subscription[]>> {\n    const params = new URLSearchParams();\n    \n    if (filters.merchantId) params.append('merchantId', filters.merchantId.toString());\n    if (filters.planId) params.append('planId', filters.planId.toString());\n    if (filters.status) params.append('status', filters.status);\n    if (filters.startDate) {\n      const startDate = filters.startDate instanceof Date ? filters.startDate.toISOString() : filters.startDate;\n      params.append('startDate', startDate);\n    }\n    if (filters.endDate) {\n      const endDate = filters.endDate instanceof Date ? filters.endDate.toISOString() : filters.endDate;\n      params.append('endDate', endDate);\n    }\n    if (filters.limit) params.append('limit', filters.limit.toString());\n    if (filters.offset) params.append('offset', filters.offset.toString());\n\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.list}?${params.toString()}`);\n    return await parseApiResponse<Subscription[]>(response);\n  },\n\n  /**\n   * Get subscription by ID\n   */\n  async getById(id: number): Promise<ApiResponse<Subscription>> {\n    const response = await authenticatedFetch(apiUrls.subscriptions.get(id));\n    return await parseApiResponse<Subscription>(response);\n  },\n\n  /**\n   * Create new subscription\n   */\n  async create(data: SubscriptionCreateInput): Promise<ApiResponse<Subscription>> {\n    const response = await authenticatedFetch(apiUrls.subscriptions.create, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n    return await parseApiResponse<Subscription>(response);\n  },\n\n  /**\n   * Update subscription\n   */\n  async update(id: number, data: SubscriptionUpdateInput): Promise<ApiResponse<Subscription>> {\n    const response = await authenticatedFetch(apiUrls.subscriptions.update(id), {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n    return await parseApiResponse<Subscription>(response);\n  },\n\n  /**\n   * Cancel subscription (soft delete)\n   */\n  async cancel(id: number, reason: string): Promise<ApiResponse<Subscription>> {\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.update(id)}/cancel`, {\n      method: 'POST',\n      body: JSON.stringify({ reason }),\n    });\n    return await parseApiResponse<Subscription>(response);\n  },\n\n  /**\n   * Change subscription plan\n   */\n  async changePlan(id: number, newPlanId: number): Promise<ApiResponse<Subscription>> {\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.update(id)}/change-plan`, {\n      method: 'PATCH',\n      body: JSON.stringify({ newPlanId }),\n    });\n    return await parseApiResponse<Subscription>(response);\n  },\n\n  /**\n   * Extend subscription\n   */\n  async extend(id: number, data: {\n    newEndDate: Date | string;\n    amount: number;\n    method: string;\n    description?: string;\n  }): Promise<ApiResponse<Subscription>> {\n    const response = await authenticatedFetch(apiUrls.subscriptions.extend(id), {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n    return await parseApiResponse<Subscription>(response);\n  },\n\n  /**\n   * Get subscription status for current user\n   * Returns computed subscription status with single source of truth\n   */\n  async getCurrentUserSubscriptionStatus(): Promise<ApiResponse<{\n    // Merchant info\n    merchantId: number;\n    merchantName: string;\n    merchantEmail: string;\n    \n    // Computed status (single source of truth)\n    status: 'CANCELED' | 'EXPIRED' | 'PAST_DUE' | 'PAUSED' | 'TRIAL' | 'ACTIVE' | 'UNKNOWN';\n    statusReason: string;\n    hasAccess: boolean;\n    daysRemaining: number | null;\n    isExpiringSoon: boolean;\n    \n    // Database status (for reference)\n    dbStatus: string;\n    \n    // Subscription details\n    subscriptionId: number;\n    currentPeriodStart: string | null;\n    currentPeriodEnd: string | null;\n    trialStart: string | null;\n    trialEnd: string | null;\n    \n    // Plan info\n    planId: number | null;\n    planName: string;\n    planDescription: string;\n    planPrice: number;\n    planCurrency: string;\n    planTrialDays: number;\n    \n    // Billing info\n    billingAmount: number;\n    billingCurrency: string;\n    billingInterval: string;\n    billingIntervalCount: number;\n    \n    // Cancellation info\n    cancelAtPeriodEnd: boolean;\n    canceledAt: string | null;\n    cancelReason: string | null;\n    \n    // Limits & usage\n    limits: Record<string, number>;\n    usage: {\n      outlets: number;\n      users: number;\n      products: number;\n      customers: number;\n    };\n    \n    // Features\n    features: string[];\n  }>> {\n    const response = await authenticatedFetch(apiUrls.subscriptions.status);\n    return await parseApiResponse(response);\n  },\n\n  /**\n   * Get subscription status by merchant ID\n   */\n  async getSubscriptionStatus(merchantId: number): Promise<ApiResponse<{\n    status: string;\n    planName: string;\n    endDate?: Date | string;\n    nextBillingDate?: Date | string;\n    amount: number;\n    currency: string;\n    autoRenew: boolean;\n  }>> {\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.status}?merchantId=${merchantId}`);\n    return await parseApiResponse(response);\n  },\n\n  /**\n   * Get subscriptions by merchant\n   */\n  async getSubscriptionsByMerchant(merchantId: number): Promise<ApiResponse<Subscription[]>> {\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.list}?merchantId=${merchantId}`);\n    return await parseApiResponse<Subscription[]>(response);\n  },\n\n  /**\n   * Get subscription statistics\n   */\n  async getSubscriptionStats(): Promise<ApiResponse<any>> {\n    const response = await authenticatedFetch(apiUrls.subscriptions.stats);\n    return await parseApiResponse<any>(response);\n  },\n\n  /**\n   * Pause/Suspend subscription\n   */\n  async suspend(id: number, data: { reason?: string } = {}): Promise<ApiResponse<Subscription>> {\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.get(id)}/pause`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n    return await parseApiResponse<Subscription>(response);\n  },\n\n  /**\n   * Resume subscription\n   */\n  async resume(id: number, data: { reason?: string } = {}): Promise<ApiResponse<Subscription>> {\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.get(id)}/resume`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n    return await parseApiResponse<Subscription>(response);\n  },\n\n  /**\n   * Get subscription activities\n   */\n  async getActivities(id: number, limit: number = 20): Promise<ApiResponse<any[]>> {\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.get(id)}/activities?limit=${limit}`);\n    return await parseApiResponse<any[]>(response);\n  },\n\n  /**\n   * Get subscription payments\n   */\n  async getPayments(id: number, limit: number = 20): Promise<ApiResponse<any[]>> {\n    const response = await authenticatedFetch(`${apiUrls.subscriptions.get(id)}/payments?limit=${limit}`);\n    return await parseApiResponse<any[]>(response);\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\nimport type { ApiResponse } from '../core';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface BackupInfo {\n  id: string;\n  filename: string;\n  size: number;\n  createdAt: string;\n  type: 'full' | 'incremental';\n  status: 'completed' | 'failed' | 'in_progress';\n}\n\nexport interface BackupSchedule {\n  id: string;\n  name: string;\n  frequency: 'daily' | 'weekly' | 'monthly';\n  time: string;\n  enabled: boolean;\n  lastRun?: string;\n  nextRun?: string;\n}\n\nexport interface BackupVerification {\n  id: string;\n  backupId: string;\n  status: 'verified' | 'failed' | 'pending';\n  checksum: string;\n  verifiedAt?: string;\n  error?: string;\n}\n\nexport interface SystemStats {\n  totalBackups: number;\n  totalSize: number;\n  lastBackup?: string;\n  nextScheduledBackup?: string;\n  diskUsage: {\n    used: number;\n    available: number;\n    total: number;\n  };\n}\n\n// ============================================================================\n// SYSTEM API CLIENT\n// ============================================================================\n\n/**\n * System API client for system administration operations\n */\nexport const systemApi = {\n  /**\n   * Get all backups\n   */\n  async getBackups(): Promise<ApiResponse<{ backups: BackupInfo[] }>> {\n    const response = await authenticatedFetch(apiUrls.system?.backup || '/api/system/backup');\n    return await parseApiResponse<{ backups: BackupInfo[] }>(response);\n  },\n\n  /**\n   * Create a new backup\n   */\n  async createBackup(type: 'full' | 'incremental' = 'full'): Promise<ApiResponse<{ backupId: string }>> {\n    const response = await authenticatedFetch(apiUrls.system?.backup || '/api/system/backup', {\n      method: 'POST',\n      body: JSON.stringify({ type }),\n    });\n    return await parseApiResponse<{ backupId: string }>(response);\n  },\n\n  /**\n   * Download a backup\n   */\n  async downloadBackup(backupId: string): Promise<Response> {\n    return await authenticatedFetch(`${apiUrls.system?.backup || '/api/system/backup'}/${backupId}/download`);\n  },\n\n  /**\n   * Delete a backup\n   */\n  async deleteBackup(backupId: string): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(`${apiUrls.system?.backup || '/api/system/backup'}/${backupId}`, {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Get backup schedules\n   */\n  async getBackupSchedules(): Promise<ApiResponse<{ schedules: BackupSchedule[] }>> {\n    const response = await authenticatedFetch(apiUrls.system?.backupSchedule || '/api/system/backup/schedule');\n    return await parseApiResponse<{ schedules: BackupSchedule[] }>(response);\n  },\n\n  /**\n   * Create a backup schedule\n   */\n  async createBackupSchedule(schedule: Omit<BackupSchedule, 'id'>): Promise<ApiResponse<{ scheduleId: string }>> {\n    const response = await authenticatedFetch(apiUrls.system?.backupSchedule || '/api/system/backup/schedule', {\n      method: 'POST',\n      body: JSON.stringify(schedule),\n    });\n    return await parseApiResponse<{ scheduleId: string }>(response);\n  },\n\n  /**\n   * Update a backup schedule\n   */\n  async updateBackupSchedule(scheduleId: string, schedule: Partial<BackupSchedule>): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(`${apiUrls.system?.backupSchedule || '/api/system/backup/schedule'}/${scheduleId}`, {\n      method: 'PUT',\n      body: JSON.stringify(schedule),\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Delete a backup schedule\n   */\n  async deleteBackupSchedule(scheduleId: string): Promise<ApiResponse<{ message: string }>> {\n    const response = await authenticatedFetch(`${apiUrls.system?.backupSchedule || '/api/system/backup/schedule'}/${scheduleId}`, {\n      method: 'DELETE',\n    });\n    return await parseApiResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Verify a backup\n   */\n  async verifyBackup(backupId: string): Promise<ApiResponse<BackupVerification>> {\n    const response = await authenticatedFetch(`${apiUrls.system?.backupVerify || '/api/system/backup/verify'}`, {\n      method: 'POST',\n      body: JSON.stringify({ backupId }),\n    });\n    return await parseApiResponse<BackupVerification>(response);\n  },\n\n  /**\n   * Get system statistics\n   */\n  async getSystemStats(): Promise<ApiResponse<SystemStats>> {\n    const response = await authenticatedFetch(apiUrls.system?.stats || '/api/system/stats');\n    return await parseApiResponse<SystemStats>(response);\n  },\n\n  /**\n   * Get system health status\n   */\n  async getSystemHealth(): Promise<ApiResponse<{\n    status: 'healthy' | 'warning' | 'critical';\n    services: Array<{\n      name: string;\n      status: 'up' | 'down' | 'degraded';\n      lastCheck: string;\n    }>;\n    uptime: number;\n  }>> {\n    const response = await authenticatedFetch(apiUrls.system?.health || '/api/system/health');\n    return await parseApiResponse<{\n      status: 'healthy' | 'warning' | 'critical';\n      services: Array<{\n        name: string;\n        status: 'up' | 'down' | 'degraded';\n        lastCheck: string;\n      }>;\n      uptime: number;\n    }>(response);\n  },\n\n  /**\n   * Get system logs\n   */\n  async getSystemLogs(page: number = 1, limit: number = 50, level?: string): Promise<ApiResponse<{\n    logs: Array<{\n      id: string;\n      level: string;\n      message: string;\n      timestamp: string;\n      source: string;\n    }>;\n    total: number;\n    page: number;\n    limit: number;\n  }>> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString(),\n    });\n    if (level) params.append('level', level);\n\n    const response = await authenticatedFetch(`${apiUrls.system?.logs || '/api/system/logs'}?${params.toString()}`);\n    return await parseApiResponse<{\n      logs: Array<{\n        id: string;\n        level: string;\n        message: string;\n        timestamp: string;\n        source: string;\n      }>;\n      total: number;\n      page: number;\n      limit: number;\n    }>(response);\n  }\n};\n","import { authenticatedFetch, parseApiResponse } from '../core';\nimport { apiUrls } from '../config/api';\n\n// Types for calendar API\nexport interface CalendarOrderSummary {\n  id: number;\n  orderNumber: string;\n  customerName: string;\n  customerPhone?: string;\n  productName: string;\n  productCount?: number;\n  totalAmount: number;\n  status: string;\n  outletName?: string;\n  notes?: string;\n  pickupPlanAt?: string;\n  returnPlanAt?: string;\n  isOverdue?: boolean;\n  duration?: number;\n}\n\nexport interface DayOrders {\n  pickups: CalendarOrderSummary[];\n  total: number;\n}\n\nexport interface CalendarResponse {\n  [dateKey: string]: DayOrders;\n}\n\nexport interface CalendarMeta {\n  month: number;\n  year: number;\n  totalDays: number;\n  stats: {\n    totalPickups: number;\n    totalOrders: number;\n  };\n  dateRange: {\n    start: string;\n    end: string;\n  };\n}\n\nexport interface CalendarApiResponse {\n  success: boolean;\n  data: CalendarResponse;\n  meta: CalendarMeta;\n  message: string;\n}\n\nexport interface CalendarQuery {\n  month: number;\n  year: number;\n  outletId?: number;\n  limit?: number;\n}\n\n/**\n *  Calendar API Client\n * \n * Specialized API for calendar display\n * - Optimized for monthly calendar views\n * - Groups orders by date\n * - Limits orders per day for performance\n */\nexport const calendarApi = {\n  /**\n   * Get calendar orders for a specific month\n   * \n   * @param query - Calendar query parameters\n   * @returns Promise with calendar data grouped by date\n   */\n  async getCalendarOrders(query: CalendarQuery): Promise<CalendarApiResponse> {\n    const searchParams = new URLSearchParams({\n      month: query.month.toString(),\n      year: query.year.toString(),\n      ...(query.outletId && { outletId: query.outletId.toString() }),\n      ...(query.limit && { limit: query.limit.toString() })\n    });\n\n    const response = await authenticatedFetch(`${apiUrls.calendar.orders}?${searchParams}`);\n    const result = await parseApiResponse<CalendarApiResponse>(response);\n    \n    // Return the calendar response data directly\n    if (result.success && result.data) {\n      return result.data;\n    }\n    \n    // Fallback structure if backend returns different format\n    return {\n      success: result.success,\n      data: {} as CalendarResponse,\n      meta: {\n        month: query.month,\n        year: query.year,\n        totalDays: 30,\n        stats: { totalPickups: 0, totalOrders: 0 },\n        dateRange: { start: '', end: '' }\n      },\n      message: result.message || 'Calendar data loaded'\n    };\n  },\n\n  /**\n   * Get calendar orders for current month\n   */\n  async getCurrentMonthOrders(outletId?: number): Promise<CalendarApiResponse> {\n    const now = new Date();\n    return this.getCalendarOrders({\n      month: now.getMonth() + 1, // JavaScript months are 0-based\n      year: now.getFullYear(),\n      outletId,\n      limit: 4\n    });\n  },\n\n  /**\n   * Get calendar orders for next month\n   */\n  async getNextMonthOrders(outletId?: number): Promise<CalendarApiResponse> {\n    const now = new Date();\n    const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);\n    return this.getCalendarOrders({\n      month: nextMonth.getMonth() + 1,\n      year: nextMonth.getFullYear(),\n      outletId,\n      limit: 4\n    });\n  },\n\n  /**\n   * Get calendar orders for previous month\n   */\n  async getPreviousMonthOrders(outletId?: number): Promise<CalendarApiResponse> {\n    const now = new Date();\n    const prevMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n    return this.getCalendarOrders({\n      month: prevMonth.getMonth() + 1,\n      year: prevMonth.getFullYear(),\n      outletId,\n      limit: 4\n    });\n  }\n};\n\nexport default calendarApi;\n","import { API } from '@rentalshop/constants';\n\n// ============================================================================\n// TYPES & INTERFACES\n// ============================================================================\n\nexport interface UploadResponse {\n  success: boolean;\n  data?: {\n    url: string;\n    publicId: string;\n    width: number;\n    height: number;\n    format: string;\n    size: number;\n    uploadMethod?: 'cloudinary' | 'local' | 'base64';\n  };\n  message?: string;\n  error?: string;\n}\n\nexport interface UploadProgress {\n  loaded: number;\n  total: number;\n  percentage: number;\n  stage: 'preparing' | 'uploading' | 'processing' | 'complete';\n}\n\nexport interface UploadOptions {\n  onProgress?: (progress: UploadProgress) => void;\n  maxFileSize?: number; // in bytes\n  allowedTypes?: string[];\n  folder?: string;\n  useBase64Fallback?: boolean; // Enable base64 fallback if upload fails\n  quality?: number; // Image quality (0-1)\n  maxWidth?: number; // Max width for client-side resize\n  maxHeight?: number; // Max height for client-side resize\n}\n\nexport interface ImageValidationResult {\n  isValid: boolean;\n  error?: string;\n  warnings?: string[];\n}\n\nexport interface ImageDimensions {\n  width: number;\n  height: number;\n}\n\n// ============================================================================\n// CONSTANTS\n// ============================================================================\n\nconst DEFAULT_MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB\nconst DEFAULT_ALLOWED_TYPES = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'];\nconst WARNING_SIZE_THRESHOLD = 2 * 1024 * 1024; // 2MB\nconst MIN_FILE_SIZE = 100; // 100 bytes\n\n// ============================================================================\n// VALIDATION FUNCTIONS\n// ============================================================================\n\n/**\n * Validate image file before upload\n * \n * **Why we validate:**\n * - Prevents uploading malicious files (security)\n * - Ensures quality standards (user experience)\n * - Catches errors early before expensive upload operations\n * - Provides helpful feedback to users about issues\n */\nexport function validateImage(file: File, options: UploadOptions = {}): ImageValidationResult {\n  const {\n    maxFileSize = DEFAULT_MAX_FILE_SIZE,\n    allowedTypes = DEFAULT_ALLOWED_TYPES\n  } = options;\n\n  const warnings: string[] = [];\n  let error: string | undefined;\n\n  // Check file type\n  if (!allowedTypes.includes(file.type)) {\n    error = `Invalid file type \"${file.type}\". Allowed types: ${allowedTypes.join(', ')}`;\n    return { isValid: false, error };\n  }\n\n  // Check file size (reject if too large)\n  if (file.size > maxFileSize) {\n    error = `File size (${(file.size / 1024 / 1024).toFixed(2)}MB) exceeds maximum allowed size of ${(maxFileSize / 1024 / 1024).toFixed(2)}MB`;\n    return { isValid: false, error };\n  }\n\n  // Check if file is too small (likely corrupted)\n  if (file.size < MIN_FILE_SIZE) {\n    error = 'File size is too small. The file may be corrupted or empty.';\n    return { isValid: false, error };\n  }\n\n  // Warn if file is large but still acceptable\n  if (file.size > WARNING_SIZE_THRESHOLD) {\n    warnings.push(`Large file size (${(file.size / 1024 / 1024).toFixed(2)}MB) may slow down page loading. Consider compressing the image.`);\n  }\n\n  return {\n    isValid: true,\n    warnings: warnings.length > 0 ? warnings : undefined\n  };\n}\n\n// ============================================================================\n// IMAGE OPTIMIZATION FUNCTIONS\n// ============================================================================\n\n/**\n * Get image dimensions from file\n */\nexport function getImageDimensions(file: File): Promise<ImageDimensions> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const url = URL.createObjectURL(file);\n\n    img.onload = () => {\n      URL.revokeObjectURL(url);\n      resolve({\n        width: img.width,\n        height: img.height\n      });\n    };\n\n    img.onerror = () => {\n      URL.revokeObjectURL(url);\n      reject(new Error('Failed to load image'));\n    };\n\n    img.src = url;\n  });\n}\n\n/**\n * Resize image on client-side before upload\n * \n * **Why client-side resize:**\n * - Reduces upload time and bandwidth\n * - Faster user experience\n * - Less server load\n * - Still have server-side optimization as backup\n */\nexport async function resizeImage(\n  file: File,\n  maxWidth: number = 1200,\n  maxHeight: number = 900,\n  quality: number = 0.85\n): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) {\n      reject(new Error('Canvas not supported'));\n      return;\n    }\n\n    img.onload = () => {\n      let { width, height } = img;\n\n      // Calculate new dimensions while maintaining aspect ratio\n      if (width > maxWidth || height > maxHeight) {\n        const ratio = Math.min(maxWidth / width, maxHeight / height);\n        width = Math.floor(width * ratio);\n        height = Math.floor(height * ratio);\n      }\n\n      canvas.width = width;\n      canvas.height = height;\n\n      // Draw image on canvas\n      ctx.drawImage(img, 0, 0, width, height);\n\n      // Convert canvas to blob\n      canvas.toBlob(\n        (blob) => {\n          if (!blob) {\n            reject(new Error('Failed to create blob'));\n            return;\n          }\n\n          // Create new file from blob\n          const resizedFile = new File([blob], file.name, {\n            type: file.type,\n            lastModified: Date.now()\n          });\n\n          resolve(resizedFile);\n        },\n        file.type,\n        quality\n      );\n    };\n\n    img.onerror = () => {\n      reject(new Error('Failed to load image'));\n    };\n\n    img.src = URL.createObjectURL(file);\n  });\n}\n\n/**\n * Convert file to base64 string\n */\nexport function fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    \n    reader.onload = () => {\n      resolve(reader.result as string);\n    };\n    \n    reader.onerror = () => {\n      reject(new Error('Failed to read file'));\n    };\n    \n    reader.readAsDataURL(file);\n  });\n}\n\n// ============================================================================\n// UPLOAD FUNCTIONS\n// ============================================================================\n\n/**\n * Upload image with XMLHttpRequest for progress tracking\n * \n * **Why XMLHttpRequest instead of fetch:**\n * - XMLHttpRequest provides native progress events\n * - fetch() doesn't support upload progress tracking\n * - More control over upload lifecycle\n * - Better error handling for network issues\n */\nfunction uploadWithProgress(\n  url: string,\n  formData: FormData,\n  token: string,\n  onProgress?: (progress: UploadProgress) => void\n): Promise<UploadResponse> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n\n    // Track upload progress\n    xhr.upload.addEventListener('progress', (e) => {\n      if (e.lengthComputable && onProgress) {\n        onProgress({\n          loaded: e.loaded,\n          total: e.total,\n          percentage: Math.round((e.loaded / e.total) * 100),\n          stage: 'uploading'\n        });\n      }\n    });\n\n    // Handle upload complete\n    xhr.addEventListener('load', () => {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        try {\n          const result = JSON.parse(xhr.responseText);\n          \n          if (onProgress) {\n            onProgress({\n              loaded: 100,\n              total: 100,\n              percentage: 100,\n              stage: 'complete'\n            });\n          }\n          \n          resolve(result);\n        } catch (error) {\n          reject(new Error('Invalid response from server'));\n        }\n      } else {\n        try {\n          const error = JSON.parse(xhr.responseText);\n          reject(new Error(error.message || 'Upload failed'));\n        } catch {\n          reject(new Error(`Upload failed with status ${xhr.status}`));\n        }\n      }\n    });\n\n    // Handle network errors\n    xhr.addEventListener('error', () => {\n      reject(new Error('Network error occurred'));\n    });\n\n    // Handle timeout\n    xhr.addEventListener('timeout', () => {\n      reject(new Error('Upload timeout'));\n    });\n\n    // Configure request\n    xhr.open('POST', url);\n    xhr.setRequestHeader('Authorization', `Bearer ${token}`);\n    xhr.timeout = 60000; // 60 second timeout\n\n    // Start upload\n    if (onProgress) {\n      onProgress({\n        loaded: 0,\n        total: 100,\n        percentage: 0,\n        stage: 'preparing'\n      });\n    }\n\n    xhr.send(formData);\n  });\n}\n\n/**\n * Upload image to server with progress tracking, validation, and fallbacks\n * \n * **Complete upload flow:**\n * 1. Validate image (type, size, quality)\n * 2. Optional client-side resize/optimization\n * 3. Upload with progress tracking\n * 4. Automatic fallback to base64 if upload fails (optional)\n * \n * @param file - Image file to upload\n * @param token - Authentication token\n * @param options - Upload configuration options\n */\nexport async function uploadImage(\n  file: File,\n  token: string,\n  options: UploadOptions = {}\n): Promise<UploadResponse> {\n  const {\n    onProgress,\n    maxFileSize = DEFAULT_MAX_FILE_SIZE,\n    allowedTypes = DEFAULT_ALLOWED_TYPES,\n    folder = 'rentalshop/products',\n    useBase64Fallback = true,\n    quality = 0.85,\n    maxWidth,\n    maxHeight\n  } = options;\n\n  try {\n    // Stage 1: Validate image\n    if (onProgress) {\n      onProgress({ loaded: 0, total: 100, percentage: 0, stage: 'preparing' });\n    }\n\n    const validation = validateImage(file, { maxFileSize, allowedTypes });\n    if (!validation.isValid) {\n      return {\n        success: false,\n        error: validation.error || 'Image validation failed'\n      };\n    }\n\n    // Show warnings if any\n    if (validation.warnings && validation.warnings.length > 0) {\n      console.warn('Image upload warnings:', validation.warnings);\n    }\n\n    // Stage 2: Optional client-side resize\n    let fileToUpload = file;\n    if (maxWidth && maxHeight) {\n      try {\n        const dimensions = await getImageDimensions(file);\n        if (dimensions.width > maxWidth || dimensions.height > maxHeight) {\n          console.log(`Resizing image from ${dimensions.width}x${dimensions.height} to fit ${maxWidth}x${maxHeight}`);\n          fileToUpload = await resizeImage(file, maxWidth, maxHeight, quality);\n          console.log(`Image resized. Size reduced from ${(file.size / 1024).toFixed(2)}KB to ${(fileToUpload.size / 1024).toFixed(2)}KB`);\n        }\n      } catch (resizeError) {\n        console.warn('Client-side resize failed, uploading original:', resizeError);\n        // Continue with original file if resize fails\n      }\n    }\n\n    // Stage 3: Upload to server\n    const formData = new FormData();\n    formData.append('image', fileToUpload);\n    formData.append('folder', folder);\n    formData.append('useBase64', useBase64Fallback.toString());\n\n    const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3002';\n    const uploadUrl = `${apiUrl}/api/upload/image`;\n\n    const result = await uploadWithProgress(uploadUrl, formData, token, onProgress);\n\n    return result;\n\n  } catch (error) {\n    console.error('Upload error:', error);\n\n    // Stage 4: Fallback to base64 if enabled\n    if (useBase64Fallback) {\n      try {\n        console.log('Upload failed, attempting base64 fallback...');\n        const base64 = await fileToBase64(file);\n        \n        return {\n          success: true,\n          data: {\n            url: base64,\n            publicId: `base64-${Date.now()}`,\n            width: 0,\n            height: 0,\n            format: file.type.split('/')[1] || 'unknown',\n            size: file.size,\n            uploadMethod: 'base64'\n          },\n          message: 'Image uploaded using base64 fallback'\n        };\n      } catch (base64Error) {\n        console.error('Base64 fallback failed:', base64Error);\n      }\n    }\n\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Upload failed'\n    };\n  }\n}\n\n/**\n * Upload multiple images with individual progress tracking\n * \n * @param files - Array of image files to upload\n * @param token - Authentication token\n * @param options - Upload configuration options\n * @param onFileProgress - Callback for individual file progress (optional)\n */\nexport async function uploadImages(\n  files: File[],\n  token: string,\n  options: UploadOptions = {},\n  onFileProgress?: (fileIndex: number, progress: UploadProgress) => void\n): Promise<UploadResponse[]> {\n  const uploadPromises = files.map((file, index) => {\n    const fileOptions: UploadOptions = {\n      ...options,\n      onProgress: onFileProgress ? (progress) => onFileProgress(index, progress) : undefined\n    };\n    return uploadImage(file, token, fileOptions);\n  });\n\n  return Promise.all(uploadPromises);\n}\n\n/**\n * Cancel ongoing upload (for future implementation with AbortController)\n */\nexport function createUploadController() {\n  const controller = new AbortController();\n  \n  return {\n    signal: controller.signal,\n    cancel: () => controller.abort()\n  };\n}\n","// ============================================================================\n// DATABASE CONFIGURATION\n// ============================================================================\n\nimport { Environment } from './environment';\n\nexport interface DatabaseConfig {\n  url: string;\n  provider: 'sqlite' | 'postgresql';\n}\n\nexport function getDatabaseConfig(): DatabaseConfig {\n  const nodeEnv = (process.env.NODE_ENV || 'local') as 'local' | 'development' | 'production' | 'test';\n  \n  switch (nodeEnv) {\n    case 'local':\n      return {\n        url: process.env.DATABASE_URL_LOCAL || 'file:./dev.db',\n        provider: 'sqlite'\n      };\n    \n    case 'development':\n      return {\n        url: process.env.DATABASE_URL || '',\n        provider: 'postgresql'\n      };\n    \n    case 'production':\n      return {\n        url: process.env.DATABASE_URL || '',\n        provider: 'postgresql'\n      };\n    \n    default:\n      return {\n        url: process.env.DATABASE_URL_LOCAL || 'file:./dev.db',\n        provider: 'sqlite'\n      };\n  }\n}\n\nexport function isLocalEnvironment(): boolean {\n  const nodeEnv = process.env.NODE_ENV;\n  return !nodeEnv || nodeEnv === 'development';\n}\n\nexport function isDevelopmentEnvironment(): boolean {\n  return process.env.NODE_ENV === 'development';\n}\n\nexport function isProductionEnvironment(): boolean {\n  return process.env.NODE_ENV === 'production';\n}\n\n// Export the config instance\nexport const databaseConfig = getDatabaseConfig();\n","// ============================================================================\n// ENVIRONMENT CONFIGURATION\n// ============================================================================\n\nexport type Environment = 'development' | 'production' | 'test' | 'local';\n\n/**\n * Get the appropriate client URL based on environment\n */\nexport const getClientUrl = (): string => {\n  if (process.env.NODE_ENV === 'production') {\n    return process.env.CLIENT_URL_PROD || process.env.NEXT_PUBLIC_CLIENT_URL || 'https://rentalshop.com';\n  }\n  \n  if (process.env.NODE_ENV === 'development') {\n    return process.env.CLIENT_URL_DEV || process.env.NEXT_PUBLIC_CLIENT_URL || 'http://localhost:3000';\n  }\n  \n  return process.env.CLIENT_URL_LOCAL || process.env.NEXT_PUBLIC_CLIENT_URL || 'http://localhost:3000';\n};\n\n/**\n * Get the appropriate admin URL based on environment\n */\nexport const getAdminUrl = (): string => {\n  if (process.env.NODE_ENV === 'production') {\n    return process.env.ADMIN_URL_PROD || process.env.NEXT_PUBLIC_ADMIN_URL || 'https://admin.rentalshop.com';\n  }\n  \n  if (process.env.NODE_ENV === 'development') {\n    return process.env.ADMIN_URL_DEV || process.env.NEXT_PUBLIC_ADMIN_URL || 'http://localhost:3001';\n  }\n  \n  return process.env.ADMIN_URL_LOCAL || process.env.NEXT_PUBLIC_ADMIN_URL || 'http://localhost:3001';\n};\n\n\n\n/**\n * Get the appropriate mobile URL based on environment\n */\nexport const getMobileUrl = (): string => {\n  if (process.env.NODE_ENV === 'production') {\n    return process.env.MOBILE_URL_PROD || process.env.NEXT_PUBLIC_MOBILE_URL || 'https://mobile.rentalshop.com';\n  }\n  \n  if (process.env.NODE_ENV === 'development') {\n    return process.env.MOBILE_URL_DEV || process.env.NEXT_PUBLIC_MOBILE_URL || 'http://localhost:3003';\n  }\n  \n  return process.env.MOBILE_URL_LOCAL || process.env.NEXT_PUBLIC_MOBILE_URL || 'http://localhost:3003';\n};\n\n/**\n * Get all URLs for the current environment\n */\nexport const getEnvironmentUrls = () => ({\n  client: getClientUrl(),\n  admin: getAdminUrl(),\n  mobile: getMobileUrl(),\n});\n\n/**\n * Check if running in browser environment\n */\nexport const isBrowser = (): boolean => {\n  return typeof window !== 'undefined';\n};\n\n/**\n * Check if running in server environment\n */\nexport const isServer = (): boolean => {\n  return typeof window === 'undefined';\n};\n\n/**\n * Check if running in development mode\n */\nexport const isDev = (): boolean => {\n  return process.env.NODE_ENV === 'development';\n};\n\n/**\n * Check if running in production mode\n */\nexport const isProd = (): boolean => {\n  return process.env.NODE_ENV === 'production';\n};\n\n/**\n * Check if running in test mode\n */\nexport const isTest = (): boolean => {\n  return process.env.NODE_ENV === 'test';\n};\n","// ============================================================================\n// PERFORMANCE MONITORING UTILITIES\n// ============================================================================\n// Utilities for monitoring and optimizing database query performance\n\nexport interface PerformanceMetrics {\n  queryName: string;\n  duration: number;\n  timestamp: Date;\n  slowQuery?: boolean;\n  recordCount?: number;\n  error?: string;\n}\n\nclass PerformanceMonitor {\n  private static metrics: PerformanceMetrics[] = [];\n  private static slowQueryThreshold = 1000; // 1 second\n  private static maxMetrics = 1000; // Keep last 1000 metrics\n\n  /**\n   * Measure query performance with automatic logging\n   */\n  static async measureQuery<T>(\n    name: string, \n    query: () => Promise<T>,\n    recordCount?: number\n  ): Promise<T> {\n    const start = Date.now();\n    const timestamp = new Date();\n    \n    try {\n      const result = await query();\n      const duration = Date.now() - start;\n      \n      const metric: PerformanceMetrics = {\n        queryName: name,\n        duration,\n        timestamp,\n        slowQuery: duration > this.slowQueryThreshold,\n        recordCount\n      };\n\n      this.logMetric(metric);\n      return result;\n      \n    } catch (error) {\n      const duration = Date.now() - start;\n      \n      const metric: PerformanceMetrics = {\n        queryName: name,\n        duration,\n        timestamp,\n        slowQuery: true,\n        recordCount,\n        error: error instanceof Error ? error.message : String(error)\n      };\n\n      this.logMetric(metric);\n      throw error;\n    }\n  }\n\n  /**\n   * Log performance metric\n   */\n  private static logMetric(metric: PerformanceMetrics) {\n    // Add to metrics array\n    this.metrics.push(metric);\n    \n    // Keep only last N metrics\n    if (this.metrics.length > this.maxMetrics) {\n      this.metrics = this.metrics.slice(-this.maxMetrics);\n    }\n\n    // Console logging\n    const logLevel = metric.slowQuery ? 'warn' : 'log';\n    const message = metric.error \n      ? `[PERF ERROR] ${metric.queryName}: ${metric.duration}ms - ${metric.error}`\n      : `[PERF] ${metric.queryName}: ${metric.duration}ms${metric.recordCount ? ` (${metric.recordCount} records)` : ''}`;\n\n    console[logLevel](message);\n\n    // Additional warning for very slow queries\n    if (metric.duration > 5000) {\n      console.error(`[CRITICAL SLOW QUERY] ${metric.queryName}: ${metric.duration}ms`);\n    }\n  }\n\n  /**\n   * Get performance statistics\n   */\n  static getStats(queryName?: string): {\n    totalQueries: number;\n    slowQueries: number;\n    averageDuration: number;\n    slowestQuery: PerformanceMetrics | null;\n    recentSlowQueries: PerformanceMetrics[];\n  } {\n    const metrics = queryName \n      ? this.metrics.filter(m => m.queryName === queryName)\n      : this.metrics;\n\n    const slowQueries = metrics.filter(m => m.slowQuery);\n    const averageDuration = metrics.length > 0 \n      ? metrics.reduce((sum, m) => sum + m.duration, 0) / metrics.length \n      : 0;\n\n    const slowestQuery = metrics.length > 0 \n      ? metrics.reduce((prev, current) => prev.duration > current.duration ? prev : current)\n      : null;\n\n    const recentSlowQueries = slowQueries.slice(-10); // Last 10 slow queries\n\n    return {\n      totalQueries: metrics.length,\n      slowQueries: slowQueries.length,\n      averageDuration: Math.round(averageDuration),\n      slowestQuery,\n      recentSlowQueries\n    };\n  }\n\n  /**\n   * Get slow queries for analysis\n   */\n  static getSlowQueries(threshold?: number): PerformanceMetrics[] {\n    const limit = threshold || this.slowQueryThreshold;\n    return this.metrics.filter(m => m.duration > limit);\n  }\n\n  /**\n   * Clear performance metrics\n   */\n  static clearMetrics() {\n    this.metrics = [];\n  }\n\n  /**\n   * Export metrics for analysis\n   */\n  static exportMetrics(): PerformanceMetrics[] {\n    return [...this.metrics];\n  }\n\n  /**\n   * Set slow query threshold\n   */\n  static setSlowQueryThreshold(threshold: number) {\n    this.slowQueryThreshold = threshold;\n  }\n}\n\n/**\n * Database connection monitoring\n */\nexport class DatabaseMonitor {\n  private static connectionCount = 0;\n  private static activeQueries = 0;\n\n  /**\n   * Track database connection\n   */\n  static trackConnection() {\n    this.connectionCount++;\n    console.log(`[DB] Connection opened. Total: ${this.connectionCount}`);\n  }\n\n  /**\n   * Track query start\n   */\n  static trackQueryStart(queryName: string) {\n    this.activeQueries++;\n    console.log(`[DB] Query started: ${queryName}. Active: ${this.activeQueries}`);\n  }\n\n  /**\n   * Track query end\n   */\n  static trackQueryEnd(queryName: string) {\n    this.activeQueries = Math.max(0, this.activeQueries - 1);\n    console.log(`[DB] Query ended: ${queryName}. Active: ${this.activeQueries}`);\n  }\n\n  /**\n   * Get database stats\n   */\n  static getStats() {\n    return {\n      connectionCount: this.connectionCount,\n      activeQueries: this.activeQueries\n    };\n  }\n}\n\n/**\n * Memory usage monitoring\n */\nexport class MemoryMonitor {\n  /**\n   * Get current memory usage\n   */\n  static getMemoryUsage(): {\n    used: number;\n    total: number;\n    percentage: number;\n  } {\n    const usage = process.memoryUsage();\n    const used = usage.heapUsed;\n    const total = usage.heapTotal;\n    const percentage = (used / total) * 100;\n\n    return {\n      used: Math.round(used / 1024 / 1024), // MB\n      total: Math.round(total / 1024 / 1024), // MB\n      percentage: Math.round(percentage)\n    };\n  }\n\n  /**\n   * Log memory usage\n   */\n  static logMemoryUsage(context?: string) {\n    const memory = this.getMemoryUsage();\n    const contextStr = context ? `[${context}] ` : '';\n    console.log(`${contextStr}Memory: ${memory.used}MB / ${memory.total}MB (${memory.percentage}%)`);\n  }\n\n  /**\n   * Check if memory usage is high\n   */\n  static isHighMemoryUsage(threshold = 80): boolean {\n    const memory = this.getMemoryUsage();\n    return memory.percentage > threshold;\n  }\n}\n\n/**\n * API response time monitoring\n */\nexport class APIMonitor {\n  /**\n   * Measure API endpoint performance\n   */\n  static async measureEndpoint<T>(\n    method: string,\n    path: string,\n    handler: () => Promise<T>\n  ): Promise<T> {\n    const start = Date.now();\n    const timestamp = new Date();\n    \n    try {\n      const result = await handler();\n      const duration = Date.now() - start;\n      \n      console.log(`[API] ${method} ${path}: ${duration}ms`);\n      \n      // Warn for slow endpoints\n      if (duration > 3000) {\n        console.warn(`[SLOW API] ${method} ${path}: ${duration}ms`);\n      }\n      \n      return result;\n      \n    } catch (error) {\n      const duration = Date.now() - start;\n      console.error(`[API ERROR] ${method} ${path}: ${duration}ms - ${error}`);\n      throw error;\n    }\n  }\n}\n\nexport { PerformanceMonitor };\nexport default PerformanceMonitor;\n"]}