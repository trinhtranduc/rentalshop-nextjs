var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// ../../node_modules/property-expr/index.js
var require_property_expr = __commonJS({
  "../../node_modules/property-expr/index.js"(exports2, module2) {
    "use strict";
    function Cache(maxSize) {
      this._maxSize = maxSize;
      this.clear();
    }
    Cache.prototype.clear = function() {
      this._size = 0;
      this._values = /* @__PURE__ */ Object.create(null);
    };
    Cache.prototype.get = function(key) {
      return this._values[key];
    };
    Cache.prototype.set = function(key, value) {
      this._size >= this._maxSize && this.clear();
      if (!(key in this._values))
        this._size++;
      return this._values[key] = value;
    };
    var SPLIT_REGEX = /[^.^\]^[]+|(?=\[\]|\.\.)/g;
    var DIGIT_REGEX = /^\d+$/;
    var LEAD_DIGIT_REGEX = /^\d/;
    var SPEC_CHAR_REGEX = /[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g;
    var CLEAN_QUOTES_REGEX = /^\s*(['"]?)(.*?)(\1)\s*$/;
    var MAX_CACHE_SIZE = 512;
    var pathCache = new Cache(MAX_CACHE_SIZE);
    var setCache = new Cache(MAX_CACHE_SIZE);
    var getCache = new Cache(MAX_CACHE_SIZE);
    module2.exports = {
      Cache,
      split: split2,
      normalizePath: normalizePath2,
      setter: function(path) {
        var parts = normalizePath2(path);
        return setCache.get(path) || setCache.set(path, function setter(obj, value) {
          var index = 0;
          var len = parts.length;
          var data = obj;
          while (index < len - 1) {
            var part = parts[index];
            if (part === "__proto__" || part === "constructor" || part === "prototype") {
              return obj;
            }
            data = data[parts[index++]];
          }
          data[parts[index]] = value;
        });
      },
      getter: function(path, safe) {
        var parts = normalizePath2(path);
        return getCache.get(path) || getCache.set(path, function getter2(data) {
          var index = 0, len = parts.length;
          while (index < len) {
            if (data != null || !safe)
              data = data[parts[index++]];
            else
              return;
          }
          return data;
        });
      },
      join: function(segments) {
        return segments.reduce(function(path, part) {
          return path + (isQuoted(part) || DIGIT_REGEX.test(part) ? "[" + part + "]" : (path ? "." : "") + part);
        }, "");
      },
      forEach: function(path, cb, thisArg) {
        forEach2(Array.isArray(path) ? path : split2(path), cb, thisArg);
      }
    };
    function normalizePath2(path) {
      return pathCache.get(path) || pathCache.set(
        path,
        split2(path).map(function(part) {
          return part.replace(CLEAN_QUOTES_REGEX, "$2");
        })
      );
    }
    function split2(path) {
      return path.match(SPLIT_REGEX) || [""];
    }
    function forEach2(parts, iter, thisArg) {
      var len = parts.length, part, idx, isArray2, isBracket;
      for (idx = 0; idx < len; idx++) {
        part = parts[idx];
        if (part) {
          if (shouldBeQuoted(part)) {
            part = '"' + part + '"';
          }
          isBracket = isQuoted(part);
          isArray2 = !isBracket && /^\d+$/.test(part);
          iter.call(thisArg, part, isBracket, isArray2, idx, parts);
        }
      }
    }
    function isQuoted(str) {
      return typeof str === "string" && str && ["'", '"'].indexOf(str.charAt(0)) !== -1;
    }
    function hasLeadingNumber(part) {
      return part.match(LEAD_DIGIT_REGEX) && !part.match(DIGIT_REGEX);
    }
    function hasSpecialChars(part) {
      return SPEC_CHAR_REGEX.test(part);
    }
    function shouldBeQuoted(part) {
      return !isQuoted(part) && (hasLeadingNumber(part) || hasSpecialChars(part));
    }
  }
});

// ../../node_modules/tiny-case/index.js
var require_tiny_case = __commonJS({
  "../../node_modules/tiny-case/index.js"(exports2, module2) {
    "use strict";
    var reWords = /[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g;
    var words = (str) => str.match(reWords) || [];
    var upperFirst = (str) => str[0].toUpperCase() + str.slice(1);
    var join2 = (str, d2) => words(str).join(d2).toLowerCase();
    var camelCase2 = (str) => words(str).reduce(
      (acc, next) => `${acc}${!acc ? next.toLowerCase() : next[0].toUpperCase() + next.slice(1).toLowerCase()}`,
      ""
    );
    var pascalCase = (str) => upperFirst(camelCase2(str));
    var snakeCase2 = (str) => join2(str, "_");
    var kebabCase = (str) => join2(str, "-");
    var sentenceCase = (str) => upperFirst(join2(str, " "));
    var titleCase = (str) => words(str).map(upperFirst).join(" ");
    module2.exports = {
      words,
      upperFirst,
      camelCase: camelCase2,
      pascalCase,
      snakeCase: snakeCase2,
      kebabCase,
      sentenceCase,
      titleCase
    };
  }
});

// ../../node_modules/toposort/index.js
var require_toposort = __commonJS({
  "../../node_modules/toposort/index.js"(exports2, module2) {
    "use strict";
    module2.exports = function(edges) {
      return toposort2(uniqueNodes(edges), edges);
    };
    module2.exports.array = toposort2;
    function toposort2(nodes, edges) {
      var cursor = nodes.length, sorted = new Array(cursor), visited = {}, i = cursor, outgoingEdges = makeOutgoingEdges(edges), nodesHash = makeNodesHash(nodes);
      edges.forEach(function(edge) {
        if (!nodesHash.has(edge[0]) || !nodesHash.has(edge[1])) {
          throw new Error("Unknown node. There is an unknown node in the supplied edges.");
        }
      });
      while (i--) {
        if (!visited[i])
          visit(nodes[i], i, /* @__PURE__ */ new Set());
      }
      return sorted;
      function visit(node, i2, predecessors) {
        if (predecessors.has(node)) {
          var nodeRep;
          try {
            nodeRep = ", node was:" + JSON.stringify(node);
          } catch (e2) {
            nodeRep = "";
          }
          throw new Error("Cyclic dependency" + nodeRep);
        }
        if (!nodesHash.has(node)) {
          throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: " + JSON.stringify(node));
        }
        if (visited[i2])
          return;
        visited[i2] = true;
        var outgoing = outgoingEdges.get(node) || /* @__PURE__ */ new Set();
        outgoing = Array.from(outgoing);
        if (i2 = outgoing.length) {
          predecessors.add(node);
          do {
            var child = outgoing[--i2];
            visit(child, nodesHash.get(child), predecessors);
          } while (i2);
          predecessors.delete(node);
        }
        sorted[--cursor] = node;
      }
    }
    function uniqueNodes(arr) {
      var res = /* @__PURE__ */ new Set();
      for (var i = 0, len = arr.length; i < len; i++) {
        var edge = arr[i];
        res.add(edge[0]);
        res.add(edge[1]);
      }
      return Array.from(res);
    }
    function makeOutgoingEdges(arr) {
      var edges = /* @__PURE__ */ new Map();
      for (var i = 0, len = arr.length; i < len; i++) {
        var edge = arr[i];
        if (!edges.has(edge[0]))
          edges.set(edge[0], /* @__PURE__ */ new Set());
        if (!edges.has(edge[1]))
          edges.set(edge[1], /* @__PURE__ */ new Set());
        edges.get(edge[0]).add(edge[1]);
      }
      return edges;
    }
    function makeNodesHash(arr) {
      var res = /* @__PURE__ */ new Map();
      for (var i = 0, len = arr.length; i < len; i++) {
        res.set(arr[i], i);
      }
      return res;
    }
  }
});

// ../../node_modules/react-fast-compare/index.js
var require_react_fast_compare = __commonJS({
  "../../node_modules/react-fast-compare/index.js"(exports2, module2) {
    "use strict";
    var isArray2 = Array.isArray;
    var keyList = Object.keys;
    var hasProp = Object.prototype.hasOwnProperty;
    var hasElementType = typeof Element !== "undefined";
    function equal(a, b) {
      if (a === b)
        return true;
      if (a && b && typeof a == "object" && typeof b == "object") {
        var arrA = isArray2(a), arrB = isArray2(b), i, length, key;
        if (arrA && arrB) {
          length = a.length;
          if (length != b.length)
            return false;
          for (i = length; i-- !== 0; )
            if (!equal(a[i], b[i]))
              return false;
          return true;
        }
        if (arrA != arrB)
          return false;
        var dateA = a instanceof Date, dateB = b instanceof Date;
        if (dateA != dateB)
          return false;
        if (dateA && dateB)
          return a.getTime() == b.getTime();
        var regexpA = a instanceof RegExp, regexpB = b instanceof RegExp;
        if (regexpA != regexpB)
          return false;
        if (regexpA && regexpB)
          return a.toString() == b.toString();
        var keys2 = keyList(a);
        length = keys2.length;
        if (length !== keyList(b).length)
          return false;
        for (i = length; i-- !== 0; )
          if (!hasProp.call(b, keys2[i]))
            return false;
        if (hasElementType && a instanceof Element && b instanceof Element)
          return a === b;
        for (i = length; i-- !== 0; ) {
          key = keys2[i];
          if (key === "_owner" && a.$$typeof) {
            continue;
          } else {
            if (!equal(a[key], b[key]))
              return false;
          }
        }
        return true;
      }
      return a !== a && b !== b;
    }
    module2.exports = function exportedEqual(a, b) {
      try {
        return equal(a, b);
      } catch (error2) {
        if (error2.message && error2.message.match(/stack|recursion/i) || error2.number === -2146828260) {
          console.warn("Warning: react-fast-compare does not handle circular references.", error2.name, error2.message);
          return false;
        }
        throw error2;
      }
    };
  }
});

// ../../node_modules/react-is/cjs/react-is.production.min.js
var require_react_is_production_min = __commonJS({
  "../../node_modules/react-is/cjs/react-is.production.min.js"(exports2) {
    "use strict";
    var b = "function" === typeof Symbol && Symbol.for;
    var c = b ? Symbol.for("react.element") : 60103;
    var d2 = b ? Symbol.for("react.portal") : 60106;
    var e2 = b ? Symbol.for("react.fragment") : 60107;
    var f = b ? Symbol.for("react.strict_mode") : 60108;
    var g2 = b ? Symbol.for("react.profiler") : 60114;
    var h = b ? Symbol.for("react.provider") : 60109;
    var k2 = b ? Symbol.for("react.context") : 60110;
    var l = b ? Symbol.for("react.async_mode") : 60111;
    var m = b ? Symbol.for("react.concurrent_mode") : 60111;
    var n2 = b ? Symbol.for("react.forward_ref") : 60112;
    var p2 = b ? Symbol.for("react.suspense") : 60113;
    var q = b ? Symbol.for("react.suspense_list") : 60120;
    var r2 = b ? Symbol.for("react.memo") : 60115;
    var t2 = b ? Symbol.for("react.lazy") : 60116;
    var v2 = b ? Symbol.for("react.block") : 60121;
    var w2 = b ? Symbol.for("react.fundamental") : 60117;
    var x = b ? Symbol.for("react.responder") : 60118;
    var y = b ? Symbol.for("react.scope") : 60119;
    function z(a) {
      if ("object" === typeof a && null !== a) {
        var u = a.$$typeof;
        switch (u) {
          case c:
            switch (a = a.type, a) {
              case l:
              case m:
              case e2:
              case g2:
              case f:
              case p2:
                return a;
              default:
                switch (a = a && a.$$typeof, a) {
                  case k2:
                  case n2:
                  case t2:
                  case r2:
                  case h:
                    return a;
                  default:
                    return u;
                }
            }
          case d2:
            return u;
        }
      }
    }
    function A(a) {
      return z(a) === m;
    }
    exports2.AsyncMode = l;
    exports2.ConcurrentMode = m;
    exports2.ContextConsumer = k2;
    exports2.ContextProvider = h;
    exports2.Element = c;
    exports2.ForwardRef = n2;
    exports2.Fragment = e2;
    exports2.Lazy = t2;
    exports2.Memo = r2;
    exports2.Portal = d2;
    exports2.Profiler = g2;
    exports2.StrictMode = f;
    exports2.Suspense = p2;
    exports2.isAsyncMode = function(a) {
      return A(a) || z(a) === l;
    };
    exports2.isConcurrentMode = A;
    exports2.isContextConsumer = function(a) {
      return z(a) === k2;
    };
    exports2.isContextProvider = function(a) {
      return z(a) === h;
    };
    exports2.isElement = function(a) {
      return "object" === typeof a && null !== a && a.$$typeof === c;
    };
    exports2.isForwardRef = function(a) {
      return z(a) === n2;
    };
    exports2.isFragment = function(a) {
      return z(a) === e2;
    };
    exports2.isLazy = function(a) {
      return z(a) === t2;
    };
    exports2.isMemo = function(a) {
      return z(a) === r2;
    };
    exports2.isPortal = function(a) {
      return z(a) === d2;
    };
    exports2.isProfiler = function(a) {
      return z(a) === g2;
    };
    exports2.isStrictMode = function(a) {
      return z(a) === f;
    };
    exports2.isSuspense = function(a) {
      return z(a) === p2;
    };
    exports2.isValidElementType = function(a) {
      return "string" === typeof a || "function" === typeof a || a === e2 || a === m || a === g2 || a === f || a === p2 || a === q || "object" === typeof a && null !== a && (a.$$typeof === t2 || a.$$typeof === r2 || a.$$typeof === h || a.$$typeof === k2 || a.$$typeof === n2 || a.$$typeof === w2 || a.$$typeof === x || a.$$typeof === y || a.$$typeof === v2);
    };
    exports2.typeOf = z;
  }
});

// ../../node_modules/react-is/cjs/react-is.development.js
var require_react_is_development = __commonJS({
  "../../node_modules/react-is/cjs/react-is.development.js"(exports2) {
    "use strict";
    if (process.env.NODE_ENV !== "production") {
      (function() {
        "use strict";
        var hasSymbol = typeof Symbol === "function" && Symbol.for;
        var REACT_ELEMENT_TYPE2 = hasSymbol ? Symbol.for("react.element") : 60103;
        var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for("react.portal") : 60106;
        var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for("react.fragment") : 60107;
        var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for("react.strict_mode") : 60108;
        var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for("react.profiler") : 60114;
        var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for("react.provider") : 60109;
        var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for("react.context") : 60110;
        var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for("react.async_mode") : 60111;
        var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for("react.concurrent_mode") : 60111;
        var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for("react.forward_ref") : 60112;
        var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for("react.suspense") : 60113;
        var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for("react.suspense_list") : 60120;
        var REACT_MEMO_TYPE = hasSymbol ? Symbol.for("react.memo") : 60115;
        var REACT_LAZY_TYPE = hasSymbol ? Symbol.for("react.lazy") : 60116;
        var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for("react.block") : 60121;
        var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for("react.fundamental") : 60117;
        var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for("react.responder") : 60118;
        var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for("react.scope") : 60119;
        function isValidElementType(type) {
          return typeof type === "string" || typeof type === "function" || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.
          type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === "object" && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);
        }
        function typeOf(object2) {
          if (typeof object2 === "object" && object2 !== null) {
            var $$typeof = object2.$$typeof;
            switch ($$typeof) {
              case REACT_ELEMENT_TYPE2:
                var type = object2.type;
                switch (type) {
                  case REACT_ASYNC_MODE_TYPE:
                  case REACT_CONCURRENT_MODE_TYPE:
                  case REACT_FRAGMENT_TYPE:
                  case REACT_PROFILER_TYPE:
                  case REACT_STRICT_MODE_TYPE:
                  case REACT_SUSPENSE_TYPE:
                    return type;
                  default:
                    var $$typeofType = type && type.$$typeof;
                    switch ($$typeofType) {
                      case REACT_CONTEXT_TYPE:
                      case REACT_FORWARD_REF_TYPE:
                      case REACT_LAZY_TYPE:
                      case REACT_MEMO_TYPE:
                      case REACT_PROVIDER_TYPE:
                        return $$typeofType;
                      default:
                        return $$typeof;
                    }
                }
              case REACT_PORTAL_TYPE:
                return $$typeof;
            }
          }
          return void 0;
        }
        var AsyncMode = REACT_ASYNC_MODE_TYPE;
        var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;
        var ContextConsumer = REACT_CONTEXT_TYPE;
        var ContextProvider = REACT_PROVIDER_TYPE;
        var Element2 = REACT_ELEMENT_TYPE2;
        var ForwardRef = REACT_FORWARD_REF_TYPE;
        var Fragment52 = REACT_FRAGMENT_TYPE;
        var Lazy = REACT_LAZY_TYPE;
        var Memo = REACT_MEMO_TYPE;
        var Portal3 = REACT_PORTAL_TYPE;
        var Profiler = REACT_PROFILER_TYPE;
        var StrictMode = REACT_STRICT_MODE_TYPE;
        var Suspense = REACT_SUSPENSE_TYPE;
        var hasWarnedAboutDeprecatedIsAsyncMode = false;
        function isAsyncMode(object2) {
          {
            if (!hasWarnedAboutDeprecatedIsAsyncMode) {
              hasWarnedAboutDeprecatedIsAsyncMode = true;
              console["warn"]("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.");
            }
          }
          return isConcurrentMode(object2) || typeOf(object2) === REACT_ASYNC_MODE_TYPE;
        }
        function isConcurrentMode(object2) {
          return typeOf(object2) === REACT_CONCURRENT_MODE_TYPE;
        }
        function isContextConsumer(object2) {
          return typeOf(object2) === REACT_CONTEXT_TYPE;
        }
        function isContextProvider(object2) {
          return typeOf(object2) === REACT_PROVIDER_TYPE;
        }
        function isElement(object2) {
          return typeof object2 === "object" && object2 !== null && object2.$$typeof === REACT_ELEMENT_TYPE2;
        }
        function isForwardRef(object2) {
          return typeOf(object2) === REACT_FORWARD_REF_TYPE;
        }
        function isFragment(object2) {
          return typeOf(object2) === REACT_FRAGMENT_TYPE;
        }
        function isLazy(object2) {
          return typeOf(object2) === REACT_LAZY_TYPE;
        }
        function isMemo(object2) {
          return typeOf(object2) === REACT_MEMO_TYPE;
        }
        function isPortal(object2) {
          return typeOf(object2) === REACT_PORTAL_TYPE;
        }
        function isProfiler(object2) {
          return typeOf(object2) === REACT_PROFILER_TYPE;
        }
        function isStrictMode(object2) {
          return typeOf(object2) === REACT_STRICT_MODE_TYPE;
        }
        function isSuspense(object2) {
          return typeOf(object2) === REACT_SUSPENSE_TYPE;
        }
        exports2.AsyncMode = AsyncMode;
        exports2.ConcurrentMode = ConcurrentMode;
        exports2.ContextConsumer = ContextConsumer;
        exports2.ContextProvider = ContextProvider;
        exports2.Element = Element2;
        exports2.ForwardRef = ForwardRef;
        exports2.Fragment = Fragment52;
        exports2.Lazy = Lazy;
        exports2.Memo = Memo;
        exports2.Portal = Portal3;
        exports2.Profiler = Profiler;
        exports2.StrictMode = StrictMode;
        exports2.Suspense = Suspense;
        exports2.isAsyncMode = isAsyncMode;
        exports2.isConcurrentMode = isConcurrentMode;
        exports2.isContextConsumer = isContextConsumer;
        exports2.isContextProvider = isContextProvider;
        exports2.isElement = isElement;
        exports2.isForwardRef = isForwardRef;
        exports2.isFragment = isFragment;
        exports2.isLazy = isLazy;
        exports2.isMemo = isMemo;
        exports2.isPortal = isPortal;
        exports2.isProfiler = isProfiler;
        exports2.isStrictMode = isStrictMode;
        exports2.isSuspense = isSuspense;
        exports2.isValidElementType = isValidElementType;
        exports2.typeOf = typeOf;
      })();
    }
  }
});

// ../../node_modules/react-is/index.js
var require_react_is = __commonJS({
  "../../node_modules/react-is/index.js"(exports2, module2) {
    "use strict";
    if (process.env.NODE_ENV === "production") {
      module2.exports = require_react_is_production_min();
    } else {
      module2.exports = require_react_is_development();
    }
  }
});

// ../../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js
var require_hoist_non_react_statics_cjs = __commonJS({
  "../../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js"(exports2, module2) {
    "use strict";
    var reactIs = require_react_is();
    var REACT_STATICS = {
      childContextTypes: true,
      contextType: true,
      contextTypes: true,
      defaultProps: true,
      displayName: true,
      getDefaultProps: true,
      getDerivedStateFromError: true,
      getDerivedStateFromProps: true,
      mixins: true,
      propTypes: true,
      type: true
    };
    var KNOWN_STATICS = {
      name: true,
      length: true,
      prototype: true,
      caller: true,
      callee: true,
      arguments: true,
      arity: true
    };
    var FORWARD_REF_STATICS = {
      "$$typeof": true,
      render: true,
      defaultProps: true,
      displayName: true,
      propTypes: true
    };
    var MEMO_STATICS = {
      "$$typeof": true,
      compare: true,
      defaultProps: true,
      displayName: true,
      propTypes: true,
      type: true
    };
    var TYPE_STATICS = {};
    TYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;
    TYPE_STATICS[reactIs.Memo] = MEMO_STATICS;
    function getStatics(component) {
      if (reactIs.isMemo(component)) {
        return MEMO_STATICS;
      }
      return TYPE_STATICS[component["$$typeof"]] || REACT_STATICS;
    }
    var defineProperty2 = Object.defineProperty;
    var getOwnPropertyNames = Object.getOwnPropertyNames;
    var getOwnPropertySymbols = Object.getOwnPropertySymbols;
    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    var getPrototypeOf = Object.getPrototypeOf;
    var objectPrototype = Object.prototype;
    function hoistNonReactStatics2(targetComponent, sourceComponent, blacklist) {
      if (typeof sourceComponent !== "string") {
        if (objectPrototype) {
          var inheritedComponent = getPrototypeOf(sourceComponent);
          if (inheritedComponent && inheritedComponent !== objectPrototype) {
            hoistNonReactStatics2(targetComponent, inheritedComponent, blacklist);
          }
        }
        var keys2 = getOwnPropertyNames(sourceComponent);
        if (getOwnPropertySymbols) {
          keys2 = keys2.concat(getOwnPropertySymbols(sourceComponent));
        }
        var targetStatics = getStatics(targetComponent);
        var sourceStatics = getStatics(sourceComponent);
        for (var i = 0; i < keys2.length; ++i) {
          var key = keys2[i];
          if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {
            var descriptor = getOwnPropertyDescriptor(sourceComponent, key);
            try {
              defineProperty2(targetComponent, key, descriptor);
            } catch (e2) {
            }
          }
        }
      }
      return targetComponent;
    }
    module2.exports = hoistNonReactStatics2;
  }
});

// src/components/ui/alert.tsx
import * as React from "react";
import { cva } from "class-variance-authority";

// src/lib/utils.ts
import { clsx } from "clsx";
import { twMerge } from "tailwind-merge";
function cn(...inputs) {
  return twMerge(clsx(inputs));
}
function formatDate(date2, locale2 = "vi-VN") {
  if (!date2)
    return "N/A";
  const dateObj = typeof date2 === "string" ? new Date(date2) : date2;
  if (isNaN(dateObj.getTime()))
    return "Invalid Date";
  return new Intl.DateTimeFormat(locale2, {
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit"
  }).format(dateObj);
}

// src/components/ui/alert.tsx
import { jsx } from "react/jsx-runtime";
var alertVariants = cva(
  "relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive: "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",
        warning: "border-yellow-500/50 text-yellow-700 dark:border-yellow-500 dark:text-yellow-300 [&>svg]:text-yellow-600",
        success: "border-green-500/50 text-green-700 dark:border-green-500 dark:text-green-300 [&>svg]:text-green-600",
        info: "border-blue-500/50 text-blue-700 dark:border-blue-500 dark:text-blue-300 [&>svg]:text-blue-600"
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
var Alert = React.forwardRef(({ className, variant, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    role: "alert",
    className: cn(alertVariants({ variant }), className),
    ...props
  }
));
Alert.displayName = "Alert";
var AlertTitle = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "h5",
  {
    ref,
    className: cn("mb-1 font-medium leading-none tracking-tight", className),
    ...props
  }
));
AlertTitle.displayName = "AlertTitle";
var AlertDescription = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn("text-sm [&_p]:leading-relaxed", className),
    ...props
  }
));
AlertDescription.displayName = "AlertDescription";

// src/components/ui/badge.tsx
import { cva as cva2 } from "class-variance-authority";

// src/lib/cn.ts
import { clsx as clsx2 } from "clsx";
import { twMerge as twMerge2 } from "tailwind-merge";
function cn2(...inputs) {
  return twMerge2(clsx2(inputs));
}

// src/components/ui/badge.tsx
import { jsx as jsx2 } from "react/jsx-runtime";
var badgeVariants = cva2(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default: "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary: "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive: "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground"
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
function Badge({ className, variant, ...props }) {
  return /* @__PURE__ */ jsx2("div", { className: cn2(badgeVariants({ variant }), className), ...props });
}

// src/components/ui/status-badge.tsx
import { getStatusColor, getStatusLabel } from "@rentalshop/constants";
import { jsx as jsx3, jsxs } from "react/jsx-runtime";
var specialStatusConfig = {
  // User Statuses
  online: {
    color: "bg-action-success/10 text-action-success border-action-success/20",
    icon: "\u{1F7E2}"
  },
  offline: {
    color: "bg-text-tertiary/10 text-text-tertiary border-text-tertiary/20",
    icon: "\u26AA"
  },
  // System Statuses
  healthy: {
    color: "bg-action-success/10 text-action-success border-action-success/20",
    icon: "\u2705"
  },
  warning: {
    color: "bg-action-warning/10 text-action-warning border-action-warning/20",
    icon: "\u26A0\uFE0F"
  },
  error: {
    color: "bg-action-danger/10 text-action-danger border-action-danger/20",
    icon: "\u274C"
  },
  // Outlet Statuses
  default: {
    color: "bg-gray-100 text-gray-700 border-gray-300 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600",
    icon: ""
  },
  "main branch": {
    color: "bg-gray-100 text-gray-700 border-gray-300 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600",
    icon: ""
  }
};
var sizeClasses = {
  sm: "px-2 py-1 text-xs",
  md: "px-2.5 py-1 text-sm",
  lg: "px-3 py-1.5 text-base"
};
var StatusBadge = ({
  status,
  type = "entity",
  variant = "default",
  size = "md",
  className
}) => {
  if (!status) {
    return /* @__PURE__ */ jsx3("span", { className: cn("inline-flex items-center gap-1.5 rounded-full font-medium border px-2 py-1 text-xs bg-gray-100 text-gray-600 border-gray-300", className), children: "Unknown" });
  }
  const specialConfig = specialStatusConfig[status.toLowerCase()];
  let config;
  if (specialConfig) {
    config = specialConfig;
  } else {
    const colorClass = getStatusColor(status, type);
    const label = getStatusLabel(status, type);
    config = {
      color: colorClass,
      icon: ""
    };
  }
  const baseClasses = cn(
    "inline-flex items-center gap-1.5 rounded-full font-medium border",
    sizeClasses[size],
    config.color,
    className
  );
  return /* @__PURE__ */ jsxs("span", { className: baseClasses, children: [
    /* @__PURE__ */ jsx3("span", { className: "text-xs", children: config.icon }),
    /* @__PURE__ */ jsx3("span", { className: "capitalize", children: status })
  ] });
};

// src/components/ui/breadcrumb.tsx
import Link from "next/link";
import { ChevronRight, Home } from "lucide-react";
import { jsx as jsx4, jsxs as jsxs2 } from "react/jsx-runtime";
var Breadcrumb = ({
  items,
  showHome = true,
  homeHref = "/",
  separator = /* @__PURE__ */ jsx4(ChevronRight, { className: "w-4 h-4" }),
  className
}) => {
  const allItems = showHome ? [{ label: "Home", href: homeHref, icon: /* @__PURE__ */ jsx4(Home, { className: "w-4 h-4" }) }, ...items] : items;
  return /* @__PURE__ */ jsx4("nav", { "aria-label": "Breadcrumb", className: cn("flex items-center space-x-2 py-3", className), children: /* @__PURE__ */ jsx4("ol", { className: "flex items-center space-x-2", children: allItems.map((item, index) => {
    const isLast = index === allItems.length - 1;
    return /* @__PURE__ */ jsxs2("li", { className: "flex items-center space-x-2", children: [
      index > 0 && /* @__PURE__ */ jsx4("span", { className: "text-gray-400 dark:text-gray-500", "aria-hidden": "true", children: separator }),
      item.href && !isLast ? /* @__PURE__ */ jsxs2(
        Link,
        {
          href: item.href,
          className: cn(
            "flex items-center gap-1.5 text-sm font-medium transition-colors",
            "text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100",
            "hover:underline"
          ),
          children: [
            item.icon,
            /* @__PURE__ */ jsx4("span", { children: item.label })
          ]
        }
      ) : /* @__PURE__ */ jsxs2(
        "span",
        {
          className: cn(
            "flex items-center gap-1.5 text-sm font-medium",
            isLast ? "text-gray-900 dark:text-gray-100" : "text-gray-600 dark:text-gray-400"
          ),
          "aria-current": isLast ? "page" : void 0,
          children: [
            item.icon,
            /* @__PURE__ */ jsx4("span", { children: item.label })
          ]
        }
      )
    ] }, index);
  }) }) });
};

// src/components/ui/button.tsx
import * as React2 from "react";
import { Slot } from "@radix-ui/react-slot";
import { cva as cva3 } from "class-variance-authority";
import { jsx as jsx5 } from "react/jsx-runtime";
var buttonVariants = cva3(
  "inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        // Green Theme - Primary button with green
        default: "bg-green-500 text-white hover:bg-green-600",
        // Destructive - Red for danger actions
        destructive: "bg-red-500 text-white hover:bg-red-600",
        // Outline - Neutral gray border (for table actions, pagination)
        outline: "border border-slate-300 bg-transparent text-slate-700 hover:bg-slate-50 hover:text-slate-900",
        // Secondary - Light slate background
        secondary: "bg-slate-100 text-slate-800 hover:bg-slate-200",
        // Ghost - Transparent with hover effect
        ghost: "hover:bg-slate-100 hover:text-slate-800",
        // Link - Green text with underline
        link: "text-green-500 underline-offset-4 hover:underline",
        // Success - Emerald green
        success: "bg-emerald-500 text-white hover:bg-emerald-600",
        // Warning - Amber yellow
        warning: "bg-amber-500 text-white hover:bg-amber-600"
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
var Button2 = React2.forwardRef(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";
    return /* @__PURE__ */ jsx5(
      Comp,
      {
        className: cn2(buttonVariants({ variant, size, className })),
        ref,
        ...props
      }
    );
  }
);
Button2.displayName = "Button";

// src/components/ui/button-clean.tsx
import React3 from "react";
import { cva as cva4 } from "class-variance-authority";
import { jsx as jsx6, jsxs as jsxs3 } from "react/jsx-runtime";
var buttonCleanVariants = cva4(
  "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default: "bg-brand-primary text-white hover:bg-brand-600",
        secondary: "bg-bg-secondary text-text-primary hover:bg-bg-tertiary border border-border",
        outline: "border border-border bg-transparent text-text-primary hover:bg-bg-secondary",
        ghost: "hover:bg-bg-secondary hover:text-text-primary",
        link: "text-brand-primary underline-offset-4 hover:underline",
        success: "bg-action-success text-white hover:bg-green-600",
        danger: "bg-action-danger text-white hover:bg-red-600",
        warning: "bg-action-warning text-white hover:bg-amber-600"
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 px-3 text-xs",
        lg: "h-10 px-6",
        icon: "h-9 w-9"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
var ButtonClean = React3.forwardRef(
  ({
    className,
    variant,
    size,
    asChild = false,
    icon,
    showIcon = true,
    iconPosition = "left",
    children,
    ...props
  }, ref) => {
    const Comp = asChild ? "button" : "button";
    const renderIcon = () => {
      if (!icon || !showIcon)
        return null;
      return /* @__PURE__ */ jsx6("span", { className: cn2(
        "inline-flex items-center",
        iconPosition === "left" ? "mr-2" : "ml-2"
      ), children: icon });
    };
    return /* @__PURE__ */ jsxs3(
      Comp,
      {
        className: cn2(buttonCleanVariants({ variant, size, className })),
        ref,
        ...props,
        children: [
          iconPosition === "left" && renderIcon(),
          children,
          iconPosition === "right" && renderIcon()
        ]
      }
    );
  }
);
ButtonClean.displayName = "ButtonClean";

// src/components/ui/button-colorful.tsx
import React4 from "react";
import { cva as cva5 } from "class-variance-authority";
import { jsx as jsx7 } from "react/jsx-runtime";
var buttonColorfulVariants = cva5(
  "inline-flex items-center justify-center whitespace-nowrap rounded-xl text-lg font-semibold transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:scale-105 active:scale-95",
  {
    variants: {
      variant: {
        default: "bg-gradient-to-r from-brand-500 to-brand-600 text-white shadow-glow hover:shadow-glow-blue",
        destructive: "bg-gradient-to-r from-action-danger to-red-600 text-white shadow-glow hover:shadow-glow",
        outline: "border-2 border-brand-500 bg-transparent text-brand-500 hover:bg-brand-500 hover:text-white",
        secondary: "bg-gradient-to-r from-action-secondary to-purple-600 text-white shadow-glow-purple hover:shadow-glow",
        ghost: "hover:bg-brand-100 hover:text-brand-700",
        link: "text-brand-500 underline-offset-4 hover:underline",
        success: "bg-gradient-to-r from-action-success to-emerald-600 text-white shadow-glow hover:shadow-glow",
        warning: "bg-gradient-to-r from-action-warning to-amber-600 text-white shadow-glow hover:shadow-glow",
        info: "bg-gradient-to-r from-action-info to-cyan-600 text-white shadow-glow hover:shadow-glow",
        warm: "bg-gradient-to-r from-gradient-warm text-white shadow-glow hover:shadow-glow",
        cool: "bg-gradient-to-r from-gradient-cool text-white shadow-glow hover:shadow-glow"
      },
      size: {
        default: "h-12 px-8 py-3 text-lg",
        sm: "h-10 px-6 py-2 text-base",
        lg: "h-14 px-10 py-4 text-xl",
        xl: "h-16 px-12 py-5 text-2xl",
        icon: "h-12 w-12"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
var ButtonColorful = React4.forwardRef(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? "button" : "button";
    return /* @__PURE__ */ jsx7(
      Comp,
      {
        className: cn2(buttonColorfulVariants({ variant, size, className })),
        ref,
        ...props
      }
    );
  }
);
ButtonColorful.displayName = "ButtonColorful";

// src/components/ui/card.tsx
import * as React5 from "react";
import { jsx as jsx8 } from "react/jsx-runtime";
var Card = React5.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx8(
  "div",
  {
    ref,
    className: cn2(
      "rounded-lg border border-border bg-bg-card text-text-primary shadow-sm",
      className
    ),
    ...props
  }
));
Card.displayName = "Card";
var CardHeader = React5.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx8(
  "div",
  {
    ref,
    className: cn2("flex flex-col space-y-1.5 p-6", className),
    ...props
  }
));
CardHeader.displayName = "CardHeader";
var CardTitle = React5.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx8(
  "h3",
  {
    ref,
    className: cn2(
      "text-2xl font-semibold leading-none tracking-tight text-text-primary",
      className
    ),
    ...props
  }
));
CardTitle.displayName = "CardTitle";
var CardDescription = React5.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx8(
  "p",
  {
    ref,
    className: cn2("text-sm text-text-secondary", className),
    ...props
  }
));
CardDescription.displayName = "CardDescription";
var CardContent = React5.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx8("div", { ref, className: cn2("p-6 pt-0", className), ...props }));
CardContent.displayName = "CardContent";
var CardFooter = React5.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx8(
  "div",
  {
    ref,
    className: cn2("flex items-center p-6 pt-0", className),
    ...props
  }
));
CardFooter.displayName = "CardFooter";

// src/components/ui/card-clean.tsx
import { jsx as jsx9 } from "react/jsx-runtime";
var CardClean = ({
  children,
  className,
  variant = "default",
  size = "md"
}) => {
  const baseClasses = "rounded-lg transition-colors duration-200";
  const variantClasses = {
    default: "bg-white shadow-sm",
    subtle: "bg-bg-secondary",
    bordered: "bg-white border border-border"
  };
  const sizeClasses2 = {
    sm: "p-4",
    md: "p-6",
    lg: "p-8"
  };
  return /* @__PURE__ */ jsx9("div", { className: cn2(
    baseClasses,
    variantClasses[variant],
    sizeClasses2[size],
    className
  ), children });
};
var CardHeaderClean = ({
  children,
  className
}) => /* @__PURE__ */ jsx9("div", { className: cn2("mb-4", className), children });
var CardTitleClean = ({
  children,
  className,
  size = "md"
}) => {
  const sizeClasses2 = {
    sm: "text-lg font-medium",
    md: "text-xl font-semibold",
    lg: "text-2xl font-bold"
  };
  return /* @__PURE__ */ jsx9("h3", { className: cn2(
    "text-text-primary",
    sizeClasses2[size],
    className
  ), children });
};
var CardContentClean = ({
  children,
  className
}) => /* @__PURE__ */ jsx9("div", { className: cn2("space-y-3", className), children });

// src/components/ui/card-colorful.tsx
import { jsx as jsx10 } from "react/jsx-runtime";
var CardColorful = ({
  children,
  className,
  variant = "default",
  size = "md"
}) => {
  const baseClasses = "rounded-2xl border-0 transition-all duration-300 hover:scale-105";
  const variantClasses = {
    default: "bg-white shadow-soft hover:shadow-medium",
    gradient: "bg-gradient-to-br from-brand-500 to-action-primary text-white shadow-glow",
    glow: "bg-white shadow-glow-blue border border-action-primary/20",
    elevated: "bg-white shadow-large hover:shadow-glow"
  };
  const sizeClasses2 = {
    sm: "p-4",
    md: "p-6",
    lg: "p-8",
    xl: "p-12"
  };
  return /* @__PURE__ */ jsx10("div", { className: cn2(
    baseClasses,
    variantClasses[variant],
    sizeClasses2[size],
    className
  ), children });
};
var CardHeaderColorful = ({
  children,
  className
}) => /* @__PURE__ */ jsx10("div", { className: cn2("mb-6", className), children });
var CardTitleColorful = ({
  children,
  className,
  size = "lg"
}) => {
  const sizeClasses2 = {
    sm: "text-lg font-semibold",
    md: "text-xl font-semibold",
    lg: "text-2xl font-bold",
    xl: "text-3xl font-bold"
  };
  return /* @__PURE__ */ jsx10("h3", { className: cn2(
    "font-display text-text-primary",
    sizeClasses2[size],
    className
  ), children });
};
var CardContentColorful = ({
  children,
  className
}) => /* @__PURE__ */ jsx10("div", { className: cn2("space-y-4", className), children });

// src/components/ui/select.tsx
import * as React6 from "react";
import * as SelectPrimitive from "@radix-ui/react-select";
import { Check, ChevronDown, ChevronUp } from "lucide-react";
import { jsx as jsx11, jsxs as jsxs4 } from "react/jsx-runtime";
var Select = SelectPrimitive.Root;
var SelectValue = SelectPrimitive.Value;
var SelectTrigger = React6.forwardRef(({ className, children, variant = "default", ...props }, ref) => /* @__PURE__ */ jsxs4(
  SelectPrimitive.Trigger,
  {
    ref,
    className: cn2(
      variant === "filled" && "flex h-10 w-full items-center justify-between rounded-md bg-gray-50 border border-gray-200 px-3 py-2 text-sm focus:bg-white focus:border-blue-400 focus:ring-4 focus:ring-blue-100",
      variant === "underline" && "h-10 border-0 border-b border-gray-300 rounded-none px-0 text-sm focus:border-blue-500 focus:ring-0",
      variant === "ghost" && "h-10 bg-transparent border-transparent px-3 py-2 text-sm focus:border-blue-400 focus:ring-2 focus:ring-blue-100",
      variant === "default" && "flex h-10 w-full items-center justify-between rounded-lg border border-border bg-bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-action-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className
    ),
    ...props,
    children: [
      children,
      /* @__PURE__ */ jsx11(SelectPrimitive.Icon, { asChild: true, children: /* @__PURE__ */ jsx11(ChevronDown, { className: "h-4 w-4 opacity-50" }) })
    ]
  }
));
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName;
var SelectScrollUpButton = React6.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx11(
  SelectPrimitive.ScrollUpButton,
  {
    ref,
    className: cn2(
      "flex cursor-default items-center justify-center py-1",
      className
    ),
    ...props,
    children: /* @__PURE__ */ jsx11(ChevronUp, { className: "h-4 w-4" })
  }
));
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;
var SelectScrollDownButton = React6.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx11(
  SelectPrimitive.ScrollDownButton,
  {
    ref,
    className: cn2(
      "flex cursor-default items-center justify-center py-1",
      className
    ),
    ...props,
    children: /* @__PURE__ */ jsx11(ChevronDown, { className: "h-4 w-4" })
  }
));
SelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;
var SelectContent = React6.forwardRef(({ className, children, position = "popper", ...props }, ref) => /* @__PURE__ */ jsx11(SelectPrimitive.Portal, { container: typeof document !== "undefined" ? document.body : void 0, children: /* @__PURE__ */ jsxs4(
  SelectPrimitive.Content,
  {
    ref,
    className: cn2(
      "relative z-[110] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      position === "popper" && "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
      className
    ),
    position,
    ...props,
    children: [
      /* @__PURE__ */ jsx11(SelectScrollUpButton, {}),
      /* @__PURE__ */ jsx11(
        SelectPrimitive.Viewport,
        {
          className: cn2(
            "p-1",
            position === "popper" && "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
          ),
          children
        }
      ),
      /* @__PURE__ */ jsx11(SelectScrollDownButton, {})
    ]
  }
) }));
SelectContent.displayName = SelectPrimitive.Content.displayName;
var SelectLabel = React6.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx11(
  SelectPrimitive.Label,
  {
    ref,
    className: cn2("py-1.5 pl-8 pr-2 text-sm font-semibold", className),
    ...props
  }
));
SelectLabel.displayName = SelectPrimitive.Label.displayName;
var SelectItem = React6.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxs4(
  SelectPrimitive.Item,
  {
    ref,
    className: cn2(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none hover:bg-gray-50 focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsx11("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ jsx11(SelectPrimitive.ItemIndicator, { children: /* @__PURE__ */ jsx11(Check, { className: "h-4 w-4" }) }) }),
      /* @__PURE__ */ jsx11(SelectPrimitive.ItemText, { children })
    ]
  }
));
SelectItem.displayName = SelectPrimitive.Item.displayName;
var SelectSeparator = React6.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx11(
  SelectPrimitive.Separator,
  {
    ref,
    className: cn2("-mx-1 my-1 h-px bg-muted", className),
    ...props
  }
));
SelectSeparator.displayName = SelectPrimitive.Separator.displayName;

// src/components/ui/currency-selector.tsx
import { useCurrency } from "@rentalshop/hooks";
import { jsx as jsx12, jsxs as jsxs5 } from "react/jsx-runtime";
function CurrencySelector({
  className = "",
  showSymbols = true,
  showCodes = true,
  disabled = false,
  onCurrencyChange
}) {
  const { currentCurrency, setCurrency, settings } = useCurrency();
  const handleCurrencyChange = (value) => {
    const newCurrency = value;
    setCurrency(newCurrency);
    onCurrencyChange?.(newCurrency);
  };
  const availableCurrencies = settings.availableCurrencies;
  return /* @__PURE__ */ jsxs5(
    Select,
    {
      value: currentCurrency,
      onValueChange: handleCurrencyChange,
      disabled,
      children: [
        /* @__PURE__ */ jsx12(SelectTrigger, { className: `w-auto min-w-[120px] ${className}`, children: /* @__PURE__ */ jsx12(SelectValue, { children: /* @__PURE__ */ jsxs5("span", { className: "flex items-center gap-2", children: [
          showSymbols && /* @__PURE__ */ jsx12("span", { className: "text-sm font-medium", children: currentCurrency === "USD" ? "$" : "\u0111" }),
          showCodes && /* @__PURE__ */ jsx12("span", { className: "text-sm", children: currentCurrency })
        ] }) }) }),
        /* @__PURE__ */ jsx12(SelectContent, { children: availableCurrencies.map((currency) => /* @__PURE__ */ jsx12(SelectItem, { value: currency.code, children: /* @__PURE__ */ jsxs5("div", { className: "flex items-center gap-2", children: [
          showSymbols && /* @__PURE__ */ jsx12("span", { className: "font-medium", children: currency.symbol }),
          showCodes && /* @__PURE__ */ jsx12("span", { children: currency.code }),
          /* @__PURE__ */ jsx12("span", { className: "text-muted-foreground text-xs", children: currency.name })
        ] }) }, currency.code)) })
      ]
    }
  );
}

// src/components/ui/dialog.tsx
import * as React7 from "react";
import * as DialogPrimitive from "@radix-ui/react-dialog";
import { X } from "lucide-react";
import { jsx as jsx13, jsxs as jsxs6 } from "react/jsx-runtime";
var Dialog = DialogPrimitive.Root;
var DialogTrigger = DialogPrimitive.Trigger;
var DialogPortal = DialogPrimitive.Portal;
var DialogOverlay = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx13(
  DialogPrimitive.Overlay,
  {
    ref,
    className: cn2(
      "fixed inset-0 z-[100] bg-black/20 backdrop-blur-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    ),
    ...props
  }
));
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;
var DialogContent = React7.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxs6(DialogPortal, { children: [
  /* @__PURE__ */ jsx13(DialogOverlay, {}),
  /* @__PURE__ */ jsxs6(
    DialogPrimitive.Content,
    {
      ref,
      className: cn2(
        "fixed left-[50%] top-[50%] z-[100] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-bg-card p-6 shadow-xl rounded-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",
        className
      ),
      ...props,
      children: [
        children,
        /* @__PURE__ */ jsxs6(DialogPrimitive.Close, { className: "absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground", children: [
          /* @__PURE__ */ jsx13(X, { className: "h-4 w-4" }),
          /* @__PURE__ */ jsx13("span", { className: "sr-only", children: "Close" })
        ] })
      ]
    }
  )
] }));
DialogContent.displayName = DialogPrimitive.Content.displayName;
var DialogHeader = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx13(
  "div",
  {
    className: cn2(
      "flex flex-col space-y-1.5 text-center sm:text-left",
      className
    ),
    ...props
  }
);
DialogHeader.displayName = "DialogHeader";
var DialogFooter = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx13(
  "div",
  {
    className: cn2(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    ),
    ...props
  }
);
DialogFooter.displayName = "DialogFooter";
var DialogTitle = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx13(
  DialogPrimitive.Title,
  {
    ref,
    className: cn2(
      "text-lg font-semibold leading-none tracking-tight",
      className
    ),
    ...props
  }
));
DialogTitle.displayName = DialogPrimitive.Title.displayName;
var DialogDescription = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx13(
  DialogPrimitive.Description,
  {
    ref,
    className: cn2("text-sm text-muted-foreground", className),
    ...props
  }
));
DialogDescription.displayName = DialogPrimitive.Description.displayName;

// src/components/ui/confirmation-dialog.tsx
import { AlertTriangle, AlertCircle, Info, CheckCircle, XCircle } from "lucide-react";
import { jsx as jsx14, jsxs as jsxs7 } from "react/jsx-runtime";
var getTypeConfig = (type) => {
  switch (type) {
    case "danger":
      return {
        icon: XCircle,
        iconColor: "text-red-500",
        buttonVariant: "destructive",
        buttonColor: "bg-red-600 hover:bg-red-700 text-white"
      };
    case "warning":
      return {
        icon: AlertTriangle,
        iconColor: "text-orange-500",
        buttonVariant: "outline",
        buttonColor: "border-orange-300 text-orange-600 hover:bg-orange-50"
      };
    case "info":
      return {
        icon: Info,
        iconColor: "text-blue-500",
        buttonVariant: "outline",
        buttonColor: "border-blue-300 text-blue-600 hover:bg-blue-50"
      };
    case "success":
      return {
        icon: CheckCircle,
        iconColor: "text-green-500",
        buttonVariant: "default",
        buttonColor: "bg-green-600 hover:bg-green-700 text-white"
      };
    default:
      return {
        icon: AlertCircle,
        iconColor: "text-gray-500",
        buttonVariant: "outline",
        buttonColor: "border-gray-300 text-gray-600 hover:bg-gray-50"
      };
  }
};
var ConfirmationDialog = ({
  open,
  onOpenChange,
  type,
  title,
  description,
  confirmText,
  cancelText = "Cancel",
  onConfirm,
  onCancel,
  isLoading = false,
  disabled = false
}) => {
  const config = getTypeConfig(type);
  const IconComponent = config.icon;
  const handleConfirm = () => {
    onConfirm();
    onOpenChange(false);
  };
  const handleCancel = () => {
    if (onCancel) {
      onCancel();
    }
    onOpenChange(false);
  };
  return /* @__PURE__ */ jsx14(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs7(DialogContent, { className: "max-w-md", children: [
    /* @__PURE__ */ jsx14(DialogHeader, { children: /* @__PURE__ */ jsxs7("div", { className: "flex items-center gap-3", children: [
      /* @__PURE__ */ jsx14(IconComponent, { className: `h-6 w-6 ${config.iconColor}` }),
      /* @__PURE__ */ jsxs7("div", { children: [
        /* @__PURE__ */ jsx14(DialogTitle, { className: "text-lg font-semibold", children: title }),
        /* @__PURE__ */ jsx14(DialogDescription, { className: "text-sm text-gray-600 mt-1", children: description })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs7(DialogFooter, { className: "flex justify-end space-x-2 mt-6", children: [
      /* @__PURE__ */ jsx14(
        Button2,
        {
          variant: "outline",
          onClick: handleCancel,
          disabled: isLoading || disabled,
          children: cancelText
        }
      ),
      /* @__PURE__ */ jsx14(
        Button2,
        {
          variant: config.buttonVariant,
          onClick: handleConfirm,
          disabled: isLoading || disabled,
          className: config.buttonColor,
          children: isLoading ? "Processing..." : confirmText || "Confirm"
        }
      )
    ] })
  ] }) });
};

// src/components/ui/confirmation-dialog-with-reason.tsx
import { useState } from "react";

// src/components/ui/textarea.tsx
import * as React8 from "react";
import { jsx as jsx15 } from "react/jsx-runtime";
var Textarea = React8.forwardRef(({ className, variant = "filled", ...props }, ref) => {
  const base = "flex min-h-[80px] w-full rounded-lg border border-border bg-bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-text-tertiary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-action-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";
  const variants = {
    default: base,
    filled: "flex w-full min-h-[80px] rounded-md bg-gray-50 border border-gray-200 px-3 py-2 text-sm focus:bg-white focus:border-blue-400 focus:ring-4 focus:ring-blue-100",
    underline: "flex w-full min-h-[80px] border-0 border-b border-gray-300 rounded-none px-0 text-sm focus:border-blue-500 focus:ring-0",
    ghost: "flex w-full min-h-[80px] bg-transparent border-transparent px-3 py-2 text-sm focus:border-blue-400 focus:ring-2 focus:ring-blue-100"
  };
  return /* @__PURE__ */ jsx15(
    "textarea",
    {
      className: cn2(variants[variant], className),
      ref,
      ...props
    }
  );
});
Textarea.displayName = "Textarea";

// src/components/ui/label.tsx
import React9 from "react";
import { jsx as jsx16, jsxs as jsxs8 } from "react/jsx-runtime";
var Label2 = React9.forwardRef(
  ({ className, required, children, ...props }, ref) => {
    return /* @__PURE__ */ jsxs8(
      "label",
      {
        ref,
        className: cn(
          "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",
          className
        ),
        ...props,
        children: [
          children,
          required && /* @__PURE__ */ jsx16("span", { className: "text-red-500 ml-1", children: "*" })
        ]
      }
    );
  }
);
Label2.displayName = "Label";

// src/components/ui/confirmation-dialog-with-reason.tsx
import { AlertTriangle as AlertTriangle2, AlertCircle as AlertCircle2, Info as Info2, CheckCircle as CheckCircle2, XCircle as XCircle2 } from "lucide-react";
import { jsx as jsx17, jsxs as jsxs9 } from "react/jsx-runtime";
var getTypeConfig2 = (type) => {
  switch (type) {
    case "danger":
      return {
        icon: XCircle2,
        iconColor: "text-red-500",
        buttonVariant: "destructive",
        buttonColor: "bg-red-600 hover:bg-red-700 text-white"
      };
    case "warning":
      return {
        icon: AlertTriangle2,
        iconColor: "text-orange-500",
        buttonVariant: "outline",
        buttonColor: "border-orange-300 text-orange-600 hover:bg-orange-50"
      };
    case "info":
      return {
        icon: Info2,
        iconColor: "text-blue-500",
        buttonVariant: "outline",
        buttonColor: "border-blue-300 text-blue-600 hover:bg-blue-50"
      };
    case "success":
      return {
        icon: CheckCircle2,
        iconColor: "text-green-500",
        buttonVariant: "default",
        buttonColor: "bg-green-600 hover:bg-green-700 text-white"
      };
    default:
      return {
        icon: AlertCircle2,
        iconColor: "text-gray-500",
        buttonVariant: "outline",
        buttonColor: "border-gray-300 text-gray-600 hover:bg-gray-50"
      };
  }
};
var ConfirmationDialogWithReason = ({
  open,
  onOpenChange,
  type,
  title,
  description,
  confirmText,
  cancelText = "Cancel",
  onConfirm,
  onCancel,
  isLoading = false,
  disabled = false,
  reasonLabel = "Reason",
  reasonPlaceholder = "Enter reason...",
  requireReason = true
}) => {
  const [reason, setReason] = useState("");
  const config = getTypeConfig2(type);
  const IconComponent = config.icon;
  const handleConfirm = () => {
    onConfirm(reason.trim());
    setReason("");
    onOpenChange(false);
  };
  const handleCancel = () => {
    setReason("");
    if (onCancel) {
      onCancel();
    }
    onOpenChange(false);
  };
  const isConfirmDisabled = isLoading || disabled || requireReason && !reason.trim();
  return /* @__PURE__ */ jsx17(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs9(DialogContent, { className: "max-w-md", children: [
    /* @__PURE__ */ jsx17(DialogHeader, { children: /* @__PURE__ */ jsxs9("div", { className: "flex items-center gap-3", children: [
      /* @__PURE__ */ jsx17(IconComponent, { className: `h-6 w-6 ${config.iconColor}` }),
      /* @__PURE__ */ jsxs9("div", { children: [
        /* @__PURE__ */ jsx17(DialogTitle, { className: "text-lg font-semibold", children: title }),
        /* @__PURE__ */ jsx17(DialogDescription, { className: "text-sm text-gray-600 mt-1", children: description })
      ] })
    ] }) }),
    /* @__PURE__ */ jsx17("div", { className: "space-y-4 mt-6", children: /* @__PURE__ */ jsxs9("div", { children: [
      /* @__PURE__ */ jsx17(Label2, { htmlFor: "reason", children: reasonLabel }),
      /* @__PURE__ */ jsx17(
        Textarea,
        {
          id: "reason",
          value: reason,
          onChange: (e2) => setReason(e2.target.value),
          placeholder: reasonPlaceholder,
          rows: 3,
          className: "mt-1"
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs9(DialogFooter, { className: "flex justify-end space-x-2 mt-6", children: [
      /* @__PURE__ */ jsx17(
        Button2,
        {
          variant: "outline",
          onClick: handleCancel,
          disabled: isLoading || disabled,
          children: cancelText
        }
      ),
      /* @__PURE__ */ jsx17(
        Button2,
        {
          variant: config.buttonVariant,
          onClick: handleConfirm,
          disabled: isConfirmDisabled,
          className: config.buttonColor,
          children: isLoading ? "Processing..." : confirmText || "Confirm"
        }
      )
    ] })
  ] }) });
};

// src/components/ui/input.tsx
import * as React11 from "react";
import { jsx as jsx18, jsxs as jsxs10 } from "react/jsx-runtime";
var Input = React11.forwardRef(({ className, type, variant = "filled", leadingIcon, ...props }, ref) => {
  const base = "flex h-10 w-full rounded-lg border border-border bg-bg-card px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-text-tertiary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-action-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";
  const variants = {
    default: base,
    filled: "flex w-full h-11 rounded-md bg-gray-50 border border-gray-200 px-3 py-2 text-sm focus:bg-white focus:border-blue-400 focus:ring-4 focus:ring-blue-100",
    underline: "flex w-full h-11 border-0 border-b border-gray-300 rounded-none px-0 text-sm focus:border-blue-500 focus:ring-0",
    ghost: "flex w-full h-11 bg-transparent border-transparent px-3 py-2 text-sm focus:border-blue-400 focus:ring-2 focus:ring-blue-100"
  };
  const input = /* @__PURE__ */ jsx18(
    "input",
    {
      type,
      className: cn2(variants[variant], className),
      ref,
      ...props
    }
  );
  if (!leadingIcon)
    return input;
  return /* @__PURE__ */ jsxs10("div", { className: "relative", children: [
    /* @__PURE__ */ jsx18("span", { className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400", children: leadingIcon }),
    React11.cloneElement(input, {
      className: cn2(variants[variant], "pl-9", className)
    })
  ] });
});
Input.displayName = "Input";

// src/components/ui/loading-indicator.tsx
import { jsx as jsx19, jsxs as jsxs11 } from "react/jsx-runtime";
function LoadingIndicator({
  variant = "bar",
  size = "md",
  message = "Loading...",
  className
}) {
  const sizeClasses2 = {
    sm: { container: "text-sm", bar: "h-1", circular: "h-6 w-6", dots: "h-2 w-2", spinner: "h-6 w-6" },
    md: { container: "text-base", bar: "h-1.5", circular: "h-8 w-8", dots: "h-3 w-3", spinner: "h-8 w-8" },
    lg: { container: "text-lg", bar: "h-2", circular: "h-12 w-12", dots: "h-4 w-4", spinner: "h-12 w-12" }
  };
  const sizes = sizeClasses2[size];
  return /* @__PURE__ */ jsxs11("div", { className: cn("flex flex-col items-center justify-center space-y-4", className), children: [
    variant === "bar" && /* @__PURE__ */ jsx19("div", { className: "w-64 bg-gray-200 rounded-full overflow-hidden", children: /* @__PURE__ */ jsx19("div", { className: cn(
      "bg-gradient-to-r from-green-500 via-green-600 to-green-500 rounded-full",
      "animate-progress",
      sizes.bar
    ), children: /* @__PURE__ */ jsx19("div", { className: "h-full w-full bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer" }) }) }),
    variant === "circular" && /* @__PURE__ */ jsx19("div", { className: cn("relative", sizes.circular), children: /* @__PURE__ */ jsxs11("svg", { className: "w-full h-full transform -rotate-90", viewBox: "0 0 36 36", children: [
      /* @__PURE__ */ jsx19(
        "path",
        {
          className: "text-gray-200",
          stroke: "currentColor",
          strokeWidth: "3",
          fill: "none",
          d: "M18 2.0845\n                a 15.9155 15.9155 0 0 1 0 31.831\n                a 15.9155 15.9155 0 0 1 0 -31.831"
        }
      ),
      /* @__PURE__ */ jsx19(
        "path",
        {
          className: "text-blue-600 animate-circular-progress",
          stroke: "currentColor",
          strokeWidth: "3",
          strokeLinecap: "round",
          fill: "none",
          strokeDasharray: "100, 100",
          strokeDashoffset: "25",
          d: "M18 2.0845\n                a 15.9155 15.9155 0 0 1 0 31.831\n                a 15.9155 15.9155 0 0 1 0 -31.831"
        }
      )
    ] }) }),
    variant === "dots" && /* @__PURE__ */ jsxs11("div", { className: "flex space-x-2", children: [
      /* @__PURE__ */ jsx19("div", { className: cn(sizes.dots, "bg-green-500 rounded-full animate-bounce [animation-delay:-0.3s]") }),
      /* @__PURE__ */ jsx19("div", { className: cn(sizes.dots, "bg-green-600 rounded-full animate-bounce [animation-delay:-0.15s]") }),
      /* @__PURE__ */ jsx19("div", { className: cn(sizes.dots, "bg-green-700 rounded-full animate-bounce") })
    ] }),
    variant === "pulse" && /* @__PURE__ */ jsxs11("div", { className: "relative", children: [
      /* @__PURE__ */ jsx19("div", { className: cn(sizes.spinner, "bg-green-500 rounded-full animate-ping absolute opacity-75") }),
      /* @__PURE__ */ jsx19("div", { className: cn(sizes.spinner, "bg-green-600 rounded-full relative") })
    ] }),
    variant === "spinner" && /* @__PURE__ */ jsxs11(
      "svg",
      {
        className: cn("animate-spin text-green-600", sizes.spinner),
        xmlns: "http://www.w3.org/2000/svg",
        fill: "none",
        viewBox: "0 0 24 24",
        children: [
          /* @__PURE__ */ jsx19("circle", { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }),
          /* @__PURE__ */ jsx19("path", { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })
        ]
      }
    ),
    message && /* @__PURE__ */ jsx19("p", { className: cn("text-gray-600 font-medium", sizes.container), children: message })
  ] });
}
function LoadingInline({
  variant = "dots",
  size = "sm",
  className
}) {
  const sizeClasses2 = {
    sm: { dots: "h-1.5 w-1.5", spinner: "h-4 w-4" },
    md: { dots: "h-2 w-2", spinner: "h-5 w-5" },
    lg: { dots: "h-3 w-3", spinner: "h-6 w-6" }
  };
  const sizes = sizeClasses2[size];
  if (variant === "dots") {
    return /* @__PURE__ */ jsxs11("div", { className: cn("flex items-center space-x-1", className), children: [
      /* @__PURE__ */ jsx19("div", { className: cn(sizes.dots, "bg-current rounded-full animate-bounce [animation-delay:-0.3s]") }),
      /* @__PURE__ */ jsx19("div", { className: cn(sizes.dots, "bg-current rounded-full animate-bounce [animation-delay:-0.15s]") }),
      /* @__PURE__ */ jsx19("div", { className: cn(sizes.dots, "bg-current rounded-full animate-bounce") })
    ] });
  }
  return /* @__PURE__ */ jsxs11(
    "svg",
    {
      className: cn("animate-spin", sizes.spinner, className),
      xmlns: "http://www.w3.org/2000/svg",
      fill: "none",
      viewBox: "0 0 24 24",
      children: [
        /* @__PURE__ */ jsx19("circle", { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }),
        /* @__PURE__ */ jsx19("path", { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })
      ]
    }
  );
}

// src/contexts/CurrencyContext.tsx
import { createContext, useContext, useState as useState2, useEffect } from "react";
import { jsx as jsx20 } from "react/jsx-runtime";
var CURRENCY_CONFIG = {
  USD: { symbol: "$", name: "US Dollar" },
  VND: { symbol: "\u0111", name: "Vietnamese Dong" }
};
var CurrencyContext = createContext({
  currency: "USD",
  setCurrency: () => {
  },
  symbol: "$",
  name: "US Dollar"
});
var CurrencyProvider = ({
  children,
  initialCurrency = "USD",
  merchantCurrency
}) => {
  const [currency, setCurrency] = useState2(
    merchantCurrency || initialCurrency
  );
  useEffect(() => {
    if (merchantCurrency && merchantCurrency !== currency) {
      setCurrency(merchantCurrency);
    }
  }, [merchantCurrency]);
  const config = CURRENCY_CONFIG[currency] || CURRENCY_CONFIG.USD;
  const value = {
    currency,
    setCurrency,
    symbol: config.symbol,
    name: config.name
  };
  return /* @__PURE__ */ jsx20(CurrencyContext.Provider, { value, children });
};
var useCurrency2 = () => {
  const context = useContext(CurrencyContext);
  if (!context) {
    throw new Error("useCurrency must be used within a CurrencyProvider");
  }
  return context;
};
function withCurrency(Component2) {
  return function CurrencyWrappedComponent(props) {
    const { currency } = useCurrency2();
    return /* @__PURE__ */ jsx20(Component2, { ...props, currency });
  };
}

// src/hooks/useFormatCurrency.ts
import { formatCurrency } from "@rentalshop/utils";
function useFormatCurrency() {
  const { currency } = useCurrency2();
  return (amount) => {
    return formatCurrency(amount, currency);
  };
}

// src/components/ui/Money.tsx
import { jsx as jsx21 } from "react/jsx-runtime";
var Money = ({
  amount,
  className = "",
  inline = false
}) => {
  const format = useFormatCurrency();
  const formatted = format(amount);
  if (inline) {
    return /* @__PURE__ */ jsx21("span", { className, children: formatted });
  }
  return /* @__PURE__ */ jsx21("div", { className, children: formatted });
};
var MoneyBold = ({ amount, inline }) => /* @__PURE__ */ jsx21(Money, { amount, className: "font-bold", inline });
var MoneyLarge = ({ amount, inline }) => /* @__PURE__ */ jsx21(Money, { amount, className: "text-lg font-semibold", inline });

// src/components/ui/separator.tsx
import React13 from "react";
import { jsx as jsx22 } from "react/jsx-runtime";
var Separator2 = React13.forwardRef(
  ({ className, orientation = "horizontal", decorative = true, ...props }, ref) => {
    return /* @__PURE__ */ jsx22(
      "div",
      {
        ref,
        role: decorative ? "none" : "separator",
        "aria-orientation": orientation,
        className: cn(
          "shrink-0 bg-border",
          orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
          className
        ),
        ...props
      }
    );
  }
);
Separator2.displayName = "Separator";

// src/components/ui/switch.tsx
import * as React14 from "react";
import { jsx as jsx23 } from "react/jsx-runtime";
var Switch = React14.forwardRef(
  ({ className, checked, onCheckedChange, ...props }, ref) => {
    const handleChange = (event) => {
      onCheckedChange?.(event.target.checked);
    };
    return /* @__PURE__ */ jsx23(
      "input",
      {
        type: "checkbox",
        ref,
        checked,
        onChange: handleChange,
        className: cn2(
          "peer h-6 w-11 shrink-0 cursor-pointer appearance-none rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",
          className
        ),
        style: {
          background: checked ? "var(--color-primary)" : "var(--color-input)"
        },
        ...props
      }
    );
  }
);
Switch.displayName = "Switch";

// src/components/ui/dropdown-menu.tsx
import * as React15 from "react";
import { ChevronDown as ChevronDown2, Check as Check2 } from "lucide-react";
import { jsx as jsx24, jsxs as jsxs12 } from "react/jsx-runtime";
var DropdownMenu = React15.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx24("div", { ref, className: cn2("relative", className), ...props }));
DropdownMenu.displayName = "DropdownMenu";
var DropdownMenuTrigger = React15.forwardRef(({ className, children, onToggle, asChild = false, ...props }, ref) => {
  if (asChild && React15.isValidElement(children)) {
    return React15.cloneElement(children, {
      ...props,
      ref,
      onClick: (e2) => {
        e2.stopPropagation();
        onToggle?.(true);
        children.props.onClick?.(e2);
      }
    });
  }
  return /* @__PURE__ */ jsx24(
    Button2,
    {
      ref,
      variant: "ghost",
      className: cn2(
        "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
        className
      ),
      onClick: (e2) => {
        e2.stopPropagation();
        onToggle?.(true);
      },
      ...props,
      children
    }
  );
});
DropdownMenuTrigger.displayName = "DropdownMenuTrigger";
var DropdownMenuContent = React15.forwardRef(({ className, align = "start", sideOffset = 4, open = false, onOpenChange, ...props }, ref) => {
  const contentRef = React15.useRef(null);
  React15.useEffect(() => {
    const handleClickOutside = (event) => {
      if (open && contentRef.current && !contentRef.current.contains(event.target)) {
        onOpenChange?.(false);
      }
    };
    if (open) {
      document.addEventListener("mousedown", handleClickOutside);
      return () => document.removeEventListener("mousedown", handleClickOutside);
    }
  }, [open, onOpenChange]);
  if (!open)
    return null;
  return /* @__PURE__ */ jsx24(
    "div",
    {
      ref: (node) => {
        contentRef.current = node;
        if (typeof ref === "function") {
          ref(node);
        } else if (ref) {
          ref.current = node;
        }
      },
      className: cn2(
        "absolute z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-gray-900 shadow-md animate-in fade-in-0 zoom-in-95",
        align === "end" ? "right-0" : "left-0",
        className
      ),
      style: { marginTop: sideOffset },
      onClick: (e2) => e2.stopPropagation(),
      ...props
    }
  );
});
DropdownMenuContent.displayName = "DropdownMenuContent";
var DropdownMenuItem = React15.forwardRef(({ className, inset, onSelect, onClick, ...props }, ref) => /* @__PURE__ */ jsx24(
  "div",
  {
    ref,
    className: cn2(
      "relative flex cursor-default select-none items-center justify-start rounded-sm px-2 py-1.5 text-sm text-left outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      inset && "pl-8",
      className
    ),
    onClick: (e2) => {
      e2.stopPropagation();
      onSelect?.();
      onClick?.(e2);
    },
    ...props
  }
));
DropdownMenuItem.displayName = "DropdownMenuItem";
var DropdownMenuSeparator = React15.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx24(
  "div",
  {
    ref,
    className: cn2("-mx-1 my-1 h-px bg-muted", className),
    ...props
  }
));
DropdownMenuSeparator.displayName = "DropdownMenuSeparator";
var DropdownMenuLabel = React15.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsx24(
  "div",
  {
    ref,
    className: cn2(
      "px-2 py-1.5 text-sm font-semibold",
      inset && "pl-8",
      className
    ),
    ...props
  }
));
DropdownMenuLabel.displayName = "DropdownMenuLabel";
var DropdownMenuCheckboxItem = React15.forwardRef(({ className, children, checked, ...props }, ref) => /* @__PURE__ */ jsxs12(
  "div",
  {
    ref,
    className: cn2(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsx24("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: checked && /* @__PURE__ */ jsx24(Check2, { className: "h-4 w-4" }) }),
      children
    ]
  }
));
DropdownMenuCheckboxItem.displayName = "DropdownMenuCheckboxItem";
var DropdownMenuRadioItem = React15.forwardRef(({ className, children, checked, ...props }, ref) => /* @__PURE__ */ jsxs12(
  "div",
  {
    ref,
    className: cn2(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsx24("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: checked && /* @__PURE__ */ jsx24("div", { className: "h-2 w-2 rounded-full bg-current" }) }),
      children
    ]
  }
));
DropdownMenuRadioItem.displayName = "DropdownMenuRadioItem";
var DropdownMenuShortcut = ({
  className,
  ...props
}) => {
  return /* @__PURE__ */ jsx24(
    "span",
    {
      className: cn2("ml-auto text-xs tracking-widest opacity-60", className),
      ...props
    }
  );
};
DropdownMenuShortcut.displayName = "DropdownMenuShortcut";
var DropdownMenuGroup = React15.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx24("div", { ref, className: cn2("", className), ...props }));
DropdownMenuGroup.displayName = "DropdownMenuGroup";
var DropdownMenuPortal = React15.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx24("div", { ref, className: cn2("", className), ...props }));
DropdownMenuPortal.displayName = "DropdownMenuPortal";
var DropdownMenuSub = React15.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx24("div", { ref, className: cn2("", className), ...props }));
DropdownMenuSub.displayName = "DropdownMenuSub";
var DropdownMenuSubContent = React15.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx24(
  "div",
  {
    ref,
    className: cn2(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg animate-in fade-in-0 zoom-in-95",
      className
    ),
    ...props
  }
));
DropdownMenuSubContent.displayName = "DropdownMenuSubContent";
var DropdownMenuSubTrigger = React15.forwardRef(({ className, inset, children, ...props }, ref) => /* @__PURE__ */ jsxs12(
  "div",
  {
    ref,
    className: cn2(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      inset && "pl-8",
      className
    ),
    ...props,
    children: [
      children,
      /* @__PURE__ */ jsx24(ChevronDown2, { className: "ml-auto h-4 w-4" })
    ]
  }
));
DropdownMenuSubTrigger.displayName = "DropdownMenuSubTrigger";
var DropdownMenuRadioGroup = React15.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx24("div", { ref, className: cn2("", className), ...props }));
DropdownMenuRadioGroup.displayName = "DropdownMenuRadioGroup";

// src/components/ui/table.tsx
import * as React16 from "react";
import { jsx as jsx25 } from "react/jsx-runtime";
var Table = React16.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx25("div", { className: "relative w-full overflow-auto", children: /* @__PURE__ */ jsx25(
  "table",
  {
    ref,
    className: cn2("w-full caption-bottom text-sm", className),
    ...props
  }
) }));
Table.displayName = "Table";
var TableHeader = React16.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx25("thead", { ref, className: cn2("[&_tr]:border-b", className), ...props }));
TableHeader.displayName = "TableHeader";
var TableBody = React16.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx25(
  "tbody",
  {
    ref,
    className: cn2("[&_tr:last-child]:border-0", className),
    ...props
  }
));
TableBody.displayName = "TableBody";
var TableFooter = React16.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx25(
  "tfoot",
  {
    ref,
    className: cn2(
      "border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",
      className
    ),
    ...props
  }
));
TableFooter.displayName = "TableFooter";
var TableRow = React16.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx25(
  "tr",
  {
    ref,
    className: cn2(
      "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",
      className
    ),
    ...props
  }
));
TableRow.displayName = "TableRow";
var TableHead = React16.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx25(
  "th",
  {
    ref,
    className: cn2(
      "h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",
      className
    ),
    ...props
  }
));
TableHead.displayName = "TableHead";
var TableCell = React16.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx25(
  "td",
  {
    ref,
    className: cn2("p-4 align-middle [&:has([role=checkbox])]:pr-0", className),
    ...props
  }
));
TableCell.displayName = "TableCell";
var TableCaption = React16.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx25(
  "caption",
  {
    ref,
    className: cn2("mt-4 text-sm text-muted-foreground", className),
    ...props
  }
));
TableCaption.displayName = "TableCaption";

// src/components/ui/price-input.tsx
import { useState as useState3, useEffect as useEffect3 } from "react";
import { jsx as jsx26, jsxs as jsxs13 } from "react/jsx-runtime";
var NumericInput = ({
  value,
  onChange,
  placeholder = "0",
  className,
  error: error2 = false,
  disabled = false,
  min = 0,
  max,
  step = 1,
  required = false,
  label,
  allowDecimals = true,
  maxDecimalPlaces = 2,
  suffix
}) => {
  const [displayValue, setDisplayValue] = useState3("");
  useEffect3(() => {
    setDisplayValue(formatValueForDisplay(value || 0));
  }, [value]);
  const formatValueForDisplay = (numValue) => {
    if (numValue === void 0 || numValue === null || isNaN(numValue)) {
      return "";
    }
    if (numValue === 0)
      return "";
    if (allowDecimals) {
      return numValue.toLocaleString("en-US", {
        minimumFractionDigits: 0,
        maximumFractionDigits: maxDecimalPlaces
      });
    } else {
      return numValue.toLocaleString("en-US");
    }
  };
  const handleInputChange = (inputValue) => {
    if (!inputValue || inputValue.trim() === "") {
      setDisplayValue("");
      onChange(0);
      return;
    }
    const regex = allowDecimals ? /[^\d.]/g : /[^\d]/g;
    const cleanValue = inputValue.replace(regex, "");
    if (allowDecimals) {
      const parts = cleanValue.split(".");
      if (parts.length > 2)
        return;
      if (parts[1] && parts[1].length > maxDecimalPlaces)
        return;
    }
    const numericValue = allowDecimals ? parseFloat(cleanValue) || 0 : parseInt(cleanValue) || 0;
    if (min !== void 0 && numericValue < min)
      return;
    if (max !== void 0 && numericValue > max)
      return;
    setDisplayValue(cleanValue);
    onChange(numericValue);
  };
  const handleBlur = () => {
    if (value && value > 0) {
      setDisplayValue(formatValueForDisplay(value));
    }
  };
  const handleFocus = () => {
    if (value && value > 0) {
      setDisplayValue(value.toString());
    }
  };
  return /* @__PURE__ */ jsxs13("div", { className: "space-y-2", children: [
    label && /* @__PURE__ */ jsxs13("label", { className: "text-sm font-medium text-text-primary", children: [
      label,
      required && /* @__PURE__ */ jsx26("span", { className: "text-red-500 ml-1", children: "*" })
    ] }),
    /* @__PURE__ */ jsxs13("div", { className: "relative", children: [
      /* @__PURE__ */ jsx26(
        Input,
        {
          type: "text",
          value: displayValue,
          onChange: (e2) => handleInputChange(e2.target.value),
          onBlur: handleBlur,
          onFocus: handleFocus,
          placeholder,
          className: cn(
            suffix ? "pr-12" : "",
            error2 && "border-red-500 focus:border-red-500",
            className
          ),
          disabled
        }
      ),
      suffix && /* @__PURE__ */ jsx26("span", { className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-text-secondary pointer-events-none", children: suffix })
    ] })
  ] });
};
var PriceInput = NumericInput;

// src/components/ui/numeric-input-demo.tsx
import { useState as useState4 } from "react";
import { jsx as jsx27, jsxs as jsxs14 } from "react/jsx-runtime";
var NumericInputDemo = () => {
  const [price, setPrice] = useState4(0);
  const [quantity, setQuantity] = useState4(0);
  const [weight, setWeight] = useState4(0);
  const [percentage, setPercentage] = useState4(0);
  return /* @__PURE__ */ jsxs14("div", { className: "space-y-6 p-6", children: [
    /* @__PURE__ */ jsx27("h1", { className: "text-2xl font-bold", children: "NumericInput Component Demo" }),
    /* @__PURE__ */ jsx27("p", { className: "text-gray-600", children: "This component can be used for both price and quantity inputs with different configurations." }),
    /* @__PURE__ */ jsxs14("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs14(Card, { children: [
        /* @__PURE__ */ jsx27(CardHeader, { children: /* @__PURE__ */ jsx27(CardTitle, { children: "Price Inputs (with decimals)" }) }),
        /* @__PURE__ */ jsxs14(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsx27(
            NumericInput,
            {
              label: "Price with Currency",
              value: price,
              onChange: setPrice,
              placeholder: "0.00",
              allowDecimals: true,
              maxDecimalPlaces: 2,
              suffix: "$"
            }
          ),
          /* @__PURE__ */ jsx27(
            NumericInput,
            {
              label: "Price with VND",
              value: price,
              onChange: setPrice,
              placeholder: "0.00",
              allowDecimals: true,
              maxDecimalPlaces: 0,
              suffix: "\u20AB"
            }
          ),
          /* @__PURE__ */ jsx27(
            NumericInput,
            {
              label: "Price without suffix",
              value: price,
              onChange: setPrice,
              placeholder: "0.00",
              allowDecimals: true,
              maxDecimalPlaces: 2
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs14(Card, { children: [
        /* @__PURE__ */ jsx27(CardHeader, { children: /* @__PURE__ */ jsx27(CardTitle, { children: "Quantity Inputs (no decimals)" }) }),
        /* @__PURE__ */ jsxs14(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsx27(
            NumericInput,
            {
              label: "Stock Quantity",
              value: quantity,
              onChange: setQuantity,
              placeholder: "0",
              allowDecimals: false,
              min: 0
            }
          ),
          /* @__PURE__ */ jsx27(
            NumericInput,
            {
              label: "Weight in grams",
              value: weight,
              onChange: setWeight,
              placeholder: "0",
              allowDecimals: false,
              min: 0,
              suffix: "g"
            }
          ),
          /* @__PURE__ */ jsx27(
            NumericInput,
            {
              label: "Percentage",
              value: percentage,
              onChange: setPercentage,
              placeholder: "0",
              allowDecimals: false,
              min: 0,
              max: 100,
              suffix: "%"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs14(Card, { children: [
      /* @__PURE__ */ jsx27(CardHeader, { children: /* @__PURE__ */ jsx27(CardTitle, { children: "Current Values" }) }),
      /* @__PURE__ */ jsx27(CardContent, { children: /* @__PURE__ */ jsxs14("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 text-sm", children: [
        /* @__PURE__ */ jsxs14("div", { children: [
          /* @__PURE__ */ jsx27("span", { className: "font-medium", children: "Price:" }),
          " $",
          price.toFixed(2)
        ] }),
        /* @__PURE__ */ jsxs14("div", { children: [
          /* @__PURE__ */ jsx27("span", { className: "font-medium", children: "Quantity:" }),
          " ",
          quantity
        ] }),
        /* @__PURE__ */ jsxs14("div", { children: [
          /* @__PURE__ */ jsx27("span", { className: "font-medium", children: "Weight:" }),
          " ",
          weight,
          "g"
        ] }),
        /* @__PURE__ */ jsxs14("div", { children: [
          /* @__PURE__ */ jsx27("span", { className: "font-medium", children: "Percentage:" }),
          " ",
          percentage,
          "%"
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs14(Card, { children: [
      /* @__PURE__ */ jsx27(CardHeader, { children: /* @__PURE__ */ jsx27(CardTitle, { children: "Features" }) }),
      /* @__PURE__ */ jsx27(CardContent, { children: /* @__PURE__ */ jsxs14("ul", { className: "space-y-2 text-sm", children: [
        /* @__PURE__ */ jsx27("li", { children: "\u2705 Thousand separators (1,000 instead of 1000)" }),
        /* @__PURE__ */ jsx27("li", { children: "\u2705 No leading zeros (can type 1000 directly)" }),
        /* @__PURE__ */ jsx27("li", { children: "\u2705 Configurable decimal places (0-2)" }),
        /* @__PURE__ */ jsx27("li", { children: "\u2705 Optional suffix (currency, units, etc.)" }),
        /* @__PURE__ */ jsx27("li", { children: "\u2705 Min/max constraints" }),
        /* @__PURE__ */ jsx27("li", { children: "\u2705 Error state support" }),
        /* @__PURE__ */ jsx27("li", { children: "\u2705 Required field support" }),
        /* @__PURE__ */ jsx27("li", { children: "\u2705 Customizable styling" }),
        /* @__PURE__ */ jsx27("li", { children: "\u2705 Works for both price and quantity inputs" })
      ] }) })
    ] })
  ] });
};

// src/components/ui/limit-input.tsx
import { jsx as jsx28, jsxs as jsxs15 } from "react/jsx-runtime";
var LimitInput = ({
  id,
  label,
  value,
  onChange,
  placeholder = "-1 (unlimited)",
  className,
  error: error2 = false,
  disabled = false,
  min = -1,
  max,
  required = false,
  helpText = "Use -1 for unlimited"
}) => {
  const handleChange = (e2) => {
    const inputValue = e2.target.value;
    if (!inputValue || inputValue.trim() === "") {
      onChange(-1);
      return;
    }
    const numericValue = parseInt(inputValue);
    if (isNaN(numericValue)) {
      return;
    }
    if (min !== void 0 && numericValue < min && numericValue !== -1) {
      return;
    }
    if (max !== void 0 && numericValue > max) {
      return;
    }
    onChange(numericValue);
  };
  const getDisplayValue = () => {
    if (value === void 0 || value === null) {
      return "";
    }
    return value.toString();
  };
  return /* @__PURE__ */ jsxs15("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsxs15(Label2, { htmlFor: id, children: [
      label,
      required && /* @__PURE__ */ jsx28("span", { className: "text-red-500 ml-1", children: "*" })
    ] }),
    /* @__PURE__ */ jsx28(
      Input,
      {
        id,
        type: "number",
        value: getDisplayValue(),
        onChange: handleChange,
        placeholder,
        min: min === -1 ? void 0 : min,
        max,
        disabled,
        className: cn(
          error2 && "border-red-500 focus:border-red-500",
          className
        )
      }
    ),
    helpText && /* @__PURE__ */ jsx28("p", { className: "text-xs text-gray-500", children: helpText })
  ] });
};

// src/components/ui/date-range-picker.tsx
import { useState as useState5, useRef as useRef2, useEffect as useEffect4 } from "react";
import { Calendar, ChevronLeft, ChevronRight as ChevronRight2, X as X2 } from "lucide-react";
import { jsx as jsx29, jsxs as jsxs16 } from "react/jsx-runtime";
var DateRangePicker = ({
  value = { from: void 0, to: void 0 },
  onChange,
  placeholder = "Select date range",
  className,
  disabled = false,
  minDate = /* @__PURE__ */ new Date(),
  maxDate,
  showPresets = true,
  format = "short",
  align = "left"
}) => {
  const [isOpen, setIsOpen] = useState5(false);
  const [currentMonth, setCurrentMonth] = useState5(() => {
    const startDate = value?.from || /* @__PURE__ */ new Date();
    return new Date(startDate.getFullYear(), startDate.getMonth(), 1);
  });
  const [hoveredDate, setHoveredDate] = useState5(null);
  const [tempRange, setTempRange] = useState5(value);
  const containerRef = useRef2(null);
  useEffect4(() => {
    setTempRange(value);
  }, [value]);
  useEffect4(() => {
    const handleClickOutside = (event) => {
      if (containerRef.current && !containerRef.current.contains(event.target)) {
        setIsOpen(false);
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);
  const formatDate11 = (date2, formatType = format) => {
    const day = String(date2.getDate()).padStart(2, "0");
    const month = String(date2.getMonth() + 1).padStart(2, "0");
    const year = date2.getFullYear();
    if (formatType === "long") {
      return `${day}/${month}/${year}`;
    }
    return `${day}/${month}`;
  };
  const formatDisplayValue = () => {
    if (!value?.from && !value?.to)
      return placeholder;
    if (value.from && value.to) {
      return `${formatDate11(value.from, "long")} - ${formatDate11(value.to, "long")}`;
    }
    if (value.from) {
      return `From ${formatDate11(value.from, "long")}`;
    }
    if (value.to) {
      return `To ${formatDate11(value.to, "long")}`;
    }
    return placeholder;
  };
  const getDaysInMonth = (date2) => {
    const year = date2.getFullYear();
    const month = date2.getMonth();
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth2 = lastDay.getDate();
    const startingDayOfWeek2 = firstDay.getDay();
    return { daysInMonth: daysInMonth2, startingDayOfWeek: startingDayOfWeek2 };
  };
  const isDateInRange = (date2) => {
    if (!tempRange.from && !tempRange.to)
      return false;
    const dateTime = date2.getTime();
    const fromTime = tempRange.from?.getTime() || 0;
    const toTime = tempRange.to?.getTime() || 0;
    if (tempRange.from && tempRange.to) {
      return dateTime >= fromTime && dateTime <= toTime;
    }
    if (tempRange.from) {
      return dateTime >= fromTime;
    }
    if (tempRange.to) {
      return dateTime <= toTime;
    }
    return false;
  };
  const isDateSelected = (date2) => {
    if (!tempRange.from && !tempRange.to)
      return false;
    const dateTime = date2.getTime();
    const fromTime = tempRange.from?.getTime() || 0;
    const toTime = tempRange.to?.getTime() || 0;
    return dateTime === fromTime || dateTime === toTime;
  };
  const isDateDisabled = (date2) => {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    if (minDate && date2 < minDate)
      return true;
    if (maxDate && date2 > maxDate)
      return true;
    return false;
  };
  const handleDateClick = (date2) => {
    if (isDateDisabled(date2))
      return;
    if (!tempRange.from || tempRange.from && tempRange.to) {
      setTempRange({ from: date2, to: void 0 });
    } else {
      if (date2 < tempRange.from) {
        setTempRange({ from: date2, to: tempRange.from });
      } else {
        setTempRange({ from: tempRange.from, to: date2 });
      }
    }
  };
  const handleDateHover = (date2) => {
    if (tempRange.from && !tempRange.to) {
      setHoveredDate(date2);
    }
  };
  const handleApply = () => {
    if (onChange) {
      onChange(tempRange);
    }
    setIsOpen(false);
  };
  const handleClear = () => {
    const clearedRange = { from: void 0, to: void 0 };
    setTempRange(clearedRange);
    if (onChange) {
      onChange(clearedRange);
    }
  };
  const handlePresetClick = (days) => {
    const today = /* @__PURE__ */ new Date();
    const from = new Date(today);
    from.setDate(today.getDate() + 1);
    const to = new Date(from);
    to.setDate(from.getDate() + days - 1);
    const newRange = { from, to };
    setTempRange(newRange);
    if (onChange) {
      onChange(newRange);
    }
    setIsOpen(false);
  };
  const navigateMonth = (direction) => {
    setCurrentMonth((prev) => {
      const newMonth = new Date(prev);
      if (direction === "prev") {
        newMonth.setMonth(prev.getMonth() - 1);
      } else {
        newMonth.setMonth(prev.getMonth() + 1);
      }
      return newMonth;
    });
  };
  const { daysInMonth, startingDayOfWeek } = getDaysInMonth(currentMonth);
  const weekdays = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];
  return /* @__PURE__ */ jsxs16("div", { className: cn2("relative", className), ref: containerRef, children: [
    /* @__PURE__ */ jsxs16(
      Button2,
      {
        variant: "outline",
        onClick: () => !disabled && setIsOpen(!isOpen),
        disabled,
        className: cn2(
          "w-full justify-start text-left font-normal",
          !value?.from && !value?.to && "text-muted-foreground"
        ),
        children: [
          /* @__PURE__ */ jsx29(Calendar, { className: "mr-2 h-4 w-4" }),
          formatDisplayValue()
        ]
      }
    ),
    isOpen && /* @__PURE__ */ jsxs16("div", { className: cn2(
      "absolute top-full mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-2",
      align === "left" ? "left-0" : "right-0"
    ), children: [
      /* @__PURE__ */ jsxs16("div", { className: "flex items-center justify-between mb-2", children: [
        /* @__PURE__ */ jsx29("h3", { className: "text-sm font-semibold text-gray-900", children: "Ch\u1ECDn kho\u1EA3ng th\u1EDDi gian" }),
        /* @__PURE__ */ jsx29(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => setIsOpen(false),
            className: "h-6 w-6 p-0",
            children: /* @__PURE__ */ jsx29(X2, { className: "h-4 w-4" })
          }
        )
      ] }),
      showPresets && /* @__PURE__ */ jsxs16("div", { className: "mb-4 p-3 bg-gray-50 rounded-lg", children: [
        /* @__PURE__ */ jsx29("h4", { className: "text-xs font-medium text-gray-600 mb-2", children: "G\u1EE3i \xFD nhanh" }),
        /* @__PURE__ */ jsx29("div", { className: "flex flex-wrap gap-2", children: [1, 3, 7, 14, 30].map((days) => /* @__PURE__ */ jsxs16(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => handlePresetClick(days),
            className: "text-xs h-7 px-2",
            children: [
              days,
              " ",
              days === 1 ? "day" : "days"
            ]
          },
          days
        )) })
      ] }),
      /* @__PURE__ */ jsxs16("div", { className: "flex items-center justify-between mb-2", children: [
        /* @__PURE__ */ jsx29(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => navigateMonth("prev"),
            className: "h-8 w-8 p-0",
            children: /* @__PURE__ */ jsx29(ChevronLeft, { className: "h-4 w-4" })
          }
        ),
        /* @__PURE__ */ jsx29("h4", { className: "text-sm font-medium text-gray-900", children: currentMonth.toLocaleDateString("en-US", {
          month: "long",
          year: "numeric"
        }) }),
        /* @__PURE__ */ jsx29(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => navigateMonth("next"),
            className: "h-8 w-8 p-0",
            children: /* @__PURE__ */ jsx29(ChevronRight2, { className: "h-4 w-4" })
          }
        )
      ] }),
      /* @__PURE__ */ jsxs16("div", { className: "mb-2", children: [
        /* @__PURE__ */ jsx29("div", { className: "grid grid-cols-7 gap-2 mb-2", children: weekdays.map((day) => /* @__PURE__ */ jsx29("div", { className: "text-sm font-medium text-gray-500 text-center py-2", children: day }, day)) }),
        /* @__PURE__ */ jsxs16("div", { className: "grid grid-cols-7 gap-2", children: [
          Array.from({ length: startingDayOfWeek }, (_, i) => /* @__PURE__ */ jsx29("div", { className: "h-8" }, `empty-${i}`)),
          Array.from({ length: daysInMonth }, (_, i) => {
            const date2 = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), i + 1);
            const isDisabled = isDateDisabled(date2);
            const isSelected = isDateSelected(date2);
            const isInRange = isDateInRange(date2);
            const isHovered = hoveredDate && date2.getTime() === hoveredDate.getTime();
            return /* @__PURE__ */ jsx29(
              Button2,
              {
                variant: "ghost",
                onClick: () => handleDateClick(date2),
                onMouseEnter: () => handleDateHover(date2),
                disabled: isDisabled,
                className: cn2(
                  "h-8 w-8 text-sm rounded-lg transition-colors relative p-0",
                  isDisabled && "text-gray-300 cursor-not-allowed",
                  !isDisabled && "hover:bg-gray-100",
                  isSelected && "bg-blue-600 text-white hover:bg-blue-700",
                  isInRange && !isSelected && "bg-blue-100 text-blue-900",
                  isHovered && !isSelected && "bg-blue-50"
                ),
                children: date2.getDate()
              },
              i
            );
          })
        ] })
      ] }),
      /* @__PURE__ */ jsxs16("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx29(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: handleClear,
            className: "flex-1",
            children: "Clear"
          }
        ),
        /* @__PURE__ */ jsx29(
          Button2,
          {
            size: "sm",
            onClick: handleApply,
            className: "flex-1",
            children: "Apply"
          }
        )
      ] })
    ] })
  ] });
};

// src/components/ui/pagination.tsx
import React20 from "react";
import { useCommonTranslations } from "@rentalshop/hooks";
import { jsx as jsx30, jsxs as jsxs17 } from "react/jsx-runtime";
function Pagination({
  currentPage,
  totalPages,
  total,
  limit,
  onPageChange,
  itemName = "items"
}) {
  const t2 = useCommonTranslations();
  const getPageNumbers = () => {
    const pages = [];
    const maxVisiblePages = 5;
    if (totalPages <= maxVisiblePages) {
      for (let i = 1; i <= totalPages; i++) {
        pages.push(i);
      }
    } else {
      if (currentPage <= 3) {
        for (let i = 1; i <= 4; i++) {
          pages.push(i);
        }
        pages.push("...");
        pages.push(totalPages);
      } else if (currentPage >= totalPages - 2) {
        pages.push(1);
        pages.push("...");
        for (let i = totalPages - 3; i <= totalPages; i++) {
          pages.push(i);
        }
      } else {
        pages.push(1);
        pages.push("...");
        for (let i = currentPage - 1; i <= currentPage + 1; i++) {
          pages.push(i);
        }
        pages.push("...");
        pages.push(totalPages);
      }
    }
    return pages;
  };
  const startItem = (currentPage - 1) * limit + 1;
  const endItem = Math.min(currentPage * limit, total);
  if (totalPages <= 1) {
    return null;
  }
  return /* @__PURE__ */ jsxs17("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0", children: [
    /* @__PURE__ */ jsxs17("div", { className: "text-sm text-gray-700 dark:text-gray-300", children: [
      t2("pagination.showing"),
      " ",
      startItem,
      " ",
      t2("pagination.to"),
      " ",
      endItem,
      " ",
      t2("pagination.of"),
      " ",
      total,
      " ",
      itemName
    ] }),
    /* @__PURE__ */ jsxs17("div", { className: "flex items-center space-x-2", children: [
      /* @__PURE__ */ jsx30(
        Button2,
        {
          variant: "outline",
          size: "sm",
          onClick: () => onPageChange(currentPage - 1),
          disabled: currentPage === 1,
          children: t2("buttons.previous")
        }
      ),
      /* @__PURE__ */ jsx30("div", { className: "flex items-center space-x-1", children: getPageNumbers().map((page, index) => /* @__PURE__ */ jsx30(React20.Fragment, { children: page === "..." ? /* @__PURE__ */ jsx30("span", { className: "px-3 py-2 text-gray-500", children: "..." }) : /* @__PURE__ */ jsx30(
        Button2,
        {
          variant: currentPage === page ? "default" : "outline",
          size: "sm",
          onClick: () => onPageChange(page),
          className: "w-10 h-10 p-0",
          children: page
        }
      ) }, index)) }),
      /* @__PURE__ */ jsx30(
        Button2,
        {
          variant: "outline",
          size: "sm",
          onClick: () => onPageChange(currentPage + 1),
          disabled: currentPage === totalPages,
          children: t2("buttons.next")
        }
      )
    ] })
  ] });
}

// src/components/ui/radio-group.tsx
import * as React21 from "react";
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group";
import { Circle } from "lucide-react";
import { jsx as jsx31 } from "react/jsx-runtime";
var RadioGroup = React21.forwardRef(({ className, ...props }, ref) => {
  return /* @__PURE__ */ jsx31(
    RadioGroupPrimitive.Root,
    {
      className: cn2("grid gap-2", className),
      ...props,
      ref
    }
  );
});
RadioGroup.displayName = RadioGroupPrimitive.Root.displayName;
var RadioGroupItem = React21.forwardRef(({ className, ...props }, ref) => {
  return /* @__PURE__ */ jsx31(
    RadioGroupPrimitive.Item,
    {
      ref,
      className: cn2(
        "aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
        className
      ),
      ...props,
      children: /* @__PURE__ */ jsx31(RadioGroupPrimitive.Indicator, { className: "flex items-center justify-center", children: /* @__PURE__ */ jsx31(Circle, { className: "h-2.5 w-2.5 fill-current text-current" }) })
    }
  );
});
RadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName;

// src/components/ui/skeleton.tsx
import { jsx as jsx32, jsxs as jsxs18 } from "react/jsx-runtime";
function Skeleton({ className }) {
  return /* @__PURE__ */ jsx32(
    "div",
    {
      className: cn2(
        "animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",
        className
      )
    }
  );
}
function CardSkeleton({ className }) {
  return /* @__PURE__ */ jsx32("div", { className: cn2("rounded-lg border bg-card p-6", className), children: /* @__PURE__ */ jsxs18("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-4 w-3/4" }),
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-4 w-1/2" }),
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-4 w-2/3" })
  ] }) });
}
function TableRowSkeleton({ columns = 4 }) {
  return /* @__PURE__ */ jsx32("tr", { className: "border-b transition-colors hover:bg-muted/50", children: Array.from({ length: columns }).map((_, index) => /* @__PURE__ */ jsx32("td", { className: "p-4", children: /* @__PURE__ */ jsx32(Skeleton, { className: "h-4 w-full" }) }, index)) });
}
function TableSkeleton({
  rows = 5,
  columns = 4,
  className
}) {
  return /* @__PURE__ */ jsx32("div", { className: cn2("w-full", className), children: /* @__PURE__ */ jsxs18("div", { className: "rounded-md border", children: [
    /* @__PURE__ */ jsx32("div", { className: "border-b bg-muted/50 p-4", children: /* @__PURE__ */ jsxs18("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-6 w-32" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-9 w-24" })
    ] }) }),
    /* @__PURE__ */ jsxs18("table", { className: "w-full", children: [
      /* @__PURE__ */ jsx32("thead", { className: "border-b bg-muted/50", children: /* @__PURE__ */ jsx32("tr", { children: Array.from({ length: columns }).map((_, index) => /* @__PURE__ */ jsx32("th", { className: "p-4 text-left font-medium", children: /* @__PURE__ */ jsx32(Skeleton, { className: "h-4 w-20" }) }, index)) }) }),
      /* @__PURE__ */ jsx32("tbody", { children: Array.from({ length: rows }).map((_, rowIndex) => /* @__PURE__ */ jsx32(TableRowSkeleton, { columns }, rowIndex)) })
    ] })
  ] }) });
}
function GridSkeleton({
  items = 6,
  className
}) {
  return /* @__PURE__ */ jsx32("div", { className: cn2("grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3", className), children: Array.from({ length: items }).map((_, index) => /* @__PURE__ */ jsx32(CardSkeleton, {}, index)) });
}
function FormSkeleton({ className }) {
  return /* @__PURE__ */ jsxs18("div", { className: cn2("space-y-6", className), children: [
    /* @__PURE__ */ jsxs18("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-6 w-24" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-10 w-full" })
    ] }),
    /* @__PURE__ */ jsxs18("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-6 w-20" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-10 w-full" })
    ] }),
    /* @__PURE__ */ jsxs18("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-6 w-28" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-24 w-full" })
    ] }),
    /* @__PURE__ */ jsxs18("div", { className: "flex gap-3", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-10 w-24" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-10 w-24" })
    ] })
  ] });
}
function NavigationSkeleton({ className }) {
  return /* @__PURE__ */ jsx32("nav", { className: cn2("flex items-center space-x-4", className), children: Array.from({ length: 5 }).map((_, index) => /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-20" }, index)) });
}
function StatsSkeleton({ className }) {
  return /* @__PURE__ */ jsx32("div", { className: cn2("grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4", className), children: Array.from({ length: 4 }).map((_, index) => /* @__PURE__ */ jsx32("div", { className: "rounded-lg border bg-card p-6", children: /* @__PURE__ */ jsxs18("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-4 w-20" }),
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-16" }),
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-3 w-24" })
  ] }) }, index)) });
}
function CalendarSkeleton({ className }) {
  return /* @__PURE__ */ jsxs18("div", { className: cn2("space-y-4", className), children: [
    /* @__PURE__ */ jsxs18("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-32" }),
      /* @__PURE__ */ jsxs18("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-8" }),
        /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-8" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs18("div", { className: "grid grid-cols-7 gap-1", children: [
      Array.from({ length: 7 }).map((_, index) => /* @__PURE__ */ jsx32("div", { className: "h-10 rounded border p-2", children: /* @__PURE__ */ jsx32(Skeleton, { className: "h-4 w-6" }) }, index)),
      Array.from({ length: 35 }).map((_, index) => /* @__PURE__ */ jsx32("div", { className: "h-20 rounded border p-2", children: /* @__PURE__ */ jsxs18("div", { className: "space-y-1", children: [
        /* @__PURE__ */ jsx32(Skeleton, { className: "h-3 w-8" }),
        /* @__PURE__ */ jsx32(Skeleton, { className: "h-2 w-6" })
      ] }) }, index))
    ] })
  ] });
}
function SearchSkeleton({ className }) {
  return /* @__PURE__ */ jsxs18("div", { className: cn2("space-y-4", className), children: [
    /* @__PURE__ */ jsxs18("div", { className: "flex gap-2", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-10 flex-1" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-10 w-24" })
    ] }),
    /* @__PURE__ */ jsxs18("div", { className: "flex gap-2", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-20" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-24" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-16" })
    ] })
  ] });
}
function PaginationSkeleton({ className }) {
  return /* @__PURE__ */ jsxs18("div", { className: cn2("flex items-center justify-between", className), children: [
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-4 w-32" }),
    /* @__PURE__ */ jsxs18("div", { className: "flex gap-1", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-8" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-8" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-8" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-8" })
    ] })
  ] });
}
function SidebarSkeleton({ className }) {
  return /* @__PURE__ */ jsxs18("div", { className: cn2("w-64 space-y-4 p-4", className), children: [
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-32" }),
    /* @__PURE__ */ jsx32("div", { className: "space-y-2", children: Array.from({ length: 6 }).map((_, index) => /* @__PURE__ */ jsx32(Skeleton, { className: "h-10 w-full" }, index)) })
  ] });
}
function HeaderSkeleton({ className }) {
  return /* @__PURE__ */ jsx32("header", { className: cn2("border-b bg-background", className), children: /* @__PURE__ */ jsxs18("div", { className: "flex h-16 items-center justify-between px-4", children: [
    /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-32" }),
    /* @__PURE__ */ jsxs18("div", { className: "flex items-center gap-4", children: [
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-8" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-8" }),
      /* @__PURE__ */ jsx32(Skeleton, { className: "h-8 w-24" })
    ] })
  ] }) });
}

// src/components/ui/product-availability-async-display.tsx
import { useState as useState6, useEffect as useEffect5 } from "react";
import { Loader2 } from "lucide-react";
import { jsx as jsx33, jsxs as jsxs19 } from "react/jsx-runtime";
var ProductAvailabilityAsyncDisplay = ({
  product,
  pickupDate,
  returnDate,
  requestedQuantity,
  getProductAvailabilityStatus
}) => {
  const [availability, setAvailability] = useState6(null);
  const [isLoading, setIsLoading] = useState6(false);
  const [error2, setError] = useState6(null);
  useEffect5(() => {
    if (!product || !pickupDate || !returnDate) {
      setAvailability(null);
      return;
    }
    const checkAvailability = async () => {
      setIsLoading(true);
      setError(null);
      try {
        const status = await getProductAvailabilityStatus(
          product,
          pickupDate,
          returnDate,
          requestedQuantity
        );
        setAvailability(status);
      } catch (err) {
        setError("Failed to check availability");
        console.error("Availability check error:", err);
      } finally {
        setIsLoading(false);
      }
    };
    const timeoutId = setTimeout(checkAvailability, 300);
    return () => clearTimeout(timeoutId);
  }, [product, pickupDate, returnDate, requestedQuantity, getProductAvailabilityStatus]);
  if (!product)
    return null;
  if (isLoading) {
    return /* @__PURE__ */ jsxs19("div", { className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600", children: [
      /* @__PURE__ */ jsx33(Loader2, { className: "w-3 h-3 animate-spin mr-1" }),
      "Checking..."
    ] });
  }
  if (error2) {
    return /* @__PURE__ */ jsx33("div", { className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-600", children: "\u26A0\uFE0F Error checking availability" });
  }
  if (!availability) {
    return null;
  }
  return /* @__PURE__ */ jsxs19("div", { className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${availability.color}`, children: [
    availability.text,
    availability.status === "date-conflict" && /* @__PURE__ */ jsx33("span", { className: "ml-1", children: "\u26A0\uFE0F" }),
    availability.status === "out-of-stock" && /* @__PURE__ */ jsx33("span", { className: "ml-1", children: "\u{1F6AB}" }),
    availability.status === "unavailable" && /* @__PURE__ */ jsx33("span", { className: "ml-1", children: "\u26A0\uFE0F" }),
    availability.status === "available" && /* @__PURE__ */ jsx33("span", { className: "ml-1", children: "\u2705" })
  ] });
};

// src/components/ui/product-availability-badge.tsx
import { CheckCircle as CheckCircle3, XCircle as XCircle3, Package, Loader2 as Loader22 } from "lucide-react";
import { jsx as jsx34, jsxs as jsxs20 } from "react/jsx-runtime";
var ProductAvailabilityBadge = ({
  availability,
  isLoading = false,
  size = "sm"
}) => {
  if (isLoading) {
    return /* @__PURE__ */ jsxs20("div", { className: "inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200", children: [
      /* @__PURE__ */ jsx34(Loader22, { className: "w-3 h-3 animate-spin" }),
      /* @__PURE__ */ jsx34("span", { children: "Checking..." })
    ] });
  }
  if (!availability) {
    return null;
  }
  const { status, available, storage } = availability;
  const getStatusStyle = () => {
    switch (status) {
      case "available":
        return {
          bgColor: "bg-green-100",
          textColor: "text-green-800",
          borderColor: "border-green-200",
          icon: CheckCircle3,
          iconColor: "text-green-600"
        };
      case "unavailable":
        return {
          bgColor: "bg-red-100",
          textColor: "text-red-800",
          borderColor: "border-red-200",
          icon: XCircle3,
          iconColor: "text-red-600"
        };
      default:
        return {
          bgColor: "bg-gray-100",
          textColor: "text-gray-800",
          borderColor: "border-gray-200",
          icon: Package,
          iconColor: "text-gray-600"
        };
    }
  };
  const getStatusText = () => {
    switch (status) {
      case "available":
        return "Available";
      case "unavailable":
        return "Unavailable";
      default:
        return "Unknown";
    }
  };
  const getTooltipText = () => {
    const { hasDateConflict, conflictingQuantity, remainingStock } = availability;
    switch (status) {
      case "available":
        return `Available for rent: ${remainingStock || available}/${storage}`;
      case "unavailable":
        if (hasDateConflict) {
          return `Date conflict: ${conflictingQuantity} items rented during this period`;
        } else {
          return `Currently unavailable: ${storage - (remainingStock || available)} items rented out`;
        }
      default:
        return "Stock information unavailable";
    }
  };
  const style = getStatusStyle();
  const IconComponent = style.icon;
  const sizeClasses2 = {
    sm: "px-2 py-1 text-xs",
    md: "px-3 py-1.5 text-sm",
    lg: "px-4 py-2 text-base"
  };
  const iconSizes = {
    sm: "w-3 h-3",
    md: "w-4 h-4",
    lg: "w-5 h-5"
  };
  return /* @__PURE__ */ jsxs20(
    "div",
    {
      className: `inline-flex items-center gap-1 rounded-full font-medium border transition-colors duration-200 ${sizeClasses2[size]} ${style.bgColor} ${style.textColor} ${style.borderColor}`,
      title: getTooltipText(),
      children: [
        /* @__PURE__ */ jsx34(IconComponent, { className: `${iconSizes[size]} ${style.iconColor}` }),
        /* @__PURE__ */ jsx34("span", { children: getStatusText() })
      ]
    }
  );
};

// src/components/ui/product-availability-warning.tsx
import { AlertTriangle as AlertTriangle4, CheckCircle as CheckCircle4 } from "lucide-react";
import { jsx as jsx35, jsxs as jsxs21 } from "react/jsx-runtime";
var ProductAvailabilityWarning = ({
  orderItems,
  availabilityData
}) => {
  if (!orderItems || orderItems.length === 0) {
    return null;
  }
  const problematicProducts = orderItems.filter((order) => {
    const availability = availabilityData[order.productId];
    if (!availability)
      return false;
    return availability.status === "unavailable";
  });
  if (problematicProducts.length === 0) {
    return null;
  }
  const getWarningType = () => {
    const hasUnavailable = problematicProducts.some(
      (p2) => availabilityData[p2.productId]?.status === "unavailable"
    );
    if (hasUnavailable)
      return "warning";
    return "info";
  };
  const getWarningIcon = () => {
    const type = getWarningType();
    switch (type) {
      case "warning":
        return /* @__PURE__ */ jsx35(AlertTriangle4, { className: "w-5 h-5 text-orange-600" });
      default:
        return /* @__PURE__ */ jsx35(CheckCircle4, { className: "w-5 h-5 text-blue-600" });
    }
  };
  const getWarningClass = () => {
    const type = getWarningType();
    switch (type) {
      case "warning":
        return "bg-orange-50 border-orange-200 text-orange-800";
      default:
        return "bg-blue-50 border-blue-200 text-blue-800";
    }
  };
  const getWarningTitle = () => {
    const type = getWarningType();
    switch (type) {
      case "warning":
        return "Some products may not be available";
      default:
        return "Stock information";
    }
  };
  return /* @__PURE__ */ jsx35("div", { className: `p-4 rounded-lg border ${getWarningClass()} mb-4`, children: /* @__PURE__ */ jsxs21("div", { className: "flex items-start gap-3", children: [
    getWarningIcon(),
    /* @__PURE__ */ jsxs21("div", { className: "flex-1", children: [
      /* @__PURE__ */ jsx35("h4", { className: "font-medium mb-2", children: getWarningTitle() }),
      /* @__PURE__ */ jsx35("div", { className: "space-y-2", children: problematicProducts.map((product) => {
        const availability = availabilityData[product.productId];
        if (!availability)
          return null;
        const getProductStatusText = () => {
          const { hasDateConflict, conflictingQuantity } = availability;
          switch (availability.status) {
            case "unavailable":
              if (hasDateConflict) {
                return `Date conflict: ${conflictingQuantity} items`;
              } else {
                return "Currently unavailable";
              }
            default:
              return "Unknown status";
          }
        };
        return /* @__PURE__ */ jsxs21("div", { className: "text-sm", children: [
          /* @__PURE__ */ jsx35("span", { className: "font-medium", children: product.productName }),
          /* @__PURE__ */ jsx35("span", { className: "mx-2", children: "-" }),
          /* @__PURE__ */ jsx35("span", { children: getProductStatusText() }),
          /* @__PURE__ */ jsxs21("span", { className: "text-xs opacity-75 ml-2", children: [
            "(Requested: ",
            product.quantity,
            ")"
          ] })
        ] }, product.productId);
      }) })
    ] })
  ] }) });
};

// src/components/ui/searchable-select.tsx
import * as React23 from "react";
import { ChevronDown as ChevronDown3 } from "lucide-react";
import { Fragment, jsx as jsx36, jsxs as jsxs22 } from "react/jsx-runtime";
var SearchableSelect = ({
  value,
  onChange,
  options,
  placeholder = "Ch\u1ECDn...",
  searchPlaceholder = "T\xECm ki\u1EBFm...",
  className,
  onSearch,
  emptyText = "Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u",
  displayMode = "input",
  showAddNew = false,
  addNewText = "Add New",
  onAddNew
}) => {
  const [open, setOpen] = React23.useState(false);
  const [query, setQuery] = React23.useState("");
  const [internalOptions, setInternalOptions] = React23.useState(options || []);
  const rootRef = React23.useRef(null);
  const onSearchRef = React23.useRef(onSearch);
  const debounceTimeoutRef = React23.useRef(null);
  React23.useEffect(() => {
    onSearchRef.current = onSearch;
  }, [onSearch]);
  React23.useEffect(() => {
    if (onSearch) {
      setInternalOptions([]);
    } else {
      setInternalOptions(options || []);
    }
  }, [onSearch, options]);
  React23.useEffect(() => {
    let active = true;
    const DEBOUNCE_DELAY = 300;
    if (debounceTimeoutRef.current) {
      clearTimeout(debounceTimeoutRef.current);
    }
    const runSearch = async () => {
      const currentOnSearch = onSearchRef.current;
      if (currentOnSearch && query.trim()) {
        console.log("\u{1F50D} SearchableSelect: Making API call for query:", query);
        const res = await currentOnSearch(query);
        if (active && Array.isArray(res)) {
          console.log("\u{1F50D} SearchableSelect: Received results:", res.length);
          setInternalOptions(res);
        }
      } else if (currentOnSearch && !query.trim() && !value) {
        console.log("\u{1F50D} SearchableSelect: Clearing results for empty query (no selection)");
        setInternalOptions([]);
      }
    };
    if (query.trim()) {
      debounceTimeoutRef.current = setTimeout(() => {
        runSearch();
      }, DEBOUNCE_DELAY);
    } else if (!query.trim() && !value) {
      setInternalOptions([]);
    }
    return () => {
      active = false;
      if (debounceTimeoutRef.current) {
        clearTimeout(debounceTimeoutRef.current);
      }
    };
  }, [query, value]);
  const filtered = React23.useMemo(() => {
    console.log("\u{1F50D} SearchableSelect: Filtering with query:", query, "onSearch:", !!onSearch, "options count:", options?.length || 0);
    if (onSearch) {
      if (query.trim()) {
        console.log("\u{1F50D} SearchableSelect: Search mode - returning internalOptions:", internalOptions.length);
        return internalOptions;
      } else {
        console.log("\u{1F50D} SearchableSelect: Search mode - returning empty array");
        return [];
      }
    }
    const q = query.trim().toLowerCase();
    if (!q) {
      console.log("\u{1F50D} SearchableSelect: No query - returning all options:", (options || []).length);
      return options || [];
    }
    const filtered2 = options?.filter((o2) => o2.label.toLowerCase().includes(q));
    console.log("\u{1F50D} SearchableSelect: Filtered results:", filtered2?.length || 0, "for query:", q);
    return filtered2 || [];
  }, [query, internalOptions, onSearch, options]);
  const selected = internalOptions.find((o2) => o2.value === String(value));
  const displayValue = selected?.label || query;
  React23.useEffect(() => {
    const handler = (e2) => {
      const el = rootRef.current;
      if (!el)
        return;
      if (open && !el.contains(e2.target)) {
        setOpen(false);
      }
    };
    document.addEventListener("mousedown", handler);
    document.addEventListener("touchstart", handler);
    return () => {
      document.removeEventListener("mousedown", handler);
      document.removeEventListener("touchstart", handler);
    };
  }, [open]);
  const handleSelect = (option) => {
    onChange?.(parseInt(option.value));
    setOpen(false);
    if (onSearch) {
      setInternalOptions([option]);
    }
    setTimeout(() => {
      setQuery("");
    }, 100);
  };
  return /* @__PURE__ */ jsxs22("div", { className: cn2("relative", className), ref: rootRef, children: [
    displayMode === "input" ? /* @__PURE__ */ jsxs22(Fragment, { children: [
      /* @__PURE__ */ jsx36(
        "input",
        {
          value: displayValue,
          onFocus: () => {
            setOpen(true);
          },
          onChange: (e2) => {
            setQuery(e2.target.value);
            setOpen(true);
          },
          onBlur: () => {
            setTimeout(() => {
              setOpen(false);
            }, 300);
          },
          placeholder: selected ? selected.label : placeholder,
          className: cn2(
            "h-11 w-full rounded-lg border border-gray-300 bg-white pl-4 pr-12 text-sm transition-all duration-200",
            "focus:bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:ring-offset-0",
            "hover:border-gray-400"
          )
        }
      ),
      /* @__PURE__ */ jsx36("span", { className: "pointer-events-none absolute right-10 top-1/2 -translate-y-1/2 h-6 w-px bg-gray-300" }),
      /* @__PURE__ */ jsx36(
        Button2,
        {
          variant: "ghost",
          size: "icon",
          type: "button",
          "aria-label": "Toggle options",
          className: "absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-150 h-6 w-6 p-0",
          onMouseDown: (e2) => {
            e2.preventDefault();
            setOpen((o2) => !o2);
          },
          children: /* @__PURE__ */ jsx36(ChevronDown3, { className: "h-5 w-5" })
        }
      ),
      query && /* @__PURE__ */ jsx36(
        Button2,
        {
          variant: "ghost",
          size: "icon",
          type: "button",
          onClick: () => {
            setQuery("");
            if (onSearch) {
              setInternalOptions([]);
            } else {
              setInternalOptions(options || []);
            }
            setOpen(false);
          },
          className: "absolute right-12 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-150 h-6 w-6 p-0",
          children: "\u2715"
        }
      )
    ] }) : /* @__PURE__ */ jsxs22(
      Button2,
      {
        variant: "outline",
        type: "button",
        onClick: () => setOpen((v2) => !v2),
        className: cn2(
          "h-11 w-full rounded-lg border border-gray-300 bg-white px-4 text-left text-sm flex items-center justify-between transition-all duration-200",
          "hover:bg-gray-50 hover:border-gray-400 focus:bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:ring-offset-0"
        ),
        children: [
          /* @__PURE__ */ jsx36("span", { className: cn2(!selected && "text-gray-400"), children: selected ? selected.label : placeholder }),
          /* @__PURE__ */ jsx36(ChevronDown3, { className: "h-5 w-5 text-gray-500" })
        ]
      }
    ),
    open && /* @__PURE__ */ jsx36("div", { className: "absolute z-[9999] mt-1 w-full rounded-lg border border-gray-200 bg-white shadow-lg ring-1 ring-black ring-opacity-5", children: /* @__PURE__ */ jsx36("div", { className: "max-h-64 overflow-auto py-2", children: filtered.length === 0 ? /* @__PURE__ */ jsxs22("div", { className: "px-4 py-6 text-center text-sm text-gray-500", children: [
      /* @__PURE__ */ jsx36("div", { className: "w-8 h-8 mx-auto mb-2 text-gray-300", children: /* @__PURE__ */ jsx36("svg", { className: "w-8 h-8", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx36("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" }) }) }),
      /* @__PURE__ */ jsx36("div", { children: emptyText })
    ] }) : /* @__PURE__ */ jsxs22(Fragment, { children: [
      showAddNew && onAddNew && /* @__PURE__ */ jsxs22(
        Button2,
        {
          variant: "ghost",
          type: "button",
          onClick: () => {
            onAddNew();
            setOpen(false);
          },
          className: "flex w-full items-center gap-3 px-4 py-3 text-left text-sm hover:bg-green-50 hover:text-green-700 transition-all duration-150 ease-in-out border-b border-gray-100 h-auto justify-start rounded-none",
          children: [
            /* @__PURE__ */ jsx36("div", { className: "flex-shrink-0 w-5 h-5 text-green-500", children: /* @__PURE__ */ jsx36("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx36("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 6v6m0 0v6m0-6h6m-6 0H6" }) }) }),
            /* @__PURE__ */ jsx36("div", { className: "flex-1 min-w-0", children: /* @__PURE__ */ jsx36("div", { className: "font-medium text-green-700", children: addNewText }) })
          ]
        }
      ),
      filtered.map((opt) => {
        return /* @__PURE__ */ jsxs22(
          Button2,
          {
            variant: "ghost",
            type: "button",
            onClick: () => {
              handleSelect(opt);
            },
            className: cn2(
              "flex w-full items-center gap-3 px-4 py-3 text-left text-sm hover:bg-gray-50 hover:text-gray-900 transition-all duration-150 ease-in-out h-auto justify-start rounded-none",
              value === parseInt(opt.value) && "bg-blue-50 text-blue-700 hover:bg-blue-100"
            ),
            children: [
              opt.type === "product" && opt.image ? (
                // Product with image
                /* @__PURE__ */ jsxs22("div", { className: "flex-shrink-0 w-12 h-12 rounded-lg overflow-hidden border border-gray-200", children: [
                  /* @__PURE__ */ jsx36(
                    "img",
                    {
                      src: opt.image,
                      alt: opt.label,
                      className: "w-full h-full object-cover",
                      onError: (e2) => {
                        e2.currentTarget.style.display = "none";
                        e2.currentTarget.nextElementSibling?.classList.remove("hidden");
                      }
                    }
                  ),
                  /* @__PURE__ */ jsx36("div", { className: "hidden w-full h-full bg-gray-100 flex items-center justify-center", children: /* @__PURE__ */ jsx36("svg", { className: "w-6 h-6 text-gray-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx36("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" }) }) })
                ] })
              ) : opt.type === "product" ? (
                // Product without image - use package icon
                /* @__PURE__ */ jsx36("div", { className: "flex-shrink-0 w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center", children: /* @__PURE__ */ jsx36("svg", { className: "w-6 h-6 text-gray-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx36("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" }) }) })
              ) : (
                // Customer or default - use user icon
                /* @__PURE__ */ jsx36("div", { className: "flex-shrink-0 w-5 h-5 text-gray-400", children: /* @__PURE__ */ jsx36("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx36("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" }) }) })
              ),
              /* @__PURE__ */ jsx36("div", { className: "flex-1 min-w-0", children: opt.type === "product" ? (
                // Product layout with rich information
                /* @__PURE__ */ jsxs22("div", { className: "space-y-1", children: [
                  /* @__PURE__ */ jsx36("div", { className: "font-medium text-gray-900 truncate", children: opt.label }),
                  opt.subtitle && /* @__PURE__ */ jsx36("div", { className: "text-sm text-gray-600 truncate", children: opt.subtitle }),
                  opt.details && opt.details.length > 0 && /* @__PURE__ */ jsx36("div", { className: "flex flex-wrap gap-2", children: opt.details.map((detail, index) => /* @__PURE__ */ jsx36(
                    "span",
                    {
                      className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",
                      children: detail
                    },
                    index
                  )) })
                ] })
              ) : (
                // Customer or default layout
                /* @__PURE__ */ jsxs22("div", { className: "space-y-1", children: [
                  /* @__PURE__ */ jsx36("div", { className: "font-medium text-gray-900 truncate", children: opt.label }),
                  opt.description && /* @__PURE__ */ jsx36("div", { className: "text-sm text-gray-600 whitespace-pre-line", children: opt.description })
                ] })
              ) }),
              value === parseInt(opt.value) && /* @__PURE__ */ jsx36("div", { className: "flex-shrink-0 w-5 h-5 text-blue-600", children: /* @__PURE__ */ jsx36("svg", { className: "w-5 h-5", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx36("path", { fillRule: "evenodd", d: "M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z", clipRule: "evenodd" }) }) })
            ]
          },
          opt.value
        );
      })
    ] }) }) })
  ] });
};

// src/components/ui/searchable-country-select.tsx
import * as React24 from "react";
import { ChevronDown as ChevronDown4 } from "lucide-react";
import { Fragment as Fragment2, jsx as jsx37, jsxs as jsxs23 } from "react/jsx-runtime";
var SearchableCountrySelect = ({
  value,
  onChange,
  options,
  placeholder = "Select country...",
  className,
  emptyMessage = "No countries found"
}) => {
  const [open, setOpen] = React24.useState(false);
  const [query, setQuery] = React24.useState("");
  const rootRef = React24.useRef(null);
  const filtered = React24.useMemo(() => {
    const q = query.trim().toLowerCase();
    if (!q) {
      return options;
    }
    return options.filter(
      (country) => country.name.toLowerCase().includes(q) || country.code.toLowerCase().includes(q)
    );
  }, [query, options]);
  const selected = options.find((o2) => o2.name === value);
  const displayValue = selected?.label || query;
  React24.useEffect(() => {
    const handler = (e2) => {
      const el = rootRef.current;
      if (!el)
        return;
      if (open && !el.contains(e2.target)) {
        setOpen(false);
      }
    };
    document.addEventListener("mousedown", handler);
    document.addEventListener("touchstart", handler);
    return () => {
      document.removeEventListener("mousedown", handler);
      document.removeEventListener("touchstart", handler);
    };
  }, [open]);
  const handleSelect = (country) => {
    console.log("\u{1F30D} Country selected:", country.name);
    onChange?.(country.name);
    setOpen(false);
    setTimeout(() => {
      setQuery("");
    }, 100);
  };
  const handleClear = () => {
    onChange?.("");
    setQuery("");
    setOpen(false);
  };
  return /* @__PURE__ */ jsxs23("div", { className: cn2("relative", className), ref: rootRef, children: [
    /* @__PURE__ */ jsxs23(Fragment2, { children: [
      /* @__PURE__ */ jsx37(
        "input",
        {
          value: displayValue,
          onFocus: () => {
            setOpen(true);
          },
          onChange: (e2) => {
            setQuery(e2.target.value);
            setOpen(true);
          },
          onBlur: () => {
            setTimeout(() => {
              setOpen(false);
            }, 300);
          },
          placeholder: selected ? `${selected.flag} ${selected.name}` : placeholder,
          className: cn2(
            "h-11 w-full rounded-lg border border-gray-300 bg-white pl-4 pr-12 text-sm transition-all duration-200",
            "focus:bg-white focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:ring-offset-0",
            "hover:border-gray-400"
          )
        }
      ),
      /* @__PURE__ */ jsx37("span", { className: "pointer-events-none absolute right-10 top-1/2 -translate-y-1/2 h-6 w-px bg-gray-300" }),
      /* @__PURE__ */ jsx37(
        Button2,
        {
          variant: "ghost",
          size: "icon",
          type: "button",
          "aria-label": "Toggle options",
          className: "absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-150 h-6 w-6 p-0",
          onMouseDown: (e2) => {
            e2.preventDefault();
            setOpen((o2) => !o2);
          },
          children: /* @__PURE__ */ jsx37(ChevronDown4, { className: "h-5 w-5" })
        }
      ),
      query && /* @__PURE__ */ jsx37(
        Button2,
        {
          variant: "ghost",
          size: "icon",
          type: "button",
          onClick: () => {
            setQuery("");
            setOpen(false);
          },
          className: "absolute right-12 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-150 h-6 w-6 p-0",
          children: "\u2715"
        }
      )
    ] }),
    open && /* @__PURE__ */ jsx37("div", { className: "absolute z-[9999] mt-1 w-full rounded-lg border border-gray-200 bg-white shadow-lg ring-1 ring-black ring-opacity-5", children: /* @__PURE__ */ jsx37("div", { className: "max-h-64 overflow-auto py-2", children: filtered.length === 0 ? /* @__PURE__ */ jsxs23("div", { className: "px-4 py-6 text-center text-sm text-gray-500", children: [
      /* @__PURE__ */ jsx37("div", { className: "w-8 h-8 mx-auto mb-2 text-gray-300", children: /* @__PURE__ */ jsx37("svg", { className: "w-8 h-8", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx37("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" }) }) }),
      /* @__PURE__ */ jsx37("div", { children: emptyMessage })
    ] }) : /* @__PURE__ */ jsx37(Fragment2, { children: filtered.map((country) => /* @__PURE__ */ jsxs23(
      Button2,
      {
        variant: "ghost",
        type: "button",
        onClick: () => {
          console.log("\u{1F5B1}\uFE0F Selecting country:", country.name);
          handleSelect(country);
        },
        className: cn2(
          "flex w-full items-center gap-3 px-4 py-3 text-left text-sm hover:bg-gray-50 hover:text-gray-900 transition-all duration-150 ease-in-out h-auto justify-start rounded-none",
          value === country.name && "bg-blue-50 text-blue-700 hover:bg-blue-100"
        ),
        children: [
          /* @__PURE__ */ jsx37("span", { className: "text-2xl flex-shrink-0", children: country.flag }),
          /* @__PURE__ */ jsxs23("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ jsx37("div", { className: "font-medium text-gray-900 truncate", children: country.name }),
            /* @__PURE__ */ jsx37("div", { className: "text-xs text-gray-500", children: country.code })
          ] }),
          value === country.name && /* @__PURE__ */ jsx37("div", { className: "flex-shrink-0 w-5 h-5 text-blue-600", children: /* @__PURE__ */ jsx37("svg", { className: "w-5 h-5", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx37("path", { fillRule: "evenodd", d: "M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z", clipRule: "evenodd" }) }) })
        ]
      },
      country.code
    )) }) }) })
  ] });
};

// src/components/ui/toast.tsx
import { useState as useState9, useEffect as useEffect8, createContext as createContext2, useContext as useContext2 } from "react";
import { X as X3, CheckCircle as CheckCircle5, AlertCircle as AlertCircle3, Info as Info3, AlertTriangle as AlertTriangle5 } from "lucide-react";
import { jsx as jsx38, jsxs as jsxs24 } from "react/jsx-runtime";
var toastIcons = {
  success: CheckCircle5,
  error: AlertCircle3,
  warning: AlertTriangle5,
  info: Info3
};
var toastStyles = {
  success: "bg-green-50 border-green-200 text-green-800",
  error: "bg-red-50 border-red-200 text-red-800",
  warning: "bg-yellow-50 border-yellow-200 text-yellow-800",
  info: "bg-blue-50 border-blue-200 text-blue-800"
};
var iconStyles = {
  success: "text-green-400",
  error: "text-red-400",
  warning: "text-yellow-400",
  info: "text-blue-400"
};
var Toast = ({
  id,
  type,
  title,
  message,
  duration = 5e3,
  onClose
}) => {
  const [isVisible, setIsVisible] = useState9(true);
  useEffect8(() => {
    if (duration > 0) {
      const timer = setTimeout(() => {
        setIsVisible(false);
        setTimeout(() => onClose(id), 300);
      }, duration);
      return () => clearTimeout(timer);
    }
  }, [duration, id, onClose]);
  const Icon2 = toastIcons[type];
  return /* @__PURE__ */ jsx38(
    "div",
    {
      className: cn(
        "w-full transition-all duration-300 ease-in-out",
        isVisible ? "opacity-100 scale-100" : "opacity-0 scale-95"
      ),
      children: /* @__PURE__ */ jsxs24(
        "div",
        {
          className: cn(
            "border rounded-lg shadow-lg p-4 flex items-start space-x-3",
            toastStyles[type]
          ),
          children: [
            /* @__PURE__ */ jsx38(Icon2, { className: cn("w-5 h-5 mt-0.5 flex-shrink-0", iconStyles[type]) }),
            /* @__PURE__ */ jsxs24("div", { className: "flex-1 min-w-0", children: [
              /* @__PURE__ */ jsx38("h4", { className: "text-sm font-medium", children: title }),
              message && /* @__PURE__ */ jsx38("p", { className: "text-sm mt-1 opacity-90", children: message })
            ] }),
            /* @__PURE__ */ jsx38(
              Button2,
              {
                variant: "ghost",
                size: "icon",
                onClick: () => {
                  setIsVisible(false);
                  setTimeout(() => onClose(id), 300);
                },
                className: "ml-2 flex-shrink-0 opacity-70 hover:opacity-100 transition-opacity h-6 w-6 p-0",
                children: /* @__PURE__ */ jsx38(X3, { className: "w-4 h-4" })
              }
            )
          ]
        }
      )
    }
  );
};
var ToastContainer = ({ toasts, onClose }) => {
  console.log("\u{1F3AF} ToastContainer render:", { toastsCount: toasts?.length || 0, toasts });
  return /* @__PURE__ */ jsx38("div", { className: "fixed top-4 right-4 z-[9999] flex flex-col gap-3 max-w-sm", children: toasts?.map((toast, index) => /* @__PURE__ */ jsx38(
    "div",
    {
      className: "animate-slide-in-from-right",
      style: {
        animationDelay: `${index * 100}ms`,
        transform: `translateY(${index * 8}px)`
      },
      children: /* @__PURE__ */ jsx38(Toast, { ...toast, onClose })
    },
    toast.id
  )) });
};
var ToastContext = createContext2(void 0);
var ToastProvider = ({ children }) => {
  const [toasts, setToasts] = useState9([]);
  const addToast = (type, title, message, duration) => {
    const id = Math.random().toString(36).substr(2, 9);
    const newToast = {
      id,
      type,
      title,
      message,
      duration,
      onClose: removeToast
    };
    setToasts((prev) => [...prev, newToast]);
    return id;
  };
  const removeToast = (id) => {
    setToasts((prev) => prev.filter((toast) => toast.id !== id));
  };
  return /* @__PURE__ */ jsxs24(ToastContext.Provider, { value: { toasts, addToast, removeToast }, children: [
    children,
    /* @__PURE__ */ jsx38(ToastContainer, { toasts, onClose: removeToast })
  ] });
};
var useToasts = () => {
  const context = useContext2(ToastContext);
  if (context === void 0) {
    throw new Error("useToasts must be used within a ToastProvider");
  }
  return context;
};
var useToast = () => {
  const { addToast, removeToast } = useToasts();
  const toastSuccess = (title, message) => addToast("success", title, message);
  const toastError = (title, message) => addToast("error", title, message, 0);
  const toastWarning = (title, message) => addToast("warning", title, message);
  const toastInfo = (title, message) => addToast("info", title, message);
  return {
    // Primary API - use these to avoid naming conflicts
    toastSuccess,
    toastError,
    toastWarning,
    toastInfo,
    removeToast,
    // Deprecated: kept for backward compatibility, will be removed in future
    success: toastSuccess,
    error: toastError,
    warning: toastWarning,
    info: toastInfo
  };
};

// src/components/forms/ProductForm.tsx
import { useState as useState10, useEffect as useEffect9, useCallback, useRef as useRef5 } from "react";
import { uploadImage, getAuthToken } from "@rentalshop/utils";
import { useProductTranslations, useCommonTranslations as useCommonTranslations2 } from "@rentalshop/hooks";
import {
  Package as Package2,
  DollarSign,
  Warehouse,
  CheckCircle as CheckCircle6,
  XCircle as XCircle4,
  Upload,
  Image as ImageIcon,
  AlertCircle as AlertCircle4,
  RefreshCw,
  Loader2 as Loader23
} from "lucide-react";
import { Fragment as Fragment3, jsx as jsx39, jsxs as jsxs25 } from "react/jsx-runtime";
var ProductForm = ({
  initialData = {},
  categories = [],
  outlets = [],
  onSubmit,
  onCancel,
  loading = false,
  title = "Product Information",
  submitText = "Save Product",
  mode = "create",
  merchantId = "",
  hideHeader = false,
  hideSubmitButton = false,
  formId
}) => {
  const t2 = useProductTranslations();
  const tc = useCommonTranslations2();
  const [formData, setFormData] = useState10({
    name: "",
    description: "",
    barcode: "",
    categoryId: 0,
    rentPrice: 0,
    salePrice: 0,
    deposit: 0,
    totalStock: 0,
    images: [],
    outletStock: [],
    sku: "",
    ...initialData
  });
  const [errors, setValidationErrors] = useState10({});
  const [isSubmitting, setIsSubmitting] = useState10(false);
  const [dragActive, setDragActive] = useState10(false);
  const [autoSaveStatus, setAutoSaveStatus] = useState10("idle");
  const [uploadProgress, setUploadProgress] = useState10({});
  const [uploadErrors, setUploadErrors] = useState10({});
  const fileInputRef = useRef5(null);
  useEffect9(() => {
    console.log("\u{1F50D} ProductForm - initialData changed:", initialData);
    console.log("\u{1F50D} ProductForm - initialData.categoryId:", initialData.categoryId);
    console.log("\u{1F50D} ProductForm - initialData.categoryId type:", typeof initialData.categoryId);
    console.log("\u{1F50D} ProductForm - mode:", mode);
    console.log("\u{1F50D} ProductForm - outlets:", outlets);
    console.log("\u{1F50D} ProductForm - initialData.outletStock:", initialData.outletStock);
    console.log("\u{1F50D} ProductForm - formData.outletStock:", formData.outletStock);
    console.log("\u{1F50D} ProductForm - outlets.length:", outlets.length);
    console.log("\u{1F50D} ProductForm - formData.outletStock.length:", formData.outletStock.length);
    if (mode === "edit") {
      console.log("\u{1F50D} ProductForm - EDIT MODE: Checking outlet stock coverage");
      const outletIds = outlets.map((o2) => o2.id);
      const stockOutletIds = formData.outletStock.map((os) => os.outletId);
      console.log("\u{1F50D} ProductForm - All outlet IDs:", outletIds);
      console.log("\u{1F50D} ProductForm - Stock outlet IDs:", stockOutletIds);
      const missingOutlets = outletIds.filter((id) => !stockOutletIds.includes(id));
      if (missingOutlets.length > 0) {
        console.warn("\u{1F50D} ProductForm - WARNING: Missing outlet stock for outlets:", missingOutlets);
      }
    }
  }, [initialData, mode, outlets, formData.outletStock]);
  useEffect9(() => {
    if (initialData && Object.keys(initialData).length > 0) {
      console.log("\u{1F50D} ProductForm - Re-initializing form with new initialData:", initialData);
      setFormData({
        name: "",
        description: "",
        barcode: "",
        categoryId: 0,
        rentPrice: 0,
        salePrice: 0,
        deposit: 0,
        totalStock: 0,
        images: [],
        outletStock: [],
        sku: "",
        ...initialData
      });
    }
  }, [initialData]);
  useEffect9(() => {
    let updatedFormData = { ...formData };
    if (mode === "create" && formData.outletStock.length === 0 && outlets.length > 0) {
      updatedFormData.outletStock = outlets.map((outlet) => ({
        outletId: outlet.id,
        stock: 0
      }));
    }
    if (!formData.categoryId && categories.length > 0) {
      updatedFormData.categoryId = categories[0].id;
    }
    if (mode === "create" && !formData.barcode) {
      updatedFormData.barcode = generateBarcode();
    }
    if (JSON.stringify(updatedFormData) !== JSON.stringify(formData)) {
      setFormData(updatedFormData);
    }
  }, [outlets, categories, formData.outletStock.length, formData.categoryId, formData.barcode, mode]);
  const generateBarcode = () => {
    const timestamp = Date.now().toString().slice(-8);
    const random = Math.floor(Math.random() * 1e3).toString().padStart(3, "0");
    return `${timestamp}${random}`;
  };
  useEffect9(() => {
    if (mode === "edit" && formData.name && formData.categoryId) {
      const timeoutId = setTimeout(() => {
        handleAutoSave();
      }, 2e3);
      return () => clearTimeout(timeoutId);
    }
  }, [formData.name, formData.description, formData.categoryId, mode]);
  const handleAutoSave = useCallback(async () => {
    setAutoSaveStatus("saving");
    try {
      await new Promise((resolve) => setTimeout(resolve, 1e3));
      setAutoSaveStatus("saved");
      setTimeout(() => setAutoSaveStatus("idle"), 3e3);
    } catch (error2) {
      setAutoSaveStatus("error");
      setTimeout(() => setAutoSaveStatus("idle"), 3e3);
    }
  }, [formData]);
  const validateForm = () => {
    const newErrors = {};
    if (!formData.name.trim()) {
      newErrors.name = "Product name is required";
    }
    if (!formData.categoryId) {
      newErrors.categoryId = "Category is required";
    }
    if (formData.rentPrice <= 0) {
      newErrors.rentPrice = "Rent price is required and must be greater than 0";
    }
    if (formData.salePrice <= 0) {
      newErrors.salePrice = "Sale price is required and must be greater than 0";
    }
    if (formData.deposit < 0) {
      newErrors.deposit = "Deposit is required and cannot be negative";
    }
    if (formData.totalStock <= 0) {
      newErrors.totalStock = "Total stock is required and must be greater than 0";
    }
    if (outlets.length === 0) {
      newErrors.outletStock = "No outlets available. Please contact your administrator to set up outlets.";
      return false;
    }
    if (formData.outletStock.length === 0) {
      newErrors.outletStock = "Outlet stock is required. Please specify stock levels for at least one outlet.";
      return false;
    }
    if (formData.outletStock.length > 0) {
      const invalidOutletStock = formData.outletStock.find((item) => item.stock < 0);
      if (invalidOutletStock) {
        newErrors.outletStock = "Outlet stock values cannot be negative";
      }
    }
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    console.log("\u{1F50D} ProductForm: Form submitted with data:", formData);
    console.log("\u{1F50D} ProductForm - categoryId type:", typeof formData.categoryId);
    console.log("\u{1F50D} ProductForm - categoryId value:", formData.categoryId);
    if (!validateForm()) {
      console.log("\u274C ProductForm: Validation failed");
      const newErrors = {};
      if (!formData.name.trim()) {
        newErrors.name = "Product name is required";
      }
      if (!formData.categoryId) {
        newErrors.categoryId = "Category is required";
      }
      if (formData.rentPrice <= 0) {
        newErrors.rentPrice = "Rent price is required and must be greater than 0";
      }
      if (formData.salePrice <= 0) {
        newErrors.salePrice = "Sale price is required and must be greater than 0";
      }
      if (formData.deposit < 0) {
        newErrors.deposit = "Deposit is required and cannot be negative";
      }
      if (formData.totalStock <= 0) {
        newErrors.totalStock = "Total stock is required and must be greater than 0";
      }
      if (formData.outletStock.length === 0) {
        newErrors.outletStock = "Outlet stock is required. Please specify stock levels for at least one outlet.";
        setValidationErrors(newErrors);
        return;
      }
      if (formData.outletStock.length > 0) {
        const invalidOutletStock = formData.outletStock.find((item) => item.stock < 0);
        if (invalidOutletStock) {
          newErrors.outletStock = "Outlet stock values cannot be negative";
        }
      }
      setValidationErrors(newErrors);
      return;
    }
    const productData = {
      merchantId: typeof merchantId === "string" ? parseInt(merchantId) || 0 : merchantId || 0,
      categoryId: formData.categoryId,
      name: formData.name,
      description: formData.description,
      barcode: formData.barcode,
      totalStock: formData.totalStock,
      rentPrice: formData.rentPrice,
      salePrice: formData.salePrice > 0 ? formData.salePrice : void 0,
      deposit: formData.deposit,
      images: formData.images,
      // Keep as array for ProductInput
      outletStock: formData.outletStock
    };
    onSubmit(productData);
  };
  const handleInputChange = (field, value) => {
    let processedValue = value;
    if (field === "categoryId") {
      processedValue = parseInt(value) || 0;
    } else if (field === "rentPrice" || field === "salePrice" || field === "deposit") {
      processedValue = parseFloat(value) || 0;
    } else if (field === "totalStock") {
      processedValue = parseInt(value) || 0;
    }
    setFormData((prev) => ({
      ...prev,
      [field]: processedValue
    }));
    if (errors[field]) {
      setValidationErrors((prev) => ({
        ...prev,
        [field]: void 0
      }));
    }
  };
  const updateOutletStock = (outletId, field, value) => {
    setFormData((prev) => ({
      ...prev,
      outletStock: prev.outletStock.map(
        (item) => item.outletId === outletId ? { ...item, [field]: value } : item
      )
    }));
  };
  const handleImageUpload = async (files) => {
    if (!files)
      return;
    if (formData.images.length >= 3) {
      console.warn("Maximum 3 images allowed");
      return;
    }
    const filesArray = Array.from(files);
    const filesToUpload = filesArray.slice(0, 3 - formData.images.length);
    const token = getAuthToken();
    if (!token) {
      console.error("No authentication token found");
      setUploadErrors((prev) => ({
        ...prev,
        general: "Authentication required. Please log in again."
      }));
      return;
    }
    for (const file of filesToUpload) {
      const fileId = `${file.name}-${Date.now()}`;
      setUploadErrors((prev) => {
        const newErrors = { ...prev };
        delete newErrors[fileId];
        return newErrors;
      });
      setFormData((prev) => ({
        ...prev,
        images: [...prev.images, `uploading-${fileId}`]
      }));
      try {
        const uploadResult = await uploadImage(file, token, {
          folder: "rentalshop/products",
          maxFileSize: 5 * 1024 * 1024,
          // 5MB
          allowedTypes: ["image/jpeg", "image/jpg", "image/png", "image/webp", "image/gif"],
          useBase64Fallback: true,
          // Enable fallback for development
          maxWidth: 1200,
          // Client-side resize before upload
          maxHeight: 900,
          quality: 0.85,
          onProgress: (progress) => {
            setUploadProgress((prev) => ({
              ...prev,
              [fileId]: progress
            }));
          }
        });
        if (uploadResult.success && uploadResult.data) {
          setFormData((prev) => ({
            ...prev,
            images: prev.images.map(
              (img) => img === `uploading-${fileId}` ? uploadResult.data.url : img
            )
          }));
          if (uploadResult.data.uploadMethod === "base64") {
            console.warn("\u26A0\uFE0F Image uploaded using base64 fallback. Configure Cloudinary for production.");
          } else if (uploadResult.data.uploadMethod === "local") {
            console.warn("\u26A0\uFE0F Image uploaded to local storage. Configure Cloudinary for production.");
          } else {
            console.log("\u2705 Image uploaded successfully to Cloudinary");
          }
          setUploadProgress((prev) => {
            const newProgress = { ...prev };
            delete newProgress[fileId];
            return newProgress;
          });
        } else {
          console.error("Upload failed:", uploadResult.error);
          setUploadErrors((prev) => ({
            ...prev,
            [fileId]: uploadResult.error || "Upload failed"
          }));
          setFormData((prev) => ({
            ...prev,
            images: prev.images.filter((img) => img !== `uploading-${fileId}`)
          }));
        }
      } catch (error2) {
        console.error("Upload error:", error2);
        setUploadErrors((prev) => ({
          ...prev,
          [fileId]: error2 instanceof Error ? error2.message : "Upload failed"
        }));
        setFormData((prev) => ({
          ...prev,
          images: prev.images.filter((img) => img !== `uploading-${fileId}`)
        }));
      }
    }
  };
  const removeImage = (index) => {
    setFormData((prev) => ({
      ...prev,
      images: prev.images.filter((_, i) => i !== index)
    }));
  };
  const handleDrag = useCallback((e2) => {
    e2.preventDefault();
    e2.stopPropagation();
    if (e2.type === "dragenter" || e2.type === "dragover") {
      setDragActive(true);
    } else if (e2.type === "dragleave") {
      setDragActive(false);
    }
  }, []);
  const handleDrop = useCallback((e2) => {
    e2.preventDefault();
    e2.stopPropagation();
    setDragActive(false);
    if (e2.dataTransfer.files && e2.dataTransfer.files[0] && formData.images.length < 3) {
      handleImageUpload(e2.dataTransfer.files);
    }
  }, [formData.images.length]);
  const getProductStatus = () => {
    if (formData.totalStock === 0)
      return { status: "Out of Stock", variant: "destructive" };
    return { status: "In Stock", variant: "default" };
  };
  const { status, variant } = getProductStatus();
  return /* @__PURE__ */ jsxs25("div", { className: "space-y-6", children: [
    !hideHeader && /* @__PURE__ */ jsxs25("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs25("div", { children: [
        /* @__PURE__ */ jsx39("h1", { className: "text-3xl font-bold text-text-primary mb-2", children: title }),
        mode === "edit" && /* @__PURE__ */ jsxs25("div", { className: "flex items-center gap-2 mt-2", children: [
          autoSaveStatus === "saving" && /* @__PURE__ */ jsxs25("div", { className: "flex items-center gap-2 text-sm text-text-secondary", children: [
            /* @__PURE__ */ jsx39("div", { className: "animate-spin rounded-full h-3 w-3 border-b-2 border-text-secondary" }),
            "Auto-saving..."
          ] }),
          autoSaveStatus === "saved" && /* @__PURE__ */ jsxs25("div", { className: "flex items-center gap-2 text-sm text-green-600", children: [
            /* @__PURE__ */ jsx39(CheckCircle6, { className: "w-4 h-4" }),
            "Auto-saved"
          ] }),
          autoSaveStatus === "error" && /* @__PURE__ */ jsxs25("div", { className: "flex items-center gap-2 text-sm text-red-600", children: [
            /* @__PURE__ */ jsx39(XCircle4, { className: "w-4 h-4" }),
            "Auto-save failed"
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsx39("div", { className: "flex items-center gap-3", children: /* @__PURE__ */ jsx39(Badge, { variant, className: "text-sm", children: status }) })
    ] }),
    /* @__PURE__ */ jsxs25("form", { id: formId, onSubmit: handleSubmit, className: "space-y-6", children: [
      /* @__PURE__ */ jsxs25(Card, { children: [
        /* @__PURE__ */ jsx39(CardHeader, { children: /* @__PURE__ */ jsxs25(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx39(Package2, { className: "w-5 h-5" }),
          t2("productDetails")
        ] }) }),
        /* @__PURE__ */ jsxs25(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs25("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxs25("label", { className: "text-sm font-medium text-text-primary", children: [
                t2("fields.name"),
                " *"
              ] }),
              /* @__PURE__ */ jsx39(
                Input,
                {
                  value: formData.name,
                  onChange: (e2) => handleInputChange("name", e2.target.value),
                  placeholder: t2("fields.name"),
                  className: errors.name ? "border-red-500" : ""
                }
              ),
              errors.name && /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-500", children: errors.name })
            ] }),
            /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx39("label", { className: "text-sm font-medium text-text-primary", children: t2("fields.sku") }),
              /* @__PURE__ */ jsx39(
                Input,
                {
                  value: formData.sku,
                  onChange: (e2) => handleInputChange("sku", e2.target.value),
                  placeholder: t2("fields.sku")
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxs25("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx39("label", { className: "text-sm font-medium text-text-primary", children: t2("fields.barcode") }),
              /* @__PURE__ */ jsxs25("div", { className: "flex gap-2", children: [
                /* @__PURE__ */ jsx39(
                  Input,
                  {
                    value: formData.barcode,
                    onChange: (e2) => handleInputChange("barcode", e2.target.value),
                    placeholder: t2("fields.barcode"),
                    className: "flex-1"
                  }
                ),
                /* @__PURE__ */ jsx39(
                  Button2,
                  {
                    type: "button",
                    variant: "outline",
                    size: "sm",
                    onClick: () => handleInputChange("barcode", generateBarcode()),
                    title: t2("messages.generateBarcode"),
                    children: /* @__PURE__ */ jsx39(RefreshCw, { className: "w-4 h-4" })
                  }
                )
              ] })
            ] }),
            /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxs25("label", { className: "text-sm font-medium text-text-primary", children: [
                t2("fields.category"),
                " *"
              ] }),
              /* @__PURE__ */ jsxs25(
                Select,
                {
                  value: formData.categoryId.toString(),
                  onValueChange: (value) => {
                    handleInputChange("categoryId", value);
                  },
                  children: [
                    /* @__PURE__ */ jsx39(SelectTrigger, { className: errors.categoryId ? "border-red-500" : "", children: /* @__PURE__ */ jsx39(SelectValue, { placeholder: t2("fields.category") }) }),
                    /* @__PURE__ */ jsx39(SelectContent, { children: categories.map((category) => /* @__PURE__ */ jsx39(SelectItem, { value: category.id.toString(), children: category.name }, category.id)) })
                  ]
                }
              ),
              errors.categoryId && /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-500", children: errors.categoryId })
            ] })
          ] }),
          /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx39("label", { className: "text-sm font-medium text-text-primary", children: t2("fields.description") }),
            /* @__PURE__ */ jsx39(
              Textarea,
              {
                value: formData.description,
                onChange: (e2) => handleInputChange("description", e2.target.value),
                placeholder: t2("fields.description"),
                rows: 3
              }
            )
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs25(Card, { children: [
        /* @__PURE__ */ jsx39(CardHeader, { children: /* @__PURE__ */ jsxs25(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx39(DollarSign, { className: "w-5 h-5" }),
          t2("pricing.title")
        ] }) }),
        /* @__PURE__ */ jsxs25(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs25("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx39(
                NumericInput,
                {
                  label: t2("fields.rentPrice"),
                  value: formData.rentPrice,
                  onChange: (value) => handleInputChange("rentPrice", value),
                  placeholder: "0.00",
                  error: !!errors.rentPrice,
                  required: true,
                  allowDecimals: true,
                  maxDecimalPlaces: 2
                }
              ),
              errors.rentPrice && /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-500", children: errors.rentPrice })
            ] }),
            /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx39(
                NumericInput,
                {
                  label: t2("fields.salePrice"),
                  value: formData.salePrice,
                  onChange: (value) => handleInputChange("salePrice", value),
                  placeholder: "0.00",
                  error: !!errors.salePrice,
                  required: true,
                  allowDecimals: true,
                  maxDecimalPlaces: 2
                }
              ),
              errors.salePrice && /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-500", children: errors.salePrice })
            ] }),
            /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx39(
                NumericInput,
                {
                  label: t2("fields.deposit"),
                  value: formData.deposit,
                  onChange: (value) => handleInputChange("deposit", value),
                  placeholder: "0.00",
                  error: !!errors.deposit,
                  required: true,
                  allowDecimals: true,
                  maxDecimalPlaces: 2
                }
              ),
              errors.deposit && /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-500", children: errors.deposit })
            ] })
          ] }),
          /* @__PURE__ */ jsx39("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: /* @__PURE__ */ jsxs25("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx39(
              NumericInput,
              {
                label: t2("fields.stock"),
                value: formData.totalStock,
                onChange: (value) => handleInputChange("totalStock", value),
                placeholder: "0",
                error: !!errors.totalStock,
                required: true,
                allowDecimals: false,
                min: 0
              }
            ),
            errors.totalStock && /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-500", children: errors.totalStock })
          ] }) })
        ] })
      ] }),
      /* @__PURE__ */ jsxs25(Card, { children: [
        /* @__PURE__ */ jsx39(CardHeader, { children: /* @__PURE__ */ jsxs25(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx39(Warehouse, { className: "w-5 h-5" }),
          t2("inventory.outletStockDistribution"),
          " *"
        ] }) }),
        /* @__PURE__ */ jsxs25(CardContent, { children: [
          /* @__PURE__ */ jsx39("div", { className: "mb-4", children: /* @__PURE__ */ jsxs25("p", { className: "text-sm text-muted-foreground", children: [
            t2("inventory.totalOutlets"),
            ": ",
            outlets.length,
            " | ",
            t2("inventory.stockEntries"),
            ": ",
            formData.outletStock.length,
            " | ",
            /* @__PURE__ */ jsx39("span", { className: "text-red-500", children: "*" }),
            " ",
            t2("inventory.stockRequired")
          ] }) }),
          outlets.length === 0 ? /* @__PURE__ */ jsxs25("div", { className: "text-center py-8", children: [
            /* @__PURE__ */ jsx39(Warehouse, { className: "w-12 h-12 text-muted-foreground mx-auto mb-4" }),
            /* @__PURE__ */ jsx39("h3", { className: "text-lg font-semibold mb-2", children: t2("inventory.noOutletsAvailable") }),
            /* @__PURE__ */ jsx39("p", { className: "text-muted-foreground mb-4", children: t2("inventory.needOutletMessage") }),
            /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-500", children: t2("inventory.contactAdmin") })
          ] }) : /* @__PURE__ */ jsxs25(Fragment3, { children: [
            /* @__PURE__ */ jsxs25(Table, { children: [
              /* @__PURE__ */ jsx39(TableHeader, { children: /* @__PURE__ */ jsxs25(TableRow, { children: [
                /* @__PURE__ */ jsx39(TableHead, { children: t2("filters.outletLabel") }),
                /* @__PURE__ */ jsx39(TableHead, { children: t2("stock.label") })
              ] }) }),
              /* @__PURE__ */ jsx39(TableBody, { children: formData.outletStock.map((outletStock) => {
                const outlet = outlets.find((o2) => o2.id === outletStock.outletId);
                return /* @__PURE__ */ jsxs25(TableRow, { children: [
                  /* @__PURE__ */ jsx39(TableCell, { className: "font-medium", children: /* @__PURE__ */ jsxs25("div", { children: [
                    /* @__PURE__ */ jsx39("div", { className: "font-medium", children: outlet?.name || "Unknown Outlet" }),
                    outlet?.address && /* @__PURE__ */ jsx39("div", { className: "text-sm text-text-secondary mt-1", children: outlet.address })
                  ] }) }),
                  /* @__PURE__ */ jsx39(TableCell, { children: /* @__PURE__ */ jsx39(
                    NumericInput,
                    {
                      value: outletStock.stock,
                      onChange: (value) => updateOutletStock(outletStock.outletId, "stock", value),
                      min: 0,
                      allowDecimals: false,
                      required: true,
                      className: "w-20"
                    }
                  ) })
                ] }, outletStock.outletId);
              }) })
            ] }),
            errors.outletStock && /* @__PURE__ */ jsx39("div", { className: "mt-4", children: /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-500", children: errors.outletStock }) })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs25(Card, { children: [
        /* @__PURE__ */ jsx39(CardHeader, { children: /* @__PURE__ */ jsxs25(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx39(ImageIcon, { className: "w-5 h-5" }),
          t2("fields.images")
        ] }) }),
        /* @__PURE__ */ jsxs25(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs25(
            "div",
            {
              className: `border-2 border-dashed rounded-lg p-6 text-center transition-colors ${dragActive && formData.images.length < 3 ? "border-action-primary bg-action-primary/10" : formData.images.length >= 3 ? "border-gray-300 bg-gray-50" : "border-border hover:border-action-primary/50"}`,
              onDragEnter: formData.images.length < 3 ? handleDrag : void 0,
              onDragLeave: formData.images.length < 3 ? handleDrag : void 0,
              onDragOver: formData.images.length < 3 ? handleDrag : void 0,
              onDrop: formData.images.length < 3 ? handleDrop : void 0,
              children: [
                /* @__PURE__ */ jsx39(Upload, { className: `w-8 h-8 mx-auto mb-2 ${formData.images.length >= 3 ? "text-gray-400" : "text-text-secondary"}` }),
                /* @__PURE__ */ jsx39("p", { className: "text-text-primary font-medium mb-1", children: formData.images.length >= 3 ? t2("messages.maxImagesReached") : t2("messages.dragDropImages") }),
                /* @__PURE__ */ jsx39("p", { className: "text-text-secondary text-sm mb-3", children: t2("messages.imageFormats") }),
                /* @__PURE__ */ jsx39(
                  "input",
                  {
                    ref: fileInputRef,
                    type: "file",
                    multiple: true,
                    accept: "image/*",
                    onChange: (e2) => handleImageUpload(e2.target.files),
                    className: "hidden",
                    id: "image-upload",
                    disabled: formData.images.length >= 3
                  }
                ),
                /* @__PURE__ */ jsx39(
                  Button2,
                  {
                    type: "button",
                    variant: "outline",
                    size: "sm",
                    onClick: () => fileInputRef.current?.click(),
                    disabled: formData.images.length >= 3,
                    children: formData.images.length >= 3 ? t2("messages.maxImagesReached") : tc("buttons.browse")
                  }
                )
              ]
            }
          ),
          /* @__PURE__ */ jsxs25("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsxs25("p", { className: "text-sm text-text-secondary", children: [
              formData.images.length,
              "/3 ",
              t2("messages.imagesUploaded")
            ] }),
            formData.images.length > 0 && /* @__PURE__ */ jsx39(
              Button2,
              {
                type: "button",
                variant: "outline",
                size: "sm",
                onClick: () => setFormData((prev) => ({ ...prev, images: [] })),
                children: t2("messages.clearAllImages")
              }
            )
          ] }),
          Object.keys(uploadErrors).length > 0 && /* @__PURE__ */ jsx39("div", { className: "space-y-2", children: Object.entries(uploadErrors).map(([fileId, error2]) => /* @__PURE__ */ jsxs25("div", { className: "flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg", children: [
            /* @__PURE__ */ jsx39(AlertCircle4, { className: "w-4 h-4 text-red-500 mt-0.5 flex-shrink-0" }),
            /* @__PURE__ */ jsxs25("div", { className: "flex-1", children: [
              /* @__PURE__ */ jsx39("p", { className: "text-sm text-red-700 font-medium", children: t2("messages.uploadFailed") }),
              /* @__PURE__ */ jsx39("p", { className: "text-xs text-red-600 mt-1", children: error2 })
            ] }),
            /* @__PURE__ */ jsx39(
              Button2,
              {
                variant: "ghost",
                size: "icon",
                type: "button",
                onClick: () => setUploadErrors((prev) => {
                  const newErrors = { ...prev };
                  delete newErrors[fileId];
                  return newErrors;
                }),
                className: "text-red-400 hover:text-red-600 h-6 w-6 p-0",
                children: /* @__PURE__ */ jsx39(XCircle4, { className: "w-4 h-4" })
              }
            )
          ] }, fileId)) }),
          formData.images.length > 0 && /* @__PURE__ */ jsx39("div", { className: "grid grid-cols-3 gap-3", children: formData.images.map((image, index) => {
            const isUploading = image.startsWith("uploading-");
            const fileId = isUploading ? image.replace("uploading-", "") : "";
            const progress = isUploading ? uploadProgress[fileId] : null;
            return /* @__PURE__ */ jsx39("div", { className: "relative group", children: isUploading ? (
              // Upload Progress Card
              /* @__PURE__ */ jsxs25("div", { className: "w-full h-24 rounded-lg border border-action-primary bg-action-primary/5 flex flex-col items-center justify-center gap-2", children: [
                /* @__PURE__ */ jsx39(Loader23, { className: "w-6 h-6 animate-spin text-action-primary" }),
                progress && /* @__PURE__ */ jsxs25(Fragment3, { children: [
                  /* @__PURE__ */ jsx39("div", { className: "w-full px-4", children: /* @__PURE__ */ jsx39("div", { className: "w-full bg-gray-200 rounded-full h-2", children: /* @__PURE__ */ jsx39(
                    "div",
                    {
                      className: "bg-action-primary h-2 rounded-full transition-all duration-300",
                      style: { width: `${progress.percentage}%` }
                    }
                  ) }) }),
                  /* @__PURE__ */ jsxs25("p", { className: "text-xs text-text-secondary", children: [
                    progress.stage === "preparing" && t2("messages.preparing"),
                    progress.stage === "uploading" && `${t2("messages.uploading")} ${progress.percentage}%`,
                    progress.stage === "processing" && t2("messages.processing"),
                    progress.stage === "complete" && t2("messages.complete")
                  ] })
                ] })
              ] })
            ) : (
              // Image Preview
              /* @__PURE__ */ jsxs25(Fragment3, { children: [
                /* @__PURE__ */ jsx39(
                  "img",
                  {
                    src: image,
                    alt: `${t2("fields.name")} ${index + 1}`,
                    className: "w-full h-24 object-cover rounded-lg border"
                  }
                ),
                /* @__PURE__ */ jsx39(
                  Button2,
                  {
                    variant: "ghost",
                    size: "icon",
                    type: "button",
                    onClick: () => removeImage(index),
                    className: "absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 h-6 w-6",
                    title: t2("messages.removeImage"),
                    children: /* @__PURE__ */ jsx39(XCircle4, { className: "w-4 h-4" })
                  }
                )
              ] })
            ) }, index);
          }) })
        ] })
      ] }),
      !hideSubmitButton && /* @__PURE__ */ jsx39("div", { className: "flex justify-end", children: /* @__PURE__ */ jsx39(
        Button2,
        {
          type: "submit",
          disabled: isSubmitting || !validateForm(),
          className: "min-w-[120px]",
          children: isSubmitting ? /* @__PURE__ */ jsxs25(Fragment3, { children: [
            /* @__PURE__ */ jsx39("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }),
            "Saving..."
          ] }) : /* @__PURE__ */ jsxs25(Fragment3, { children: [
            /* @__PURE__ */ jsx39(CheckCircle6, { className: "w-4 h-4 mr-2" }),
            submitText
          ] })
        }
      ) })
    ] })
  ] });
};

// src/components/forms/OrderForm.tsx
import { useState as useState11, useEffect as useEffect10 } from "react";
import {
  Card as Card2,
  CardHeader as CardHeader2,
  CardTitle as CardTitle2,
  CardContent as CardContent2,
  Button as Button3,
  Input as Input2,
  Select as Select2,
  SelectContent as SelectContent2,
  SelectItem as SelectItem2,
  SelectTrigger as SelectTrigger2,
  SelectValue as SelectValue2,
  Textarea as Textarea2,
  Badge as Badge2,
  formatCurrency as formatCurrency2,
  SearchableSelect as SearchableSelect2,
  useToast as useToast2
} from "@rentalshop/ui";
import { Fragment as Fragment4, jsx as jsx40, jsxs as jsxs26 } from "react/jsx-runtime";
var OrderForm = ({
  initialData,
  customers = [],
  products = [],
  outlets = [],
  onSubmit,
  onCancel,
  loading = false,
  layout = "stacked"
}) => {
  const { toastError, toastWarning } = useToast2();
  const [formData, setFormData] = useState11({
    orderType: "RENT",
    customerId: "",
    outletId: "",
    pickupPlanAt: void 0,
    returnPlanAt: void 0,
    subtotal: 0,
    taxAmount: 0,
    discountAmount: 0,
    totalAmount: 0,
    depositAmount: 0,
    notes: "",
    customerName: "",
    customerPhone: "",
    customerEmail: "",
    orderItems: [],
    ...initialData
  });
  const [orderItems, setOrderItems] = useState11(
    initialData?.orderItems?.map((item) => ({
      productId: item.productId,
      quantity: item.quantity,
      unitPrice: item.unitPrice,
      totalPrice: item.totalPrice,
      rentalDays: item.rentalDays || 0,
      startDate: item.startDate?.toISOString().split("T")[0] || "",
      endDate: item.endDate?.toISOString().split("T")[0] || "",
      daysRented: item.daysRented || 0,
      deposit: item.deposit || 0,
      notes: item.notes || ""
    })) || []
  );
  const [selectedCustomer, setSelectedCustomer] = useState11(
    customers.find((c) => c.id === formData.customerId) || null
  );
  useEffect10(() => {
    const subtotal = orderItems.reduce((sum, item) => sum + item.totalPrice, 0);
    const taxAmount = subtotal * 0.1;
    const totalAmount = subtotal + taxAmount - (formData.discountAmount || 0);
    setFormData((prev) => ({
      ...prev,
      subtotal,
      taxAmount,
      totalAmount,
      orderItems: orderItems.map((item) => ({
        productId: item.productId,
        quantity: item.quantity,
        unitPrice: item.unitPrice,
        totalPrice: item.totalPrice,
        rentalDays: item.rentalDays,
        startDate: item.startDate ? new Date(item.startDate) : void 0,
        endDate: item.endDate ? new Date(item.endDate) : void 0,
        daysRented: item.daysRented,
        deposit: item.deposit,
        notes: item.notes
      }))
    }));
  }, [orderItems, formData.discountAmount]);
  useEffect10(() => {
    if (selectedCustomer) {
      setFormData((prev) => ({
        ...prev,
        customerId: selectedCustomer.id,
        customerName: `${selectedCustomer.firstName} ${selectedCustomer.lastName}`,
        customerPhone: selectedCustomer.phone,
        customerEmail: selectedCustomer.email
      }));
    }
  }, [selectedCustomer]);
  const addOrderItem = () => {
    setOrderItems((prev) => [...prev, {
      productId: "",
      quantity: 1,
      unitPrice: 0,
      totalPrice: 0,
      rentalDays: 0,
      startDate: "",
      endDate: "",
      daysRented: 0,
      deposit: 0,
      notes: ""
    }]);
  };
  const removeOrderItem = (index) => {
    setOrderItems((prev) => prev.filter((_, i) => i !== index));
  };
  const updateOrderItem = (index, field, value) => {
    setOrderItems((prev) => {
      const newItems = [...prev];
      const item = { ...newItems[index], [field]: value };
      if (field === "quantity" || field === "unitPrice") {
        item.totalPrice = item.quantity * item.unitPrice;
      }
      if (formData.orderType === "RENT" && field === "rentalDays") {
        item.totalPrice = item.quantity * item.unitPrice * (item.rentalDays || 1);
      }
      if (field === "productId") {
        const product = products.find((p2) => p2.id === value);
        if (product) {
          item.unitPrice = formData.orderType === "RENT" ? product.rentPrice : product.salePrice || 0;
          item.totalPrice = item.quantity * item.unitPrice;
        }
      }
      newItems[index] = item;
      return newItems;
    });
  };
  const handleSubmit = (e2) => {
    e2.preventDefault();
    if (!formData.outletId) {
      toastError("Validation Error", "Please select an outlet");
      return;
    }
    if (orderItems.length === 0) {
      toastError("Validation Error", "Please add at least one product");
      return;
    }
    if (orderItems.some((item) => !item.productId)) {
      toastError("Validation Error", "Please select a product for all items");
      return;
    }
    onSubmit(formData);
  };
  const InfoCard = /* @__PURE__ */ jsxs26(Card2, { children: [
    /* @__PURE__ */ jsx40(CardHeader2, { children: /* @__PURE__ */ jsx40(CardTitle2, { children: "Th\xF4ng tin \u0111\u01A1n h\xE0ng" }) }),
    /* @__PURE__ */ jsxs26(CardContent2, { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs26("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Lo\u1EA1i \u0111\u01A1n h\xE0ng" }),
          /* @__PURE__ */ jsxs26(
            Select2,
            {
              value: formData.orderType,
              onValueChange: (value) => setFormData((prev) => ({ ...prev, orderType: value })),
              children: [
                /* @__PURE__ */ jsx40(SelectTrigger2, { variant: "filled", children: /* @__PURE__ */ jsx40(SelectValue2, {}) }),
                /* @__PURE__ */ jsxs26(SelectContent2, { children: [
                  /* @__PURE__ */ jsx40(SelectItem2, { value: "RENT", children: "Thu\xEA" }),
                  /* @__PURE__ */ jsx40(SelectItem2, { value: "SALE", children: "B\xE1n" }),
                  /* @__PURE__ */ jsx40(SelectItem2, { value: "RENT_TO_OWN", children: "Thu\xEA \u0111\u1EC3 mua" })
                ] })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "C\u1EEDa h\xE0ng *" }),
          /* @__PURE__ */ jsxs26(
            Select2,
            {
              value: formData.outletId,
              onValueChange: (value) => setFormData((prev) => ({ ...prev, outletId: value })),
              children: [
                /* @__PURE__ */ jsx40(SelectTrigger2, { variant: "filled", children: /* @__PURE__ */ jsx40(SelectValue2, { placeholder: "Ch\u1ECDn c\u1EEDa h\xE0ng" }) }),
                /* @__PURE__ */ jsx40(SelectContent2, { children: outlets.map((outlet) => /* @__PURE__ */ jsx40(SelectItem2, { value: outlet.id, children: outlet.name }, outlet.id)) })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs26("div", { children: [
        /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Kh\xE1ch h\xE0ng" }),
        /* @__PURE__ */ jsx40(
          SearchableSelect2,
          {
            value: selectedCustomer?.id || void 0,
            onChange: (val) => {
              const customer = customers.find((c) => c.id === val);
              setSelectedCustomer(customer || null);
            },
            options: customers.map((c) => ({
              value: String(c.id),
              label: `${c.firstName} ${c.lastName} - ${c.phone}`
            })),
            placeholder: "Ch\u1ECDn kh\xE1ch h\xE0ng ho\u1EB7c \u0111\u1EC3 tr\u1ED1ng cho kh\xE1ch v\xE3ng lai",
            searchPlaceholder: "T\xECm ki\u1EBFm kh\xE1ch h\xE0ng..."
          }
        )
      ] }),
      !selectedCustomer && /* @__PURE__ */ jsxs26("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "T\xEAn kh\xE1ch h\xE0ng" }),
          /* @__PURE__ */ jsx40(Input2, { variant: "filled", value: formData.customerName || "", onChange: (e2) => setFormData((prev) => ({ ...prev, customerName: e2.target.value })), placeholder: "T\xEAn kh\xE1ch h\xE0ng" })
        ] }),
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "S\u1ED1 \u0111i\u1EC7n tho\u1EA1i" }),
          /* @__PURE__ */ jsx40(Input2, { variant: "filled", value: formData.customerPhone || "", onChange: (e2) => setFormData((prev) => ({ ...prev, customerPhone: e2.target.value })), placeholder: "S\u1ED1 \u0111i\u1EC7n tho\u1EA1i" })
        ] }),
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Email" }),
          /* @__PURE__ */ jsx40(Input2, { type: "email", variant: "filled", value: formData.customerEmail || "", onChange: (e2) => setFormData((prev) => ({ ...prev, customerEmail: e2.target.value })), placeholder: "Email" })
        ] })
      ] }),
      formData.orderType === "RENT" && /* @__PURE__ */ jsxs26("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Ng\xE0y nh\u1EADn d\u1EF1 ki\u1EBFn" }),
          /* @__PURE__ */ jsx40(
            Input2,
            {
              type: "datetime-local",
              variant: "filled",
              value: formData.pickupPlanAt?.toISOString().slice(0, 16) || "",
              onChange: (e2) => setFormData((prev) => ({ ...prev, pickupPlanAt: e2.target.value ? new Date(e2.target.value) : void 0 }))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Ng\xE0y tr\u1EA3 d\u1EF1 ki\u1EBFn" }),
          /* @__PURE__ */ jsx40(
            Input2,
            {
              type: "datetime-local",
              variant: "filled",
              value: formData.returnPlanAt?.toISOString().slice(0, 16) || "",
              onChange: (e2) => setFormData((prev) => ({ ...prev, returnPlanAt: e2.target.value ? new Date(e2.target.value) : void 0 }))
            }
          )
        ] })
      ] })
    ] })
  ] });
  const ProductsCard = /* @__PURE__ */ jsxs26(Card2, { children: [
    /* @__PURE__ */ jsx40(CardHeader2, { children: /* @__PURE__ */ jsxs26("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsx40(CardTitle2, { children: "S\u1EA3n ph\u1EA9m" }),
      /* @__PURE__ */ jsx40(Button3, { type: "button", onClick: addOrderItem, variant: "outline", size: "sm", children: "Th\xEAm s\u1EA3n ph\u1EA9m" })
    ] }) }),
    /* @__PURE__ */ jsx40(CardContent2, { children: orderItems.length === 0 ? /* @__PURE__ */ jsx40("div", { className: "text-center py-8 text-gray-500", children: 'Ch\u01B0a c\xF3 s\u1EA3n ph\u1EA9m n\xE0o. Nh\u1EA5n "Th\xEAm s\u1EA3n ph\u1EA9m" \u0111\u1EC3 b\u1EAFt \u0111\u1EA7u.' }) : /* @__PURE__ */ jsx40("div", { className: "space-y-4", children: orderItems.map((item, index) => /* @__PURE__ */ jsxs26("div", { className: "border rounded-lg p-4 space-y-4", children: [
      /* @__PURE__ */ jsxs26("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs26("h4", { className: "font-medium", children: [
          "S\u1EA3n ph\u1EA9m ",
          index + 1
        ] }),
        /* @__PURE__ */ jsx40(Button3, { type: "button", variant: "destructive", size: "sm", onClick: () => removeOrderItem(index), children: "X\xF3a" })
      ] }),
      /* @__PURE__ */ jsxs26("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "S\u1EA3n ph\u1EA9m *" }),
          /* @__PURE__ */ jsxs26(Select2, { value: item.productId, onValueChange: (value) => updateOrderItem(index, "productId", value), children: [
            /* @__PURE__ */ jsx40(SelectTrigger2, { variant: "filled", children: /* @__PURE__ */ jsx40(SelectValue2, { placeholder: "Ch\u1ECDn s\u1EA3n ph\u1EA9m" }) }),
            /* @__PURE__ */ jsx40(SelectContent2, { children: products.map((product) => /* @__PURE__ */ jsxs26(SelectItem2, { value: product.id, children: [
              product.name,
              " - ",
              formatCurrency2(product.rentPrice),
              "/ng\xE0y"
            ] }, product.id)) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "S\u1ED1 l\u01B0\u1EE3ng" }),
          /* @__PURE__ */ jsx40(Input2, { variant: "filled", type: "number", min: "1", value: item.quantity, onChange: (e2) => updateOrderItem(index, "quantity", parseInt(e2.target.value) || 1) })
        ] }),
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "\u0110\u01A1n gi\xE1" }),
          /* @__PURE__ */ jsx40(Input2, { variant: "filled", type: "number", min: "0", step: "0.01", value: item.unitPrice, onChange: (e2) => updateOrderItem(index, "unitPrice", parseFloat(e2.target.value) || 0) })
        ] }),
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Ti\u1EC1n c\u1ECDc" }),
          /* @__PURE__ */ jsx40(Input2, { variant: "filled", type: "number", min: "0", step: "0.01", value: item.deposit, onChange: (e2) => updateOrderItem(index, "deposit", parseFloat(e2.target.value) || 0) })
        ] })
      ] }),
      formData.orderType === "RENT" && /* @__PURE__ */ jsxs26("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Ng\xE0y b\u1EAFt \u0111\u1EA7u thu\xEA" }),
          /* @__PURE__ */ jsx40(Input2, { variant: "filled", type: "date", value: item.startDate || "", onChange: (e2) => updateOrderItem(index, "startDate", e2.target.value) })
        ] }),
        /* @__PURE__ */ jsxs26("div", { children: [
          /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Ng\xE0y k\u1EBFt th\xFAc thu\xEA" }),
          /* @__PURE__ */ jsx40(Input2, { variant: "filled", type: "date", value: item.endDate || "", onChange: (e2) => updateOrderItem(index, "endDate", e2.target.value) })
        ] })
      ] }),
      /* @__PURE__ */ jsxs26("div", { children: [
        /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Ghi ch\xFA" }),
        /* @__PURE__ */ jsx40(Textarea2, { value: item.notes, onChange: (e2) => updateOrderItem(index, "notes", e2.target.value), placeholder: "Ghi ch\xFA cho s\u1EA3n ph\u1EA9m n\xE0y" })
      ] }),
      /* @__PURE__ */ jsx40("div", { className: "flex justify-end", children: /* @__PURE__ */ jsxs26(Badge2, { variant: "outline", children: [
        "T\u1ED5ng: ",
        formatCurrency2(item.totalPrice)
      ] }) })
    ] }, index)) }) })
  ] });
  const FinancialCard = /* @__PURE__ */ jsxs26(Card2, { children: [
    /* @__PURE__ */ jsx40(CardHeader2, { children: /* @__PURE__ */ jsx40(CardTitle2, { children: "T\xF3m t\u1EAFt \u0111\u01A1n h\xE0ng" }) }),
    /* @__PURE__ */ jsx40(CardContent2, { children: /* @__PURE__ */ jsxs26("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx40("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: /* @__PURE__ */ jsxs26("div", { children: [
        /* @__PURE__ */ jsx40("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Gi\u1EA3m gi\xE1" }),
        /* @__PURE__ */ jsx40(
          Input2,
          {
            variant: "filled",
            type: "number",
            min: "0",
            step: "0.01",
            value: formData.discountAmount || 0,
            onChange: (e2) => setFormData((prev) => ({ ...prev, discountAmount: parseFloat(e2.target.value) || 0 }))
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs26("div", { className: "border-t pt-4 space-y-2", children: [
        /* @__PURE__ */ jsxs26("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsx40("span", { children: "T\u1EA1m t\xEDnh:" }),
          /* @__PURE__ */ jsx40("span", { children: formatCurrency2(formData.subtotal || 0) })
        ] }),
        /* @__PURE__ */ jsxs26("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsx40("span", { children: "Thu\u1EBF (10%):" }),
          /* @__PURE__ */ jsx40("span", { children: formatCurrency2(formData.taxAmount || 0) })
        ] }),
        /* @__PURE__ */ jsxs26("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsx40("span", { children: "Gi\u1EA3m gi\xE1:" }),
          /* @__PURE__ */ jsxs26("span", { children: [
            "-",
            formatCurrency2(formData.discountAmount || 0)
          ] })
        ] }),
        /* @__PURE__ */ jsxs26("div", { className: "flex justify-between text-lg font-semibold border-t pt-2", children: [
          /* @__PURE__ */ jsx40("span", { children: "T\u1ED5ng c\u1ED9ng:" }),
          /* @__PURE__ */ jsx40("span", { className: "text-green-600", children: formatCurrency2(formData.totalAmount || 0) })
        ] }),
        /* @__PURE__ */ jsxs26("div", { className: "flex justify-between text-lg font-semibold", children: [
          /* @__PURE__ */ jsx40("span", { children: "Ti\u1EC1n c\u1ECDc:" }),
          /* @__PURE__ */ jsx40("span", { className: "text-blue-600", children: formatCurrency2(formData.depositAmount || 0) })
        ] })
      ] })
    ] }) })
  ] });
  const NotesCard = /* @__PURE__ */ jsxs26(Card2, { children: [
    /* @__PURE__ */ jsx40(CardHeader2, { children: /* @__PURE__ */ jsx40(CardTitle2, { children: "Ghi ch\xFA" }) }),
    /* @__PURE__ */ jsx40(CardContent2, { children: /* @__PURE__ */ jsx40(Textarea2, { value: formData.notes || "", onChange: (e2) => setFormData((prev) => ({ ...prev, notes: e2.target.value })), placeholder: "Ghi ch\xFA cho \u0111\u01A1n h\xE0ng", rows: 3 }) })
  ] });
  return /* @__PURE__ */ jsx40("form", { onSubmit: handleSubmit, className: "space-y-6", children: layout === "split" ? /* @__PURE__ */ jsxs26(Fragment4, { children: [
    /* @__PURE__ */ jsxs26("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [
      /* @__PURE__ */ jsxs26("div", { className: "lg:col-span-2 space-y-6", children: [
        ProductsCard,
        NotesCard
      ] }),
      /* @__PURE__ */ jsxs26("div", { className: "lg:col-span-1 space-y-6 lg:sticky lg:top-24", children: [
        InfoCard,
        FinancialCard
      ] })
    ] }),
    /* @__PURE__ */ jsxs26("div", { className: "flex justify-end space-x-4", children: [
      /* @__PURE__ */ jsx40(Button3, { type: "button", variant: "outline", onClick: onCancel, children: "H\u1EE7y" }),
      /* @__PURE__ */ jsx40(Button3, { type: "submit", disabled: loading, children: loading ? "\u0110ang x\u1EED l\xFD..." : "L\u01B0u \u0111\u01A1n h\xE0ng" })
    ] })
  ] }) : /* @__PURE__ */ jsxs26(Fragment4, { children: [
    InfoCard,
    ProductsCard,
    FinancialCard,
    NotesCard,
    /* @__PURE__ */ jsxs26("div", { className: "flex justify-end space-x-4", children: [
      /* @__PURE__ */ jsx40(Button3, { type: "button", variant: "outline", onClick: onCancel, children: "H\u1EE7y" }),
      /* @__PURE__ */ jsx40(Button3, { type: "submit", disabled: loading, children: loading ? "\u0110ang x\u1EED l\xFD..." : "L\u01B0u \u0111\u01A1n h\xE0ng" })
    ] })
  ] }) });
};

// src/components/forms/CreateOrderForm/CreateOrderForm.tsx
import { useState as useState19, useEffect as useEffect12, useCallback as useCallback6 } from "react";
import { useToast as useToast4 } from "@rentalshop/ui";
import { customersApi as customersApi2, formatCurrency as formatCurrency5 } from "@rentalshop/utils";
import { useProductAvailability, useOrderTranslations as useOrderTranslations5 } from "@rentalshop/hooks";
import { VALIDATION as VALIDATION3, BUSINESS as BUSINESS3 } from "@rentalshop/constants";

// src/components/forms/CreateOrderForm/hooks/useCreateOrderForm.ts
import { useState as useState12, useEffect as useEffect11, useCallback as useCallback2, useRef as useRef6 } from "react";
import { useToast as useToast3 } from "@rentalshop/ui";
import { BUSINESS } from "@rentalshop/constants";
var useCreateOrderForm = (props) => {
  const {
    outlets = [],
    isEditMode = false,
    initialOrder,
    merchantId
  } = props;
  const [formData, setFormData] = useState12(() => {
    if (isEditMode && initialOrder) {
      return {
        orderType: initialOrder.orderType || "RENT",
        customerId: parseInt(initialOrder.customerId) || void 0,
        outletId: initialOrder.outletId || outlets[0]?.id || void 0,
        pickupPlanAt: initialOrder.pickupPlanAt ? new Date(initialOrder.pickupPlanAt).toISOString().split("T")[0] : "",
        returnPlanAt: initialOrder.returnPlanAt ? new Date(initialOrder.returnPlanAt).toISOString().split("T")[0] : "",
        subtotal: initialOrder.subtotal || 0,
        taxAmount: initialOrder.taxAmount || 0,
        discountType: initialOrder.discountType || "amount",
        discountValue: initialOrder.discountValue || BUSINESS.DEFAULT_DISCOUNT,
        discountAmount: initialOrder.discountAmount || BUSINESS.DEFAULT_DISCOUNT,
        depositAmount: initialOrder.depositAmount || BUSINESS.DEFAULT_DEPOSIT,
        securityDeposit: initialOrder.securityDeposit || 0,
        lateFee: initialOrder.lateFee || 0,
        damageFee: initialOrder.damageFee || 0,
        totalAmount: initialOrder.totalAmount || 0,
        notes: initialOrder.notes || "",
        orderItems: []
      };
    }
    return {
      orderType: "RENT",
      customerId: void 0,
      outletId: outlets[0]?.id || void 0,
      pickupPlanAt: "",
      returnPlanAt: "",
      subtotal: 0,
      taxAmount: 0,
      discountType: "amount",
      discountValue: BUSINESS.DEFAULT_DISCOUNT,
      discountAmount: BUSINESS.DEFAULT_DISCOUNT,
      depositAmount: BUSINESS.DEFAULT_DEPOSIT,
      securityDeposit: 0,
      lateFee: 0,
      damageFee: 0,
      totalAmount: 0,
      notes: "",
      orderItems: []
    };
  });
  const [orderItems, setOrderItems] = useState12(() => {
    if (isEditMode && initialOrder?.orderItems) {
      return initialOrder.orderItems.map((item) => ({
        id: item.id,
        // Keep database CUID for existing items
        productId: item.product?.id || item.productId || 0,
        // Frontend uses id (number)
        product: {
          id: item.product?.id || item.productId || 0,
          // Frontend uses id (number)
          name: item.product?.name || "Unknown Product",
          description: item.product?.description || "",
          images: item.product?.images || null,
          barcode: item.product?.barcode || "",
          rentPrice: item.unitPrice || 0,
          // Use unitPrice as rentPrice
          deposit: item.deposit ?? 0
        },
        quantity: item.quantity || 1,
        unitPrice: item.unitPrice || 0,
        totalPrice: item.totalPrice || 0,
        rentalDays: item.rentalDays || 0,
        deposit: item.deposit ?? 0,
        notes: item.notes || ""
      }));
    }
    return [];
  });
  const orderItemsRef = useRef6(orderItems);
  useEffect11(() => {
    orderItemsRef.current = orderItems;
  }, [orderItems]);
  const [isSubmitting, setIsSubmitting] = useState12(false);
  const [showOrderPreview, setShowOrderPreview] = useState12(false);
  const { toastSuccess, toastError } = useToast3();
  useEffect11(() => {
    const subtotal = orderItems.reduce((sum, item) => sum + item.quantity * item.unitPrice, 0);
    const discountAmount = formData.discountType === "percentage" ? subtotal * formData.discountValue / 100 : formData.discountValue;
    const totalAmount = subtotal - discountAmount;
    setFormData((prev) => ({
      ...prev,
      subtotal,
      discountAmount,
      totalAmount
    }));
  }, [orderItems, formData.discountType, formData.discountValue]);
  useEffect11(() => {
    if (formData.orderType === "RENT") {
      const totalDeposit = orderItems.reduce((sum, item) => sum + (item.deposit ?? 0), 0);
      setFormData((prev) => ({
        ...prev,
        depositAmount: totalDeposit
      }));
    } else {
      setFormData((prev) => ({
        ...prev,
        depositAmount: 0
      }));
    }
  }, [orderItems, formData.orderType]);
  useEffect11(() => {
    if (isEditMode && initialOrder) {
      setFormData((prev) => ({
        ...prev,
        orderType: initialOrder.orderType || "RENT",
        customerId: initialOrder.customerId || void 0,
        outletId: initialOrder.outletId || outlets[0]?.id || void 0,
        pickupPlanAt: initialOrder.pickupPlanAt ? new Date(initialOrder.pickupPlanAt).toISOString().split("T")[0] : "",
        returnPlanAt: initialOrder.returnPlanAt ? new Date(initialOrder.returnPlanAt).toISOString().split("T")[0] : "",
        subtotal: initialOrder.subtotal || 0,
        taxAmount: initialOrder.taxAmount || 0,
        discountType: initialOrder.discountType || "amount",
        discountValue: initialOrder.discountValue || BUSINESS.DEFAULT_DISCOUNT,
        discountAmount: initialOrder.discountAmount || BUSINESS.DEFAULT_DISCOUNT,
        depositAmount: initialOrder.depositAmount || BUSINESS.DEFAULT_DEPOSIT,
        securityDeposit: initialOrder.securityDeposit || 0,
        lateFee: initialOrder.lateFee || 0,
        damageFee: initialOrder.damageFee || 0,
        totalAmount: initialOrder.totalAmount || 0,
        notes: initialOrder.notes || ""
      }));
      if (initialOrder.orderItems) {
        const initialOrderItems = initialOrder.orderItems.map((item) => ({
          id: item.id,
          // Keep database CUID for existing items
          productId: item.product?.id || item.productId || 0,
          // Frontend uses id (number)
          product: {
            id: item.product?.id || item.productId || 0,
            // Frontend uses id (number)
            name: item.product?.name || "Unknown Product",
            description: item.product?.description || "",
            images: item.product?.images || null,
            barcode: item.product?.barcode || "",
            rentPrice: item.unitPrice || 0,
            // Use unitPrice as rentPrice
            deposit: item.deposit ?? 0
          },
          quantity: item.quantity || 1,
          unitPrice: item.unitPrice || 0,
          totalPrice: item.totalPrice || 0,
          rentalDays: item.rentalDays || 0,
          deposit: item.deposit ?? 0,
          notes: item.notes || ""
        }));
        setOrderItems(initialOrderItems);
        if (initialOrder.orderType === "RENT") {
          const totalDeposit = initialOrderItems.reduce((sum, item) => sum + (item.deposit ?? 0), 0);
          setFormData((prev) => ({
            ...prev,
            depositAmount: totalDeposit
          }));
        }
      }
    }
  }, [isEditMode, initialOrder, outlets]);
  const addProductToOrder = useCallback2((product) => {
    const productIdNumber = product.id;
    const existingItem = orderItems.find((item) => item.productId === productIdNumber);
    if (existingItem) {
      const updatedItems = orderItems.map(
        (item) => item.productId === productIdNumber ? { ...item, quantity: item.quantity + 1 } : item
      );
      setOrderItems(updatedItems);
    } else {
      const rentPrice = product.rentPrice ?? 0;
      const deposit = product.deposit ?? 0;
      const newItem = {
        productId: productIdNumber,
        product: {
          id: productIdNumber,
          name: product.name || "Unknown Product",
          description: product.description || "",
          images: product.images || null,
          barcode: product.barcode || "",
          rentPrice,
          deposit
        },
        quantity: BUSINESS.DEFAULT_QUANTITY,
        unitPrice: formData.orderType === "RENT" ? rentPrice : rentPrice,
        totalPrice: (formData.orderType === "RENT" ? rentPrice : rentPrice) * BUSINESS.DEFAULT_QUANTITY,
        deposit,
        notes: ""
      };
      const newOrderItems = [...orderItems, newItem];
      setOrderItems(newOrderItems);
    }
  }, [orderItems, formData.orderType]);
  const removeProductFromOrder = useCallback2((productId) => {
    setOrderItems(orderItems.filter((item) => item.productId !== productId));
  }, [orderItems]);
  const updateOrderItem = useCallback2((productId, field, value) => {
    const updatedItems = orderItems.map((item) => {
      if (item.productId === productId) {
        return { ...item, [field]: value };
      }
      return item;
    });
    setOrderItems(updatedItems);
  }, [orderItems]);
  const calculateRentalDays = useCallback2((startDate, endDate) => {
    if (!startDate || !endDate)
      return 0;
    const start = new Date(startDate);
    const end = new Date(endDate);
    const diffTime = Math.abs(end.getTime() - start.getTime());
    return Math.ceil(diffTime / (1e3 * 60 * 60 * 24));
  }, []);
  const updateRentalDates = useCallback2((startDate, endDate) => {
    setFormData((prev) => ({
      ...prev,
      pickupPlanAt: startDate,
      returnPlanAt: endDate
    }));
    const days = calculateRentalDays(startDate, endDate);
    const updatedItems = orderItems.map((item) => ({
      ...item,
      startDate,
      endDate,
      daysRented: days,
      totalPrice: item.unitPrice * days * item.quantity
    }));
    setOrderItems(updatedItems);
  }, [orderItems, calculateRentalDays]);
  const handlePreviewClick = useCallback2((e2) => {
    e2.preventDefault();
    console.log("\u{1F50D} Preview clicked - Current orderItems:", orderItems);
    console.log("\u{1F50D} Preview clicked - orderItems length:", orderItems.length);
    console.log("\u{1F50D} Preview clicked - orderItems details:", orderItems.map((item) => ({
      productId: item.productId,
      productName: item.product?.name,
      quantity: item.quantity
    })));
    setShowOrderPreview(true);
  }, [orderItems]);
  const handleSubmit = useCallback2(async (e2) => {
    e2.preventDefault();
    const currentOrderItems = orderItemsRef.current;
    if (isSubmitting)
      return;
    if (!currentOrderItems || currentOrderItems.length === 0) {
      throw new Error("Please add at least one product to the order before submitting.");
    }
    setIsSubmitting(true);
    try {
      const apiPayload = {
        orderType: formData.orderType,
        customerId: formData.customerId,
        // Send as number
        outletId: formData.outletId,
        // Send as number
        pickupPlanAt: formData.pickupPlanAt ? new Date(formData.pickupPlanAt).toISOString() : void 0,
        returnPlanAt: formData.returnPlanAt ? new Date(formData.returnPlanAt).toISOString() : void 0,
        subtotal: formData.subtotal,
        taxAmount: formData.taxAmount,
        discountType: formData.discountType,
        discountValue: formData.discountValue,
        discountAmount: formData.discountAmount,
        depositAmount: formData.depositAmount,
        securityDeposit: formData.securityDeposit,
        lateFee: formData.lateFee,
        damageFee: formData.damageFee,
        totalAmount: formData.totalAmount,
        notes: formData.notes,
        orderItems: currentOrderItems.map((item) => ({
          productId: item.productId,
          // Send as number
          quantity: item.quantity,
          unitPrice: item.unitPrice,
          deposit: item.deposit ?? 0,
          notes: item.notes || ""
        }))
      };
      if (isEditMode && initialOrder?.id) {
        apiPayload.id = initialOrder.id;
      }
      props.onSubmit?.(apiPayload);
    } catch (error2) {
      throw error2;
    } finally {
      setIsSubmitting(false);
    }
  }, [formData, isEditMode, initialOrder, props, isSubmitting]);
  const handleOrderConfirm = useCallback2(async () => {
    setShowOrderPreview(false);
    const mockEvent = { preventDefault: () => {
    } };
    await handleSubmit(mockEvent);
  }, [orderItems, handleSubmit]);
  const resetForm = useCallback2(() => {
    if (isEditMode && initialOrder) {
      setFormData({
        orderType: initialOrder.orderType || "RENT",
        customerId: parseInt(initialOrder.customerId) || void 0,
        outletId: initialOrder.outletId || outlets[0]?.id || void 0,
        pickupPlanAt: initialOrder.pickupPlanAt ? new Date(initialOrder.pickupPlanAt).toISOString().split("T")[0] : "",
        returnPlanAt: initialOrder.returnPlanAt ? new Date(initialOrder.returnPlanAt).toISOString().split("T")[0] : "",
        subtotal: initialOrder.subtotal || 0,
        taxAmount: initialOrder.taxAmount || 0,
        discountType: "amount",
        discountValue: BUSINESS.DEFAULT_DISCOUNT,
        discountAmount: initialOrder.discountAmount || BUSINESS.DEFAULT_DISCOUNT,
        depositAmount: initialOrder.depositAmount || BUSINESS.DEFAULT_DEPOSIT,
        securityDeposit: initialOrder.securityDeposit || 0,
        lateFee: initialOrder.lateFee || 0,
        damageFee: initialOrder.damageFee || 0,
        totalAmount: initialOrder.totalAmount || 0,
        notes: initialOrder.notes || "",
        orderItems: []
      });
      setOrderItems(initialOrder.orderItems.map((item) => ({
        id: item.id,
        productId: item.productId || 0,
        product: {
          id: item.product?.id || item.productId || 0,
          name: item.product?.name || "Unknown Product",
          description: item.product?.description || "",
          images: item.product?.images || null,
          barcode: item.product?.barcode || "",
          rentPrice: item.unitPrice || 0,
          deposit: item.deposit ?? 0
        },
        quantity: item.quantity || 1,
        unitPrice: item.unitPrice || 0,
        totalPrice: item.totalPrice || 0,
        rentalDays: item.rentalDays || 0,
        deposit: item.deposit ?? 0,
        notes: item.notes || ""
      })));
    } else {
      setFormData({
        orderType: "RENT",
        customerId: void 0,
        outletId: outlets[0]?.id || void 0,
        pickupPlanAt: "",
        returnPlanAt: "",
        subtotal: 0,
        taxAmount: 0,
        discountType: "amount",
        discountValue: BUSINESS.DEFAULT_DISCOUNT,
        discountAmount: BUSINESS.DEFAULT_DISCOUNT,
        depositAmount: BUSINESS.DEFAULT_DEPOSIT,
        securityDeposit: 0,
        lateFee: 0,
        damageFee: 0,
        totalAmount: 0,
        notes: "",
        orderItems: []
      });
      setOrderItems([]);
    }
  }, [isEditMode, initialOrder, outlets]);
  return {
    // State
    formData,
    setFormData,
    orderItems,
    setOrderItems,
    isSubmitting,
    showOrderPreview,
    setShowOrderPreview,
    // Actions
    addProductToOrder,
    removeProductFromOrder,
    updateOrderItem,
    updateRentalDates,
    handlePreviewClick,
    handleOrderConfirm,
    handleSubmit,
    resetForm,
    // Utilities
    calculateRentalDays
  };
};

// src/components/forms/CreateOrderForm/hooks/useOrderValidation.ts
import { useState as useState13, useCallback as useCallback3 } from "react";
import { BUSINESS as BUSINESS2, VALIDATION as VALIDATION2 } from "@rentalshop/constants";
var useOrderValidation = () => {
  const [validationErrors, setValidationErrors] = useState13({});
  const calculateRentalDays = useCallback3((startDate, endDate) => {
    if (!startDate || !endDate)
      return 0;
    const start = new Date(startDate);
    const end = new Date(endDate);
    const diffTime = Math.abs(end.getTime() - start.getTime());
    return Math.ceil(diffTime / (1e3 * 60 * 60 * 24));
  }, []);
  const validateForm = useCallback3((formData, orderItems) => {
    const errors = {};
    if (!formData.customerId || formData.customerId <= 0) {
      errors.customerId = "Customer selection is required";
    }
    if (!formData.outletId || formData.outletId <= 0) {
      errors.outletId = "Outlet selection is required";
    }
    if (orderItems.length === 0) {
      errors.orderItems = "At least one product is required";
    }
    if (formData.orderType === "RENT") {
      if (!formData.pickupPlanAt) {
        errors.pickupPlanAt = "Pickup date is required for rentals";
      }
      if (!formData.returnPlanAt) {
        errors.returnPlanAt = "Return date is required for rentals";
      }
      if (formData.pickupPlanAt && formData.returnPlanAt) {
        const days = calculateRentalDays(formData.pickupPlanAt, formData.returnPlanAt);
        if (days < BUSINESS2.MIN_RENTAL_DAYS) {
          errors.returnPlanAt = `Rental must be at least ${BUSINESS2.MIN_RENTAL_DAYS} day`;
        } else if (days > BUSINESS2.MAX_RENTAL_DAYS) {
          errors.returnPlanAt = `Rental cannot exceed ${BUSINESS2.MAX_RENTAL_DAYS} days`;
        }
      }
    }
    if (formData.orderType === "RENT" && formData.depositAmount < VALIDATION2.MIN_DEPOSIT_AMOUNT) {
      errors.depositAmount = `Deposit amount cannot be less than ${VALIDATION2.MIN_DEPOSIT_AMOUNT}`;
    }
    setValidationErrors(errors);
    return Object.keys(errors).length === 0;
  }, [calculateRentalDays]);
  const isFormValid = useCallback3((formData, orderItems) => {
    const hasProducts = orderItems.length > 0;
    const hasCustomer = Boolean(formData.customerId && formData.customerId > 0);
    const hasOutlet = Boolean(formData.outletId && formData.outletId > 0);
    if (formData.orderType === "RENT") {
      return hasProducts && hasCustomer && hasOutlet && Boolean(formData.pickupPlanAt) && Boolean(formData.returnPlanAt);
    } else {
      return hasProducts && hasCustomer && hasOutlet;
    }
  }, []);
  const clearValidationErrors = useCallback3(() => {
    setValidationErrors({});
  }, []);
  const setValidationError = useCallback3((field, message) => {
    setValidationErrors((prev) => ({
      ...prev,
      [field]: message
    }));
  }, []);
  const clearValidationError = useCallback3((field) => {
    setValidationErrors((prev) => {
      const newErrors = { ...prev };
      delete newErrors[field];
      return newErrors;
    });
  }, []);
  return {
    validationErrors,
    validateForm,
    isFormValid,
    clearValidationErrors,
    setValidationError,
    clearValidationError,
    calculateRentalDays
  };
};

// src/components/forms/CreateOrderForm/hooks/useProductSearch.ts
import { useState as useState14, useCallback as useCallback4 } from "react";
import { productsApi, formatCurrency as formatCurrency3 } from "@rentalshop/utils";
import { PAGINATION } from "@rentalshop/constants";
var useProductSearch = (currency = "USD") => {
  const [isLoadingProducts, setIsLoadingProducts] = useState14(false);
  const searchProductsForSelect = useCallback4(async (query) => {
    if (!query.trim()) {
      return [];
    }
    try {
      setIsLoadingProducts(true);
      const result = await productsApi.getProducts({
        search: query,
        limit: PAGINATION.SEARCH_LIMIT
      });
      if (result.success && result.data?.products) {
        return result.data.products.map((product) => {
          const outletStock = product.outletStock?.[0];
          const available = outletStock?.available ?? 0;
          const stock = outletStock?.stock ?? 0;
          const totalStock = stock;
          return {
            value: String(product.id),
            // Use id from server response
            label: product.name,
            image: product.image || product.imageUrl,
            // Support both image and imageUrl fields
            subtitle: product.barcode ? `Barcode: ${product.barcode}` : "No Barcode",
            details: [
              formatCurrency3(product.rentPrice || 0, currency),
              `Deposit: ${formatCurrency3(product.deposit || 0, currency)}`,
              `Available: ${available}`,
              `Total Stock: ${totalStock}`,
              product.category?.name || "No Category"
            ].filter(Boolean),
            // Remove empty values
            type: "product"
          };
        });
      }
      return [];
    } catch (error2) {
      console.error("Error searching products:", error2);
      return [];
    } finally {
      setIsLoadingProducts(false);
    }
  }, [currency]);
  const searchProducts = useCallback4(async (query) => {
    if (!query.trim())
      return [];
    try {
      setIsLoadingProducts(true);
      const result = await productsApi.getProducts({
        search: query,
        limit: PAGINATION.SEARCH_LIMIT
      });
      if (result.success && result.data?.products) {
        return result.data.products;
      }
      return [];
    } catch (error2) {
      console.error("Error searching products:", error2);
      return [];
    } finally {
      setIsLoadingProducts(false);
    }
  }, []);
  return {
    isLoadingProducts,
    searchProductsForSelect,
    searchProducts
  };
};

// src/components/forms/CreateOrderForm/hooks/useCustomerSearch.ts
import { useState as useState15, useCallback as useCallback5 } from "react";
import { customersApi } from "@rentalshop/utils";
import { PAGINATION as PAGINATION2 } from "@rentalshop/constants";
var useCustomerSearch = () => {
  const [isLoadingCustomers, setIsLoadingCustomers] = useState15(false);
  const [customerSearchResults, setCustomerSearchResults] = useState15([]);
  const searchCustomers = useCallback5(async (query) => {
    if (!query.trim()) {
      setCustomerSearchResults([]);
      return [];
    }
    try {
      setIsLoadingCustomers(true);
      const result = await customersApi.getCustomers({
        search: query,
        limit: PAGINATION2.SEARCH_LIMIT,
        isActive: true
      });
      if (result.success && result.data?.customers && result.data.customers.length > 0) {
        setCustomerSearchResults(result.data.customers);
        const searchOptions = result.data.customers.map((customer) => ({
          value: customer.id,
          label: `${customer.firstName} ${customer.lastName} - ${customer.phone}`,
          type: "customer"
        }));
        return searchOptions;
      } else {
        setCustomerSearchResults([]);
        return [];
      }
    } catch (error2) {
      console.error("Error searching customers:", error2);
      setCustomerSearchResults([]);
      return [];
    } finally {
      setIsLoadingCustomers(false);
    }
  }, []);
  const clearCustomerSearchResults = useCallback5(() => {
    setCustomerSearchResults([]);
  }, []);
  const setCustomerResults = useCallback5((customers) => {
    setCustomerSearchResults(customers);
  }, []);
  return {
    isLoadingCustomers,
    customerSearchResults,
    searchCustomers,
    clearCustomerSearchResults,
    setCustomerResults
  };
};

// src/components/forms/CreateOrderForm/CreateOrderForm.tsx
import { useAuth } from "@rentalshop/hooks";

// src/components/forms/CreateOrderForm/components/ProductsSection.tsx
import React28 from "react";
import {
  Card as Card3,
  CardHeader as CardHeader3,
  CardTitle as CardTitle3,
  CardContent as CardContent3,
  Input as Input3,
  SearchableSelect as SearchableSelect3,
  Skeleton as Skeleton2,
  Button as Button4,
  useFormatCurrency as useFormatCurrency2
} from "@rentalshop/ui";
import { useOrderTranslations, useProductTranslations as useProductTranslations2 } from "@rentalshop/hooks";
import {
  Package as Package3,
  Trash2 as Trash22
} from "lucide-react";
import { ProductAvailabilityAsyncDisplay as ProductAvailabilityAsyncDisplay2 } from "@rentalshop/ui";
import { jsx as jsx41, jsxs as jsxs27 } from "react/jsx-runtime";
var NumberInput = ({
  value,
  onChange,
  min = 0,
  max,
  step = 1,
  className = "",
  placeholder = "",
  decimals = 0
}) => {
  const [displayValue, setDisplayValue] = React28.useState("");
  const [isFocused, setIsFocused] = React28.useState(false);
  React28.useEffect(() => {
    if (!isFocused) {
      if (value === 0 || value === null || value === void 0) {
        setDisplayValue("");
      } else {
        const formatted = new Intl.NumberFormat("en-US", {
          minimumFractionDigits: decimals,
          maximumFractionDigits: decimals
        }).format(value);
        setDisplayValue(formatted);
      }
    }
  }, [value, isFocused, decimals]);
  const handleFocus = () => {
    setIsFocused(true);
    setDisplayValue(value ? value.toString() : "");
  };
  const handleBlur = () => {
    setIsFocused(false);
    const numValue = parseFloat(displayValue.replace(/,/g, "")) || 0;
    const bounded = max !== void 0 ? Math.min(max, numValue) : numValue;
    const final = Math.max(min, bounded);
    onChange(final);
  };
  const handleChange = (e2) => {
    const input = e2.target.value;
    if (input === "" || /^[\d\.]*$/.test(input)) {
      setDisplayValue(input);
    }
  };
  return /* @__PURE__ */ jsx41(
    Input3,
    {
      type: "text",
      value: displayValue,
      onChange: handleChange,
      onFocus: handleFocus,
      onBlur: handleBlur,
      className,
      placeholder
    }
  );
};
var ProductsSection = ({
  orderItems,
  products,
  onAddProduct,
  onRemoveProduct,
  onUpdateOrderItem,
  onSearchProducts,
  isLoadingProducts,
  orderType,
  pickupDate,
  returnDate,
  getProductAvailabilityStatus,
  currency = "USD"
}) => {
  const t2 = useOrderTranslations();
  const tp = useProductTranslations2();
  return /* @__PURE__ */ jsx41(Card3, { children: /* @__PURE__ */ jsxs27(CardContent3, { className: "space-y-4 pt-6", children: [
    /* @__PURE__ */ jsx41("div", { className: "space-y-3", children: /* @__PURE__ */ jsxs27("div", { className: "relative", children: [
      /* @__PURE__ */ jsx41(
        SearchableSelect3,
        {
          placeholder: t2("messages.searchProducts"),
          value: void 0,
          onChange: (productId) => {
            console.log("\u{1F50D} SearchableSelect onChange called with productId:", productId);
            console.log("\u{1F50D} Available products:", products);
            const product = products.find((p2) => p2.id === productId);
            console.log("\u{1F50D} Found product:", product);
            if (product) {
              console.log("\u{1F50D} Calling onAddProduct with product:", product);
              onAddProduct(product);
            } else {
              console.error("\u274C Product not found for ID:", productId);
            }
          },
          onSearch: onSearchProducts,
          searchPlaceholder: "Type to search products...",
          emptyText: "No products found. Try a different search term.",
          showAddNew: false
        }
      ),
      isLoadingProducts && /* @__PURE__ */ jsx41("div", { className: "absolute right-3 top-1/2 transform -translate-y-1/2", children: /* @__PURE__ */ jsx41(Skeleton2, { className: "w-4 h-4 rounded-full" }) })
    ] }) }),
    /* @__PURE__ */ jsx41("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs27(Card3, { className: "border border-gray-200", children: [
      /* @__PURE__ */ jsx41(CardHeader3, { className: "pb-3", children: /* @__PURE__ */ jsxs27(CardTitle3, { className: "text-base flex items-center gap-2", children: [
        /* @__PURE__ */ jsx41(Package3, { className: "w-5 h-5" }),
        tp("selectedProducts"),
        " ",
        /* @__PURE__ */ jsx41("span", { className: "text-red-500", children: "*" }),
        /* @__PURE__ */ jsxs27("span", { className: "text-sm font-normal text-gray-500", children: [
          "(",
          orderItems.length,
          ")"
        ] })
      ] }) }),
      /* @__PURE__ */ jsx41(CardContent3, { children: orderItems.length === 0 ? (
        /* Empty State Placeholder */
        /* @__PURE__ */ jsxs27("div", { className: "p-8 text-center", children: [
          /* @__PURE__ */ jsx41("div", { className: "w-16 h-16 mx-auto mb-4 text-gray-400", children: /* @__PURE__ */ jsx41(Package3, { className: "w-16 h-16" }) }),
          /* @__PURE__ */ jsx41("h3", { className: "text-lg font-medium text-gray-600 mb-2", children: tp("noProductsSelected") }),
          /* @__PURE__ */ jsx41("p", { className: "text-sm text-gray-500 mb-4 max-w-sm mx-auto", children: t2("messages.searchProductsAbove") })
        ] })
      ) : (
        /* Product List */
        /* @__PURE__ */ jsx41("div", { className: "space-y-3", children: orderItems.map((item, index) => /* @__PURE__ */ jsx41(
          OrderItemCard,
          {
            item,
            product: products.find((p2) => p2.id === item.productId),
            onRemove: onRemoveProduct,
            onUpdate: onUpdateOrderItem,
            orderType,
            pickupDate,
            returnDate,
            getProductAvailabilityStatus
          },
          index
        )) })
      ) })
    ] }) })
  ] }) });
};
var OrderItemCard = ({
  item,
  product,
  onRemove,
  onUpdate,
  orderType,
  pickupDate,
  returnDate,
  getProductAvailabilityStatus
}) => {
  const formatMoney = useFormatCurrency2();
  const t2 = useOrderTranslations();
  const tp = useProductTranslations2();
  const displayProduct = item.product || product;
  if (!displayProduct) {
    return /* @__PURE__ */ jsxs27("div", { className: "p-4 bg-gray-50 rounded-lg border border-gray-100", children: [
      /* @__PURE__ */ jsxs27("div", { className: "flex items-start gap-4 mb-3", children: [
        /* @__PURE__ */ jsx41("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx41("div", { className: "w-16 h-16 rounded-lg overflow-hidden border border-gray-200 bg-gray-200 flex items-center justify-center", children: /* @__PURE__ */ jsx41(Package3, { className: "w-8 h-8 text-gray-400" }) }) }),
        /* @__PURE__ */ jsx41("div", { className: "flex-1 min-w-0", children: /* @__PURE__ */ jsxs27("div", { className: "flex items-start justify-between", children: [
          /* @__PURE__ */ jsxs27("div", { children: [
            /* @__PURE__ */ jsxs27("h4", { className: "text-sm font-medium text-gray-900", children: [
              tp("productId"),
              ": ",
              item.productId
            ] }),
            /* @__PURE__ */ jsx41("p", { className: "text-xs text-gray-500 mt-1", children: tp("productInformationNotAvailable") })
          ] }),
          /* @__PURE__ */ jsx41(
            Button4,
            {
              variant: "ghost",
              size: "icon",
              onClick: () => onRemove(item.productId),
              className: "text-red-500 hover:text-red-700 p-1 h-auto w-auto",
              title: t2("messages.removeProduct"),
              children: /* @__PURE__ */ jsx41(Trash22, { className: "w-4 h-4" })
            }
          )
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs27("div", { className: "grid grid-cols-2 gap-3 mb-3", children: [
        /* @__PURE__ */ jsxs27("div", { children: [
          /* @__PURE__ */ jsx41("label", { className: "block text-xs font-medium text-gray-700 mb-1", children: "Quantity" }),
          /* @__PURE__ */ jsx41(
            "input",
            {
              type: "number",
              value: item.quantity,
              onChange: (e2) => onUpdate(item.productId, "quantity", parseInt(e2.target.value) || 1),
              className: "w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",
              min: "1"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs27("div", { children: [
          /* @__PURE__ */ jsx41("label", { className: "block text-xs font-medium text-gray-700 mb-1", children: "Unit Price" }),
          /* @__PURE__ */ jsx41(
            "input",
            {
              type: "number",
              value: item.unitPrice,
              onChange: (e2) => onUpdate(item.productId, "unitPrice", parseFloat(e2.target.value) || 0),
              className: "w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",
              step: "0.01",
              min: "0"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs27("div", { className: "mb-3", children: [
        /* @__PURE__ */ jsx41("label", { className: "block text-xs font-medium text-gray-700 mb-1", children: "Notes" }),
        /* @__PURE__ */ jsx41(
          "textarea",
          {
            value: item.notes || "",
            onChange: (e2) => onUpdate(item.productId, "notes", e2.target.value),
            className: "w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",
            rows: 2,
            placeholder: "Add notes about this product..."
          }
        )
      ] }),
      /* @__PURE__ */ jsxs27("div", { className: "flex justify-between items-center text-sm", children: [
        /* @__PURE__ */ jsxs27("span", { className: "text-gray-600", children: [
          "Total: ",
          item.quantity,
          " \xD7 ",
          item.unitPrice,
          " \u20AB = ",
          item.quantity * item.unitPrice,
          " \u20AB"
        ] }),
        orderType === "RENT" && /* @__PURE__ */ jsxs27("span", { className: "text-gray-600", children: [
          t2("messages.deposit"),
          ": ",
          item.deposit || 0,
          " \u20AB"
        ] })
      ] })
    ] });
  }
  const imageUrl = displayProduct.images?.[0];
  return /* @__PURE__ */ jsxs27("div", { className: "p-4 bg-gray-50 rounded-lg border border-gray-100", children: [
    /* @__PURE__ */ jsxs27("div", { className: "flex items-start gap-4 mb-3", children: [
      /* @__PURE__ */ jsx41("div", { className: "flex-shrink-0", children: imageUrl ? /* @__PURE__ */ jsxs27("div", { className: "w-16 h-16 rounded-lg overflow-hidden border border-gray-200", children: [
        /* @__PURE__ */ jsx41(
          "img",
          {
            src: imageUrl,
            alt: displayProduct.name || t2("messages.product"),
            className: "w-full h-full object-cover",
            onError: (e2) => {
              e2.currentTarget.style.display = "none";
              e2.currentTarget.nextElementSibling?.classList.remove("hidden");
            }
          }
        ),
        /* @__PURE__ */ jsx41("div", { className: "hidden w-full h-16 bg-gray-100 flex items-center justify-center", children: /* @__PURE__ */ jsx41(Package3, { className: "w-8 h-8 text-gray-400" }) })
      ] }) : /* @__PURE__ */ jsx41("div", { className: "w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200", children: /* @__PURE__ */ jsx41(Package3, { className: "w-8 h-8 text-gray-400" }) }) }),
      /* @__PURE__ */ jsx41("div", { className: "flex-1 min-w-0", children: /* @__PURE__ */ jsxs27("div", { className: "flex items-start justify-between", children: [
        /* @__PURE__ */ jsxs27("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsx41("div", { className: "font-medium text-gray-900", children: displayProduct.name || t2("messages.unknownProduct") }),
          /* @__PURE__ */ jsx41("div", { className: "text-sm text-gray-500", children: displayProduct.barcode || t2("messages.noBarcode") }),
          orderType === "RENT" && /* @__PURE__ */ jsxs27("div", { className: "mt-2", children: [
            product && /* @__PURE__ */ jsx41(
              ProductAvailabilityAsyncDisplay2,
              {
                product,
                pickupDate,
                returnDate,
                requestedQuantity: item.quantity || 1,
                getProductAvailabilityStatus
              }
            ),
            !pickupDate || !returnDate ? /* @__PURE__ */ jsx41("div", { className: "text-xs text-gray-500 mt-1", children: "Select rental dates to check availability" }) : null
          ] })
        ] }),
        /* @__PURE__ */ jsx41(
          Button4,
          {
            type: "button",
            variant: "ghost",
            size: "sm",
            onClick: () => onRemove(item.productId),
            className: "shrink-0 h-8 w-8 p-0 text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors duration-150",
            title: "Remove product",
            children: /* @__PURE__ */ jsx41(Trash22, { className: "w-4 h-4" })
          }
        )
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs27("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-3", children: [
      /* @__PURE__ */ jsxs27("div", { children: [
        /* @__PURE__ */ jsx41("label", { className: "block text-xs font-medium text-gray-700 mb-1", children: "Quantity" }),
        /* @__PURE__ */ jsx41(
          NumberInput,
          {
            value: item.quantity,
            onChange: (value) => onUpdate(item.productId, "quantity", value),
            min: 1,
            decimals: 0,
            className: "h-8 text-sm"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs27("div", { children: [
        /* @__PURE__ */ jsx41("label", { className: "block text-xs font-medium text-gray-700 mb-1", children: "Unit Price" }),
        /* @__PURE__ */ jsx41(
          NumberInput,
          {
            value: item.unitPrice,
            onChange: (value) => onUpdate(item.productId, "unitPrice", value),
            min: 0,
            step: 0.01,
            decimals: 0,
            className: "h-8 text-sm"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs27("div", { children: [
        /* @__PURE__ */ jsx41("label", { className: "block text-xs font-medium text-gray-700 mb-1", children: "Deposit" }),
        /* @__PURE__ */ jsx41(
          NumberInput,
          {
            value: item.deposit || 0,
            onChange: (value) => onUpdate(item.productId, "deposit", value),
            min: 0,
            step: 0.01,
            decimals: 0,
            className: "h-8 text-sm"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs27("div", { className: "mt-3", children: [
      /* @__PURE__ */ jsx41("label", { className: "block text-xs font-medium text-gray-700 mb-1", children: "Notes" }),
      /* @__PURE__ */ jsx41(
        Input3,
        {
          value: item.notes,
          onChange: (e2) => onUpdate(item.productId, "notes", e2.target.value),
          placeholder: "Add notes for this item...",
          className: "h-8 text-sm"
        }
      )
    ] }),
    /* @__PURE__ */ jsxs27("div", { className: "flex items-center justify-between mt-3 pt-3 border-t border-gray-200", children: [
      /* @__PURE__ */ jsxs27("div", { className: "text-sm text-gray-600", children: [
        "Total: ",
        item.quantity,
        " \xD7 ",
        formatMoney(item.unitPrice),
        " = ",
        formatMoney(item.quantity * item.unitPrice)
      ] }),
      /* @__PURE__ */ jsxs27("div", { className: "text-sm text-gray-600", children: [
        t2("messages.deposit"),
        ": ",
        formatMoney(item.deposit)
      ] })
    ] })
  ] });
};

// src/components/forms/CreateOrderForm/components/OrderInfoSection.tsx
import React29, { useState as useState16 } from "react";
import {
  Card as Card4,
  CardHeader as CardHeader4,
  CardTitle as CardTitle4,
  CardContent as CardContent4,
  Input as Input4,
  Select as Select3,
  SelectContent as SelectContent3,
  SelectItem as SelectItem3,
  SelectTrigger as SelectTrigger3,
  SelectValue as SelectValue3,
  DateRangePicker as DateRangePicker2,
  RentalPeriodSelector,
  Textarea as Textarea3,
  Skeleton as Skeleton3,
  Button as Button5
} from "@rentalshop/ui";
import { useOrderTranslations as useOrderTranslations2 } from "@rentalshop/hooks";
import {
  Search as Search2,
  X as X4,
  Plus as Plus2
} from "lucide-react";
import { Fragment as Fragment5, jsx as jsx42, jsxs as jsxs28 } from "react/jsx-runtime";
var NumberInput2 = ({
  value,
  onChange,
  min = 0,
  max,
  step = 1,
  className = "",
  placeholder = "",
  decimals = 0
}) => {
  const [displayValue, setDisplayValue] = React29.useState("");
  const [isFocused, setIsFocused] = React29.useState(false);
  React29.useEffect(() => {
    if (!isFocused) {
      if (value === 0 || value === null || value === void 0) {
        setDisplayValue("");
      } else {
        const formatted = new Intl.NumberFormat("en-US", {
          minimumFractionDigits: decimals,
          maximumFractionDigits: decimals
        }).format(value);
        setDisplayValue(formatted);
      }
    }
  }, [value, isFocused, decimals]);
  const handleFocus = () => {
    setIsFocused(true);
    setDisplayValue(value ? value.toString() : "");
  };
  const handleBlur = () => {
    setIsFocused(false);
    const numValue = parseFloat(displayValue.replace(/,/g, "")) || 0;
    const bounded = max !== void 0 ? Math.min(max, numValue) : numValue;
    const final = Math.max(min, bounded);
    onChange(final);
  };
  const handleChange = (e2) => {
    const input = e2.target.value;
    if (input === "" || /^[\d\.]*$/.test(input)) {
      setDisplayValue(input);
    }
  };
  return /* @__PURE__ */ jsx42(
    Input4,
    {
      type: "text",
      value: displayValue,
      onChange: handleChange,
      onFocus: handleFocus,
      onBlur: handleBlur,
      className,
      placeholder
    }
  );
};
var OrderInfoSection = ({
  formData,
  outlets,
  selectedCustomer,
  searchQuery,
  customerSearchResults,
  isLoadingCustomers,
  isEditMode,
  merchantData,
  onFormDataChange,
  onCustomerSelect,
  onCustomerClear,
  onSearchQueryChange,
  onCustomerSearch,
  onShowAddCustomerDialog,
  onUpdateRentalDates
}) => {
  const t2 = useOrderTranslations2();
  const [showManualCustomerInput, setShowManualCustomerInput] = useState16(false);
  return /* @__PURE__ */ jsxs28(Card4, { children: [
    /* @__PURE__ */ jsx42(CardHeader4, { className: "pb-3", children: /* @__PURE__ */ jsx42(CardTitle4, { className: "text-base flex items-center gap-2", children: t2("detail.orderInformation") }) }),
    /* @__PURE__ */ jsxs28(CardContent4, { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs28("div", { className: "space-y-2 w-full", children: [
        /* @__PURE__ */ jsxs28("label", { className: "text-sm font-medium text-text-primary", children: [
          t2("messages.orderType"),
          isEditMode && /* @__PURE__ */ jsxs28("span", { className: "ml-2 text-xs text-gray-500 font-normal", children: [
            "(",
            t2("messages.cannotChangeWhenEditing"),
            ")"
          ] })
        ] }),
        /* @__PURE__ */ jsxs28("div", { className: "grid grid-cols-2 gap-2", children: [
          /* @__PURE__ */ jsx42(
            Button5,
            {
              type: "button",
              variant: formData.orderType === "RENT" ? "default" : "outline",
              disabled: isEditMode,
              onClick: () => {
                if (!isEditMode) {
                  onFormDataChange("orderType", "RENT");
                }
              },
              className: `h-10 px-4 py-2 ${isEditMode ? "opacity-50 cursor-not-allowed" : ""}`,
              children: t2("orderType.RENT")
            }
          ),
          /* @__PURE__ */ jsx42(
            Button5,
            {
              type: "button",
              variant: formData.orderType === "SALE" ? "default" : "outline",
              disabled: isEditMode,
              onClick: () => {
                if (!isEditMode) {
                  onFormDataChange("orderType", "SALE");
                  onFormDataChange("pickupPlanAt", "");
                  onFormDataChange("returnPlanAt", "");
                  onFormDataChange("depositAmount", 0);
                }
              },
              className: `h-10 px-4 py-2 ${isEditMode ? "opacity-50 cursor-not-allowed" : ""}`,
              children: t2("orderType.SALE")
            }
          )
        ] })
      ] }),
      formData.orderType === "RENT" && /* @__PURE__ */ jsxs28("div", { className: "space-y-2 w-full", children: [
        console.log("\u{1F50D} OrderInfoSection - Rental Period Check:", {
          orderType: formData.orderType,
          hasMerchantData: !!merchantData,
          pricingType: merchantData?.pricingType,
          businessType: merchantData?.businessType
        }),
        merchantData ? /* @__PURE__ */ jsx42(
          RentalPeriodSelector,
          {
            product: {
              id: 0,
              // Placeholder - will be updated when product is selected
              name: t2("messages.rentalPeriod"),
              rentPrice: 0,
              // Will be calculated based on merchant pricing
              deposit: 0
            },
            merchant: merchantData,
            initialStartDate: formData.pickupPlanAt,
            initialEndDate: formData.returnPlanAt,
            onPeriodChange: (startAt, endAt) => {
              const startDate = startAt.toISOString().split("T")[0];
              const endDate = endAt.toISOString().split("T")[0];
              onFormDataChange("pickupPlanAt", startDate);
              onFormDataChange("returnPlanAt", endDate);
              onUpdateRentalDates(startDate, endDate);
            },
            onPriceChange: (pricing) => {
              console.log("Pricing updated:", pricing);
            }
          }
        ) : (
          // Fallback to basic DateRangePicker if no merchant data
          /* @__PURE__ */ jsxs28("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxs28("label", { className: "text-sm font-medium text-text-primary", children: [
              t2("messages.rentalPeriod"),
              " ",
              /* @__PURE__ */ jsx42("span", { className: "text-red-500", children: "*" })
            ] }),
            /* @__PURE__ */ jsx42(
              DateRangePicker2,
              {
                value: {
                  from: formData.pickupPlanAt ? new Date(formData.pickupPlanAt) : void 0,
                  to: formData.returnPlanAt ? new Date(formData.returnPlanAt) : void 0
                },
                onChange: (range) => {
                  const startDate = range.from ? range.from.toISOString().split("T")[0] : "";
                  const endDate = range.to ? range.to.toISOString().split("T")[0] : "";
                  onFormDataChange("pickupPlanAt", startDate);
                  onFormDataChange("returnPlanAt", endDate);
                  if (startDate && endDate) {
                    onUpdateRentalDates(startDate, endDate);
                  }
                },
                placeholder: t2("messages.selectRentalPeriod"),
                minDate: /* @__PURE__ */ new Date(),
                showPresets: false,
                format: "long"
              }
            )
          ] })
        )
      ] }),
      /* @__PURE__ */ jsxs28("div", { className: "space-y-2 w-full", children: [
        /* @__PURE__ */ jsxs28("label", { className: "text-sm font-medium text-text-primary", children: [
          t2("messages.outlet"),
          " ",
          /* @__PURE__ */ jsx42("span", { className: "text-red-500", children: "*" })
        ] }),
        /* @__PURE__ */ jsxs28(
          Select3,
          {
            value: formData.outletId ? String(formData.outletId) : void 0,
            onValueChange: (value) => {
              console.log("\u{1F50D} Outlet selection changed:", {
                previousValue: formData.outletId,
                newValue: value,
                convertedValue: value ? parseInt(value, 10) : void 0,
                outlets
              });
              const outletId = value ? parseInt(value, 10) : void 0;
              onFormDataChange("outletId", outletId);
            },
            children: [
              /* @__PURE__ */ jsx42(SelectTrigger3, { variant: "filled", className: "w-full", children: /* @__PURE__ */ jsx42(SelectValue3, { placeholder: "Select outlet..." }) }),
              /* @__PURE__ */ jsx42(SelectContent3, { children: outlets.map((outlet) => /* @__PURE__ */ jsx42(SelectItem3, { value: String(outlet.id), children: outlet.name }, outlet.id)) })
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs28("div", { className: "space-y-2 w-full", children: [
        /* @__PURE__ */ jsxs28("label", { className: "text-sm font-medium text-text-primary", children: [
          t2("messages.customer"),
          " ",
          /* @__PURE__ */ jsx42("span", { className: "text-red-500", children: "*" })
        ] }),
        /* @__PURE__ */ jsxs28("div", { className: "relative", children: [
          /* @__PURE__ */ jsxs28("div", { className: "relative", children: [
            /* @__PURE__ */ jsx42(
              "input",
              {
                type: "text",
                placeholder: t2("messages.searchCustomers"),
                value: selectedCustomer ? `${selectedCustomer.firstName} ${selectedCustomer.lastName} - ${selectedCustomer.phone}` : searchQuery,
                onFocus: () => {
                  if (searchQuery.trim()) {
                    onCustomerSearch(searchQuery);
                  }
                },
                onChange: (e2) => {
                  const query = e2.target.value;
                  if (selectedCustomer && query !== `${selectedCustomer.firstName} ${selectedCustomer.lastName} - ${selectedCustomer.phone}`) {
                    onCustomerClear();
                  }
                  onSearchQueryChange(query);
                  if (query.trim()) {
                    onCustomerSearch(query);
                  }
                },
                className: `h-11 w-full rounded-lg border pl-4 pr-12 text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-0 ${selectedCustomer ? "border-green-500 bg-green-50 text-green-900 font-medium" : "border-gray-300 bg-white text-gray-900 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-100"}`
              }
            ),
            selectedCustomer ? /* @__PURE__ */ jsx42(
              Button5,
              {
                variant: "ghost",
                size: "icon",
                type: "button",
                onClick: onCustomerClear,
                className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-red-500 hover:text-red-700 transition-colors duration-150 h-6 w-6 p-0",
                title: t2("messages.clearSelectedCustomer"),
                children: /* @__PURE__ */ jsx42(X4, { className: "w-4 h-4" })
              }
            ) : /* @__PURE__ */ jsx42(
              Button5,
              {
                variant: "ghost",
                size: "icon",
                type: "button",
                onClick: () => {
                  if (searchQuery.trim()) {
                    onCustomerSearch(searchQuery);
                  }
                },
                className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-150 h-6 w-6 p-0",
                children: /* @__PURE__ */ jsx42(Search2, { className: "w-4 h-4" })
              }
            ),
            !selectedCustomer && (customerSearchResults.length > 0 || searchQuery.trim()) && /* @__PURE__ */ jsxs28("div", { className: "absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto", children: [
              /* @__PURE__ */ jsxs28(
                Button5,
                {
                  variant: "ghost",
                  type: "button",
                  onClick: onShowAddCustomerDialog,
                  className: "w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-200 bg-blue-50/50 text-blue-700 font-medium h-auto justify-start rounded-none",
                  children: [
                    /* @__PURE__ */ jsxs28("div", { className: "flex items-center gap-2", children: [
                      /* @__PURE__ */ jsx42(Plus2, { className: "w-4 h-4" }),
                      /* @__PURE__ */ jsx42("span", { children: t2("messages.addNewCustomer") })
                    ] }),
                    searchQuery.trim() && /* @__PURE__ */ jsxs28("div", { className: "text-xs text-blue-600 mt-1", children: [
                      'Create customer: "',
                      searchQuery,
                      '"'
                    ] })
                  ]
                }
              ),
              customerSearchResults.length > 0 ? /* @__PURE__ */ jsx42(Fragment5, { children: customerSearchResults.map((customer) => /* @__PURE__ */ jsxs28(
                Button5,
                {
                  variant: "ghost",
                  type: "button",
                  onClick: () => {
                    onCustomerSelect(customer);
                    onSearchQueryChange(`${customer.firstName} ${customer.lastName} - ${customer.phone}`);
                  },
                  className: "w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 h-auto justify-start rounded-none",
                  children: [
                    /* @__PURE__ */ jsxs28("div", { className: "font-medium text-gray-900", children: [
                      customer.firstName,
                      " ",
                      customer.lastName
                    ] }),
                    /* @__PURE__ */ jsx42("div", { className: "text-sm text-gray-600", children: customer.phone })
                  ]
                },
                customer.id
              )) }) : (
                /* No Results - Show Message */
                /* @__PURE__ */ jsxs28("div", { className: "p-4 text-center", children: [
                  /* @__PURE__ */ jsxs28("div", { className: "text-sm text-gray-500", children: [
                    'No customers found for "',
                    searchQuery,
                    '"'
                  ] }),
                  /* @__PURE__ */ jsx42("div", { className: "text-xs text-gray-400 mt-1", children: t2("messages.useAddNewCustomerButton") })
                ] })
              )
            ] })
          ] }),
          isLoadingCustomers && /* @__PURE__ */ jsx42("div", { className: "absolute right-3 top-1/2 transform -translate-y-1/2", children: /* @__PURE__ */ jsx42(Skeleton3, { className: "w-4 h-4 rounded-full" }) })
        ] })
      ] }),
      formData.orderType === "RENT" && /* @__PURE__ */ jsxs28("div", { className: "space-y-2 w-full", children: [
        /* @__PURE__ */ jsx42("label", { className: "text-sm font-medium text-text-primary", children: t2("messages.deposit") }),
        /* @__PURE__ */ jsx42(
          NumberInput2,
          {
            value: formData.depositAmount || 0,
            onChange: (value) => onFormDataChange("depositAmount", value),
            min: 0,
            decimals: 0,
            placeholder: "Enter deposit amount...",
            className: "w-full"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs28("div", { className: "space-y-2 w-full", children: [
        /* @__PURE__ */ jsx42("label", { className: "text-sm font-medium text-text-primary", children: t2("messages.discount") }),
        /* @__PURE__ */ jsxs28("div", { className: "grid grid-cols-3 gap-2", children: [
          /* @__PURE__ */ jsx42("div", { className: "col-span-2", children: /* @__PURE__ */ jsx42(
            NumberInput2,
            {
              value: formData.discountValue || 0,
              onChange: (value) => onFormDataChange("discountValue", value),
              min: 0,
              decimals: 0,
              placeholder: t2("messages.discountAmount"),
              className: "w-full"
            }
          ) }),
          /* @__PURE__ */ jsxs28(
            Select3,
            {
              value: formData.discountType,
              onValueChange: (value) => {
                onFormDataChange("discountType", value);
              },
              children: [
                /* @__PURE__ */ jsx42(SelectTrigger3, { variant: "filled", className: "w-full", children: /* @__PURE__ */ jsx42(SelectValue3, {}) }),
                /* @__PURE__ */ jsxs28(SelectContent3, { children: [
                  /* @__PURE__ */ jsx42(SelectItem3, { value: "amount", children: t2("messages.amount") }),
                  /* @__PURE__ */ jsx42(SelectItem3, { value: "percentage", children: t2("messages.percentage") })
                ] })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs28("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx42("label", { className: "text-sm font-medium text-text-primary", children: t2("messages.orderNotes") }),
        /* @__PURE__ */ jsx42(
          Textarea3,
          {
            placeholder: t2("messages.enterOrderNotes"),
            value: formData.notes,
            onChange: (e2) => onFormDataChange("notes", e2.target.value),
            rows: 3
          }
        )
      ] })
    ] })
  ] });
};

// src/components/forms/CreateOrderForm/components/OrderSummarySection.tsx
import {
  Card as Card5,
  CardHeader as CardHeader5,
  CardTitle as CardTitle5,
  CardContent as CardContent5,
  Button as Button6,
  useFormatCurrency as useFormatCurrency3
} from "@rentalshop/ui";
import { useOrderTranslations as useOrderTranslations3 } from "@rentalshop/hooks";
import {
  CheckCircle as CheckCircle7,
  XCircle as XCircle5
} from "lucide-react";
import { jsx as jsx43, jsxs as jsxs29 } from "react/jsx-runtime";
var OrderSummarySection = ({
  formData,
  orderItems,
  isEditMode,
  loading,
  isFormValid,
  onPreviewClick,
  onCancel
}) => {
  const formatMoney = useFormatCurrency3();
  const t2 = useOrderTranslations3();
  return /* @__PURE__ */ jsxs29(Card5, { children: [
    /* @__PURE__ */ jsx43(CardHeader5, { className: "pb-3", children: /* @__PURE__ */ jsxs29(CardTitle5, { className: "text-base flex items-center gap-2", children: [
      t2("detail.orderSummary"),
      " & ",
      t2("detail.orderActions")
    ] }) }),
    /* @__PURE__ */ jsxs29(CardContent5, { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs29("div", { className: "space-y-3 p-4 border border-border rounded-lg bg-bg-primary", children: [
        /* @__PURE__ */ jsx43("h4", { className: "text-sm font-semibold text-text-primary", children: t2("detail.orderSummary") }),
        formData.orderType === "RENT" && formData.pickupPlanAt && formData.returnPlanAt && /* @__PURE__ */ jsxs29("div", { className: "pb-2 mb-2 border-b border-border", children: [
          /* @__PURE__ */ jsxs29("div", { className: "flex justify-between text-sm mb-1", children: [
            /* @__PURE__ */ jsxs29("span", { className: "text-text-secondary", children: [
              t2("summary.rentalDuration"),
              ":"
            ] }),
            /* @__PURE__ */ jsx43("span", { className: "font-medium", children: (() => {
              const start = new Date(formData.pickupPlanAt);
              const end = new Date(formData.returnPlanAt);
              const days = Math.ceil((end.getTime() - start.getTime()) / (1e3 * 60 * 60 * 24));
              return `${days} ${days === 1 ? "day" : "days"}`;
            })() })
          ] }),
          /* @__PURE__ */ jsxs29("div", { className: "flex justify-between text-xs text-text-tertiary", children: [
            /* @__PURE__ */ jsxs29("span", { children: [
              t2("summary.from"),
              ": ",
              new Date(formData.pickupPlanAt).toLocaleDateString("en-GB")
            ] }),
            /* @__PURE__ */ jsxs29("span", { children: [
              t2("summary.to"),
              ": ",
              new Date(formData.returnPlanAt).toLocaleDateString("en-GB")
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs29("div", { className: "flex justify-between text-sm", children: [
          /* @__PURE__ */ jsxs29("span", { className: "text-text-secondary", children: [
            t2("summary.subtotal"),
            ":"
          ] }),
          /* @__PURE__ */ jsx43("span", { className: "font-medium", children: formatMoney(formData.subtotal) })
        ] }),
        formData.discountAmount > 0 && /* @__PURE__ */ jsxs29("div", { className: "flex justify-between text-sm text-action-success", children: [
          /* @__PURE__ */ jsxs29("span", { children: [
            t2("summary.discount"),
            ":"
          ] }),
          /* @__PURE__ */ jsxs29("span", { className: "font-medium", children: [
            "-",
            formatMoney(formData.discountAmount)
          ] })
        ] }),
        formData.orderType === "RENT" && formData.depositAmount > 0 && /* @__PURE__ */ jsxs29("div", { className: "flex justify-between text-sm", children: [
          /* @__PURE__ */ jsxs29("span", { className: "text-text-secondary", children: [
            t2("summary.deposit"),
            ":"
          ] }),
          /* @__PURE__ */ jsx43("span", { className: "font-medium", children: formatMoney(formData.depositAmount) })
        ] }),
        /* @__PURE__ */ jsxs29("div", { className: "flex justify-between text-base font-bold text-action-primary pt-2 border-t border-border", children: [
          /* @__PURE__ */ jsxs29("span", { children: [
            t2("summary.grandTotal"),
            ":"
          ] }),
          /* @__PURE__ */ jsx43("span", { children: formatMoney(formData.totalAmount) })
        ] })
      ] }),
      /* @__PURE__ */ jsxs29("div", { className: "p-3 bg-gray-50 border border-gray-200 rounded-lg", children: [
        /* @__PURE__ */ jsxs29("h4", { className: "text-sm font-semibold text-gray-700 mb-2", children: [
          t2("summary.orderRequirements"),
          ":"
        ] }),
        /* @__PURE__ */ jsxs29("div", { className: "space-y-2 text-sm", children: [
          /* @__PURE__ */ jsxs29("div", { className: "flex items-center gap-2", children: [
            orderItems.length > 0 ? /* @__PURE__ */ jsx43(CheckCircle7, { className: "w-4 h-4 text-green-600" }) : /* @__PURE__ */ jsx43(XCircle5, { className: "w-4 h-4 text-red-500" }),
            /* @__PURE__ */ jsxs29("span", { className: orderItems.length > 0 ? "text-green-700" : "text-red-600", children: [
              orderItems.length > 0 ? "\u2713" : "\u2717",
              " ",
              t2("requirements.selectAtLeastOneProduct"),
              orderItems.length > 0 && ` (${orderItems.length} ${t2("requirements.selected")})`
            ] })
          ] }),
          /* @__PURE__ */ jsxs29("div", { className: "flex items-center gap-2", children: [
            formData.customerId && formData.customerId > 0 ? /* @__PURE__ */ jsx43(CheckCircle7, { className: "w-4 h-4 text-green-600" }) : /* @__PURE__ */ jsx43(XCircle5, { className: "w-4 h-4 text-red-500" }),
            /* @__PURE__ */ jsxs29("span", { className: formData.customerId && formData.customerId > 0 ? "text-green-700" : "text-red-600", children: [
              formData.customerId && formData.customerId > 0 ? "\u2713" : "\u2717",
              " ",
              t2("requirements.customerInformationRequired")
            ] })
          ] }),
          formData.orderType === "RENT" && /* @__PURE__ */ jsxs29("div", { className: "flex items-center gap-2", children: [
            formData.pickupPlanAt && formData.returnPlanAt ? /* @__PURE__ */ jsx43(CheckCircle7, { className: "w-4 h-4 text-green-600" }) : /* @__PURE__ */ jsx43(XCircle5, { className: "w-4 h-4 text-red-500" }),
            /* @__PURE__ */ jsxs29("span", { className: formData.pickupPlanAt && formData.returnPlanAt ? "text-green-700" : "text-red-600", children: [
              formData.pickupPlanAt && formData.returnPlanAt ? "\u2713" : "\u2717",
              " ",
              t2("requirements.rentalPeriodRequired")
            ] })
          ] }),
          /* @__PURE__ */ jsxs29("div", { className: "flex items-center gap-2", children: [
            formData.outletId && formData.outletId > 0 ? /* @__PURE__ */ jsx43(CheckCircle7, { className: "w-4 h-4 text-green-600" }) : /* @__PURE__ */ jsx43(XCircle5, { className: "w-4 h-4 text-red-500" }),
            /* @__PURE__ */ jsxs29("span", { className: formData.outletId && formData.outletId > 0 ? "text-green-700" : "text-red-600", children: [
              formData.outletId && formData.outletId > 0 ? "\u2713" : "\u2717",
              " ",
              t2("requirements.outletSelectionRequired")
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsx43("div", { className: "space-y-4 pt-2", children: /* @__PURE__ */ jsxs29("div", { className: "flex gap-3", children: [
        /* @__PURE__ */ jsx43(
          Button6,
          {
            type: "button",
            disabled: loading || !isFormValid,
            onClick: onPreviewClick,
            className: "flex-1",
            children: loading ? t2("messages.processing") : isEditMode ? t2("messages.updateOrder") : t2("messages.preview")
          }
        ),
        onCancel && /* @__PURE__ */ jsx43(
          Button6,
          {
            type: "button",
            variant: "outline",
            onClick: onCancel,
            className: "flex-1",
            children: isEditMode ? t2("messages.cancel") : t2("messages.resetSelection")
          }
        )
      ] }) })
    ] })
  ] });
};

// src/components/forms/CreateOrderForm/components/CustomerCreationDialog.tsx
import { useState as useState18 } from "react";
import {
  Dialog as Dialog2,
  DialogContent as DialogContent2,
  DialogHeader as DialogHeader2,
  DialogTitle as DialogTitle2
} from "@rentalshop/ui";

// src/components/features/Customers/components/AddCustomerForm.tsx
import { useState as useState17 } from "react";
import { Save, X as X5 } from "lucide-react";
import {
  useCustomerTranslations,
  useCommonTranslations as useCommonTranslations3
} from "@rentalshop/hooks";
import { jsx as jsx44, jsxs as jsxs30 } from "react/jsx-runtime";
var AddCustomerForm = ({
  onSave,
  onCancel,
  isSubmitting: externalIsSubmitting
}) => {
  const t2 = useCustomerTranslations();
  const tc = useCommonTranslations3();
  const [formData, setFormData] = useState17({
    firstName: "",
    lastName: "",
    email: "",
    phone: "",
    companyName: "",
    address: "",
    city: "",
    state: "",
    zipCode: "",
    country: ""
    // Hidden in UI but sent to API
  });
  const [errors, setErrors] = useState17({});
  const [internalIsSubmitting, setInternalIsSubmitting] = useState17(false);
  const [errorMessage, setErrorMessage] = useState17(null);
  const isSubmitting = externalIsSubmitting !== void 0 ? externalIsSubmitting : internalIsSubmitting;
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }));
    }
    if (errorMessage) {
      setErrorMessage(null);
    }
  };
  const validateForm = () => {
    const newErrors = {};
    if (!formData.firstName.trim()) {
      newErrors.firstName = t2("validation.firstNameRequired");
    } else if (formData.firstName.trim().length < 2) {
      newErrors.firstName = t2("validation.firstNameMinLength");
    }
    if (!formData.lastName.trim()) {
      newErrors.lastName = t2("validation.lastNameRequired");
    } else if (formData.lastName.trim().length < 2) {
      newErrors.lastName = t2("validation.lastNameMinLength");
    }
    if (formData.email && formData.email.trim()) {
      if (!/\S+@\S+\.\S+/.test(formData.email.trim())) {
        newErrors.email = t2("validation.emailInvalid");
      }
    }
    if (!formData.phone.trim()) {
      newErrors.phone = t2("validation.phoneRequired");
    } else if (!/^[0-9+\-\s()]+$/.test(formData.phone.trim())) {
      newErrors.phone = t2("validation.phoneInvalid");
    } else if (formData.phone.trim().length < 8) {
      newErrors.phone = t2("validation.phoneMinLength");
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    try {
      setInternalIsSubmitting(true);
      setErrorMessage(null);
      await onSave(formData);
    } catch (error2) {
      let errorMsg = "An unexpected error occurred";
      if (error2 instanceof Error) {
        if (error2.message.includes("DUPLICATE_PHONE")) {
          errorMsg = "A customer with this phone number already exists";
        } else if (error2.message.includes("DUPLICATE_EMAIL")) {
          errorMsg = "A customer with this email address already exists";
        } else {
          errorMsg = error2.message;
        }
      }
      setErrorMessage(errorMsg);
    } finally {
      setInternalIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (onCancel) {
      onCancel();
    }
  };
  return /* @__PURE__ */ jsx44("form", { onSubmit: handleSubmit, children: /* @__PURE__ */ jsx44(Card, { children: /* @__PURE__ */ jsxs30(CardContent, { className: "p-6 space-y-4", children: [
    errorMessage && /* @__PURE__ */ jsx44("div", { className: "p-4 bg-red-50 border border-red-200 rounded-lg", children: /* @__PURE__ */ jsx44("p", { className: "text-sm text-red-800", children: errorMessage }) }),
    /* @__PURE__ */ jsxs30("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
      /* @__PURE__ */ jsxs30("div", { children: [
        /* @__PURE__ */ jsxs30(Label2, { htmlFor: "firstName", children: [
          t2("fields.firstName"),
          " *"
        ] }),
        /* @__PURE__ */ jsx44(
          Input,
          {
            id: "firstName",
            type: "text",
            value: formData.firstName,
            onChange: (e2) => handleInputChange("firstName", e2.target.value),
            placeholder: t2("placeholders.enterFirstName"),
            className: errors.firstName ? "border-red-500" : ""
          }
        ),
        errors.firstName && /* @__PURE__ */ jsx44("p", { className: "text-sm text-red-600", children: errors.firstName })
      ] }),
      /* @__PURE__ */ jsxs30("div", { children: [
        /* @__PURE__ */ jsxs30(Label2, { htmlFor: "lastName", children: [
          t2("fields.lastName"),
          " *"
        ] }),
        /* @__PURE__ */ jsx44(
          Input,
          {
            id: "lastName",
            type: "text",
            value: formData.lastName,
            onChange: (e2) => handleInputChange("lastName", e2.target.value),
            placeholder: t2("placeholders.enterLastName"),
            className: errors.lastName ? "border-red-500" : ""
          }
        ),
        errors.lastName && /* @__PURE__ */ jsx44("p", { className: "text-sm text-red-600", children: errors.lastName })
      ] })
    ] }),
    /* @__PURE__ */ jsxs30("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
      /* @__PURE__ */ jsxs30("div", { children: [
        /* @__PURE__ */ jsx44(Label2, { htmlFor: "email", children: t2("fields.email") }),
        /* @__PURE__ */ jsx44(
          Input,
          {
            id: "email",
            type: "email",
            value: formData.email,
            onChange: (e2) => handleInputChange("email", e2.target.value),
            placeholder: t2("placeholders.enterEmail"),
            className: errors.email ? "border-red-500" : ""
          }
        ),
        errors.email && /* @__PURE__ */ jsx44("p", { className: "text-sm text-red-600", children: errors.email })
      ] }),
      /* @__PURE__ */ jsxs30("div", { children: [
        /* @__PURE__ */ jsxs30(Label2, { htmlFor: "phone", children: [
          t2("fields.phone"),
          " *"
        ] }),
        /* @__PURE__ */ jsx44(
          Input,
          {
            id: "phone",
            type: "tel",
            value: formData.phone,
            onChange: (e2) => handleInputChange("phone", e2.target.value),
            placeholder: t2("placeholders.enterPhone"),
            className: errors.phone ? "border-red-500" : "",
            required: true
          }
        ),
        errors.phone && /* @__PURE__ */ jsx44("p", { className: "text-sm text-red-600", children: errors.phone })
      ] })
    ] }),
    /* @__PURE__ */ jsxs30("div", { children: [
      /* @__PURE__ */ jsx44(Label2, { htmlFor: "companyName", children: t2("fields.companyName") }),
      /* @__PURE__ */ jsx44(
        Input,
        {
          id: "companyName",
          type: "text",
          value: formData.companyName,
          onChange: (e2) => handleInputChange("companyName", e2.target.value),
          placeholder: t2("placeholders.enterCompanyName")
        }
      )
    ] }),
    /* @__PURE__ */ jsxs30("div", { children: [
      /* @__PURE__ */ jsx44(Label2, { htmlFor: "address", children: t2("fields.address") }),
      /* @__PURE__ */ jsx44(
        Input,
        {
          id: "address",
          type: "text",
          value: formData.address,
          onChange: (e2) => handleInputChange("address", e2.target.value),
          placeholder: t2("placeholders.enterStreetAddress")
        }
      )
    ] }),
    /* @__PURE__ */ jsxs30("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
      /* @__PURE__ */ jsxs30("div", { children: [
        /* @__PURE__ */ jsx44(Label2, { htmlFor: "city", children: t2("fields.city") }),
        /* @__PURE__ */ jsx44(
          Input,
          {
            id: "city",
            type: "text",
            value: formData.city,
            onChange: (e2) => handleInputChange("city", e2.target.value),
            placeholder: t2("placeholders.enterCity")
          }
        )
      ] }),
      /* @__PURE__ */ jsxs30("div", { children: [
        /* @__PURE__ */ jsx44(Label2, { htmlFor: "state", children: t2("fields.state") }),
        /* @__PURE__ */ jsx44(
          Input,
          {
            id: "state",
            type: "text",
            value: formData.state,
            onChange: (e2) => handleInputChange("state", e2.target.value),
            placeholder: t2("placeholders.enterState")
          }
        )
      ] }),
      /* @__PURE__ */ jsxs30("div", { children: [
        /* @__PURE__ */ jsx44(Label2, { htmlFor: "zipCode", children: t2("fields.zipCode") }),
        /* @__PURE__ */ jsx44(
          Input,
          {
            id: "zipCode",
            type: "text",
            value: formData.zipCode,
            onChange: (e2) => handleInputChange("zipCode", e2.target.value),
            placeholder: t2("placeholders.enterZipCode")
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs30("div", { className: "flex justify-end space-x-3 border-t pt-4", children: [
      /* @__PURE__ */ jsxs30(
        Button2,
        {
          type: "button",
          variant: "outline",
          onClick: handleCancel,
          disabled: isSubmitting,
          children: [
            /* @__PURE__ */ jsx44(X5, { className: "w-4 h-4 mr-2" }),
            tc("buttons.cancel")
          ]
        }
      ),
      /* @__PURE__ */ jsxs30(Button2, { type: "submit", disabled: isSubmitting, children: [
        /* @__PURE__ */ jsx44(Save, { className: "w-4 h-4 mr-2" }),
        isSubmitting ? tc("buttons.creating") : t2("createCustomer")
      ] })
    ] })
  ] }) }) });
};

// src/components/forms/CreateOrderForm/components/CustomerCreationDialog.tsx
import { jsx as jsx45, jsxs as jsxs31 } from "react/jsx-runtime";
var CustomerCreationDialog = ({
  open,
  onOpenChange,
  onCustomerCreated,
  merchantId
}) => {
  const [isCreatingCustomer, setIsCreatingCustomer] = useState18(false);
  return /* @__PURE__ */ jsx45(Dialog2, { open, onOpenChange, children: /* @__PURE__ */ jsxs31(DialogContent2, { className: "max-w-5xl max-h-[95vh] overflow-y-auto p-0", children: [
    /* @__PURE__ */ jsx45(DialogHeader2, { className: "px-6 py-4 border-b border-gray-200", children: /* @__PURE__ */ jsx45(DialogTitle2, { className: "text-xl font-semibold text-gray-900", children: "Add New Customer" }) }),
    /* @__PURE__ */ jsx45("div", { className: "p-6", children: /* @__PURE__ */ jsx45(
      AddCustomerForm,
      {
        onSave: async (customerData) => {
          try {
            console.log("\u{1F50D} CustomerCreationDialog: Starting customer creation...");
            setIsCreatingCustomer(true);
            if (!merchantId) {
              throw new Error("Merchant ID is required to create a customer. Please ensure the form has access to merchant information.");
            }
            console.log("\u{1F50D} CustomerCreationDialog: Calling onCustomerCreated...");
            await onCustomerCreated(customerData);
            console.log("\u{1F50D} CustomerCreationDialog: Customer created successfully, closing dialog...");
            onOpenChange(false);
          } catch (error2) {
            console.error("\u274C CustomerCreationDialog: Error occurred:", error2);
            setIsCreatingCustomer(false);
            throw error2;
          } finally {
            console.log("\u{1F50D} CustomerCreationDialog: Finally block executed");
            setIsCreatingCustomer(false);
          }
        },
        onCancel: () => {
          onOpenChange(false);
        },
        isSubmitting: isCreatingCustomer
      }
    ) })
  ] }) });
};

// src/components/forms/CreateOrderForm/components/OrderPreviewDialog.tsx
import {
  Dialog as Dialog3,
  DialogContent as DialogContent3,
  DialogHeader as DialogHeader3,
  DialogTitle as DialogTitle3
} from "@rentalshop/ui";

// src/components/forms/CreateOrderForm/components/OrderPreviewForm.tsx
import {
  Card as Card6,
  CardHeader as CardHeader6,
  CardTitle as CardTitle6,
  CardContent as CardContent6,
  Badge as Badge3,
  Separator as Separator3,
  Table as Table2,
  TableHeader as TableHeader2,
  TableBody as TableBody2,
  TableHead as TableHead2,
  TableRow as TableRow2,
  TableCell as TableCell2,
  Button as Button7
} from "@rentalshop/ui";
import { formatCurrency as formatCurrency4 } from "@rentalshop/utils";
import { useOrderTranslations as useOrderTranslations4 } from "@rentalshop/hooks";
import {
  ShoppingCart,
  Info as Info5,
  Package as Package4,
  DollarSign as DollarSign2,
  MessageSquare,
  Calendar as Calendar2,
  Clock,
  User as User2,
  Smartphone,
  AlertTriangle as AlertTriangle6,
  CheckCircle as CheckCircle8,
  X as X6,
  ArrowLeft
} from "lucide-react";
import { Fragment as Fragment6, jsx as jsx46, jsxs as jsxs32 } from "react/jsx-runtime";
var OrderPreviewForm = ({
  orderData,
  products,
  onConfirm,
  onEdit,
  onCancel,
  loading = false,
  confirmText = "Confirm Order",
  editText = "Edit Order",
  cancelText = "Cancel",
  showValidation = true,
  title = "Order Preview",
  subtitle = "Review your order details before confirming",
  className = ""
}) => {
  const t2 = useOrderTranslations4();
  const getRentalDuration = () => {
    if (orderData.orderType === "RENT" && orderData.pickupPlanAt && orderData.returnPlanAt) {
      const start = new Date(orderData.pickupPlanAt);
      const end = new Date(orderData.returnPlanAt);
      const durationMs = end.getTime() - start.getTime();
      return Math.ceil(durationMs / (1e3 * 60 * 60 * 24));
    }
    return 0;
  };
  const getValidationWarnings = () => {
    if (!showValidation)
      return [];
    const warnings2 = [];
    if (!orderData.customerId && !orderData.customerName) {
      warnings2.push(t2("messages.customerInformationMissing"));
    }
    if (orderData.orderItems.length === 0) {
      warnings2.push(t2("messages.noOrderItemsAdded"));
    }
    if (orderData.orderType === "RENT" && (!orderData.pickupPlanAt || !orderData.returnPlanAt)) {
      warnings2.push(t2("messages.rentalDatesNotSet"));
    }
    if (orderData.totalAmount <= 0) {
      warnings2.push(t2("messages.orderTotalAmountInvalid"));
    }
    return warnings2;
  };
  const warnings = getValidationWarnings();
  const rentalDuration = getRentalDuration();
  return /* @__PURE__ */ jsxs32("div", { className: `space-y-6 ${className}`, children: [
    /* @__PURE__ */ jsxs32("div", { className: "text-center space-y-2", children: [
      /* @__PURE__ */ jsxs32("h2", { className: "text-2xl font-bold text-gray-900 flex items-center justify-center gap-2", children: [
        /* @__PURE__ */ jsx46(ShoppingCart, { className: "w-6 h-6 text-blue-600" }),
        title
      ] }),
      subtitle && /* @__PURE__ */ jsx46("p", { className: "text-gray-600", children: subtitle })
    ] }),
    /* @__PURE__ */ jsxs32(Card6, { children: [
      /* @__PURE__ */ jsx46(CardHeader6, { children: /* @__PURE__ */ jsxs32(CardTitle6, { className: "text-lg font-semibold flex items-center gap-2", children: [
        /* @__PURE__ */ jsx46(Info5, { className: "w-5 h-5 text-blue-600" }),
        "Order Summary"
      ] }) }),
      /* @__PURE__ */ jsx46(CardContent6, { children: /* @__PURE__ */ jsxs32("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
        /* @__PURE__ */ jsxs32("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx46(Badge3, { variant: orderData.orderType === "RENT" ? "default" : "secondary", children: orderData.orderType }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm text-gray-600", children: "Order Type" })
          ] }),
          orderData.outletName && /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx46(Package4, { className: "w-4 h-4 text-gray-500" }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium", children: "Outlet:" }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm text-gray-600", children: orderData.outletName })
          ] }),
          orderData.orderType === "RENT" && /* @__PURE__ */ jsxs32(Fragment6, { children: [
            /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx46(Calendar2, { className: "w-4 h-4 text-gray-500" }),
              /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium", children: "Pickup:" }),
              /* @__PURE__ */ jsx46("span", { className: "text-sm text-gray-600", children: orderData.pickupPlanAt ? new Date(orderData.pickupPlanAt).toLocaleDateString() : t2("messages.notSet") })
            ] }),
            /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx46(Calendar2, { className: "w-4 h-4 text-gray-500" }),
              /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium", children: "Return:" }),
              /* @__PURE__ */ jsx46("span", { className: "text-sm text-gray-600", children: orderData.returnPlanAt ? new Date(orderData.returnPlanAt).toLocaleDateString() : t2("messages.notSet") })
            ] }),
            rentalDuration > 0 && /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx46(Clock, { className: "w-4 h-4 text-gray-500" }),
              /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium", children: "Duration:" }),
              /* @__PURE__ */ jsxs32("span", { className: "text-sm text-gray-600", children: [
                rentalDuration,
                " days"
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs32("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx46(User2, { className: "w-4 h-4 text-gray-500" }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium", children: "Customer:" }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm text-gray-600", children: orderData.customerName || t2("messages.notSelected") })
          ] }),
          orderData.customerPhone && /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx46(Smartphone, { className: "w-4 h-4 text-gray-500" }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium", children: "Phone:" }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm text-gray-600", children: orderData.customerPhone })
          ] }),
          orderData.customerEmail && /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx46(MessageSquare, { className: "w-4 h-4 text-gray-500" }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium", children: "Email:" }),
            /* @__PURE__ */ jsx46("span", { className: "text-sm text-gray-600", children: orderData.customerEmail })
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs32(Card6, { children: [
      /* @__PURE__ */ jsx46(CardHeader6, { children: /* @__PURE__ */ jsxs32(CardTitle6, { className: "text-lg font-semibold flex items-center gap-2", children: [
        /* @__PURE__ */ jsx46(Package4, { className: "w-5 h-5 text-green-600" }),
        "Order Items (",
        orderData.orderItems.length,
        ")"
      ] }) }),
      /* @__PURE__ */ jsx46(CardContent6, { children: orderData.orderItems.length === 0 ? /* @__PURE__ */ jsxs32("div", { className: "text-center py-8 text-gray-500", children: [
        /* @__PURE__ */ jsx46(Package4, { className: "w-12 h-12 mx-auto mb-3 text-gray-300" }),
        /* @__PURE__ */ jsx46("p", { children: "No items added to this order" })
      ] }) : /* @__PURE__ */ jsxs32(Fragment6, { children: [
        console.log("\u{1F50D} OrderPreviewForm received orderItems:", orderData.orderItems),
        console.log("\u{1F50D} OrderPreviewForm orderItems length:", orderData.orderItems.length),
        /* @__PURE__ */ jsxs32("div", { className: "border rounded-lg overflow-hidden", children: [
          /* @__PURE__ */ jsxs32("div", { className: "bg-gray-50 px-4 py-2 text-sm text-gray-600", children: [
            "Debug: Showing ",
            orderData.orderItems.length,
            " order items"
          ] }),
          /* @__PURE__ */ jsxs32(Table2, { children: [
            /* @__PURE__ */ jsx46(TableHeader2, { children: /* @__PURE__ */ jsxs32(TableRow2, { children: [
              /* @__PURE__ */ jsx46(TableHead2, { children: "Product" }),
              /* @__PURE__ */ jsx46(TableHead2, { children: "Quantity" }),
              /* @__PURE__ */ jsx46(TableHead2, { children: "Unit Price" }),
              /* @__PURE__ */ jsx46(TableHead2, { children: t2("messages.totalPrice") }),
              orderData.orderType === "RENT" && /* @__PURE__ */ jsx46(TableHead2, { children: "Deposit" })
            ] }) }),
            /* @__PURE__ */ jsx46(TableBody2, { children: orderData.orderItems.map((item, index) => {
              console.log(`\u{1F50D} Rendering order item ${index}:`, item);
              return /* @__PURE__ */ jsxs32(TableRow2, { className: "border-b", children: [
                /* @__PURE__ */ jsx46(TableCell2, { children: /* @__PURE__ */ jsxs32("div", { className: "flex items-center gap-3", children: [
                  /* @__PURE__ */ jsx46("div", { className: "w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center", children: item.product?.images && item.product.images.length > 0 ? /* @__PURE__ */ jsx46(
                    "img",
                    {
                      src: item.product.images[0],
                      alt: item.product.name,
                      className: "w-8 h-8 rounded object-cover"
                    }
                  ) : /* @__PURE__ */ jsx46(Package4, { className: "w-5 h-5 text-gray-600" }) }),
                  /* @__PURE__ */ jsxs32("div", { children: [
                    /* @__PURE__ */ jsxs32("div", { className: "font-medium", children: [
                      item.product?.name || `Product ID: ${item.productId}`,
                      /* @__PURE__ */ jsxs32("span", { className: "text-xs text-blue-500 ml-2", children: [
                        "(Item #",
                        index + 1,
                        ")"
                      ] })
                    ] }),
                    /* @__PURE__ */ jsx46("div", { className: "text-sm text-gray-500", children: item.product?.barcode || `Order item #${index + 1}` })
                  ] })
                ] }) }),
                /* @__PURE__ */ jsx46(TableCell2, { children: /* @__PURE__ */ jsx46(Badge3, { variant: "outline", children: item.quantity }) }),
                /* @__PURE__ */ jsx46(TableCell2, { className: "font-mono", children: formatCurrency4(item.unitPrice) }),
                /* @__PURE__ */ jsx46(TableCell2, { className: "font-mono font-medium", children: formatCurrency4(item.totalPrice) }),
                orderData.orderType === "RENT" && /* @__PURE__ */ jsx46(TableCell2, { className: "font-mono", children: formatCurrency4(item.deposit || 0) })
              ] }, index);
            }) })
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs32(Card6, { children: [
      /* @__PURE__ */ jsx46(CardHeader6, { children: /* @__PURE__ */ jsxs32(CardTitle6, { className: "text-lg font-semibold flex items-center gap-2", children: [
        /* @__PURE__ */ jsx46(DollarSign2, { className: "w-5 h-5 text-green-600" }),
        "Financial Summary"
      ] }) }),
      /* @__PURE__ */ jsx46(CardContent6, { children: /* @__PURE__ */ jsxs32("div", { className: "space-y-3", children: [
        /* @__PURE__ */ jsxs32("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx46("span", { className: "text-gray-600", children: "Subtotal:" }),
          /* @__PURE__ */ jsx46("span", { className: "font-mono", children: formatCurrency4(orderData.subtotal) })
        ] }),
        orderData.taxAmount && orderData.taxAmount > 0 && /* @__PURE__ */ jsxs32("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx46("span", { className: "text-gray-600", children: "Tax:" }),
          /* @__PURE__ */ jsx46("span", { className: "font-mono", children: formatCurrency4(orderData.taxAmount) })
        ] }),
        orderData.discountAmount && orderData.discountAmount > 0 && /* @__PURE__ */ jsxs32("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx46("span", { className: "text-gray-600", children: "Discount:" }),
          /* @__PURE__ */ jsxs32("span", { className: "font-mono text-green-600", children: [
            "-",
            formatCurrency4(orderData.discountAmount)
          ] })
        ] }),
        /* @__PURE__ */ jsx46(Separator3, {}),
        /* @__PURE__ */ jsxs32("div", { className: "flex justify-between items-center text-lg font-bold", children: [
          /* @__PURE__ */ jsx46("span", { children: "Total Amount:" }),
          /* @__PURE__ */ jsx46("span", { className: "font-mono text-blue-600", children: formatCurrency4(orderData.totalAmount) })
        ] }),
        orderData.depositAmount && orderData.depositAmount > 0 && /* @__PURE__ */ jsxs32(Fragment6, { children: [
          /* @__PURE__ */ jsxs32("div", { className: "flex justify-between items-center", children: [
            /* @__PURE__ */ jsx46("span", { className: "text-gray-600", children: "Deposit Required:" }),
            /* @__PURE__ */ jsx46("span", { className: "font-mono text-orange-600", children: formatCurrency4(orderData.depositAmount) })
          ] }),
          /* @__PURE__ */ jsxs32("div", { className: "flex justify-between items-center", children: [
            /* @__PURE__ */ jsx46("span", { className: "text-gray-600", children: "Remaining Balance:" }),
            /* @__PURE__ */ jsx46("span", { className: "font-mono font-medium", children: formatCurrency4(orderData.totalAmount - orderData.depositAmount) })
          ] })
        ] })
      ] }) })
    ] }),
    (orderData.notes || orderData.orderType === "RENT") && /* @__PURE__ */ jsxs32(Card6, { children: [
      /* @__PURE__ */ jsx46(CardHeader6, { children: /* @__PURE__ */ jsxs32(CardTitle6, { className: "text-lg font-semibold flex items-center gap-2", children: [
        /* @__PURE__ */ jsx46(MessageSquare, { className: "w-5 h-5 text-purple-600" }),
        t2("messages.additionalInformation")
      ] }) }),
      /* @__PURE__ */ jsx46(CardContent6, { children: /* @__PURE__ */ jsxs32("div", { className: "space-y-3", children: [
        orderData.notes && /* @__PURE__ */ jsxs32("div", { children: [
          /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium text-gray-700", children: "Notes:" }),
          /* @__PURE__ */ jsx46("p", { className: "text-sm text-gray-600 mt-1", children: orderData.notes })
        ] }),
        orderData.orderType === "RENT" && /* @__PURE__ */ jsxs32("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          orderData.securityDeposit && /* @__PURE__ */ jsxs32("div", { children: [
            /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium text-gray-700", children: "Security Deposit:" }),
            /* @__PURE__ */ jsx46("p", { className: "text-sm text-gray-600 mt-1", children: formatCurrency4(orderData.securityDeposit) })
          ] }),
          orderData.damageFee && /* @__PURE__ */ jsxs32("div", { children: [
            /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium text-gray-700", children: "Damage Fee:" }),
            /* @__PURE__ */ jsx46("p", { className: "text-sm text-gray-600 mt-1", children: formatCurrency4(orderData.damageFee) })
          ] }),
          orderData.lateFee && /* @__PURE__ */ jsxs32("div", { children: [
            /* @__PURE__ */ jsx46("span", { className: "text-sm font-medium text-gray-700", children: "Late Fee:" }),
            /* @__PURE__ */ jsx46("p", { className: "text-sm text-gray-600 mt-1", children: formatCurrency4(orderData.lateFee) })
          ] })
        ] })
      ] }) })
    ] }),
    warnings.length > 0 && /* @__PURE__ */ jsxs32(Card6, { className: "border-orange-200 bg-orange-50", children: [
      /* @__PURE__ */ jsx46(CardHeader6, { children: /* @__PURE__ */ jsxs32(CardTitle6, { className: "text-lg font-semibold flex items-center gap-2 text-orange-700", children: [
        /* @__PURE__ */ jsx46(AlertTriangle6, { className: "w-5 h-5" }),
        "Validation Warnings"
      ] }) }),
      /* @__PURE__ */ jsx46(CardContent6, { children: /* @__PURE__ */ jsx46("ul", { className: "list-disc list-inside space-y-1 text-sm text-orange-700", children: warnings.map((warning2, index) => /* @__PURE__ */ jsx46("li", { children: warning2 }, index)) }) })
    ] }),
    /* @__PURE__ */ jsxs32("div", { className: "flex justify-end gap-3 pt-6 border-t", children: [
      onCancel && /* @__PURE__ */ jsxs32(
        Button7,
        {
          variant: "outline",
          onClick: onCancel,
          className: "flex items-center gap-2",
          children: [
            /* @__PURE__ */ jsx46(X6, { className: "w-4 h-4" }),
            cancelText
          ]
        }
      ),
      /* @__PURE__ */ jsxs32(
        Button7,
        {
          variant: "outline",
          onClick: onEdit,
          className: "flex items-center gap-2",
          children: [
            /* @__PURE__ */ jsx46(ArrowLeft, { className: "w-4 h-4" }),
            editText
          ]
        }
      ),
      /* @__PURE__ */ jsx46(
        Button7,
        {
          onClick: onConfirm,
          disabled: loading || warnings.length > 0,
          className: "flex items-center gap-2 bg-blue-600 hover:bg-blue-700",
          children: loading ? /* @__PURE__ */ jsxs32(Fragment6, { children: [
            /* @__PURE__ */ jsx46("div", { className: "w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" }),
            "Processing..."
          ] }) : /* @__PURE__ */ jsxs32(Fragment6, { children: [
            /* @__PURE__ */ jsx46(CheckCircle8, { className: "w-4 h-4" }),
            confirmText
          ] })
        }
      )
    ] })
  ] });
};

// src/components/forms/CreateOrderForm/components/OrderPreviewDialog.tsx
import { ShoppingCart as ShoppingCart2 } from "lucide-react";
import { jsx as jsx47, jsxs as jsxs33 } from "react/jsx-runtime";
var OrderPreviewDialog = ({
  open,
  onOpenChange,
  orderData,
  products,
  onConfirm,
  onEdit,
  loading,
  confirmText,
  editText,
  title,
  subtitle
}) => {
  return /* @__PURE__ */ jsx47(Dialog3, { open, onOpenChange, children: /* @__PURE__ */ jsxs33(DialogContent3, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsx47(DialogHeader3, { children: /* @__PURE__ */ jsxs33(DialogTitle3, { className: "text-2xl font-bold flex items-center gap-2", children: [
      /* @__PURE__ */ jsx47(ShoppingCart2, { className: "w-6 h-6 text-blue-600" }),
      title
    ] }) }),
    /* @__PURE__ */ jsx47(
      OrderPreviewForm,
      {
        orderData,
        products,
        onConfirm,
        onEdit,
        loading,
        confirmText,
        editText,
        title,
        subtitle
      }
    )
  ] }) });
};

// src/components/forms/CreateOrderForm/CreateOrderForm.tsx
import { jsx as jsx48, jsxs as jsxs34 } from "react/jsx-runtime";
var CreateOrderForm = (props) => {
  const {
    customers = [],
    products = [],
    outlets = [],
    categories = [],
    onSubmit,
    onCancel,
    loading = false,
    layout = "split",
    merchantId,
    currency = "USD",
    // Default to USD if not provided
    isEditMode = false,
    initialOrder,
    orderNumber,
    onFormReady
  } = props;
  const t2 = useOrderTranslations5();
  const {
    formData,
    setFormData,
    orderItems,
    setOrderItems,
    isSubmitting,
    showOrderPreview,
    setShowOrderPreview,
    addProductToOrder,
    removeProductFromOrder,
    updateOrderItem,
    updateRentalDates,
    handlePreviewClick,
    handleOrderConfirm,
    handleSubmit,
    resetForm,
    calculateRentalDays
  } = useCreateOrderForm(props);
  const { validationErrors, validateForm, isFormValid } = useOrderValidation();
  const { isLoadingProducts, searchProductsForSelect, searchProducts } = useProductSearch(currency);
  const {
    isLoadingCustomers,
    customerSearchResults,
    searchCustomers,
    clearCustomerSearchResults,
    setCustomerResults
  } = useCustomerSearch();
  const { user } = useAuth();
  const merchantData = user?.merchant || null;
  console.log("\u{1F50D} CreateOrderForm - Merchant Data:", {
    hasUser: !!user,
    hasMerchant: !!merchantData,
    pricingType: merchantData?.pricingType,
    businessType: merchantData?.businessType,
    fullMerchant: merchantData
  });
  const [selectedCustomer, setSelectedCustomer] = useState19(() => {
    if (isEditMode && initialOrder?.customer) {
      return {
        id: parseInt(initialOrder.customerId) || 0,
        firstName: initialOrder.customer.firstName,
        lastName: initialOrder.customer.lastName,
        phone: initialOrder.customer.phone,
        email: initialOrder.customer.email || "",
        isActive: true,
        createdAt: /* @__PURE__ */ new Date(),
        updatedAt: /* @__PURE__ */ new Date(),
        merchantId: parseInt(initialOrder.customer.merchantId) || 0,
        merchant: {
          id: parseInt(initialOrder.customer.merchantId) || 0,
          name: initialOrder.customer.merchant?.name || ""
        }
      };
    }
    return null;
  });
  const [searchedProducts, setSearchedProducts] = useState19([]);
  const [searchQuery, setSearchQuery] = useState19(() => {
    if (isEditMode && initialOrder?.customer) {
      return `${initialOrder.customer.firstName} ${initialOrder.customer.lastName} - ${initialOrder.customer.phone}`;
    }
    return "";
  });
  useEffect12(() => {
    if (onFormReady) {
      onFormReady(resetForm);
    }
  }, [onFormReady, resetForm]);
  const [showAddCustomerDialog, setShowAddCustomerDialog] = useState19(false);
  const { calculateAvailability } = useProductAvailability();
  const { toastSuccess, toastError, removeToast } = useToast4();
  const handleProductSearch = useCallback6(async (query) => {
    try {
      const searchResults = await searchProducts(query);
      setSearchedProducts(searchResults);
      return searchResults.map((product) => ({
        value: String(product.id),
        label: product.name,
        image: product.images?.[0],
        subtitle: product.barcode ? `Barcode: ${product.barcode}` : t2("messages.noBarcode"),
        details: [
          formatCurrency5(product.rentPrice || 0, currency),
          `Deposit: ${formatCurrency5(product.deposit || 0, currency)}`,
          `Available: ${product.outletStock?.[0]?.available || 0}`,
          `Total Stock: ${product.outletStock?.[0]?.stock || 0}`,
          product.category?.name || t2("messages.noCategory")
        ].filter(Boolean),
        type: "product"
      }));
    } catch (error2) {
      console.error("Error searching products:", error2);
      return [];
    }
  }, [searchProducts, currency]);
  const getProductAvailabilityStatus = useCallback6(async (product, startDate, endDate, requestedQuantity = BUSINESS3.DEFAULT_QUANTITY) => {
    try {
      const outletStock = product.outletStock?.[0];
      const available = outletStock?.available ?? 0;
      const stock = outletStock?.stock ?? 0;
      const renting = outletStock?.renting ?? 0;
      const totalStock = stock;
      if (!startDate || !endDate) {
        if (available === 0) {
          return {
            status: "out-of-stock",
            text: t2("messages.outOfStock"),
            color: "bg-red-100 text-red-600"
          };
        } else if (available <= VALIDATION3.LOW_STOCK_THRESHOLD) {
          return {
            status: "low-stock",
            text: `Low Stock (${available})`,
            color: "bg-orange-100 text-orange-600"
          };
        } else {
          return {
            status: "available",
            text: `Available (${available})`,
            color: "bg-green-100 text-green-600"
          };
        }
      }
      const availability = calculateAvailability(
        {
          id: product.id,
          name: product.name,
          stock,
          renting,
          available
        },
        startDate,
        endDate,
        requestedQuantity
      );
      const availableQuantity = availability?.availableQuantity ?? 0;
      const isAvailable = availability?.available ?? false;
      if (isAvailable) {
        return {
          status: "available",
          text: `Available (${availableQuantity})`,
          color: "bg-green-100 text-green-600"
        };
      } else {
        return {
          status: "unavailable",
          text: `Unavailable (${availableQuantity}/${stock})`,
          color: "bg-red-100 text-red-600"
        };
      }
    } catch (error2) {
      console.error("Error checking availability:", error2);
      const outletStock = product.outletStock?.[0];
      const available = outletStock?.available ?? 0;
      if (available === 0) {
        return { status: "unknown", text: t2("messages.outOfStock"), color: "bg-red-100 text-red-600" };
      } else if (available <= VALIDATION3.LOW_STOCK_THRESHOLD) {
        return { status: "unknown", text: t2("messages.lowStock"), color: "bg-orange-100 text-orange-600" };
      } else {
        return { status: "unknown", text: t2("messages.inStock"), color: "bg-green-100 text-green-600" };
      }
    }
  }, [calculateAvailability]);
  const handleAddNewCustomer = useCallback6(async (customerData) => {
    try {
      console.log("\u{1F50D} handleAddNewCustomer: Starting customer creation...");
      const currentMerchantId = merchantId || outlets[0]?.merchantId;
      if (!currentMerchantId) {
        const errorMsg = "Merchant ID is required to create a customer. Please ensure the form has access to merchant information.";
        toastError(t2("messages.error"), errorMsg);
        throw new Error(errorMsg);
      }
      console.log("\u{1F50D} handleAddNewCustomer: Merchant ID found:", currentMerchantId);
      const normalizedPhone = customerData.phone.replace(/[\s\-\(\)\+]/g, "");
      const localDuplicate = customerSearchResults.find((customer) => {
        if (customer.phone) {
          const existingNormalizedPhone = customer.phone.replace(/[\s\-\(\)\+]/g, "");
          return normalizedPhone === existingNormalizedPhone;
        }
        return false;
      });
      if (localDuplicate) {
        const errorMsg = `A customer with phone number "${customerData.phone}" already exists (${localDuplicate.firstName} ${localDuplicate.lastName}). Please use a different phone number or search for the existing customer.`;
        toastError(t2("messages.duplicateCustomer"), errorMsg);
        throw new Error(errorMsg);
      }
      console.log("\u{1F50D} handleAddNewCustomer: No local duplicates found, checking API...");
      const duplicateCheck = await customersApi2.getCustomerByPhone(customerData.phone);
      if (duplicateCheck.success && duplicateCheck.data) {
        const existingCustomers = duplicateCheck.data.customers || duplicateCheck.data.customer || [];
        const customersArray = Array.isArray(existingCustomers) ? existingCustomers : [existingCustomers];
        for (const existingCustomer of customersArray) {
          if (existingCustomer.phone) {
            const existingNormalizedPhone = existingCustomer.phone.replace(/[\s\-\(\)\+]/g, "");
            if (normalizedPhone === existingNormalizedPhone) {
              const errorMsg = `A customer with phone number "${customerData.phone}" already exists (${existingCustomer.firstName} ${existingCustomer.lastName}). Please use a different phone number or search for the existing customer.`;
              toastError(t2("messages.duplicateCustomer"), errorMsg);
              throw new Error(errorMsg);
            }
          }
        }
      }
      console.log("\u{1F50D} handleAddNewCustomer: No API duplicates found, creating customer...");
      const result = await customersApi2.createCustomer({
        ...customerData,
        merchantId: currentMerchantId,
        isActive: true
      });
      console.log("\u{1F50D} handleAddNewCustomer: API response:", result);
      console.log("\u{1F50D} handleAddNewCustomer: result.success:", result.success);
      console.log("\u{1F50D} handleAddNewCustomer: result.data:", result.data);
      console.log("\u{1F50D} handleAddNewCustomer: result.data?.customer:", result.data?.customer);
      if (result.success && result.data && (result.data.customer || result.data.firstName)) {
        const newCustomer = result.data.customer || result.data;
        console.log("\u{1F50D} handleAddNewCustomer: Customer created successfully:", newCustomer);
        setCustomerResults([newCustomer, ...customerSearchResults]);
        setFormData((prev) => ({
          ...prev,
          customerId: Number(newCustomer.id)
        }));
        setSelectedCustomer(newCustomer);
        setSearchQuery(`${newCustomer.firstName} ${newCustomer.lastName} - ${newCustomer.phone}`);
        toastSuccess(t2("messages.customerCreated"), `Customer "${newCustomer.firstName} ${newCustomer.lastName}" ${t2("messages.customerCreatedMessage")}`);
        console.log("\u{1F50D} handleAddNewCustomer: Function completed successfully");
      } else {
        const errorMessage = result.message || result.error || t2("messages.failedToCreateCustomer");
        console.error("\u274C handleAddNewCustomer: API error:", errorMessage);
        console.error("\u274C handleAddNewCustomer: Full result:", result);
        toastError(t2("messages.error"), errorMessage);
        throw new Error(errorMessage);
      }
    } catch (error2) {
      console.error("\u274C handleAddNewCustomer: Error occurred:", error2);
      throw error2;
    }
  }, [merchantId, outlets, customerSearchResults, setCustomerResults, setFormData, toastSuccess, toastError]);
  const handleCustomerSelect = useCallback6((customer) => {
    console.log("\u{1F50D} handleCustomerSelect: Customer selected:", customer);
    console.log("\u{1F50D} handleCustomerSelect: Customer ID:", customer.id);
    console.log("\u{1F50D} handleCustomerSelect: Customer ID type:", typeof customer.id);
    console.log("\u{1F50D} handleCustomerSelect: Full customer object keys:", Object.keys(customer));
    console.log("\u{1F50D} handleCustomerSelect: Customer id:", customer.id);
    const customerId = customer.id;
    console.log("\u{1F50D} handleCustomerSelect: Resolved customer ID:", customerId);
    setSelectedCustomer(customer);
    setFormData((prev) => {
      console.log("\u{1F50D} handleCustomerSelect: Previous formData:", prev);
      const newFormData = { ...prev, customerId };
      console.log("\u{1F50D} handleCustomerSelect: New formData:", newFormData);
      return newFormData;
    });
    setSearchQuery(`${customer.firstName} ${customer.lastName} - ${customer.phone}`);
  }, []);
  useEffect12(() => {
    if (isEditMode && initialOrder) {
      if (initialOrder.customer) {
        const customer = {
          id: parseInt(initialOrder.customerId) || 0,
          firstName: initialOrder.customer.firstName,
          lastName: initialOrder.customer.lastName,
          phone: initialOrder.customer.phone,
          email: initialOrder.customer.email || "",
          isActive: true,
          createdAt: /* @__PURE__ */ new Date(),
          updatedAt: /* @__PURE__ */ new Date(),
          merchantId: parseInt(initialOrder.customer.merchantId) || 0,
          merchant: { id: parseInt(initialOrder.customer.merchantId) || 0, name: "" }
        };
        setSelectedCustomer(customer);
        setSearchQuery(`${customer.firstName} ${customer.lastName} - ${customer.phone}`);
      }
    }
  }, [isEditMode, initialOrder]);
  const validateFormAndSubmit = useCallback6(async (e2) => {
    e2.preventDefault();
    if (isSubmitting)
      return;
    if (!validateForm(formData, orderItems)) {
      return;
    }
    await handleSubmit(e2);
  }, [isSubmitting, validateForm, formData, orderItems, handleSubmit]);
  const isFormValidForUI = isFormValid(formData, orderItems);
  return /* @__PURE__ */ jsxs34("div", { className: "w-full min-h-full bg-bg-secondary", children: [
    /* @__PURE__ */ jsx48("div", { className: "w-full", children: /* @__PURE__ */ jsxs34("div", { className: "flex flex-col lg:flex-row gap-4 px-4 py-4", children: [
      /* @__PURE__ */ jsx48("div", { className: "lg:w-[40%] space-y-4", children: /* @__PURE__ */ jsx48(
        ProductsSection,
        {
          orderItems,
          products: [...products, ...searchedProducts],
          onAddProduct: addProductToOrder,
          onRemoveProduct: removeProductFromOrder,
          onUpdateOrderItem: updateOrderItem,
          onSearchProducts: handleProductSearch,
          isLoadingProducts,
          orderType: formData.orderType,
          pickupDate: formData.pickupPlanAt,
          returnDate: formData.returnPlanAt,
          getProductAvailabilityStatus,
          currency
        }
      ) }),
      /* @__PURE__ */ jsx48("div", { className: "lg:w-[30%] space-y-4", children: /* @__PURE__ */ jsx48(
        OrderInfoSection,
        {
          formData,
          outlets,
          selectedCustomer,
          searchQuery,
          customerSearchResults,
          isLoadingCustomers,
          isEditMode,
          merchantData,
          onFormDataChange: (field, value) => setFormData((prev) => ({ ...prev, [field]: value })),
          onCustomerSelect: handleCustomerSelect,
          onCustomerClear: () => {
            setSelectedCustomer(null);
            setSearchQuery("");
            setFormData((prev) => ({ ...prev, customerId: void 0 }));
          },
          onSearchQueryChange: setSearchQuery,
          onCustomerSearch: searchCustomers,
          onShowAddCustomerDialog: () => setShowAddCustomerDialog(true),
          onUpdateRentalDates: updateRentalDates,
          currency
        }
      ) }),
      /* @__PURE__ */ jsx48("div", { className: "lg:w-[30%] space-y-4", children: /* @__PURE__ */ jsx48("div", { className: "lg:sticky lg:top-4", children: /* @__PURE__ */ jsx48(
        OrderSummarySection,
        {
          formData,
          orderItems,
          isEditMode,
          loading: loading || isSubmitting,
          isFormValid: isFormValidForUI,
          onPreviewClick: handlePreviewClick,
          onCancel,
          currency
        }
      ) }) })
    ] }) }),
    /* @__PURE__ */ jsx48(
      CustomerCreationDialog,
      {
        open: showAddCustomerDialog,
        onOpenChange: setShowAddCustomerDialog,
        onCustomerCreated: handleAddNewCustomer,
        merchantId
      }
    ),
    /* @__PURE__ */ jsx48(
      OrderPreviewDialog,
      {
        open: showOrderPreview,
        onOpenChange: setShowOrderPreview,
        orderData: {
          orderType: formData.orderType,
          customerId: formData.customerId || 0,
          customerName: selectedCustomer ? `${selectedCustomer.firstName} ${selectedCustomer.lastName}` : void 0,
          customerPhone: selectedCustomer?.phone,
          customerEmail: selectedCustomer?.email,
          outletId: formData.outletId || 0,
          outletName: outlets.find((o2) => o2.id === formData.outletId)?.name,
          pickupPlanAt: formData.pickupPlanAt,
          returnPlanAt: formData.returnPlanAt,
          subtotal: formData.subtotal,
          taxAmount: formData.taxAmount,
          discountAmount: formData.discountAmount,
          totalAmount: formData.totalAmount,
          depositAmount: formData.depositAmount,
          securityDeposit: formData.securityDeposit,
          lateFee: formData.lateFee,
          damageFee: formData.damageFee,
          notes: formData.notes,
          orderItems: (() => {
            console.log("\u{1F50D} Creating preview data - orderItems from state:", orderItems);
            console.log("\u{1F50D} Creating preview data - orderItems length:", orderItems.length);
            return orderItems.map((item) => ({
              productId: item.productId,
              product: item.product,
              // Include the full product information
              quantity: item.quantity,
              unitPrice: item.unitPrice,
              totalPrice: item.quantity * item.unitPrice,
              deposit: item.deposit ?? 0,
              // Ensure deposit is always a number
              notes: item.notes || ""
            }));
          })()
        },
        products,
        onConfirm: handleOrderConfirm,
        onEdit: () => setShowOrderPreview(false),
        loading: loading || isSubmitting,
        confirmText: isEditMode ? t2("actions.updateOrder") : t2("actions.confirmCreate"),
        editText: t2("actions.backToEdit"),
        title: t2("actions.orderPreview"),
        subtitle: t2("actions.reviewBeforeConfirm")
      }
    ),
    "    "
  ] });
};

// src/components/forms/PlanForm.tsx
import { useState as useState20 } from "react";
import {
  Package as Package5,
  DollarSign as DollarSign3,
  Users,
  CreditCard,
  Plus as Plus3,
  Trash2 as Trash23,
  CheckCircle as CheckCircle9,
  Star,
  Settings
} from "lucide-react";
import { BILLING_CYCLES } from "@rentalshop/constants";
import {
  calculateDiscountedPrice,
  getBillingCycleDiscount,
  formatBillingCycle
} from "@rentalshop/utils";
import { Fragment as Fragment7, jsx as jsx49, jsxs as jsxs35 } from "react/jsx-runtime";
var PlanForm = ({
  initialData = {},
  onSubmit,
  onCancel,
  loading = false,
  title = "Plan Information",
  submitText = "Save Plan",
  mode = "create",
  hideHeader = false,
  hideSubmitButton = false,
  formId
}) => {
  const [formData, setFormData] = useState20({
    name: "",
    description: "",
    basePrice: 0,
    // ✅ Updated: Use basePrice instead of price
    currency: "USD",
    billingCycle: "monthly",
    billingCycleMonths: 1,
    trialDays: 0,
    maxOutlets: 1,
    maxUsers: 1,
    maxProducts: 10,
    maxCustomers: 50,
    features: [],
    isActive: true,
    isPopular: false,
    mobileOnly: false,
    // ✅ NEW: Default to false
    sortOrder: 0,
    ...initialData
  });
  const [errors, setErrors] = useState20({});
  const [isSubmitting, setIsSubmitting] = useState20(false);
  const [newFeature, setNewFeature] = useState20("");
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }));
    }
  };
  const handleBillingCycleChange = (cycle) => {
    const cycleOption = BILLING_CYCLES.find((option) => option.value === cycle);
    setFormData((prev) => ({
      ...prev,
      billingCycle: cycle,
      billingCycleMonths: cycleOption?.months || 1
    }));
    if (errors.billingCycle) {
      setErrors((prev) => ({ ...prev, billingCycle: "" }));
    }
  };
  const validateForm = () => {
    const newErrors = {};
    if (!formData.name.trim()) {
      newErrors.name = "Plan name is required";
    }
    if (!formData.description.trim()) {
      newErrors.description = "Plan description is required";
    }
    if (formData.basePrice < 0) {
      newErrors.basePrice = "Price must be non-negative";
    }
    if (formData.trialDays < 0) {
      newErrors.trialDays = "Trial days must be non-negative";
    }
    if (formData.maxOutlets < -1) {
      newErrors.maxOutlets = "Max outlets must be -1 (unlimited) or positive";
    }
    if (formData.maxUsers < -1) {
      newErrors.maxUsers = "Max users must be -1 (unlimited) or positive";
    }
    if (formData.maxProducts < -1) {
      newErrors.maxProducts = "Max products must be -1 (unlimited) or positive";
    }
    if (formData.maxCustomers < -1) {
      newErrors.maxCustomers = "Max customers must be -1 (unlimited) or positive";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    setIsSubmitting(true);
    try {
      await onSubmit(formData);
    } catch (error2) {
      console.error("Error submitting plan:", error2);
    } finally {
      setIsSubmitting(false);
    }
  };
  const addFeature = () => {
    if (newFeature.trim() && !formData.features.includes(newFeature.trim())) {
      handleInputChange("features", [...formData.features, newFeature.trim()]);
      setNewFeature("");
    }
  };
  const removeFeature = (index) => {
    handleInputChange("features", formData.features.filter((_, i) => i !== index));
  };
  const getLimitText = (limit) => {
    return limit === -1 ? "Unlimited" : limit.toString();
  };
  const formatCurrency22 = (price, currency) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: currency || "USD"
    }).format(price);
  };
  return /* @__PURE__ */ jsxs35("div", { className: "space-y-6", children: [
    !hideHeader && /* @__PURE__ */ jsxs35("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs35("div", { children: [
        /* @__PURE__ */ jsx49("h2", { className: "text-2xl font-bold text-text-primary", children: title }),
        /* @__PURE__ */ jsx49("p", { className: "text-text-secondary mt-1", children: mode === "create" ? "Create a new subscription plan" : "Update plan information" })
      ] }),
      mode === "edit" && /* @__PURE__ */ jsx49(Badge, { variant: formData.isActive ? "default" : "secondary", children: formData.isActive ? "Active" : "Inactive" })
    ] }),
    /* @__PURE__ */ jsxs35("form", { id: formId, onSubmit: handleSubmit, className: "space-y-6", children: [
      /* @__PURE__ */ jsxs35(Card, { children: [
        /* @__PURE__ */ jsx49(CardHeader, { children: /* @__PURE__ */ jsxs35(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx49(Package5, { className: "w-5 h-5" }),
          "Basic Information"
        ] }) }),
        /* @__PURE__ */ jsxs35(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs35("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs35("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx49(Label2, { htmlFor: "name", children: "Plan Name *" }),
              /* @__PURE__ */ jsx49(
                Input,
                {
                  id: "name",
                  value: formData.name,
                  onChange: (e2) => handleInputChange("name", e2.target.value),
                  placeholder: "Enter plan name",
                  className: errors.name ? "border-red-500" : ""
                }
              ),
              errors.name && /* @__PURE__ */ jsx49("p", { className: "text-sm text-red-500", children: errors.name })
            ] }),
            /* @__PURE__ */ jsxs35("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx49(Label2, { htmlFor: "sortOrder", children: "Sort Order" }),
              /* @__PURE__ */ jsx49(
                Input,
                {
                  id: "sortOrder",
                  type: "number",
                  value: formData.sortOrder,
                  onChange: (e2) => handleInputChange("sortOrder", parseInt(e2.target.value) || 0),
                  placeholder: "0",
                  min: "0"
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxs35("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx49(Label2, { htmlFor: "description", children: "Description *" }),
            /* @__PURE__ */ jsx49(
              Textarea,
              {
                id: "description",
                value: formData.description,
                onChange: (e2) => handleInputChange("description", e2.target.value),
                placeholder: "Describe what this plan offers",
                rows: 3,
                className: errors.description ? "border-red-500" : ""
              }
            ),
            errors.description && /* @__PURE__ */ jsx49("p", { className: "text-sm text-red-500", children: errors.description })
          ] }),
          /* @__PURE__ */ jsxs35("div", { className: "flex items-center space-x-4", children: [
            /* @__PURE__ */ jsxs35("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx49(
                Switch,
                {
                  id: "isActive",
                  checked: formData.isActive,
                  onCheckedChange: (checked) => handleInputChange("isActive", checked)
                }
              ),
              /* @__PURE__ */ jsx49(Label2, { htmlFor: "isActive", children: "Active Plan" })
            ] }),
            /* @__PURE__ */ jsxs35("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx49(
                Switch,
                {
                  id: "isPopular",
                  checked: formData.isPopular,
                  onCheckedChange: (checked) => handleInputChange("isPopular", checked)
                }
              ),
              /* @__PURE__ */ jsxs35(Label2, { htmlFor: "isPopular", className: "flex items-center gap-1", children: [
                /* @__PURE__ */ jsx49(Star, { className: "w-4 h-4" }),
                "Popular Plan"
              ] })
            ] }),
            /* @__PURE__ */ jsxs35("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx49(
                Switch,
                {
                  id: "mobileOnly",
                  checked: formData.mobileOnly,
                  onCheckedChange: (checked) => handleInputChange("mobileOnly", checked)
                }
              ),
              /* @__PURE__ */ jsxs35(Label2, { htmlFor: "mobileOnly", className: "flex items-center gap-1", children: [
                /* @__PURE__ */ jsx49(Settings, { className: "w-4 h-4" }),
                "Mobile Only"
              ] })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs35(Card, { children: [
        /* @__PURE__ */ jsx49(CardHeader, { children: /* @__PURE__ */ jsxs35(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx49(DollarSign3, { className: "w-5 h-5" }),
          "Pricing Information"
        ] }) }),
        /* @__PURE__ */ jsxs35(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs35("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxs35("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx49(Label2, { htmlFor: "basePrice", children: "Base Price *" }),
              /* @__PURE__ */ jsx49(
                Input,
                {
                  id: "basePrice",
                  type: "number",
                  step: "0.01",
                  value: formData.basePrice,
                  onChange: (e2) => handleInputChange("basePrice", parseFloat(e2.target.value) || 0),
                  placeholder: "0.00",
                  min: "0",
                  className: errors.basePrice ? "border-red-500" : ""
                }
              ),
              errors.basePrice && /* @__PURE__ */ jsx49("p", { className: "text-sm text-red-500", children: errors.basePrice })
            ] }),
            /* @__PURE__ */ jsxs35("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx49(Label2, { htmlFor: "currency", children: "Currency" }),
              /* @__PURE__ */ jsxs35(Select, { value: formData.currency, onValueChange: (value) => handleInputChange("currency", value), children: [
                /* @__PURE__ */ jsx49(SelectTrigger, { children: /* @__PURE__ */ jsx49(SelectValue, {}) }),
                /* @__PURE__ */ jsxs35(SelectContent, { children: [
                  /* @__PURE__ */ jsx49(SelectItem, { value: "USD", children: "USD ($)" }),
                  /* @__PURE__ */ jsx49(SelectItem, { value: "VND", children: "VND (\u20AB)" }),
                  /* @__PURE__ */ jsx49(SelectItem, { value: "EUR", children: "EUR (\u20AC)" })
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxs35("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx49(Label2, { htmlFor: "billingCycle", children: "Billing Cycle" }),
              /* @__PURE__ */ jsxs35(Select, { value: formData.billingCycle, onValueChange: handleBillingCycleChange, children: [
                /* @__PURE__ */ jsx49(SelectTrigger, { children: /* @__PURE__ */ jsx49(SelectValue, {}) }),
                /* @__PURE__ */ jsx49(SelectContent, { children: BILLING_CYCLES.map((cycle) => /* @__PURE__ */ jsx49(SelectItem, { value: cycle.value, children: /* @__PURE__ */ jsxs35("div", { className: "flex flex-col", children: [
                  /* @__PURE__ */ jsx49("span", { className: "font-medium", children: cycle.label }),
                  /* @__PURE__ */ jsx49("span", { className: "text-xs text-text-tertiary", children: cycle.description })
                ] }) }, cycle.value)) })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs35("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx49(Label2, { htmlFor: "trialDays", children: "Trial Days" }),
            /* @__PURE__ */ jsx49(
              Input,
              {
                id: "trialDays",
                type: "number",
                value: formData.trialDays,
                onChange: (e2) => handleInputChange("trialDays", parseInt(e2.target.value) || 0),
                placeholder: "0",
                min: "0",
                className: errors.trialDays ? "border-red-500" : ""
              }
            ),
            errors.trialDays && /* @__PURE__ */ jsx49("p", { className: "text-sm text-red-500", children: errors.trialDays })
          ] }),
          /* @__PURE__ */ jsxs35("div", { className: "bg-bg-secondary p-4 rounded-lg", children: [
            /* @__PURE__ */ jsx49("div", { className: "text-sm text-text-secondary mb-2", children: "Price Preview:" }),
            /* @__PURE__ */ jsxs35("div", { className: "text-2xl font-bold text-text-primary", children: [
              formatCurrency22(formData.basePrice, formData.currency),
              /* @__PURE__ */ jsxs35("span", { className: "text-lg text-text-secondary font-normal ml-2", children: [
                "/",
                formatBillingCycle(formData.billingCycle).toLowerCase()
              ] })
            ] }),
            getBillingCycleDiscount(formData.billingCycle) > 0 && /* @__PURE__ */ jsxs35("div", { className: "text-sm text-action-success mt-1", children: [
              getBillingCycleDiscount(formData.billingCycle),
              "% discount applied"
            ] }),
            formData.billingCycleMonths > 1 && /* @__PURE__ */ jsxs35("div", { className: "text-sm text-text-secondary mt-1", children: [
              "Total: ",
              formatCurrency22(calculateDiscountedPrice(formData.basePrice, formData.billingCycle), formData.currency),
              " for ",
              formData.billingCycleMonths,
              " months"
            ] }),
            formData.trialDays > 0 && /* @__PURE__ */ jsxs35("div", { className: "text-sm text-action-primary mt-1", children: [
              formData.trialDays,
              "-day free trial"
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs35(Card, { children: [
        /* @__PURE__ */ jsx49(CardHeader, { children: /* @__PURE__ */ jsxs35(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx49(Settings, { className: "w-5 h-5" }),
          "Usage Limits"
        ] }) }),
        /* @__PURE__ */ jsxs35(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs35("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsx49(
              LimitInput,
              {
                id: "maxOutlets",
                label: "Max Outlets",
                value: formData.maxOutlets,
                onChange: (value) => handleInputChange("maxOutlets", value),
                placeholder: "-1 (unlimited)",
                helpText: "Use -1 for unlimited",
                error: !!errors.maxOutlets
              }
            ),
            errors.maxOutlets && /* @__PURE__ */ jsx49("p", { className: "text-sm text-red-500", children: errors.maxOutlets }),
            /* @__PURE__ */ jsx49(
              LimitInput,
              {
                id: "maxUsers",
                label: "Max Users",
                value: formData.maxUsers,
                onChange: (value) => handleInputChange("maxUsers", value),
                placeholder: "-1 (unlimited)",
                helpText: "Use -1 for unlimited",
                error: !!errors.maxUsers
              }
            ),
            errors.maxUsers && /* @__PURE__ */ jsx49("p", { className: "text-sm text-red-500", children: errors.maxUsers }),
            /* @__PURE__ */ jsx49(
              LimitInput,
              {
                id: "maxProducts",
                label: "Max Products",
                value: formData.maxProducts,
                onChange: (value) => handleInputChange("maxProducts", value),
                placeholder: "-1 (unlimited)",
                helpText: "Use -1 for unlimited",
                error: !!errors.maxProducts
              }
            ),
            errors.maxProducts && /* @__PURE__ */ jsx49("p", { className: "text-sm text-red-500", children: errors.maxProducts }),
            /* @__PURE__ */ jsx49(
              LimitInput,
              {
                id: "maxCustomers",
                label: "Max Customers",
                value: formData.maxCustomers,
                onChange: (value) => handleInputChange("maxCustomers", value),
                placeholder: "-1 (unlimited)",
                helpText: "Use -1 for unlimited",
                error: !!errors.maxCustomers
              }
            ),
            errors.maxCustomers && /* @__PURE__ */ jsx49("p", { className: "text-sm text-red-500", children: errors.maxCustomers })
          ] }),
          /* @__PURE__ */ jsxs35("div", { className: "bg-bg-secondary p-4 rounded-lg", children: [
            /* @__PURE__ */ jsx49("div", { className: "text-sm text-text-secondary mb-2", children: "Limits Preview:" }),
            /* @__PURE__ */ jsxs35("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 text-sm", children: [
              /* @__PURE__ */ jsxs35("div", { children: [
                /* @__PURE__ */ jsxs35("div", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsx49(Package5, { className: "w-4 h-4 text-text-tertiary" }),
                  /* @__PURE__ */ jsx49("span", { className: "text-text-secondary", children: "Outlets:" })
                ] }),
                /* @__PURE__ */ jsx49("div", { className: "font-medium text-text-primary", children: getLimitText(formData.maxOutlets) })
              ] }),
              /* @__PURE__ */ jsxs35("div", { children: [
                /* @__PURE__ */ jsxs35("div", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsx49(Users, { className: "w-4 h-4 text-text-tertiary" }),
                  /* @__PURE__ */ jsx49("span", { className: "text-text-secondary", children: "Users:" })
                ] }),
                /* @__PURE__ */ jsx49("div", { className: "font-medium text-text-primary", children: getLimitText(formData.maxUsers) })
              ] }),
              /* @__PURE__ */ jsxs35("div", { children: [
                /* @__PURE__ */ jsxs35("div", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsx49(CreditCard, { className: "w-4 h-4 text-text-tertiary" }),
                  /* @__PURE__ */ jsx49("span", { className: "text-text-secondary", children: "Products:" })
                ] }),
                /* @__PURE__ */ jsx49("div", { className: "font-medium text-text-primary", children: getLimitText(formData.maxProducts) })
              ] }),
              /* @__PURE__ */ jsxs35("div", { children: [
                /* @__PURE__ */ jsxs35("div", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsx49(Users, { className: "w-4 h-4 text-text-tertiary" }),
                  /* @__PURE__ */ jsx49("span", { className: "text-text-secondary", children: "Customers:" })
                ] }),
                /* @__PURE__ */ jsx49("div", { className: "font-medium text-text-primary", children: getLimitText(formData.maxCustomers) })
              ] })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs35(Card, { children: [
        /* @__PURE__ */ jsx49(CardHeader, { children: /* @__PURE__ */ jsxs35(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx49(CheckCircle9, { className: "w-5 h-5" }),
          "Features"
        ] }) }),
        /* @__PURE__ */ jsxs35(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs35("div", { className: "flex gap-2", children: [
            /* @__PURE__ */ jsx49(
              Input,
              {
                value: newFeature,
                onChange: (e2) => setNewFeature(e2.target.value),
                placeholder: "Add a feature...",
                onKeyPress: (e2) => e2.key === "Enter" && (e2.preventDefault(), addFeature())
              }
            ),
            /* @__PURE__ */ jsx49(Button2, { type: "button", onClick: addFeature, disabled: !newFeature.trim(), children: /* @__PURE__ */ jsx49(Plus3, { className: "w-4 h-4" }) })
          ] }),
          formData.features.length > 0 && /* @__PURE__ */ jsxs35("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx49("div", { className: "text-sm font-medium text-text-primary", children: "Plan Features:" }),
            /* @__PURE__ */ jsx49("div", { className: "space-y-2", children: formData.features.map((feature, index) => /* @__PURE__ */ jsxs35("div", { className: "flex items-center justify-between bg-bg-secondary p-3 rounded-lg", children: [
              /* @__PURE__ */ jsxs35("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ jsx49(CheckCircle9, { className: "w-4 h-4 text-action-success" }),
                /* @__PURE__ */ jsx49("span", { className: "text-sm text-text-primary", children: feature })
              ] }),
              /* @__PURE__ */ jsx49(
                Button2,
                {
                  type: "button",
                  variant: "ghost",
                  size: "sm",
                  onClick: () => removeFeature(index),
                  className: "h-8 w-8 p-0",
                  children: /* @__PURE__ */ jsx49(Trash23, { className: "w-4 h-4 text-text-tertiary" })
                }
              )
            ] }, index)) })
          ] })
        ] })
      ] }),
      !hideSubmitButton && /* @__PURE__ */ jsxs35("div", { className: "flex items-center justify-end space-x-4", children: [
        onCancel && /* @__PURE__ */ jsx49(Button2, { type: "button", variant: "outline", onClick: onCancel, disabled: isSubmitting, children: "Cancel" }),
        /* @__PURE__ */ jsx49(Button2, { type: "submit", disabled: isSubmitting || loading, children: isSubmitting ? /* @__PURE__ */ jsxs35(Fragment7, { children: [
          /* @__PURE__ */ jsx49("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }),
          "Saving..."
        ] }) : submitText })
      ] })
    ] })
  ] });
};

// src/components/forms/LoginForm.tsx
import { useState as useState22 } from "react";

// ../../node_modules/yup/index.esm.js
var import_property_expr = __toESM(require_property_expr());
var import_tiny_case = __toESM(require_tiny_case());
var import_toposort = __toESM(require_toposort());
var toString = Object.prototype.toString;
var errorToString = Error.prototype.toString;
var regExpToString = RegExp.prototype.toString;
var symbolToString = typeof Symbol !== "undefined" ? Symbol.prototype.toString : () => "";
var SYMBOL_REGEXP = /^Symbol\((.*)\)(.*)$/;
function printNumber(val) {
  if (val != +val)
    return "NaN";
  const isNegativeZero = val === 0 && 1 / val < 0;
  return isNegativeZero ? "-0" : "" + val;
}
function printSimpleValue(val, quoteStrings = false) {
  if (val == null || val === true || val === false)
    return "" + val;
  const typeOf = typeof val;
  if (typeOf === "number")
    return printNumber(val);
  if (typeOf === "string")
    return quoteStrings ? `"${val}"` : val;
  if (typeOf === "function")
    return "[Function " + (val.name || "anonymous") + "]";
  if (typeOf === "symbol")
    return symbolToString.call(val).replace(SYMBOL_REGEXP, "Symbol($1)");
  const tag = toString.call(val).slice(8, -1);
  if (tag === "Date")
    return isNaN(val.getTime()) ? "" + val : val.toISOString(val);
  if (tag === "Error" || val instanceof Error)
    return "[" + errorToString.call(val) + "]";
  if (tag === "RegExp")
    return regExpToString.call(val);
  return null;
}
function printValue(value, quoteStrings) {
  let result = printSimpleValue(value, quoteStrings);
  if (result !== null)
    return result;
  return JSON.stringify(value, function(key, value2) {
    let result2 = printSimpleValue(this[key], quoteStrings);
    if (result2 !== null)
      return result2;
    return value2;
  }, 2);
}
function toArray(value) {
  return value == null ? [] : [].concat(value);
}
var _Symbol$toStringTag;
var _Symbol$hasInstance;
var _Symbol$toStringTag2;
var strReg = /\$\{\s*(\w+)\s*\}/g;
_Symbol$toStringTag = Symbol.toStringTag;
var ValidationErrorNoStack = class {
  constructor(errorOrErrors, value, field, type) {
    this.name = void 0;
    this.message = void 0;
    this.value = void 0;
    this.path = void 0;
    this.type = void 0;
    this.params = void 0;
    this.errors = void 0;
    this.inner = void 0;
    this[_Symbol$toStringTag] = "Error";
    this.name = "ValidationError";
    this.value = value;
    this.path = field;
    this.type = type;
    this.errors = [];
    this.inner = [];
    toArray(errorOrErrors).forEach((err) => {
      if (ValidationError.isError(err)) {
        this.errors.push(...err.errors);
        const innerErrors = err.inner.length ? err.inner : [err];
        this.inner.push(...innerErrors);
      } else {
        this.errors.push(err);
      }
    });
    this.message = this.errors.length > 1 ? `${this.errors.length} errors occurred` : this.errors[0];
  }
};
_Symbol$hasInstance = Symbol.hasInstance;
_Symbol$toStringTag2 = Symbol.toStringTag;
var ValidationError = class _ValidationError extends Error {
  static formatError(message, params) {
    const path = params.label || params.path || "this";
    params = Object.assign({}, params, {
      path,
      originalPath: params.path
    });
    if (typeof message === "string")
      return message.replace(strReg, (_, key) => printValue(params[key]));
    if (typeof message === "function")
      return message(params);
    return message;
  }
  static isError(err) {
    return err && err.name === "ValidationError";
  }
  constructor(errorOrErrors, value, field, type, disableStack) {
    const errorNoStack = new ValidationErrorNoStack(errorOrErrors, value, field, type);
    if (disableStack) {
      return errorNoStack;
    }
    super();
    this.value = void 0;
    this.path = void 0;
    this.type = void 0;
    this.params = void 0;
    this.errors = [];
    this.inner = [];
    this[_Symbol$toStringTag2] = "Error";
    this.name = errorNoStack.name;
    this.message = errorNoStack.message;
    this.type = errorNoStack.type;
    this.value = errorNoStack.value;
    this.path = errorNoStack.path;
    this.errors = errorNoStack.errors;
    this.inner = errorNoStack.inner;
    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, _ValidationError);
    }
  }
  static [_Symbol$hasInstance](inst) {
    return ValidationErrorNoStack[Symbol.hasInstance](inst) || super[Symbol.hasInstance](inst);
  }
};
var mixed = {
  default: "${path} is invalid",
  required: "${path} is a required field",
  defined: "${path} must be defined",
  notNull: "${path} cannot be null",
  oneOf: "${path} must be one of the following values: ${values}",
  notOneOf: "${path} must not be one of the following values: ${values}",
  notType: ({
    path,
    type,
    value,
    originalValue
  }) => {
    const castMsg = originalValue != null && originalValue !== value ? ` (cast from the value \`${printValue(originalValue, true)}\`).` : ".";
    return type !== "mixed" ? `${path} must be a \`${type}\` type, but the final value was: \`${printValue(value, true)}\`` + castMsg : `${path} must match the configured type. The validated value was: \`${printValue(value, true)}\`` + castMsg;
  }
};
var string = {
  length: "${path} must be exactly ${length} characters",
  min: "${path} must be at least ${min} characters",
  max: "${path} must be at most ${max} characters",
  matches: '${path} must match the following: "${regex}"',
  email: "${path} must be a valid email",
  url: "${path} must be a valid URL",
  uuid: "${path} must be a valid UUID",
  datetime: "${path} must be a valid ISO date-time",
  datetime_precision: "${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",
  datetime_offset: '${path} must be a valid ISO date-time with UTC "Z" timezone',
  trim: "${path} must be a trimmed string",
  lowercase: "${path} must be a lowercase string",
  uppercase: "${path} must be a upper case string"
};
var number = {
  min: "${path} must be greater than or equal to ${min}",
  max: "${path} must be less than or equal to ${max}",
  lessThan: "${path} must be less than ${less}",
  moreThan: "${path} must be greater than ${more}",
  positive: "${path} must be a positive number",
  negative: "${path} must be a negative number",
  integer: "${path} must be an integer"
};
var date = {
  min: "${path} field must be later than ${min}",
  max: "${path} field must be at earlier than ${max}"
};
var boolean = {
  isValue: "${path} field must be ${value}"
};
var object = {
  noUnknown: "${path} field has unspecified keys: ${unknown}",
  exact: "${path} object contains unknown properties: ${properties}"
};
var array = {
  min: "${path} field must have at least ${min} items",
  max: "${path} field must have less than or equal to ${max} items",
  length: "${path} must have ${length} items"
};
var tuple = {
  notType: (params) => {
    const {
      path,
      value,
      spec
    } = params;
    const typeLen = spec.types.length;
    if (Array.isArray(value)) {
      if (value.length < typeLen)
        return `${path} tuple value has too few items, expected a length of ${typeLen} but got ${value.length} for value: \`${printValue(value, true)}\``;
      if (value.length > typeLen)
        return `${path} tuple value has too many items, expected a length of ${typeLen} but got ${value.length} for value: \`${printValue(value, true)}\``;
    }
    return ValidationError.formatError(mixed.notType, params);
  }
};
var locale = Object.assign(/* @__PURE__ */ Object.create(null), {
  mixed,
  string,
  number,
  date,
  object,
  array,
  boolean,
  tuple
});
var isSchema = (obj) => obj && obj.__isYupSchema__;
var Condition = class _Condition {
  static fromOptions(refs, config) {
    if (!config.then && !config.otherwise)
      throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");
    let {
      is,
      then,
      otherwise
    } = config;
    let check = typeof is === "function" ? is : (...values) => values.every((value) => value === is);
    return new _Condition(refs, (values, schema) => {
      var _branch;
      let branch = check(...values) ? then : otherwise;
      return (_branch = branch == null ? void 0 : branch(schema)) != null ? _branch : schema;
    });
  }
  constructor(refs, builder) {
    this.fn = void 0;
    this.refs = refs;
    this.refs = refs;
    this.fn = builder;
  }
  resolve(base, options) {
    let values = this.refs.map((ref) => (
      // TODO: ? operator here?
      ref.getValue(options == null ? void 0 : options.value, options == null ? void 0 : options.parent, options == null ? void 0 : options.context)
    ));
    let schema = this.fn(values, base, options);
    if (schema === void 0 || // @ts-ignore this can be base
    schema === base) {
      return base;
    }
    if (!isSchema(schema))
      throw new TypeError("conditions must return a schema object");
    return schema.resolve(options);
  }
};
var prefixes = {
  context: "$",
  value: "."
};
function create$9(key, options) {
  return new Reference(key, options);
}
var Reference = class {
  constructor(key, options = {}) {
    this.key = void 0;
    this.isContext = void 0;
    this.isValue = void 0;
    this.isSibling = void 0;
    this.path = void 0;
    this.getter = void 0;
    this.map = void 0;
    if (typeof key !== "string")
      throw new TypeError("ref must be a string, got: " + key);
    this.key = key.trim();
    if (key === "")
      throw new TypeError("ref must be a non-empty string");
    this.isContext = this.key[0] === prefixes.context;
    this.isValue = this.key[0] === prefixes.value;
    this.isSibling = !this.isContext && !this.isValue;
    let prefix = this.isContext ? prefixes.context : this.isValue ? prefixes.value : "";
    this.path = this.key.slice(prefix.length);
    this.getter = this.path && (0, import_property_expr.getter)(this.path, true);
    this.map = options.map;
  }
  getValue(value, parent, context) {
    let result = this.isContext ? context : this.isValue ? value : parent;
    if (this.getter)
      result = this.getter(result || {});
    if (this.map)
      result = this.map(result);
    return result;
  }
  /**
   *
   * @param {*} value
   * @param {Object} options
   * @param {Object=} options.context
   * @param {Object=} options.parent
   */
  cast(value, options) {
    return this.getValue(value, options == null ? void 0 : options.parent, options == null ? void 0 : options.context);
  }
  resolve() {
    return this;
  }
  describe() {
    return {
      type: "ref",
      key: this.key
    };
  }
  toString() {
    return `Ref(${this.key})`;
  }
  static isRef(value) {
    return value && value.__isYupRef;
  }
};
Reference.prototype.__isYupRef = true;
var isAbsent = (value) => value == null;
function createValidation(config) {
  function validate({
    value,
    path = "",
    options,
    originalValue,
    schema
  }, panic, next) {
    const {
      name,
      test,
      params,
      message,
      skipAbsent
    } = config;
    let {
      parent,
      context,
      abortEarly = schema.spec.abortEarly,
      disableStackTrace = schema.spec.disableStackTrace
    } = options;
    const resolveOptions = {
      value,
      parent,
      context
    };
    function createError(overrides = {}) {
      const nextParams = resolveParams(Object.assign({
        value,
        originalValue,
        label: schema.spec.label,
        path: overrides.path || path,
        spec: schema.spec,
        disableStackTrace: overrides.disableStackTrace || disableStackTrace
      }, params, overrides.params), resolveOptions);
      const error2 = new ValidationError(ValidationError.formatError(overrides.message || message, nextParams), value, nextParams.path, overrides.type || name, nextParams.disableStackTrace);
      error2.params = nextParams;
      return error2;
    }
    const invalid = abortEarly ? panic : next;
    let ctx = {
      path,
      parent,
      type: name,
      from: options.from,
      createError,
      resolve(item) {
        return resolveMaybeRef(item, resolveOptions);
      },
      options,
      originalValue,
      schema
    };
    const handleResult = (validOrError) => {
      if (ValidationError.isError(validOrError))
        invalid(validOrError);
      else if (!validOrError)
        invalid(createError());
      else
        next(null);
    };
    const handleError = (err) => {
      if (ValidationError.isError(err))
        invalid(err);
      else
        panic(err);
    };
    const shouldSkip = skipAbsent && isAbsent(value);
    if (shouldSkip) {
      return handleResult(true);
    }
    let result;
    try {
      var _result;
      result = test.call(ctx, value, ctx);
      if (typeof ((_result = result) == null ? void 0 : _result.then) === "function") {
        if (options.sync) {
          throw new Error(`Validation test of type: "${ctx.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);
        }
        return Promise.resolve(result).then(handleResult, handleError);
      }
    } catch (err) {
      handleError(err);
      return;
    }
    handleResult(result);
  }
  validate.OPTIONS = config;
  return validate;
}
function resolveParams(params, options) {
  if (!params)
    return params;
  for (const key of Object.keys(params)) {
    params[key] = resolveMaybeRef(params[key], options);
  }
  return params;
}
function resolveMaybeRef(item, options) {
  return Reference.isRef(item) ? item.getValue(options.value, options.parent, options.context) : item;
}
function getIn(schema, path, value, context = value) {
  let parent, lastPart, lastPartDebug;
  if (!path)
    return {
      parent,
      parentPath: path,
      schema
    };
  (0, import_property_expr.forEach)(path, (_part, isBracket, isArray2) => {
    let part = isBracket ? _part.slice(1, _part.length - 1) : _part;
    schema = schema.resolve({
      context,
      parent,
      value
    });
    let isTuple = schema.type === "tuple";
    let idx = isArray2 ? parseInt(part, 10) : 0;
    if (schema.innerType || isTuple) {
      if (isTuple && !isArray2)
        throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${lastPartDebug}" must contain an index to the tuple element, e.g. "${lastPartDebug}[0]"`);
      if (value && idx >= value.length) {
        throw new Error(`Yup.reach cannot resolve an array item at index: ${_part}, in the path: ${path}. because there is no value at that index. `);
      }
      parent = value;
      value = value && value[idx];
      schema = isTuple ? schema.spec.types[idx] : schema.innerType;
    }
    if (!isArray2) {
      if (!schema.fields || !schema.fields[part])
        throw new Error(`The schema does not contain the path: ${path}. (failed at: ${lastPartDebug} which is a type: "${schema.type}")`);
      parent = value;
      value = value && value[part];
      schema = schema.fields[part];
    }
    lastPart = part;
    lastPartDebug = isBracket ? "[" + _part + "]" : "." + _part;
  });
  return {
    schema,
    parent,
    parentPath: lastPart
  };
}
var ReferenceSet = class _ReferenceSet extends Set {
  describe() {
    const description = [];
    for (const item of this.values()) {
      description.push(Reference.isRef(item) ? item.describe() : item);
    }
    return description;
  }
  resolveAll(resolve) {
    let result = [];
    for (const item of this.values()) {
      result.push(resolve(item));
    }
    return result;
  }
  clone() {
    return new _ReferenceSet(this.values());
  }
  merge(newItems, removeItems) {
    const next = this.clone();
    newItems.forEach((value) => next.add(value));
    removeItems.forEach((value) => next.delete(value));
    return next;
  }
};
function clone(src, seen = /* @__PURE__ */ new Map()) {
  if (isSchema(src) || !src || typeof src !== "object")
    return src;
  if (seen.has(src))
    return seen.get(src);
  let copy;
  if (src instanceof Date) {
    copy = new Date(src.getTime());
    seen.set(src, copy);
  } else if (src instanceof RegExp) {
    copy = new RegExp(src);
    seen.set(src, copy);
  } else if (Array.isArray(src)) {
    copy = new Array(src.length);
    seen.set(src, copy);
    for (let i = 0; i < src.length; i++)
      copy[i] = clone(src[i], seen);
  } else if (src instanceof Map) {
    copy = /* @__PURE__ */ new Map();
    seen.set(src, copy);
    for (const [k2, v2] of src.entries())
      copy.set(k2, clone(v2, seen));
  } else if (src instanceof Set) {
    copy = /* @__PURE__ */ new Set();
    seen.set(src, copy);
    for (const v2 of src)
      copy.add(clone(v2, seen));
  } else if (src instanceof Object) {
    copy = {};
    seen.set(src, copy);
    for (const [k2, v2] of Object.entries(src))
      copy[k2] = clone(v2, seen);
  } else {
    throw Error(`Unable to clone ${src}`);
  }
  return copy;
}
function createStandardPath(path) {
  if (!(path != null && path.length)) {
    return void 0;
  }
  const segments = [];
  let currentSegment = "";
  let inBrackets = false;
  let inQuotes = false;
  for (let i = 0; i < path.length; i++) {
    const char = path[i];
    if (char === "[" && !inQuotes) {
      if (currentSegment) {
        segments.push(...currentSegment.split(".").filter(Boolean));
        currentSegment = "";
      }
      inBrackets = true;
      continue;
    }
    if (char === "]" && !inQuotes) {
      if (currentSegment) {
        if (/^\d+$/.test(currentSegment)) {
          segments.push(currentSegment);
        } else {
          segments.push(currentSegment.replace(/^"|"$/g, ""));
        }
        currentSegment = "";
      }
      inBrackets = false;
      continue;
    }
    if (char === '"') {
      inQuotes = !inQuotes;
      continue;
    }
    if (char === "." && !inBrackets && !inQuotes) {
      if (currentSegment) {
        segments.push(currentSegment);
        currentSegment = "";
      }
      continue;
    }
    currentSegment += char;
  }
  if (currentSegment) {
    segments.push(...currentSegment.split(".").filter(Boolean));
  }
  return segments;
}
function createStandardIssues(error2, parentPath) {
  const path = parentPath ? `${parentPath}.${error2.path}` : error2.path;
  return error2.errors.map((err) => ({
    message: err,
    path: createStandardPath(path)
  }));
}
function issuesFromValidationError(error2, parentPath) {
  var _error$inner;
  if (!((_error$inner = error2.inner) != null && _error$inner.length) && error2.errors.length) {
    return createStandardIssues(error2, parentPath);
  }
  const path = parentPath ? `${parentPath}.${error2.path}` : error2.path;
  return error2.inner.flatMap((err) => issuesFromValidationError(err, path));
}
var Schema = class {
  constructor(options) {
    this.type = void 0;
    this.deps = [];
    this.tests = void 0;
    this.transforms = void 0;
    this.conditions = [];
    this._mutate = void 0;
    this.internalTests = {};
    this._whitelist = new ReferenceSet();
    this._blacklist = new ReferenceSet();
    this.exclusiveTests = /* @__PURE__ */ Object.create(null);
    this._typeCheck = void 0;
    this.spec = void 0;
    this.tests = [];
    this.transforms = [];
    this.withMutation(() => {
      this.typeError(mixed.notType);
    });
    this.type = options.type;
    this._typeCheck = options.check;
    this.spec = Object.assign({
      strip: false,
      strict: false,
      abortEarly: true,
      recursive: true,
      disableStackTrace: false,
      nullable: false,
      optional: true,
      coerce: true
    }, options == null ? void 0 : options.spec);
    this.withMutation((s) => {
      s.nonNullable();
    });
  }
  // TODO: remove
  get _type() {
    return this.type;
  }
  clone(spec) {
    if (this._mutate) {
      if (spec)
        Object.assign(this.spec, spec);
      return this;
    }
    const next = Object.create(Object.getPrototypeOf(this));
    next.type = this.type;
    next._typeCheck = this._typeCheck;
    next._whitelist = this._whitelist.clone();
    next._blacklist = this._blacklist.clone();
    next.internalTests = Object.assign({}, this.internalTests);
    next.exclusiveTests = Object.assign({}, this.exclusiveTests);
    next.deps = [...this.deps];
    next.conditions = [...this.conditions];
    next.tests = [...this.tests];
    next.transforms = [...this.transforms];
    next.spec = clone(Object.assign({}, this.spec, spec));
    return next;
  }
  label(label) {
    let next = this.clone();
    next.spec.label = label;
    return next;
  }
  meta(...args) {
    if (args.length === 0)
      return this.spec.meta;
    let next = this.clone();
    next.spec.meta = Object.assign(next.spec.meta || {}, args[0]);
    return next;
  }
  withMutation(fn) {
    let before = this._mutate;
    this._mutate = true;
    let result = fn(this);
    this._mutate = before;
    return result;
  }
  concat(schema) {
    if (!schema || schema === this)
      return this;
    if (schema.type !== this.type && this.type !== "mixed")
      throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${schema.type}`);
    let base = this;
    let combined = schema.clone();
    const mergedSpec = Object.assign({}, base.spec, combined.spec);
    combined.spec = mergedSpec;
    combined.internalTests = Object.assign({}, base.internalTests, combined.internalTests);
    combined._whitelist = base._whitelist.merge(schema._whitelist, schema._blacklist);
    combined._blacklist = base._blacklist.merge(schema._blacklist, schema._whitelist);
    combined.tests = base.tests;
    combined.exclusiveTests = base.exclusiveTests;
    combined.withMutation((next) => {
      schema.tests.forEach((fn) => {
        next.test(fn.OPTIONS);
      });
    });
    combined.transforms = [...base.transforms, ...combined.transforms];
    return combined;
  }
  isType(v2) {
    if (v2 == null) {
      if (this.spec.nullable && v2 === null)
        return true;
      if (this.spec.optional && v2 === void 0)
        return true;
      return false;
    }
    return this._typeCheck(v2);
  }
  resolve(options) {
    let schema = this;
    if (schema.conditions.length) {
      let conditions = schema.conditions;
      schema = schema.clone();
      schema.conditions = [];
      schema = conditions.reduce((prevSchema, condition) => condition.resolve(prevSchema, options), schema);
      schema = schema.resolve(options);
    }
    return schema;
  }
  resolveOptions(options) {
    var _options$strict, _options$abortEarly, _options$recursive, _options$disableStack;
    return Object.assign({}, options, {
      from: options.from || [],
      strict: (_options$strict = options.strict) != null ? _options$strict : this.spec.strict,
      abortEarly: (_options$abortEarly = options.abortEarly) != null ? _options$abortEarly : this.spec.abortEarly,
      recursive: (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive,
      disableStackTrace: (_options$disableStack = options.disableStackTrace) != null ? _options$disableStack : this.spec.disableStackTrace
    });
  }
  /**
   * Run the configured transform pipeline over an input value.
   */
  cast(value, options = {}) {
    let resolvedSchema = this.resolve(Object.assign({}, options, {
      value
      // parent: options.parent,
      // context: options.context,
    }));
    let allowOptionality = options.assert === "ignore-optionality";
    let result = resolvedSchema._cast(value, options);
    if (options.assert !== false && !resolvedSchema.isType(result)) {
      if (allowOptionality && isAbsent(result)) {
        return result;
      }
      let formattedValue = printValue(value);
      let formattedResult = printValue(result);
      throw new TypeError(`The value of ${options.path || "field"} could not be cast to a value that satisfies the schema type: "${resolvedSchema.type}". 

attempted value: ${formattedValue} 
` + (formattedResult !== formattedValue ? `result of cast: ${formattedResult}` : ""));
    }
    return result;
  }
  _cast(rawValue, options) {
    let value = rawValue === void 0 ? rawValue : this.transforms.reduce((prevValue, fn) => fn.call(this, prevValue, rawValue, this, options), rawValue);
    if (value === void 0) {
      value = this.getDefault(options);
    }
    return value;
  }
  _validate(_value, options = {}, panic, next) {
    let {
      path,
      originalValue = _value,
      strict = this.spec.strict
    } = options;
    let value = _value;
    if (!strict) {
      value = this._cast(value, Object.assign({
        assert: false
      }, options));
    }
    let initialTests = [];
    for (let test of Object.values(this.internalTests)) {
      if (test)
        initialTests.push(test);
    }
    this.runTests({
      path,
      value,
      originalValue,
      options,
      tests: initialTests
    }, panic, (initialErrors) => {
      if (initialErrors.length) {
        return next(initialErrors, value);
      }
      this.runTests({
        path,
        value,
        originalValue,
        options,
        tests: this.tests
      }, panic, next);
    });
  }
  /**
   * Executes a set of validations, either schema, produced Tests or a nested
   * schema validate result.
   */
  runTests(runOptions, panic, next) {
    let fired = false;
    let {
      tests,
      value,
      originalValue,
      path,
      options
    } = runOptions;
    let panicOnce = (arg) => {
      if (fired)
        return;
      fired = true;
      panic(arg, value);
    };
    let nextOnce = (arg) => {
      if (fired)
        return;
      fired = true;
      next(arg, value);
    };
    let count = tests.length;
    let nestedErrors = [];
    if (!count)
      return nextOnce([]);
    let args = {
      value,
      originalValue,
      path,
      options,
      schema: this
    };
    for (let i = 0; i < tests.length; i++) {
      const test = tests[i];
      test(args, panicOnce, function finishTestRun(err) {
        if (err) {
          Array.isArray(err) ? nestedErrors.push(...err) : nestedErrors.push(err);
        }
        if (--count <= 0) {
          nextOnce(nestedErrors);
        }
      });
    }
  }
  asNestedTest({
    key,
    index,
    parent,
    parentPath,
    originalParent,
    options
  }) {
    const k2 = key != null ? key : index;
    if (k2 == null) {
      throw TypeError("Must include `key` or `index` for nested validations");
    }
    const isIndex2 = typeof k2 === "number";
    let value = parent[k2];
    const testOptions = Object.assign({}, options, {
      // Nested validations fields are always strict:
      //    1. parent isn't strict so the casting will also have cast inner values
      //    2. parent is strict in which case the nested values weren't cast either
      strict: true,
      parent,
      value,
      originalValue: originalParent[k2],
      // FIXME: tests depend on `index` being passed around deeply,
      //   we should not let the options.key/index bleed through
      key: void 0,
      // index: undefined,
      [isIndex2 ? "index" : "key"]: k2,
      path: isIndex2 || k2.includes(".") ? `${parentPath || ""}[${isIndex2 ? k2 : `"${k2}"`}]` : (parentPath ? `${parentPath}.` : "") + key
    });
    return (_, panic, next) => this.resolve(testOptions)._validate(value, testOptions, panic, next);
  }
  validate(value, options) {
    var _options$disableStack2;
    let schema = this.resolve(Object.assign({}, options, {
      value
    }));
    let disableStackTrace = (_options$disableStack2 = options == null ? void 0 : options.disableStackTrace) != null ? _options$disableStack2 : schema.spec.disableStackTrace;
    return new Promise((resolve, reject) => schema._validate(value, options, (error2, parsed) => {
      if (ValidationError.isError(error2))
        error2.value = parsed;
      reject(error2);
    }, (errors, validated) => {
      if (errors.length)
        reject(new ValidationError(errors, validated, void 0, void 0, disableStackTrace));
      else
        resolve(validated);
    }));
  }
  validateSync(value, options) {
    var _options$disableStack3;
    let schema = this.resolve(Object.assign({}, options, {
      value
    }));
    let result;
    let disableStackTrace = (_options$disableStack3 = options == null ? void 0 : options.disableStackTrace) != null ? _options$disableStack3 : schema.spec.disableStackTrace;
    schema._validate(value, Object.assign({}, options, {
      sync: true
    }), (error2, parsed) => {
      if (ValidationError.isError(error2))
        error2.value = parsed;
      throw error2;
    }, (errors, validated) => {
      if (errors.length)
        throw new ValidationError(errors, value, void 0, void 0, disableStackTrace);
      result = validated;
    });
    return result;
  }
  isValid(value, options) {
    return this.validate(value, options).then(() => true, (err) => {
      if (ValidationError.isError(err))
        return false;
      throw err;
    });
  }
  isValidSync(value, options) {
    try {
      this.validateSync(value, options);
      return true;
    } catch (err) {
      if (ValidationError.isError(err))
        return false;
      throw err;
    }
  }
  _getDefault(options) {
    let defaultValue = this.spec.default;
    if (defaultValue == null) {
      return defaultValue;
    }
    return typeof defaultValue === "function" ? defaultValue.call(this, options) : clone(defaultValue);
  }
  getDefault(options) {
    let schema = this.resolve(options || {});
    return schema._getDefault(options);
  }
  default(def) {
    if (arguments.length === 0) {
      return this._getDefault();
    }
    let next = this.clone({
      default: def
    });
    return next;
  }
  strict(isStrict = true) {
    return this.clone({
      strict: isStrict
    });
  }
  nullability(nullable, message) {
    const next = this.clone({
      nullable
    });
    next.internalTests.nullable = createValidation({
      message,
      name: "nullable",
      test(value) {
        return value === null ? this.schema.spec.nullable : true;
      }
    });
    return next;
  }
  optionality(optional, message) {
    const next = this.clone({
      optional
    });
    next.internalTests.optionality = createValidation({
      message,
      name: "optionality",
      test(value) {
        return value === void 0 ? this.schema.spec.optional : true;
      }
    });
    return next;
  }
  optional() {
    return this.optionality(true);
  }
  defined(message = mixed.defined) {
    return this.optionality(false, message);
  }
  nullable() {
    return this.nullability(true);
  }
  nonNullable(message = mixed.notNull) {
    return this.nullability(false, message);
  }
  required(message = mixed.required) {
    return this.clone().withMutation((next) => next.nonNullable(message).defined(message));
  }
  notRequired() {
    return this.clone().withMutation((next) => next.nullable().optional());
  }
  transform(fn) {
    let next = this.clone();
    next.transforms.push(fn);
    return next;
  }
  /**
   * Adds a test function to the schema's queue of tests.
   * tests can be exclusive or non-exclusive.
   *
   * - exclusive tests, will replace any existing tests of the same name.
   * - non-exclusive: can be stacked
   *
   * If a non-exclusive test is added to a schema with an exclusive test of the same name
   * the exclusive test is removed and further tests of the same name will be stacked.
   *
   * If an exclusive test is added to a schema with non-exclusive tests of the same name
   * the previous tests are removed and further tests of the same name will replace each other.
   */
  test(...args) {
    let opts;
    if (args.length === 1) {
      if (typeof args[0] === "function") {
        opts = {
          test: args[0]
        };
      } else {
        opts = args[0];
      }
    } else if (args.length === 2) {
      opts = {
        name: args[0],
        test: args[1]
      };
    } else {
      opts = {
        name: args[0],
        message: args[1],
        test: args[2]
      };
    }
    if (opts.message === void 0)
      opts.message = mixed.default;
    if (typeof opts.test !== "function")
      throw new TypeError("`test` is a required parameters");
    let next = this.clone();
    let validate = createValidation(opts);
    let isExclusive = opts.exclusive || opts.name && next.exclusiveTests[opts.name] === true;
    if (opts.exclusive) {
      if (!opts.name)
        throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");
    }
    if (opts.name)
      next.exclusiveTests[opts.name] = !!opts.exclusive;
    next.tests = next.tests.filter((fn) => {
      if (fn.OPTIONS.name === opts.name) {
        if (isExclusive)
          return false;
        if (fn.OPTIONS.test === validate.OPTIONS.test)
          return false;
      }
      return true;
    });
    next.tests.push(validate);
    return next;
  }
  when(keys2, options) {
    if (!Array.isArray(keys2) && typeof keys2 !== "string") {
      options = keys2;
      keys2 = ".";
    }
    let next = this.clone();
    let deps = toArray(keys2).map((key) => new Reference(key));
    deps.forEach((dep) => {
      if (dep.isSibling)
        next.deps.push(dep.key);
    });
    next.conditions.push(typeof options === "function" ? new Condition(deps, options) : Condition.fromOptions(deps, options));
    return next;
  }
  typeError(message) {
    let next = this.clone();
    next.internalTests.typeError = createValidation({
      message,
      name: "typeError",
      skipAbsent: true,
      test(value) {
        if (!this.schema._typeCheck(value))
          return this.createError({
            params: {
              type: this.schema.type
            }
          });
        return true;
      }
    });
    return next;
  }
  oneOf(enums, message = mixed.oneOf) {
    let next = this.clone();
    enums.forEach((val) => {
      next._whitelist.add(val);
      next._blacklist.delete(val);
    });
    next.internalTests.whiteList = createValidation({
      message,
      name: "oneOf",
      skipAbsent: true,
      test(value) {
        let valids = this.schema._whitelist;
        let resolved = valids.resolveAll(this.resolve);
        return resolved.includes(value) ? true : this.createError({
          params: {
            values: Array.from(valids).join(", "),
            resolved
          }
        });
      }
    });
    return next;
  }
  notOneOf(enums, message = mixed.notOneOf) {
    let next = this.clone();
    enums.forEach((val) => {
      next._blacklist.add(val);
      next._whitelist.delete(val);
    });
    next.internalTests.blacklist = createValidation({
      message,
      name: "notOneOf",
      test(value) {
        let invalids = this.schema._blacklist;
        let resolved = invalids.resolveAll(this.resolve);
        if (resolved.includes(value))
          return this.createError({
            params: {
              values: Array.from(invalids).join(", "),
              resolved
            }
          });
        return true;
      }
    });
    return next;
  }
  strip(strip = true) {
    let next = this.clone();
    next.spec.strip = strip;
    return next;
  }
  /**
   * Return a serialized description of the schema including validations, flags, types etc.
   *
   * @param options Provide any needed context for resolving runtime schema alterations (lazy, when conditions, etc).
   */
  describe(options) {
    const next = (options ? this.resolve(options) : this).clone();
    const {
      label,
      meta,
      optional,
      nullable
    } = next.spec;
    const description = {
      meta,
      label,
      optional,
      nullable,
      default: next.getDefault(options),
      type: next.type,
      oneOf: next._whitelist.describe(),
      notOneOf: next._blacklist.describe(),
      tests: next.tests.filter((n2, idx, list) => list.findIndex((c) => c.OPTIONS.name === n2.OPTIONS.name) === idx).map((fn) => {
        const params = fn.OPTIONS.params && options ? resolveParams(Object.assign({}, fn.OPTIONS.params), options) : fn.OPTIONS.params;
        return {
          name: fn.OPTIONS.name,
          params
        };
      })
    };
    return description;
  }
  get ["~standard"]() {
    const schema = this;
    const standard = {
      version: 1,
      vendor: "yup",
      async validate(value) {
        try {
          const result = await schema.validate(value, {
            abortEarly: false
          });
          return {
            value: result
          };
        } catch (err) {
          if (err instanceof ValidationError) {
            return {
              issues: issuesFromValidationError(err)
            };
          }
          throw err;
        }
      }
    };
    return standard;
  }
};
Schema.prototype.__isYupSchema__ = true;
for (const method of ["validate", "validateSync"])
  Schema.prototype[`${method}At`] = function(path, value, options = {}) {
    const {
      parent,
      parentPath,
      schema
    } = getIn(this, path, value, options.context);
    return schema[method](parent && parent[parentPath], Object.assign({}, options, {
      parent,
      path
    }));
  };
for (const alias of ["equals", "is"])
  Schema.prototype[alias] = Schema.prototype.oneOf;
for (const alias of ["not", "nope"])
  Schema.prototype[alias] = Schema.prototype.notOneOf;
var returnsTrue = () => true;
function create$8(spec) {
  return new MixedSchema(spec);
}
var MixedSchema = class extends Schema {
  constructor(spec) {
    super(typeof spec === "function" ? {
      type: "mixed",
      check: spec
    } : Object.assign({
      type: "mixed",
      check: returnsTrue
    }, spec));
  }
};
create$8.prototype = MixedSchema.prototype;
function create$7() {
  return new BooleanSchema();
}
var BooleanSchema = class extends Schema {
  constructor() {
    super({
      type: "boolean",
      check(v2) {
        if (v2 instanceof Boolean)
          v2 = v2.valueOf();
        return typeof v2 === "boolean";
      }
    });
    this.withMutation(() => {
      this.transform((value, _raw) => {
        if (this.spec.coerce && !this.isType(value)) {
          if (/^(true|1)$/i.test(String(value)))
            return true;
          if (/^(false|0)$/i.test(String(value)))
            return false;
        }
        return value;
      });
    });
  }
  isTrue(message = boolean.isValue) {
    return this.test({
      message,
      name: "is-value",
      exclusive: true,
      params: {
        value: "true"
      },
      test(value) {
        return isAbsent(value) || value === true;
      }
    });
  }
  isFalse(message = boolean.isValue) {
    return this.test({
      message,
      name: "is-value",
      exclusive: true,
      params: {
        value: "false"
      },
      test(value) {
        return isAbsent(value) || value === false;
      }
    });
  }
  default(def) {
    return super.default(def);
  }
  defined(msg) {
    return super.defined(msg);
  }
  optional() {
    return super.optional();
  }
  required(msg) {
    return super.required(msg);
  }
  notRequired() {
    return super.notRequired();
  }
  nullable() {
    return super.nullable();
  }
  nonNullable(msg) {
    return super.nonNullable(msg);
  }
  strip(v2) {
    return super.strip(v2);
  }
};
create$7.prototype = BooleanSchema.prototype;
var isoReg = /^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;
function parseIsoDate(date2) {
  const struct = parseDateStruct(date2);
  if (!struct)
    return Date.parse ? Date.parse(date2) : Number.NaN;
  if (struct.z === void 0 && struct.plusMinus === void 0) {
    return new Date(struct.year, struct.month, struct.day, struct.hour, struct.minute, struct.second, struct.millisecond).valueOf();
  }
  let totalMinutesOffset = 0;
  if (struct.z !== "Z" && struct.plusMinus !== void 0) {
    totalMinutesOffset = struct.hourOffset * 60 + struct.minuteOffset;
    if (struct.plusMinus === "+")
      totalMinutesOffset = 0 - totalMinutesOffset;
  }
  return Date.UTC(struct.year, struct.month, struct.day, struct.hour, struct.minute + totalMinutesOffset, struct.second, struct.millisecond);
}
function parseDateStruct(date2) {
  var _regexResult$7$length, _regexResult$;
  const regexResult = isoReg.exec(date2);
  if (!regexResult)
    return null;
  return {
    year: toNumber(regexResult[1]),
    month: toNumber(regexResult[2], 1) - 1,
    day: toNumber(regexResult[3], 1),
    hour: toNumber(regexResult[4]),
    minute: toNumber(regexResult[5]),
    second: toNumber(regexResult[6]),
    millisecond: regexResult[7] ? (
      // allow arbitrary sub-second precision beyond milliseconds
      toNumber(regexResult[7].substring(0, 3))
    ) : 0,
    precision: (_regexResult$7$length = (_regexResult$ = regexResult[7]) == null ? void 0 : _regexResult$.length) != null ? _regexResult$7$length : void 0,
    z: regexResult[8] || void 0,
    plusMinus: regexResult[9] || void 0,
    hourOffset: toNumber(regexResult[10]),
    minuteOffset: toNumber(regexResult[11])
  };
}
function toNumber(str, defaultValue = 0) {
  return Number(str) || defaultValue;
}
var rEmail = (
  // eslint-disable-next-line
  /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/
);
var rUrl = (
  // eslint-disable-next-line
  /^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i
);
var rUUID = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
var yearMonthDay = "^\\d{4}-\\d{2}-\\d{2}";
var hourMinuteSecond = "\\d{2}:\\d{2}:\\d{2}";
var zOrOffset = "(([+-]\\d{2}(:?\\d{2})?)|Z)";
var rIsoDateTime = new RegExp(`${yearMonthDay}T${hourMinuteSecond}(\\.\\d+)?${zOrOffset}$`);
var isTrimmed = (value) => isAbsent(value) || value === value.trim();
var objStringTag = {}.toString();
function create$6() {
  return new StringSchema();
}
var StringSchema = class extends Schema {
  constructor() {
    super({
      type: "string",
      check(value) {
        if (value instanceof String)
          value = value.valueOf();
        return typeof value === "string";
      }
    });
    this.withMutation(() => {
      this.transform((value, _raw) => {
        if (!this.spec.coerce || this.isType(value))
          return value;
        if (Array.isArray(value))
          return value;
        const strValue = value != null && value.toString ? value.toString() : value;
        if (strValue === objStringTag)
          return value;
        return strValue;
      });
    });
  }
  required(message) {
    return super.required(message).withMutation((schema) => schema.test({
      message: message || mixed.required,
      name: "required",
      skipAbsent: true,
      test: (value) => !!value.length
    }));
  }
  notRequired() {
    return super.notRequired().withMutation((schema) => {
      schema.tests = schema.tests.filter((t2) => t2.OPTIONS.name !== "required");
      return schema;
    });
  }
  length(length, message = string.length) {
    return this.test({
      message,
      name: "length",
      exclusive: true,
      params: {
        length
      },
      skipAbsent: true,
      test(value) {
        return value.length === this.resolve(length);
      }
    });
  }
  min(min, message = string.min) {
    return this.test({
      message,
      name: "min",
      exclusive: true,
      params: {
        min
      },
      skipAbsent: true,
      test(value) {
        return value.length >= this.resolve(min);
      }
    });
  }
  max(max, message = string.max) {
    return this.test({
      name: "max",
      exclusive: true,
      message,
      params: {
        max
      },
      skipAbsent: true,
      test(value) {
        return value.length <= this.resolve(max);
      }
    });
  }
  matches(regex, options) {
    let excludeEmptyString = false;
    let message;
    let name;
    if (options) {
      if (typeof options === "object") {
        ({
          excludeEmptyString = false,
          message,
          name
        } = options);
      } else {
        message = options;
      }
    }
    return this.test({
      name: name || "matches",
      message: message || string.matches,
      params: {
        regex
      },
      skipAbsent: true,
      test: (value) => value === "" && excludeEmptyString || value.search(regex) !== -1
    });
  }
  email(message = string.email) {
    return this.matches(rEmail, {
      name: "email",
      message,
      excludeEmptyString: true
    });
  }
  url(message = string.url) {
    return this.matches(rUrl, {
      name: "url",
      message,
      excludeEmptyString: true
    });
  }
  uuid(message = string.uuid) {
    return this.matches(rUUID, {
      name: "uuid",
      message,
      excludeEmptyString: false
    });
  }
  datetime(options) {
    let message = "";
    let allowOffset;
    let precision;
    if (options) {
      if (typeof options === "object") {
        ({
          message = "",
          allowOffset = false,
          precision = void 0
        } = options);
      } else {
        message = options;
      }
    }
    return this.matches(rIsoDateTime, {
      name: "datetime",
      message: message || string.datetime,
      excludeEmptyString: true
    }).test({
      name: "datetime_offset",
      message: message || string.datetime_offset,
      params: {
        allowOffset
      },
      skipAbsent: true,
      test: (value) => {
        if (!value || allowOffset)
          return true;
        const struct = parseDateStruct(value);
        if (!struct)
          return false;
        return !!struct.z;
      }
    }).test({
      name: "datetime_precision",
      message: message || string.datetime_precision,
      params: {
        precision
      },
      skipAbsent: true,
      test: (value) => {
        if (!value || precision == void 0)
          return true;
        const struct = parseDateStruct(value);
        if (!struct)
          return false;
        return struct.precision === precision;
      }
    });
  }
  //-- transforms --
  ensure() {
    return this.default("").transform((val) => val === null ? "" : val);
  }
  trim(message = string.trim) {
    return this.transform((val) => val != null ? val.trim() : val).test({
      message,
      name: "trim",
      test: isTrimmed
    });
  }
  lowercase(message = string.lowercase) {
    return this.transform((value) => !isAbsent(value) ? value.toLowerCase() : value).test({
      message,
      name: "string_case",
      exclusive: true,
      skipAbsent: true,
      test: (value) => isAbsent(value) || value === value.toLowerCase()
    });
  }
  uppercase(message = string.uppercase) {
    return this.transform((value) => !isAbsent(value) ? value.toUpperCase() : value).test({
      message,
      name: "string_case",
      exclusive: true,
      skipAbsent: true,
      test: (value) => isAbsent(value) || value === value.toUpperCase()
    });
  }
};
create$6.prototype = StringSchema.prototype;
var isNaN$1 = (value) => value != +value;
function create$5() {
  return new NumberSchema();
}
var NumberSchema = class extends Schema {
  constructor() {
    super({
      type: "number",
      check(value) {
        if (value instanceof Number)
          value = value.valueOf();
        return typeof value === "number" && !isNaN$1(value);
      }
    });
    this.withMutation(() => {
      this.transform((value, _raw) => {
        if (!this.spec.coerce)
          return value;
        let parsed = value;
        if (typeof parsed === "string") {
          parsed = parsed.replace(/\s/g, "");
          if (parsed === "")
            return NaN;
          parsed = +parsed;
        }
        if (this.isType(parsed) || parsed === null)
          return parsed;
        return parseFloat(parsed);
      });
    });
  }
  min(min, message = number.min) {
    return this.test({
      message,
      name: "min",
      exclusive: true,
      params: {
        min
      },
      skipAbsent: true,
      test(value) {
        return value >= this.resolve(min);
      }
    });
  }
  max(max, message = number.max) {
    return this.test({
      message,
      name: "max",
      exclusive: true,
      params: {
        max
      },
      skipAbsent: true,
      test(value) {
        return value <= this.resolve(max);
      }
    });
  }
  lessThan(less, message = number.lessThan) {
    return this.test({
      message,
      name: "max",
      exclusive: true,
      params: {
        less
      },
      skipAbsent: true,
      test(value) {
        return value < this.resolve(less);
      }
    });
  }
  moreThan(more, message = number.moreThan) {
    return this.test({
      message,
      name: "min",
      exclusive: true,
      params: {
        more
      },
      skipAbsent: true,
      test(value) {
        return value > this.resolve(more);
      }
    });
  }
  positive(msg = number.positive) {
    return this.moreThan(0, msg);
  }
  negative(msg = number.negative) {
    return this.lessThan(0, msg);
  }
  integer(message = number.integer) {
    return this.test({
      name: "integer",
      message,
      skipAbsent: true,
      test: (val) => Number.isInteger(val)
    });
  }
  truncate() {
    return this.transform((value) => !isAbsent(value) ? value | 0 : value);
  }
  round(method) {
    var _method;
    let avail = ["ceil", "floor", "round", "trunc"];
    method = ((_method = method) == null ? void 0 : _method.toLowerCase()) || "round";
    if (method === "trunc")
      return this.truncate();
    if (avail.indexOf(method.toLowerCase()) === -1)
      throw new TypeError("Only valid options for round() are: " + avail.join(", "));
    return this.transform((value) => !isAbsent(value) ? Math[method](value) : value);
  }
};
create$5.prototype = NumberSchema.prototype;
var invalidDate = /* @__PURE__ */ new Date("");
var isDate = (obj) => Object.prototype.toString.call(obj) === "[object Date]";
function create$4() {
  return new DateSchema();
}
var DateSchema = class _DateSchema extends Schema {
  constructor() {
    super({
      type: "date",
      check(v2) {
        return isDate(v2) && !isNaN(v2.getTime());
      }
    });
    this.withMutation(() => {
      this.transform((value, _raw) => {
        if (!this.spec.coerce || this.isType(value) || value === null)
          return value;
        value = parseIsoDate(value);
        return !isNaN(value) ? new Date(value) : _DateSchema.INVALID_DATE;
      });
    });
  }
  prepareParam(ref, name) {
    let param;
    if (!Reference.isRef(ref)) {
      let cast = this.cast(ref);
      if (!this._typeCheck(cast))
        throw new TypeError(`\`${name}\` must be a Date or a value that can be \`cast()\` to a Date`);
      param = cast;
    } else {
      param = ref;
    }
    return param;
  }
  min(min, message = date.min) {
    let limit = this.prepareParam(min, "min");
    return this.test({
      message,
      name: "min",
      exclusive: true,
      params: {
        min
      },
      skipAbsent: true,
      test(value) {
        return value >= this.resolve(limit);
      }
    });
  }
  max(max, message = date.max) {
    let limit = this.prepareParam(max, "max");
    return this.test({
      message,
      name: "max",
      exclusive: true,
      params: {
        max
      },
      skipAbsent: true,
      test(value) {
        return value <= this.resolve(limit);
      }
    });
  }
};
DateSchema.INVALID_DATE = invalidDate;
create$4.prototype = DateSchema.prototype;
create$4.INVALID_DATE = invalidDate;
function sortFields(fields, excludedEdges = []) {
  let edges = [];
  let nodes = /* @__PURE__ */ new Set();
  let excludes = new Set(excludedEdges.map(([a, b]) => `${a}-${b}`));
  function addNode(depPath, key) {
    let node = (0, import_property_expr.split)(depPath)[0];
    nodes.add(node);
    if (!excludes.has(`${key}-${node}`))
      edges.push([key, node]);
  }
  for (const key of Object.keys(fields)) {
    let value = fields[key];
    nodes.add(key);
    if (Reference.isRef(value) && value.isSibling)
      addNode(value.path, key);
    else if (isSchema(value) && "deps" in value)
      value.deps.forEach((path) => addNode(path, key));
  }
  return import_toposort.default.array(Array.from(nodes), edges).reverse();
}
function findIndex(arr, err) {
  let idx = Infinity;
  arr.some((key, ii) => {
    var _err$path;
    if ((_err$path = err.path) != null && _err$path.includes(key)) {
      idx = ii;
      return true;
    }
  });
  return idx;
}
function sortByKeyOrder(keys2) {
  return (a, b) => {
    return findIndex(keys2, a) - findIndex(keys2, b);
  };
}
var parseJson = (value, _, schema) => {
  if (typeof value !== "string") {
    return value;
  }
  let parsed = value;
  try {
    parsed = JSON.parse(value);
  } catch (err) {
  }
  return schema.isType(parsed) ? parsed : value;
};
function deepPartial(schema) {
  if ("fields" in schema) {
    const partial = {};
    for (const [key, fieldSchema] of Object.entries(schema.fields)) {
      partial[key] = deepPartial(fieldSchema);
    }
    return schema.setFields(partial);
  }
  if (schema.type === "array") {
    const nextArray = schema.optional();
    if (nextArray.innerType)
      nextArray.innerType = deepPartial(nextArray.innerType);
    return nextArray;
  }
  if (schema.type === "tuple") {
    return schema.optional().clone({
      types: schema.spec.types.map(deepPartial)
    });
  }
  if ("optional" in schema) {
    return schema.optional();
  }
  return schema;
}
var deepHas = (obj, p2) => {
  const path = [...(0, import_property_expr.normalizePath)(p2)];
  if (path.length === 1)
    return path[0] in obj;
  let last = path.pop();
  let parent = (0, import_property_expr.getter)((0, import_property_expr.join)(path), true)(obj);
  return !!(parent && last in parent);
};
var isObject = (obj) => Object.prototype.toString.call(obj) === "[object Object]";
function unknown(ctx, value) {
  let known = Object.keys(ctx.fields);
  return Object.keys(value).filter((key) => known.indexOf(key) === -1);
}
var defaultSort = sortByKeyOrder([]);
function create$3(spec) {
  return new ObjectSchema(spec);
}
var ObjectSchema = class extends Schema {
  constructor(spec) {
    super({
      type: "object",
      check(value) {
        return isObject(value) || typeof value === "function";
      }
    });
    this.fields = /* @__PURE__ */ Object.create(null);
    this._sortErrors = defaultSort;
    this._nodes = [];
    this._excludedEdges = [];
    this.withMutation(() => {
      if (spec) {
        this.shape(spec);
      }
    });
  }
  _cast(_value, options = {}) {
    var _options$stripUnknown;
    let value = super._cast(_value, options);
    if (value === void 0)
      return this.getDefault(options);
    if (!this._typeCheck(value))
      return value;
    let fields = this.fields;
    let strip = (_options$stripUnknown = options.stripUnknown) != null ? _options$stripUnknown : this.spec.noUnknown;
    let props = [].concat(this._nodes, Object.keys(value).filter((v2) => !this._nodes.includes(v2)));
    let intermediateValue = {};
    let innerOptions = Object.assign({}, options, {
      parent: intermediateValue,
      __validating: options.__validating || false
    });
    let isChanged = false;
    for (const prop of props) {
      let field = fields[prop];
      let exists = prop in value;
      let inputValue = value[prop];
      if (field) {
        let fieldValue;
        innerOptions.path = (options.path ? `${options.path}.` : "") + prop;
        field = field.resolve({
          value: inputValue,
          context: options.context,
          parent: intermediateValue
        });
        let fieldSpec = field instanceof Schema ? field.spec : void 0;
        let strict = fieldSpec == null ? void 0 : fieldSpec.strict;
        if (fieldSpec != null && fieldSpec.strip) {
          isChanged = isChanged || prop in value;
          continue;
        }
        fieldValue = !options.__validating || !strict ? field.cast(inputValue, innerOptions) : inputValue;
        if (fieldValue !== void 0) {
          intermediateValue[prop] = fieldValue;
        }
      } else if (exists && !strip) {
        intermediateValue[prop] = inputValue;
      }
      if (exists !== prop in intermediateValue || intermediateValue[prop] !== inputValue) {
        isChanged = true;
      }
    }
    return isChanged ? intermediateValue : value;
  }
  _validate(_value, options = {}, panic, next) {
    let {
      from = [],
      originalValue = _value,
      recursive = this.spec.recursive
    } = options;
    options.from = [{
      schema: this,
      value: originalValue
    }, ...from];
    options.__validating = true;
    options.originalValue = originalValue;
    super._validate(_value, options, panic, (objectErrors, value) => {
      if (!recursive || !isObject(value)) {
        next(objectErrors, value);
        return;
      }
      originalValue = originalValue || value;
      let tests = [];
      for (let key of this._nodes) {
        let field = this.fields[key];
        if (!field || Reference.isRef(field)) {
          continue;
        }
        tests.push(field.asNestedTest({
          options,
          key,
          parent: value,
          parentPath: options.path,
          originalParent: originalValue
        }));
      }
      this.runTests({
        tests,
        value,
        originalValue,
        options
      }, panic, (fieldErrors) => {
        next(fieldErrors.sort(this._sortErrors).concat(objectErrors), value);
      });
    });
  }
  clone(spec) {
    const next = super.clone(spec);
    next.fields = Object.assign({}, this.fields);
    next._nodes = this._nodes;
    next._excludedEdges = this._excludedEdges;
    next._sortErrors = this._sortErrors;
    return next;
  }
  concat(schema) {
    let next = super.concat(schema);
    let nextFields = next.fields;
    for (let [field, schemaOrRef] of Object.entries(this.fields)) {
      const target = nextFields[field];
      nextFields[field] = target === void 0 ? schemaOrRef : target;
    }
    return next.withMutation((s) => (
      // XXX: excludes here is wrong
      s.setFields(nextFields, [...this._excludedEdges, ...schema._excludedEdges])
    ));
  }
  _getDefault(options) {
    if ("default" in this.spec) {
      return super._getDefault(options);
    }
    if (!this._nodes.length) {
      return void 0;
    }
    let dft = {};
    this._nodes.forEach((key) => {
      var _innerOptions;
      const field = this.fields[key];
      let innerOptions = options;
      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {
        innerOptions = Object.assign({}, innerOptions, {
          parent: innerOptions.value,
          value: innerOptions.value[key]
        });
      }
      dft[key] = field && "getDefault" in field ? field.getDefault(innerOptions) : void 0;
    });
    return dft;
  }
  setFields(shape, excludedEdges) {
    let next = this.clone();
    next.fields = shape;
    next._nodes = sortFields(shape, excludedEdges);
    next._sortErrors = sortByKeyOrder(Object.keys(shape));
    if (excludedEdges)
      next._excludedEdges = excludedEdges;
    return next;
  }
  shape(additions, excludes = []) {
    return this.clone().withMutation((next) => {
      let edges = next._excludedEdges;
      if (excludes.length) {
        if (!Array.isArray(excludes[0]))
          excludes = [excludes];
        edges = [...next._excludedEdges, ...excludes];
      }
      return next.setFields(Object.assign(next.fields, additions), edges);
    });
  }
  partial() {
    const partial = {};
    for (const [key, schema] of Object.entries(this.fields)) {
      partial[key] = "optional" in schema && schema.optional instanceof Function ? schema.optional() : schema;
    }
    return this.setFields(partial);
  }
  deepPartial() {
    const next = deepPartial(this);
    return next;
  }
  pick(keys2) {
    const picked = {};
    for (const key of keys2) {
      if (this.fields[key])
        picked[key] = this.fields[key];
    }
    return this.setFields(picked, this._excludedEdges.filter(([a, b]) => keys2.includes(a) && keys2.includes(b)));
  }
  omit(keys2) {
    const remaining = [];
    for (const key of Object.keys(this.fields)) {
      if (keys2.includes(key))
        continue;
      remaining.push(key);
    }
    return this.pick(remaining);
  }
  from(from, to, alias) {
    let fromGetter = (0, import_property_expr.getter)(from, true);
    return this.transform((obj) => {
      if (!obj)
        return obj;
      let newObj = obj;
      if (deepHas(obj, from)) {
        newObj = Object.assign({}, obj);
        if (!alias)
          delete newObj[from];
        newObj[to] = fromGetter(obj);
      }
      return newObj;
    });
  }
  /** Parse an input JSON string to an object */
  json() {
    return this.transform(parseJson);
  }
  /**
   * Similar to `noUnknown` but only validates that an object is the right shape without stripping the unknown keys
   */
  exact(message) {
    return this.test({
      name: "exact",
      exclusive: true,
      message: message || object.exact,
      test(value) {
        if (value == null)
          return true;
        const unknownKeys = unknown(this.schema, value);
        return unknownKeys.length === 0 || this.createError({
          params: {
            properties: unknownKeys.join(", ")
          }
        });
      }
    });
  }
  stripUnknown() {
    return this.clone({
      noUnknown: true
    });
  }
  noUnknown(noAllow = true, message = object.noUnknown) {
    if (typeof noAllow !== "boolean") {
      message = noAllow;
      noAllow = true;
    }
    let next = this.test({
      name: "noUnknown",
      exclusive: true,
      message,
      test(value) {
        if (value == null)
          return true;
        const unknownKeys = unknown(this.schema, value);
        return !noAllow || unknownKeys.length === 0 || this.createError({
          params: {
            unknown: unknownKeys.join(", ")
          }
        });
      }
    });
    next.spec.noUnknown = noAllow;
    return next;
  }
  unknown(allow = true, message = object.noUnknown) {
    return this.noUnknown(!allow, message);
  }
  transformKeys(fn) {
    return this.transform((obj) => {
      if (!obj)
        return obj;
      const result = {};
      for (const key of Object.keys(obj))
        result[fn(key)] = obj[key];
      return result;
    });
  }
  camelCase() {
    return this.transformKeys(import_tiny_case.camelCase);
  }
  snakeCase() {
    return this.transformKeys(import_tiny_case.snakeCase);
  }
  constantCase() {
    return this.transformKeys((key) => (0, import_tiny_case.snakeCase)(key).toUpperCase());
  }
  describe(options) {
    const next = (options ? this.resolve(options) : this).clone();
    const base = super.describe(options);
    base.fields = {};
    for (const [key, value] of Object.entries(next.fields)) {
      var _innerOptions2;
      let innerOptions = options;
      if ((_innerOptions2 = innerOptions) != null && _innerOptions2.value) {
        innerOptions = Object.assign({}, innerOptions, {
          parent: innerOptions.value,
          value: innerOptions.value[key]
        });
      }
      base.fields[key] = value.describe(innerOptions);
    }
    return base;
  }
};
create$3.prototype = ObjectSchema.prototype;
function create$2(type) {
  return new ArraySchema(type);
}
var ArraySchema = class extends Schema {
  constructor(type) {
    super({
      type: "array",
      spec: {
        types: type
      },
      check(v2) {
        return Array.isArray(v2);
      }
    });
    this.innerType = void 0;
    this.innerType = type;
  }
  _cast(_value, _opts) {
    const value = super._cast(_value, _opts);
    if (!this._typeCheck(value) || !this.innerType) {
      return value;
    }
    let isChanged = false;
    const castArray = value.map((v2, idx) => {
      const castElement = this.innerType.cast(v2, Object.assign({}, _opts, {
        path: `${_opts.path || ""}[${idx}]`,
        parent: value,
        originalValue: v2,
        value: v2,
        index: idx
      }));
      if (castElement !== v2) {
        isChanged = true;
      }
      return castElement;
    });
    return isChanged ? castArray : value;
  }
  _validate(_value, options = {}, panic, next) {
    var _options$recursive;
    let innerType = this.innerType;
    let recursive = (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive;
    options.originalValue != null ? options.originalValue : _value;
    super._validate(_value, options, panic, (arrayErrors, value) => {
      var _options$originalValu2;
      if (!recursive || !innerType || !this._typeCheck(value)) {
        next(arrayErrors, value);
        return;
      }
      let tests = new Array(value.length);
      for (let index = 0; index < value.length; index++) {
        var _options$originalValu;
        tests[index] = innerType.asNestedTest({
          options,
          index,
          parent: value,
          parentPath: options.path,
          originalParent: (_options$originalValu = options.originalValue) != null ? _options$originalValu : _value
        });
      }
      this.runTests({
        value,
        tests,
        originalValue: (_options$originalValu2 = options.originalValue) != null ? _options$originalValu2 : _value,
        options
      }, panic, (innerTypeErrors) => next(innerTypeErrors.concat(arrayErrors), value));
    });
  }
  clone(spec) {
    const next = super.clone(spec);
    next.innerType = this.innerType;
    return next;
  }
  /** Parse an input JSON string to an object */
  json() {
    return this.transform(parseJson);
  }
  concat(schema) {
    let next = super.concat(schema);
    next.innerType = this.innerType;
    if (schema.innerType)
      next.innerType = next.innerType ? (
        // @ts-expect-error Lazy doesn't have concat and will break
        next.innerType.concat(schema.innerType)
      ) : schema.innerType;
    return next;
  }
  of(schema) {
    let next = this.clone();
    if (!isSchema(schema))
      throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: " + printValue(schema));
    next.innerType = schema;
    next.spec = Object.assign({}, next.spec, {
      types: schema
    });
    return next;
  }
  length(length, message = array.length) {
    return this.test({
      message,
      name: "length",
      exclusive: true,
      params: {
        length
      },
      skipAbsent: true,
      test(value) {
        return value.length === this.resolve(length);
      }
    });
  }
  min(min, message) {
    message = message || array.min;
    return this.test({
      message,
      name: "min",
      exclusive: true,
      params: {
        min
      },
      skipAbsent: true,
      // FIXME(ts): Array<typeof T>
      test(value) {
        return value.length >= this.resolve(min);
      }
    });
  }
  max(max, message) {
    message = message || array.max;
    return this.test({
      message,
      name: "max",
      exclusive: true,
      params: {
        max
      },
      skipAbsent: true,
      test(value) {
        return value.length <= this.resolve(max);
      }
    });
  }
  ensure() {
    return this.default(() => []).transform((val, original) => {
      if (this._typeCheck(val))
        return val;
      return original == null ? [] : [].concat(original);
    });
  }
  compact(rejector) {
    let reject = !rejector ? (v2) => !!v2 : (v2, i, a) => !rejector(v2, i, a);
    return this.transform((values) => values != null ? values.filter(reject) : values);
  }
  describe(options) {
    const next = (options ? this.resolve(options) : this).clone();
    const base = super.describe(options);
    if (next.innerType) {
      var _innerOptions;
      let innerOptions = options;
      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {
        innerOptions = Object.assign({}, innerOptions, {
          parent: innerOptions.value,
          value: innerOptions.value[0]
        });
      }
      base.innerType = next.innerType.describe(innerOptions);
    }
    return base;
  }
};
create$2.prototype = ArraySchema.prototype;
function create$1(schemas) {
  return new TupleSchema(schemas);
}
var TupleSchema = class extends Schema {
  constructor(schemas) {
    super({
      type: "tuple",
      spec: {
        types: schemas
      },
      check(v2) {
        const types = this.spec.types;
        return Array.isArray(v2) && v2.length === types.length;
      }
    });
    this.withMutation(() => {
      this.typeError(tuple.notType);
    });
  }
  _cast(inputValue, options) {
    const {
      types
    } = this.spec;
    const value = super._cast(inputValue, options);
    if (!this._typeCheck(value)) {
      return value;
    }
    let isChanged = false;
    const castArray = types.map((type, idx) => {
      const castElement = type.cast(value[idx], Object.assign({}, options, {
        path: `${options.path || ""}[${idx}]`,
        parent: value,
        originalValue: value[idx],
        value: value[idx],
        index: idx
      }));
      if (castElement !== value[idx])
        isChanged = true;
      return castElement;
    });
    return isChanged ? castArray : value;
  }
  _validate(_value, options = {}, panic, next) {
    let itemTypes = this.spec.types;
    super._validate(_value, options, panic, (tupleErrors, value) => {
      var _options$originalValu2;
      if (!this._typeCheck(value)) {
        next(tupleErrors, value);
        return;
      }
      let tests = [];
      for (let [index, itemSchema] of itemTypes.entries()) {
        var _options$originalValu;
        tests[index] = itemSchema.asNestedTest({
          options,
          index,
          parent: value,
          parentPath: options.path,
          originalParent: (_options$originalValu = options.originalValue) != null ? _options$originalValu : _value
        });
      }
      this.runTests({
        value,
        tests,
        originalValue: (_options$originalValu2 = options.originalValue) != null ? _options$originalValu2 : _value,
        options
      }, panic, (innerTypeErrors) => next(innerTypeErrors.concat(tupleErrors), value));
    });
  }
  describe(options) {
    const next = (options ? this.resolve(options) : this).clone();
    const base = super.describe(options);
    base.innerType = next.spec.types.map((schema, index) => {
      var _innerOptions;
      let innerOptions = options;
      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {
        innerOptions = Object.assign({}, innerOptions, {
          parent: innerOptions.value,
          value: innerOptions.value[index]
        });
      }
      return schema.describe(innerOptions);
    });
    return base;
  }
};
create$1.prototype = TupleSchema.prototype;

// ../../node_modules/deepmerge/dist/es.js
var isMergeableObject = function isMergeableObject2(value) {
  return isNonNullObject(value) && !isSpecial(value);
};
function isNonNullObject(value) {
  return !!value && typeof value === "object";
}
function isSpecial(value) {
  var stringValue = Object.prototype.toString.call(value);
  return stringValue === "[object RegExp]" || stringValue === "[object Date]" || isReactElement(value);
}
var canUseSymbol = typeof Symbol === "function" && Symbol.for;
var REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for("react.element") : 60103;
function isReactElement(value) {
  return value.$$typeof === REACT_ELEMENT_TYPE;
}
function emptyTarget(val) {
  return Array.isArray(val) ? [] : {};
}
function cloneUnlessOtherwiseSpecified(value, options) {
  return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;
}
function defaultArrayMerge(target, source, options) {
  return target.concat(source).map(function(element) {
    return cloneUnlessOtherwiseSpecified(element, options);
  });
}
function mergeObject(target, source, options) {
  var destination = {};
  if (options.isMergeableObject(target)) {
    Object.keys(target).forEach(function(key) {
      destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);
    });
  }
  Object.keys(source).forEach(function(key) {
    if (!options.isMergeableObject(source[key]) || !target[key]) {
      destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);
    } else {
      destination[key] = deepmerge(target[key], source[key], options);
    }
  });
  return destination;
}
function deepmerge(target, source, options) {
  options = options || {};
  options.arrayMerge = options.arrayMerge || defaultArrayMerge;
  options.isMergeableObject = options.isMergeableObject || isMergeableObject;
  var sourceIsArray = Array.isArray(source);
  var targetIsArray = Array.isArray(target);
  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;
  if (!sourceAndTargetTypesMatch) {
    return cloneUnlessOtherwiseSpecified(source, options);
  } else if (sourceIsArray) {
    return options.arrayMerge(target, source, options);
  } else {
    return mergeObject(target, source, options);
  }
}
deepmerge.all = function deepmergeAll(array2, options) {
  if (!Array.isArray(array2)) {
    throw new Error("first argument should be an array");
  }
  return array2.reduce(function(prev, next) {
    return deepmerge(prev, next, options);
  }, {});
};
var deepmerge_1 = deepmerge;
var es_default = deepmerge_1;

// ../../node_modules/lodash-es/_freeGlobal.js
var freeGlobal = typeof global == "object" && global && global.Object === Object && global;
var freeGlobal_default = freeGlobal;

// ../../node_modules/lodash-es/_root.js
var freeSelf = typeof self == "object" && self && self.Object === Object && self;
var root = freeGlobal_default || freeSelf || Function("return this")();
var root_default = root;

// ../../node_modules/lodash-es/_Symbol.js
var Symbol2 = root_default.Symbol;
var Symbol_default = Symbol2;

// ../../node_modules/lodash-es/_getRawTag.js
var objectProto = Object.prototype;
var hasOwnProperty = objectProto.hasOwnProperty;
var nativeObjectToString = objectProto.toString;
var symToStringTag = Symbol_default ? Symbol_default.toStringTag : void 0;
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
  try {
    value[symToStringTag] = void 0;
    var unmasked = true;
  } catch (e2) {
  }
  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}
var getRawTag_default = getRawTag;

// ../../node_modules/lodash-es/_objectToString.js
var objectProto2 = Object.prototype;
var nativeObjectToString2 = objectProto2.toString;
function objectToString(value) {
  return nativeObjectToString2.call(value);
}
var objectToString_default = objectToString;

// ../../node_modules/lodash-es/_baseGetTag.js
var nullTag = "[object Null]";
var undefinedTag = "[object Undefined]";
var symToStringTag2 = Symbol_default ? Symbol_default.toStringTag : void 0;
function baseGetTag(value) {
  if (value == null) {
    return value === void 0 ? undefinedTag : nullTag;
  }
  return symToStringTag2 && symToStringTag2 in Object(value) ? getRawTag_default(value) : objectToString_default(value);
}
var baseGetTag_default = baseGetTag;

// ../../node_modules/lodash-es/_overArg.js
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}
var overArg_default = overArg;

// ../../node_modules/lodash-es/_getPrototype.js
var getPrototype = overArg_default(Object.getPrototypeOf, Object);
var getPrototype_default = getPrototype;

// ../../node_modules/lodash-es/isObjectLike.js
function isObjectLike(value) {
  return value != null && typeof value == "object";
}
var isObjectLike_default = isObjectLike;

// ../../node_modules/lodash-es/isPlainObject.js
var objectTag = "[object Object]";
var funcProto = Function.prototype;
var objectProto3 = Object.prototype;
var funcToString = funcProto.toString;
var hasOwnProperty2 = objectProto3.hasOwnProperty;
var objectCtorString = funcToString.call(Object);
function isPlainObject(value) {
  if (!isObjectLike_default(value) || baseGetTag_default(value) != objectTag) {
    return false;
  }
  var proto = getPrototype_default(value);
  if (proto === null) {
    return true;
  }
  var Ctor = hasOwnProperty2.call(proto, "constructor") && proto.constructor;
  return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;
}
var isPlainObject_default = isPlainObject;

// ../../node_modules/lodash-es/_listCacheClear.js
function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}
var listCacheClear_default = listCacheClear;

// ../../node_modules/lodash-es/eq.js
function eq(value, other) {
  return value === other || value !== value && other !== other;
}
var eq_default = eq;

// ../../node_modules/lodash-es/_assocIndexOf.js
function assocIndexOf(array2, key) {
  var length = array2.length;
  while (length--) {
    if (eq_default(array2[length][0], key)) {
      return length;
    }
  }
  return -1;
}
var assocIndexOf_default = assocIndexOf;

// ../../node_modules/lodash-es/_listCacheDelete.js
var arrayProto = Array.prototype;
var splice = arrayProto.splice;
function listCacheDelete(key) {
  var data = this.__data__, index = assocIndexOf_default(data, key);
  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}
var listCacheDelete_default = listCacheDelete;

// ../../node_modules/lodash-es/_listCacheGet.js
function listCacheGet(key) {
  var data = this.__data__, index = assocIndexOf_default(data, key);
  return index < 0 ? void 0 : data[index][1];
}
var listCacheGet_default = listCacheGet;

// ../../node_modules/lodash-es/_listCacheHas.js
function listCacheHas(key) {
  return assocIndexOf_default(this.__data__, key) > -1;
}
var listCacheHas_default = listCacheHas;

// ../../node_modules/lodash-es/_listCacheSet.js
function listCacheSet(key, value) {
  var data = this.__data__, index = assocIndexOf_default(data, key);
  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}
var listCacheSet_default = listCacheSet;

// ../../node_modules/lodash-es/_ListCache.js
function ListCache(entries) {
  var index = -1, length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
ListCache.prototype.clear = listCacheClear_default;
ListCache.prototype["delete"] = listCacheDelete_default;
ListCache.prototype.get = listCacheGet_default;
ListCache.prototype.has = listCacheHas_default;
ListCache.prototype.set = listCacheSet_default;
var ListCache_default = ListCache;

// ../../node_modules/lodash-es/_stackClear.js
function stackClear() {
  this.__data__ = new ListCache_default();
  this.size = 0;
}
var stackClear_default = stackClear;

// ../../node_modules/lodash-es/_stackDelete.js
function stackDelete(key) {
  var data = this.__data__, result = data["delete"](key);
  this.size = data.size;
  return result;
}
var stackDelete_default = stackDelete;

// ../../node_modules/lodash-es/_stackGet.js
function stackGet(key) {
  return this.__data__.get(key);
}
var stackGet_default = stackGet;

// ../../node_modules/lodash-es/_stackHas.js
function stackHas(key) {
  return this.__data__.has(key);
}
var stackHas_default = stackHas;

// ../../node_modules/lodash-es/isObject.js
function isObject2(value) {
  var type = typeof value;
  return value != null && (type == "object" || type == "function");
}
var isObject_default = isObject2;

// ../../node_modules/lodash-es/isFunction.js
var asyncTag = "[object AsyncFunction]";
var funcTag = "[object Function]";
var genTag = "[object GeneratorFunction]";
var proxyTag = "[object Proxy]";
function isFunction(value) {
  if (!isObject_default(value)) {
    return false;
  }
  var tag = baseGetTag_default(value);
  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
}
var isFunction_default = isFunction;

// ../../node_modules/lodash-es/_coreJsData.js
var coreJsData = root_default["__core-js_shared__"];
var coreJsData_default = coreJsData;

// ../../node_modules/lodash-es/_isMasked.js
var maskSrcKey = function() {
  var uid = /[^.]+$/.exec(coreJsData_default && coreJsData_default.keys && coreJsData_default.keys.IE_PROTO || "");
  return uid ? "Symbol(src)_1." + uid : "";
}();
function isMasked(func) {
  return !!maskSrcKey && maskSrcKey in func;
}
var isMasked_default = isMasked;

// ../../node_modules/lodash-es/_toSource.js
var funcProto2 = Function.prototype;
var funcToString2 = funcProto2.toString;
function toSource(func) {
  if (func != null) {
    try {
      return funcToString2.call(func);
    } catch (e2) {
    }
    try {
      return func + "";
    } catch (e2) {
    }
  }
  return "";
}
var toSource_default = toSource;

// ../../node_modules/lodash-es/_baseIsNative.js
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
var reIsHostCtor = /^\[object .+?Constructor\]$/;
var funcProto3 = Function.prototype;
var objectProto4 = Object.prototype;
var funcToString3 = funcProto3.toString;
var hasOwnProperty3 = objectProto4.hasOwnProperty;
var reIsNative = RegExp(
  "^" + funcToString3.call(hasOwnProperty3).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function baseIsNative(value) {
  if (!isObject_default(value) || isMasked_default(value)) {
    return false;
  }
  var pattern = isFunction_default(value) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource_default(value));
}
var baseIsNative_default = baseIsNative;

// ../../node_modules/lodash-es/_getValue.js
function getValue(object2, key) {
  return object2 == null ? void 0 : object2[key];
}
var getValue_default = getValue;

// ../../node_modules/lodash-es/_getNative.js
function getNative(object2, key) {
  var value = getValue_default(object2, key);
  return baseIsNative_default(value) ? value : void 0;
}
var getNative_default = getNative;

// ../../node_modules/lodash-es/_Map.js
var Map2 = getNative_default(root_default, "Map");
var Map_default = Map2;

// ../../node_modules/lodash-es/_nativeCreate.js
var nativeCreate = getNative_default(Object, "create");
var nativeCreate_default = nativeCreate;

// ../../node_modules/lodash-es/_hashClear.js
function hashClear() {
  this.__data__ = nativeCreate_default ? nativeCreate_default(null) : {};
  this.size = 0;
}
var hashClear_default = hashClear;

// ../../node_modules/lodash-es/_hashDelete.js
function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}
var hashDelete_default = hashDelete;

// ../../node_modules/lodash-es/_hashGet.js
var HASH_UNDEFINED = "__lodash_hash_undefined__";
var objectProto5 = Object.prototype;
var hasOwnProperty4 = objectProto5.hasOwnProperty;
function hashGet(key) {
  var data = this.__data__;
  if (nativeCreate_default) {
    var result = data[key];
    return result === HASH_UNDEFINED ? void 0 : result;
  }
  return hasOwnProperty4.call(data, key) ? data[key] : void 0;
}
var hashGet_default = hashGet;

// ../../node_modules/lodash-es/_hashHas.js
var objectProto6 = Object.prototype;
var hasOwnProperty5 = objectProto6.hasOwnProperty;
function hashHas(key) {
  var data = this.__data__;
  return nativeCreate_default ? data[key] !== void 0 : hasOwnProperty5.call(data, key);
}
var hashHas_default = hashHas;

// ../../node_modules/lodash-es/_hashSet.js
var HASH_UNDEFINED2 = "__lodash_hash_undefined__";
function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = nativeCreate_default && value === void 0 ? HASH_UNDEFINED2 : value;
  return this;
}
var hashSet_default = hashSet;

// ../../node_modules/lodash-es/_Hash.js
function Hash(entries) {
  var index = -1, length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
Hash.prototype.clear = hashClear_default;
Hash.prototype["delete"] = hashDelete_default;
Hash.prototype.get = hashGet_default;
Hash.prototype.has = hashHas_default;
Hash.prototype.set = hashSet_default;
var Hash_default = Hash;

// ../../node_modules/lodash-es/_mapCacheClear.js
function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    "hash": new Hash_default(),
    "map": new (Map_default || ListCache_default)(),
    "string": new Hash_default()
  };
}
var mapCacheClear_default = mapCacheClear;

// ../../node_modules/lodash-es/_isKeyable.js
function isKeyable(value) {
  var type = typeof value;
  return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
}
var isKeyable_default = isKeyable;

// ../../node_modules/lodash-es/_getMapData.js
function getMapData(map, key) {
  var data = map.__data__;
  return isKeyable_default(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
}
var getMapData_default = getMapData;

// ../../node_modules/lodash-es/_mapCacheDelete.js
function mapCacheDelete(key) {
  var result = getMapData_default(this, key)["delete"](key);
  this.size -= result ? 1 : 0;
  return result;
}
var mapCacheDelete_default = mapCacheDelete;

// ../../node_modules/lodash-es/_mapCacheGet.js
function mapCacheGet(key) {
  return getMapData_default(this, key).get(key);
}
var mapCacheGet_default = mapCacheGet;

// ../../node_modules/lodash-es/_mapCacheHas.js
function mapCacheHas(key) {
  return getMapData_default(this, key).has(key);
}
var mapCacheHas_default = mapCacheHas;

// ../../node_modules/lodash-es/_mapCacheSet.js
function mapCacheSet(key, value) {
  var data = getMapData_default(this, key), size = data.size;
  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}
var mapCacheSet_default = mapCacheSet;

// ../../node_modules/lodash-es/_MapCache.js
function MapCache(entries) {
  var index = -1, length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
MapCache.prototype.clear = mapCacheClear_default;
MapCache.prototype["delete"] = mapCacheDelete_default;
MapCache.prototype.get = mapCacheGet_default;
MapCache.prototype.has = mapCacheHas_default;
MapCache.prototype.set = mapCacheSet_default;
var MapCache_default = MapCache;

// ../../node_modules/lodash-es/_stackSet.js
var LARGE_ARRAY_SIZE = 200;
function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof ListCache_default) {
    var pairs = data.__data__;
    if (!Map_default || pairs.length < LARGE_ARRAY_SIZE - 1) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new MapCache_default(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}
var stackSet_default = stackSet;

// ../../node_modules/lodash-es/_Stack.js
function Stack(entries) {
  var data = this.__data__ = new ListCache_default(entries);
  this.size = data.size;
}
Stack.prototype.clear = stackClear_default;
Stack.prototype["delete"] = stackDelete_default;
Stack.prototype.get = stackGet_default;
Stack.prototype.has = stackHas_default;
Stack.prototype.set = stackSet_default;
var Stack_default = Stack;

// ../../node_modules/lodash-es/_arrayEach.js
function arrayEach(array2, iteratee) {
  var index = -1, length = array2 == null ? 0 : array2.length;
  while (++index < length) {
    if (iteratee(array2[index], index, array2) === false) {
      break;
    }
  }
  return array2;
}
var arrayEach_default = arrayEach;

// ../../node_modules/lodash-es/_defineProperty.js
var defineProperty = function() {
  try {
    var func = getNative_default(Object, "defineProperty");
    func({}, "", {});
    return func;
  } catch (e2) {
  }
}();
var defineProperty_default = defineProperty;

// ../../node_modules/lodash-es/_baseAssignValue.js
function baseAssignValue(object2, key, value) {
  if (key == "__proto__" && defineProperty_default) {
    defineProperty_default(object2, key, {
      "configurable": true,
      "enumerable": true,
      "value": value,
      "writable": true
    });
  } else {
    object2[key] = value;
  }
}
var baseAssignValue_default = baseAssignValue;

// ../../node_modules/lodash-es/_assignValue.js
var objectProto7 = Object.prototype;
var hasOwnProperty6 = objectProto7.hasOwnProperty;
function assignValue(object2, key, value) {
  var objValue = object2[key];
  if (!(hasOwnProperty6.call(object2, key) && eq_default(objValue, value)) || value === void 0 && !(key in object2)) {
    baseAssignValue_default(object2, key, value);
  }
}
var assignValue_default = assignValue;

// ../../node_modules/lodash-es/_copyObject.js
function copyObject(source, props, object2, customizer) {
  var isNew = !object2;
  object2 || (object2 = {});
  var index = -1, length = props.length;
  while (++index < length) {
    var key = props[index];
    var newValue = customizer ? customizer(object2[key], source[key], key, object2, source) : void 0;
    if (newValue === void 0) {
      newValue = source[key];
    }
    if (isNew) {
      baseAssignValue_default(object2, key, newValue);
    } else {
      assignValue_default(object2, key, newValue);
    }
  }
  return object2;
}
var copyObject_default = copyObject;

// ../../node_modules/lodash-es/_baseTimes.js
function baseTimes(n2, iteratee) {
  var index = -1, result = Array(n2);
  while (++index < n2) {
    result[index] = iteratee(index);
  }
  return result;
}
var baseTimes_default = baseTimes;

// ../../node_modules/lodash-es/_baseIsArguments.js
var argsTag = "[object Arguments]";
function baseIsArguments(value) {
  return isObjectLike_default(value) && baseGetTag_default(value) == argsTag;
}
var baseIsArguments_default = baseIsArguments;

// ../../node_modules/lodash-es/isArguments.js
var objectProto8 = Object.prototype;
var hasOwnProperty7 = objectProto8.hasOwnProperty;
var propertyIsEnumerable = objectProto8.propertyIsEnumerable;
var isArguments = baseIsArguments_default(/* @__PURE__ */ function() {
  return arguments;
}()) ? baseIsArguments_default : function(value) {
  return isObjectLike_default(value) && hasOwnProperty7.call(value, "callee") && !propertyIsEnumerable.call(value, "callee");
};
var isArguments_default = isArguments;

// ../../node_modules/lodash-es/isArray.js
var isArray = Array.isArray;
var isArray_default = isArray;

// ../../node_modules/lodash-es/stubFalse.js
function stubFalse() {
  return false;
}
var stubFalse_default = stubFalse;

// ../../node_modules/lodash-es/isBuffer.js
var freeExports = typeof exports == "object" && exports && !exports.nodeType && exports;
var freeModule = freeExports && typeof module == "object" && module && !module.nodeType && module;
var moduleExports = freeModule && freeModule.exports === freeExports;
var Buffer2 = moduleExports ? root_default.Buffer : void 0;
var nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : void 0;
var isBuffer = nativeIsBuffer || stubFalse_default;
var isBuffer_default = isBuffer;

// ../../node_modules/lodash-es/_isIndex.js
var MAX_SAFE_INTEGER = 9007199254740991;
var reIsUint = /^(?:0|[1-9]\d*)$/;
function isIndex(value, length) {
  var type = typeof value;
  length = length == null ? MAX_SAFE_INTEGER : length;
  return !!length && (type == "number" || type != "symbol" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
}
var isIndex_default = isIndex;

// ../../node_modules/lodash-es/isLength.js
var MAX_SAFE_INTEGER2 = 9007199254740991;
function isLength(value) {
  return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER2;
}
var isLength_default = isLength;

// ../../node_modules/lodash-es/_baseIsTypedArray.js
var argsTag2 = "[object Arguments]";
var arrayTag = "[object Array]";
var boolTag = "[object Boolean]";
var dateTag = "[object Date]";
var errorTag = "[object Error]";
var funcTag2 = "[object Function]";
var mapTag = "[object Map]";
var numberTag = "[object Number]";
var objectTag2 = "[object Object]";
var regexpTag = "[object RegExp]";
var setTag = "[object Set]";
var stringTag = "[object String]";
var weakMapTag = "[object WeakMap]";
var arrayBufferTag = "[object ArrayBuffer]";
var dataViewTag = "[object DataView]";
var float32Tag = "[object Float32Array]";
var float64Tag = "[object Float64Array]";
var int8Tag = "[object Int8Array]";
var int16Tag = "[object Int16Array]";
var int32Tag = "[object Int32Array]";
var uint8Tag = "[object Uint8Array]";
var uint8ClampedTag = "[object Uint8ClampedArray]";
var uint16Tag = "[object Uint16Array]";
var uint32Tag = "[object Uint32Array]";
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag2] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag2] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag2] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
function baseIsTypedArray(value) {
  return isObjectLike_default(value) && isLength_default(value.length) && !!typedArrayTags[baseGetTag_default(value)];
}
var baseIsTypedArray_default = baseIsTypedArray;

// ../../node_modules/lodash-es/_baseUnary.js
function baseUnary(func) {
  return function(value) {
    return func(value);
  };
}
var baseUnary_default = baseUnary;

// ../../node_modules/lodash-es/_nodeUtil.js
var freeExports2 = typeof exports == "object" && exports && !exports.nodeType && exports;
var freeModule2 = freeExports2 && typeof module == "object" && module && !module.nodeType && module;
var moduleExports2 = freeModule2 && freeModule2.exports === freeExports2;
var freeProcess = moduleExports2 && freeGlobal_default.process;
var nodeUtil = function() {
  try {
    var types = freeModule2 && freeModule2.require && freeModule2.require("util").types;
    if (types) {
      return types;
    }
    return freeProcess && freeProcess.binding && freeProcess.binding("util");
  } catch (e2) {
  }
}();
var nodeUtil_default = nodeUtil;

// ../../node_modules/lodash-es/isTypedArray.js
var nodeIsTypedArray = nodeUtil_default && nodeUtil_default.isTypedArray;
var isTypedArray = nodeIsTypedArray ? baseUnary_default(nodeIsTypedArray) : baseIsTypedArray_default;
var isTypedArray_default = isTypedArray;

// ../../node_modules/lodash-es/_arrayLikeKeys.js
var objectProto9 = Object.prototype;
var hasOwnProperty8 = objectProto9.hasOwnProperty;
function arrayLikeKeys(value, inherited) {
  var isArr = isArray_default(value), isArg = !isArr && isArguments_default(value), isBuff = !isArr && !isArg && isBuffer_default(value), isType = !isArr && !isArg && !isBuff && isTypedArray_default(value), skipIndexes = isArr || isArg || isBuff || isType, result = skipIndexes ? baseTimes_default(value.length, String) : [], length = result.length;
  for (var key in value) {
    if ((inherited || hasOwnProperty8.call(value, key)) && !(skipIndexes && // Safari 9 has enumerable `arguments.length` in strict mode.
    (key == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    isBuff && (key == "offset" || key == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") || // Skip index properties.
    isIndex_default(key, length)))) {
      result.push(key);
    }
  }
  return result;
}
var arrayLikeKeys_default = arrayLikeKeys;

// ../../node_modules/lodash-es/_isPrototype.js
var objectProto10 = Object.prototype;
function isPrototype(value) {
  var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto10;
  return value === proto;
}
var isPrototype_default = isPrototype;

// ../../node_modules/lodash-es/_nativeKeys.js
var nativeKeys = overArg_default(Object.keys, Object);
var nativeKeys_default = nativeKeys;

// ../../node_modules/lodash-es/_baseKeys.js
var objectProto11 = Object.prototype;
var hasOwnProperty9 = objectProto11.hasOwnProperty;
function baseKeys(object2) {
  if (!isPrototype_default(object2)) {
    return nativeKeys_default(object2);
  }
  var result = [];
  for (var key in Object(object2)) {
    if (hasOwnProperty9.call(object2, key) && key != "constructor") {
      result.push(key);
    }
  }
  return result;
}
var baseKeys_default = baseKeys;

// ../../node_modules/lodash-es/isArrayLike.js
function isArrayLike(value) {
  return value != null && isLength_default(value.length) && !isFunction_default(value);
}
var isArrayLike_default = isArrayLike;

// ../../node_modules/lodash-es/keys.js
function keys(object2) {
  return isArrayLike_default(object2) ? arrayLikeKeys_default(object2) : baseKeys_default(object2);
}
var keys_default = keys;

// ../../node_modules/lodash-es/_baseAssign.js
function baseAssign(object2, source) {
  return object2 && copyObject_default(source, keys_default(source), object2);
}
var baseAssign_default = baseAssign;

// ../../node_modules/lodash-es/_nativeKeysIn.js
function nativeKeysIn(object2) {
  var result = [];
  if (object2 != null) {
    for (var key in Object(object2)) {
      result.push(key);
    }
  }
  return result;
}
var nativeKeysIn_default = nativeKeysIn;

// ../../node_modules/lodash-es/_baseKeysIn.js
var objectProto12 = Object.prototype;
var hasOwnProperty10 = objectProto12.hasOwnProperty;
function baseKeysIn(object2) {
  if (!isObject_default(object2)) {
    return nativeKeysIn_default(object2);
  }
  var isProto = isPrototype_default(object2), result = [];
  for (var key in object2) {
    if (!(key == "constructor" && (isProto || !hasOwnProperty10.call(object2, key)))) {
      result.push(key);
    }
  }
  return result;
}
var baseKeysIn_default = baseKeysIn;

// ../../node_modules/lodash-es/keysIn.js
function keysIn(object2) {
  return isArrayLike_default(object2) ? arrayLikeKeys_default(object2, true) : baseKeysIn_default(object2);
}
var keysIn_default = keysIn;

// ../../node_modules/lodash-es/_baseAssignIn.js
function baseAssignIn(object2, source) {
  return object2 && copyObject_default(source, keysIn_default(source), object2);
}
var baseAssignIn_default = baseAssignIn;

// ../../node_modules/lodash-es/_cloneBuffer.js
var freeExports3 = typeof exports == "object" && exports && !exports.nodeType && exports;
var freeModule3 = freeExports3 && typeof module == "object" && module && !module.nodeType && module;
var moduleExports3 = freeModule3 && freeModule3.exports === freeExports3;
var Buffer3 = moduleExports3 ? root_default.Buffer : void 0;
var allocUnsafe = Buffer3 ? Buffer3.allocUnsafe : void 0;
function cloneBuffer(buffer, isDeep) {
  if (isDeep) {
    return buffer.slice();
  }
  var length = buffer.length, result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
  buffer.copy(result);
  return result;
}
var cloneBuffer_default = cloneBuffer;

// ../../node_modules/lodash-es/_copyArray.js
function copyArray(source, array2) {
  var index = -1, length = source.length;
  array2 || (array2 = Array(length));
  while (++index < length) {
    array2[index] = source[index];
  }
  return array2;
}
var copyArray_default = copyArray;

// ../../node_modules/lodash-es/_arrayFilter.js
function arrayFilter(array2, predicate) {
  var index = -1, length = array2 == null ? 0 : array2.length, resIndex = 0, result = [];
  while (++index < length) {
    var value = array2[index];
    if (predicate(value, index, array2)) {
      result[resIndex++] = value;
    }
  }
  return result;
}
var arrayFilter_default = arrayFilter;

// ../../node_modules/lodash-es/stubArray.js
function stubArray() {
  return [];
}
var stubArray_default = stubArray;

// ../../node_modules/lodash-es/_getSymbols.js
var objectProto13 = Object.prototype;
var propertyIsEnumerable2 = objectProto13.propertyIsEnumerable;
var nativeGetSymbols = Object.getOwnPropertySymbols;
var getSymbols = !nativeGetSymbols ? stubArray_default : function(object2) {
  if (object2 == null) {
    return [];
  }
  object2 = Object(object2);
  return arrayFilter_default(nativeGetSymbols(object2), function(symbol) {
    return propertyIsEnumerable2.call(object2, symbol);
  });
};
var getSymbols_default = getSymbols;

// ../../node_modules/lodash-es/_copySymbols.js
function copySymbols(source, object2) {
  return copyObject_default(source, getSymbols_default(source), object2);
}
var copySymbols_default = copySymbols;

// ../../node_modules/lodash-es/_arrayPush.js
function arrayPush(array2, values) {
  var index = -1, length = values.length, offset = array2.length;
  while (++index < length) {
    array2[offset + index] = values[index];
  }
  return array2;
}
var arrayPush_default = arrayPush;

// ../../node_modules/lodash-es/_getSymbolsIn.js
var nativeGetSymbols2 = Object.getOwnPropertySymbols;
var getSymbolsIn = !nativeGetSymbols2 ? stubArray_default : function(object2) {
  var result = [];
  while (object2) {
    arrayPush_default(result, getSymbols_default(object2));
    object2 = getPrototype_default(object2);
  }
  return result;
};
var getSymbolsIn_default = getSymbolsIn;

// ../../node_modules/lodash-es/_copySymbolsIn.js
function copySymbolsIn(source, object2) {
  return copyObject_default(source, getSymbolsIn_default(source), object2);
}
var copySymbolsIn_default = copySymbolsIn;

// ../../node_modules/lodash-es/_baseGetAllKeys.js
function baseGetAllKeys(object2, keysFunc, symbolsFunc) {
  var result = keysFunc(object2);
  return isArray_default(object2) ? result : arrayPush_default(result, symbolsFunc(object2));
}
var baseGetAllKeys_default = baseGetAllKeys;

// ../../node_modules/lodash-es/_getAllKeys.js
function getAllKeys(object2) {
  return baseGetAllKeys_default(object2, keys_default, getSymbols_default);
}
var getAllKeys_default = getAllKeys;

// ../../node_modules/lodash-es/_getAllKeysIn.js
function getAllKeysIn(object2) {
  return baseGetAllKeys_default(object2, keysIn_default, getSymbolsIn_default);
}
var getAllKeysIn_default = getAllKeysIn;

// ../../node_modules/lodash-es/_DataView.js
var DataView = getNative_default(root_default, "DataView");
var DataView_default = DataView;

// ../../node_modules/lodash-es/_Promise.js
var Promise2 = getNative_default(root_default, "Promise");
var Promise_default = Promise2;

// ../../node_modules/lodash-es/_Set.js
var Set2 = getNative_default(root_default, "Set");
var Set_default = Set2;

// ../../node_modules/lodash-es/_WeakMap.js
var WeakMap2 = getNative_default(root_default, "WeakMap");
var WeakMap_default = WeakMap2;

// ../../node_modules/lodash-es/_getTag.js
var mapTag2 = "[object Map]";
var objectTag3 = "[object Object]";
var promiseTag = "[object Promise]";
var setTag2 = "[object Set]";
var weakMapTag2 = "[object WeakMap]";
var dataViewTag2 = "[object DataView]";
var dataViewCtorString = toSource_default(DataView_default);
var mapCtorString = toSource_default(Map_default);
var promiseCtorString = toSource_default(Promise_default);
var setCtorString = toSource_default(Set_default);
var weakMapCtorString = toSource_default(WeakMap_default);
var getTag = baseGetTag_default;
if (DataView_default && getTag(new DataView_default(new ArrayBuffer(1))) != dataViewTag2 || Map_default && getTag(new Map_default()) != mapTag2 || Promise_default && getTag(Promise_default.resolve()) != promiseTag || Set_default && getTag(new Set_default()) != setTag2 || WeakMap_default && getTag(new WeakMap_default()) != weakMapTag2) {
  getTag = function(value) {
    var result = baseGetTag_default(value), Ctor = result == objectTag3 ? value.constructor : void 0, ctorString = Ctor ? toSource_default(Ctor) : "";
    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString:
          return dataViewTag2;
        case mapCtorString:
          return mapTag2;
        case promiseCtorString:
          return promiseTag;
        case setCtorString:
          return setTag2;
        case weakMapCtorString:
          return weakMapTag2;
      }
    }
    return result;
  };
}
var getTag_default = getTag;

// ../../node_modules/lodash-es/_initCloneArray.js
var objectProto14 = Object.prototype;
var hasOwnProperty11 = objectProto14.hasOwnProperty;
function initCloneArray(array2) {
  var length = array2.length, result = new array2.constructor(length);
  if (length && typeof array2[0] == "string" && hasOwnProperty11.call(array2, "index")) {
    result.index = array2.index;
    result.input = array2.input;
  }
  return result;
}
var initCloneArray_default = initCloneArray;

// ../../node_modules/lodash-es/_Uint8Array.js
var Uint8Array2 = root_default.Uint8Array;
var Uint8Array_default = Uint8Array2;

// ../../node_modules/lodash-es/_cloneArrayBuffer.js
function cloneArrayBuffer(arrayBuffer) {
  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
  new Uint8Array_default(result).set(new Uint8Array_default(arrayBuffer));
  return result;
}
var cloneArrayBuffer_default = cloneArrayBuffer;

// ../../node_modules/lodash-es/_cloneDataView.js
function cloneDataView(dataView, isDeep) {
  var buffer = isDeep ? cloneArrayBuffer_default(dataView.buffer) : dataView.buffer;
  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
}
var cloneDataView_default = cloneDataView;

// ../../node_modules/lodash-es/_cloneRegExp.js
var reFlags = /\w*$/;
function cloneRegExp(regexp) {
  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
  result.lastIndex = regexp.lastIndex;
  return result;
}
var cloneRegExp_default = cloneRegExp;

// ../../node_modules/lodash-es/_cloneSymbol.js
var symbolProto = Symbol_default ? Symbol_default.prototype : void 0;
var symbolValueOf = symbolProto ? symbolProto.valueOf : void 0;
function cloneSymbol(symbol) {
  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
}
var cloneSymbol_default = cloneSymbol;

// ../../node_modules/lodash-es/_cloneTypedArray.js
function cloneTypedArray(typedArray, isDeep) {
  var buffer = isDeep ? cloneArrayBuffer_default(typedArray.buffer) : typedArray.buffer;
  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
}
var cloneTypedArray_default = cloneTypedArray;

// ../../node_modules/lodash-es/_initCloneByTag.js
var boolTag2 = "[object Boolean]";
var dateTag2 = "[object Date]";
var mapTag3 = "[object Map]";
var numberTag2 = "[object Number]";
var regexpTag2 = "[object RegExp]";
var setTag3 = "[object Set]";
var stringTag2 = "[object String]";
var symbolTag = "[object Symbol]";
var arrayBufferTag2 = "[object ArrayBuffer]";
var dataViewTag3 = "[object DataView]";
var float32Tag2 = "[object Float32Array]";
var float64Tag2 = "[object Float64Array]";
var int8Tag2 = "[object Int8Array]";
var int16Tag2 = "[object Int16Array]";
var int32Tag2 = "[object Int32Array]";
var uint8Tag2 = "[object Uint8Array]";
var uint8ClampedTag2 = "[object Uint8ClampedArray]";
var uint16Tag2 = "[object Uint16Array]";
var uint32Tag2 = "[object Uint32Array]";
function initCloneByTag(object2, tag, isDeep) {
  var Ctor = object2.constructor;
  switch (tag) {
    case arrayBufferTag2:
      return cloneArrayBuffer_default(object2);
    case boolTag2:
    case dateTag2:
      return new Ctor(+object2);
    case dataViewTag3:
      return cloneDataView_default(object2, isDeep);
    case float32Tag2:
    case float64Tag2:
    case int8Tag2:
    case int16Tag2:
    case int32Tag2:
    case uint8Tag2:
    case uint8ClampedTag2:
    case uint16Tag2:
    case uint32Tag2:
      return cloneTypedArray_default(object2, isDeep);
    case mapTag3:
      return new Ctor();
    case numberTag2:
    case stringTag2:
      return new Ctor(object2);
    case regexpTag2:
      return cloneRegExp_default(object2);
    case setTag3:
      return new Ctor();
    case symbolTag:
      return cloneSymbol_default(object2);
  }
}
var initCloneByTag_default = initCloneByTag;

// ../../node_modules/lodash-es/_baseCreate.js
var objectCreate = Object.create;
var baseCreate = /* @__PURE__ */ function() {
  function object2() {
  }
  return function(proto) {
    if (!isObject_default(proto)) {
      return {};
    }
    if (objectCreate) {
      return objectCreate(proto);
    }
    object2.prototype = proto;
    var result = new object2();
    object2.prototype = void 0;
    return result;
  };
}();
var baseCreate_default = baseCreate;

// ../../node_modules/lodash-es/_initCloneObject.js
function initCloneObject(object2) {
  return typeof object2.constructor == "function" && !isPrototype_default(object2) ? baseCreate_default(getPrototype_default(object2)) : {};
}
var initCloneObject_default = initCloneObject;

// ../../node_modules/lodash-es/_baseIsMap.js
var mapTag4 = "[object Map]";
function baseIsMap(value) {
  return isObjectLike_default(value) && getTag_default(value) == mapTag4;
}
var baseIsMap_default = baseIsMap;

// ../../node_modules/lodash-es/isMap.js
var nodeIsMap = nodeUtil_default && nodeUtil_default.isMap;
var isMap = nodeIsMap ? baseUnary_default(nodeIsMap) : baseIsMap_default;
var isMap_default = isMap;

// ../../node_modules/lodash-es/_baseIsSet.js
var setTag4 = "[object Set]";
function baseIsSet(value) {
  return isObjectLike_default(value) && getTag_default(value) == setTag4;
}
var baseIsSet_default = baseIsSet;

// ../../node_modules/lodash-es/isSet.js
var nodeIsSet = nodeUtil_default && nodeUtil_default.isSet;
var isSet = nodeIsSet ? baseUnary_default(nodeIsSet) : baseIsSet_default;
var isSet_default = isSet;

// ../../node_modules/lodash-es/_baseClone.js
var CLONE_DEEP_FLAG = 1;
var CLONE_FLAT_FLAG = 2;
var CLONE_SYMBOLS_FLAG = 4;
var argsTag3 = "[object Arguments]";
var arrayTag2 = "[object Array]";
var boolTag3 = "[object Boolean]";
var dateTag3 = "[object Date]";
var errorTag2 = "[object Error]";
var funcTag3 = "[object Function]";
var genTag2 = "[object GeneratorFunction]";
var mapTag5 = "[object Map]";
var numberTag3 = "[object Number]";
var objectTag4 = "[object Object]";
var regexpTag3 = "[object RegExp]";
var setTag5 = "[object Set]";
var stringTag3 = "[object String]";
var symbolTag2 = "[object Symbol]";
var weakMapTag3 = "[object WeakMap]";
var arrayBufferTag3 = "[object ArrayBuffer]";
var dataViewTag4 = "[object DataView]";
var float32Tag3 = "[object Float32Array]";
var float64Tag3 = "[object Float64Array]";
var int8Tag3 = "[object Int8Array]";
var int16Tag3 = "[object Int16Array]";
var int32Tag3 = "[object Int32Array]";
var uint8Tag3 = "[object Uint8Array]";
var uint8ClampedTag3 = "[object Uint8ClampedArray]";
var uint16Tag3 = "[object Uint16Array]";
var uint32Tag3 = "[object Uint32Array]";
var cloneableTags = {};
cloneableTags[argsTag3] = cloneableTags[arrayTag2] = cloneableTags[arrayBufferTag3] = cloneableTags[dataViewTag4] = cloneableTags[boolTag3] = cloneableTags[dateTag3] = cloneableTags[float32Tag3] = cloneableTags[float64Tag3] = cloneableTags[int8Tag3] = cloneableTags[int16Tag3] = cloneableTags[int32Tag3] = cloneableTags[mapTag5] = cloneableTags[numberTag3] = cloneableTags[objectTag4] = cloneableTags[regexpTag3] = cloneableTags[setTag5] = cloneableTags[stringTag3] = cloneableTags[symbolTag2] = cloneableTags[uint8Tag3] = cloneableTags[uint8ClampedTag3] = cloneableTags[uint16Tag3] = cloneableTags[uint32Tag3] = true;
cloneableTags[errorTag2] = cloneableTags[funcTag3] = cloneableTags[weakMapTag3] = false;
function baseClone(value, bitmask, customizer, key, object2, stack) {
  var result, isDeep = bitmask & CLONE_DEEP_FLAG, isFlat = bitmask & CLONE_FLAT_FLAG, isFull = bitmask & CLONE_SYMBOLS_FLAG;
  if (customizer) {
    result = object2 ? customizer(value, key, object2, stack) : customizer(value);
  }
  if (result !== void 0) {
    return result;
  }
  if (!isObject_default(value)) {
    return value;
  }
  var isArr = isArray_default(value);
  if (isArr) {
    result = initCloneArray_default(value);
    if (!isDeep) {
      return copyArray_default(value, result);
    }
  } else {
    var tag = getTag_default(value), isFunc = tag == funcTag3 || tag == genTag2;
    if (isBuffer_default(value)) {
      return cloneBuffer_default(value, isDeep);
    }
    if (tag == objectTag4 || tag == argsTag3 || isFunc && !object2) {
      result = isFlat || isFunc ? {} : initCloneObject_default(value);
      if (!isDeep) {
        return isFlat ? copySymbolsIn_default(value, baseAssignIn_default(result, value)) : copySymbols_default(value, baseAssign_default(result, value));
      }
    } else {
      if (!cloneableTags[tag]) {
        return object2 ? value : {};
      }
      result = initCloneByTag_default(value, tag, isDeep);
    }
  }
  stack || (stack = new Stack_default());
  var stacked = stack.get(value);
  if (stacked) {
    return stacked;
  }
  stack.set(value, result);
  if (isSet_default(value)) {
    value.forEach(function(subValue) {
      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
    });
  } else if (isMap_default(value)) {
    value.forEach(function(subValue, key2) {
      result.set(key2, baseClone(subValue, bitmask, customizer, key2, value, stack));
    });
  }
  var keysFunc = isFull ? isFlat ? getAllKeysIn_default : getAllKeys_default : isFlat ? keysIn_default : keys_default;
  var props = isArr ? void 0 : keysFunc(value);
  arrayEach_default(props || value, function(subValue, key2) {
    if (props) {
      key2 = subValue;
      subValue = value[key2];
    }
    assignValue_default(result, key2, baseClone(subValue, bitmask, customizer, key2, value, stack));
  });
  return result;
}
var baseClone_default = baseClone;

// ../../node_modules/lodash-es/cloneDeep.js
var CLONE_DEEP_FLAG2 = 1;
var CLONE_SYMBOLS_FLAG2 = 4;
function cloneDeep(value) {
  return baseClone_default(value, CLONE_DEEP_FLAG2 | CLONE_SYMBOLS_FLAG2);
}
var cloneDeep_default = cloneDeep;

// ../../node_modules/formik/dist/formik.esm.js
var import_react_fast_compare = __toESM(require_react_fast_compare());
import { createContext as createContext3, useContext as useContext3, Children, useRef as useRef7, useEffect as useEffect14, useState as useState21, useCallback as useCallback7, useMemo as useMemo3, useImperativeHandle, createElement, useLayoutEffect, forwardRef as forwardRef12, Component } from "react";

// ../../node_modules/tiny-warning/dist/tiny-warning.esm.js
var isProduction = process.env.NODE_ENV === "production";
function warning(condition, message) {
  if (!isProduction) {
    if (condition) {
      return;
    }
    var text = "Warning: " + message;
    if (typeof console !== "undefined") {
      console.warn(text);
    }
    try {
      throw Error(text);
    } catch (x) {
    }
  }
}
var tiny_warning_esm_default = warning;

// ../../node_modules/lodash-es/clone.js
var CLONE_SYMBOLS_FLAG3 = 4;
function clone2(value) {
  return baseClone_default(value, CLONE_SYMBOLS_FLAG3);
}
var clone_default = clone2;

// ../../node_modules/lodash-es/_arrayMap.js
function arrayMap(array2, iteratee) {
  var index = -1, length = array2 == null ? 0 : array2.length, result = Array(length);
  while (++index < length) {
    result[index] = iteratee(array2[index], index, array2);
  }
  return result;
}
var arrayMap_default = arrayMap;

// ../../node_modules/lodash-es/isSymbol.js
var symbolTag3 = "[object Symbol]";
function isSymbol(value) {
  return typeof value == "symbol" || isObjectLike_default(value) && baseGetTag_default(value) == symbolTag3;
}
var isSymbol_default = isSymbol;

// ../../node_modules/lodash-es/memoize.js
var FUNC_ERROR_TEXT = "Expected a function";
function memoize(func, resolver) {
  if (typeof func != "function" || resolver != null && typeof resolver != "function") {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  var memoized = function() {
    var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache = memoized.cache;
    if (cache.has(key)) {
      return cache.get(key);
    }
    var result = func.apply(this, args);
    memoized.cache = cache.set(key, result) || cache;
    return result;
  };
  memoized.cache = new (memoize.Cache || MapCache_default)();
  return memoized;
}
memoize.Cache = MapCache_default;
var memoize_default = memoize;

// ../../node_modules/lodash-es/_memoizeCapped.js
var MAX_MEMOIZE_SIZE = 500;
function memoizeCapped(func) {
  var result = memoize_default(func, function(key) {
    if (cache.size === MAX_MEMOIZE_SIZE) {
      cache.clear();
    }
    return key;
  });
  var cache = result.cache;
  return result;
}
var memoizeCapped_default = memoizeCapped;

// ../../node_modules/lodash-es/_stringToPath.js
var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
var reEscapeChar = /\\(\\)?/g;
var stringToPath = memoizeCapped_default(function(string2) {
  var result = [];
  if (string2.charCodeAt(0) === 46) {
    result.push("");
  }
  string2.replace(rePropName, function(match, number2, quote, subString) {
    result.push(quote ? subString.replace(reEscapeChar, "$1") : number2 || match);
  });
  return result;
});
var stringToPath_default = stringToPath;

// ../../node_modules/lodash-es/_toKey.js
var INFINITY = 1 / 0;
function toKey(value) {
  if (typeof value == "string" || isSymbol_default(value)) {
    return value;
  }
  var result = value + "";
  return result == "0" && 1 / value == -INFINITY ? "-0" : result;
}
var toKey_default = toKey;

// ../../node_modules/lodash-es/_baseToString.js
var INFINITY2 = 1 / 0;
var symbolProto2 = Symbol_default ? Symbol_default.prototype : void 0;
var symbolToString2 = symbolProto2 ? symbolProto2.toString : void 0;
function baseToString(value) {
  if (typeof value == "string") {
    return value;
  }
  if (isArray_default(value)) {
    return arrayMap_default(value, baseToString) + "";
  }
  if (isSymbol_default(value)) {
    return symbolToString2 ? symbolToString2.call(value) : "";
  }
  var result = value + "";
  return result == "0" && 1 / value == -INFINITY2 ? "-0" : result;
}
var baseToString_default = baseToString;

// ../../node_modules/lodash-es/toString.js
function toString2(value) {
  return value == null ? "" : baseToString_default(value);
}
var toString_default = toString2;

// ../../node_modules/lodash-es/toPath.js
function toPath(value) {
  if (isArray_default(value)) {
    return arrayMap_default(value, toKey_default);
  }
  return isSymbol_default(value) ? [value] : copyArray_default(stringToPath_default(toString_default(value)));
}
var toPath_default = toPath;

// ../../node_modules/formik/dist/formik.esm.js
var import_hoist_non_react_statics = __toESM(require_hoist_non_react_statics_cjs());
function _extends() {
  _extends = Object.assign || function(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  subClass.__proto__ = superClass;
}
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function _assertThisInitialized(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
var FormikContext = /* @__PURE__ */ createContext3(void 0);
FormikContext.displayName = "FormikContext";
var FormikProvider = FormikContext.Provider;
var FormikConsumer = FormikContext.Consumer;
function useFormikContext() {
  var formik = useContext3(FormikContext);
  !!!formik ? process.env.NODE_ENV !== "production" ? tiny_warning_esm_default(false, "Formik context is undefined, please verify you are calling useFormikContext() as child of a <Formik> component.") : tiny_warning_esm_default(false) : void 0;
  return formik;
}
var isEmptyArray = function isEmptyArray2(value) {
  return Array.isArray(value) && value.length === 0;
};
var isFunction2 = function isFunction3(obj) {
  return typeof obj === "function";
};
var isObject3 = function isObject4(obj) {
  return obj !== null && typeof obj === "object";
};
var isInteger = function isInteger2(obj) {
  return String(Math.floor(Number(obj))) === obj;
};
var isString = function isString2(obj) {
  return Object.prototype.toString.call(obj) === "[object String]";
};
var isEmptyChildren = function isEmptyChildren2(children) {
  return Children.count(children) === 0;
};
var isPromise = function isPromise2(value) {
  return isObject3(value) && isFunction2(value.then);
};
function getActiveElement(doc) {
  doc = doc || (typeof document !== "undefined" ? document : void 0);
  if (typeof doc === "undefined") {
    return null;
  }
  try {
    return doc.activeElement || doc.body;
  } catch (e2) {
    return doc.body;
  }
}
function getIn2(obj, key, def, p2) {
  if (p2 === void 0) {
    p2 = 0;
  }
  var path = toPath_default(key);
  while (obj && p2 < path.length) {
    obj = obj[path[p2++]];
  }
  if (p2 !== path.length && !obj) {
    return def;
  }
  return obj === void 0 ? def : obj;
}
function setIn(obj, path, value) {
  var res = clone_default(obj);
  var resVal = res;
  var i = 0;
  var pathArray = toPath_default(path);
  for (; i < pathArray.length - 1; i++) {
    var currentPath = pathArray[i];
    var currentObj = getIn2(obj, pathArray.slice(0, i + 1));
    if (currentObj && (isObject3(currentObj) || Array.isArray(currentObj))) {
      resVal = resVal[currentPath] = clone_default(currentObj);
    } else {
      var nextPath = pathArray[i + 1];
      resVal = resVal[currentPath] = isInteger(nextPath) && Number(nextPath) >= 0 ? [] : {};
    }
  }
  if ((i === 0 ? obj : resVal)[pathArray[i]] === value) {
    return obj;
  }
  if (value === void 0) {
    delete resVal[pathArray[i]];
  } else {
    resVal[pathArray[i]] = value;
  }
  if (i === 0 && value === void 0) {
    delete res[pathArray[i]];
  }
  return res;
}
function setNestedObjectValues(object2, value, visited, response) {
  if (visited === void 0) {
    visited = /* @__PURE__ */ new WeakMap();
  }
  if (response === void 0) {
    response = {};
  }
  for (var _i = 0, _Object$keys = Object.keys(object2); _i < _Object$keys.length; _i++) {
    var k2 = _Object$keys[_i];
    var val = object2[k2];
    if (isObject3(val)) {
      if (!visited.get(val)) {
        visited.set(val, true);
        response[k2] = Array.isArray(val) ? [] : {};
        setNestedObjectValues(val, value, visited, response[k2]);
      }
    } else {
      response[k2] = value;
    }
  }
  return response;
}
function formikReducer(state, msg) {
  switch (msg.type) {
    case "SET_VALUES":
      return _extends({}, state, {
        values: msg.payload
      });
    case "SET_TOUCHED":
      return _extends({}, state, {
        touched: msg.payload
      });
    case "SET_ERRORS":
      if ((0, import_react_fast_compare.default)(state.errors, msg.payload)) {
        return state;
      }
      return _extends({}, state, {
        errors: msg.payload
      });
    case "SET_STATUS":
      return _extends({}, state, {
        status: msg.payload
      });
    case "SET_ISSUBMITTING":
      return _extends({}, state, {
        isSubmitting: msg.payload
      });
    case "SET_ISVALIDATING":
      return _extends({}, state, {
        isValidating: msg.payload
      });
    case "SET_FIELD_VALUE":
      return _extends({}, state, {
        values: setIn(state.values, msg.payload.field, msg.payload.value)
      });
    case "SET_FIELD_TOUCHED":
      return _extends({}, state, {
        touched: setIn(state.touched, msg.payload.field, msg.payload.value)
      });
    case "SET_FIELD_ERROR":
      return _extends({}, state, {
        errors: setIn(state.errors, msg.payload.field, msg.payload.value)
      });
    case "RESET_FORM":
      return _extends({}, state, msg.payload);
    case "SET_FORMIK_STATE":
      return msg.payload(state);
    case "SUBMIT_ATTEMPT":
      return _extends({}, state, {
        touched: setNestedObjectValues(state.values, true),
        isSubmitting: true,
        submitCount: state.submitCount + 1
      });
    case "SUBMIT_FAILURE":
      return _extends({}, state, {
        isSubmitting: false
      });
    case "SUBMIT_SUCCESS":
      return _extends({}, state, {
        isSubmitting: false
      });
    default:
      return state;
  }
}
var emptyErrors = {};
var emptyTouched = {};
function useFormik(_ref) {
  var _ref$validateOnChange = _ref.validateOnChange, validateOnChange = _ref$validateOnChange === void 0 ? true : _ref$validateOnChange, _ref$validateOnBlur = _ref.validateOnBlur, validateOnBlur = _ref$validateOnBlur === void 0 ? true : _ref$validateOnBlur, _ref$validateOnMount = _ref.validateOnMount, validateOnMount = _ref$validateOnMount === void 0 ? false : _ref$validateOnMount, isInitialValid = _ref.isInitialValid, _ref$enableReinitiali = _ref.enableReinitialize, enableReinitialize = _ref$enableReinitiali === void 0 ? false : _ref$enableReinitiali, onSubmit = _ref.onSubmit, rest = _objectWithoutPropertiesLoose(_ref, ["validateOnChange", "validateOnBlur", "validateOnMount", "isInitialValid", "enableReinitialize", "onSubmit"]);
  var props = _extends({
    validateOnChange,
    validateOnBlur,
    validateOnMount,
    onSubmit
  }, rest);
  var initialValues = useRef7(props.initialValues);
  var initialErrors = useRef7(props.initialErrors || emptyErrors);
  var initialTouched = useRef7(props.initialTouched || emptyTouched);
  var initialStatus = useRef7(props.initialStatus);
  var isMounted = useRef7(false);
  var fieldRegistry = useRef7({});
  if (process.env.NODE_ENV !== "production") {
    useEffect14(function() {
      !(typeof isInitialValid === "undefined") ? process.env.NODE_ENV !== "production" ? tiny_warning_esm_default(false, "isInitialValid has been deprecated and will be removed in future versions of Formik. Please use initialErrors or validateOnMount instead.") : tiny_warning_esm_default(false) : void 0;
    }, []);
  }
  useEffect14(function() {
    isMounted.current = true;
    return function() {
      isMounted.current = false;
    };
  }, []);
  var _React$useState = useState21(0), setIteration = _React$useState[1];
  var stateRef = useRef7({
    values: cloneDeep_default(props.initialValues),
    errors: cloneDeep_default(props.initialErrors) || emptyErrors,
    touched: cloneDeep_default(props.initialTouched) || emptyTouched,
    status: cloneDeep_default(props.initialStatus),
    isSubmitting: false,
    isValidating: false,
    submitCount: 0
  });
  var state = stateRef.current;
  var dispatch = useCallback7(function(action) {
    var prev = stateRef.current;
    stateRef.current = formikReducer(prev, action);
    if (prev !== stateRef.current)
      setIteration(function(x) {
        return x + 1;
      });
  }, []);
  var runValidateHandler = useCallback7(function(values, field) {
    return new Promise(function(resolve, reject) {
      var maybePromisedErrors = props.validate(values, field);
      if (maybePromisedErrors == null) {
        resolve(emptyErrors);
      } else if (isPromise(maybePromisedErrors)) {
        maybePromisedErrors.then(function(errors) {
          resolve(errors || emptyErrors);
        }, function(actualException) {
          if (process.env.NODE_ENV !== "production") {
            console.warn("Warning: An unhandled error was caught during validation in <Formik validate />", actualException);
          }
          reject(actualException);
        });
      } else {
        resolve(maybePromisedErrors);
      }
    });
  }, [props.validate]);
  var runValidationSchema = useCallback7(function(values, field) {
    var validationSchema = props.validationSchema;
    var schema = isFunction2(validationSchema) ? validationSchema(field) : validationSchema;
    var promise = field && schema.validateAt ? schema.validateAt(field, values) : validateYupSchema(values, schema);
    return new Promise(function(resolve, reject) {
      promise.then(function() {
        resolve(emptyErrors);
      }, function(err) {
        if (err.name === "ValidationError") {
          resolve(yupToFormErrors(err));
        } else {
          if (process.env.NODE_ENV !== "production") {
            console.warn("Warning: An unhandled error was caught during validation in <Formik validationSchema />", err);
          }
          reject(err);
        }
      });
    });
  }, [props.validationSchema]);
  var runSingleFieldLevelValidation = useCallback7(function(field, value) {
    return new Promise(function(resolve) {
      return resolve(fieldRegistry.current[field].validate(value));
    });
  }, []);
  var runFieldLevelValidations = useCallback7(function(values) {
    var fieldKeysWithValidation = Object.keys(fieldRegistry.current).filter(function(f) {
      return isFunction2(fieldRegistry.current[f].validate);
    });
    var fieldValidations = fieldKeysWithValidation.length > 0 ? fieldKeysWithValidation.map(function(f) {
      return runSingleFieldLevelValidation(f, getIn2(values, f));
    }) : [Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];
    return Promise.all(fieldValidations).then(function(fieldErrorsList) {
      return fieldErrorsList.reduce(function(prev, curr, index) {
        if (curr === "DO_NOT_DELETE_YOU_WILL_BE_FIRED") {
          return prev;
        }
        if (curr) {
          prev = setIn(prev, fieldKeysWithValidation[index], curr);
        }
        return prev;
      }, {});
    });
  }, [runSingleFieldLevelValidation]);
  var runAllValidations = useCallback7(function(values) {
    return Promise.all([runFieldLevelValidations(values), props.validationSchema ? runValidationSchema(values) : {}, props.validate ? runValidateHandler(values) : {}]).then(function(_ref2) {
      var fieldErrors = _ref2[0], schemaErrors = _ref2[1], validateErrors = _ref2[2];
      var combinedErrors = es_default.all([fieldErrors, schemaErrors, validateErrors], {
        arrayMerge
      });
      return combinedErrors;
    });
  }, [props.validate, props.validationSchema, runFieldLevelValidations, runValidateHandler, runValidationSchema]);
  var validateFormWithHighPriority = useEventCallback(function(values) {
    if (values === void 0) {
      values = state.values;
    }
    dispatch({
      type: "SET_ISVALIDATING",
      payload: true
    });
    return runAllValidations(values).then(function(combinedErrors) {
      if (!!isMounted.current) {
        dispatch({
          type: "SET_ISVALIDATING",
          payload: false
        });
        dispatch({
          type: "SET_ERRORS",
          payload: combinedErrors
        });
      }
      return combinedErrors;
    });
  });
  useEffect14(function() {
    if (validateOnMount && isMounted.current === true && (0, import_react_fast_compare.default)(initialValues.current, props.initialValues)) {
      validateFormWithHighPriority(initialValues.current);
    }
  }, [validateOnMount, validateFormWithHighPriority]);
  var resetForm = useCallback7(function(nextState) {
    var values = nextState && nextState.values ? nextState.values : initialValues.current;
    var errors = nextState && nextState.errors ? nextState.errors : initialErrors.current ? initialErrors.current : props.initialErrors || {};
    var touched = nextState && nextState.touched ? nextState.touched : initialTouched.current ? initialTouched.current : props.initialTouched || {};
    var status = nextState && nextState.status ? nextState.status : initialStatus.current ? initialStatus.current : props.initialStatus;
    initialValues.current = values;
    initialErrors.current = errors;
    initialTouched.current = touched;
    initialStatus.current = status;
    var dispatchFn = function dispatchFn2() {
      dispatch({
        type: "RESET_FORM",
        payload: {
          isSubmitting: !!nextState && !!nextState.isSubmitting,
          errors,
          touched,
          status,
          values,
          isValidating: !!nextState && !!nextState.isValidating,
          submitCount: !!nextState && !!nextState.submitCount && typeof nextState.submitCount === "number" ? nextState.submitCount : 0
        }
      });
    };
    if (props.onReset) {
      var maybePromisedOnReset = props.onReset(state.values, imperativeMethods);
      if (isPromise(maybePromisedOnReset)) {
        maybePromisedOnReset.then(dispatchFn);
      } else {
        dispatchFn();
      }
    } else {
      dispatchFn();
    }
  }, [props.initialErrors, props.initialStatus, props.initialTouched, props.onReset]);
  useEffect14(function() {
    if (isMounted.current === true && !(0, import_react_fast_compare.default)(initialValues.current, props.initialValues)) {
      if (enableReinitialize) {
        initialValues.current = props.initialValues;
        resetForm();
        if (validateOnMount) {
          validateFormWithHighPriority(initialValues.current);
        }
      }
    }
  }, [enableReinitialize, props.initialValues, resetForm, validateOnMount, validateFormWithHighPriority]);
  useEffect14(function() {
    if (enableReinitialize && isMounted.current === true && !(0, import_react_fast_compare.default)(initialErrors.current, props.initialErrors)) {
      initialErrors.current = props.initialErrors || emptyErrors;
      dispatch({
        type: "SET_ERRORS",
        payload: props.initialErrors || emptyErrors
      });
    }
  }, [enableReinitialize, props.initialErrors]);
  useEffect14(function() {
    if (enableReinitialize && isMounted.current === true && !(0, import_react_fast_compare.default)(initialTouched.current, props.initialTouched)) {
      initialTouched.current = props.initialTouched || emptyTouched;
      dispatch({
        type: "SET_TOUCHED",
        payload: props.initialTouched || emptyTouched
      });
    }
  }, [enableReinitialize, props.initialTouched]);
  useEffect14(function() {
    if (enableReinitialize && isMounted.current === true && !(0, import_react_fast_compare.default)(initialStatus.current, props.initialStatus)) {
      initialStatus.current = props.initialStatus;
      dispatch({
        type: "SET_STATUS",
        payload: props.initialStatus
      });
    }
  }, [enableReinitialize, props.initialStatus, props.initialTouched]);
  var validateField = useEventCallback(function(name) {
    if (fieldRegistry.current[name] && isFunction2(fieldRegistry.current[name].validate)) {
      var value = getIn2(state.values, name);
      var maybePromise = fieldRegistry.current[name].validate(value);
      if (isPromise(maybePromise)) {
        dispatch({
          type: "SET_ISVALIDATING",
          payload: true
        });
        return maybePromise.then(function(x) {
          return x;
        }).then(function(error2) {
          dispatch({
            type: "SET_FIELD_ERROR",
            payload: {
              field: name,
              value: error2
            }
          });
          dispatch({
            type: "SET_ISVALIDATING",
            payload: false
          });
        });
      } else {
        dispatch({
          type: "SET_FIELD_ERROR",
          payload: {
            field: name,
            value: maybePromise
          }
        });
        return Promise.resolve(maybePromise);
      }
    } else if (props.validationSchema) {
      dispatch({
        type: "SET_ISVALIDATING",
        payload: true
      });
      return runValidationSchema(state.values, name).then(function(x) {
        return x;
      }).then(function(error2) {
        dispatch({
          type: "SET_FIELD_ERROR",
          payload: {
            field: name,
            value: getIn2(error2, name)
          }
        });
        dispatch({
          type: "SET_ISVALIDATING",
          payload: false
        });
      });
    }
    return Promise.resolve();
  });
  var registerField = useCallback7(function(name, _ref3) {
    var validate = _ref3.validate;
    fieldRegistry.current[name] = {
      validate
    };
  }, []);
  var unregisterField = useCallback7(function(name) {
    delete fieldRegistry.current[name];
  }, []);
  var setTouched = useEventCallback(function(touched, shouldValidate) {
    dispatch({
      type: "SET_TOUCHED",
      payload: touched
    });
    var willValidate = shouldValidate === void 0 ? validateOnBlur : shouldValidate;
    return willValidate ? validateFormWithHighPriority(state.values) : Promise.resolve();
  });
  var setErrors = useCallback7(function(errors) {
    dispatch({
      type: "SET_ERRORS",
      payload: errors
    });
  }, []);
  var setValues = useEventCallback(function(values, shouldValidate) {
    var resolvedValues = isFunction2(values) ? values(state.values) : values;
    dispatch({
      type: "SET_VALUES",
      payload: resolvedValues
    });
    var willValidate = shouldValidate === void 0 ? validateOnChange : shouldValidate;
    return willValidate ? validateFormWithHighPriority(resolvedValues) : Promise.resolve();
  });
  var setFieldError = useCallback7(function(field, value) {
    dispatch({
      type: "SET_FIELD_ERROR",
      payload: {
        field,
        value
      }
    });
  }, []);
  var setFieldValue = useEventCallback(function(field, value, shouldValidate) {
    dispatch({
      type: "SET_FIELD_VALUE",
      payload: {
        field,
        value
      }
    });
    var willValidate = shouldValidate === void 0 ? validateOnChange : shouldValidate;
    return willValidate ? validateFormWithHighPriority(setIn(state.values, field, value)) : Promise.resolve();
  });
  var executeChange = useCallback7(function(eventOrTextValue, maybePath) {
    var field = maybePath;
    var val = eventOrTextValue;
    var parsed;
    if (!isString(eventOrTextValue)) {
      if (eventOrTextValue.persist) {
        eventOrTextValue.persist();
      }
      var target = eventOrTextValue.target ? eventOrTextValue.target : eventOrTextValue.currentTarget;
      var type = target.type, name = target.name, id = target.id, value = target.value, checked = target.checked, outerHTML = target.outerHTML, options = target.options, multiple = target.multiple;
      field = maybePath ? maybePath : name ? name : id;
      if (!field && process.env.NODE_ENV !== "production") {
        warnAboutMissingIdentifier({
          htmlContent: outerHTML,
          documentationAnchorLink: "handlechange-e-reactchangeeventany--void",
          handlerName: "handleChange"
        });
      }
      val = /number|range/.test(type) ? (parsed = parseFloat(value), isNaN(parsed) ? "" : parsed) : /checkbox/.test(type) ? getValueForCheckbox(getIn2(state.values, field), checked, value) : options && multiple ? getSelectedValues(options) : value;
    }
    if (field) {
      setFieldValue(field, val);
    }
  }, [setFieldValue, state.values]);
  var handleChange = useEventCallback(function(eventOrPath) {
    if (isString(eventOrPath)) {
      return function(event) {
        return executeChange(event, eventOrPath);
      };
    } else {
      executeChange(eventOrPath);
    }
  });
  var setFieldTouched = useEventCallback(function(field, touched, shouldValidate) {
    if (touched === void 0) {
      touched = true;
    }
    dispatch({
      type: "SET_FIELD_TOUCHED",
      payload: {
        field,
        value: touched
      }
    });
    var willValidate = shouldValidate === void 0 ? validateOnBlur : shouldValidate;
    return willValidate ? validateFormWithHighPriority(state.values) : Promise.resolve();
  });
  var executeBlur = useCallback7(function(e2, path) {
    if (e2.persist) {
      e2.persist();
    }
    var _e$target = e2.target, name = _e$target.name, id = _e$target.id, outerHTML = _e$target.outerHTML;
    var field = path ? path : name ? name : id;
    if (!field && process.env.NODE_ENV !== "production") {
      warnAboutMissingIdentifier({
        htmlContent: outerHTML,
        documentationAnchorLink: "handleblur-e-any--void",
        handlerName: "handleBlur"
      });
    }
    setFieldTouched(field, true);
  }, [setFieldTouched]);
  var handleBlur = useEventCallback(function(eventOrString) {
    if (isString(eventOrString)) {
      return function(event) {
        return executeBlur(event, eventOrString);
      };
    } else {
      executeBlur(eventOrString);
    }
  });
  var setFormikState = useCallback7(function(stateOrCb) {
    if (isFunction2(stateOrCb)) {
      dispatch({
        type: "SET_FORMIK_STATE",
        payload: stateOrCb
      });
    } else {
      dispatch({
        type: "SET_FORMIK_STATE",
        payload: function payload() {
          return stateOrCb;
        }
      });
    }
  }, []);
  var setStatus = useCallback7(function(status) {
    dispatch({
      type: "SET_STATUS",
      payload: status
    });
  }, []);
  var setSubmitting = useCallback7(function(isSubmitting) {
    dispatch({
      type: "SET_ISSUBMITTING",
      payload: isSubmitting
    });
  }, []);
  var submitForm = useEventCallback(function() {
    dispatch({
      type: "SUBMIT_ATTEMPT"
    });
    return validateFormWithHighPriority().then(function(combinedErrors) {
      var isInstanceOfError = combinedErrors instanceof Error;
      var isActuallyValid = !isInstanceOfError && Object.keys(combinedErrors).length === 0;
      if (isActuallyValid) {
        var promiseOrUndefined;
        try {
          promiseOrUndefined = executeSubmit();
          if (promiseOrUndefined === void 0) {
            return;
          }
        } catch (error2) {
          throw error2;
        }
        return Promise.resolve(promiseOrUndefined).then(function(result) {
          if (!!isMounted.current) {
            dispatch({
              type: "SUBMIT_SUCCESS"
            });
          }
          return result;
        })["catch"](function(_errors) {
          if (!!isMounted.current) {
            dispatch({
              type: "SUBMIT_FAILURE"
            });
            throw _errors;
          }
        });
      } else if (!!isMounted.current) {
        dispatch({
          type: "SUBMIT_FAILURE"
        });
        if (isInstanceOfError) {
          throw combinedErrors;
        }
      }
      return;
    });
  });
  var handleSubmit = useEventCallback(function(e2) {
    if (e2 && e2.preventDefault && isFunction2(e2.preventDefault)) {
      e2.preventDefault();
    }
    if (e2 && e2.stopPropagation && isFunction2(e2.stopPropagation)) {
      e2.stopPropagation();
    }
    if (process.env.NODE_ENV !== "production" && typeof document !== "undefined") {
      var activeElement = getActiveElement();
      if (activeElement !== null && activeElement instanceof HTMLButtonElement) {
        !(activeElement.attributes && activeElement.attributes.getNamedItem("type")) ? process.env.NODE_ENV !== "production" ? tiny_warning_esm_default(false, 'You submitted a Formik form using a button with an unspecified `type` attribute.  Most browsers default button elements to `type="submit"`. If this is not a submit button, please add `type="button"`.') : tiny_warning_esm_default(false) : void 0;
      }
    }
    submitForm()["catch"](function(reason) {
      console.warn("Warning: An unhandled error was caught from submitForm()", reason);
    });
  });
  var imperativeMethods = {
    resetForm,
    validateForm: validateFormWithHighPriority,
    validateField,
    setErrors,
    setFieldError,
    setFieldTouched,
    setFieldValue,
    setStatus,
    setSubmitting,
    setTouched,
    setValues,
    setFormikState,
    submitForm
  };
  var executeSubmit = useEventCallback(function() {
    return onSubmit(state.values, imperativeMethods);
  });
  var handleReset = useEventCallback(function(e2) {
    if (e2 && e2.preventDefault && isFunction2(e2.preventDefault)) {
      e2.preventDefault();
    }
    if (e2 && e2.stopPropagation && isFunction2(e2.stopPropagation)) {
      e2.stopPropagation();
    }
    resetForm();
  });
  var getFieldMeta = useCallback7(function(name) {
    return {
      value: getIn2(state.values, name),
      error: getIn2(state.errors, name),
      touched: !!getIn2(state.touched, name),
      initialValue: getIn2(initialValues.current, name),
      initialTouched: !!getIn2(initialTouched.current, name),
      initialError: getIn2(initialErrors.current, name)
    };
  }, [state.errors, state.touched, state.values]);
  var getFieldHelpers = useCallback7(function(name) {
    return {
      setValue: function setValue(value, shouldValidate) {
        return setFieldValue(name, value, shouldValidate);
      },
      setTouched: function setTouched2(value, shouldValidate) {
        return setFieldTouched(name, value, shouldValidate);
      },
      setError: function setError(value) {
        return setFieldError(name, value);
      }
    };
  }, [setFieldValue, setFieldTouched, setFieldError]);
  var getFieldProps = useCallback7(function(nameOrOptions) {
    var isAnObject = isObject3(nameOrOptions);
    var name = isAnObject ? nameOrOptions.name : nameOrOptions;
    var valueState = getIn2(state.values, name);
    var field = {
      name,
      value: valueState,
      onChange: handleChange,
      onBlur: handleBlur
    };
    if (isAnObject) {
      var type = nameOrOptions.type, valueProp = nameOrOptions.value, is = nameOrOptions.as, multiple = nameOrOptions.multiple;
      if (type === "checkbox") {
        if (valueProp === void 0) {
          field.checked = !!valueState;
        } else {
          field.checked = !!(Array.isArray(valueState) && ~valueState.indexOf(valueProp));
          field.value = valueProp;
        }
      } else if (type === "radio") {
        field.checked = valueState === valueProp;
        field.value = valueProp;
      } else if (is === "select" && multiple) {
        field.value = field.value || [];
        field.multiple = true;
      }
    }
    return field;
  }, [handleBlur, handleChange, state.values]);
  var dirty = useMemo3(function() {
    return !(0, import_react_fast_compare.default)(initialValues.current, state.values);
  }, [initialValues.current, state.values]);
  var isValid = useMemo3(function() {
    return typeof isInitialValid !== "undefined" ? dirty ? state.errors && Object.keys(state.errors).length === 0 : isInitialValid !== false && isFunction2(isInitialValid) ? isInitialValid(props) : isInitialValid : state.errors && Object.keys(state.errors).length === 0;
  }, [isInitialValid, dirty, state.errors, props]);
  var ctx = _extends({}, state, {
    initialValues: initialValues.current,
    initialErrors: initialErrors.current,
    initialTouched: initialTouched.current,
    initialStatus: initialStatus.current,
    handleBlur,
    handleChange,
    handleReset,
    handleSubmit,
    resetForm,
    setErrors,
    setFormikState,
    setFieldTouched,
    setFieldValue,
    setFieldError,
    setStatus,
    setSubmitting,
    setTouched,
    setValues,
    submitForm,
    validateForm: validateFormWithHighPriority,
    validateField,
    isValid,
    dirty,
    unregisterField,
    registerField,
    getFieldProps,
    getFieldMeta,
    getFieldHelpers,
    validateOnBlur,
    validateOnChange,
    validateOnMount
  });
  return ctx;
}
function warnAboutMissingIdentifier(_ref4) {
  var htmlContent = _ref4.htmlContent, documentationAnchorLink = _ref4.documentationAnchorLink, handlerName = _ref4.handlerName;
  console.warn("Warning: Formik called `" + handlerName + "`, but you forgot to pass an `id` or `name` attribute to your input:\n    " + htmlContent + "\n    Formik cannot determine which value to update. For more info see https://formik.org/docs/api/formik#" + documentationAnchorLink + "\n  ");
}
function yupToFormErrors(yupError) {
  var errors = {};
  if (yupError.inner) {
    if (yupError.inner.length === 0) {
      return setIn(errors, yupError.path, yupError.message);
    }
    for (var _iterator = yupError.inner, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator](); ; ) {
      var _ref5;
      if (_isArray) {
        if (_i >= _iterator.length)
          break;
        _ref5 = _iterator[_i++];
      } else {
        _i = _iterator.next();
        if (_i.done)
          break;
        _ref5 = _i.value;
      }
      var err = _ref5;
      if (!getIn2(errors, err.path)) {
        errors = setIn(errors, err.path, err.message);
      }
    }
  }
  return errors;
}
function validateYupSchema(values, schema, sync, context) {
  if (sync === void 0) {
    sync = false;
  }
  var normalizedValues = prepareDataForValidation(values);
  return schema[sync ? "validateSync" : "validate"](normalizedValues, {
    abortEarly: false,
    context: context || normalizedValues
  });
}
function prepareDataForValidation(values) {
  var data = Array.isArray(values) ? [] : {};
  for (var k2 in values) {
    if (Object.prototype.hasOwnProperty.call(values, k2)) {
      var key = String(k2);
      if (Array.isArray(values[key]) === true) {
        data[key] = values[key].map(function(value) {
          if (Array.isArray(value) === true || isPlainObject_default(value)) {
            return prepareDataForValidation(value);
          } else {
            return value !== "" ? value : void 0;
          }
        });
      } else if (isPlainObject_default(values[key])) {
        data[key] = prepareDataForValidation(values[key]);
      } else {
        data[key] = values[key] !== "" ? values[key] : void 0;
      }
    }
  }
  return data;
}
function arrayMerge(target, source, options) {
  var destination = target.slice();
  source.forEach(function merge(e2, i) {
    if (typeof destination[i] === "undefined") {
      var cloneRequested = options.clone !== false;
      var shouldClone = cloneRequested && options.isMergeableObject(e2);
      destination[i] = shouldClone ? es_default(Array.isArray(e2) ? [] : {}, e2, options) : e2;
    } else if (options.isMergeableObject(e2)) {
      destination[i] = es_default(target[i], e2, options);
    } else if (target.indexOf(e2) === -1) {
      destination.push(e2);
    }
  });
  return destination;
}
function getSelectedValues(options) {
  return Array.from(options).filter(function(el) {
    return el.selected;
  }).map(function(el) {
    return el.value;
  });
}
function getValueForCheckbox(currentValue, checked, valueProp) {
  if (typeof currentValue === "boolean") {
    return Boolean(checked);
  }
  var currentArrayOfValues = [];
  var isValueInArray = false;
  var index = -1;
  if (!Array.isArray(currentValue)) {
    if (!valueProp || valueProp == "true" || valueProp == "false") {
      return Boolean(checked);
    }
  } else {
    currentArrayOfValues = currentValue;
    index = currentValue.indexOf(valueProp);
    isValueInArray = index >= 0;
  }
  if (checked && valueProp && !isValueInArray) {
    return currentArrayOfValues.concat(valueProp);
  }
  if (!isValueInArray) {
    return currentArrayOfValues;
  }
  return currentArrayOfValues.slice(0, index).concat(currentArrayOfValues.slice(index + 1));
}
var useIsomorphicLayoutEffect = typeof window !== "undefined" && typeof window.document !== "undefined" && typeof window.document.createElement !== "undefined" ? useLayoutEffect : useEffect14;
function useEventCallback(fn) {
  var ref = useRef7(fn);
  useIsomorphicLayoutEffect(function() {
    ref.current = fn;
  });
  return useCallback7(function() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return ref.current.apply(void 0, args);
  }, []);
}
var Form = /* @__PURE__ */ forwardRef12(function(props, ref) {
  var action = props.action, rest = _objectWithoutPropertiesLoose(props, ["action"]);
  var _action = action != null ? action : "#";
  var _useFormikContext = useFormikContext(), handleReset = _useFormikContext.handleReset, handleSubmit = _useFormikContext.handleSubmit;
  return createElement("form", _extends({
    onSubmit: handleSubmit,
    ref,
    onReset: handleReset,
    action: _action
  }, rest));
});
Form.displayName = "Form";
var move = function move2(array2, from, to) {
  var copy = copyArrayLike(array2);
  var value = copy[from];
  copy.splice(from, 1);
  copy.splice(to, 0, value);
  return copy;
};
var swap = function swap2(arrayLike, indexA, indexB) {
  var copy = copyArrayLike(arrayLike);
  var a = copy[indexA];
  copy[indexA] = copy[indexB];
  copy[indexB] = a;
  return copy;
};
var insert = function insert2(arrayLike, index, value) {
  var copy = copyArrayLike(arrayLike);
  copy.splice(index, 0, value);
  return copy;
};
var replace = function replace2(arrayLike, index, value) {
  var copy = copyArrayLike(arrayLike);
  copy[index] = value;
  return copy;
};
var copyArrayLike = function copyArrayLike2(arrayLike) {
  if (!arrayLike) {
    return [];
  } else if (Array.isArray(arrayLike)) {
    return [].concat(arrayLike);
  } else {
    var maxIndex = Object.keys(arrayLike).map(function(key) {
      return parseInt(key);
    }).reduce(function(max, el) {
      return el > max ? el : max;
    }, 0);
    return Array.from(_extends({}, arrayLike, {
      length: maxIndex + 1
    }));
  }
};
var createAlterationHandler = function createAlterationHandler2(alteration, defaultFunction) {
  var fn = typeof alteration === "function" ? alteration : defaultFunction;
  return function(data) {
    if (Array.isArray(data) || isObject3(data)) {
      var clone3 = copyArrayLike(data);
      return fn(clone3);
    }
    return data;
  };
};
var FieldArrayInner = /* @__PURE__ */ function(_React$Component) {
  _inheritsLoose(FieldArrayInner2, _React$Component);
  function FieldArrayInner2(props) {
    var _this;
    _this = _React$Component.call(this, props) || this;
    _this.updateArrayField = function(fn, alterTouched, alterErrors) {
      var _this$props = _this.props, name = _this$props.name, setFormikState = _this$props.formik.setFormikState;
      setFormikState(function(prevState) {
        var updateErrors = createAlterationHandler(alterErrors, fn);
        var updateTouched = createAlterationHandler(alterTouched, fn);
        var values = setIn(prevState.values, name, fn(getIn2(prevState.values, name)));
        var fieldError = alterErrors ? updateErrors(getIn2(prevState.errors, name)) : void 0;
        var fieldTouched = alterTouched ? updateTouched(getIn2(prevState.touched, name)) : void 0;
        if (isEmptyArray(fieldError)) {
          fieldError = void 0;
        }
        if (isEmptyArray(fieldTouched)) {
          fieldTouched = void 0;
        }
        return _extends({}, prevState, {
          values,
          errors: alterErrors ? setIn(prevState.errors, name, fieldError) : prevState.errors,
          touched: alterTouched ? setIn(prevState.touched, name, fieldTouched) : prevState.touched
        });
      });
    };
    _this.push = function(value) {
      return _this.updateArrayField(function(arrayLike) {
        return [].concat(copyArrayLike(arrayLike), [cloneDeep_default(value)]);
      }, false, false);
    };
    _this.handlePush = function(value) {
      return function() {
        return _this.push(value);
      };
    };
    _this.swap = function(indexA, indexB) {
      return _this.updateArrayField(function(array2) {
        return swap(array2, indexA, indexB);
      }, true, true);
    };
    _this.handleSwap = function(indexA, indexB) {
      return function() {
        return _this.swap(indexA, indexB);
      };
    };
    _this.move = function(from, to) {
      return _this.updateArrayField(function(array2) {
        return move(array2, from, to);
      }, true, true);
    };
    _this.handleMove = function(from, to) {
      return function() {
        return _this.move(from, to);
      };
    };
    _this.insert = function(index, value) {
      return _this.updateArrayField(function(array2) {
        return insert(array2, index, value);
      }, function(array2) {
        return insert(array2, index, null);
      }, function(array2) {
        return insert(array2, index, null);
      });
    };
    _this.handleInsert = function(index, value) {
      return function() {
        return _this.insert(index, value);
      };
    };
    _this.replace = function(index, value) {
      return _this.updateArrayField(function(array2) {
        return replace(array2, index, value);
      }, false, false);
    };
    _this.handleReplace = function(index, value) {
      return function() {
        return _this.replace(index, value);
      };
    };
    _this.unshift = function(value) {
      var length = -1;
      _this.updateArrayField(function(array2) {
        var arr = array2 ? [value].concat(array2) : [value];
        length = arr.length;
        return arr;
      }, function(array2) {
        return array2 ? [null].concat(array2) : [null];
      }, function(array2) {
        return array2 ? [null].concat(array2) : [null];
      });
      return length;
    };
    _this.handleUnshift = function(value) {
      return function() {
        return _this.unshift(value);
      };
    };
    _this.handleRemove = function(index) {
      return function() {
        return _this.remove(index);
      };
    };
    _this.handlePop = function() {
      return function() {
        return _this.pop();
      };
    };
    _this.remove = _this.remove.bind(_assertThisInitialized(_this));
    _this.pop = _this.pop.bind(_assertThisInitialized(_this));
    return _this;
  }
  var _proto = FieldArrayInner2.prototype;
  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {
    if (this.props.validateOnChange && this.props.formik.validateOnChange && !(0, import_react_fast_compare.default)(getIn2(prevProps.formik.values, prevProps.name), getIn2(this.props.formik.values, this.props.name))) {
      this.props.formik.validateForm(this.props.formik.values);
    }
  };
  _proto.remove = function remove(index) {
    var result;
    this.updateArrayField(
      // so this gets call 3 times
      function(array2) {
        var copy = array2 ? copyArrayLike(array2) : [];
        if (!result) {
          result = copy[index];
        }
        if (isFunction2(copy.splice)) {
          copy.splice(index, 1);
        }
        return isFunction2(copy.every) ? copy.every(function(v2) {
          return v2 === void 0;
        }) ? [] : copy : copy;
      },
      true,
      true
    );
    return result;
  };
  _proto.pop = function pop() {
    var result;
    this.updateArrayField(
      // so this gets call 3 times
      function(array2) {
        var tmp = array2.slice();
        if (!result) {
          result = tmp && tmp.pop && tmp.pop();
        }
        return tmp;
      },
      true,
      true
    );
    return result;
  };
  _proto.render = function render() {
    var arrayHelpers = {
      push: this.push,
      pop: this.pop,
      swap: this.swap,
      move: this.move,
      insert: this.insert,
      replace: this.replace,
      unshift: this.unshift,
      remove: this.remove,
      handlePush: this.handlePush,
      handlePop: this.handlePop,
      handleSwap: this.handleSwap,
      handleMove: this.handleMove,
      handleInsert: this.handleInsert,
      handleReplace: this.handleReplace,
      handleUnshift: this.handleUnshift,
      handleRemove: this.handleRemove
    };
    var _this$props2 = this.props, component = _this$props2.component, render2 = _this$props2.render, children = _this$props2.children, name = _this$props2.name, _this$props2$formik = _this$props2.formik, restOfFormik = _objectWithoutPropertiesLoose(_this$props2$formik, ["validate", "validationSchema"]);
    var props = _extends({}, arrayHelpers, {
      form: restOfFormik,
      name
    });
    return component ? createElement(component, props) : render2 ? render2(props) : children ? typeof children === "function" ? children(props) : !isEmptyChildren(children) ? Children.only(children) : null : null;
  };
  return FieldArrayInner2;
}(Component);
FieldArrayInner.defaultProps = {
  validateOnChange: true
};

// src/components/forms/LoginForm.tsx
import { Eye, EyeOff, Mail, Lock } from "lucide-react";
import { Button as Button9, Card as Card7, CardHeader as CardHeader7, CardTitle as CardTitle7, CardDescription as CardDescription2, CardContent as CardContent7, Input as Input5 } from "@rentalshop/ui";
import { useAuthTranslations } from "@rentalshop/hooks";

// src/components/layout/LanguageSwitcher.tsx
import { useTransition } from "react";

// ../../node_modules/use-intl/dist/esm/production/react.js
import { createContext as e, useContext as r, useMemo as o, useState as t, useEffect as n } from "react";
import { jsx as g } from "react/jsx-runtime";
var d = e(void 0);
function v() {
  const e2 = r(d);
  if (!e2)
    throw new Error(void 0);
  return e2;
}
function Z() {
  return v().locale;
}

// src/components/layout/LanguageSwitcher.tsx
import { useRouter } from "next/navigation";
import { Button as Button8 } from "@rentalshop/ui";
import { Globe } from "lucide-react";
import { jsx as jsx50, jsxs as jsxs36 } from "react/jsx-runtime";
var LanguageSwitcher = ({
  variant = "default"
}) => {
  const currentLocale = Z();
  const router = useRouter();
  const [isPending, startTransition] = useTransition();
  const handleLanguageChange = (newLocale) => {
    if (newLocale === currentLocale)
      return;
    startTransition(() => {
      document.cookie = `NEXT_LOCALE=${newLocale};path=/;max-age=31536000;SameSite=Lax`;
      if (typeof window !== "undefined") {
        localStorage.setItem("user_language_preference", newLocale);
      }
      router.refresh();
    });
  };
  if (variant === "compact") {
    return /* @__PURE__ */ jsxs36("div", { className: "flex items-center gap-1", children: [
      /* @__PURE__ */ jsx50(
        Button8,
        {
          variant: currentLocale === "en" ? "default" : "ghost",
          size: "sm",
          onClick: () => handleLanguageChange("en"),
          disabled: isPending,
          className: "text-xs px-2 py-1 min-w-[40px]",
          children: "EN"
        }
      ),
      /* @__PURE__ */ jsx50(
        Button8,
        {
          variant: currentLocale === "vi" ? "default" : "ghost",
          size: "sm",
          onClick: () => handleLanguageChange("vi"),
          disabled: isPending,
          className: "text-xs px-2 py-1 min-w-[40px]",
          children: "VI"
        }
      )
    ] });
  }
  return /* @__PURE__ */ jsxs36("div", { className: "flex items-center gap-2", children: [
    /* @__PURE__ */ jsx50(Globe, { className: "w-4 h-4 text-text-tertiary" }),
    /* @__PURE__ */ jsx50(
      Button8,
      {
        variant: currentLocale === "en" ? "default" : "ghost",
        size: "sm",
        onClick: () => handleLanguageChange("en"),
        disabled: isPending,
        className: "min-w-[50px]",
        children: "EN"
      }
    ),
    /* @__PURE__ */ jsx50(
      Button8,
      {
        variant: currentLocale === "vi" ? "default" : "ghost",
        size: "sm",
        onClick: () => handleLanguageChange("vi"),
        disabled: isPending,
        className: "min-w-[50px]",
        children: "VI"
      }
    ),
    isPending && /* @__PURE__ */ jsx50("div", { className: "h-4 w-4 border-2 border-action-primary border-t-transparent rounded-full animate-spin" })
  ] });
};

// src/components/forms/LoginForm.tsx
import { jsx as jsx51, jsxs as jsxs37 } from "react/jsx-runtime";
var LoginForm = ({
  onLogin,
  onNavigate,
  error: error2,
  loading = false,
  isAdmin = false,
  onInputChange
}) => {
  const [viewPass, setViewPass] = useState22(false);
  const t2 = useAuthTranslations();
  const validationSchema = create$3({
    email: create$6().email(t2("login.invalidEmail")).required(t2("login.invalidEmail")),
    password: create$6().min(6, t2("login.invalidPassword")).required(t2("login.invalidPassword"))
  });
  const validation = useFormik({
    enableReinitialize: true,
    initialValues: {
      email: "",
      password: ""
    },
    validationSchema,
    onSubmit: async (values) => {
      try {
        if (onLogin) {
          await onLogin(values);
        } else {
          console.log("Login data:", values);
        }
      } catch (error3) {
        console.error("Login failed:", error3);
      }
    }
  });
  const handleSubmit = (e2) => {
    e2.preventDefault();
    validation.handleSubmit();
  };
  const togglePasswordVisibility = () => {
    setViewPass(!viewPass);
  };
  return /* @__PURE__ */ jsxs37("div", { className: "min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4 relative", children: [
    /* @__PURE__ */ jsx51("div", { className: "absolute top-4 right-4", children: /* @__PURE__ */ jsx51(LanguageSwitcher, { variant: "compact" }) }),
    /* @__PURE__ */ jsxs37("div", { className: "w-full max-w-md", children: [
      /* @__PURE__ */ jsxs37("div", { className: "text-center mb-6", children: [
        /* @__PURE__ */ jsx51("div", { className: "inline-block", children: /* @__PURE__ */ jsx51("div", { className: "h-12 w-12 mx-auto bg-blue-600 rounded-lg flex items-center justify-center", children: /* @__PURE__ */ jsx51("span", { className: "text-white font-bold text-xl", children: "R" }) }) }),
        /* @__PURE__ */ jsx51("h1", { className: "mt-4 text-2xl font-bold text-gray-800", children: isAdmin ? "Admin Login" : t2("login.title") }),
        /* @__PURE__ */ jsx51("p", { className: "mt-2 text-sm text-gray-600", children: isAdmin ? "Sign in to admin panel" : t2("login.subtitle") })
      ] }),
      /* @__PURE__ */ jsxs37(Card7, { className: "shadow-lg", children: [
        /* @__PURE__ */ jsxs37(CardHeader7, { className: "text-center border-b border-gray-200 bg-gray-50 rounded-t-lg", children: [
          /* @__PURE__ */ jsx51(CardTitle7, { className: "text-xl font-semibold text-gray-800", children: isAdmin ? "Admin Sign In" : t2("login.title") }),
          /* @__PURE__ */ jsx51(CardDescription2, { className: "text-sm text-gray-600 mt-1", children: t2("login.subtitle") })
        ] }),
        /* @__PURE__ */ jsx51(CardContent7, { className: "p-6", children: /* @__PURE__ */ jsxs37("form", { onSubmit: handleSubmit, children: [
          error2 && /* @__PURE__ */ jsxs37("div", { className: "mb-4 p-3 text-sm text-red-700 bg-red-100 border border-red-200 rounded-lg flex items-center", children: [
            /* @__PURE__ */ jsx51("div", { className: "w-4 h-4 mr-2", children: "\u26A0\uFE0F" }),
            error2
          ] }),
          /* @__PURE__ */ jsxs37("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs37("div", { children: [
              /* @__PURE__ */ jsx51("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: t2("login.email") }),
              /* @__PURE__ */ jsxs37("div", { className: "relative", children: [
                /* @__PURE__ */ jsx51(Mail, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }),
                /* @__PURE__ */ jsx51(
                  Input5,
                  {
                    type: "email",
                    placeholder: t2("login.email"),
                    className: "pl-10",
                    onChange: (e2) => {
                      validation.handleChange(e2);
                      onInputChange?.();
                    },
                    onBlur: validation.handleBlur,
                    value: validation.values.email || "",
                    name: "email"
                  }
                )
              ] }),
              validation.touched.email && validation.errors.email && /* @__PURE__ */ jsx51("p", { className: "mt-1 text-sm text-red-600", children: validation.errors.email })
            ] }),
            /* @__PURE__ */ jsxs37("div", { children: [
              /* @__PURE__ */ jsx51("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: t2("login.password") }),
              /* @__PURE__ */ jsxs37("div", { className: "relative", children: [
                /* @__PURE__ */ jsx51(Lock, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }),
                /* @__PURE__ */ jsx51(
                  Input5,
                  {
                    type: viewPass ? "text" : "password",
                    placeholder: t2("login.password"),
                    className: "pl-10 pr-10",
                    onChange: (e2) => {
                      validation.handleChange(e2);
                      onInputChange?.();
                    },
                    onBlur: validation.handleBlur,
                    value: validation.values.password || "",
                    name: "password"
                  }
                ),
                /* @__PURE__ */ jsx51(
                  Button9,
                  {
                    variant: "ghost",
                    size: "icon",
                    type: "button",
                    className: "absolute right-1 top-1 p-1 text-gray-400 hover:text-gray-600 h-auto w-auto",
                    onClick: togglePasswordVisibility,
                    children: viewPass ? /* @__PURE__ */ jsx51(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx51(Eye, { className: "h-4 w-4" })
                  }
                )
              ] }),
              validation.touched.password && validation.errors.password && /* @__PURE__ */ jsx51("p", { className: "mt-1 text-sm text-red-600", children: validation.errors.password })
            ] }),
            /* @__PURE__ */ jsxs37("div", { className: "flex items-center", children: [
              /* @__PURE__ */ jsx51(
                "input",
                {
                  type: "checkbox",
                  id: "remember",
                  className: "h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"
                }
              ),
              /* @__PURE__ */ jsx51("label", { htmlFor: "remember", className: "ml-2 text-sm text-gray-600", children: t2("login.rememberMe") })
            ] }),
            /* @__PURE__ */ jsx51(
              Button9,
              {
                type: "submit",
                className: "w-full",
                disabled: loading,
                children: loading ? /* @__PURE__ */ jsxs37("div", { className: "flex items-center justify-center", children: [
                  /* @__PURE__ */ jsx51("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }),
                  t2("login.loginButton"),
                  "..."
                ] }) : t2("login.loginButton")
              }
            )
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs37("div", { className: "mt-6 text-center space-y-2", children: [
        !isAdmin && /* @__PURE__ */ jsxs37("p", { className: "text-sm text-gray-600", children: [
          t2("login.noAccount"),
          " ",
          /* @__PURE__ */ jsx51(
            Button9,
            {
              variant: "link",
              onClick: () => onNavigate?.("/register"),
              className: "font-medium text-blue-600 hover:text-blue-800 hover:underline p-0 h-auto",
              children: t2("login.signUp")
            }
          )
        ] }),
        /* @__PURE__ */ jsx51("p", { className: "text-sm text-gray-600", children: /* @__PURE__ */ jsx51(
          Button9,
          {
            variant: "link",
            onClick: () => onNavigate?.("/forget-password"),
            className: "font-medium text-blue-600 hover:text-blue-800 hover:underline p-0 h-auto",
            children: t2("login.forgotPassword")
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx51("div", { className: "mt-8 text-center", children: /* @__PURE__ */ jsxs37("p", { className: "text-xs text-gray-500", children: [
        "\xA9 ",
        (/* @__PURE__ */ new Date()).getFullYear(),
        " ",
        isAdmin ? "RentalShop Admin" : "RentalShop",
        ". Crafted with",
        " ",
        /* @__PURE__ */ jsx51("span", { className: "text-red-500", children: "\u2764" }),
        " by RentalShop"
      ] }) })
    ] })
  ] });
};
var LoginForm_default = LoginForm;

// src/components/forms/RegisterForm.tsx
import { useState as useState23 } from "react";
import { Eye as Eye2, EyeOff as EyeOff2, Mail as Mail2, Lock as Lock2, User as User3, Store, Phone, CheckCircle as CheckCircle10, MapPin } from "lucide-react";
import { authApi } from "@rentalshop/utils";
import {
  BUSINESS_TYPE_OPTIONS,
  PRICING_TYPE_OPTIONS,
  COUNTRIES,
  getDefaultCountry
} from "@rentalshop/constants";
import {
  Button as Button10,
  Card as Card8,
  CardHeader as CardHeader8,
  CardTitle as CardTitle8,
  CardDescription as CardDescription3,
  CardContent as CardContent8,
  Input as Input6,
  Select as Select4,
  SelectContent as SelectContent4,
  SelectItem as SelectItem4,
  SelectTrigger as SelectTrigger4,
  SelectValue as SelectValue4,
  useToast as useToast5
} from "@rentalshop/ui";
import { useAuthTranslations as useAuthTranslations2 } from "@rentalshop/hooks";
import { Fragment as Fragment8, jsx as jsx52, jsxs as jsxs38 } from "react/jsx-runtime";
var RegisterForm = ({
  onRegister,
  onNavigate,
  user,
  registrationError
}) => {
  const [viewPass, setViewPass] = useState23(false);
  const [viewConfirmPass, setViewConfirmPass] = useState23(false);
  const [currentStep, setCurrentStep] = useState23(1);
  const [accountData, setAccountData] = useState23({});
  const [isSubmitting, setIsSubmitting] = useState23(false);
  const { toastSuccess, toastError, removeToast } = useToast5();
  const t2 = useAuthTranslations2();
  const step1ValidationSchema = create$3({
    login: create$6().email(t2("login.invalidEmail")).required(t2("register.emailRequired")),
    password: create$6().min(6, t2("register.passwordMinLength")).max(25, t2("register.passwordMaxLength")).required(t2("register.passwordRequired")),
    confirmPassword: create$6().oneOf([create$9("password")], t2("register.passwordMismatch")).required(t2("register.confirmPasswordRequired")),
    firstName: create$6().min(1, t2("register.firstNameRequired")).required(t2("register.firstNameRequired")),
    lastName: create$6().min(1, t2("register.lastNameRequired")).required(t2("register.lastNameRequired")),
    phone: create$6().matches(/^[0-9+\-\s()]+$/, t2("register.phoneInvalid")).min(10, t2("register.phoneMinLength")).required(t2("register.phoneRequired"))
  });
  const step2ValidationSchema = create$3({
    businessName: create$6().min(2, t2("register.businessNameMinLength")).required(t2("register.businessNameRequired")),
    businessType: create$6().oneOf(["CLOTHING", "VEHICLE", "EQUIPMENT", "GENERAL"], t2("register.businessTypeRequired")).required(t2("register.businessTypeRequired")),
    pricingType: create$6().oneOf(["FIXED", "HOURLY", "DAILY", "WEEKLY"], t2("register.pricingTypeRequired")).required(t2("register.pricingTypeRequired")),
    address: create$6().min(5, t2("register.addressMinLength")).required(t2("register.addressRequired")),
    city: create$6().min(2, t2("register.cityMinLength")).required(t2("register.cityRequired")),
    state: create$6().min(2, t2("register.stateMinLength")).required(t2("register.stateRequired")),
    zipCode: create$6().matches(/^[0-9]{5}(-[0-9]{4})?$/, t2("register.zipCodeInvalid")).required(t2("register.zipCodeRequired")),
    country: create$6().min(2, t2("register.countryMinLength")).required(t2("register.countryRequired")),
    acceptTermsAndPrivacy: create$7().oneOf([true], t2("register.agreeToTerms")).required(t2("register.agreeToTerms"))
  });
  const formik = useFormik({
    initialValues: {
      login: "",
      password: "",
      confirmPassword: "",
      firstName: "",
      lastName: "",
      phone: "",
      businessName: "",
      businessType: "GENERAL",
      pricingType: "FIXED",
      address: "",
      city: "",
      state: "",
      zipCode: "",
      country: getDefaultCountry().name,
      acceptTermsAndPrivacy: false,
      role: "MERCHANT"
    },
    validationSchema: currentStep === 1 ? step1ValidationSchema : step2ValidationSchema,
    onSubmit: async (values) => {
      if (isSubmitting) {
        return;
      }
      setIsSubmitting(true);
      const timeoutId = setTimeout(() => {
        setIsSubmitting(false);
      }, 1e4);
      if (currentStep === 1) {
        setAccountData({
          login: values.login,
          password: values.password,
          confirmPassword: values.confirmPassword,
          firstName: values.firstName,
          lastName: values.lastName,
          phone: values.phone,
          role: values.role
        });
        setCurrentStep(2);
        return;
      }
      const completeData = { ...accountData, ...values };
      try {
        const registrationData = {
          name: `${completeData.firstName} ${completeData.lastName}`,
          email: completeData.login,
          password: completeData.password,
          firstName: completeData.firstName,
          lastName: completeData.lastName,
          phone: completeData.phone,
          role: completeData.role,
          businessName: values.businessName,
          businessType: values.businessType,
          pricingType: values.pricingType,
          address: values.address,
          city: values.city,
          state: values.state,
          zipCode: values.zipCode,
          country: values.country
        };
        const result = await authApi.register(registrationData);
        if (!result.success) {
          throw new Error(result.message || result.error || "Registration failed");
        }
        if (result.data?.token) {
          const { storeAuthData } = await import("@rentalshop/utils");
          storeAuthData(result.data.token, result.data.user);
        }
        toastSuccess(t2("register.registrationComplete"), t2("register.accountCreatedSuccessfully"));
        formik.resetForm();
        setCurrentStep(1);
        setAccountData({});
        setTimeout(() => {
          window.location.href = "/login";
        }, 2e3);
      } catch (error2) {
        toastError(
          t2("register.registrationFailed"),
          error2.message || t2("register.somethingWentWrong")
        );
      } finally {
        clearTimeout(timeoutId);
        setIsSubmitting(false);
      }
    }
  });
  return /* @__PURE__ */ jsxs38("div", { className: "w-full max-w-md mx-auto", children: [
    /* @__PURE__ */ jsxs38(Card8, { className: "shadow-lg", children: [
      /* @__PURE__ */ jsxs38(CardHeader8, { className: "text-center", children: [
        /* @__PURE__ */ jsx52(CardTitle8, { className: "text-2xl font-bold text-gray-900", children: t2("register.createMerchantAccount") }),
        /* @__PURE__ */ jsx52(CardDescription3, { className: "text-gray-600", children: currentStep === 1 ? t2("register.step1") : t2("register.step2") }),
        /* @__PURE__ */ jsxs38("div", { className: "flex items-center justify-center space-x-4 mt-4", children: [
          /* @__PURE__ */ jsxs38("div", { className: `flex items-center ${currentStep >= 1 ? "text-blue-600" : "text-gray-400"}`, children: [
            /* @__PURE__ */ jsx52("div", { className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${currentStep >= 1 ? "bg-blue-600 text-white" : "bg-gray-200 text-gray-500"}`, children: "1" }),
            /* @__PURE__ */ jsx52("span", { className: "ml-2 text-sm font-medium", children: t2("register.account") })
          ] }),
          /* @__PURE__ */ jsx52("div", { className: `w-8 h-0.5 ${currentStep >= 2 ? "bg-blue-600" : "bg-gray-200"}` }),
          /* @__PURE__ */ jsxs38("div", { className: `flex items-center ${currentStep >= 2 ? "text-blue-600" : "text-gray-400"}`, children: [
            /* @__PURE__ */ jsx52("div", { className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${currentStep >= 2 ? "bg-blue-600 text-white" : "bg-gray-200 text-gray-500"}`, children: "2" }),
            /* @__PURE__ */ jsx52("span", { className: "ml-2 text-sm font-medium", children: t2("register.business") })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsx52(CardContent8, { children: /* @__PURE__ */ jsxs38("form", { onSubmit: (e2) => {
        e2.preventDefault();
        formik.handleSubmit(e2);
      }, className: "space-y-6", children: [
        currentStep === 1 && /* @__PURE__ */ jsxs38(Fragment8, { children: [
          /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx52("label", { htmlFor: "login", className: "text-sm font-medium text-gray-700", children: t2("register.email") }),
            /* @__PURE__ */ jsxs38("div", { className: "relative", children: [
              /* @__PURE__ */ jsx52(Mail2, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "login",
                  name: "login",
                  type: "email",
                  placeholder: t2("register.enterYourEmail"),
                  value: formik.values.login,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: `pl-10 ${formik.errors.login && formik.touched.login ? "border-red-500" : ""}`
                }
              )
            ] }),
            formik.errors.login && formik.touched.login && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.login })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx52("label", { htmlFor: "password", className: "text-sm font-medium text-gray-700", children: t2("register.password") }),
            /* @__PURE__ */ jsxs38("div", { className: "relative", children: [
              /* @__PURE__ */ jsx52(Lock2, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "password",
                  name: "password",
                  type: viewPass ? "text" : "password",
                  placeholder: t2("register.createPassword"),
                  value: formik.values.password,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: `pl-10 pr-10 ${formik.errors.password && formik.touched.password ? "border-red-500" : ""}`
                }
              ),
              /* @__PURE__ */ jsx52(
                Button10,
                {
                  variant: "ghost",
                  size: "icon",
                  type: "button",
                  onClick: () => setViewPass(!viewPass),
                  className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 h-auto w-auto p-0",
                  children: viewPass ? /* @__PURE__ */ jsx52(EyeOff2, { className: "h-5 w-5" }) : /* @__PURE__ */ jsx52(Eye2, { className: "h-5 w-5" })
                }
              )
            ] }),
            formik.errors.password && formik.touched.password && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.password })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx52("label", { htmlFor: "confirmPassword", className: "text-sm font-medium text-gray-700", children: t2("register.confirmPassword") }),
            /* @__PURE__ */ jsxs38("div", { className: "relative", children: [
              /* @__PURE__ */ jsx52(Lock2, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "confirmPassword",
                  name: "confirmPassword",
                  type: viewConfirmPass ? "text" : "password",
                  placeholder: t2("register.confirmYourPassword"),
                  value: formik.values.confirmPassword,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: `pl-10 pr-10 ${formik.errors.confirmPassword && formik.touched.confirmPassword ? "border-red-500" : ""}`
                }
              ),
              /* @__PURE__ */ jsx52(
                Button10,
                {
                  variant: "ghost",
                  size: "icon",
                  type: "button",
                  onClick: () => setViewConfirmPass(!viewConfirmPass),
                  className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 h-auto w-auto p-0",
                  children: viewConfirmPass ? /* @__PURE__ */ jsx52(EyeOff2, { className: "h-5 w-5" }) : /* @__PURE__ */ jsx52(Eye2, { className: "h-5 w-5" })
                }
              )
            ] }),
            formik.errors.confirmPassword && formik.touched.confirmPassword && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.confirmPassword })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx52("label", { htmlFor: "firstName", className: "text-sm font-medium text-gray-700", children: t2("register.firstName") }),
              /* @__PURE__ */ jsxs38("div", { className: "relative", children: [
                /* @__PURE__ */ jsx52(User3, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" }),
                /* @__PURE__ */ jsx52(
                  Input6,
                  {
                    id: "firstName",
                    name: "firstName",
                    type: "text",
                    placeholder: t2("register.enterFirstName"),
                    value: formik.values.firstName,
                    onChange: formik.handleChange,
                    onBlur: formik.handleBlur,
                    className: `pl-10 ${formik.errors.firstName && formik.touched.firstName ? "border-red-500" : ""}`
                  }
                )
              ] }),
              formik.errors.firstName && formik.touched.firstName && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.firstName })
            ] }),
            /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx52("label", { htmlFor: "lastName", className: "text-sm font-medium text-gray-700", children: t2("register.lastName") }),
              /* @__PURE__ */ jsxs38("div", { className: "relative", children: [
                /* @__PURE__ */ jsx52(User3, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" }),
                /* @__PURE__ */ jsx52(
                  Input6,
                  {
                    id: "lastName",
                    name: "lastName",
                    type: "text",
                    placeholder: t2("register.enterLastName"),
                    value: formik.values.lastName,
                    onChange: formik.handleChange,
                    onBlur: formik.handleBlur,
                    className: `pl-10 ${formik.errors.lastName && formik.touched.lastName ? "border-red-500" : ""}`
                  }
                )
              ] }),
              formik.errors.lastName && formik.touched.lastName && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.lastName })
            ] })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx52("label", { htmlFor: "phone", className: "text-sm font-medium text-gray-700", children: t2("register.phone") }),
            /* @__PURE__ */ jsxs38("div", { className: "relative", children: [
              /* @__PURE__ */ jsx52(Phone, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "phone",
                  name: "phone",
                  type: "tel",
                  placeholder: t2("register.enterPhoneNumber"),
                  value: formik.values.phone,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: `pl-10 ${formik.errors.phone && formik.touched.phone ? "border-red-500" : ""}`
                }
              )
            ] }),
            formik.errors.phone && formik.touched.phone && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.phone })
          ] }),
          /* @__PURE__ */ jsx52(
            Button10,
            {
              type: "submit",
              className: "w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition duration-200",
              disabled: isSubmitting,
              children: isSubmitting ? t2("register.validating") : t2("register.continueToBusinessInfo")
            }
          )
        ] }),
        currentStep === 2 && /* @__PURE__ */ jsxs38(Fragment8, { children: [
          /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx52("label", { htmlFor: "businessName", className: "text-sm font-medium text-gray-700", children: t2("register.businessName") }),
            /* @__PURE__ */ jsxs38("div", { className: "relative", children: [
              /* @__PURE__ */ jsx52(Store, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "businessName",
                  name: "businessName",
                  type: "text",
                  placeholder: t2("register.enterBusinessName"),
                  value: formik.values.businessName,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: `pl-10 ${formik.errors.businessName && formik.touched.businessName ? "border-red-500" : ""}`
                }
              )
            ] }),
            formik.errors.businessName && formik.touched.businessName && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.businessName })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsx52("div", { className: "bg-amber-50 border border-amber-200 rounded-lg p-3", children: /* @__PURE__ */ jsxs38("div", { className: "flex items-start", children: [
              /* @__PURE__ */ jsx52("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx52("svg", { className: "h-5 w-5 text-amber-400", viewBox: "0 0 20 20", fill: "currentColor", children: /* @__PURE__ */ jsx52("path", { fillRule: "evenodd", d: "M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z", clipRule: "evenodd" }) }) }),
              /* @__PURE__ */ jsxs38("div", { className: "ml-3", children: [
                /* @__PURE__ */ jsx52("h3", { className: "text-sm font-medium text-amber-800", children: t2("register.importantNotice") }),
                /* @__PURE__ */ jsx52("div", { className: "mt-1 text-sm text-amber-700", children: /* @__PURE__ */ jsx52("p", { children: t2("register.cannotBeChanged") }) })
              ] })
            ] }) }),
            /* @__PURE__ */ jsxs38("div", { className: "space-y-4", children: [
              /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
                /* @__PURE__ */ jsxs38("label", { htmlFor: "businessType", className: "text-sm font-medium text-gray-700", children: [
                  t2("register.businessType"),
                  " *"
                ] }),
                /* @__PURE__ */ jsxs38(
                  Select4,
                  {
                    value: formik.values.businessType,
                    onValueChange: (value) => formik.setFieldValue("businessType", value),
                    children: [
                      /* @__PURE__ */ jsx52(SelectTrigger4, { className: `w-full ${formik.errors.businessType && formik.touched.businessType ? "border-red-500" : ""}`, children: /* @__PURE__ */ jsx52(SelectValue4, { placeholder: t2("register.selectBusinessType") }) }),
                      /* @__PURE__ */ jsx52(SelectContent4, { children: BUSINESS_TYPE_OPTIONS.map((option) => /* @__PURE__ */ jsx52(SelectItem4, { value: option.value, children: /* @__PURE__ */ jsxs38("div", { className: "flex flex-col items-start", children: [
                        /* @__PURE__ */ jsx52("span", { className: "font-medium", children: option.label }),
                        /* @__PURE__ */ jsx52("span", { className: "text-xs text-gray-500", children: option.description })
                      ] }) }, option.value)) })
                    ]
                  }
                ),
                formik.errors.businessType && formik.touched.businessType && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.businessType })
              ] }),
              /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
                /* @__PURE__ */ jsxs38("label", { htmlFor: "pricingType", className: "text-sm font-medium text-gray-700", children: [
                  t2("register.pricingType"),
                  " *"
                ] }),
                /* @__PURE__ */ jsxs38(
                  Select4,
                  {
                    value: formik.values.pricingType,
                    onValueChange: (value) => formik.setFieldValue("pricingType", value),
                    children: [
                      /* @__PURE__ */ jsx52(SelectTrigger4, { className: `w-full ${formik.errors.pricingType && formik.touched.pricingType ? "border-red-500" : ""}`, children: /* @__PURE__ */ jsx52(SelectValue4, { placeholder: t2("register.selectPricingType") }) }),
                      /* @__PURE__ */ jsx52(SelectContent4, { children: PRICING_TYPE_OPTIONS.map((option) => /* @__PURE__ */ jsx52(SelectItem4, { value: option.value, children: /* @__PURE__ */ jsxs38("div", { className: "flex flex-col items-start", children: [
                        /* @__PURE__ */ jsx52("span", { className: "font-medium", children: option.label }),
                        /* @__PURE__ */ jsx52("span", { className: "text-xs text-gray-500", children: option.description })
                      ] }) }, option.value)) })
                    ]
                  }
                ),
                formik.errors.pricingType && formik.touched.pricingType && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.pricingType })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx52("label", { htmlFor: "address", className: "text-sm font-medium text-gray-700", children: t2("register.address") }),
            /* @__PURE__ */ jsxs38("div", { className: "relative", children: [
              /* @__PURE__ */ jsx52(MapPin, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "address",
                  name: "address",
                  type: "text",
                  placeholder: t2("register.enterBusinessAddress"),
                  value: formik.values.address,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: `pl-10 ${formik.errors.address && formik.touched.address ? "border-red-500" : ""}`
                }
              )
            ] }),
            formik.errors.address && formik.touched.address && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.address })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "grid grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx52("label", { htmlFor: "city", className: "text-sm font-medium text-gray-700", children: t2("register.city") }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "city",
                  name: "city",
                  type: "text",
                  placeholder: t2("register.city"),
                  value: formik.values.city,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: formik.errors.city && formik.touched.city ? "border-red-500" : ""
                }
              ),
              formik.errors.city && formik.touched.city && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.city })
            ] }),
            /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx52("label", { htmlFor: "state", className: "text-sm font-medium text-gray-700", children: t2("register.state") }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "state",
                  name: "state",
                  type: "text",
                  placeholder: t2("register.state"),
                  value: formik.values.state,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: formik.errors.state && formik.touched.state ? "border-red-500" : ""
                }
              ),
              formik.errors.state && formik.touched.state && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.state })
            ] })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "grid grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx52("label", { htmlFor: "zipCode", className: "text-sm font-medium text-gray-700", children: t2("register.zipCode") }),
              /* @__PURE__ */ jsx52(
                Input6,
                {
                  id: "zipCode",
                  name: "zipCode",
                  type: "text",
                  placeholder: t2("register.zipCode"),
                  value: formik.values.zipCode,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: formik.errors.zipCode && formik.touched.zipCode ? "border-red-500" : ""
                }
              ),
              formik.errors.zipCode && formik.touched.zipCode && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.zipCode })
            ] }),
            /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxs38("label", { htmlFor: "country", className: "text-sm font-medium text-gray-700", children: [
                t2("register.country"),
                " *"
              ] }),
              /* @__PURE__ */ jsxs38(
                Select4,
                {
                  value: formik.values.country,
                  onValueChange: (value) => formik.setFieldValue("country", value),
                  children: [
                    /* @__PURE__ */ jsx52(SelectTrigger4, { className: `w-full ${formik.errors.country && formik.touched.country ? "border-red-500" : ""}`, children: /* @__PURE__ */ jsx52(SelectValue4, { placeholder: t2("register.selectCountry") }) }),
                    /* @__PURE__ */ jsx52(SelectContent4, { children: COUNTRIES.map((country) => /* @__PURE__ */ jsx52(SelectItem4, { value: country.name, children: /* @__PURE__ */ jsxs38("div", { className: "flex items-center gap-2", children: [
                      /* @__PURE__ */ jsx52("span", { children: country.flag }),
                      /* @__PURE__ */ jsx52("span", { children: country.name })
                    ] }) }, country.code)) })
                  ]
                }
              ),
              formik.errors.country && formik.touched.country && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.country })
            ] })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxs38("label", { className: "flex items-start space-x-3", children: [
              /* @__PURE__ */ jsx52(
                "input",
                {
                  type: "checkbox",
                  name: "acceptTermsAndPrivacy",
                  checked: formik.values.acceptTermsAndPrivacy,
                  onChange: formik.handleChange,
                  onBlur: formik.handleBlur,
                  className: "mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                }
              ),
              /* @__PURE__ */ jsxs38("span", { className: "text-sm text-gray-700", children: [
                t2("register.iAgreeToThe"),
                " ",
                /* @__PURE__ */ jsx52("a", { href: "/terms", className: "text-blue-600 hover:text-blue-500 underline", children: t2("register.termsOfService") }),
                " ",
                t2("register.and"),
                " ",
                /* @__PURE__ */ jsx52("a", { href: "/privacy", className: "text-blue-600 hover:text-blue-500 underline", children: t2("register.privacyPolicy") })
              ] })
            ] }),
            formik.errors.acceptTermsAndPrivacy && formik.touched.acceptTermsAndPrivacy && /* @__PURE__ */ jsx52("p", { className: "text-red-500 text-sm", children: formik.errors.acceptTermsAndPrivacy })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "bg-blue-50 border border-blue-200 rounded-lg p-4", children: [
            /* @__PURE__ */ jsx52("h3", { className: "text-sm font-medium text-blue-900 mb-2", children: t2("register.freeTrialIncludes") }),
            /* @__PURE__ */ jsxs38("ul", { className: "text-sm text-blue-800 space-y-1", children: [
              /* @__PURE__ */ jsxs38("li", { className: "flex items-center", children: [
                /* @__PURE__ */ jsx52(CheckCircle10, { className: "h-4 w-4 text-blue-600 mr-2" }),
                t2("register.fullAccessToAllFeatures")
              ] }),
              /* @__PURE__ */ jsxs38("li", { className: "flex items-center", children: [
                /* @__PURE__ */ jsx52(CheckCircle10, { className: "h-4 w-4 text-blue-600 mr-2" }),
                t2("register.defaultOutlet"),
                ': "',
                formik.values.businessName || "Your Business",
                '"'
              ] }),
              /* @__PURE__ */ jsxs38("li", { className: "flex items-center", children: [
                /* @__PURE__ */ jsx52(CheckCircle10, { className: "h-4 w-4 text-blue-600 mr-2" }),
                t2("register.mobileAppAccess")
              ] }),
              /* @__PURE__ */ jsxs38("li", { className: "flex items-center", children: [
                /* @__PURE__ */ jsx52(CheckCircle10, { className: "h-4 w-4 text-blue-600 mr-2" }),
                t2("register.noCreditCardRequired")
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs38("div", { className: "flex space-x-3", children: [
            /* @__PURE__ */ jsx52(
              Button10,
              {
                type: "button",
                onClick: () => setCurrentStep(1),
                className: "flex-1 bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition duration-200",
                children: t2("register.back")
              }
            ),
            /* @__PURE__ */ jsx52(
              Button10,
              {
                type: "submit",
                className: "flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition duration-200",
                disabled: isSubmitting,
                children: isSubmitting ? t2("register.creatingAccount") : t2("register.registerButton")
              }
            )
          ] })
        ] }),
        registrationError && /* @__PURE__ */ jsx52("div", { className: "text-red-500 text-sm text-center bg-red-50 border border-red-200 rounded-lg p-3", children: registrationError }),
        /* @__PURE__ */ jsx52("div", { className: "text-center", children: /* @__PURE__ */ jsxs38("p", { className: "text-sm text-gray-600", children: [
          t2("register.hasAccount"),
          " ",
          /* @__PURE__ */ jsx52(
            Button10,
            {
              variant: "link",
              type: "button",
              onClick: () => onNavigate?.("/login"),
              className: "text-blue-600 hover:text-blue-500 font-medium p-0 h-auto",
              children: t2("register.signIn")
            }
          )
        ] }) })
      ] }) })
    ] }),
    "    "
  ] });
};
var RegisterForm_default = RegisterForm;

// src/components/forms/ForgetPasswordForm.tsx
import { useState as useState24 } from "react";
import { Mail as Mail3, ArrowLeft as ArrowLeft2, CheckCircle as CheckCircle11 } from "lucide-react";
import { Button as Button11, Card as Card9, CardHeader as CardHeader9, CardTitle as CardTitle9, CardDescription as CardDescription4, CardContent as CardContent9, Input as Input7 } from "@rentalshop/ui";
import { useAuthTranslations as useAuthTranslations3 } from "@rentalshop/hooks";
import { jsx as jsx53, jsxs as jsxs39 } from "react/jsx-runtime";
var ForgetPasswordForm = ({
  onResetPassword,
  onNavigate,
  error: error2,
  loading = false,
  success = false
}) => {
  const [emailSent, setEmailSent] = useState24(false);
  const t2 = useAuthTranslations3();
  const validationSchema = create$3({
    email: create$6().email(t2("login.invalidEmail")).required(t2("login.invalidEmail"))
  });
  const validation = useFormik({
    enableReinitialize: true,
    initialValues: {
      email: ""
    },
    validationSchema,
    onSubmit: async (values) => {
      try {
        if (onResetPassword) {
          await onResetPassword(values);
          setEmailSent(true);
        } else {
          console.log("Reset password data:", values);
          setEmailSent(true);
        }
      } catch (error3) {
        console.error("Password reset failed:", error3);
      }
    }
  });
  const handleSubmit = (e2) => {
    e2.preventDefault();
    validation.handleSubmit();
  };
  if (emailSent || success) {
    return /* @__PURE__ */ jsx53("div", { className: "min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4", children: /* @__PURE__ */ jsxs39("div", { className: "w-full max-w-md", children: [
      /* @__PURE__ */ jsxs39("div", { className: "text-center mb-6", children: [
        /* @__PURE__ */ jsx53("div", { className: "inline-block", children: /* @__PURE__ */ jsx53("div", { className: "h-12 w-12 mx-auto bg-blue-600 rounded-lg flex items-center justify-center", children: /* @__PURE__ */ jsx53("span", { className: "text-white font-bold text-xl", children: "R" }) }) }),
        /* @__PURE__ */ jsx53("h1", { className: "mt-4 text-2xl font-bold text-gray-800", children: t2("forgotPassword.checkEmail") }),
        /* @__PURE__ */ jsx53("p", { className: "mt-2 text-sm text-gray-600", children: t2("forgotPassword.checkEmail") })
      ] }),
      /* @__PURE__ */ jsx53(Card9, { className: "shadow-lg", children: /* @__PURE__ */ jsxs39(CardContent9, { className: "p-6 text-center", children: [
        /* @__PURE__ */ jsx53("div", { className: "mx-auto w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4", children: /* @__PURE__ */ jsx53(CheckCircle11, { className: "h-6 w-6 text-green-600" }) }),
        /* @__PURE__ */ jsx53("h3", { className: "text-lg font-semibold text-gray-800 mb-2", children: t2("forgotPassword.success") }),
        /* @__PURE__ */ jsxs39("p", { className: "text-sm text-gray-600 mb-6", children: [
          t2("forgotPassword.checkEmail"),
          " ",
          /* @__PURE__ */ jsx53("span", { className: "font-medium", children: validation.values.email })
        ] }),
        /* @__PURE__ */ jsx53("p", { className: "text-xs text-gray-500 mb-6", children: t2("forgotPassword.checkEmail") }),
        /* @__PURE__ */ jsxs39("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsx53(
            Button11,
            {
              onClick: () => {
                setEmailSent(false);
                validation.resetForm();
              },
              className: "w-full",
              children: t2("forgotPassword.sendButton")
            }
          ),
          /* @__PURE__ */ jsx53(
            Button11,
            {
              variant: "outline",
              onClick: () => onNavigate?.("/login"),
              className: "w-full",
              children: t2("forgotPassword.backToLogin")
            }
          )
        ] })
      ] }) }),
      /* @__PURE__ */ jsx53("div", { className: "mt-8 text-center", children: /* @__PURE__ */ jsxs39("p", { className: "text-xs text-gray-500", children: [
        "\xA9 ",
        (/* @__PURE__ */ new Date()).getFullYear(),
        " RentalShop. Crafted with",
        " ",
        /* @__PURE__ */ jsx53("span", { className: "text-red-500", children: "\u2764" }),
        " by RentalShop"
      ] }) })
    ] }) });
  }
  return /* @__PURE__ */ jsx53("div", { className: "min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4", children: /* @__PURE__ */ jsxs39("div", { className: "w-full max-w-md", children: [
    /* @__PURE__ */ jsxs39("div", { className: "text-center mb-6", children: [
      /* @__PURE__ */ jsx53("div", { className: "inline-block", children: /* @__PURE__ */ jsx53("div", { className: "h-12 w-12 mx-auto bg-blue-600 rounded-lg flex items-center justify-center", children: /* @__PURE__ */ jsx53("span", { className: "text-white font-bold text-xl", children: "R" }) }) }),
      /* @__PURE__ */ jsx53("h1", { className: "mt-4 text-2xl font-bold text-gray-800", children: t2("forgotPassword.title") }),
      /* @__PURE__ */ jsx53("p", { className: "mt-2 text-sm text-gray-600", children: t2("forgotPassword.subtitle") })
    ] }),
    /* @__PURE__ */ jsxs39(Card9, { className: "shadow-lg", children: [
      /* @__PURE__ */ jsxs39(CardHeader9, { className: "text-center border-b border-gray-200 bg-gray-50 rounded-t-lg", children: [
        /* @__PURE__ */ jsx53(CardTitle9, { className: "text-xl font-semibold text-gray-800", children: t2("forgotPassword.title") }),
        /* @__PURE__ */ jsx53(CardDescription4, { className: "text-sm text-gray-600 mt-1", children: t2("forgotPassword.subtitle") })
      ] }),
      /* @__PURE__ */ jsx53(CardContent9, { className: "p-6", children: /* @__PURE__ */ jsxs39("form", { onSubmit: handleSubmit, children: [
        error2 && /* @__PURE__ */ jsxs39("div", { className: "mb-4 p-3 text-sm text-red-700 bg-red-100 border border-red-200 rounded-lg flex items-center", children: [
          /* @__PURE__ */ jsx53("div", { className: "w-4 h-4 mr-2", children: "\u26A0\uFE0F" }),
          error2
        ] }),
        /* @__PURE__ */ jsxs39("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs39("div", { children: [
            /* @__PURE__ */ jsx53("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: t2("forgotPassword.email") }),
            /* @__PURE__ */ jsxs39("div", { className: "relative", children: [
              /* @__PURE__ */ jsx53(Mail3, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }),
              /* @__PURE__ */ jsx53(
                Input7,
                {
                  type: "email",
                  placeholder: t2("forgotPassword.email"),
                  className: "pl-10",
                  onChange: validation.handleChange,
                  onBlur: validation.handleBlur,
                  value: validation.values.email || "",
                  name: "email"
                }
              )
            ] }),
            validation.touched.email && validation.errors.email && /* @__PURE__ */ jsx53("p", { className: "mt-1 text-sm text-red-600", children: validation.errors.email })
          ] }),
          /* @__PURE__ */ jsx53(
            Button11,
            {
              type: "submit",
              className: "w-full",
              disabled: loading,
              children: loading ? /* @__PURE__ */ jsxs39("div", { className: "flex items-center justify-center", children: [
                /* @__PURE__ */ jsx53("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }),
                t2("forgotPassword.sendButton"),
                "..."
              ] }) : t2("forgotPassword.sendButton")
            }
          )
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsx53("div", { className: "mt-6 text-center", children: /* @__PURE__ */ jsxs39(
      Button11,
      {
        variant: "link",
        onClick: () => onNavigate?.("/login"),
        className: "inline-flex items-center text-sm",
        children: [
          /* @__PURE__ */ jsx53(ArrowLeft2, { className: "h-4 w-4 mr-1" }),
          t2("forgotPassword.backToLogin")
        ]
      }
    ) }),
    /* @__PURE__ */ jsx53("div", { className: "mt-8 text-center", children: /* @__PURE__ */ jsxs39("p", { className: "text-xs text-gray-500", children: [
      "\xA9 ",
      (/* @__PURE__ */ new Date()).getFullYear(),
      " RentalShop. Crafted with",
      " ",
      /* @__PURE__ */ jsx53("span", { className: "text-red-500", children: "\u2764" }),
      " by RentalShop"
    ] }) })
  ] }) });
};
var ForgetPasswordForm_default = ForgetPasswordForm;

// src/components/forms/MerchantRegistrationForm.tsx
import { useState as useState25 } from "react";
import {
  Building2,
  User as User4,
  MapPin as MapPin2,
  CheckCircle as CheckCircle12,
  Loader2 as Loader24,
  DollarSign as DollarSign4
} from "lucide-react";
import { getCurrencyDisplay } from "@rentalshop/utils";
import { Fragment as Fragment9, jsx as jsx54, jsxs as jsxs40 } from "react/jsx-runtime";
var MerchantRegistrationForm = ({
  onSubmit,
  loading = false,
  className
}) => {
  const [formData, setFormData] = useState25({
    merchantName: "",
    merchantEmail: "",
    merchantPhone: "",
    merchantDescription: "",
    currency: "USD",
    // Default to USD
    userEmail: "",
    userPassword: "",
    userFirstName: "",
    userLastName: "",
    userPhone: "",
    outletName: "",
    outletAddress: "",
    outletDescription: ""
  });
  const [errors, setErrors] = useState25({});
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }));
    }
  };
  const validateForm = () => {
    const newErrors = {};
    if (!formData.merchantName.trim()) {
      newErrors.merchantName = "Merchant name is required";
    }
    if (!formData.merchantEmail.trim()) {
      newErrors.merchantEmail = "Merchant email is required";
    } else if (!/\S+@\S+\.\S+/.test(formData.merchantEmail)) {
      newErrors.merchantEmail = "Invalid email format";
    }
    if (!formData.userEmail.trim()) {
      newErrors.userEmail = "User email is required";
    } else if (!/\S+@\S+\.\S+/.test(formData.userEmail)) {
      newErrors.userEmail = "Invalid email format";
    }
    if (!formData.userPassword.trim()) {
      newErrors.userPassword = "Password is required";
    } else if (formData.userPassword.length < 6) {
      newErrors.userPassword = "Password must be at least 6 characters";
    }
    if (!formData.userFirstName.trim()) {
      newErrors.userFirstName = "First name is required";
    }
    if (!formData.userLastName.trim()) {
      newErrors.userLastName = "Last name is required";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    try {
      await onSubmit(formData);
    } catch (error2) {
      console.error("Error submitting merchant registration:", error2);
    }
  };
  return /* @__PURE__ */ jsx54("div", { className, children: /* @__PURE__ */ jsxs40(Card, { children: [
    /* @__PURE__ */ jsx54(CardHeader, { children: /* @__PURE__ */ jsxs40(CardTitle, { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx54(Building2, { className: "w-5 h-5" }),
      "Register Your Business",
      /* @__PURE__ */ jsx54(Badge, { variant: "secondary", className: "ml-auto", children: "Free 14-Day Trial" })
    ] }) }),
    /* @__PURE__ */ jsx54(CardContent, { children: /* @__PURE__ */ jsxs40("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
      /* @__PURE__ */ jsxs40("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs40("h3", { className: "text-lg font-semibold text-gray-900 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx54(Building2, { className: "w-4 h-4" }),
          "Business Information"
        ] }),
        /* @__PURE__ */ jsxs40("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "merchantName", children: "Business Name *" }),
            /* @__PURE__ */ jsx54(
              Input,
              {
                id: "merchantName",
                value: formData.merchantName,
                onChange: (e2) => handleInputChange("merchantName", e2.target.value),
                placeholder: "Your business name",
                className: errors.merchantName ? "border-red-500" : ""
              }
            ),
            errors.merchantName && /* @__PURE__ */ jsx54("p", { className: "text-sm text-red-500", children: errors.merchantName })
          ] }),
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "merchantEmail", children: "Business Email *" }),
            /* @__PURE__ */ jsx54(
              Input,
              {
                id: "merchantEmail",
                type: "email",
                value: formData.merchantEmail,
                onChange: (e2) => handleInputChange("merchantEmail", e2.target.value),
                placeholder: "business@example.com",
                className: errors.merchantEmail ? "border-red-500" : ""
              }
            ),
            errors.merchantEmail && /* @__PURE__ */ jsx54("p", { className: "text-sm text-red-500", children: errors.merchantEmail })
          ] })
        ] }),
        /* @__PURE__ */ jsxs40("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "merchantPhone", children: "Business Phone" }),
            /* @__PURE__ */ jsx54(
              Input,
              {
                id: "merchantPhone",
                value: formData.merchantPhone,
                onChange: (e2) => handleInputChange("merchantPhone", e2.target.value),
                placeholder: "+1 (555) 123-4567"
              }
            )
          ] }),
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxs40(Label2, { htmlFor: "currency", className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx54(DollarSign4, { className: "w-4 h-4" }),
              "Currency *"
            ] }),
            /* @__PURE__ */ jsxs40(
              Select,
              {
                value: formData.currency,
                onValueChange: (value) => handleInputChange("currency", value),
                children: [
                  /* @__PURE__ */ jsx54(SelectTrigger, { id: "currency", children: /* @__PURE__ */ jsx54(SelectValue, { placeholder: "Select currency" }) }),
                  /* @__PURE__ */ jsxs40(SelectContent, { children: [
                    /* @__PURE__ */ jsxs40(SelectItem, { value: "USD", children: [
                      getCurrencyDisplay("USD"),
                      " - US Dollar"
                    ] }),
                    /* @__PURE__ */ jsxs40(SelectItem, { value: "VND", children: [
                      getCurrencyDisplay("VND"),
                      " - Vietnamese Dong"
                    ] })
                  ] })
                ]
              }
            ),
            /* @__PURE__ */ jsx54("p", { className: "text-xs text-gray-500", children: "All prices and transactions will be in this currency" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx54(Label2, { htmlFor: "merchantDescription", children: "Business Description" }),
          /* @__PURE__ */ jsx54(
            Textarea,
            {
              id: "merchantDescription",
              value: formData.merchantDescription,
              onChange: (e2) => handleInputChange("merchantDescription", e2.target.value),
              placeholder: "Tell us about your rental business...",
              rows: 3
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs40("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs40("h3", { className: "text-lg font-semibold text-gray-900 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx54(User4, { className: "w-4 h-4" }),
          "Account Owner Information"
        ] }),
        /* @__PURE__ */ jsxs40("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "userFirstName", children: "First Name *" }),
            /* @__PURE__ */ jsx54(
              Input,
              {
                id: "userFirstName",
                value: formData.userFirstName,
                onChange: (e2) => handleInputChange("userFirstName", e2.target.value),
                placeholder: "John",
                className: errors.userFirstName ? "border-red-500" : ""
              }
            ),
            errors.userFirstName && /* @__PURE__ */ jsx54("p", { className: "text-sm text-red-500", children: errors.userFirstName })
          ] }),
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "userLastName", children: "Last Name *" }),
            /* @__PURE__ */ jsx54(
              Input,
              {
                id: "userLastName",
                value: formData.userLastName,
                onChange: (e2) => handleInputChange("userLastName", e2.target.value),
                placeholder: "Doe",
                className: errors.userLastName ? "border-red-500" : ""
              }
            ),
            errors.userLastName && /* @__PURE__ */ jsx54("p", { className: "text-sm text-red-500", children: errors.userLastName })
          ] })
        ] }),
        /* @__PURE__ */ jsxs40("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "userEmail", children: "Email Address *" }),
            /* @__PURE__ */ jsx54(
              Input,
              {
                id: "userEmail",
                type: "email",
                value: formData.userEmail,
                onChange: (e2) => handleInputChange("userEmail", e2.target.value),
                placeholder: "john@example.com",
                className: errors.userEmail ? "border-red-500" : ""
              }
            ),
            errors.userEmail && /* @__PURE__ */ jsx54("p", { className: "text-sm text-red-500", children: errors.userEmail })
          ] }),
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "userPhone", children: "Phone Number" }),
            /* @__PURE__ */ jsx54(
              Input,
              {
                id: "userPhone",
                value: formData.userPhone,
                onChange: (e2) => handleInputChange("userPhone", e2.target.value),
                placeholder: "+1 (555) 123-4567"
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx54(Label2, { htmlFor: "userPassword", children: "Password *" }),
          /* @__PURE__ */ jsx54(
            Input,
            {
              id: "userPassword",
              type: "password",
              value: formData.userPassword,
              onChange: (e2) => handleInputChange("userPassword", e2.target.value),
              placeholder: "Create a secure password",
              className: errors.userPassword ? "border-red-500" : ""
            }
          ),
          errors.userPassword && /* @__PURE__ */ jsx54("p", { className: "text-sm text-red-500", children: errors.userPassword })
        ] })
      ] }),
      /* @__PURE__ */ jsxs40("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs40("h3", { className: "text-lg font-semibold text-gray-900 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx54(MapPin2, { className: "w-4 h-4" }),
          "First Outlet (Optional)"
        ] }),
        /* @__PURE__ */ jsx54("p", { className: "text-sm text-gray-600", children: "You can add more outlets later. This helps you get started quickly." }),
        /* @__PURE__ */ jsxs40("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "outletName", children: "Outlet Name" }),
            /* @__PURE__ */ jsx54(
              Input,
              {
                id: "outletName",
                value: formData.outletName,
                onChange: (e2) => handleInputChange("outletName", e2.target.value),
                placeholder: "Main Store"
              }
            )
          ] }),
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "outletAddress", children: "Address" }),
            /* @__PURE__ */ jsx54(
              Textarea,
              {
                id: "outletAddress",
                value: formData.outletAddress,
                onChange: (e2) => handleInputChange("outletAddress", e2.target.value),
                placeholder: "123 Main St, City, State 12345",
                rows: 2
              }
            )
          ] }),
          /* @__PURE__ */ jsxs40("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx54(Label2, { htmlFor: "outletDescription", children: "Description" }),
            /* @__PURE__ */ jsx54(
              Textarea,
              {
                id: "outletDescription",
                value: formData.outletDescription,
                onChange: (e2) => handleInputChange("outletDescription", e2.target.value),
                placeholder: "Describe this outlet...",
                rows: 2
              }
            )
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsx54("div", { className: "bg-green-50 border border-green-200 rounded-lg p-4", children: /* @__PURE__ */ jsxs40("div", { className: "flex items-start gap-3", children: [
        /* @__PURE__ */ jsx54(CheckCircle12, { className: "w-5 h-5 text-green-600 mt-0.5" }),
        /* @__PURE__ */ jsxs40("div", { children: [
          /* @__PURE__ */ jsx54("h4", { className: "font-semibold text-green-900", children: "14-Day Free Trial" }),
          /* @__PURE__ */ jsx54("p", { className: "text-sm text-green-700 mt-1", children: "Start with our Trial plan and explore all features. No credit card required. Upgrade to a paid plan anytime during or after your trial." })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx54(
        Button2,
        {
          type: "submit",
          className: "w-full",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsxs40(Fragment9, { children: [
            /* @__PURE__ */ jsx54(Loader24, { className: "w-4 h-4 mr-2 animate-spin" }),
            "Creating Account..."
          ] }) : "Start Free Trial"
        }
      )
    ] }) })
  ] }) });
};

// src/components/layout/TimePeriodSelector.tsx
import { jsx as jsx55, jsxs as jsxs41 } from "react/jsx-runtime";
var TimePeriodSelector = ({
  currentPeriod,
  onPeriodChange
}) => {
  const periods = [
    { key: "today", label: "Today", icon: "\u{1F4C5}" },
    { key: "week", label: "This Week", icon: "\u{1F4C5}" },
    { key: "month", label: "This Month", icon: "\u{1F4CA}" },
    { key: "quarter", label: "This Quarter", icon: "\u{1F4C8}" },
    { key: "year", label: "This Year", icon: "\u{1F4C8}" }
  ];
  return /* @__PURE__ */ jsx55("div", { className: "mb-6", children: /* @__PURE__ */ jsxs41("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ jsx55("h2", { className: "text-lg font-semibold text-gray-900", children: "Business Overview" }),
    /* @__PURE__ */ jsx55("div", { className: "flex space-x-2", children: periods.map((period) => /* @__PURE__ */ jsxs41(
      Button2,
      {
        variant: currentPeriod === period.key ? "default" : "outline",
        size: "sm",
        onClick: () => onPeriodChange(period.key),
        className: "flex items-center space-x-2",
        children: [
          /* @__PURE__ */ jsx55("span", { children: period.icon }),
          /* @__PURE__ */ jsx55("span", { children: period.label })
        ]
      },
      period.key
    )) })
  ] }) });
};

// src/components/features/Dashboard/components/DashboardHeader.tsx
import { jsx as jsx56, jsxs as jsxs42 } from "react/jsx-runtime";
function DashboardHeader({ period, onPeriodChange }) {
  return /* @__PURE__ */ jsxs42("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0", children: [
    /* @__PURE__ */ jsxs42("div", { children: [
      /* @__PURE__ */ jsx56("h1", { className: "text-3xl font-bold tracking-tight text-gray-900 dark:text-white", children: "Dashboard" }),
      /* @__PURE__ */ jsx56("p", { className: "text-gray-600 dark:text-gray-400", children: "Overview of your rental business performance" })
    ] }),
    /* @__PURE__ */ jsx56(
      TimePeriodSelector,
      {
        currentPeriod: period,
        onPeriodChange
      }
    )
  ] });
}

// src/components/features/Dashboard/components/DashboardStats.tsx
import { jsx as jsx57, jsxs as jsxs43 } from "react/jsx-runtime";
function DashboardStats({ stats }) {
  const statCards = [
    {
      title: "Total Orders",
      value: stats.totalOrders,
      change: "+12%",
      changeType: "positive",
      description: "Total orders this period"
    },
    {
      title: "Total Revenue",
      value: `$${stats.totalRevenue.toLocaleString()}`,
      change: "+8%",
      changeType: "positive",
      description: "Total revenue this period"
    },
    {
      title: "Total Customers",
      value: stats.totalCustomers,
      change: "+5%",
      changeType: "positive",
      description: "Active customers"
    },
    {
      title: "Total Products",
      value: stats.totalProducts,
      change: "+2%",
      changeType: "positive",
      description: "Available products"
    },
    {
      title: "Pending Orders",
      value: stats.pendingOrders,
      change: "-3%",
      changeType: "negative",
      description: "Orders awaiting processing"
    },
    {
      title: "Completed Orders",
      value: stats.completedOrders,
      change: "+15%",
      changeType: "positive",
      description: "Successfully completed orders"
    }
  ];
  return /* @__PURE__ */ jsx57("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: statCards.map((card, index) => /* @__PURE__ */ jsxs43(Card, { className: "hover:shadow-lg transition-shadow", children: [
    /* @__PURE__ */ jsxs43(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsx57(CardTitle, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: card.title }),
      /* @__PURE__ */ jsx57("span", { className: `text-xs font-medium ${card.changeType === "positive" ? "text-green-600 dark:text-green-400" : "text-red-600 dark:text-red-400"}`, children: card.change })
    ] }),
    /* @__PURE__ */ jsxs43(CardContent, { children: [
      /* @__PURE__ */ jsx57("div", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: card.value }),
      /* @__PURE__ */ jsx57("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: card.description })
    ] })
  ] }, index)) });
}

// src/components/charts/IncomeChart.tsx
import { useCommonTranslations as useCommonTranslations4 } from "@rentalshop/hooks";
import { useFormattedDaily, useFormattedMonthOnly } from "@rentalshop/utils";
import {
  BarChart,
  Bar,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer
} from "recharts";
import { jsx as jsx58, jsxs as jsxs44 } from "react/jsx-runtime";
var IncomeChart = ({
  data,
  loading = false,
  actualLabel = "Actual Revenue",
  projectedLabel = "Projected Revenue",
  noDataText = "No data available",
  loadingText = "Loading chart data...",
  timePeriod = "month"
}) => {
  const tc = useCommonTranslations4();
  if (loading) {
    return /* @__PURE__ */ jsx58("div", { className: "h-64 flex items-center justify-center", children: /* @__PURE__ */ jsx58("div", { className: "text-gray-500", children: loadingText }) });
  }
  if (!data || data.length === 0) {
    return /* @__PURE__ */ jsx58("div", { className: "h-64 flex items-center justify-center", children: /* @__PURE__ */ jsx58("div", { className: "text-gray-500", children: noDataText }) });
  }
  const chartData = data.map((item) => {
    const formattedPeriod = timePeriod === "year" ? useFormattedMonthOnly(item.period) : useFormattedDaily(item.period);
    return {
      period: formattedPeriod,
      [actualLabel]: item.actual,
      [projectedLabel]: item.projected
    };
  });
  const formatTooltip = (value, name) => [
    `$${value.toLocaleString()}`,
    name
  ];
  return /* @__PURE__ */ jsx58(ResponsiveContainer, { width: "100%", height: 400, children: /* @__PURE__ */ jsxs44(BarChart, { data: chartData, margin: { top: 20, right: 30, left: 20, bottom: 5 }, children: [
    /* @__PURE__ */ jsx58(CartesianGrid, { strokeDasharray: "3 3" }),
    /* @__PURE__ */ jsx58(
      XAxis,
      {
        dataKey: "period",
        tick: { fontSize: 12 },
        angle: -45,
        textAnchor: "end",
        height: 80
      }
    ),
    /* @__PURE__ */ jsx58(
      YAxis,
      {
        tickFormatter: (value) => `$${(value / 1e3).toFixed(0)}k`,
        tick: { fontSize: 12 }
      }
    ),
    /* @__PURE__ */ jsx58(
      Tooltip,
      {
        formatter: formatTooltip,
        labelStyle: { color: "#374151" }
      }
    ),
    /* @__PURE__ */ jsx58(Legend, {}),
    /* @__PURE__ */ jsx58(
      Bar,
      {
        dataKey: actualLabel,
        fill: "#3B82F6",
        radius: [4, 4, 0, 0],
        name: actualLabel
      }
    ),
    /* @__PURE__ */ jsx58(
      Bar,
      {
        dataKey: projectedLabel,
        fill: "#10B981",
        radius: [4, 4, 0, 0],
        name: projectedLabel
      }
    )
  ] }) });
};

// src/components/charts/OrderChart.tsx
import { useCommonTranslations as useCommonTranslations5 } from "@rentalshop/hooks";
import { useFormattedDaily as useFormattedDaily2, useFormattedMonthOnly as useFormattedMonthOnly2 } from "@rentalshop/utils";
import {
  LineChart,
  Line,
  XAxis as XAxis2,
  YAxis as YAxis2,
  CartesianGrid as CartesianGrid2,
  Tooltip as Tooltip2,
  Legend as Legend2,
  ResponsiveContainer as ResponsiveContainer2
} from "recharts";
import { jsx as jsx59, jsxs as jsxs45 } from "react/jsx-runtime";
var OrderChart = ({
  data,
  loading = false,
  legendLabel = "Rental Orders",
  tooltipLabel = "orders",
  timePeriod = "month"
}) => {
  const tc = useCommonTranslations5();
  if (loading) {
    return /* @__PURE__ */ jsx59("div", { className: "h-64 flex items-center justify-center", children: /* @__PURE__ */ jsx59("div", { className: "text-gray-500", children: "Loading chart data..." }) });
  }
  if (!data || data.length === 0) {
    return /* @__PURE__ */ jsx59("div", { className: "h-64 flex items-center justify-center", children: /* @__PURE__ */ jsx59("div", { className: "text-gray-500", children: "No data available" }) });
  }
  const chartData = data.map((item) => {
    const formattedPeriod = timePeriod === "year" ? useFormattedMonthOnly2(item.period) : useFormattedDaily2(item.period);
    return {
      period: formattedPeriod,
      [legendLabel]: item.actual
    };
  });
  const formatTooltip = (value, name) => {
    return [`${value.toLocaleString()} ${tooltipLabel}`, legendLabel];
  };
  return /* @__PURE__ */ jsx59(ResponsiveContainer2, { width: "100%", height: 400, children: /* @__PURE__ */ jsxs45(LineChart, { data: chartData, margin: { top: 20, right: 30, left: 20, bottom: 5 }, children: [
    /* @__PURE__ */ jsx59(CartesianGrid2, { strokeDasharray: "3 3" }),
    /* @__PURE__ */ jsx59(
      XAxis2,
      {
        dataKey: "period",
        tick: { fontSize: 12 },
        angle: -45,
        textAnchor: "end",
        height: 80
      }
    ),
    /* @__PURE__ */ jsx59(
      YAxis2,
      {
        tickFormatter: (value) => `${value}`,
        tick: { fontSize: 12 },
        domain: [0, "dataMax"],
        allowDecimals: false,
        tickCount: 6
      }
    ),
    /* @__PURE__ */ jsx59(
      Tooltip2,
      {
        formatter: formatTooltip,
        labelStyle: { color: "#374151" }
      }
    ),
    /* @__PURE__ */ jsx59(Legend2, {}),
    /* @__PURE__ */ jsx59(
      Line,
      {
        type: "monotone",
        dataKey: legendLabel,
        stroke: "#3B82F6",
        strokeWidth: 2,
        dot: { fill: "#3B82F6", strokeWidth: 2, r: 4 },
        activeDot: { r: 6 }
      }
    )
  ] }) });
};

// src/components/charts/PieChart.tsx
import {
  PieChart as RechartsPieChart,
  Pie,
  Cell,
  ResponsiveContainer as ResponsiveContainer3,
  Tooltip as Tooltip3,
  Legend as Legend3
} from "recharts";
import { jsx as jsx60, jsxs as jsxs46 } from "react/jsx-runtime";
var PieChart = ({ data, title, loading = false }) => {
  if (loading) {
    return /* @__PURE__ */ jsx60("div", { className: "h-64 flex items-center justify-center", children: /* @__PURE__ */ jsx60("div", { className: "text-gray-500", children: "Loading chart data..." }) });
  }
  if (!data || data.length === 0) {
    return /* @__PURE__ */ jsx60("div", { className: "h-64 flex items-center justify-center", children: /* @__PURE__ */ jsx60("div", { className: "text-gray-500", children: "No data available" }) });
  }
  const formatTooltip = (value, name) => [
    `${value} (${(value / data.reduce((sum, item) => sum + item.value, 0) * 100).toFixed(1)}%)`,
    name
  ];
  return /* @__PURE__ */ jsxs46("div", { className: "w-full h-full", children: [
    title && /* @__PURE__ */ jsx60("div", { className: "mb-4", children: /* @__PURE__ */ jsx60("h3", { className: "text-lg font-semibold text-gray-800", children: title }) }),
    /* @__PURE__ */ jsx60(ResponsiveContainer3, { width: "100%", height: 300, children: /* @__PURE__ */ jsxs46(RechartsPieChart, { children: [
      /* @__PURE__ */ jsx60(
        Pie,
        {
          data,
          cx: "50%",
          cy: "50%",
          labelLine: false,
          label: ({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`,
          outerRadius: 80,
          fill: "#8884d8",
          dataKey: "value",
          children: data.map((entry, index) => /* @__PURE__ */ jsx60(Cell, { fill: entry.color }, `cell-${index}`))
        }
      ),
      /* @__PURE__ */ jsx60(Tooltip3, { formatter: formatTooltip }),
      /* @__PURE__ */ jsx60(Legend3, {})
    ] }) })
  ] });
};

// src/components/charts/ColorfulList.tsx
import { jsx as jsx61, jsxs as jsxs47 } from "react/jsx-runtime";
var getColorScheme = (index) => {
  const colors = [
    "from-blue-500 to-blue-600",
    "from-purple-500 to-purple-600",
    "from-green-500 to-green-600",
    "from-orange-500 to-orange-600",
    "from-pink-500 to-pink-600",
    "from-indigo-500 to-indigo-600",
    "from-teal-500 to-teal-600",
    "from-red-500 to-red-600"
  ];
  return colors[index % colors.length];
};
var getStatusColor2 = (status) => {
  switch (status) {
    case "active":
      return "bg-emerald-100 text-emerald-800 border-emerald-200";
    case "overdue":
      return "bg-red-100 text-red-800 border-red-200";
    case "completed":
      return "bg-blue-100 text-blue-800 border-blue-200";
    case "pending":
      return "bg-yellow-100 text-yellow-800 border-yellow-200";
    default:
      return "bg-gray-100 text-gray-800 border-gray-200";
  }
};
var ColorfulList = ({
  title,
  subtitle,
  data,
  loading = false,
  maxItems = 5
}) => {
  if (loading) {
    return /* @__PURE__ */ jsxs47(Card, { className: "border-0 shadow-lg bg-gradient-to-br from-white to-gray-50", children: [
      /* @__PURE__ */ jsxs47(CardHeader, { className: "pb-4", children: [
        /* @__PURE__ */ jsx61(CardTitle, { className: "text-xl font-bold text-gray-800", children: title }),
        subtitle && /* @__PURE__ */ jsx61("p", { className: "text-sm text-gray-600", children: subtitle })
      ] }),
      /* @__PURE__ */ jsx61(CardContent, { children: /* @__PURE__ */ jsx61("div", { className: "space-y-4", children: Array.from({ length: maxItems }).map((_, i) => /* @__PURE__ */ jsxs47("div", { className: "flex items-center space-x-4 animate-pulse", children: [
        /* @__PURE__ */ jsx61("div", { className: "w-12 h-12 bg-gray-200 rounded-xl" }),
        /* @__PURE__ */ jsxs47("div", { className: "flex-1 space-y-2", children: [
          /* @__PURE__ */ jsx61("div", { className: "h-5 bg-gray-200 rounded w-3/4" }),
          /* @__PURE__ */ jsx61("div", { className: "h-4 bg-gray-200 rounded w-1/2" })
        ] })
      ] }, i)) }) })
    ] });
  }
  if (!data || data.length === 0) {
    return /* @__PURE__ */ jsxs47(Card, { className: "border-0 shadow-lg bg-gradient-to-br from-white to-gray-50", children: [
      /* @__PURE__ */ jsxs47(CardHeader, { className: "pb-4", children: [
        /* @__PURE__ */ jsx61(CardTitle, { className: "text-xl font-bold text-gray-800", children: title }),
        subtitle && /* @__PURE__ */ jsx61("p", { className: "text-sm text-gray-600", children: subtitle })
      ] }),
      /* @__PURE__ */ jsx61(CardContent, { children: /* @__PURE__ */ jsxs47("div", { className: "text-center py-12 text-gray-500", children: [
        /* @__PURE__ */ jsx61("div", { className: "text-4xl mb-4", children: "\u{1F4CA}" }),
        /* @__PURE__ */ jsx61("p", { className: "text-lg", children: "No data available" })
      ] }) })
    ] });
  }
  return /* @__PURE__ */ jsxs47(Card, { className: "border-0 shadow-lg bg-gradient-to-br from-white to-gray-50", children: [
    /* @__PURE__ */ jsxs47(CardHeader, { className: "pb-4", children: [
      /* @__PURE__ */ jsx61(CardTitle, { className: "text-xl font-bold text-gray-800", children: title }),
      subtitle && /* @__PURE__ */ jsx61("p", { className: "text-sm text-gray-600", children: subtitle })
    ] }),
    /* @__PURE__ */ jsx61(CardContent, { children: /* @__PURE__ */ jsx61("div", { className: "space-y-4", children: data.slice(0, maxItems).map((item, index) => /* @__PURE__ */ jsxs47("div", { className: "group relative overflow-hidden bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-100", children: [
      /* @__PURE__ */ jsx61("div", { className: "absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-blue-400 to-purple-500" }),
      /* @__PURE__ */ jsx61("div", { className: "p-6", children: /* @__PURE__ */ jsxs47("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs47("div", { className: "flex items-center space-x-4", children: [
          /* @__PURE__ */ jsx61("div", { className: `w-12 h-12 rounded-xl bg-gradient-to-br ${getColorScheme(index)} flex items-center justify-center text-white font-bold text-lg shadow-lg`, children: index + 1 }),
          /* @__PURE__ */ jsxs47("div", { children: [
            /* @__PURE__ */ jsx61("p", { className: "font-bold text-gray-900 text-lg group-hover:text-blue-600 transition-colors", children: item.title }),
            item.subtitle && /* @__PURE__ */ jsx61("p", { className: "text-gray-600 font-medium", children: item.subtitle })
          ] })
        ] }),
        /* @__PURE__ */ jsxs47("div", { className: "text-right", children: [
          item.value && /* @__PURE__ */ jsx61("p", { className: "font-bold text-gray-900 text-lg", children: item.value }),
          item.status && /* @__PURE__ */ jsx61("span", { className: `inline-block px-3 py-1 rounded-full text-sm font-semibold border ${getStatusColor2(item.status)}`, children: item.status })
        ] })
      ] }) })
    ] }, item.id)) }) })
  ] });
};

// src/components/charts/SimpleList.tsx
import { jsx as jsx62, jsxs as jsxs48 } from "react/jsx-runtime";
var SimpleList = ({
  title,
  subtitle,
  data,
  loading = false,
  maxItems = 5
}) => {
  if (loading) {
    return /* @__PURE__ */ jsxs48(Card, { children: [
      /* @__PURE__ */ jsxs48(CardHeader, { children: [
        /* @__PURE__ */ jsx62(CardTitle, { children: title }),
        subtitle && /* @__PURE__ */ jsx62("p", { className: "text-sm text-gray-600", children: subtitle })
      ] }),
      /* @__PURE__ */ jsx62(CardContent, { children: /* @__PURE__ */ jsx62("div", { className: "space-y-3", children: Array.from({ length: maxItems }).map((_, i) => /* @__PURE__ */ jsxs48("div", { className: "flex items-center space-x-3 animate-pulse", children: [
        /* @__PURE__ */ jsx62("div", { className: "w-8 h-8 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsxs48("div", { className: "flex-1 space-y-2", children: [
          /* @__PURE__ */ jsx62("div", { className: "h-4 bg-gray-200 rounded w-3/4" }),
          /* @__PURE__ */ jsx62("div", { className: "h-3 bg-gray-200 rounded w-1/2" })
        ] })
      ] }, i)) }) })
    ] });
  }
  if (!data || data.length === 0) {
    return /* @__PURE__ */ jsxs48(Card, { children: [
      /* @__PURE__ */ jsxs48(CardHeader, { children: [
        /* @__PURE__ */ jsx62(CardTitle, { children: title }),
        subtitle && /* @__PURE__ */ jsx62("p", { className: "text-sm text-gray-600", children: subtitle })
      ] }),
      /* @__PURE__ */ jsx62(CardContent, { children: /* @__PURE__ */ jsx62("div", { className: "text-center py-8 text-gray-500", children: "No data available" }) })
    ] });
  }
  return /* @__PURE__ */ jsxs48(Card, { className: "border-0 shadow-sm", children: [
    /* @__PURE__ */ jsxs48(CardHeader, { className: "pb-3", children: [
      /* @__PURE__ */ jsx62(CardTitle, { className: "text-lg font-semibold", children: title }),
      subtitle && /* @__PURE__ */ jsx62("p", { className: "text-sm text-gray-500", children: subtitle })
    ] }),
    /* @__PURE__ */ jsx62(CardContent, { className: "pt-0", children: /* @__PURE__ */ jsx62("div", { className: "space-y-2", children: data.slice(0, maxItems).map((item, index) => /* @__PURE__ */ jsxs48("div", { className: "flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0 hover:bg-gray-25 transition-colors", children: [
      /* @__PURE__ */ jsxs48("div", { className: "flex items-center space-x-4", children: [
        /* @__PURE__ */ jsx62("div", { className: "w-6 h-6 bg-gray-50 rounded flex items-center justify-center text-xs font-medium text-gray-400", children: index + 1 }),
        /* @__PURE__ */ jsxs48("div", { children: [
          /* @__PURE__ */ jsx62("p", { className: "font-medium text-gray-900 text-sm", children: item.title }),
          item.subtitle && /* @__PURE__ */ jsx62("p", { className: "text-xs text-gray-400", children: item.subtitle })
        ] })
      ] }),
      /* @__PURE__ */ jsxs48("div", { className: "text-right", children: [
        item.value && /* @__PURE__ */ jsx62("p", { className: "font-medium text-gray-900 text-sm", children: item.value }),
        item.status && /* @__PURE__ */ jsx62("span", { className: `text-xs px-1.5 py-0.5 rounded ${item.status === "active" ? "bg-blue-50 text-blue-600" : item.status === "overdue" ? "bg-red-50 text-red-600" : "bg-gray-50 text-gray-600"}`, children: item.status })
      ] })
    ] }, item.id)) }) })
  ] });
};

// src/components/charts/TopCustomers.tsx
import { jsx as jsx63, jsxs as jsxs49 } from "react/jsx-runtime";
var TopCustomers = ({ data, loading = false }) => {
  if (loading) {
    return /* @__PURE__ */ jsxs49(Card, { children: [
      /* @__PURE__ */ jsx63(CardHeader, { children: /* @__PURE__ */ jsx63(CardTitle, { children: "Top Customers" }) }),
      /* @__PURE__ */ jsx63(CardContent, { children: /* @__PURE__ */ jsx63("div", { className: "space-y-4", children: Array.from({ length: 5 }).map((_, i) => /* @__PURE__ */ jsxs49("div", { className: "flex items-center space-x-3 animate-pulse", children: [
        /* @__PURE__ */ jsx63("div", { className: "w-10 h-10 bg-gray-200 rounded-full" }),
        /* @__PURE__ */ jsxs49("div", { className: "flex-1 space-y-2", children: [
          /* @__PURE__ */ jsx63("div", { className: "h-4 bg-gray-200 rounded w-3/4" }),
          /* @__PURE__ */ jsx63("div", { className: "h-3 bg-gray-200 rounded w-1/2" })
        ] })
      ] }, i)) }) })
    ] });
  }
  if (!data || data.length === 0) {
    return /* @__PURE__ */ jsxs49(Card, { children: [
      /* @__PURE__ */ jsx63(CardHeader, { children: /* @__PURE__ */ jsx63(CardTitle, { children: "Top Customers" }) }),
      /* @__PURE__ */ jsx63(CardContent, { children: /* @__PURE__ */ jsx63("div", { className: "text-center py-8 text-gray-500", children: "No customer data available" }) })
    ] });
  }
  return /* @__PURE__ */ jsxs49(Card, { children: [
    /* @__PURE__ */ jsxs49(CardHeader, { children: [
      /* @__PURE__ */ jsx63(CardTitle, { children: "Top Customers" }),
      /* @__PURE__ */ jsx63("p", { className: "text-sm text-gray-600", children: "Highest spending customers in the last 30 days" })
    ] }),
    /* @__PURE__ */ jsx63(CardContent, { children: /* @__PURE__ */ jsx63("div", { className: "space-y-4", children: data.slice(0, 10).map((customer, index) => /* @__PURE__ */ jsxs49("div", { className: "flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors", children: [
      /* @__PURE__ */ jsx63("div", { className: "flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-r from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-sm", children: index + 1 }),
      /* @__PURE__ */ jsx63("div", { className: "flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-r from-purple-400 to-purple-600 flex items-center justify-center text-white font-medium", children: customer.name.split(" ").map((n2) => n2[0]).join("").toUpperCase() }),
      /* @__PURE__ */ jsxs49("div", { className: "flex-1 min-w-0", children: [
        /* @__PURE__ */ jsxs49("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx63("h4", { className: "text-sm font-medium text-gray-900 truncate", children: customer.name }),
          /* @__PURE__ */ jsxs49(Badge, { variant: "outline", className: "text-xs", children: [
            customer.orderCount,
            " orders"
          ] })
        ] }),
        /* @__PURE__ */ jsxs49("div", { className: "flex items-center space-x-4 mt-1 text-xs text-gray-500", children: [
          /* @__PURE__ */ jsx63("span", { className: "truncate", children: customer.email }),
          /* @__PURE__ */ jsx63("span", { className: "truncate", children: customer.phone }),
          /* @__PURE__ */ jsxs49("span", { className: "font-medium text-blue-600", children: [
            "$",
            customer.totalSpent.toLocaleString()
          ] })
        ] }),
        customer.location && /* @__PURE__ */ jsxs49("div", { className: "text-xs text-gray-400 mt-1 truncate", children: [
          "\u{1F4CD} ",
          customer.location
        ] })
      ] })
    ] }, customer.id)) }) })
  ] });
};

// src/components/charts/TopProducts.tsx
import { jsx as jsx64, jsxs as jsxs50 } from "react/jsx-runtime";
var TopProducts = ({ data, loading = false }) => {
  if (loading) {
    return /* @__PURE__ */ jsxs50(Card, { children: [
      /* @__PURE__ */ jsx64(CardHeader, { children: /* @__PURE__ */ jsx64(CardTitle, { children: "Top Products" }) }),
      /* @__PURE__ */ jsx64(CardContent, { children: /* @__PURE__ */ jsx64("div", { className: "space-y-4", children: Array.from({ length: 5 }).map((_, i) => /* @__PURE__ */ jsxs50("div", { className: "flex items-center space-x-3 animate-pulse", children: [
        /* @__PURE__ */ jsx64("div", { className: "w-10 h-10 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsxs50("div", { className: "flex-1 space-y-2", children: [
          /* @__PURE__ */ jsx64("div", { className: "h-4 bg-gray-200 rounded w-3/4" }),
          /* @__PURE__ */ jsx64("div", { className: "h-3 bg-gray-200 rounded w-1/2" })
        ] })
      ] }, i)) }) })
    ] });
  }
  if (!data || data.length === 0) {
    return /* @__PURE__ */ jsxs50(Card, { children: [
      /* @__PURE__ */ jsx64(CardHeader, { children: /* @__PURE__ */ jsx64(CardTitle, { children: "Top Products" }) }),
      /* @__PURE__ */ jsx64(CardContent, { children: /* @__PURE__ */ jsx64("div", { className: "text-center py-8 text-gray-500", children: "No product data available" }) })
    ] });
  }
  return /* @__PURE__ */ jsxs50(Card, { children: [
    /* @__PURE__ */ jsxs50(CardHeader, { children: [
      /* @__PURE__ */ jsx64(CardTitle, { children: "Top Products" }),
      /* @__PURE__ */ jsx64("p", { className: "text-sm text-gray-600", children: "Most popular products in the last 30 days" })
    ] }),
    /* @__PURE__ */ jsx64(CardContent, { children: /* @__PURE__ */ jsx64("div", { className: "space-y-4", children: data.slice(0, 10).map((product, index) => /* @__PURE__ */ jsxs50("div", { className: "flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors", children: [
      /* @__PURE__ */ jsx64("div", { className: "flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-r from-orange-400 to-orange-600 flex items-center justify-center text-white font-bold text-sm", children: index + 1 }),
      /* @__PURE__ */ jsx64("div", { className: "flex-shrink-0 w-12 h-12 rounded-lg bg-gray-200 flex items-center justify-center overflow-hidden", children: product.image ? /* @__PURE__ */ jsx64(
        "img",
        {
          src: product.image,
          alt: product.name,
          className: "w-full h-full object-cover"
        }
      ) : /* @__PURE__ */ jsx64("svg", { className: "w-6 h-6 text-gray-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx64("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" }) }) }),
      /* @__PURE__ */ jsxs50("div", { className: "flex-1 min-w-0", children: [
        /* @__PURE__ */ jsxs50("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx64("h4", { className: "text-sm font-medium text-gray-900 truncate", children: product.name }),
          /* @__PURE__ */ jsx64(Badge, { variant: "outline", className: "text-xs", children: product.category })
        ] }),
        /* @__PURE__ */ jsxs50("div", { className: "flex items-center space-x-4 mt-1 text-xs text-gray-500", children: [
          /* @__PURE__ */ jsxs50("span", { children: [
            "$",
            product.rentPrice,
            "/day"
          ] }),
          /* @__PURE__ */ jsxs50("span", { children: [
            product.rentalCount,
            " rentals"
          ] }),
          /* @__PURE__ */ jsxs50("span", { className: "font-medium text-green-600", children: [
            "$",
            product.totalRevenue.toLocaleString()
          ] })
        ] })
      ] })
    ] }, product.id)) }) })
  ] });
};

// src/components/charts/RecentOrders.tsx
import { ORDER_STATUS_COLORS } from "@rentalshop/constants";
import { jsx as jsx65, jsxs as jsxs51 } from "react/jsx-runtime";
var getStatusColor3 = (status) => {
  return ORDER_STATUS_COLORS[status] || "bg-gray-100 text-gray-800";
};
var getOrderTypeColor = (orderType) => {
  switch (orderType.toLowerCase()) {
    case "rent":
      return "bg-orange-100 text-orange-800 border-orange-200";
    case "sale":
      return "bg-green-100 text-green-800 border-green-200";
    case "rent_to_own":
      return "bg-purple-100 text-purple-800 border-purple-200";
    default:
      return "bg-gray-100 text-gray-800 border-gray-200";
  }
};
var RecentOrders = ({ data, loading = false }) => {
  if (loading) {
    return /* @__PURE__ */ jsxs51(Card, { children: [
      /* @__PURE__ */ jsx65(CardHeader, { children: /* @__PURE__ */ jsx65(CardTitle, { children: "Recent Orders" }) }),
      /* @__PURE__ */ jsx65(CardContent, { children: /* @__PURE__ */ jsx65("div", { className: "space-y-4", children: Array.from({ length: 5 }).map((_, i) => /* @__PURE__ */ jsxs51("div", { className: "flex items-center space-x-3 animate-pulse", children: [
        /* @__PURE__ */ jsx65("div", { className: "w-12 h-12 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsxs51("div", { className: "flex-1 space-y-2", children: [
          /* @__PURE__ */ jsx65("div", { className: "h-4 bg-gray-200 rounded w-3/4" }),
          /* @__PURE__ */ jsx65("div", { className: "h-3 bg-gray-200 rounded w-1/2" })
        ] })
      ] }, i)) }) })
    ] });
  }
  if (!data || data.length === 0) {
    return /* @__PURE__ */ jsxs51(Card, { children: [
      /* @__PURE__ */ jsx65(CardHeader, { children: /* @__PURE__ */ jsx65(CardTitle, { children: "Recent Orders" }) }),
      /* @__PURE__ */ jsx65(CardContent, { children: /* @__PURE__ */ jsx65("div", { className: "text-center py-8 text-gray-500", children: "No recent orders" }) })
    ] });
  }
  const formatDate11 = (dateString) => {
    return new Date(dateString).toLocaleDateString("en-US", {
      month: "short",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  };
  return /* @__PURE__ */ jsxs51(Card, { children: [
    /* @__PURE__ */ jsxs51(CardHeader, { children: [
      /* @__PURE__ */ jsx65(CardTitle, { children: "Recent Orders" }),
      /* @__PURE__ */ jsx65("p", { className: "text-sm text-gray-600", children: "Latest order activity" })
    ] }),
    /* @__PURE__ */ jsx65(CardContent, { children: /* @__PURE__ */ jsx65("div", { className: "space-y-4", children: data.slice(0, 10).map((order) => /* @__PURE__ */ jsxs51("div", { className: "flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors", children: [
      /* @__PURE__ */ jsx65("div", { className: "flex-shrink-0 w-12 h-12 rounded-lg bg-gray-200 flex items-center justify-center overflow-hidden", children: order.productImage ? /* @__PURE__ */ jsx65(
        "img",
        {
          src: order.productImage,
          alt: order.productNames,
          className: "w-full h-full object-cover"
        }
      ) : /* @__PURE__ */ jsx65("svg", { className: "w-6 h-6 text-gray-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx65("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" }) }) }),
      /* @__PURE__ */ jsxs51("div", { className: "flex-1 min-w-0", children: [
        /* @__PURE__ */ jsxs51("div", { className: "flex items-center space-x-2 mb-1", children: [
          /* @__PURE__ */ jsx65("h4", { className: "text-sm font-medium text-gray-900", children: order.orderNumber }),
          /* @__PURE__ */ jsx65(Badge, { variant: "outline", className: `text-xs ${getOrderTypeColor(order.orderType)}`, children: order.orderType.toUpperCase() }),
          /* @__PURE__ */ jsx65(Badge, { variant: "outline", className: `text-xs ${getStatusColor3(order.status)}`, children: order.status.toUpperCase() })
        ] }),
        /* @__PURE__ */ jsxs51("div", { className: "text-sm text-gray-600 mb-1", children: [
          /* @__PURE__ */ jsx65("span", { className: "font-medium", children: order.customerName }),
          /* @__PURE__ */ jsx65("span", { className: "mx-2", children: "\u2022" }),
          /* @__PURE__ */ jsx65("span", { children: order.productNames })
        ] }),
        /* @__PURE__ */ jsxs51("div", { className: "flex items-center justify-between text-xs text-gray-500", children: [
          /* @__PURE__ */ jsxs51("div", { className: "flex items-center space-x-4", children: [
            /* @__PURE__ */ jsxs51("span", { children: [
              "$",
              order.totalAmount.toLocaleString()
            ] }),
            /* @__PURE__ */ jsxs51("span", { children: [
              "by ",
              order.createdBy
            ] }),
            /* @__PURE__ */ jsx65("span", { children: formatDate11(order.createdAt) })
          ] }),
          order.pickupPlanAt && /* @__PURE__ */ jsxs51("div", { className: "text-xs text-blue-600", children: [
            "Pickup: ",
            formatDate11(order.pickupPlanAt)
          ] })
        ] })
      ] })
    ] }, order.id)) }) })
  ] });
};

// src/components/features/Dashboard/components/DashboardCharts.tsx
import { jsx as jsx66, jsxs as jsxs52 } from "react/jsx-runtime";
function DashboardCharts({ orderData, incomeData }) {
  const transformedOrderData = orderData.map((order, index) => ({
    period: order.date,
    actual: order.revenue,
    projected: order.revenue * 1.1
    // Simple projection
  }));
  const transformedIncomeData = incomeData.map((income, index) => ({
    period: income.date,
    actual: income.income,
    projected: income.income * 1.1
    // Simple projection
  }));
  return /* @__PURE__ */ jsxs52("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs52(Card, { children: [
      /* @__PURE__ */ jsx66(CardHeader, { children: /* @__PURE__ */ jsx66(CardTitle, { children: "Order Trends" }) }),
      /* @__PURE__ */ jsx66(CardContent, { children: /* @__PURE__ */ jsx66(OrderChart, { data: transformedOrderData }) })
    ] }),
    /* @__PURE__ */ jsxs52(Card, { children: [
      /* @__PURE__ */ jsx66(CardHeader, { children: /* @__PURE__ */ jsx66(CardTitle, { children: "Income vs Expenses" }) }),
      /* @__PURE__ */ jsx66(CardContent, { children: /* @__PURE__ */ jsx66(IncomeChart, { data: transformedIncomeData }) })
    ] })
  ] });
}

// src/components/features/Dashboard/components/DashboardFocus.tsx
import { jsx as jsx67, jsxs as jsxs53 } from "react/jsx-runtime";
function DashboardFocus({ focus }) {
  const getStatusColor11 = (status) => {
    switch (status) {
      case "completed":
        return "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";
      case "in-progress":
        return "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";
      case "pending":
        return "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";
      default:
        return "bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";
    }
  };
  return /* @__PURE__ */ jsxs53(Card, { children: [
    /* @__PURE__ */ jsxs53(CardHeader, { children: [
      /* @__PURE__ */ jsx67(CardTitle, { children: "Today's Focus" }),
      /* @__PURE__ */ jsx67("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Priority tasks and key focus areas" })
    ] }),
    /* @__PURE__ */ jsx67(CardContent, { children: /* @__PURE__ */ jsxs53("div", { className: "space-y-4", children: [
      focus.map((item, index) => /* @__PURE__ */ jsxs53("div", { className: "flex items-start space-x-3 p-3 rounded-lg border border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx67("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx67("div", { className: `w-2 h-2 rounded-full ${item.status === "completed" ? "bg-green-500" : item.status === "in-progress" ? "bg-blue-500" : "bg-yellow-500"}` }) }),
        /* @__PURE__ */ jsxs53("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ jsxs53("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx67("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: item.priority }),
            /* @__PURE__ */ jsx67(
              Badge,
              {
                variant: "outline",
                className: getStatusColor11(item.status),
                children: item.status.replace("-", " ")
              }
            )
          ] }),
          /* @__PURE__ */ jsx67("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: item.description }),
          item.deadline && /* @__PURE__ */ jsxs53("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-2", children: [
            "Deadline: ",
            item.deadline
          ] })
        ] })
      ] }, index)),
      focus.length === 0 && /* @__PURE__ */ jsxs53("div", { className: "text-center py-8 text-gray-500 dark:text-gray-400", children: [
        /* @__PURE__ */ jsx67("p", { children: "No focus items for today" }),
        /* @__PURE__ */ jsx67("p", { className: "text-sm", children: "Great job staying on top of everything!" })
      ] })
    ] }) })
  ] });
}

// src/components/features/Dashboard/components/DashboardActions.tsx
import { jsx as jsx68, jsxs as jsxs54 } from "react/jsx-runtime";
function DashboardActions({ onActionClick }) {
  const actions = [
    {
      id: "create-order",
      label: "Create Order",
      description: "Start a new rental or sale order",
      icon: "\u{1F4CB}",
      variant: "default"
    },
    {
      id: "add-product",
      label: "Add Product",
      description: "Add new product to inventory",
      icon: "\u{1F4E6}",
      variant: "secondary"
    },
    {
      id: "add-customer",
      label: "Add Customer",
      description: "Register new customer",
      icon: "\u{1F464}",
      variant: "outline"
    },
    {
      id: "view-reports",
      label: "View Reports",
      description: "Generate business reports",
      icon: "\u{1F4CA}",
      variant: "outline"
    },
    {
      id: "manage-inventory",
      label: "Manage Inventory",
      description: "Check stock levels and availability",
      icon: "\u{1F3EA}",
      variant: "outline"
    },
    {
      id: "customer-support",
      label: "Customer Support",
      description: "Handle customer inquiries",
      icon: "\u{1F4AC}",
      variant: "outline"
    }
  ];
  return /* @__PURE__ */ jsxs54(Card, { children: [
    /* @__PURE__ */ jsxs54(CardHeader, { children: [
      /* @__PURE__ */ jsx68(CardTitle, { children: "Quick Actions" }),
      /* @__PURE__ */ jsx68("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Common tasks and shortcuts" })
    ] }),
    /* @__PURE__ */ jsx68(CardContent, { children: /* @__PURE__ */ jsx68("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: actions.map((action) => /* @__PURE__ */ jsx68(
      Button2,
      {
        variant: action.variant,
        className: "h-auto p-4 flex flex-col items-start space-y-2 text-left",
        onClick: () => onActionClick(action.id),
        children: /* @__PURE__ */ jsxs54("div", { className: "flex items-center space-x-2 w-full", children: [
          /* @__PURE__ */ jsx68("span", { className: "text-xl", children: action.icon }),
          /* @__PURE__ */ jsxs54("div", { className: "flex-1", children: [
            /* @__PURE__ */ jsx68("div", { className: "font-medium", children: action.label }),
            /* @__PURE__ */ jsx68("div", { className: "text-xs opacity-80", children: action.description })
          ] })
        ] })
      },
      action.id
    )) }) })
  ] });
}

// src/components/features/Dashboard/components/DashboardNavigation.tsx
import { jsx as jsx69, jsxs as jsxs55 } from "react/jsx-runtime";
function DashboardNavigation({ activeTab }) {
  const tabs = [
    { id: "overview", label: "Overview", description: "General business metrics" },
    { id: "orders", label: "Orders", description: "Order management and tracking" },
    { id: "customers", label: "Customers", description: "Customer insights and data" },
    { id: "products", label: "Products", description: "Inventory and product analytics" },
    { id: "financial", label: "Financial", description: "Revenue and expense tracking" },
    { id: "reports", label: "Reports", description: "Detailed business reports" }
  ];
  return /* @__PURE__ */ jsx69(Card, { children: /* @__PURE__ */ jsx69(CardContent, { className: "p-0", children: /* @__PURE__ */ jsx69("div", { className: "flex flex-wrap border-b border-gray-200 dark:border-gray-700", children: tabs.map((tab) => /* @__PURE__ */ jsx69(
    Button2,
    {
      variant: activeTab === tab.id ? "default" : "ghost",
      className: `flex-1 min-w-0 px-4 py-3 rounded-none border-b-2 ${activeTab === tab.id ? "border-primary bg-primary/5 text-primary" : "border-transparent hover:bg-gray-50 dark:hover:bg-gray-800"}`,
      children: /* @__PURE__ */ jsxs55("div", { className: "text-left", children: [
        /* @__PURE__ */ jsx69("div", { className: "font-medium", children: tab.label }),
        /* @__PURE__ */ jsx69("div", { className: "text-xs opacity-70", children: tab.description })
      ] })
    },
    tab.id
  )) }) }) });
}

// src/components/features/Dashboard/components/DashboardLoading.tsx
import { jsx as jsx70, jsxs as jsxs56 } from "react/jsx-runtime";
function DashboardLoading() {
  return /* @__PURE__ */ jsxs56("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs56("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs56("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx70("div", { className: "h-8 w-48 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx70("div", { className: "h-4 w-64 bg-gray-200 rounded animate-pulse" })
      ] }),
      /* @__PURE__ */ jsxs56("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx70("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx70("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" })
      ] })
    ] }),
    /* @__PURE__ */ jsx70(StatsSkeleton, {}),
    /* @__PURE__ */ jsxs56("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs56("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx70("div", { className: "h-6 w-32 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx70("div", { className: "h-64 w-full bg-gray-200 rounded-lg animate-pulse" })
      ] }),
      /* @__PURE__ */ jsxs56("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx70("div", { className: "h-6 w-32 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx70("div", { className: "h-64 w-full bg-gray-200 rounded-lg animate-pulse" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs56("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx70("div", { className: "h-6 w-32 bg-gray-200 rounded animate-pulse" }),
      /* @__PURE__ */ jsx70("div", { className: "space-y-3", children: Array.from({ length: 5 }).map((_, i) => /* @__PURE__ */ jsxs56("div", { className: "flex items-center gap-3 p-3 border rounded-lg", children: [
        /* @__PURE__ */ jsx70("div", { className: "h-8 w-8 bg-gray-200 rounded-full animate-pulse" }),
        /* @__PURE__ */ jsxs56("div", { className: "flex-1 space-y-2", children: [
          /* @__PURE__ */ jsx70("div", { className: "h-4 w-48 bg-gray-200 rounded animate-pulse" }),
          /* @__PURE__ */ jsx70("div", { className: "h-3 w-32 bg-gray-200 rounded animate-pulse" })
        ] }),
        /* @__PURE__ */ jsx70("div", { className: "h-4 w-20 bg-gray-200 rounded animate-pulse" })
      ] }, i)) })
    ] }),
    /* @__PURE__ */ jsxs56("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx70("div", { className: "h-6 w-32 bg-gray-200 rounded animate-pulse" }),
      /* @__PURE__ */ jsx70(GridSkeleton, { items: 4 })
    ] })
  ] });
}
function DashboardFocusLoading() {
  return /* @__PURE__ */ jsxs56("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs56("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx70("div", { className: "h-6 w-32 bg-gray-200 rounded animate-pulse" }),
      /* @__PURE__ */ jsx70("div", { className: "h-4 w-48 bg-gray-200 rounded animate-pulse" })
    ] }),
    /* @__PURE__ */ jsx70("div", { className: "space-y-4", children: Array.from({ length: 3 }).map((_, i) => /* @__PURE__ */ jsxs56("div", { className: "p-4 border rounded-lg", children: [
      /* @__PURE__ */ jsxs56("div", { className: "flex items-center justify-between mb-3", children: [
        /* @__PURE__ */ jsx70("div", { className: "h-5 w-32 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx70("div", { className: "h-6 w-16 bg-gray-200 rounded animate-pulse" })
      ] }),
      /* @__PURE__ */ jsxs56("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx70("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx70("div", { className: "h-4 w-3/4 bg-gray-200 rounded animate-pulse" })
      ] })
    ] }, i)) })
  ] });
}

// src/components/layout/DashboardWrapper.tsx
import { useState as useState26 } from "react";

// src/components/layout/sidebar.tsx
import { useEffect as useEffect15 } from "react";
import Link2 from "next/link";
import { useRouter as useRouter2 } from "next/navigation";
import { cn as cn3 } from "@rentalshop/ui";
import { Button as Button12, Card as Card10 } from "@rentalshop/ui";
import { ChevronLeft as ChevronLeft2, ChevronRight as ChevronRight3, Building2 as Building22 } from "lucide-react";
import { useOptimisticNavigation } from "@rentalshop/hooks";
import { Fragment as Fragment10, jsx as jsx71, jsxs as jsxs57 } from "react/jsx-runtime";
var menuItems = [
  {
    label: "Dashboard",
    href: "/dashboard",
    icon: /* @__PURE__ */ jsxs57("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: [
      /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z" }),
      /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z" })
    ] })
  },
  {
    label: "Customers",
    href: "/customers",
    icon: /* @__PURE__ */ jsx71("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" }) })
  },
  {
    label: "Products",
    href: "/products",
    icon: /* @__PURE__ */ jsx71("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" }) })
  },
  {
    label: "Orders",
    href: "/orders",
    icon: /* @__PURE__ */ jsx71("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" }) }),
    badge: "3"
  },
  {
    label: "Outlets",
    href: "/outlets",
    icon: /* @__PURE__ */ jsx71(Building22, { className: "w-5 h-5" })
  },
  {
    label: "Users",
    href: "/users",
    icon: /* @__PURE__ */ jsx71("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" }) })
  },
  {
    label: "Settings",
    href: "/settings",
    icon: /* @__PURE__ */ jsxs57("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: [
      /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" }),
      /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15 12a3 3 0 11-6 0 3 3 0 016 0z" })
    ] })
  }
];
var Sidebar = ({
  user,
  isOpen = false,
  onToggle,
  onLogout,
  currentPath = "",
  isCollapsed = false,
  onCollapseToggle
}) => {
  const router = useRouter2();
  const { navigate, navigatingTo } = useOptimisticNavigation();
  useEffect15(() => {
    menuItems.forEach((item) => {
      router.prefetch(item.href);
    });
  }, [router]);
  return /* @__PURE__ */ jsxs57(Fragment10, { children: [
    isOpen && /* @__PURE__ */ jsx71(
      "div",
      {
        className: "fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",
        onClick: onToggle
      }
    ),
    /* @__PURE__ */ jsx71(
      "aside",
      {
        className: cn3(
          "fixed inset-y-0 left-0 z-50 bg-white border-r border-gray-200 transform transition-all duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0",
          isOpen ? "translate-x-0" : "-translate-x-full",
          isCollapsed ? "w-16" : "w-64"
        ),
        children: /* @__PURE__ */ jsxs57("div", { className: "flex flex-col h-full", children: [
          /* @__PURE__ */ jsxs57("div", { className: "flex items-center justify-between h-16 px-6 border-b border-gray-200", children: [
            /* @__PURE__ */ jsxs57(
              "button",
              {
                onClick: () => navigate("/dashboard"),
                className: "flex items-center space-x-2 hover:opacity-80 transition-opacity",
                children: [
                  /* @__PURE__ */ jsx71("div", { className: "w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center flex-shrink-0", children: /* @__PURE__ */ jsx71("span", { className: "text-white font-bold text-sm", children: "R" }) }),
                  !isCollapsed && /* @__PURE__ */ jsx71("span", { className: "font-bold text-2xl text-gray-900 leading-none", children: "RentalShop" })
                ]
              }
            ),
            /* @__PURE__ */ jsxs57("div", { className: "flex items-center space-x-2", children: [
              onCollapseToggle && /* @__PURE__ */ jsx71(
                Button12,
                {
                  variant: "ghost",
                  size: "sm",
                  onClick: onCollapseToggle,
                  className: "h-8 w-8 p-0 hover:bg-gray-100",
                  title: isCollapsed ? "Expand sidebar" : "Collapse sidebar",
                  children: isCollapsed ? /* @__PURE__ */ jsx71(ChevronRight3, { className: "w-4 h-4" }) : /* @__PURE__ */ jsx71(ChevronLeft2, { className: "w-4 h-4" })
                }
              ),
              /* @__PURE__ */ jsx71(
                Button12,
                {
                  variant: "ghost",
                  size: "icon",
                  onClick: onToggle,
                  className: "lg:hidden text-gray-500 hover:text-gray-700 focus:outline-none h-8 w-8 p-0",
                  children: /* @__PURE__ */ jsx71("svg", { className: "w-6 h-6", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M6 18L18 6M6 6l12 12" }) })
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxs57("nav", { className: "flex-1 px-4 py-6 space-y-2 overflow-y-auto", children: [
            /* @__PURE__ */ jsx71("div", { className: "hidden", children: menuItems.map((item) => /* @__PURE__ */ jsx71(Link2, { href: item.href, prefetch: true, children: item.label }, `prefetch-${item.href}`)) }),
            menuItems.map((item) => {
              const isActive = currentPath === item.href;
              const isNavigating = navigatingTo === item.href;
              const shouldHighlight = isActive || isNavigating;
              return /* @__PURE__ */ jsxs57(
                "button",
                {
                  onClick: (e2) => {
                    e2.preventDefault();
                    navigate(item.href);
                  },
                  onMouseEnter: () => {
                    router.prefetch(item.href);
                  },
                  className: cn3(
                    "w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-all duration-150 group",
                    shouldHighlight ? "bg-green-100 text-green-700 border-r-2 border-green-600" : "text-slate-700 hover:bg-slate-100 hover:text-slate-900",
                    // Add click feedback
                    navigatingTo === item.href && "bg-green-50 text-green-700 border-r-2 border-green-600"
                  ),
                  title: isCollapsed ? item.label : void 0,
                  children: [
                    /* @__PURE__ */ jsxs57("div", { className: "flex items-center space-x-3", children: [
                      /* @__PURE__ */ jsx71("span", { className: cn3(
                        "flex-shrink-0 transition-colors duration-150",
                        shouldHighlight ? "text-green-600" : "text-slate-500"
                      ), children: item.icon }),
                      !isCollapsed && /* @__PURE__ */ jsx71("span", { className: cn3(
                        "text-base transition-all duration-150",
                        shouldHighlight ? "font-medium" : "font-normal"
                      ), children: item.label })
                    ] }),
                    !isCollapsed && item.badge && /* @__PURE__ */ jsx71("span", { className: "inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full", children: item.badge })
                  ]
                },
                item.href
              );
            })
          ] }),
          user && /* @__PURE__ */ jsx71("div", { className: "p-4 border-t border-gray-200", children: /* @__PURE__ */ jsxs57(Card10, { className: "p-3", children: [
            /* @__PURE__ */ jsxs57("div", { className: "flex items-center space-x-3", children: [
              /* @__PURE__ */ jsx71("div", { className: "w-10 h-10 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0", children: /* @__PURE__ */ jsx71("span", { className: "text-white font-bold text-sm", children: user.firstName?.[0] || user.email?.[0] || "U" }) }),
              !isCollapsed && /* @__PURE__ */ jsxs57("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx71("p", { className: "text-sm font-medium text-gray-900 truncate", children: user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : user.email || "User" }),
                /* @__PURE__ */ jsx71("p", { className: "text-xs text-gray-500 truncate", children: user.role || "User" })
              ] })
            ] }),
            !isCollapsed && /* @__PURE__ */ jsxs57("div", { className: "mt-4 space-y-2", children: [
              /* @__PURE__ */ jsx71(
                "button",
                {
                  onClick: () => navigate("/profile"),
                  className: "block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",
                  children: /* @__PURE__ */ jsxs57("div", { className: "flex items-center space-x-2", children: [
                    /* @__PURE__ */ jsx71("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" }) }),
                    /* @__PURE__ */ jsx71("span", { children: "Profile" })
                  ] })
                }
              ),
              /* @__PURE__ */ jsxs57(
                Button12,
                {
                  onClick: onLogout,
                  variant: "outline",
                  size: "sm",
                  className: "w-full justify-start",
                  children: [
                    /* @__PURE__ */ jsx71("svg", { className: "w-4 h-4 mr-2", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx71("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" }) }),
                    "Logout"
                  ]
                }
              )
            ] })
          ] }) })
        ] })
      }
    )
  ] });
};

// src/components/layout/DashboardWrapper.tsx
import { jsx as jsx72, jsxs as jsxs58 } from "react/jsx-runtime";
function DashboardWrapper({
  children,
  user,
  onLogout = () => {
  },
  currentPath = "",
  hideSidebar = false,
  allowCollapse = true
}) {
  const [sidebarCollapsed, setSidebarCollapsed] = useState26(false);
  const handleCollapseToggle = () => {
    setSidebarCollapsed(!sidebarCollapsed);
  };
  return /* @__PURE__ */ jsxs58("div", { className: "flex h-screen bg-gray-50", children: [
    !hideSidebar && /* @__PURE__ */ jsx72(
      Sidebar,
      {
        user,
        onLogout,
        currentPath,
        isCollapsed: sidebarCollapsed,
        onCollapseToggle: allowCollapse ? handleCollapseToggle : void 0
      }
    ),
    /* @__PURE__ */ jsx72("main", { className: `flex-1 overflow-y-auto ${!hideSidebar ? "transition-all duration-300 ease-in-out" : ""}`, children: /* @__PURE__ */ jsx72("div", { className: "p-6", children }) })
  ] });
}

// src/components/features/Dashboard/Dashboard.tsx
import { jsx as jsx73, jsxs as jsxs59 } from "react/jsx-runtime";
function Dashboard({ data, onPeriodChange, onActionClick }) {
  return /* @__PURE__ */ jsx73(DashboardWrapper, { children: /* @__PURE__ */ jsxs59("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx73(
      DashboardHeader,
      {
        period: data.period,
        onPeriodChange
      }
    ),
    /* @__PURE__ */ jsx73(DashboardStats, { stats: data.stats }),
    /* @__PURE__ */ jsxs59("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsx73(
        DashboardCharts,
        {
          orderData: data.orderData,
          incomeData: data.incomeData
        }
      ),
      /* @__PURE__ */ jsx73(DashboardFocus, { focus: data.todaysFocus })
    ] }),
    /* @__PURE__ */ jsx73(DashboardActions, { onActionClick }),
    /* @__PURE__ */ jsx73(DashboardNavigation, { activeTab: data.activeTab })
  ] }) });
}
var Dashboard_default = Dashboard;

// src/components/features/Products/Products.tsx
import React56 from "react";

// src/components/features/Products/components/ProductHeader.tsx
import { jsx as jsx74, jsxs as jsxs60 } from "react/jsx-runtime";
function ProductHeader({ totalProducts, viewMode, onViewModeChange }) {
  const viewModes = [
    { value: "grid", label: "Grid View", icon: "\u229E" },
    { value: "table", label: "Table View", icon: "\u229F" }
  ];
  return /* @__PURE__ */ jsx74("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0", children: /* @__PURE__ */ jsx74("div", { className: "flex items-center space-x-2", children: viewModes.map((mode) => /* @__PURE__ */ jsxs60(
    Button2,
    {
      variant: viewMode === mode.value ? "default" : "outline",
      size: "sm",
      onClick: () => onViewModeChange(mode.value),
      className: "flex items-center space-x-2",
      children: [
        /* @__PURE__ */ jsx74("span", { className: "text-lg", children: mode.icon }),
        /* @__PURE__ */ jsx74("span", { className: "hidden sm:inline", children: mode.label })
      ]
    },
    mode.value
  )) }) });
}

// src/components/features/Products/components/ProductPageHeader.tsx
import { jsx as jsx75, jsxs as jsxs61 } from "react/jsx-runtime";
var ProductPageHeader = ({
  title,
  subtitle,
  onBack,
  backText = "Back to Products",
  backUrl,
  children
}) => {
  const handleBack = () => {
    if (onBack) {
      onBack();
    } else if (backUrl) {
      window.location.href = backUrl;
    }
  };
  return /* @__PURE__ */ jsx75("div", { className: "mb-6", children: (onBack || backUrl) && /* @__PURE__ */ jsxs61(
    Button2,
    {
      onClick: handleBack,
      variant: "outline",
      className: "mb-4",
      children: [
        "\u2190",
        backText
      ]
    }
  ) });
};

// src/components/features/Products/components/ProductFilters.tsx
import { useCallback as useCallback8 } from "react";
import { Input as Input8 } from "@rentalshop/ui";
import { Select as Select5, SelectContent as SelectContent5, SelectItem as SelectItem5, SelectTrigger as SelectTrigger5, SelectValue as SelectValue5 } from "@rentalshop/ui";
import { useOutletsData, useCategoriesData, useProductTranslations as useProductTranslations3, useCommonTranslations as useCommonTranslations6 } from "@rentalshop/hooks";
import { Fragment as Fragment11, jsx as jsx76, jsxs as jsxs62 } from "react/jsx-runtime";
function ProductFilters({ filters, onFiltersChange, onSearchChange, onClearFilters }) {
  const t2 = useProductTranslations3();
  const tc = useCommonTranslations6();
  const { outlets, loading: loadingOutlets } = useOutletsData();
  const { categories, loading: loadingCategories } = useCategoriesData();
  console.log("\u{1F50D} ProductFilters: Categories data:", {
    categories,
    isArray: Array.isArray(categories),
    count: categories?.length || 0,
    loading: loadingCategories,
    firstCategory: categories?.[0]?.name || "none"
  });
  const handleSearchChange = useCallback8((e2) => {
    const value = e2.target.value;
    onSearchChange(value);
  }, [onSearchChange]);
  const handleOutletChange = useCallback8((value) => {
    const outletId = value === "all" ? void 0 : parseInt(value);
    onFiltersChange({ outletId });
  }, [onFiltersChange]);
  const handleCategoryChange = useCallback8((value) => {
    const categoryId = value === "all" ? void 0 : parseInt(value);
    onFiltersChange({ categoryId });
  }, [onFiltersChange]);
  const hasActiveFilters = !!(filters.search || filters.outletId || filters.categoryId);
  return /* @__PURE__ */ jsxs62(Fragment11, { children: [
    /* @__PURE__ */ jsx76("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs62("div", { className: "relative", children: [
      /* @__PURE__ */ jsx76(
        Input8,
        {
          type: "text",
          placeholder: t2("search.placeholder"),
          value: filters.search || "",
          onChange: handleSearchChange,
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx76(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx76(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs62(
      Select5,
      {
        value: filters.outletId?.toString() || "all",
        onValueChange: handleOutletChange,
        disabled: loadingOutlets,
        children: [
          /* @__PURE__ */ jsx76(SelectTrigger5, { className: "w-[160px] h-10", children: /* @__PURE__ */ jsx76(SelectValue5, { placeholder: t2("filters.outletLabel") }) }),
          /* @__PURE__ */ jsxs62(SelectContent5, { children: [
            /* @__PURE__ */ jsx76(SelectItem5, { value: "all", children: t2("filters.allOutlets") }),
            outlets.map((outlet) => /* @__PURE__ */ jsx76(SelectItem5, { value: outlet.id.toString(), children: outlet.name }, outlet.id))
          ] })
        ]
      }
    ),
    /* @__PURE__ */ jsxs62(
      Select5,
      {
        value: filters.categoryId?.toString() || "all",
        onValueChange: handleCategoryChange,
        disabled: loadingCategories,
        children: [
          /* @__PURE__ */ jsx76(SelectTrigger5, { className: "w-[160px] h-10", children: /* @__PURE__ */ jsx76(SelectValue5, { placeholder: t2("filters.categoryLabel") }) }),
          /* @__PURE__ */ jsxs62(SelectContent5, { children: [
            /* @__PURE__ */ jsx76(SelectItem5, { value: "all", children: t2("filters.allCategories") }),
            categories.map((category) => /* @__PURE__ */ jsx76(SelectItem5, { value: category.id.toString(), children: category.name }, category.id))
          ] })
        ]
      }
    ),
    hasActiveFilters && onClearFilters && /* @__PURE__ */ jsx76(
      Button,
      {
        variant: "outline",
        size: "sm",
        onClick: onClearFilters,
        className: "h-10",
        children: t2("filters.clear")
      }
    )
  ] });
}

// src/components/features/Products/components/ProductGrid.tsx
import { useState as useState28 } from "react";

// src/components/features/Products/components/ProductCard.tsx
import { useState as useState27 } from "react";
import { Fragment as Fragment12, jsx as jsx77, jsxs as jsxs63 } from "react/jsx-runtime";
var ProductCard = ({
  id,
  name,
  description,
  stock,
  renting,
  available,
  rentPrice,
  salePrice,
  deposit,
  images,
  category,
  outlet,
  onRent,
  onView,
  onEdit,
  onDelete,
  variant = "client",
  className,
  // New props
  categories = [],
  outlets = [],
  merchantId = "",
  onProductUpdated,
  onError
}) => {
  const [isEditDialogOpen, setIsEditDialogOpen] = useState27(false);
  const mainImage = images?.[0] || "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDMwIDEwMEMxMzAgMTE2LjU2OSAxMTYuNTY5IDEzMCAxMDAgMTMwQzgzLjQzMSAxMzAgNzAgMTE2LjU2OSA3MCAxMEM3MCA4My40MzEgODMuNDMxIDcwIDEwMCA3MFoiIGZpbGw9IiNEMUQ1REIiLz4KPHBhdGggZD0iTTEwMCAxMTVDMTA4LjI4NCAxMTUgMTE1IDEwOC4yODQgMTE1IDEwMEMxMTUgOTEuNzE2IDEwOC4yODQgODUgMTAwIDg1QzkxLjcxNiA4NSA4NSA5MS43MTYgODUgMTAwQzg1IDEwOC4yODQgOTEuNzE2IDExNSAxMDAgMTE1WiIgZmlsbD0iI0E5Q0JCRiIvPgo8L3N2Zz4K";
  const isAvailable = available > 0;
  const handleEdit = () => {
    if (categories.length > 0 && outlets.length > 0 && merchantId) {
      setIsEditDialogOpen(true);
    } else if (onEdit) {
      onEdit(id);
    }
  };
  const getProductForEdit = () => ({
    id,
    name,
    description: description || "",
    barcode: "",
    categoryId: "",
    // This would need to be passed from parent
    rentPrice,
    salePrice,
    deposit,
    totalStock: stock,
    images: images.join(","),
    isActive: true,
    outletStock: [{
      outletId: "",
      // This would need to be passed from parent
      stock,
      available,
      renting
    }],
    category: { id: "", name: category.name },
    merchant: { id: merchantId, name: "" },
    createdAt: /* @__PURE__ */ new Date(),
    updatedAt: /* @__PURE__ */ new Date()
  });
  const handleSuccess = (updatedProduct) => {
    onProductUpdated?.(updatedProduct);
    setIsEditDialogOpen(false);
  };
  const handleError = (error2) => {
    onError?.(error2);
  };
  return /* @__PURE__ */ jsx77(Fragment12, { children: /* @__PURE__ */ jsxs63(Card, { className: cn2("overflow-hidden transition-all hover:shadow-lg", className), children: [
    /* @__PURE__ */ jsxs63("div", { className: "relative aspect-square overflow-hidden bg-gray-100", children: [
      /* @__PURE__ */ jsx77(
        "img",
        {
          src: mainImage,
          alt: name,
          className: "h-full w-full object-cover transition-transform hover:scale-105",
          onError: (e2) => {
            e2.currentTarget.src = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDMwIDEwMEMxMzAgMTE2LjU2OSAxMTYuNTY5IDEzMCAxMDAgMTMwQzgzLjQzMSAxMzAgNzAgMTE2LjU2OSA3MCAxMEM3MCA4My40MzEgODMuNDMxIDcwIDEwMCA3MFoiIGZpbGw9IiNEMUQ1REIiLz4KPHBhdGggZD0iTTEwMCAxMTVDMTA4LjI4NCAxMTUgMTE1IDEwOC4yODQgMTE1IDEwMEMxMTUgOTEuNzE2IDEwOC4yODQgODUgMTAwIDg1QzkxLjcxNiA4NSA4NSA5MS43MTYgODUgMTAwQzg1IDEwOC4yODQgOTEuNzE2IDExNSAxMDAgMTE1WiIgZmlsbD0iI0E5Q0JCRiIvPgo8L3N2Zz4K";
          }
        }
      ),
      !isAvailable && /* @__PURE__ */ jsx77("div", { className: "absolute inset-0 bg-black/50 flex items-center justify-center", children: /* @__PURE__ */ jsx77("span", { className: "text-white font-semibold text-lg", children: "Out of Stock" }) }),
      /* @__PURE__ */ jsx77("div", { className: "absolute top-2 left-2", children: /* @__PURE__ */ jsx77("span", { className: "bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-medium", children: category.name }) }),
      variant === "admin" && /* @__PURE__ */ jsxs63("div", { className: "absolute top-2 right-2 flex gap-1", children: [
        onEdit && /* @__PURE__ */ jsx77(
          Button2,
          {
            size: "sm",
            variant: "secondary",
            onClick: handleEdit,
            className: "h-8 w-8 p-0",
            children: "\u270F\uFE0F"
          }
        ),
        onDelete && /* @__PURE__ */ jsx77(
          Button2,
          {
            size: "sm",
            variant: "destructive",
            onClick: () => onDelete(id),
            className: "h-8 w-8 p-0",
            children: "\u{1F5D1}\uFE0F"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs63("div", { className: "p-4", children: [
      /* @__PURE__ */ jsxs63("div", { className: "mb-2", children: [
        /* @__PURE__ */ jsx77("h3", { className: "font-semibold text-lg text-gray-900 line-clamp-1", children: name }),
        /* @__PURE__ */ jsx77("p", { className: "text-sm text-gray-500", children: outlet.name })
      ] }),
      description && /* @__PURE__ */ jsx77("p", { className: "text-sm text-gray-600 mb-3 line-clamp-2", children: description }),
      /* @__PURE__ */ jsxs63("div", { className: "mb-3 space-y-1", children: [
        /* @__PURE__ */ jsxs63("div", { className: "flex justify-between text-sm", children: [
          /* @__PURE__ */ jsx77("span", { className: "text-gray-600", children: "Total Stock:" }),
          /* @__PURE__ */ jsx77("span", { className: "font-medium", children: stock })
        ] }),
        /* @__PURE__ */ jsxs63("div", { className: "flex justify-between text-sm", children: [
          /* @__PURE__ */ jsx77("span", { className: "text-gray-600", children: "Currently Rented:" }),
          /* @__PURE__ */ jsx77("span", { className: "font-medium text-orange-600", children: renting })
        ] }),
        /* @__PURE__ */ jsxs63("div", { className: "flex justify-between text-sm", children: [
          /* @__PURE__ */ jsx77("span", { className: "text-gray-600", children: "Available:" }),
          /* @__PURE__ */ jsx77("span", { className: cn2("font-medium", isAvailable ? "text-green-600" : "text-red-600"), children: available })
        ] })
      ] }),
      /* @__PURE__ */ jsxs63("div", { className: "mb-4 space-y-1", children: [
        /* @__PURE__ */ jsxs63("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx77("span", { className: "text-sm text-gray-600", children: "Rent Price:" }),
          /* @__PURE__ */ jsxs63("span", { className: "font-semibold text-lg text-blue-600", children: [
            "$",
            rentPrice.toFixed(2),
            "/day"
          ] })
        ] }),
        salePrice && /* @__PURE__ */ jsxs63("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx77("span", { className: "text-sm text-gray-600", children: "Sale Price:" }),
          /* @__PURE__ */ jsxs63("span", { className: "font-semibold text-green-600", children: [
            "$",
            salePrice.toFixed(2)
          ] })
        ] }),
        /* @__PURE__ */ jsxs63("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx77("span", { className: "text-sm text-gray-600", children: "Deposit:" }),
          /* @__PURE__ */ jsxs63("span", { className: "font-medium text-gray-700", children: [
            "$",
            deposit.toFixed(2)
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs63("div", { className: "flex gap-2", children: [
        variant === "client" && /* @__PURE__ */ jsxs63(Fragment12, { children: [
          onView && /* @__PURE__ */ jsx77(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onView(id),
              className: "flex-1",
              children: "View Details"
            }
          ),
          onRent && isAvailable && /* @__PURE__ */ jsx77(
            Button2,
            {
              size: "sm",
              onClick: () => onRent(id),
              className: "flex-1",
              disabled: !isAvailable,
              children: "Rent Now"
            }
          )
        ] }),
        variant === "mobile" && /* @__PURE__ */ jsxs63(Fragment12, { children: [
          onView && /* @__PURE__ */ jsx77(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onView(id),
              className: "flex-1",
              children: "Details"
            }
          ),
          onRent && isAvailable && /* @__PURE__ */ jsx77(
            Button2,
            {
              size: "sm",
              onClick: () => onRent(id),
              className: "flex-1",
              disabled: !isAvailable,
              children: "Rent"
            }
          )
        ] }),
        variant === "admin" && /* @__PURE__ */ jsxs63(Fragment12, { children: [
          onView && /* @__PURE__ */ jsx77(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onView(id),
              className: "flex-1",
              children: "View"
            }
          ),
          onEdit && /* @__PURE__ */ jsx77(
            Button2,
            {
              size: "sm",
              onClick: handleEdit,
              className: "flex-1",
              children: "Edit"
            }
          )
        ] })
      ] })
    ] })
  ] }) });
};

// src/components/features/Products/components/ProductGrid.tsx
import { Fragment as Fragment13, jsx as jsx78, jsxs as jsxs64 } from "react/jsx-runtime";
function ProductGrid({
  products,
  onProductAction,
  categories = [],
  outlets = [],
  merchantId = "",
  onProductCreated,
  onProductUpdated,
  onError,
  showAddButton = false
}) {
  const [isAddDialogOpen, setIsAddDialogOpen] = useState28(false);
  const handleAddProduct = () => {
    setIsAddDialogOpen(true);
  };
  const handleDialogClose = () => {
    setIsAddDialogOpen(false);
  };
  const handleSuccess = (product) => {
    if (onProductCreated) {
      onProductCreated(product);
    }
    setIsAddDialogOpen(false);
  };
  const handleError = (error2) => {
    if (onError) {
      onError(error2);
    }
  };
  if (products.length === 0) {
    return /* @__PURE__ */ jsx78("div", { className: "text-center py-12", children: /* @__PURE__ */ jsxs64("div", { className: "text-gray-500 dark:text-gray-400", children: [
      /* @__PURE__ */ jsx78("div", { className: "text-4xl mb-4", children: "\u{1F4E6}" }),
      /* @__PURE__ */ jsx78("h3", { className: "text-lg font-medium mb-2", children: "No products found" }),
      /* @__PURE__ */ jsx78("p", { className: "text-sm mb-4", children: "Try adjusting your filters or add some products to get started." }),
      showAddButton && categories.length > 0 && outlets.length > 0 && merchantId && /* @__PURE__ */ jsx78(
        Button2,
        {
          onClick: handleAddProduct,
          className: "px-4 py-2",
          children: "Add Your First Product"
        }
      )
    ] }) });
  }
  return /* @__PURE__ */ jsx78(Fragment13, { children: /* @__PURE__ */ jsx78("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6", children: products.map((product) => /* @__PURE__ */ jsx78(
    ProductCard,
    {
      id: product.id,
      name: product.name,
      description: product.description,
      stock: product.stock,
      renting: product.renting,
      available: product.available,
      rentPrice: product.rentPrice,
      deposit: product.deposit,
      images: product.images || [],
      category: { name: product.category },
      outlet: { name: product.outletName },
      onView: (productId) => onProductAction("view", productId),
      onEdit: (productId) => onProductAction("edit", productId),
      onDelete: (productId) => onProductAction("delete", productId),
      variant: "admin",
      categories,
      outlets,
      merchantId,
      onProductUpdated,
      onError
    },
    product.id
  )) }) });
}

// src/components/features/Products/components/ProductTable.tsx
import React44 from "react";
import { useFormatCurrency as useFormatCurrency4 } from "@rentalshop/ui";
import { useProductTranslations as useProductTranslations4, useCommonTranslations as useCommonTranslations7 } from "@rentalshop/hooks";
import { Eye as Eye3, Edit as Edit2, ShoppingCart as ShoppingCart4, Trash2 as Trash24, MoreVertical, Package as Package7 } from "lucide-react";
import { jsx as jsx79, jsxs as jsxs65 } from "react/jsx-runtime";
function ProductTable({
  products,
  onProductAction,
  sortBy = "name",
  sortOrder = "asc",
  onSort
}) {
  const [openDropdownId, setOpenDropdownId] = React44.useState(null);
  const formatMoney = useFormatCurrency4();
  const t2 = useProductTranslations4();
  const tc = useCommonTranslations7();
  console.log("\u{1F50D} ProductTable: Received products:", {
    isArray: Array.isArray(products),
    length: products?.length,
    firstProduct: products?.[0]?.name
  });
  if (products.length === 0) {
    return /* @__PURE__ */ jsx79(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx79(CardContent, { className: "text-center py-12", children: /* @__PURE__ */ jsxs65("div", { className: "text-gray-500 dark:text-gray-400", children: [
      /* @__PURE__ */ jsx79("div", { className: "text-4xl mb-4", children: "\u{1F4E6}" }),
      /* @__PURE__ */ jsx79("h3", { className: "text-lg font-medium mb-2", children: t2("messages.noProducts") }),
      /* @__PURE__ */ jsx79("p", { className: "text-sm", children: t2("messages.noProductsDescription") })
    ] }) }) });
  }
  const formatCurrency22 = (amount) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 2
    }).format(amount);
  };
  const getStatusBadge = (isActive) => {
    return isActive ? /* @__PURE__ */ jsx79(Badge, { className: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200", children: t2("status.active") }) : /* @__PURE__ */ jsx79(Badge, { className: "bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200", children: t2("status.inactive") });
  };
  const getAvailabilityBadge = (available, stock) => {
    if (available === 0) {
      return /* @__PURE__ */ jsx79(Badge, { className: "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200", children: t2("status.outOfStock") });
    }
    if (available < 5) {
      return /* @__PURE__ */ jsx79(Badge, { className: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200", children: t2("status.lowStock") });
    }
    return /* @__PURE__ */ jsx79(Badge, { className: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200", children: t2("status.inStock") });
  };
  const handleSort = (column) => {
    if (onSort) {
      onSort(column);
    }
  };
  return /* @__PURE__ */ jsx79(Card, { className: "shadow-sm border border-gray-200 dark:border-gray-700 h-full flex flex-col", children: /* @__PURE__ */ jsx79("div", { className: "overflow-auto flex-1", children: /* @__PURE__ */ jsxs65("table", { className: "w-full min-w-[1000px]", children: [
    /* @__PURE__ */ jsx79("thead", { className: "bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10", children: /* @__PURE__ */ jsxs65("tr", { children: [
      /* @__PURE__ */ jsx79(
        "th",
        {
          onClick: () => handleSort("name"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",
          children: /* @__PURE__ */ jsxs65("div", { className: "flex items-center gap-1", children: [
            t2("productName"),
            sortBy === "name" && /* @__PURE__ */ jsx79("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx79("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: tc("labels.category") }),
      /* @__PURE__ */ jsx79("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: tc("labels.price") }),
      /* @__PURE__ */ jsx79("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: t2("stock.label") }),
      /* @__PURE__ */ jsx79(
        "th",
        {
          onClick: () => handleSort("createdAt"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",
          children: /* @__PURE__ */ jsxs65("div", { className: "flex items-center gap-1", children: [
            tc("labels.createdAt"),
            sortBy === "createdAt" && /* @__PURE__ */ jsx79("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx79("th", { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: tc("labels.actions") })
    ] }) }),
    /* @__PURE__ */ jsx79("tbody", { className: "bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700", children: products.map((product) => /* @__PURE__ */ jsxs65("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-800", children: [
      /* @__PURE__ */ jsx79("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs65("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsx79("div", { className: "flex-shrink-0", children: product.images && product.images.length > 0 ? /* @__PURE__ */ jsx79(
          "img",
          {
            src: product.images[0],
            alt: product.name,
            className: "w-10 h-10 object-cover rounded border border-gray-200",
            onError: (e2) => {
              const target = e2.target;
              target.style.display = "none";
            }
          }
        ) : /* @__PURE__ */ jsx79("div", { className: "w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 flex items-center justify-center", children: /* @__PURE__ */ jsx79(Package7, { className: "w-5 h-5 text-gray-400" }) }) }),
        /* @__PURE__ */ jsxs65("div", { className: "text-sm", children: [
          /* @__PURE__ */ jsx79("div", { className: "font-medium text-gray-900 dark:text-white", children: product.name }),
          product.barcode && /* @__PURE__ */ jsxs65("div", { className: "text-gray-500 dark:text-gray-400 text-xs", children: [
            "SKU: ",
            product.barcode
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx79("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx79("div", { className: "text-sm text-gray-900 dark:text-white", children: product.category?.name || "N/A" }) }),
      /* @__PURE__ */ jsx79("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsxs65("div", { className: "text-sm", children: [
        /* @__PURE__ */ jsx79("div", { className: "font-medium text-gray-900 dark:text-white", children: formatMoney(product.rentPrice || 0) }),
        product.salePrice && product.salePrice > 0 && /* @__PURE__ */ jsxs65("div", { className: "text-gray-500 dark:text-gray-400 text-xs", children: [
          t2("price.sale"),
          ": ",
          formatMoney(product.salePrice)
        ] })
      ] }) }),
      /* @__PURE__ */ jsx79("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsxs65("div", { className: "text-sm", children: [
        /* @__PURE__ */ jsxs65("div", { className: "font-medium text-gray-900 dark:text-white", children: [
          product.available,
          " / ",
          product.stock
        ] }),
        product.renting > 0 && /* @__PURE__ */ jsxs65("div", { className: "text-gray-500 dark:text-gray-400 text-xs", children: [
          t2("stock.renting"),
          ": ",
          product.renting
        ] }),
        /* @__PURE__ */ jsx79("div", { className: "mt-1", children: getAvailabilityBadge(product.available, product.stock) })
      ] }) }),
      /* @__PURE__ */ jsx79("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx79("div", { className: "text-sm text-gray-900 dark:text-white", children: product.createdAt ? new Date(product.createdAt).toLocaleDateString("en-US", {
        year: "numeric",
        month: "short",
        day: "numeric"
      }) : "N/A" }) }),
      /* @__PURE__ */ jsx79("td", { className: "px-6 py-4 whitespace-nowrap text-right text-sm font-medium", children: /* @__PURE__ */ jsxs65(DropdownMenu, { children: [
        /* @__PURE__ */ jsx79(DropdownMenuTrigger, { children: /* @__PURE__ */ jsx79(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            className: "h-8 w-8 p-0",
            onClick: () => setOpenDropdownId(product.id),
            children: /* @__PURE__ */ jsx79(MoreVertical, { className: "h-4 w-4" })
          }
        ) }),
        /* @__PURE__ */ jsxs65(
          DropdownMenuContent,
          {
            align: "end",
            open: openDropdownId === product.id,
            onOpenChange: (open) => setOpenDropdownId(open ? product.id : null),
            children: [
              /* @__PURE__ */ jsxs65(DropdownMenuItem, { onClick: () => {
                onProductAction("view", product.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx79(Eye3, { className: "h-4 w-4 mr-2" }),
                t2("actions.viewDetails")
              ] }),
              /* @__PURE__ */ jsxs65(DropdownMenuItem, { onClick: () => {
                onProductAction("edit", product.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx79(Edit2, { className: "h-4 w-4 mr-2" }),
                t2("actions.edit")
              ] }),
              /* @__PURE__ */ jsxs65(DropdownMenuItem, { onClick: () => {
                onProductAction("view-orders", product.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx79(ShoppingCart4, { className: "h-4 w-4 mr-2" }),
                t2("actions.viewOrders")
              ] }),
              /* @__PURE__ */ jsx79(DropdownMenuSeparator, {}),
              /* @__PURE__ */ jsxs65(
                DropdownMenuItem,
                {
                  onClick: () => {
                    onProductAction("delete", product.id);
                    setOpenDropdownId(null);
                  },
                  className: "text-red-600 dark:text-red-400 focus:text-red-700 dark:focus:text-red-300",
                  children: [
                    /* @__PURE__ */ jsx79(Trash24, { className: "h-4 w-4 mr-2" }),
                    t2("actions.delete")
                  ]
                }
              )
            ]
          }
        )
      ] }) })
    ] }, product.id)) })
  ] }) }) });
}

// src/components/features/Products/components/ProductActions.tsx
import { useState as useState31 } from "react";
import { useUserRole } from "@rentalshop/hooks";

// src/components/features/Products/components/ProductAddDialog.tsx
import { useState as useState30 } from "react";

// src/components/features/Products/components/ProductAddForm.tsx
import { useState as useState29 } from "react";
import { Plus as Plus4, Loader2 as Loader25, AlertCircle as AlertCircle5 } from "lucide-react";
import { useToast as useToast6 } from "@rentalshop/ui";
import { Fragment as Fragment14, jsx as jsx80, jsxs as jsxs66 } from "react/jsx-runtime";
var ProductAddForm = ({
  categories,
  outlets,
  merchantId,
  onSave,
  onCancel,
  onBack
}) => {
  const [isSubmitting, setIsSubmitting] = useState29(false);
  const { toastSuccess, toastError } = useToast6();
  const handleSubmit = async (data) => {
    setIsSubmitting(true);
    try {
      const transformedData = {
        name: data.name,
        description: data.description,
        barcode: data.barcode,
        categoryId: data.categoryId,
        rentPrice: data.rentPrice,
        salePrice: data.salePrice,
        deposit: data.deposit,
        totalStock: data.totalStock,
        images: data.images || "",
        outletStock: data.outletStock
      };
      await onSave(transformedData);
    } catch (err) {
      console.error("\u274C ProductAddForm: Error in handleSubmit:", err);
      error("Creation Failed", err instanceof Error ? err.message : "Failed to create product");
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (isSubmitting)
      return;
    onCancel();
  };
  return /* @__PURE__ */ jsxs66("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx80(
      ProductForm,
      {
        categories,
        outlets,
        onSubmit: handleSubmit,
        onCancel: handleCancel,
        loading: isSubmitting,
        mode: "create",
        merchantId,
        hideHeader: true,
        hideSubmitButton: true,
        formId: "product-form",
        submitText: isSubmitting ? /* @__PURE__ */ jsxs66(Fragment14, { children: [
          /* @__PURE__ */ jsx80(Loader25, { className: "h-4 w-4 mr-2 animate-spin" }),
          "Creating..."
        ] }) : /* @__PURE__ */ jsxs66(Fragment14, { children: [
          /* @__PURE__ */ jsx80(Plus4, { className: "h-4 w-4 mr-2" }),
          "Create Product"
        ] })
      }
    ),
    /* @__PURE__ */ jsxs66("div", { className: "space-y-4", children: [
      outlets.length === 0 && /* @__PURE__ */ jsx80("div", { className: "bg-yellow-50 border border-yellow-200 rounded-lg p-4", children: /* @__PURE__ */ jsxs66("div", { className: "flex items-center", children: [
        /* @__PURE__ */ jsx80(AlertCircle5, { className: "h-5 w-5 text-yellow-600 mr-2" }),
        /* @__PURE__ */ jsxs66("div", { children: [
          /* @__PURE__ */ jsx80("h4", { className: "text-sm font-medium text-yellow-800", children: "No Outlets Available" }),
          /* @__PURE__ */ jsx80("p", { className: "text-sm text-yellow-700 mt-1", children: "You need to create at least one outlet before you can add products. Please contact your administrator." })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs66("div", { className: "flex justify-end space-x-2", children: [
        /* @__PURE__ */ jsx80(Button2, { variant: "outline", onClick: handleCancel, disabled: isSubmitting, children: "Cancel" }),
        /* @__PURE__ */ jsx80(
          Button2,
          {
            type: "submit",
            form: "product-form",
            disabled: isSubmitting || outlets.length === 0,
            className: "min-w-[120px]",
            title: outlets.length === 0 ? "No outlets available. Please set up outlets first." : void 0,
            children: isSubmitting ? /* @__PURE__ */ jsxs66(Fragment14, { children: [
              /* @__PURE__ */ jsx80(Loader25, { className: "h-4 w-4 mr-2 animate-spin" }),
              "Creating..."
            ] }) : /* @__PURE__ */ jsxs66(Fragment14, { children: [
              /* @__PURE__ */ jsx80(Plus4, { className: "h-4 w-4 mr-2" }),
              "Create Product"
            ] })
          }
        )
      ] })
    ] })
  ] });
};

// src/components/features/Products/components/ProductAddDialog.tsx
import { jsx as jsx81, jsxs as jsxs67 } from "react/jsx-runtime";
var ProductAddDialog = ({
  open,
  onOpenChange,
  categories,
  outlets,
  merchantId,
  onProductCreated,
  onError
}) => {
  const [isSubmitting, setIsSubmitting] = useState30(false);
  console.log("\u{1F7E2} ProductAddDialog: Rendered with open =", open);
  const handleSave = async (productData) => {
    try {
      setIsSubmitting(true);
      if (onProductCreated) {
        await onProductCreated(productData);
      }
      onOpenChange(false);
    } catch (error2) {
      console.error("\u274C ProductAddDialog: Error occurred:", error2);
      if (onError) {
        onError(error2 instanceof Error ? error2.message : "Failed to create product");
      }
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (isSubmitting)
      return;
    onOpenChange(false);
  };
  return /* @__PURE__ */ jsx81(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs67(DialogContent, { className: "max-w-4xl max-h-[95vh] overflow-y-auto p-0", children: [
    /* @__PURE__ */ jsx81(DialogHeader, { className: "px-6 py-4 border-b border-gray-200", children: /* @__PURE__ */ jsx81(DialogTitle, { className: "text-xl font-semibold text-gray-900", children: "Add New Product" }) }),
    /* @__PURE__ */ jsx81("div", { className: "p-6", children: /* @__PURE__ */ jsx81(
      ProductAddForm,
      {
        categories,
        outlets,
        merchantId,
        onSave: handleSave,
        onCancel: handleCancel
      }
    ) })
  ] }) });
};

// src/components/features/Products/components/ProductActions.tsx
import { Fragment as Fragment15, jsx as jsx82, jsxs as jsxs68 } from "react/jsx-runtime";
function ProductActions({
  onAction,
  categories,
  outlets,
  merchantId,
  onProductCreated,
  onProductUpdated,
  onError
}) {
  const { role: currentUserRole, canManageProducts, canManageCategories } = useUserRole();
  const [isAddDialogOpen, setIsAddDialogOpen] = useState31(false);
  const [editingProduct, setEditingProduct] = useState31(null);
  const handleAddProduct = () => {
    console.log("\u{1F535} ProductActions: handleAddProduct called");
    setEditingProduct(null);
    setIsAddDialogOpen(true);
    console.log("\u{1F535} ProductActions: Dialog state set to true");
  };
  const handleEditProduct = (product) => {
    setEditingProduct(product);
    setIsAddDialogOpen(true);
  };
  const handleDialogClose = () => {
    setIsAddDialogOpen(false);
    setEditingProduct(null);
  };
  const handleSuccess = (product) => {
    if (editingProduct) {
      onProductUpdated?.(product);
    } else {
      onProductCreated?.(product);
    }
    setIsAddDialogOpen(false);
  };
  const handleError = (error2) => {
    onError?.(error2);
  };
  const allActions = [
    {
      id: "add-product",
      label: "Add Product",
      description: "Create a new product",
      icon: "\u2795",
      variant: "default",
      onClick: handleAddProduct,
      roles: canManageProducts ? ["ALL"] : []
      // Use permission check
    },
    {
      id: "import-products",
      label: "Import Products",
      description: "Import from CSV/Excel",
      icon: "\u{1F4E5}",
      variant: "secondary",
      onClick: () => onAction("import-products"),
      roles: canManageProducts ? ["ALL"] : []
      // Use permission check
    },
    {
      id: "export-products",
      label: "Export Products",
      description: "Export to CSV/Excel",
      icon: "\u{1F4E4}",
      variant: "outline",
      onClick: () => onAction("export-products"),
      roles: ["ALL"]
      // All roles can export
    },
    {
      id: "bulk-edit",
      label: "Bulk Edit",
      description: "Edit multiple products",
      icon: "\u270F\uFE0F",
      variant: "outline",
      onClick: () => onAction("bulk-edit"),
      roles: canManageProducts ? ["ALL"] : []
      // Use permission check
    },
    {
      id: "manage-categories",
      label: "Manage Categories",
      description: "Organize product categories",
      icon: "\u{1F3F7}\uFE0F",
      variant: "outline",
      onClick: () => onAction("manage-categories"),
      roles: canManageCategories ? ["ALL"] : []
      // Use permission check
    },
    {
      id: "inventory-check",
      label: "Inventory Check",
      description: "Perform stock count",
      icon: "\u{1F50D}",
      variant: "outline",
      onClick: () => onAction("inventory-check"),
      roles: ["ADMIN", "MERCHANT", "OUTLET_ADMIN", "OUTLET_STAFF"]
      // All roles can do inventory check
    }
  ];
  const actions = allActions.filter(
    (action) => !action.roles || action.roles.length > 0
  ).map(({ roles, ...action }) => action);
  return /* @__PURE__ */ jsxs68(Fragment15, { children: [
    /* @__PURE__ */ jsx82(Card, { children: /* @__PURE__ */ jsx82(CardContent, { className: "p-4", children: /* @__PURE__ */ jsx82("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3", children: actions.map((action) => /* @__PURE__ */ jsx82(
      Button2,
      {
        variant: action.variant,
        className: "h-auto p-3 flex flex-col items-start space-y-2 text-left",
        onClick: action.onClick,
        children: /* @__PURE__ */ jsxs68("div", { className: "flex items-center space-x-2 w-full", children: [
          /* @__PURE__ */ jsx82("span", { className: "text-lg", children: action.icon }),
          /* @__PURE__ */ jsxs68("div", { className: "flex-1", children: [
            /* @__PURE__ */ jsx82("div", { className: "font-medium text-sm", children: action.label }),
            /* @__PURE__ */ jsx82("div", { className: "text-xs opacity-80", children: action.description })
          ] })
        ] })
      },
      action.id
    )) }) }) }),
    /* @__PURE__ */ jsx82(
      ProductAddDialog,
      {
        open: isAddDialogOpen,
        onOpenChange: setIsAddDialogOpen,
        categories,
        outlets,
        merchantId: String(merchantId),
        onProductCreated,
        onError
      }
    )
  ] });
}

// src/components/features/Products/components/ProductsLoading.tsx
import { jsx as jsx83, jsxs as jsxs69 } from "react/jsx-runtime";
function ProductsLoading() {
  return /* @__PURE__ */ jsxs69("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx83(StatsSkeleton, {}),
    /* @__PURE__ */ jsx83(SearchSkeleton, {}),
    /* @__PURE__ */ jsx83(GridSkeleton, { items: 9 }),
    /* @__PURE__ */ jsx83(PaginationSkeleton, {})
  ] });
}
function ProductDetailLoading() {
  return /* @__PURE__ */ jsxs69("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs69("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs69("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx83("div", { className: "h-8 w-48 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx83("div", { className: "h-4 w-32 bg-gray-200 rounded animate-pulse" })
      ] }),
      /* @__PURE__ */ jsxs69("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx83("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx83("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs69("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [
      /* @__PURE__ */ jsx83("div", { className: "lg:col-span-1", children: /* @__PURE__ */ jsx83("div", { className: "aspect-square w-full bg-gray-200 rounded-lg animate-pulse" }) }),
      /* @__PURE__ */ jsxs69("div", { className: "lg:col-span-2 space-y-6", children: [
        /* @__PURE__ */ jsxs69("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsx83("div", { className: "h-6 w-24 bg-gray-200 rounded animate-pulse" }),
          /* @__PURE__ */ jsx83("div", { className: "space-y-2", children: Array.from({ length: 6 }).map((_, i) => /* @__PURE__ */ jsx83("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }, i)) })
        ] }),
        /* @__PURE__ */ jsxs69("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsx83("div", { className: "h-6 w-24 bg-gray-200 rounded animate-pulse" }),
          /* @__PURE__ */ jsx83("div", { className: "grid grid-cols-2 gap-4", children: Array.from({ length: 4 }).map((_, i) => /* @__PURE__ */ jsx83("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }, i)) })
        ] })
      ] })
    ] })
  ] });
}

// src/components/features/Products/components/ProductDetailList.tsx
import { useState as useState32 } from "react";
import { useRouter as useRouter3 } from "next/navigation";
import { useProductTranslations as useProductTranslations5, useCommonTranslations as useCommonTranslations8 } from "@rentalshop/hooks";

// src/lib/index.ts
import { formatCurrency as formatCurrency6 } from "@rentalshop/utils";

// src/components/features/Products/components/ProductDetailList.tsx
import { jsx as jsx84, jsxs as jsxs70 } from "react/jsx-runtime";
var ProductDetailList = ({
  product,
  onEdit,
  onViewOrders,
  showActions = true,
  isMerchantAccount = false,
  className = ""
}) => {
  const router = useRouter3();
  const t2 = useProductTranslations5();
  const tc = useCommonTranslations8();
  const [selectedImage, setSelectedImage] = useState32(
    product.images && product.images.length > 0 ? product.images[0] : null
  );
  const handleImageError = (e2) => {
    e2.currentTarget.style.display = "none";
  };
  const totalAvailable = product.outletStock.reduce((sum, os) => sum + os.available, 0);
  const totalRenting = product.outletStock.reduce((sum, os) => sum + os.renting, 0);
  const totalStock = product.outletStock.reduce((sum, os) => sum + os.stock, 0);
  return /* @__PURE__ */ jsxs70("div", { className: `space-y-6 ${className}`, children: [
    /* @__PURE__ */ jsx84("div", { className: "bg-white border border-gray-200 rounded-lg p-8", children: /* @__PURE__ */ jsxs70("div", { className: "flex items-start justify-between", children: [
      /* @__PURE__ */ jsxs70("div", { className: "flex-1", children: [
        /* @__PURE__ */ jsx84("h1", { className: "text-3xl font-semibold text-gray-900 mb-2", children: product.name }),
        /* @__PURE__ */ jsxs70("div", { className: "flex items-center space-x-4 text-sm text-gray-600 mb-4", children: [
          /* @__PURE__ */ jsxs70("span", { children: [
            "ID: ",
            product.id
          ] }),
          product.barcode && /* @__PURE__ */ jsxs70("span", { children: [
            t2("fields.barcode"),
            ": ",
            product.barcode
          ] }),
          /* @__PURE__ */ jsxs70("span", { children: [
            tc("labels.category"),
            ": ",
            product.category?.name || "Uncategorized"
          ] })
        ] }),
        product.description && /* @__PURE__ */ jsx84("div", { className: "mb-6", children: /* @__PURE__ */ jsx84("p", { className: "text-gray-700", children: product.description }) }),
        /* @__PURE__ */ jsx84("div", { className: "grid grid-cols-1 gap-4 text-sm mb-4", children: /* @__PURE__ */ jsxs70("div", { children: [
          /* @__PURE__ */ jsxs70("span", { className: "text-gray-500", children: [
            tc("labels.merchant"),
            ":"
          ] }),
          /* @__PURE__ */ jsx84("span", { className: "ml-2 text-gray-900", children: product.merchant?.name || "Unknown" })
        ] }) }),
        /* @__PURE__ */ jsxs70("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 text-sm", children: [
          /* @__PURE__ */ jsxs70("div", { children: [
            /* @__PURE__ */ jsxs70("span", { className: "text-gray-500", children: [
              tc("labels.createdAt"),
              ":"
            ] }),
            /* @__PURE__ */ jsx84("span", { className: "ml-2 text-gray-900", children: formatDate(product.createdAt) })
          ] }),
          /* @__PURE__ */ jsxs70("div", { children: [
            /* @__PURE__ */ jsxs70("span", { className: "text-gray-500", children: [
              tc("labels.updatedAt"),
              ":"
            ] }),
            /* @__PURE__ */ jsx84("span", { className: "ml-2 text-gray-900", children: formatDate(product.updatedAt) })
          ] }),
          /* @__PURE__ */ jsxs70("div", { children: [
            /* @__PURE__ */ jsxs70("span", { className: "text-gray-500", children: [
              t2("inventory.totalStock"),
              ":"
            ] }),
            /* @__PURE__ */ jsx84("span", { className: "ml-2 text-gray-900", children: totalStock })
          ] }),
          /* @__PURE__ */ jsxs70("div", { children: [
            /* @__PURE__ */ jsxs70("span", { className: "text-gray-500", children: [
              t2("inventory.availableStock"),
              ":"
            ] }),
            /* @__PURE__ */ jsx84("span", { className: "ml-2 text-gray-900", children: totalAvailable })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs70("div", { className: "ml-8 text-right", children: [
        /* @__PURE__ */ jsx84("div", { className: "text-3xl font-bold text-gray-900 mb-2", children: formatCurrency6(product.rentPrice) }),
        /* @__PURE__ */ jsx84("div", { className: "text-sm text-gray-600 mb-1", children: t2("fields.rentPrice") }),
        product.salePrice && product.salePrice > 0 && /* @__PURE__ */ jsxs70("div", { className: "mt-3", children: [
          /* @__PURE__ */ jsx84("div", { className: "text-base font-medium text-green-600", children: formatCurrency6(product.salePrice) }),
          /* @__PURE__ */ jsx84("div", { className: "text-sm text-gray-600", children: t2("fields.salePrice") })
        ] }),
        /* @__PURE__ */ jsxs70("div", { className: "mt-3", children: [
          /* @__PURE__ */ jsx84("div", { className: "text-lg font-medium text-gray-900", children: formatCurrency6(product.deposit) }),
          /* @__PURE__ */ jsx84("div", { className: "text-sm text-gray-600", children: t2("fields.deposit") })
        ] })
      ] })
    ] }) }),
    isMerchantAccount && /* @__PURE__ */ jsxs70("div", { className: "bg-white border border-gray-200 rounded-lg", children: [
      /* @__PURE__ */ jsxs70("div", { className: "px-6 py-4 border-b border-gray-200", children: [
        /* @__PURE__ */ jsx84("h2", { className: "text-lg font-semibold text-gray-900", children: t2("inventory.outletStockDistribution") }),
        /* @__PURE__ */ jsx84("p", { className: "text-sm text-gray-600 mt-1", children: t2("inventory.stockAllocation") })
      ] }),
      /* @__PURE__ */ jsx84("div", { className: "p-6", children: product.outletStock && product.outletStock.length > 0 ? product.outletStock.map((outletStock, index) => /* @__PURE__ */ jsx84("div", { className: `${index > 0 ? "border-t border-gray-100 pt-6 mt-6" : ""}`, children: /* @__PURE__ */ jsx84("div", { className: "mb-4", children: /* @__PURE__ */ jsxs70("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs70("div", { children: [
          /* @__PURE__ */ jsx84("h3", { className: "text-lg font-medium text-gray-900", children: outletStock.outlet?.name || "Unknown Outlet" }),
          outletStock.outlet?.address ? /* @__PURE__ */ jsx84("p", { className: "text-sm text-gray-600 mt-1", children: outletStock.outlet.address }) : /* @__PURE__ */ jsx84("p", { className: "text-sm text-gray-400 mt-1 italic", children: "No address available" })
        ] }),
        /* @__PURE__ */ jsxs70("div", { className: "flex items-center space-x-10", children: [
          /* @__PURE__ */ jsxs70("div", { className: "text-center min-w-[60px]", children: [
            /* @__PURE__ */ jsx84("div", { className: "text-lg font-bold text-gray-900", children: outletStock.stock }),
            /* @__PURE__ */ jsx84("div", { className: "text-xs text-gray-600", children: tc("labels.total") })
          ] }),
          /* @__PURE__ */ jsxs70("div", { className: "text-center min-w-[60px]", children: [
            /* @__PURE__ */ jsx84("div", { className: "text-lg font-bold text-blue-600", children: outletStock.available }),
            /* @__PURE__ */ jsx84("div", { className: "text-xs text-blue-600", children: t2("fields.available") })
          ] }),
          /* @__PURE__ */ jsxs70("div", { className: "text-center min-w-[60px]", children: [
            /* @__PURE__ */ jsx84("div", { className: "text-lg font-bold text-green-600", children: outletStock.renting }),
            /* @__PURE__ */ jsx84("div", { className: "text-xs text-green-600", children: t2("fields.renting") })
          ] })
        ] })
      ] }) }) }, outletStock.outlet?.id || outletStock.id || index)) : /* @__PURE__ */ jsxs70("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsx84("div", { className: "text-gray-500 mb-2", children: t2("inventory.noOutletStock") }),
        /* @__PURE__ */ jsx84("div", { className: "text-sm text-gray-400", children: t2("inventory.notAssignedToOutlets") })
      ] }) })
    ] }),
    product.images && /* @__PURE__ */ jsxs70("div", { className: "bg-white border border-gray-200 rounded-lg", children: [
      /* @__PURE__ */ jsx84("div", { className: "px-6 py-4 border-b border-gray-200", children: /* @__PURE__ */ jsx84("h2", { className: "text-lg font-semibold text-gray-900", children: t2("fields.images") }) }),
      /* @__PURE__ */ jsxs70("div", { className: "p-6", children: [
        selectedImage && /* @__PURE__ */ jsx84("div", { className: "mb-6", children: /* @__PURE__ */ jsx84("div", { className: "aspect-video bg-gray-100 rounded-lg overflow-hidden", children: /* @__PURE__ */ jsx84(
          "img",
          {
            src: selectedImage,
            alt: product.name,
            className: "w-full h-full object-cover",
            onError: handleImageError
          }
        ) }) }),
        /* @__PURE__ */ jsx84("div", { className: "grid grid-cols-4 md:grid-cols-6 gap-3", children: (() => {
          try {
            const imageArray = typeof product.images === "string" ? JSON.parse(product.images) : product.images;
            if (Array.isArray(imageArray) && imageArray.length > 0) {
              return imageArray.map((image, index) => /* @__PURE__ */ jsx84(
                Button2,
                {
                  variant: "outline",
                  onClick: () => setSelectedImage(image),
                  className: `aspect-square rounded-lg overflow-hidden border-2 transition-colors p-0 h-auto ${selectedImage === image ? "border-blue-500" : "border-gray-200 hover:border-gray-300"}`,
                  children: /* @__PURE__ */ jsx84(
                    "img",
                    {
                      src: image,
                      alt: `${product.name} ${index + 1}`,
                      className: "w-full h-full object-cover",
                      onError: handleImageError
                    }
                  )
                },
                index
              ));
            }
            return null;
          } catch (error2) {
            return null;
          }
        })() })
      ] })
    ] })
  ] });
};

// src/components/features/Products/components/ProductDetailMultiLayout.tsx
import { jsx as jsx85 } from "react/jsx-runtime";
var ProductDetailMultiLayout = ({
  product,
  onEdit,
  onViewOrders,
  showActions = true,
  isMerchantAccount = false,
  className = ""
}) => {
  return /* @__PURE__ */ jsx85(
    ProductDetailList,
    {
      product,
      onEdit,
      onViewOrders,
      showActions,
      isMerchantAccount,
      className
    }
  );
};

// src/components/features/Products/components/ProductEdit.tsx
import { useState as useState33, useEffect as useEffect16 } from "react";
import {
  Button as Button14
} from "@rentalshop/ui";
import { useToast as useToast7 } from "@rentalshop/ui";
import { useProductTranslations as useProductTranslations6, useCommonTranslations as useCommonTranslations9 } from "@rentalshop/hooks";
import { Save as Save2, Loader2 as Loader26 } from "lucide-react";
import { Fragment as Fragment16, jsx as jsx86, jsxs as jsxs71 } from "react/jsx-runtime";
var ProductEdit = ({
  product,
  categories,
  outlets,
  merchantId,
  onSave,
  onCancel,
  onBack
}) => {
  const [isSubmitting, setIsSubmitting] = useState33(false);
  const { toastSuccess, toastError } = useToast7();
  const t2 = useProductTranslations6();
  const tc = useCommonTranslations9();
  useEffect16(() => {
    console.log("\u{1F50D} ProductEdit - product data:", product);
    console.log("\u{1F50D} ProductEdit - product.category:", product.category);
    console.log("\u{1F50D} ProductEdit - product.outletStock:", product.outletStock);
    console.log("\u{1F50D} ProductEdit - outlets:", outlets);
  }, [product, outlets]);
  const initialFormData = {
    name: product.name,
    description: product.description || "",
    barcode: product.barcode || "",
    categoryId: product.category?.id || product.categoryId,
    rentPrice: product.rentPrice,
    salePrice: product.salePrice || 0,
    // Use actual salePrice if available, default to 0
    deposit: product.deposit,
    totalStock: (() => {
      const total = outlets.reduce((sum, outlet) => {
        const existingStock = product.outletStock.find((os) => os.outlet?.id === outlet.id)?.stock || 0;
        return sum + existingStock;
      }, 0);
      console.log("\u{1F50D} ProductEdit - calculated totalStock:", total, "from all outlets:", outlets.length);
      return total;
    })(),
    images: (() => {
      console.log("\u{1F50D} ProductEdit - product.images:", product.images);
      console.log("\u{1F50D} ProductEdit - typeof product.images:", typeof product.images);
      console.log("\u{1F50D} ProductEdit - Array.isArray(product.images):", Array.isArray(product.images));
      return Array.isArray(product.images) ? product.images : [];
    })(),
    isActive: product.isActive,
    outletStock: (() => {
      console.log("\u{1F50D} ProductEdit - product.outletStock:", product.outletStock);
      console.log("\u{1F50D} ProductEdit - available outlets:", outlets);
      const existingStockMap = /* @__PURE__ */ new Map();
      product.outletStock.forEach((os) => {
        const outletId = os.outlet?.id || 0;
        if (outletId > 0) {
          existingStockMap.set(outletId, os.stock || 0);
        }
      });
      const allOutletStock = outlets.map((outlet) => {
        const existingStock = existingStockMap.get(outlet.id) || 0;
        const mapped = {
          outletId: outlet.id,
          stock: existingStock
        };
        console.log(`\u{1F50D} ProductEdit - outlet ${outlet.name} (ID: ${outlet.id}): existing stock = ${existingStock}`);
        return mapped;
      });
      console.log("\u{1F50D} ProductEdit - final mapped outletStock (all outlets):", allOutletStock);
      return allOutletStock;
    })(),
    sku: product.barcode || ""
  };
  const handleSubmit = async (data) => {
    setIsSubmitting(true);
    try {
      await onSave(data);
    } catch (err) {
      error("Error", err instanceof Error ? err.message : "Failed to update product");
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (isSubmitting)
      return;
    onCancel();
  };
  return /* @__PURE__ */ jsxs71("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx86(
      ProductForm,
      {
        initialData: initialFormData,
        categories,
        outlets,
        onSubmit: handleSubmit,
        onCancel: handleCancel,
        loading: isSubmitting,
        mode: "edit",
        merchantId,
        hideHeader: true,
        hideSubmitButton: true,
        formId: "product-form"
      }
    ),
    /* @__PURE__ */ jsxs71("div", { className: "flex justify-end space-x-2", children: [
      /* @__PURE__ */ jsx86(Button14, { variant: "outline", onClick: handleCancel, disabled: isSubmitting, children: tc("buttons.cancel") }),
      /* @__PURE__ */ jsx86(
        Button14,
        {
          type: "submit",
          form: "product-form",
          disabled: isSubmitting,
          className: "min-w-[120px]",
          children: isSubmitting ? /* @__PURE__ */ jsxs71(Fragment16, { children: [
            /* @__PURE__ */ jsx86(Loader26, { className: "h-4 w-4 mr-2 animate-spin" }),
            t2("messages.updating")
          ] }) : /* @__PURE__ */ jsxs71(Fragment16, { children: [
            /* @__PURE__ */ jsx86(Save2, { className: "h-4 w-4 mr-2" }),
            t2("messages.updateProduct")
          ] })
        }
      )
    ] })
  ] });
};

// src/components/features/Products/components/ProductOrdersView.tsx
import { useState as useState36, useEffect as useEffect18 } from "react";
import {
  Package as Package8,
  DollarSign as DollarSign5,
  ShoppingCart as ShoppingCart5,
  TrendingUp as TrendingUp2,
  Download,
  RefreshCw as RefreshCw2,
  BarChart3,
  ArrowLeft as ArrowLeft5
} from "lucide-react";
import { useOrderTranslations as useOrderTranslations9, useCommonTranslations as useCommonTranslations11 } from "@rentalshop/hooks";

// src/components/features/Orders/components/OrderHeader.tsx
import React50 from "react";
import { Card as Card14, CardContent as CardContent13, CardHeader as CardHeader13, CardTitle as CardTitle13 } from "@rentalshop/ui";
import { useOrderTranslations as useOrderTranslations6 } from "@rentalshop/hooks";
import { jsx as jsx87, jsxs as jsxs72 } from "react/jsx-runtime";
var OrderHeader = React50.memo(function OrderHeader2({ totalOrders, stats, showStats = true }) {
  const t2 = useOrderTranslations6();
  console.log("OrderHeader received stats:", stats);
  console.log("OrderHeader received totalOrders:", totalOrders);
  const formatCurrency22 = (amount) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(amount ?? 0);
  };
  const safeStats = {
    totalOrders: stats?.totalOrders ?? 0,
    totalRevenue: stats?.totalRevenue ?? 0,
    totalDeposits: stats?.totalDeposits ?? 0,
    activeRentals: stats?.activeRentals ?? 0,
    overdueRentals: stats?.overdueRentals ?? 0,
    completedOrders: stats?.completedOrders ?? 0,
    cancelledOrders: stats?.cancelledOrders ?? 0,
    averageOrderValue: stats?.averageOrderValue ?? 0
  };
  if (!showStats) {
    return null;
  }
  return /* @__PURE__ */ jsx87("div", { className: "space-y-6", children: /* @__PURE__ */ jsxs72("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [
    /* @__PURE__ */ jsxs72(Card14, { children: [
      /* @__PURE__ */ jsx87(CardHeader13, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx87(CardTitle13, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: t2("stats.totalOrders") }) }),
      /* @__PURE__ */ jsxs72(CardContent13, { children: [
        /* @__PURE__ */ jsx87("div", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: (safeStats.totalOrders || 0).toLocaleString() }),
        /* @__PURE__ */ jsx87("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: t2("stats.allTimeOrders") })
      ] })
    ] }),
    /* @__PURE__ */ jsxs72(Card14, { children: [
      /* @__PURE__ */ jsx87(CardHeader13, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx87(CardTitle13, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: t2("stats.activeRentals") }) }),
      /* @__PURE__ */ jsxs72(CardContent13, { children: [
        /* @__PURE__ */ jsx87("div", { className: "text-2xl font-bold text-blue-600 dark:text-blue-400", children: (safeStats.activeRentals || 0).toLocaleString() }),
        /* @__PURE__ */ jsx87("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: t2("stats.currentlyPickuped") })
      ] })
    ] }),
    /* @__PURE__ */ jsxs72(Card14, { children: [
      /* @__PURE__ */ jsx87(CardHeader13, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx87(CardTitle13, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: t2("stats.totalRevenue") }) }),
      /* @__PURE__ */ jsxs72(CardContent13, { children: [
        /* @__PURE__ */ jsx87("div", { className: "text-2xl font-bold text-green-600 dark:text-green-400", children: formatCurrency22(safeStats.totalRevenue || 0) }),
        /* @__PURE__ */ jsx87("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: t2("stats.lifetimeRevenue") })
      ] })
    ] }),
    /* @__PURE__ */ jsxs72(Card14, { children: [
      /* @__PURE__ */ jsx87(CardHeader13, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx87(CardTitle13, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: t2("stats.completedOrders") }) }),
      /* @__PURE__ */ jsxs72(CardContent13, { children: [
        /* @__PURE__ */ jsx87("div", { className: "text-2xl font-bold text-purple-600 dark:text-purple-400", children: (safeStats.completedOrders || 0).toLocaleString() }),
        /* @__PURE__ */ jsxs72("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: [
          formatCurrency22(safeStats.averageOrderValue || 0),
          " ",
          t2("stats.avgOrder")
        ] })
      ] })
    ] })
  ] }) });
});

// src/components/features/Orders/components/OrderFilters.tsx
import React51, { useState as useState34, useEffect as useEffect17 } from "react";
import { Input as Input9, Button as Button15 } from "@rentalshop/ui";
import { Select as Select6, SelectContent as SelectContent6, SelectItem as SelectItem6, SelectTrigger as SelectTrigger6, SelectValue as SelectValue6 } from "@rentalshop/ui";
import { outletsApi } from "@rentalshop/utils";
import { ORDER_STATUS, ORDER_TYPE } from "@rentalshop/constants";
import { useOrderTranslations as useOrderTranslations7, useCommonTranslations as useCommonTranslations10 } from "@rentalshop/hooks";
import { Fragment as Fragment17, jsx as jsx88, jsxs as jsxs73 } from "react/jsx-runtime";
var OrderFilters = React51.memo(function OrderFilters2({
  filters,
  onFiltersChange,
  onSearchChange,
  onClearFilters
}) {
  const t2 = useOrderTranslations7();
  const tc = useCommonTranslations10();
  const [localSearch, setLocalSearch] = useState34(filters.search || "");
  const [outlets, setOutlets] = useState34([]);
  const [loadingOutlets, setLoadingOutlets] = useState34(false);
  const [outletError, setOutletError] = useState34(null);
  useEffect17(() => {
    const externalSearch = filters.search || "";
    if (externalSearch !== localSearch) {
      console.log("\u{1F504} OrderFilters: Syncing search from external:", externalSearch);
      setLocalSearch(externalSearch);
    }
  }, [filters.search]);
  useEffect17(() => {
    const fetchOutlets = async () => {
      try {
        setLoadingOutlets(true);
        setOutletError(null);
        const result = await outletsApi.getOutlets();
        if (result.success && result.data?.outlets) {
          setOutlets(result.data.outlets);
        } else {
          setOutletError("Failed to load outlets");
          setOutlets([]);
        }
      } catch (error2) {
        console.error("Error fetching outlets:", error2);
        setOutletError("Failed to load outlets");
        setOutlets([]);
      } finally {
        setLoadingOutlets(false);
      }
    };
    fetchOutlets();
  }, []);
  const handleSearchInput = (value) => {
    console.log("\u2328\uFE0F OrderFilters: Search input changed:", value);
    setLocalSearch(value);
    onSearchChange(value);
  };
  const handleFilterChange = (key, value) => {
    onFiltersChange({
      ...filters,
      [key]: value
    });
  };
  return /* @__PURE__ */ jsxs73(Fragment17, { children: [
    /* @__PURE__ */ jsx88("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs73("div", { className: "relative", children: [
      /* @__PURE__ */ jsx88(
        Input9,
        {
          placeholder: t2("search.placeholder"),
          value: localSearch,
          onChange: (e2) => handleSearchInput(e2.target.value),
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx88(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx88(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs73(
      Select6,
      {
        value: filters.status || "all",
        onValueChange: (value) => handleFilterChange("status", value === "all" ? void 0 : value),
        children: [
          /* @__PURE__ */ jsx88(SelectTrigger6, { className: "w-[160px] h-10", children: /* @__PURE__ */ jsx88(SelectValue6, { placeholder: t2("filters.statusLabel") }) }),
          /* @__PURE__ */ jsxs73(SelectContent6, { children: [
            /* @__PURE__ */ jsx88(SelectItem6, { value: "all", children: t2("filters.allStatus") }),
            /* @__PURE__ */ jsx88(SelectItem6, { value: ORDER_STATUS.RESERVED, children: t2("status.RESERVED") }),
            /* @__PURE__ */ jsx88(SelectItem6, { value: ORDER_STATUS.PICKUPED, children: t2("status.PICKUPED") }),
            /* @__PURE__ */ jsx88(SelectItem6, { value: ORDER_STATUS.RETURNED, children: t2("status.RETURNED") }),
            /* @__PURE__ */ jsx88(SelectItem6, { value: ORDER_STATUS.COMPLETED, children: t2("status.COMPLETED") }),
            /* @__PURE__ */ jsx88(SelectItem6, { value: ORDER_STATUS.CANCELLED, children: t2("status.CANCELLED") })
          ] })
        ]
      }
    ),
    /* @__PURE__ */ jsxs73(
      Select6,
      {
        value: filters.orderType || "all",
        onValueChange: (value) => handleFilterChange("orderType", value === "all" ? void 0 : value),
        children: [
          /* @__PURE__ */ jsx88(SelectTrigger6, { className: "w-[130px] h-10", children: /* @__PURE__ */ jsx88(SelectValue6, { placeholder: t2("filters.typeLabel") }) }),
          /* @__PURE__ */ jsxs73(SelectContent6, { children: [
            /* @__PURE__ */ jsx88(SelectItem6, { value: "all", children: t2("filters.allTypes") }),
            /* @__PURE__ */ jsx88(SelectItem6, { value: ORDER_TYPE.RENT, children: t2("orderType.RENT") }),
            /* @__PURE__ */ jsx88(SelectItem6, { value: ORDER_TYPE.SALE, children: t2("orderType.SALE") })
          ] })
        ]
      }
    ),
    /* @__PURE__ */ jsxs73(
      Select6,
      {
        value: filters.outletId ? filters.outletId.toString() : "all",
        onValueChange: (value) => {
          const newValue = value === "all" ? void 0 : parseInt(value);
          handleFilterChange("outletId", newValue);
        },
        children: [
          /* @__PURE__ */ jsx88(SelectTrigger6, { className: "w-[160px] h-10", children: /* @__PURE__ */ jsx88(SelectValue6, { placeholder: t2("filters.outletLabel") }) }),
          /* @__PURE__ */ jsxs73(SelectContent6, { children: [
            /* @__PURE__ */ jsx88(SelectItem6, { value: "all", children: t2("filters.allOutlets") }),
            loadingOutlets ? /* @__PURE__ */ jsx88(SelectItem6, { value: "loading", disabled: true, children: t2("filters.loading") }) : outletError ? /* @__PURE__ */ jsx88(SelectItem6, { value: "error", disabled: true, children: t2("filters.error") }) : outlets.length === 0 ? /* @__PURE__ */ jsx88(SelectItem6, { value: "empty", disabled: true, children: t2("filters.noOutlets") }) : outlets.map((outlet) => /* @__PURE__ */ jsx88(SelectItem6, { value: outlet.id.toString(), children: outlet.name }, outlet.id))
          ] })
        ]
      }
    ),
    onClearFilters && (filters.status || filters.orderType || filters.outletId || localSearch) && /* @__PURE__ */ jsx88(
      Button15,
      {
        variant: "outline",
        size: "sm",
        onClick: onClearFilters,
        className: "h-10",
        children: t2("filters.clear")
      }
    )
  ] });
});

// src/components/features/Orders/components/OrderQuickFilters.tsx
import { Calendar as Calendar3, Clock as Clock2, TrendingUp, AlertCircle as AlertCircle6 } from "lucide-react";
import { Fragment as Fragment18, jsx as jsx89, jsxs as jsxs74 } from "react/jsx-runtime";
function OrderQuickFilters({
  activeFilter,
  totalOrders,
  filteredCount,
  onFilterChange,
  showWarning = false
}) {
  const now = /* @__PURE__ */ new Date();
  const getDateRange = (days) => {
    const end = /* @__PURE__ */ new Date();
    end.setHours(23, 59, 59, 999);
    const start = /* @__PURE__ */ new Date();
    start.setDate(start.getDate() - days);
    start.setHours(0, 0, 0, 0);
    return { start, end };
  };
  const getTodayRange = () => {
    const start = /* @__PURE__ */ new Date();
    start.setHours(0, 0, 0, 0);
    const end = /* @__PURE__ */ new Date();
    end.setHours(23, 59, 59, 999);
    return { start, end };
  };
  const getThisWeekRange = () => {
    const start = /* @__PURE__ */ new Date();
    const day = start.getDay();
    const diff = start.getDate() - day + (day === 0 ? -6 : 1);
    start.setDate(diff);
    start.setHours(0, 0, 0, 0);
    const end = /* @__PURE__ */ new Date();
    end.setHours(23, 59, 59, 999);
    return { start, end };
  };
  const getThisMonthRange = () => {
    const start = new Date(now.getFullYear(), now.getMonth(), 1);
    start.setHours(0, 0, 0, 0);
    const end = /* @__PURE__ */ new Date();
    end.setHours(23, 59, 59, 999);
    return { start, end };
  };
  const getThisQuarterRange = () => {
    const quarter = Math.floor(now.getMonth() / 3);
    const start = new Date(now.getFullYear(), quarter * 3, 1);
    start.setHours(0, 0, 0, 0);
    const end = /* @__PURE__ */ new Date();
    end.setHours(23, 59, 59, 999);
    return { start, end };
  };
  const todayRange = getTodayRange();
  const weekRange = getThisWeekRange();
  const monthRange = getDateRange(30);
  const quarterRange = getThisQuarterRange();
  const quickFilters = [
    {
      id: "today",
      label: "Today",
      icon: /* @__PURE__ */ jsx89(Clock2, { className: "w-3.5 h-3.5" }),
      startDate: todayRange.start,
      endDate: todayRange.end,
      description: "Orders created today"
    },
    {
      id: "week",
      label: "This Week",
      icon: /* @__PURE__ */ jsx89(Calendar3, { className: "w-3.5 h-3.5" }),
      startDate: weekRange.start,
      endDate: weekRange.end,
      description: "Orders from this week"
    },
    {
      id: "month",
      label: "Last 30 Days",
      icon: /* @__PURE__ */ jsx89(TrendingUp, { className: "w-3.5 h-3.5" }),
      startDate: monthRange.start,
      endDate: monthRange.end,
      description: "Most commonly used filter"
    },
    {
      id: "quarter",
      label: "This Quarter",
      icon: /* @__PURE__ */ jsx89(Calendar3, { className: "w-3.5 h-3.5" }),
      startDate: quarterRange.start,
      endDate: quarterRange.end,
      description: "Orders from current quarter"
    }
  ];
  return /* @__PURE__ */ jsxs74("div", { className: "space-y-3", children: [
    /* @__PURE__ */ jsxs74("div", { className: "flex items-center gap-2 flex-wrap", children: [
      /* @__PURE__ */ jsx89("span", { className: "text-sm font-medium text-text-secondary", children: "Quick filters:" }),
      quickFilters.map((filter) => /* @__PURE__ */ jsxs74(
        Button2,
        {
          variant: activeFilter === filter.id ? "default" : "outline",
          size: "sm",
          onClick: () => onFilterChange(filter),
          className: "gap-1.5",
          children: [
            filter.icon,
            filter.label
          ]
        },
        filter.id
      )),
      activeFilter && /* @__PURE__ */ jsx89(
        Button2,
        {
          variant: "ghost",
          size: "sm",
          onClick: () => onFilterChange(null),
          className: "text-text-tertiary hover:text-text-primary",
          children: "Clear"
        }
      )
    ] }),
    filteredCount !== void 0 && totalOrders > 0 && /* @__PURE__ */ jsxs74("div", { className: `flex items-center gap-2 px-4 py-2.5 rounded-lg ${showWarning ? "bg-warning-bg border border-warning-border" : "bg-bg-secondary border border-border"}`, children: [
      showWarning && /* @__PURE__ */ jsx89(AlertCircle6, { className: "w-4 h-4 text-warning-text flex-shrink-0" }),
      /* @__PURE__ */ jsx89("div", { className: "flex-1 flex items-center gap-2 text-sm", children: activeFilter ? /* @__PURE__ */ jsxs74(Fragment18, { children: [
        /* @__PURE__ */ jsx89("span", { className: "text-text-secondary", children: "Showing" }),
        /* @__PURE__ */ jsx89(Badge, { variant: "outline", className: "font-semibold", children: filteredCount.toLocaleString() }),
        /* @__PURE__ */ jsx89("span", { className: "text-text-secondary", children: "of" }),
        /* @__PURE__ */ jsx89(Badge, { variant: "outline", children: totalOrders.toLocaleString() }),
        /* @__PURE__ */ jsx89("span", { className: "text-text-secondary", children: "total orders" })
      ] }) : /* @__PURE__ */ jsx89(Fragment18, { children: showWarning ? /* @__PURE__ */ jsxs74(Fragment18, { children: [
        /* @__PURE__ */ jsxs74("span", { className: "text-warning-text font-medium", children: [
          "\u26A0\uFE0F Viewing all ",
          totalOrders.toLocaleString(),
          " orders"
        ] }),
        /* @__PURE__ */ jsx89("span", { className: "text-text-tertiary", children: "- Use quick filters for better performance" })
      ] }) : /* @__PURE__ */ jsxs74(Fragment18, { children: [
        /* @__PURE__ */ jsx89("span", { className: "text-text-secondary", children: "Total orders:" }),
        /* @__PURE__ */ jsx89(Badge, { variant: "outline", className: "font-semibold", children: totalOrders.toLocaleString() })
      ] }) }) }),
      activeFilter && /* @__PURE__ */ jsx89("span", { className: "text-xs text-text-tertiary", children: quickFilters.find((f) => f.id === activeFilter)?.description })
    ] })
  ] });
}

// src/components/features/Orders/components/OrderDateRangeFilter.tsx
import { useState as useState35 } from "react";
import { Calendar as Calendar4, AlertCircle as AlertCircle7 } from "lucide-react";
import { Fragment as Fragment19, jsx as jsx90, jsxs as jsxs75 } from "react/jsx-runtime";
function OrderDateRangeFilter({
  activeRange = "week",
  totalOrders,
  filteredCount,
  onRangeChange,
  showWarning = false
}) {
  const [showCustomDialog, setShowCustomDialog] = useState35(false);
  const [customStart, setCustomStart] = useState35("");
  const [customEnd, setCustomEnd] = useState35("");
  const getLastNDays = (days) => {
    const end = /* @__PURE__ */ new Date();
    end.setHours(23, 59, 59, 999);
    const start = /* @__PURE__ */ new Date();
    start.setDate(start.getDate() - days);
    start.setHours(0, 0, 0, 0);
    return { start, end };
  };
  const getAllTime = () => {
    const start = new Date(2020, 0, 1);
    start.setHours(0, 0, 0, 0);
    const end = /* @__PURE__ */ new Date();
    end.setHours(23, 59, 59, 999);
    return { start, end };
  };
  const dateRangeOptions = [
    {
      id: "month",
      label: "Last 30 days",
      getRange: () => getLastNDays(30),
      description: "Default - Most relevant orders"
    },
    {
      id: "90days",
      label: "Last 90 days",
      getRange: () => getLastNDays(90),
      description: "Quarterly view"
    },
    {
      id: "year",
      label: "Last 12 months",
      getRange: () => getLastNDays(365),
      description: "Annual view"
    },
    {
      id: "all",
      label: "All time",
      getRange: getAllTime,
      description: "May be slow with large datasets"
    },
    {
      id: "custom",
      label: "Custom range...",
      getRange: () => ({ start: /* @__PURE__ */ new Date(), end: /* @__PURE__ */ new Date() }),
      description: "Select custom date range"
    }
  ];
  const handleRangeChange = (rangeId) => {
    if (rangeId === "custom") {
      setShowCustomDialog(true);
      return;
    }
    const option = dateRangeOptions.find((opt) => opt.id === rangeId);
    if (option) {
      const { start, end } = option.getRange();
      onRangeChange(rangeId, start, end);
    }
  };
  const handleCustomApply = () => {
    if (!customStart || !customEnd)
      return;
    const start = new Date(customStart);
    start.setHours(0, 0, 0, 0);
    const end = new Date(customEnd);
    end.setHours(23, 59, 59, 999);
    onRangeChange("custom", start, end);
    setShowCustomDialog(false);
    setCustomStart("");
    setCustomEnd("");
  };
  const currentOption = dateRangeOptions.find((opt) => opt.id === activeRange);
  return /* @__PURE__ */ jsxs75(Fragment19, { children: [
    /* @__PURE__ */ jsxs75(Select, { value: activeRange, onValueChange: handleRangeChange, children: [
      /* @__PURE__ */ jsx90(SelectTrigger, { className: "w-[180px]", children: /* @__PURE__ */ jsx90(SelectValue, { placeholder: "Date range", children: /* @__PURE__ */ jsxs75("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx90(Calendar4, { className: "w-3.5 h-3.5" }),
        currentOption?.label || "Date range"
      ] }) }) }),
      /* @__PURE__ */ jsxs75(SelectContent, { children: [
        /* @__PURE__ */ jsx90(SelectItem, { value: "month", children: /* @__PURE__ */ jsxs75("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx90("span", { children: "Last 30 days" }),
          /* @__PURE__ */ jsx90(Badge, { variant: "outline", className: "text-[10px] px-1 py-0", children: "Default" })
        ] }) }),
        /* @__PURE__ */ jsx90(SelectItem, { value: "90days", children: "Last 90 days" }),
        /* @__PURE__ */ jsx90(SelectItem, { value: "year", children: "Last 12 months" }),
        /* @__PURE__ */ jsx90("div", { className: "h-px bg-border my-1" }),
        /* @__PURE__ */ jsx90(SelectItem, { value: "all", children: /* @__PURE__ */ jsxs75("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx90("span", { children: "All time" }),
          totalOrders > 1e4 && /* @__PURE__ */ jsx90(AlertCircle7, { className: "w-3 h-3 text-warning-text" })
        ] }) }),
        /* @__PURE__ */ jsx90(SelectItem, { value: "custom", children: /* @__PURE__ */ jsxs75("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx90(Calendar4, { className: "w-3 h-3" }),
          /* @__PURE__ */ jsx90("span", { children: "Custom range..." })
        ] }) })
      ] })
    ] }),
    showWarning && activeRange === "all" && /* @__PURE__ */ jsxs75("div", { className: "flex items-center gap-2 px-3 py-2 rounded-lg bg-warning-bg border border-warning-border", children: [
      /* @__PURE__ */ jsx90(AlertCircle7, { className: "w-4 h-4 text-warning-text flex-shrink-0" }),
      /* @__PURE__ */ jsxs75("span", { className: "text-sm text-warning-text font-medium", children: [
        "Viewing all ",
        totalOrders.toLocaleString(),
        " orders may be slow"
      ] })
    ] }),
    /* @__PURE__ */ jsx90(Dialog, { open: showCustomDialog, onOpenChange: setShowCustomDialog, children: /* @__PURE__ */ jsxs75(DialogContent, { className: "sm:max-w-md", children: [
      /* @__PURE__ */ jsx90(DialogHeader, { children: /* @__PURE__ */ jsxs75(DialogTitle, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx90(Calendar4, { className: "w-5 h-5" }),
        "Custom Date Range"
      ] }) }),
      /* @__PURE__ */ jsxs75("div", { className: "space-y-4 py-4", children: [
        /* @__PURE__ */ jsxs75("div", { children: [
          /* @__PURE__ */ jsx90(Label2, { htmlFor: "start-date", children: "Start Date" }),
          /* @__PURE__ */ jsx90(
            Input,
            {
              id: "start-date",
              type: "date",
              value: customStart,
              onChange: (e2) => setCustomStart(e2.target.value),
              max: customEnd || (/* @__PURE__ */ new Date()).toISOString().split("T")[0]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs75("div", { children: [
          /* @__PURE__ */ jsx90(Label2, { htmlFor: "end-date", children: "End Date" }),
          /* @__PURE__ */ jsx90(
            Input,
            {
              id: "end-date",
              type: "date",
              value: customEnd,
              onChange: (e2) => setCustomEnd(e2.target.value),
              min: customStart,
              max: (/* @__PURE__ */ new Date()).toISOString().split("T")[0]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs75("div", { className: "text-xs text-text-tertiary bg-bg-secondary p-3 rounded-lg", children: [
          "\u{1F4A1} ",
          /* @__PURE__ */ jsx90("strong", { children: "Tip:" }),
          " For large date ranges, consider using the export feature instead of viewing all data in the table."
        ] })
      ] }),
      /* @__PURE__ */ jsxs75(DialogFooter, { children: [
        /* @__PURE__ */ jsx90(
          Button2,
          {
            variant: "outline",
            onClick: () => {
              setShowCustomDialog(false);
              setCustomStart("");
              setCustomEnd("");
            },
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx90(
          Button2,
          {
            variant: "default",
            onClick: handleCustomApply,
            disabled: !customStart || !customEnd,
            children: "Apply Range"
          }
        )
      ] })
    ] }) })
  ] });
}

// src/components/features/Orders/components/OrderTable.tsx
import React53 from "react";
import { useFormatCurrency as useFormatCurrency5 } from "@rentalshop/ui";
import { useOrderTranslations as useOrderTranslations8 } from "@rentalshop/hooks";
import { useFormattedFullDate } from "@rentalshop/utils";
import { ORDER_STATUS_COLORS as ORDER_STATUS_COLORS2, ORDER_TYPE_COLORS } from "@rentalshop/constants";
import { Eye as Eye4, Edit as Edit3 } from "lucide-react";
import { jsx as jsx91, jsxs as jsxs76 } from "react/jsx-runtime";
var OrderTable = React53.memo(function OrderTable2({
  orders,
  onOrderAction,
  sortBy = "createdAt",
  sortOrder = "desc",
  onSort
}) {
  const formatMoney = useFormatCurrency5();
  const t2 = useOrderTranslations8();
  React53.useEffect(() => {
    if (orders.length > 0) {
      console.log("\u{1F4CB} OrderTable - Order statuses:", orders.map((o2) => ({
        orderNumber: o2.orderNumber,
        status: o2.status,
        canEdit: o2.status === "RESERVED"
      })));
    }
  }, [orders]);
  if (orders.length === 0) {
    return /* @__PURE__ */ jsx91(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx91(CardContent, { className: "text-center py-12", children: /* @__PURE__ */ jsxs76("div", { className: "text-gray-500 dark:text-gray-400", children: [
      /* @__PURE__ */ jsx91("div", { className: "text-4xl mb-4", children: "\u{1F4CB}" }),
      /* @__PURE__ */ jsx91("h3", { className: "text-lg font-medium mb-2", children: "No orders found" }),
      /* @__PURE__ */ jsx91("p", { className: "text-sm", children: "Try adjusting your filters or create some orders to get started." })
    ] }) }) });
  }
  const getStatusBadge = (status) => {
    return /* @__PURE__ */ jsx91(Badge, { variant: "outline", className: ORDER_STATUS_COLORS2[status], children: t2(`status.${status}`) });
  };
  const getOrderTypeBadge = (type) => {
    return /* @__PURE__ */ jsx91(Badge, { variant: "outline", className: ORDER_TYPE_COLORS[type], children: t2(`orderType.${type}`) });
  };
  const formatDate11 = (dateString) => {
    if (!dateString)
      return "N/A";
    return useFormattedFullDate(dateString);
  };
  const getOrderIcon = () => {
    return /* @__PURE__ */ jsx91("div", { className: "w-16 h-16 bg-blue-100 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 flex items-center justify-center shadow-sm", children: /* @__PURE__ */ jsx91("svg", { className: "w-8 h-8 text-blue-600 dark:text-blue-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx91("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" }) }) });
  };
  const handleSort = (column) => {
    if (onSort) {
      onSort(column);
    }
  };
  return /* @__PURE__ */ jsx91(Card, { className: "shadow-sm border border-gray-200 dark:border-gray-700 h-full flex flex-col", children: /* @__PURE__ */ jsx91("div", { className: "overflow-auto flex-1", children: /* @__PURE__ */ jsxs76("table", { className: "w-full min-w-[1000px]", children: [
    /* @__PURE__ */ jsx91("thead", { className: "bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10", children: /* @__PURE__ */ jsxs76("tr", { children: [
      /* @__PURE__ */ jsx91(
        "th",
        {
          onClick: () => handleSort("orderNumber"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs76("div", { className: "flex items-center gap-1", children: [
            t2("orderNumber"),
            sortBy === "orderNumber" && /* @__PURE__ */ jsx91("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx91("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: t2("orderType.label") }),
      /* @__PURE__ */ jsx91(
        "th",
        {
          onClick: () => handleSort("status"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs76("div", { className: "flex items-center gap-1", children: [
            t2("status.label"),
            sortBy === "status" && /* @__PURE__ */ jsx91("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx91("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: t2("customer.label") }),
      /* @__PURE__ */ jsx91(
        "th",
        {
          onClick: () => handleSort("totalAmount"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs76("div", { className: "flex items-center gap-1", children: [
            t2("amount.total"),
            sortBy === "totalAmount" && /* @__PURE__ */ jsx91("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx91(
        "th",
        {
          onClick: () => handleSort("pickupPlanAt"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs76("div", { className: "flex items-center gap-1", children: [
            t2("dates.pickupDate"),
            sortBy === "pickupPlanAt" && /* @__PURE__ */ jsx91("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx91(
        "th",
        {
          onClick: () => handleSort("createdAt"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs76("div", { className: "flex items-center gap-1", children: [
            t2("dates.createdDate"),
            sortBy === "createdAt" && /* @__PURE__ */ jsx91("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx91("th", { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: t2("actions.label") })
    ] }) }),
    /* @__PURE__ */ jsx91("tbody", { className: "bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700", children: orders.map((order) => /* @__PURE__ */ jsxs76("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-800", children: [
      /* @__PURE__ */ jsx91("td", { className: "px-6 py-3 whitespace-nowrap", children: /* @__PURE__ */ jsx91("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: order.orderNumber }) }),
      /* @__PURE__ */ jsx91("td", { className: "px-6 py-3 whitespace-nowrap", children: getOrderTypeBadge(order.orderType) }),
      /* @__PURE__ */ jsx91("td", { className: "px-6 py-3 whitespace-nowrap", children: getStatusBadge(order.status) }),
      /* @__PURE__ */ jsx91("td", { className: "px-6 py-3", children: /* @__PURE__ */ jsxs76("div", { className: "text-sm", children: [
        /* @__PURE__ */ jsx91("div", { className: "font-medium text-gray-900 dark:text-white", children: order.customerName }),
        /* @__PURE__ */ jsx91("div", { className: "text-gray-500 dark:text-gray-400 text-xs", children: order.customerPhone })
      ] }) }),
      /* @__PURE__ */ jsx91("td", { className: "px-6 py-3 whitespace-nowrap", children: /* @__PURE__ */ jsxs76("div", { className: "text-sm", children: [
        /* @__PURE__ */ jsx91("div", { className: "font-medium text-gray-900 dark:text-white", children: formatMoney(order.totalAmount) }),
        order.depositAmount > 0 && /* @__PURE__ */ jsxs76("div", { className: "text-gray-500 dark:text-gray-400 text-xs", children: [
          t2("amount.deposit"),
          ": ",
          formatMoney(order.depositAmount)
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs76("td", { className: "px-6 py-3 whitespace-nowrap", children: [
        /* @__PURE__ */ jsx91("div", { className: "text-sm text-gray-900 dark:text-white", children: formatDate11(order.pickupPlanAt) }),
        order.returnPlanAt && /* @__PURE__ */ jsxs76("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: [
          t2("dates.returnLabel"),
          ": ",
          formatDate11(order.returnPlanAt)
        ] })
      ] }),
      /* @__PURE__ */ jsx91("td", { className: "px-6 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: formatDate11(order.createdAt) }),
      /* @__PURE__ */ jsx91("td", { className: "px-6 py-3 whitespace-nowrap text-right text-sm", children: /* @__PURE__ */ jsxs76("div", { className: "flex items-center justify-end gap-2", children: [
        /* @__PURE__ */ jsxs76(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onOrderAction("view", order.orderNumber),
            className: "h-8 px-3",
            children: [
              /* @__PURE__ */ jsx91(Eye4, { className: "h-4 w-4 mr-1" }),
              t2("actions.view")
            ]
          }
        ),
        /* @__PURE__ */ jsxs76(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onOrderAction("edit", order.orderNumber),
            disabled: order.status !== "RESERVED",
            className: "h-8 px-3",
            title: order.status !== "RESERVED" ? t2("messages.cannotEditOrder") : void 0,
            children: [
              /* @__PURE__ */ jsx91(Edit3, { className: "h-4 w-4 mr-1" }),
              t2("actions.edit")
            ]
          }
        )
      ] }) })
    ] }, order.id)) })
  ] }) }) });
});

// src/components/features/Orders/components/OrderActions.tsx
import { Button as Button16 } from "@rentalshop/ui";
import { Card as Card15, CardContent as CardContent14 } from "@rentalshop/ui";
import { jsx as jsx92, jsxs as jsxs77 } from "react/jsx-runtime";
function OrderActions({ onAction }) {
  const actions = [
    {
      id: "create-order",
      label: "Create Order",
      description: "Start a new rental or sale order",
      icon: "\u{1F4CB}",
      variant: "default"
    },
    {
      id: "import-orders",
      label: "Import Orders",
      description: "Import from CSV/Excel",
      icon: "\u{1F4E5}",
      variant: "secondary"
    },
    {
      id: "export-orders",
      label: "Export Orders",
      description: "Export to CSV/Excel",
      icon: "\u{1F4E4}",
      variant: "outline"
    },
    {
      id: "bulk-actions",
      label: "Bulk Actions",
      description: "Manage multiple orders",
      icon: "\u26A1",
      variant: "outline"
    },
    {
      id: "order-templates",
      label: "Order Templates",
      description: "Use predefined order templates",
      icon: "\u{1F4DD}",
      variant: "outline"
    },
    {
      id: "schedule-pickups",
      label: "Schedule Pickups",
      description: "Manage pickup schedules",
      icon: "\u{1F69A}",
      variant: "outline"
    }
  ];
  return /* @__PURE__ */ jsx92(Card15, { children: /* @__PURE__ */ jsx92(CardContent14, { className: "p-4", children: /* @__PURE__ */ jsx92("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3", children: actions.map((action) => /* @__PURE__ */ jsx92(
    Button16,
    {
      variant: action.variant,
      className: "h-auto p-3 flex flex-col items-start space-y-2 text-left",
      onClick: () => onAction(action.id),
      children: /* @__PURE__ */ jsxs77("div", { className: "flex items-center space-x-2 w-full", children: [
        /* @__PURE__ */ jsx92("span", { className: "text-lg", children: action.icon }),
        /* @__PURE__ */ jsxs77("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsx92("div", { className: "font-medium text-sm", children: action.label }),
          /* @__PURE__ */ jsx92("div", { className: "text-xs opacity-80", children: action.description })
        ] })
      ] })
    },
    action.id
  )) }) }) });
}

// src/components/features/Orders/components/OrderStats.tsx
import { Card as Card16, CardContent as CardContent15, CardHeader as CardHeader14, CardTitle as CardTitle14 } from "@rentalshop/ui";
import { Badge as Badge5 } from "@rentalshop/ui";
import { jsx as jsx93, jsxs as jsxs78 } from "react/jsx-runtime";
function OrderStats({ stats }) {
  const formatCurrency22 = (amount) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(amount);
  };
  const getStatusDistribution = () => {
    const total = stats.totalOrders;
    if (total === 0)
      return [];
    const reservedOrders = Math.max(0, total - stats.activeRentals - stats.completedOrders - stats.cancelledOrders);
    return [
      { label: "Reserved", count: reservedOrders, percentage: reservedOrders / total * 100, color: "bg-red-500" },
      { label: "Pickuped", count: stats.activeRentals, percentage: stats.activeRentals / total * 100, color: "bg-orange-500" },
      { label: "Completed", count: stats.completedOrders, percentage: stats.completedOrders / total * 100, color: "bg-green-500" },
      { label: "Cancelled", count: stats.cancelledOrders, percentage: stats.cancelledOrders / total * 100, color: "bg-red-700" }
    ];
  };
  return /* @__PURE__ */ jsxs78("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs78(Card16, { children: [
      /* @__PURE__ */ jsxs78(CardHeader14, { children: [
        /* @__PURE__ */ jsx93(CardTitle14, { children: "Order Status Distribution" }),
        /* @__PURE__ */ jsx93("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Breakdown of orders by current status" })
      ] }),
      /* @__PURE__ */ jsx93(CardContent15, { children: /* @__PURE__ */ jsx93("div", { className: "space-y-4", children: getStatusDistribution().map((status) => /* @__PURE__ */ jsxs78("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsx93("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: status.label }),
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxs78("span", { className: "text-sm text-gray-500 dark:text-gray-400", children: [
              status.count,
              " orders"
            ] }),
            /* @__PURE__ */ jsxs78("span", { className: "text-sm font-medium", children: [
              status.percentage.toFixed(1),
              "%"
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsx93("div", { className: "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2", children: /* @__PURE__ */ jsx93(
          "div",
          {
            className: `h-2 rounded-full ${status.color}`,
            style: { width: `${status.percentage}%` }
          }
        ) })
      ] }, status.label)) }) })
    ] }),
    /* @__PURE__ */ jsxs78("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs78(Card16, { children: [
        /* @__PURE__ */ jsx93(CardHeader14, { children: /* @__PURE__ */ jsx93(CardTitle14, { children: "Revenue Metrics" }) }),
        /* @__PURE__ */ jsx93(CardContent15, { children: /* @__PURE__ */ jsxs78("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx93("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Total Revenue" }),
            /* @__PURE__ */ jsx93("span", { className: "font-medium text-lg text-green-600 dark:text-green-400", children: formatCurrency22(stats.totalRevenue) })
          ] }),
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx93("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Total Deposits" }),
            /* @__PURE__ */ jsx93("span", { className: "font-medium text-blue-600 dark:text-blue-400", children: formatCurrency22(stats.totalDeposits) })
          ] }),
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx93("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Average Order Value" }),
            /* @__PURE__ */ jsx93("span", { className: "font-medium", children: formatCurrency22(stats.averageOrderValue) })
          ] }),
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx93("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Overdue Rentals" }),
            /* @__PURE__ */ jsx93("div", { className: "flex items-center space-x-2", children: /* @__PURE__ */ jsxs78(Badge5, { variant: "outline", className: "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200", children: [
              stats.overdueRentals,
              " orders"
            ] }) })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs78(Card16, { children: [
        /* @__PURE__ */ jsx93(CardHeader14, { children: /* @__PURE__ */ jsx93(CardTitle14, { children: "Order Volume" }) }),
        /* @__PURE__ */ jsx93(CardContent15, { children: /* @__PURE__ */ jsxs78("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx93("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Total Orders" }),
            /* @__PURE__ */ jsx93("span", { className: "font-medium text-lg", children: stats.totalOrders.toLocaleString() })
          ] }),
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx93("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Active Rentals" }),
            /* @__PURE__ */ jsx93("div", { className: "flex items-center space-x-2", children: /* @__PURE__ */ jsxs78(Badge5, { variant: "outline", className: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200", children: [
              stats.activeRentals,
              " orders"
            ] }) })
          ] }),
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx93("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Completed Orders" }),
            /* @__PURE__ */ jsx93("span", { className: "font-medium text-green-600 dark:text-green-400", children: stats.completedOrders })
          ] }),
          /* @__PURE__ */ jsxs78("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx93("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Cancelled Orders" }),
            /* @__PURE__ */ jsx93("span", { className: "font-medium text-red-600 dark:text-red-400", children: stats.cancelledOrders })
          ] })
        ] }) })
      ] })
    ] }),
    /* @__PURE__ */ jsxs78(Card16, { children: [
      /* @__PURE__ */ jsx93(CardHeader14, { children: /* @__PURE__ */ jsx93(CardTitle14, { children: "Performance Insights" }) }),
      /* @__PURE__ */ jsx93(CardContent15, { children: /* @__PURE__ */ jsxs78("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsxs78("div", { className: "text-center p-4 rounded-lg bg-gray-50 dark:bg-gray-800", children: [
          /* @__PURE__ */ jsxs78("div", { className: "text-2xl font-bold text-orange-600 dark:text-orange-400", children: [
            stats.totalOrders > 0 ? (stats.activeRentals / stats.totalOrders * 100).toFixed(1) : 0,
            "%"
          ] }),
          /* @__PURE__ */ jsx93("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Active Rental Rate" })
        ] }),
        /* @__PURE__ */ jsxs78("div", { className: "text-center p-4 rounded-lg bg-gray-50 dark:bg-gray-800", children: [
          /* @__PURE__ */ jsxs78("div", { className: "text-2xl font-bold text-green-600 dark:text-green-400", children: [
            stats.totalOrders > 0 ? (stats.completedOrders / stats.totalOrders * 100).toFixed(1) : 0,
            "%"
          ] }),
          /* @__PURE__ */ jsx93("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Completion Rate" })
        ] }),
        /* @__PURE__ */ jsxs78("div", { className: "text-center p-4 rounded-lg bg-gray-50 dark:bg-gray-800", children: [
          /* @__PURE__ */ jsxs78("div", { className: "text-2xl font-bold text-purple-600 dark:text-purple-400", children: [
            stats.totalOrders > 0 ? (stats.cancelledOrders / stats.totalOrders * 100).toFixed(1) : 0,
            "%"
          ] }),
          /* @__PURE__ */ jsx93("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Cancellation Rate" })
        ] })
      ] }) })
    ] })
  ] });
}

// src/components/features/Orders/components/OrderPagination.tsx
import { Pagination as Pagination2 } from "@rentalshop/ui";
import { jsx as jsx94 } from "react/jsx-runtime";
function OrderPagination({
  currentPage,
  totalPages,
  total,
  onPageChange
}) {
  return /* @__PURE__ */ jsx94(
    Pagination2,
    {
      currentPage,
      totalPages,
      total,
      limit: 20,
      onPageChange,
      itemName: "orders"
    }
  );
}

// src/components/features/Orders/components/OrdersLoading.tsx
import {
  TableSkeleton as TableSkeleton2,
  SearchSkeleton as SearchSkeleton2,
  PaginationSkeleton as PaginationSkeleton2,
  StatsSkeleton as StatsSkeleton2
} from "@rentalshop/ui";
import { jsx as jsx95, jsxs as jsxs79 } from "react/jsx-runtime";
function OrdersLoading() {
  return /* @__PURE__ */ jsxs79("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx95(StatsSkeleton2, {}),
    /* @__PURE__ */ jsx95(SearchSkeleton2, {}),
    /* @__PURE__ */ jsx95(TableSkeleton2, { rows: 8, columns: 6 }),
    /* @__PURE__ */ jsx95(PaginationSkeleton2, {})
  ] });
}
function OrderDetailLoading() {
  return /* @__PURE__ */ jsxs79("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs79("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs79("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx95("div", { className: "h-8 w-48 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx95("div", { className: "h-4 w-32 bg-gray-200 rounded animate-pulse" })
      ] }),
      /* @__PURE__ */ jsxs79("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx95("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx95("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs79("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs79("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx95("div", { className: "h-6 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx95("div", { className: "space-y-2", children: Array.from({ length: 4 }).map((_, i) => /* @__PURE__ */ jsx95("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }, i)) })
      ] }),
      /* @__PURE__ */ jsxs79("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx95("div", { className: "h-6 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx95("div", { className: "space-y-2", children: Array.from({ length: 4 }).map((_, i) => /* @__PURE__ */ jsx95("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }, i)) })
      ] })
    ] }),
    /* @__PURE__ */ jsxs79("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx95("div", { className: "h-6 w-32 bg-gray-200 rounded animate-pulse" }),
      /* @__PURE__ */ jsx95(TableSkeleton2, { rows: 3, columns: 4 })
    ] })
  ] });
}

// src/components/features/Products/components/ProductOrdersView.tsx
import { Pagination as Pagination3 } from "@rentalshop/ui";
import { ordersApi } from "@rentalshop/utils";
import { Fragment as Fragment20, jsx as jsx96, jsxs as jsxs80 } from "react/jsx-runtime";
var ProductOrdersView = ({
  productId,
  productName,
  onClose,
  className = "",
  showHeader = true,
  inventoryData
}) => {
  const t2 = useOrderTranslations9();
  const tc = useCommonTranslations11();
  const [orders, setOrders] = useState36([]);
  const [loading, setLoading] = useState36(false);
  const [error2, setError] = useState36(null);
  const [currentPage, setCurrentPage] = useState36(1);
  const [totalPages, setTotalPages] = useState36(1);
  const [filters, setFilters] = useState36({
    search: "",
    status: void 0,
    orderType: void 0,
    outletId: void 0,
    customerId: void 0,
    startDate: void 0,
    endDate: void 0,
    limit: 20,
    offset: 0,
    sortBy: "createdAt",
    sortOrder: "desc"
  });
  useEffect18(() => {
    const fetchProductOrders = async () => {
      try {
        setLoading(true);
        const response = await ordersApi.getOrdersByProduct(parseInt(productId));
        console.log("\u{1F50D} ProductOrdersView: API Response:", response);
        if (response.success && response.data) {
          const ordersData = Array.isArray(response.data) ? response.data : response.data.orders || [];
          const totalPages2 = Array.isArray(response.data) ? 1 : response.data.totalPages || 1;
          console.log("\u{1F50D} ProductOrdersView: Setting orders:", ordersData);
          console.log("\u{1F50D} ProductOrdersView: Total pages:", totalPages2);
          setOrders(ordersData);
          setTotalPages(totalPages2);
        } else {
          console.log("\u{1F50D} ProductOrdersView: No data or unsuccessful response");
          setOrders([]);
          setTotalPages(1);
        }
      } catch (err) {
        console.error("\u274C ProductOrdersView: Error fetching product orders:", err);
        setError("Failed to fetch product orders");
        setOrders([]);
      } finally {
        setLoading(false);
      }
    };
    fetchProductOrders();
  }, [productId]);
  const overview = {
    totalOrders: Array.isArray(orders) ? orders.length : 0,
    totalQuantity: Array.isArray(orders) ? orders.reduce(
      (sum, order) => sum + (order.orderItems?.reduce((itemSum, item) => itemSum + (item.quantity || 0), 0) || 0),
      0
    ) : 0,
    totalSales: Array.isArray(orders) ? orders.reduce((sum, order) => sum + (order.totalAmount || 0), 0) : 0,
    totalDeposits: Array.isArray(orders) ? orders.reduce((sum, order) => sum + (order.depositAmount || 0), 0) : 0,
    activeRentals: Array.isArray(orders) ? orders.filter((order) => order.status === "PICKUPED").length : 0,
    completedOrders: Array.isArray(orders) ? orders.filter((order) => order.status === "COMPLETED").length : 0,
    pendingOrders: Array.isArray(orders) ? orders.filter((order) => order.status === "RESERVED").length : 0
  };
  console.log("\u{1F50D} ProductOrdersView: Transforming orders:", orders);
  const orderData = {
    orders: Array.isArray(orders) ? orders.map((order) => ({
      id: typeof order.id === "string" ? parseInt(order.id) : order.id,
      // Handle both string and number IDs
      orderNumber: order.orderNumber,
      orderType: order.orderType,
      status: order.status,
      customerName: order.customer ? `${order.customer.firstName} ${order.customer.lastName}` : "Guest",
      customerPhone: order.customer?.phone || "No phone",
      outletName: order.outlet.name,
      merchantName: order.outlet.merchant?.name || "N/A",
      totalAmount: order.totalAmount,
      depositAmount: order.depositAmount,
      createdAt: new Date(order.createdAt),
      pickupPlanAt: order.pickupPlanAt ? new Date(order.pickupPlanAt) : void 0,
      returnPlanAt: order.returnPlanAt ? new Date(order.returnPlanAt) : void 0,
      pickedUpAt: order.pickedUpAt ? new Date(order.pickedUpAt) : void 0,
      returnedAt: order.returnedAt ? new Date(order.returnedAt) : void 0,
      isReadyToDeliver: order.isReadyToDeliver || false
    })) : [],
    total: Array.isArray(orders) ? orders.length : 0,
    currentPage,
    totalPages,
    limit: filters.limit || 20,
    stats: {
      totalOrders: overview.totalOrders,
      totalRevenue: overview.totalSales,
      totalDeposits: overview.totalDeposits,
      activeRentals: overview.activeRentals,
      overdueRentals: 0,
      // Not calculated in this context
      completedOrders: overview.completedOrders,
      cancelledOrders: 0,
      // Not calculated in this context
      averageOrderValue: overview.totalOrders > 0 ? overview.totalSales / overview.totalOrders : 0
    }
  };
  console.log("\u{1F50D} ProductOrdersView: Final orderData:", orderData);
  const handleFiltersChange = (newFilters) => {
    setFilters(newFilters);
    setCurrentPage(1);
  };
  const handleSearchChange = (searchValue) => {
    setFilters((prev) => ({ ...prev, search: searchValue }));
    setCurrentPage(1);
  };
  const handleClearFilters = () => {
    setFilters({
      search: "",
      status: void 0,
      orderType: void 0,
      outletId: void 0,
      customerId: void 0,
      startDate: void 0,
      endDate: void 0,
      limit: 20,
      offset: 0,
      sortBy: "createdAt",
      sortOrder: "desc"
    });
    setCurrentPage(1);
  };
  const handleOrderAction = (action, orderId) => {
    console.log("Order action:", action, orderId);
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleSort = (column) => {
    const newSortOrder = filters.sortBy === column && filters.sortOrder === "asc" ? "desc" : "asc";
    setFilters((prev) => ({
      ...prev,
      sortBy: column,
      sortOrder: newSortOrder
    }));
  };
  const handleRefresh = () => {
    setCurrentPage(1);
    setError(null);
    const fetchProductOrders = async () => {
      try {
        setLoading(true);
        const response = await ordersApi.getOrdersByProduct(parseInt(productId));
        if (response.success && response.data) {
          setOrders(response.data);
          setTotalPages(1);
        } else {
          setOrders([]);
          setTotalPages(1);
        }
      } catch (err) {
        setError("Failed to fetch product orders");
        console.error("Error refreshing product orders:", err);
      } finally {
        setLoading(false);
      }
    };
    fetchProductOrders();
  };
  const handleExport = () => {
    console.log("Export orders for product:", productId);
  };
  if (loading) {
    return /* @__PURE__ */ jsx96("div", { className: `space-y-6 ${className}`, children: /* @__PURE__ */ jsx96(ProductsLoading, {}) });
  }
  if (error2) {
    return /* @__PURE__ */ jsx96("div", { className: `space-y-6 ${className}`, children: /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsxs80(CardContent, { className: "p-6 text-center", children: [
      /* @__PURE__ */ jsx96("div", { className: "text-red-500 mb-4", children: /* @__PURE__ */ jsx96(BarChart3, { className: "h-12 w-12 mx-auto" }) }),
      /* @__PURE__ */ jsx96("h3", { className: "text-lg font-semibold mb-2", children: t2("messages.errorLoadingOrders") }),
      /* @__PURE__ */ jsx96("p", { className: "text-gray-600 mb-4", children: error2 }),
      /* @__PURE__ */ jsxs80(Button2, { onClick: () => window.location.reload(), children: [
        /* @__PURE__ */ jsx96(RefreshCw2, { className: "h-4 w-4 mr-2" }),
        tc("buttons.tryAgain")
      ] })
    ] }) }) });
  }
  return /* @__PURE__ */ jsxs80("div", { className: `space-y-6 ${className}`, children: [
    showHeader && /* @__PURE__ */ jsxs80(Fragment20, { children: [
      /* @__PURE__ */ jsxs80("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs80("div", { children: [
          /* @__PURE__ */ jsx96("h1", { className: "text-2xl font-bold text-gray-900", children: t2("productOrders.title") }),
          /* @__PURE__ */ jsx96("p", { className: "text-gray-600", children: t2("productOrders.description") })
        ] }),
        /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
          /* @__PURE__ */ jsxs80(Button2, { variant: "outline", onClick: handleExport, children: [
            /* @__PURE__ */ jsx96(Download, { className: "h-4 w-4 mr-2" }),
            tc("buttons.export")
          ] }),
          /* @__PURE__ */ jsxs80(Button2, { onClick: handleRefresh, children: [
            /* @__PURE__ */ jsx96(RefreshCw2, { className: "h-4 w-4 mr-2" }),
            tc("buttons.refresh")
          ] }),
          onClose && /* @__PURE__ */ jsxs80(Button2, { variant: "outline", onClick: onClose, children: [
            /* @__PURE__ */ jsx96(ArrowLeft5, { className: "h-4 w-4 mr-2" }),
            t2("productOrders.backToProducts")
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs80("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [
        /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
          /* @__PURE__ */ jsx96("div", { className: "p-2 bg-blue-100 rounded-lg", children: /* @__PURE__ */ jsx96(ShoppingCart5, { className: "h-5 w-5 text-blue-600" }) }),
          /* @__PURE__ */ jsxs80("div", { children: [
            /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600", children: t2("stats.totalOrders") }),
            /* @__PURE__ */ jsx96("p", { className: "text-2xl font-bold text-gray-900", children: overview.totalOrders })
          ] })
        ] }) }) }),
        /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
          /* @__PURE__ */ jsx96("div", { className: "p-2 bg-green-100 rounded-lg", children: /* @__PURE__ */ jsx96(Package8, { className: "h-5 w-5 text-green-600" }) }),
          /* @__PURE__ */ jsxs80("div", { children: [
            /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600", children: t2("productOrders.totalQuantity") }),
            /* @__PURE__ */ jsx96("p", { className: "text-2xl font-bold text-gray-900", children: overview.totalQuantity })
          ] })
        ] }) }) }),
        /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
          /* @__PURE__ */ jsx96("div", { className: "p-2 bg-purple-100 rounded-lg", children: /* @__PURE__ */ jsx96(DollarSign5, { className: "h-5 w-5 text-purple-600" }) }),
          /* @__PURE__ */ jsxs80("div", { children: [
            /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600", children: t2("productOrders.totalSales") }),
            /* @__PURE__ */ jsx96("p", { className: "text-2xl font-bold text-gray-900", children: formatCurrency6(overview.totalSales) })
          ] })
        ] }) }) }),
        /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
          /* @__PURE__ */ jsx96("div", { className: "p-2 bg-orange-100 rounded-lg", children: /* @__PURE__ */ jsx96(TrendingUp2, { className: "h-5 w-5 text-orange-600" }) }),
          /* @__PURE__ */ jsxs80("div", { children: [
            /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600", children: t2("stats.activeRentals") }),
            /* @__PURE__ */ jsx96("p", { className: "text-2xl font-bold text-gray-900", children: overview.activeRentals })
          ] })
        ] }) }) })
      ] }),
      /* @__PURE__ */ jsxs80("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "text-center", children: [
          /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600 mb-1", children: t2("stats.totalDeposits") }),
          /* @__PURE__ */ jsx96("p", { className: "text-xl font-bold text-green-600", children: formatCurrency6(overview.totalDeposits) })
        ] }) }) }),
        /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "text-center", children: [
          /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600 mb-1", children: t2("stats.completedOrders") }),
          /* @__PURE__ */ jsx96("p", { className: "text-xl font-bold text-blue-600", children: overview.completedOrders })
        ] }) }) }),
        /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "text-center", children: [
          /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600 mb-1", children: t2("productOrders.reservedOrders") }),
          /* @__PURE__ */ jsx96("p", { className: "text-xl font-bold text-red-600", children: overview.pendingOrders })
        ] }) }) })
      ] })
    ] }),
    inventoryData && /* @__PURE__ */ jsxs80("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [
      /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx96("div", { className: "p-2 bg-gray-100 rounded-lg", children: /* @__PURE__ */ jsx96(Package8, { className: "h-5 w-5 text-gray-600" }) }),
        /* @__PURE__ */ jsxs80("div", { children: [
          /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600", children: t2("productOrders.totalStock") }),
          /* @__PURE__ */ jsx96("p", { className: "text-2xl font-bold text-gray-900", children: inventoryData.totalStock }),
          /* @__PURE__ */ jsx96("p", { className: "text-xs text-gray-500", children: t2("productOrders.availableInventory") })
        ] })
      ] }) }) }),
      /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx96("div", { className: "p-2 bg-blue-100 rounded-lg", children: /* @__PURE__ */ jsx96(Package8, { className: "h-5 w-5 text-blue-600" }) }),
        /* @__PURE__ */ jsxs80("div", { children: [
          /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600", children: t2("productOrders.currentlyRented") }),
          /* @__PURE__ */ jsx96("p", { className: "text-2xl font-bold text-blue-600", children: inventoryData.totalRenting }),
          /* @__PURE__ */ jsx96("p", { className: "text-xs text-gray-500", children: t2("productOrders.outOnRental") })
        ] })
      ] }) }) }),
      /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx96("div", { className: "p-2 bg-green-100 rounded-lg", children: /* @__PURE__ */ jsx96(Package8, { className: "h-5 w-5 text-green-600" }) }),
        /* @__PURE__ */ jsxs80("div", { children: [
          /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600", children: t2("productOrders.availableNow") }),
          /* @__PURE__ */ jsx96("p", { className: "text-2xl font-bold text-green-600", children: inventoryData.totalAvailable }),
          /* @__PURE__ */ jsx96("p", { className: "text-xs text-gray-500", children: t2("productOrders.readyToRent") })
        ] })
      ] }) }) }),
      /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs80("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx96("div", { className: "p-2 bg-orange-100 rounded-lg", children: /* @__PURE__ */ jsx96(DollarSign5, { className: "h-5 w-5 text-orange-600" }) }),
        /* @__PURE__ */ jsxs80("div", { children: [
          /* @__PURE__ */ jsx96("p", { className: "text-sm text-gray-600", children: t2("stats.totalRevenue") }),
          /* @__PURE__ */ jsx96("p", { className: "text-2xl font-bold text-orange-600", children: formatCurrency6(overview.totalSales) }),
          /* @__PURE__ */ jsx96("p", { className: "text-xs text-gray-500", children: t2("productOrders.allTimeEarnings") })
        ] })
      ] }) }) })
    ] }),
    /* @__PURE__ */ jsxs80("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-4", children: /* @__PURE__ */ jsx96("div", { className: "flex flex-wrap items-center gap-3", children: /* @__PURE__ */ jsx96(
        OrderFilters,
        {
          filters,
          onFiltersChange: handleFiltersChange,
          onSearchChange: handleSearchChange,
          onClearFilters: handleClearFilters
        }
      ) }) }) }),
      /* @__PURE__ */ jsx96(Card, { children: /* @__PURE__ */ jsx96(CardContent, { className: "p-0", children: /* @__PURE__ */ jsx96("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx96(
        OrderTable,
        {
          orders: orderData.orders,
          onOrderAction: handleOrderAction,
          sortBy: filters.sortBy,
          sortOrder: filters.sortOrder,
          onSort: handleSort
        }
      ) }) }) }),
      orderData.total > orderData.limit && /* @__PURE__ */ jsx96(
        Pagination3,
        {
          currentPage: orderData.currentPage,
          totalPages: orderData.totalPages,
          total: orderData.total,
          limit: orderData.limit,
          onPageChange: handlePageChange,
          itemName: "orders"
        }
      )
    ] })
  ] });
};

// src/components/features/Products/components/ProductOrdersDialog.tsx
import { useState as useState37, useEffect as useEffect19 } from "react";
import {
  Dialog as Dialog4,
  DialogContent as DialogContent4,
  DialogHeader as DialogHeader4,
  DialogTitle as DialogTitle4,
  DialogDescription as DialogDescription2,
  Button as Button17,
  Card as Card17,
  CardContent as CardContent16,
  CardHeader as CardHeader16,
  CardTitle as CardTitle16,
  Badge as Badge7,
  EmptyState
} from "@rentalshop/ui";
import {
  ShoppingCart as ShoppingCart6,
  Calendar as Calendar6,
  User as User6,
  DollarSign as DollarSign6,
  Package as Package9,
  X as X7
} from "lucide-react";
import { ordersApi as ordersApi2 } from "@rentalshop/utils";
import { jsx as jsx97, jsxs as jsxs81 } from "react/jsx-runtime";
function ProductOrdersDialog({ open, onOpenChange, product }) {
  const [orders, setOrders] = useState37([]);
  const [loading, setLoading] = useState37(false);
  const [error2, setError] = useState37(null);
  useEffect19(() => {
    if (open && product) {
      fetchProductOrders();
    }
  }, [open, product]);
  const fetchProductOrders = async () => {
    if (!product)
      return;
    try {
      setLoading(true);
      setError(null);
      const response = await ordersApi2.searchOrders({
        productId: product.id,
        limit: 50
      });
      if (response.success && response.data) {
        setOrders(response.data.orders || []);
      } else {
        setError("Failed to fetch orders");
      }
    } catch (error3) {
      console.error("Error fetching product orders:", error3);
      setError("Failed to fetch orders");
    } finally {
      setLoading(false);
    }
  };
  const formatCurrency22 = (amount) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 2
    }).format(amount);
  };
  const formatDate11 = (date2) => {
    const dateObj = typeof date2 === "string" ? new Date(date2) : date2;
    return dateObj.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  };
  const getStatusBadge = (status) => {
    const statusConfig = {
      "RESERVED": { color: "bg-blue-100 text-blue-800", text: "Reserved" },
      "PICKUPED": { color: "bg-green-100 text-green-800", text: "Picked Up" },
      "RETURNED": { color: "bg-gray-100 text-gray-800", text: "Returned" },
      "COMPLETED": { color: "bg-green-100 text-green-800", text: "Completed" },
      "CANCELLED": { color: "bg-red-100 text-red-800", text: "Cancelled" }
    };
    const config = statusConfig[status] || statusConfig["RESERVED"];
    return /* @__PURE__ */ jsx97(Badge7, { className: config.color, children: config.text });
  };
  const getOrderTypeBadge = (orderType) => {
    const typeConfig = {
      "RENT": { color: "bg-purple-100 text-purple-800", text: "Rental" },
      "SALE": { color: "bg-green-100 text-green-800", text: "Sale" }
    };
    const config = typeConfig[orderType] || typeConfig["RENT"];
    return /* @__PURE__ */ jsx97(Badge7, { className: config.color, children: config.text });
  };
  if (!product)
    return null;
  return /* @__PURE__ */ jsx97(Dialog4, { open, onOpenChange, children: /* @__PURE__ */ jsxs81(DialogContent4, { className: "max-w-4xl max-h-[80vh] overflow-hidden flex flex-col", children: [
    /* @__PURE__ */ jsx97(DialogHeader4, { children: /* @__PURE__ */ jsxs81("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs81("div", { children: [
        /* @__PURE__ */ jsxs81(DialogTitle4, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx97(ShoppingCart6, { className: "w-5 h-5" }),
          "Orders for ",
          product.name
        ] }),
        /* @__PURE__ */ jsx97(DialogDescription2, { children: "View all orders containing this product" })
      ] }),
      /* @__PURE__ */ jsx97(
        Button17,
        {
          variant: "ghost",
          size: "sm",
          onClick: () => onOpenChange(false),
          className: "h-8 w-8 p-0",
          children: /* @__PURE__ */ jsx97(X7, { className: "w-4 h-4" })
        }
      )
    ] }) }),
    /* @__PURE__ */ jsx97("div", { className: "flex-1 overflow-y-auto", children: loading ? /* @__PURE__ */ jsxs81("div", { className: "flex items-center justify-center py-12", children: [
      /* @__PURE__ */ jsx97("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-action-primary" }),
      /* @__PURE__ */ jsx97("span", { className: "ml-2 text-text-secondary", children: "Loading orders..." })
    ] }) : error2 ? /* @__PURE__ */ jsxs81("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsx97("div", { className: "text-red-500 mb-4", children: "\u274C" }),
      /* @__PURE__ */ jsx97("h3", { className: "text-lg font-medium text-text-primary mb-2", children: "Error Loading Orders" }),
      /* @__PURE__ */ jsx97("p", { className: "text-text-secondary mb-4", children: error2 }),
      /* @__PURE__ */ jsx97(Button17, { onClick: fetchProductOrders, variant: "outline", children: "Try Again" })
    ] }) : orders.length === 0 ? /* @__PURE__ */ jsx97(
      EmptyState,
      {
        icon: ShoppingCart6,
        title: "No Orders Found",
        description: "This product hasn't been ordered yet."
      }
    ) : /* @__PURE__ */ jsx97("div", { className: "space-y-4", children: orders.map((order) => /* @__PURE__ */ jsxs81(Card17, { className: "border border-border", children: [
      /* @__PURE__ */ jsx97(CardHeader16, { className: "pb-3", children: /* @__PURE__ */ jsxs81("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs81(CardTitle16, { className: "text-lg", children: [
          "Order #",
          order.orderNumber
        ] }),
        /* @__PURE__ */ jsxs81("div", { className: "flex items-center gap-2", children: [
          getOrderTypeBadge(order.orderType),
          getStatusBadge(order.status)
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs81(CardContent16, { children: [
        /* @__PURE__ */ jsxs81("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
          /* @__PURE__ */ jsxs81("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsx97(User6, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsxs81("div", { children: [
              /* @__PURE__ */ jsxs81("p", { className: "text-sm font-medium text-text-primary", children: [
                order.customer?.firstName,
                " ",
                order.customer?.lastName
              ] }),
              /* @__PURE__ */ jsx97("p", { className: "text-xs text-text-secondary", children: order.customer?.phone })
            ] })
          ] }),
          /* @__PURE__ */ jsxs81("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsx97(Calendar6, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsxs81("div", { children: [
              /* @__PURE__ */ jsx97("p", { className: "text-sm font-medium text-text-primary", children: formatDate11(order.createdAt) }),
              /* @__PURE__ */ jsx97("p", { className: "text-xs text-text-secondary", children: "Created" })
            ] })
          ] }),
          /* @__PURE__ */ jsxs81("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsx97(DollarSign6, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsxs81("div", { children: [
              /* @__PURE__ */ jsx97("p", { className: "text-sm font-medium text-text-primary", children: formatCurrency22(order.totalAmount) }),
              /* @__PURE__ */ jsx97("p", { className: "text-xs text-text-secondary", children: "Total Amount" })
            ] })
          ] })
        ] }),
        order.orderItems && order.orderItems.length > 0 && /* @__PURE__ */ jsxs81("div", { className: "mt-4 pt-4 border-t border-border", children: [
          /* @__PURE__ */ jsx97("h4", { className: "text-sm font-medium text-text-primary mb-2", children: "Order Items:" }),
          /* @__PURE__ */ jsx97("div", { className: "space-y-2", children: order.orderItems.map((item, index) => /* @__PURE__ */ jsxs81("div", { className: "flex items-center justify-between text-sm", children: [
            /* @__PURE__ */ jsxs81("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx97(Package9, { className: "w-3 h-3 text-text-tertiary" }),
              /* @__PURE__ */ jsx97("span", { className: "text-text-primary", children: item.product?.name || "Unknown Product" }),
              /* @__PURE__ */ jsxs81("span", { className: "text-text-secondary", children: [
                "(Qty: ",
                item.quantity,
                ")"
              ] })
            ] }),
            /* @__PURE__ */ jsx97("span", { className: "text-text-primary font-medium", children: formatCurrency22(item.totalPrice) })
          ] }, index)) })
        ] }),
        order.orderType === "RENT" && /* @__PURE__ */ jsx97("div", { className: "mt-4 pt-4 border-t border-border", children: /* @__PURE__ */ jsxs81("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 text-sm", children: [
          order.pickupPlanAt && /* @__PURE__ */ jsxs81("div", { children: [
            /* @__PURE__ */ jsx97("p", { className: "text-text-secondary", children: "Pickup Date:" }),
            /* @__PURE__ */ jsx97("p", { className: "text-text-primary font-medium", children: formatDate11(order.pickupPlanAt) })
          ] }),
          order.returnPlanAt && /* @__PURE__ */ jsxs81("div", { children: [
            /* @__PURE__ */ jsx97("p", { className: "text-text-secondary", children: "Return Date:" }),
            /* @__PURE__ */ jsx97("p", { className: "text-text-primary font-medium", children: formatDate11(order.returnPlanAt) })
          ] })
        ] }) })
      ] })
    ] }, order.id)) }) }),
    /* @__PURE__ */ jsx97("div", { className: "flex justify-end pt-4 border-t border-border", children: /* @__PURE__ */ jsx97(Button17, { onClick: () => onOpenChange(false), variant: "outline", children: "Close" }) })
  ] }) });
}

// src/components/features/Products/Products.tsx
import {
  Pagination as Pagination4,
  EmptyState as EmptyState2,
  Button as Button18,
  Card as Card18,
  CardContent as CardContent17
} from "@rentalshop/ui";
import { useUserRole as useUserRole2 } from "@rentalshop/hooks";
import {
  Package as PackageIcon,
  Download as Download2
} from "lucide-react";
import { jsx as jsx98, jsxs as jsxs82 } from "react/jsx-runtime";
function Products({
  // Data props
  data,
  filters = {},
  onFiltersChange = () => {
  },
  onSearchChange = () => {
  },
  onClearFilters = () => {
  },
  onProductAction = () => {
  },
  onPageChange = () => {
  },
  onSort = () => {
  },
  // Display props
  title = "Products",
  subtitle = "Manage your product catalog",
  showExportButton = false,
  showAddButton = false,
  addButtonText = "Add Product",
  exportButtonText = "Export Products",
  showStats = false,
  currentUser,
  onExport,
  className = ""
}) {
  const { canManageProducts } = useUserRole2(currentUser);
  const handleExport = () => {
    if (onExport) {
      onExport();
    } else {
      console.log("Export functionality not implemented");
    }
  };
  const handleAddProduct = () => {
    console.log("Add product functionality should be implemented in page");
  };
  const products = data?.products || [];
  const totalProducts = data?.total || 0;
  const currentPage = data?.page || 1;
  const totalPages = data?.totalPages || 1;
  const limit = data?.limit || 25;
  const memoizedOnFiltersChange = React56.useCallback(onFiltersChange, [onFiltersChange]);
  const memoizedOnSearchChange = React56.useCallback(onSearchChange, [onSearchChange]);
  const memoizedOnClearFilters = React56.useCallback(onClearFilters, [onClearFilters]);
  const memoizedOnProductAction = React56.useCallback(onProductAction, [onProductAction]);
  const memoizedOnPageChange = React56.useCallback(onPageChange, [onPageChange]);
  const memoizedOnSort = React56.useCallback(onSort, [onSort]);
  return /* @__PURE__ */ jsxs82("div", { className: `flex flex-col h-full ${className}`, children: [
    /* @__PURE__ */ jsxs82("div", { className: "flex-shrink-0 space-y-4", children: [
      /* @__PURE__ */ jsxs82(
        ProductPageHeader,
        {
          title,
          subtitle,
          children: [
            showAddButton && canManageProducts && /* @__PURE__ */ jsxs82(
              Button18,
              {
                onClick: handleAddProduct,
                className: "flex items-center space-x-2",
                children: [
                  /* @__PURE__ */ jsx98(PackageIcon, { className: "w-4 h-4" }),
                  /* @__PURE__ */ jsx98("span", { children: addButtonText })
                ]
              }
            ),
            showExportButton && /* @__PURE__ */ jsxs82(
              Button18,
              {
                variant: "outline",
                onClick: handleExport,
                className: "flex items-center space-x-2",
                children: [
                  /* @__PURE__ */ jsx98(Download2, { className: "w-4 h-4" }),
                  /* @__PURE__ */ jsx98("span", { children: exportButtonText })
                ]
              }
            )
          ]
        }
      ),
      /* @__PURE__ */ jsx98(Card18, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx98(CardContent17, { className: "pt-4 pb-4", children: /* @__PURE__ */ jsx98("div", { className: "flex flex-wrap items-center gap-3", children: /* @__PURE__ */ jsx98(
        ProductFilters,
        {
          filters,
          onFiltersChange: memoizedOnFiltersChange,
          onSearchChange: memoizedOnSearchChange,
          onClearFilters: memoizedOnClearFilters
        }
      ) }) }) })
    ] }),
    /* @__PURE__ */ jsx98("div", { className: "flex-1 min-h-0 mt-4", children: products.length > 0 ? /* @__PURE__ */ jsx98(
      ProductTable,
      {
        products,
        onProductAction: memoizedOnProductAction,
        sortBy: filters.sortBy || "name",
        sortOrder: filters.sortOrder || "asc",
        onSort: memoizedOnSort
      }
    ) : /* @__PURE__ */ jsx98(
      EmptyState2,
      {
        icon: PackageIcon,
        title: "No products found",
        description: filters.search || filters.categoryId || filters.outletId ? "Try adjusting your search or filters" : "Get started by adding your first product",
        actionLabel: canManageProducts ? addButtonText : void 0,
        onAction: canManageProducts ? handleAddProduct : void 0
      }
    ) }),
    products.length > 0 && totalProducts > limit && /* @__PURE__ */ jsx98("div", { className: "flex-shrink-0 py-4", children: /* @__PURE__ */ jsx98(
      Pagination4,
      {
        currentPage,
        totalPages,
        total: totalProducts,
        limit,
        onPageChange: memoizedOnPageChange,
        itemName: "products"
      }
    ) })
  ] });
}
var Products_default = Products;

// src/components/features/Customers/Customers.tsx
import React64 from "react";
import {
  Pagination as Pagination5,
  EmptyState as EmptyState3,
  Button as Button25,
  Card as Card27,
  CardContent as CardContent26
} from "@rentalshop/ui";

// src/components/features/Customers/components/CustomerTable.tsx
import React57 from "react";
import { Button as Button19 } from "@rentalshop/ui";
import { Card as Card19, CardContent as CardContent18 } from "@rentalshop/ui";
import {
  DropdownMenu as DropdownMenu2,
  DropdownMenuContent as DropdownMenuContent2,
  DropdownMenuItem as DropdownMenuItem2,
  DropdownMenuTrigger as DropdownMenuTrigger2,
  DropdownMenuSeparator as DropdownMenuSeparator2
} from "@rentalshop/ui";
import { Eye as Eye6, Edit as Edit4, Trash2 as Trash25, ShoppingBag, MoreVertical as MoreVertical2 } from "lucide-react";
import { useCustomerTranslations as useCustomerTranslations2 } from "@rentalshop/hooks";
import { jsx as jsx99, jsxs as jsxs83 } from "react/jsx-runtime";
function CustomerTable({
  customers,
  onCustomerAction,
  sortBy = "createdAt",
  sortOrder = "desc",
  onSort
}) {
  const t2 = useCustomerTranslations2();
  const [openDropdownId, setOpenDropdownId] = React57.useState(null);
  if (customers.length === 0) {
    return /* @__PURE__ */ jsx99(Card19, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx99(CardContent18, { className: "text-center py-12", children: /* @__PURE__ */ jsxs83("div", { className: "text-gray-500 dark:text-gray-400", children: [
      /* @__PURE__ */ jsx99("div", { className: "text-4xl mb-4", children: "\u{1F465}" }),
      /* @__PURE__ */ jsx99("h3", { className: "text-lg font-medium mb-2", children: t2("messages.noCustomers") }),
      /* @__PURE__ */ jsx99("p", { className: "text-sm", children: t2("messages.noCustomersDescription") })
    ] }) }) });
  }
  const formatDate11 = (dateString) => {
    if (!dateString)
      return t2("messages.na");
    const date2 = typeof dateString === "string" ? new Date(dateString) : dateString;
    return date2.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const handleSort = (column) => {
    if (onSort) {
      onSort(column);
    }
  };
  return /* @__PURE__ */ jsx99(Card19, { className: "shadow-sm border border-gray-200 dark:border-gray-700 h-full flex flex-col", children: /* @__PURE__ */ jsx99("div", { className: "overflow-auto flex-1", children: /* @__PURE__ */ jsxs83("table", { className: "w-full min-w-[900px]", children: [
    /* @__PURE__ */ jsx99("thead", { className: "bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10", children: /* @__PURE__ */ jsxs83("tr", { children: [
      /* @__PURE__ */ jsx99(
        "th",
        {
          onClick: () => handleSort("id"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs83("div", { className: "flex items-center gap-1", children: [
            t2("fields.id"),
            sortBy === "id" && /* @__PURE__ */ jsx99("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx99(
        "th",
        {
          onClick: () => handleSort("name"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs83("div", { className: "flex items-center gap-1", children: [
            t2("fields.name"),
            sortBy === "name" && /* @__PURE__ */ jsx99("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx99("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: t2("fields.contact") }),
      /* @__PURE__ */ jsx99("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: t2("fields.location") }),
      /* @__PURE__ */ jsx99(
        "th",
        {
          onClick: () => handleSort("createdAt"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs83("div", { className: "flex items-center gap-1", children: [
            t2("fields.createdAt"),
            sortBy === "createdAt" && /* @__PURE__ */ jsx99("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx99("th", { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: t2("actions.title") })
    ] }) }),
    /* @__PURE__ */ jsx99("tbody", { className: "bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700", children: customers.map((customer) => /* @__PURE__ */ jsxs83("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-800", children: [
      /* @__PURE__ */ jsx99("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsxs83("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [
        "#",
        customer.id
      ] }) }),
      /* @__PURE__ */ jsx99("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx99("div", { className: "text-sm", children: /* @__PURE__ */ jsxs83("div", { className: "font-medium text-gray-900 dark:text-white", children: [
        customer.firstName,
        " ",
        customer.lastName
      ] }) }) }),
      /* @__PURE__ */ jsx99("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs83("div", { className: "text-sm", children: [
        /* @__PURE__ */ jsx99("div", { className: "font-medium text-gray-900 dark:text-white", children: customer.email }),
        /* @__PURE__ */ jsx99("div", { className: "text-gray-500 dark:text-gray-400 text-xs", children: customer.phone })
      ] }) }),
      /* @__PURE__ */ jsx99("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx99("div", { className: "text-sm text-gray-900 dark:text-white", children: customer.city && customer.state ? /* @__PURE__ */ jsxs83("div", { children: [
        /* @__PURE__ */ jsxs83("div", { children: [
          customer.city,
          ", ",
          customer.state
        ] }),
        customer.country && /* @__PURE__ */ jsx99("div", { className: "text-gray-500 dark:text-gray-400 text-xs", children: customer.country })
      ] }) : /* @__PURE__ */ jsx99("span", { className: "text-gray-500 dark:text-gray-400", children: "N/A" }) }) }),
      /* @__PURE__ */ jsx99("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx99("div", { className: "text-sm text-gray-900 dark:text-white", children: formatDate11(customer.createdAt) }) }),
      /* @__PURE__ */ jsx99("td", { className: "px-6 py-4 whitespace-nowrap text-right text-sm font-medium", children: /* @__PURE__ */ jsxs83(DropdownMenu2, { children: [
        /* @__PURE__ */ jsx99(DropdownMenuTrigger2, { children: /* @__PURE__ */ jsx99(
          Button19,
          {
            variant: "ghost",
            size: "sm",
            className: "h-8 w-8 p-0",
            onClick: () => setOpenDropdownId(customer.id),
            children: /* @__PURE__ */ jsx99(MoreVertical2, { className: "h-4 w-4" })
          }
        ) }),
        /* @__PURE__ */ jsxs83(
          DropdownMenuContent2,
          {
            align: "end",
            open: openDropdownId === customer.id,
            onOpenChange: (open) => setOpenDropdownId(open ? customer.id : null),
            children: [
              /* @__PURE__ */ jsxs83(DropdownMenuItem2, { onClick: () => {
                onCustomerAction("view", customer.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx99(Eye6, { className: "h-4 w-4 mr-2" }),
                t2("actions.view")
              ] }),
              /* @__PURE__ */ jsxs83(DropdownMenuItem2, { onClick: () => {
                onCustomerAction("edit", customer.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx99(Edit4, { className: "h-4 w-4 mr-2" }),
                t2("actions.editCustomer")
              ] }),
              /* @__PURE__ */ jsxs83(DropdownMenuItem2, { onClick: () => {
                onCustomerAction("viewOrders", customer.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx99(ShoppingBag, { className: "h-4 w-4 mr-2" }),
                t2("actions.viewOrders")
              ] }),
              /* @__PURE__ */ jsx99(DropdownMenuSeparator2, {}),
              /* @__PURE__ */ jsxs83(
                DropdownMenuItem2,
                {
                  onClick: () => {
                    onCustomerAction("delete", customer.id);
                    setOpenDropdownId(null);
                  },
                  className: "text-red-600 dark:text-red-400 focus:text-red-700 dark:focus:text-red-300",
                  children: [
                    /* @__PURE__ */ jsx99(Trash25, { className: "h-4 w-4 mr-2" }),
                    t2("actions.deleteCustomer")
                  ]
                }
              )
            ]
          }
        )
      ] }) })
    ] }, customer.id)) })
  ] }) }) });
}

// src/components/features/Customers/components/CustomerDetailDialog.tsx
import { useState as useState38, useEffect as useEffect20 } from "react";
import { Trash2 as Trash26 } from "lucide-react";
import { useCustomerTranslations as useCustomerTranslations3, useCommonTranslations as useCommonTranslations12 } from "@rentalshop/hooks";
import { Fragment as Fragment21, jsx as jsx100, jsxs as jsxs84 } from "react/jsx-runtime";
var CustomerDetailDialog = ({
  open,
  onOpenChange,
  customer,
  onDelete
}) => {
  const t2 = useCustomerTranslations3();
  const tc = useCommonTranslations12();
  const [isDeleting, setIsDeleting] = useState38(false);
  const [showDeleteConfirm, setShowDeleteConfirm] = useState38(false);
  const [merchant, setMerchant] = useState38(null);
  const [isLoadingMerchant, setIsLoadingMerchant] = useState38(false);
  useEffect20(() => {
    const fetchMerchant = async () => {
      if (!customer?.merchantId) {
        console.log("\u{1F50D} CustomerDetailDialog: No merchantId found for customer:", customer);
        setMerchant(null);
        return;
      }
      try {
        setIsLoadingMerchant(true);
        console.log("\u{1F50D} CustomerDetailDialog: Fetching merchant with ID:", customer.merchantId);
        const { merchantsApi: merchantsApi4 } = await import("@rentalshop/utils");
        const response = await merchantsApi4.getMerchantById(customer.merchantId);
        console.log("\u{1F50D} CustomerDetailDialog: Merchant API response:", response);
        if (response.success && response.data) {
          console.log("\u2705 CustomerDetailDialog: Merchant fetched successfully:", response.data);
          setMerchant(response.data);
        } else {
          console.error("\u274C CustomerDetailDialog: Merchant API error:", response.error);
          setMerchant(null);
        }
      } catch (error2) {
        console.error("\u274C CustomerDetailDialog: Error fetching merchant:", error2);
        setMerchant(null);
      } finally {
        setIsLoadingMerchant(false);
      }
    };
    fetchMerchant();
  }, [customer?.merchantId]);
  if (!customer)
    return null;
  const formatDate11 = (date2) => {
    if (!date2)
      return t2("messages.na");
    const dateObj = typeof date2 === "string" ? new Date(date2) : date2;
    return dateObj.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const getStatusBadgeStyle = (isActive) => {
    if (isActive) {
      return "bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800";
    } else {
      return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
    }
  };
  const getStatusDisplayName = (isActive) => {
    return isActive ? t2("status.active") : t2("status.inactive");
  };
  const handleDelete = async () => {
    if (!customer || !onDelete)
      return;
    try {
      setIsDeleting(true);
      await onDelete(customer.id);
      setShowDeleteConfirm(false);
      onOpenChange(false);
    } catch (error2) {
      console.error("Error deleting customer:", error2);
    } finally {
      setIsDeleting(false);
    }
  };
  return /* @__PURE__ */ jsxs84(Fragment21, { children: [
    /* @__PURE__ */ jsx100(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs84(DialogContent, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
      /* @__PURE__ */ jsx100(DialogHeader, { children: /* @__PURE__ */ jsxs84("div", { children: [
        /* @__PURE__ */ jsx100(DialogTitle, { className: "text-xl font-semibold", children: t2("customerDetails") }),
        /* @__PURE__ */ jsx100(DialogDescription, { className: "text-sm text-gray-600 mt-1", children: t2("viewCustomerInfo") })
      ] }) }),
      /* @__PURE__ */ jsx100(Card, { children: /* @__PURE__ */ jsxs84(CardContent, { className: "p-6", children: [
        /* @__PURE__ */ jsxs84("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs84("div", { children: [
            /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.fullName") }),
            /* @__PURE__ */ jsx100("p", { className: "text-gray-900 font-medium", children: `${customer.firstName} ${customer.lastName}` })
          ] }),
          /* @__PURE__ */ jsxs84("div", { children: [
            /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.email") }),
            /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: customer.email })
          ] }),
          /* @__PURE__ */ jsxs84("div", { children: [
            /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.phone") }),
            /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: customer.phone })
          ] }),
          /* @__PURE__ */ jsxs84("div", { children: [
            /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.dateOfBirth") }),
            /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: customer.dateOfBirth ? formatDate11(customer.dateOfBirth) : t2("fields.notProvided") })
          ] }),
          /* @__PURE__ */ jsxs84("div", { children: [
            /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("stats.memberSince") }),
            /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: formatDate11(customer.createdAt) })
          ] }),
          /* @__PURE__ */ jsxs84("div", { children: [
            /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.lastUpdated") }),
            /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: formatDate11(customer.updatedAt) })
          ] }),
          /* @__PURE__ */ jsxs84("div", { children: [
            /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.merchant") }),
            /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: isLoadingMerchant ? /* @__PURE__ */ jsx100("span", { className: "text-gray-500", children: t2("fields.loading") }) : merchant ? merchant.name : /* @__PURE__ */ jsxs84("span", { className: "text-gray-500", children: [
              t2("fields.notAvailable"),
              " ",
              customer.merchantId ? `(ID: ${customer.merchantId})` : "(No merchant ID)"
            ] }) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs84("div", { className: "border-t mt-6 pt-4", children: [
          /* @__PURE__ */ jsx100("h3", { className: "text-sm font-medium text-gray-900 mb-4", children: t2("addressInformation") }),
          /* @__PURE__ */ jsxs84("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs84("div", { className: "md:col-span-2", children: [
              /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.streetAddress") }),
              /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: customer.address || t2("fields.noAddress") })
            ] }),
            /* @__PURE__ */ jsxs84("div", { children: [
              /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.city") }),
              /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: customer.city || t2("fields.notSpecified") })
            ] }),
            /* @__PURE__ */ jsxs84("div", { children: [
              /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.state") }),
              /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: customer.state || t2("fields.notSpecified") })
            ] }),
            /* @__PURE__ */ jsxs84("div", { children: [
              /* @__PURE__ */ jsx100("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.zipCode") }),
              /* @__PURE__ */ jsx100("p", { className: "text-gray-900", children: customer.zipCode || t2("fields.notSpecified") })
            ] })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs84(DialogFooter, { className: "flex justify-between", children: [
        /* @__PURE__ */ jsx100("div", { children: onDelete && /* @__PURE__ */ jsxs84(
          Button2,
          {
            variant: "destructive",
            onClick: () => setShowDeleteConfirm(true),
            disabled: isDeleting,
            className: "flex items-center space-x-2",
            children: [
              /* @__PURE__ */ jsx100(Trash26, { className: "w-4 h-4" }),
              /* @__PURE__ */ jsx100("span", { children: t2("actions.deleteCustomer") })
            ]
          }
        ) }),
        /* @__PURE__ */ jsx100("div", { className: "flex space-x-2", children: /* @__PURE__ */ jsx100(
          Button2,
          {
            variant: "outline",
            onClick: () => onOpenChange(false),
            children: tc("buttons.close")
          }
        ) })
      ] })
    ] }) }),
    /* @__PURE__ */ jsx100(Dialog, { open: showDeleteConfirm, onOpenChange: setShowDeleteConfirm, children: /* @__PURE__ */ jsxs84(DialogContent, { className: "max-w-md", children: [
      /* @__PURE__ */ jsxs84(DialogHeader, { children: [
        /* @__PURE__ */ jsx100(DialogTitle, { className: "text-lg font-semibold text-red-600", children: t2("actions.deleteCustomer") }),
        /* @__PURE__ */ jsx100(DialogDescription, { className: "text-sm text-gray-600", children: t2("messages.confirmDeleteDetails").replace("{name}", `${customer?.firstName} ${customer?.lastName}`) })
      ] }),
      /* @__PURE__ */ jsxs84(DialogFooter, { className: "flex justify-end space-x-2", children: [
        /* @__PURE__ */ jsx100(
          Button2,
          {
            variant: "outline",
            onClick: () => setShowDeleteConfirm(false),
            disabled: isDeleting,
            children: tc("buttons.cancel")
          }
        ),
        /* @__PURE__ */ jsxs84(
          Button2,
          {
            variant: "destructive",
            onClick: handleDelete,
            disabled: isDeleting,
            className: "flex items-center space-x-2",
            children: [
              /* @__PURE__ */ jsx100(Trash26, { className: "w-4 h-4" }),
              /* @__PURE__ */ jsx100("span", { children: isDeleting ? t2("deleting") : t2("actions.deleteCustomer") })
            ]
          }
        )
      ] })
    ] }) })
  ] });
};

// src/components/features/Customers/components/CustomerInfoCard.tsx
import { Card as Card20, CardContent as CardContent19, CardHeader as CardHeader17, CardTitle as CardTitle17 } from "@rentalshop/ui";
import { Button as Button20 } from "@rentalshop/ui";
import {
  Edit as Edit5,
  ShoppingBag as ShoppingBag2,
  Trash2 as Trash27
} from "lucide-react";
import { useCustomerTranslations as useCustomerTranslations4 } from "@rentalshop/hooks";
import { jsx as jsx101, jsxs as jsxs85 } from "react/jsx-runtime";
var CustomerInfoCard = ({
  customer,
  onEdit,
  onViewOrders,
  onDelete,
  showActions = true,
  isLoading = false
}) => {
  const t2 = useCustomerTranslations4();
  const formatDate11 = (date2) => {
    if (!date2)
      return t2("messages.na");
    const dateObj = typeof date2 === "string" ? new Date(date2) : date2;
    return dateObj.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const formatAddress = () => {
    if (!customer)
      return t2("fields.noAddress");
    const parts = [
      customer.address,
      customer.city,
      customer.state,
      customer.zipCode,
      customer.country
    ].filter(Boolean);
    return parts.length > 0 ? parts.join(", ") : t2("fields.noAddress");
  };
  if (isLoading) {
    return /* @__PURE__ */ jsxs85(Card20, { children: [
      /* @__PURE__ */ jsx101(CardHeader17, { children: /* @__PURE__ */ jsx101(CardTitle17, { className: "text-lg font-semibold text-gray-900", children: t2("customerInformation") }) }),
      /* @__PURE__ */ jsx101(CardContent19, { children: /* @__PURE__ */ jsx101("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs85("div", { className: "animate-pulse", children: [
        /* @__PURE__ */ jsx101("div", { className: "h-4 bg-gray-200 rounded w-3/4 mb-4" }),
        /* @__PURE__ */ jsx101("div", { className: "h-4 bg-gray-200 rounded w-1/2 mb-2" }),
        /* @__PURE__ */ jsx101("div", { className: "h-4 bg-gray-200 rounded w-2/3 mb-2" }),
        /* @__PURE__ */ jsx101("div", { className: "h-4 bg-gray-200 rounded w-1/2" })
      ] }) }) })
    ] });
  }
  if (!customer) {
    return /* @__PURE__ */ jsxs85(Card20, { children: [
      /* @__PURE__ */ jsx101(CardHeader17, { children: /* @__PURE__ */ jsx101(CardTitle17, { className: "text-lg font-semibold text-gray-900", children: t2("customerInformation") }) }),
      /* @__PURE__ */ jsx101(CardContent19, { children: /* @__PURE__ */ jsx101("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx101("p", { className: "text-gray-500", children: t2("noDataAvailable") }) }) })
    ] });
  }
  return /* @__PURE__ */ jsxs85(Card20, { children: [
    /* @__PURE__ */ jsxs85(CardHeader17, { children: [
      /* @__PURE__ */ jsxs85("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx101(CardTitle17, { className: "text-lg font-semibold text-gray-900", children: t2("customerInformation") }),
        showActions && /* @__PURE__ */ jsxs85("div", { className: "flex items-center space-x-2", children: [
          onEdit && /* @__PURE__ */ jsxs85(
            Button20,
            {
              onClick: onEdit,
              variant: "outline",
              size: "sm",
              className: "flex items-center space-x-2",
              children: [
                /* @__PURE__ */ jsx101(Edit5, { className: "w-4 h-4" }),
                /* @__PURE__ */ jsx101("span", { children: t2("actions.edit") })
              ]
            }
          ),
          onViewOrders && /* @__PURE__ */ jsxs85(
            Button20,
            {
              onClick: onViewOrders,
              variant: "outline",
              size: "sm",
              className: "flex items-center space-x-2",
              children: [
                /* @__PURE__ */ jsx101(ShoppingBag2, { className: "w-4 h-4" }),
                /* @__PURE__ */ jsx101("span", { children: t2("actions.orders") })
              ]
            }
          ),
          onDelete && /* @__PURE__ */ jsxs85(
            Button20,
            {
              onClick: onDelete,
              variant: "destructive",
              size: "sm",
              className: "flex items-center space-x-2",
              children: [
                /* @__PURE__ */ jsx101(Trash27, { className: "w-4 h-4" }),
                /* @__PURE__ */ jsx101("span", { children: t2("actions.delete") })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsx101("div", { className: "border-b border-gray-200 mt-4" })
    ] }),
    /* @__PURE__ */ jsx101(CardContent19, { children: /* @__PURE__ */ jsxs85("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsx101("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs85("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs85("div", { children: [
          /* @__PURE__ */ jsx101("label", { className: "block text-sm font-normal text-gray-500 mb-2", children: t2("fields.fullName") }),
          /* @__PURE__ */ jsxs85("p", { className: "text-gray-900 text-base font-medium", children: [
            customer.firstName,
            " ",
            customer.lastName
          ] })
        ] }),
        /* @__PURE__ */ jsxs85("div", { children: [
          /* @__PURE__ */ jsx101("label", { className: "block text-sm font-normal text-gray-500 mb-2", children: t2("fields.email") }),
          /* @__PURE__ */ jsx101("p", { className: "text-gray-900 text-base", children: customer.email })
        ] }),
        /* @__PURE__ */ jsxs85("div", { children: [
          /* @__PURE__ */ jsx101("label", { className: "block text-sm font-normal text-gray-500 mb-2", children: t2("fields.phone") }),
          /* @__PURE__ */ jsx101("p", { className: "text-gray-900 text-base", children: customer.phone })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx101("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs85("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs85("div", { children: [
          /* @__PURE__ */ jsx101("label", { className: "block text-sm font-normal text-gray-500 mb-2", children: t2("fields.address") }),
          /* @__PURE__ */ jsx101("p", { className: "text-gray-900 text-base", children: formatAddress() })
        ] }),
        /* @__PURE__ */ jsxs85("div", { children: [
          /* @__PURE__ */ jsx101("label", { className: "block text-sm font-normal text-gray-500 mb-2", children: t2("stats.memberSince") }),
          /* @__PURE__ */ jsx101("p", { className: "text-gray-900 text-base", children: formatDate11(customer.createdAt) })
        ] })
      ] }) })
    ] }) })
  ] });
};

// src/components/features/Customers/components/CustomerOrdersSummaryCard.tsx
import { Card as Card21, CardContent as CardContent20, CardHeader as CardHeader18, CardTitle as CardTitle18 } from "@rentalshop/ui";
import { jsx as jsx102, jsxs as jsxs86 } from "react/jsx-runtime";
var CustomerOrdersSummaryCard = ({
  customer,
  orderStats,
  isLoading = false
}) => {
  const formatDate11 = (date2) => {
    if (!date2)
      return "N/A";
    const dateObj = typeof date2 === "string" ? new Date(date2) : date2;
    return dateObj.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const formatCurrency22 = (amount) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    }).format(amount);
  };
  if (isLoading) {
    return /* @__PURE__ */ jsxs86(Card21, { children: [
      /* @__PURE__ */ jsx102(CardHeader18, { children: /* @__PURE__ */ jsx102(CardTitle18, { className: "text-lg font-semibold text-gray-900", children: "Customer Orders Summary" }) }),
      /* @__PURE__ */ jsx102(CardContent20, { children: /* @__PURE__ */ jsx102("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs86("div", { className: "animate-pulse", children: [
        /* @__PURE__ */ jsx102("div", { className: "h-4 bg-gray-200 rounded w-3/4 mb-4" }),
        /* @__PURE__ */ jsx102("div", { className: "h-4 bg-gray-200 rounded w-1/2 mb-2" }),
        /* @__PURE__ */ jsx102("div", { className: "h-4 bg-gray-200 rounded w-2/3 mb-2" }),
        /* @__PURE__ */ jsx102("div", { className: "h-4 bg-gray-200 rounded w-1/2" })
      ] }) }) })
    ] });
  }
  if (!customer) {
    return /* @__PURE__ */ jsxs86(Card21, { children: [
      /* @__PURE__ */ jsx102(CardHeader18, { children: /* @__PURE__ */ jsx102(CardTitle18, { className: "text-lg font-semibold text-gray-900", children: "Customer Orders Summary" }) }),
      /* @__PURE__ */ jsx102(CardContent20, { children: /* @__PURE__ */ jsx102("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx102("p", { className: "text-gray-500", children: "No customer data available" }) }) })
    ] });
  }
  return /* @__PURE__ */ jsxs86("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
    /* @__PURE__ */ jsxs86(Card21, { children: [
      /* @__PURE__ */ jsx102(CardHeader18, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx102(CardTitle18, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Total Orders" }) }),
      /* @__PURE__ */ jsxs86(CardContent20, { children: [
        /* @__PURE__ */ jsx102("div", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: (orderStats?.totalOrders || 0).toLocaleString() }),
        /* @__PURE__ */ jsx102("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "All time orders" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs86(Card21, { children: [
      /* @__PURE__ */ jsx102(CardHeader18, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx102(CardTitle18, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Total Revenue" }) }),
      /* @__PURE__ */ jsxs86(CardContent20, { children: [
        /* @__PURE__ */ jsx102("div", { className: "text-2xl font-bold text-green-600 dark:text-green-400", children: formatCurrency22(orderStats?.totalRevenue || 0) }),
        /* @__PURE__ */ jsx102("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Lifetime revenue" })
      ] })
    ] })
  ] });
};

// src/components/features/Customers/components/CustomerPageHeader.tsx
import { Button as Button21 } from "@rentalshop/ui";
import { jsx as jsx103, jsxs as jsxs87 } from "react/jsx-runtime";
var CustomerPageHeader = ({
  title,
  subtitle,
  onBack,
  backText = "Back to Customers",
  backUrl,
  children
}) => {
  const handleBack = () => {
    if (onBack) {
      onBack();
    } else if (backUrl) {
      window.location.href = backUrl;
    }
  };
  return /* @__PURE__ */ jsx103("div", { className: "mb-6", children: (onBack || backUrl) && /* @__PURE__ */ jsxs87(
    Button21,
    {
      onClick: handleBack,
      variant: "outline",
      className: "mb-4",
      children: [
        "\u2190 ",
        backText
      ]
    }
  ) });
};

// src/components/features/Customers/components/AddCustomerDialog.tsx
import { useState as useState39 } from "react";
import { useCustomerTranslations as useCustomerTranslations5 } from "@rentalshop/hooks";
import { jsx as jsx104, jsxs as jsxs88 } from "react/jsx-runtime";
var AddCustomerDialog = ({
  open,
  onOpenChange,
  onCustomerCreated,
  onError
}) => {
  const t2 = useCustomerTranslations5();
  const [isSubmitting, setIsSubmitting] = useState39(false);
  const handleSave = async (customerData) => {
    try {
      setIsSubmitting(true);
      if (onCustomerCreated) {
        await onCustomerCreated(customerData);
      }
      onOpenChange(false);
    } catch (error2) {
      console.error("\u274C AddCustomerDialog: Error occurred:", error2);
      if (onError) {
        onError(error2 instanceof Error ? error2.message : "Failed to create customer");
      }
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (isSubmitting)
      return;
    onOpenChange(false);
  };
  return /* @__PURE__ */ jsx104(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs88(DialogContent, { className: "max-w-4xl max-h-[95vh] overflow-y-auto p-0", children: [
    /* @__PURE__ */ jsx104(DialogHeader, { className: "px-6 py-4 border-b border-gray-200", children: /* @__PURE__ */ jsx104(DialogTitle, { className: "text-xl font-semibold text-gray-900", children: t2("createCustomer") }) }),
    /* @__PURE__ */ jsx104("div", { className: "p-6", children: /* @__PURE__ */ jsx104(
      AddCustomerForm,
      {
        onSave: handleSave,
        onCancel: handleCancel,
        isSubmitting
      }
    ) })
  ] }) });
};

// src/components/features/Customers/components/EditCustomerForm.tsx
import {
  useState as useState40,
  useEffect as useEffect21,
  forwardRef as forwardRef13,
  useImperativeHandle as useImperativeHandle2
} from "react";
import { Save as Save3, X as X8 } from "lucide-react";
import { Button as Button22 } from "@rentalshop/ui";
import { Input as Input11 } from "@rentalshop/ui";
import { Label as Label3 } from "@rentalshop/ui";
import { Card as Card22, CardContent as CardContent21 } from "@rentalshop/ui";
import {
  useCustomerTranslations as useCustomerTranslations6,
  useCommonTranslations as useCommonTranslations13
} from "@rentalshop/hooks";
import { jsx as jsx105, jsxs as jsxs89 } from "react/jsx-runtime";
var EditCustomerForm = forwardRef13(
  ({
    customer,
    onSave,
    onCancel,
    isSubmitting: externalIsSubmitting,
    showActions = true
  }, ref) => {
    const t2 = useCustomerTranslations6();
    const tc = useCommonTranslations13();
    const [formData, setFormData] = useState40({
      firstName: customer.firstName,
      lastName: customer.lastName,
      email: customer.email,
      phone: customer.phone,
      companyName: customer.companyName || "",
      address: customer.address || "",
      city: customer.city || "",
      state: customer.state || "",
      zipCode: customer.zipCode || "",
      country: customer.country || "",
      // Hidden in UI but sent to API
      status: customer.status,
      membershipLevel: customer.membershipLevel
    });
    const [errors, setErrors] = useState40({});
    const [internalIsSubmitting, setInternalIsSubmitting] = useState40(false);
    const [errorMessage, setErrorMessage] = useState40(null);
    const isSubmitting = externalIsSubmitting !== void 0 ? externalIsSubmitting : internalIsSubmitting;
    useEffect21(() => {
      setFormData({
        firstName: customer.firstName,
        lastName: customer.lastName,
        email: customer.email,
        phone: customer.phone,
        companyName: customer.companyName || "",
        address: customer.address || "",
        city: customer.city || "",
        state: customer.state || "",
        zipCode: customer.zipCode || "",
        country: customer.country || "",
        // Hidden in UI but sent to API
        status: customer.status,
        membershipLevel: customer.membershipLevel
      });
    }, [customer]);
    console.log(
      "\u{1F50D} EditCustomerForm: Component rendered with customer:",
      customer
    );
    const handleInputChange = (field, value) => {
      console.log("\u{1F50D} EditCustomerForm: Input changed:", { field, value });
      setFormData((prev) => ({ ...prev, [field]: value }));
      if (errors[field]) {
        setErrors((prev) => ({ ...prev, [field]: "" }));
      }
      if (errorMessage) {
        setErrorMessage(null);
      }
    };
    const validateForm = () => {
      const newErrors = {};
      if (!formData.firstName.trim()) {
        newErrors.firstName = t2("validation.firstNameRequired");
      } else if (formData.firstName.trim().length < 2) {
        newErrors.firstName = t2("validation.firstNameMinLength");
      }
      if (!formData.lastName.trim()) {
        newErrors.lastName = t2("validation.lastNameRequired");
      } else if (formData.lastName.trim().length < 2) {
        newErrors.lastName = t2("validation.lastNameMinLength");
      }
      if (formData.email && formData.email.trim() && !/\S+@\S+\.\S+/.test(formData.email)) {
        newErrors.email = t2("validation.emailInvalid");
      }
      if (!formData.phone || !formData.phone.trim()) {
        newErrors.phone = t2("validation.phoneRequired");
      } else if (!/^[0-9+\-\s()]+$/.test(formData.phone.trim())) {
        newErrors.phone = t2("validation.phoneInvalid");
      } else if (formData.phone.trim().length < 8) {
        newErrors.phone = t2("validation.phoneMinLength");
      }
      setErrors(newErrors);
      return Object.keys(newErrors).length === 0;
    };
    const handleSubmit = async (e2) => {
      e2.preventDefault();
      console.log("\u{1F50D} EditCustomerForm: Form submitted");
      if (!validateForm()) {
        console.log("\u274C EditCustomerForm: Validation failed");
        return;
      }
      try {
        setInternalIsSubmitting(true);
        setErrorMessage(null);
        const changedFields = { id: customer.id };
        Object.keys(formData).forEach((key) => {
          const field = key;
          if (formData[field] !== customer[field]) {
            changedFields[field] = formData[field];
          }
        });
        if (Object.keys(changedFields).length === 0) {
          console.log("\u{1F50D} EditCustomerForm: No changes detected");
          return;
        }
        console.log(
          "\u{1F50D} EditCustomerForm: Calling onSave with changed fields:",
          changedFields
        );
        await onSave(changedFields);
        console.log("\u2705 EditCustomerForm: Customer updated successfully");
      } catch (error2) {
        console.error("\u274C EditCustomerForm: Error updating customer:", error2);
        const errorMessage2 = error2 instanceof Error ? error2.message : "An unexpected error occurred";
        setErrorMessage(errorMessage2);
      } finally {
        setInternalIsSubmitting(false);
      }
    };
    const handleCancel = () => {
      if (onCancel) {
        onCancel();
      }
    };
    useImperativeHandle2(ref, () => ({
      submitForm: () => {
        const syntheticEvent = {
          preventDefault: () => {
          }
        };
        handleSubmit(syntheticEvent);
      }
    }));
    return /* @__PURE__ */ jsx105("form", { onSubmit: handleSubmit, children: /* @__PURE__ */ jsx105(Card22, { children: /* @__PURE__ */ jsxs89(CardContent21, { className: "p-6 space-y-4", children: [
      errorMessage && /* @__PURE__ */ jsx105("div", { className: "p-4 bg-red-50 border border-red-200 rounded-lg", children: /* @__PURE__ */ jsx105("p", { className: "text-sm text-red-800", children: errorMessage }) }),
      /* @__PURE__ */ jsxs89("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs89("div", { children: [
          /* @__PURE__ */ jsxs89(Label3, { htmlFor: "firstName", children: [
            t2("fields.firstName"),
            " *"
          ] }),
          /* @__PURE__ */ jsx105(
            Input11,
            {
              id: "firstName",
              type: "text",
              value: formData.firstName,
              onChange: (e2) => handleInputChange("firstName", e2.target.value),
              placeholder: t2("placeholders.enterFirstName"),
              className: errors.firstName ? "border-red-500" : ""
            }
          ),
          errors.firstName && /* @__PURE__ */ jsx105("p", { className: "text-sm text-red-600", children: errors.firstName })
        ] }),
        /* @__PURE__ */ jsxs89("div", { children: [
          /* @__PURE__ */ jsxs89(Label3, { htmlFor: "lastName", children: [
            t2("fields.lastName"),
            " *"
          ] }),
          /* @__PURE__ */ jsx105(
            Input11,
            {
              id: "lastName",
              type: "text",
              value: formData.lastName,
              onChange: (e2) => handleInputChange("lastName", e2.target.value),
              placeholder: t2("placeholders.enterLastName"),
              className: errors.lastName ? "border-red-500" : ""
            }
          ),
          errors.lastName && /* @__PURE__ */ jsx105("p", { className: "text-sm text-red-600", children: errors.lastName })
        ] })
      ] }),
      /* @__PURE__ */ jsxs89("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs89("div", { children: [
          /* @__PURE__ */ jsx105(Label3, { htmlFor: "email", children: t2("fields.email") }),
          /* @__PURE__ */ jsx105(
            Input11,
            {
              id: "email",
              type: "email",
              value: formData.email || "",
              onChange: (e2) => handleInputChange("email", e2.target.value),
              placeholder: t2("placeholders.enterEmail"),
              className: errors.email ? "border-red-500" : ""
            }
          ),
          errors.email && /* @__PURE__ */ jsx105("p", { className: "text-sm text-red-600", children: errors.email })
        ] }),
        /* @__PURE__ */ jsxs89("div", { children: [
          /* @__PURE__ */ jsx105(Label3, { htmlFor: "phone", children: t2("fields.phone") }),
          /* @__PURE__ */ jsx105(
            Input11,
            {
              id: "phone",
              type: "tel",
              value: formData.phone || "",
              onChange: (e2) => handleInputChange("phone", e2.target.value),
              placeholder: t2("placeholders.enterPhone"),
              className: errors.phone ? "border-red-500" : ""
            }
          ),
          errors.phone && /* @__PURE__ */ jsx105("p", { className: "text-sm text-red-600", children: errors.phone })
        ] })
      ] }),
      /* @__PURE__ */ jsxs89("div", { children: [
        /* @__PURE__ */ jsx105(Label3, { htmlFor: "companyName", children: t2("fields.companyName") }),
        /* @__PURE__ */ jsx105(
          Input11,
          {
            id: "companyName",
            type: "text",
            value: formData.companyName,
            onChange: (e2) => handleInputChange("companyName", e2.target.value),
            placeholder: t2("placeholders.enterCompanyName")
          }
        )
      ] }),
      /* @__PURE__ */ jsxs89("div", { children: [
        /* @__PURE__ */ jsx105(Label3, { htmlFor: "address", children: t2("fields.streetAddress") }),
        /* @__PURE__ */ jsx105(
          Input11,
          {
            id: "address",
            type: "text",
            value: formData.address,
            onChange: (e2) => handleInputChange("address", e2.target.value),
            placeholder: t2("placeholders.enterStreetAddress")
          }
        )
      ] }),
      /* @__PURE__ */ jsxs89("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsxs89("div", { children: [
          /* @__PURE__ */ jsx105(Label3, { htmlFor: "city", children: t2("fields.city") }),
          /* @__PURE__ */ jsx105(
            Input11,
            {
              id: "city",
              type: "text",
              value: formData.city,
              onChange: (e2) => handleInputChange("city", e2.target.value),
              placeholder: t2("placeholders.enterCity")
            }
          )
        ] }),
        /* @__PURE__ */ jsxs89("div", { children: [
          /* @__PURE__ */ jsx105(Label3, { htmlFor: "state", children: t2("fields.state") }),
          /* @__PURE__ */ jsx105(
            Input11,
            {
              id: "state",
              type: "text",
              value: formData.state,
              onChange: (e2) => handleInputChange("state", e2.target.value),
              placeholder: t2("placeholders.enterState")
            }
          )
        ] }),
        /* @__PURE__ */ jsxs89("div", { children: [
          /* @__PURE__ */ jsx105(Label3, { htmlFor: "zipCode", children: t2("fields.zipCode") }),
          /* @__PURE__ */ jsx105(
            Input11,
            {
              id: "zipCode",
              type: "text",
              value: formData.zipCode,
              onChange: (e2) => handleInputChange("zipCode", e2.target.value),
              placeholder: t2("placeholders.enterZipCode")
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs89("div", { className: "flex justify-end space-x-3 border-t pt-4", children: [
        /* @__PURE__ */ jsxs89(
          Button22,
          {
            type: "button",
            variant: "outline",
            onClick: onCancel,
            disabled: isSubmitting,
            children: [
              /* @__PURE__ */ jsx105(X8, { className: "w-4 h-4 mr-2" }),
              tc("buttons.cancel")
            ]
          }
        ),
        /* @__PURE__ */ jsxs89(Button22, { type: "submit", disabled: isSubmitting, children: [
          /* @__PURE__ */ jsx105(Save3, { className: "w-4 h-4 mr-2" }),
          isSubmitting ? t2("updating") : t2("updateCustomer")
        ] })
      ] })
    ] }) }) });
  }
);
EditCustomerForm.displayName = "EditCustomerForm";

// src/components/features/Customers/components/CustomerForm.tsx
import { useState as useState41, useEffect as useEffect22 } from "react";
import { Save as Save4, X as X9 } from "lucide-react";
import { Button as Button23 } from "@rentalshop/ui";
import { Input as Input12 } from "@rentalshop/ui";
import { Label as Label4 } from "@rentalshop/ui";
import { Select as Select8, SelectContent as SelectContent8, SelectItem as SelectItem8, SelectTrigger as SelectTrigger8, SelectValue as SelectValue8 } from "@rentalshop/ui";
import { Card as Card23, CardContent as CardContent22 } from "@rentalshop/ui";
import { jsx as jsx106, jsxs as jsxs90 } from "react/jsx-runtime";
var CustomerForm = ({
  mode = "create",
  customer,
  onSave,
  onCancel,
  isSubmitting: externalIsSubmitting,
  currentUser
}) => {
  const [formData, setFormData] = useState41({
    firstName: "",
    lastName: "",
    email: "",
    phone: "",
    companyName: "",
    address: "",
    city: "",
    state: "",
    zipCode: "",
    country: "",
    dateOfBirth: "",
    idNumber: "",
    idType: "other",
    notes: ""
  });
  const [isSubmitting, setIsSubmitting] = useState41(false);
  const [errors, setErrors] = useState41({});
  useEffect22(() => {
    if (mode === "edit" && customer) {
      setFormData({
        firstName: customer.firstName || "",
        lastName: customer.lastName || "",
        email: customer.email || "",
        phone: customer.phone || "",
        companyName: customer.companyName || "",
        address: customer.address || "",
        city: customer.city || "",
        state: customer.state || "",
        zipCode: customer.zipCode || "",
        country: customer.country || "",
        dateOfBirth: customer.dateOfBirth ? new Date(customer.dateOfBirth).toISOString().split("T")[0] : "",
        idNumber: customer.idNumber || "",
        idType: customer.idType || "other",
        notes: customer.notes || ""
      });
    }
  }, [mode, customer]);
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }));
    }
  };
  const validateForm = () => {
    const newErrors = {};
    if (!formData.firstName.trim()) {
      newErrors.firstName = "First name is required";
    }
    if (!formData.lastName.trim()) {
      newErrors.lastName = "Last name is required";
    }
    if (!formData.phone.trim()) {
      newErrors.phone = "Phone number is required";
    }
    if (formData.email && formData.email.trim()) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(formData.email)) {
        newErrors.email = "Invalid email format";
      }
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    setIsSubmitting(true);
    try {
      const customerData = {
        ...mode === "edit" && customer ? { id: customer.id } : {},
        firstName: formData.firstName.trim(),
        lastName: formData.lastName.trim(),
        email: formData.email.trim() || void 0,
        phone: formData.phone.trim(),
        companyName: formData.companyName.trim() || void 0,
        address: formData.address.trim() || void 0,
        city: formData.city.trim() || void 0,
        state: formData.state.trim() || void 0,
        zipCode: formData.zipCode.trim() || void 0,
        country: formData.country.trim() || void 0,
        dateOfBirth: formData.dateOfBirth ? new Date(formData.dateOfBirth) : void 0,
        idNumber: formData.idNumber.trim() || void 0,
        idType: formData.idType,
        notes: formData.notes.trim() || void 0
        // merchantId will be automatically determined from JWT token
        // Only ADMIN users need to send merchantId in request
      };
      await onSave(customerData);
    } catch (error2) {
      console.error("Error saving customer:", error2);
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (onCancel) {
      onCancel();
    }
  };
  const isFormSubmitting = isSubmitting || externalIsSubmitting;
  return /* @__PURE__ */ jsxs90("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
    /* @__PURE__ */ jsx106(Card23, { children: /* @__PURE__ */ jsxs90(CardContent22, { className: "pt-6", children: [
      /* @__PURE__ */ jsxs90("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "firstName", children: "First Name *" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "firstName",
              value: formData.firstName,
              onChange: (e2) => handleInputChange("firstName", e2.target.value),
              placeholder: "Enter first name",
              className: errors.firstName ? "border-red-500" : "",
              disabled: isFormSubmitting
            }
          ),
          errors.firstName && /* @__PURE__ */ jsx106("p", { className: "text-sm text-red-500", children: errors.firstName })
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "lastName", children: "Last Name *" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "lastName",
              value: formData.lastName,
              onChange: (e2) => handleInputChange("lastName", e2.target.value),
              placeholder: "Enter last name",
              className: errors.lastName ? "border-red-500" : "",
              disabled: isFormSubmitting
            }
          ),
          errors.lastName && /* @__PURE__ */ jsx106("p", { className: "text-sm text-red-500", children: errors.lastName })
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "email", children: "Email" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "email",
              type: "email",
              value: formData.email,
              onChange: (e2) => handleInputChange("email", e2.target.value),
              placeholder: "Enter email address",
              className: errors.email ? "border-red-500" : "",
              disabled: isFormSubmitting
            }
          ),
          errors.email && /* @__PURE__ */ jsx106("p", { className: "text-sm text-red-500", children: errors.email })
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "phone", children: "Phone *" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "phone",
              value: formData.phone,
              onChange: (e2) => handleInputChange("phone", e2.target.value),
              placeholder: "Enter phone number",
              className: errors.phone ? "border-red-500" : "",
              disabled: isFormSubmitting
            }
          ),
          errors.phone && /* @__PURE__ */ jsx106("p", { className: "text-sm text-red-500", children: errors.phone })
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "companyName", children: "Company Name" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "companyName",
              value: formData.companyName,
              onChange: (e2) => handleInputChange("companyName", e2.target.value),
              placeholder: "Enter company name",
              disabled: isFormSubmitting
            }
          )
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "dateOfBirth", children: "Date of Birth" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "dateOfBirth",
              type: "date",
              value: formData.dateOfBirth,
              onChange: (e2) => handleInputChange("dateOfBirth", e2.target.value),
              disabled: isFormSubmitting
            }
          )
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "idType", children: "ID Type" }),
          /* @__PURE__ */ jsxs90(
            Select8,
            {
              value: formData.idType,
              onValueChange: (value) => handleInputChange("idType", value),
              disabled: isFormSubmitting,
              children: [
                /* @__PURE__ */ jsx106(SelectTrigger8, { children: /* @__PURE__ */ jsx106(SelectValue8, { placeholder: "Select ID type" }) }),
                /* @__PURE__ */ jsxs90(SelectContent8, { children: [
                  /* @__PURE__ */ jsx106(SelectItem8, { value: "passport", children: "Passport" }),
                  /* @__PURE__ */ jsx106(SelectItem8, { value: "drivers_license", children: "Driver's License" }),
                  /* @__PURE__ */ jsx106(SelectItem8, { value: "national_id", children: "National ID" }),
                  /* @__PURE__ */ jsx106(SelectItem8, { value: "other", children: "Other" })
                ] })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "idNumber", children: "ID Number" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "idNumber",
              value: formData.idNumber,
              onChange: (e2) => handleInputChange("idNumber", e2.target.value),
              placeholder: "Enter ID number",
              disabled: isFormSubmitting
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs90("div", { className: "mt-4 space-y-2", children: [
        /* @__PURE__ */ jsx106(Label4, { htmlFor: "address", children: "Address" }),
        /* @__PURE__ */ jsx106(
          Input12,
          {
            id: "address",
            value: formData.address,
            onChange: (e2) => handleInputChange("address", e2.target.value),
            placeholder: "Enter street address",
            disabled: isFormSubmitting
          }
        )
      ] }),
      /* @__PURE__ */ jsxs90("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mt-4", children: [
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "city", children: "City" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "city",
              value: formData.city,
              onChange: (e2) => handleInputChange("city", e2.target.value),
              placeholder: "Enter city",
              disabled: isFormSubmitting
            }
          )
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "state", children: "State" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "state",
              value: formData.state,
              onChange: (e2) => handleInputChange("state", e2.target.value),
              placeholder: "Enter state",
              disabled: isFormSubmitting
            }
          )
        ] }),
        /* @__PURE__ */ jsxs90("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx106(Label4, { htmlFor: "zipCode", children: "Zip Code" }),
          /* @__PURE__ */ jsx106(
            Input12,
            {
              id: "zipCode",
              value: formData.zipCode,
              onChange: (e2) => handleInputChange("zipCode", e2.target.value),
              placeholder: "Enter zip code",
              disabled: isFormSubmitting
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs90("div", { className: "mt-4 space-y-2", children: [
        /* @__PURE__ */ jsx106(Label4, { htmlFor: "country", children: "Country" }),
        /* @__PURE__ */ jsx106(
          Input12,
          {
            id: "country",
            value: formData.country,
            onChange: (e2) => handleInputChange("country", e2.target.value),
            placeholder: "Enter country",
            disabled: isFormSubmitting
          }
        )
      ] }),
      /* @__PURE__ */ jsxs90("div", { className: "mt-4 space-y-2", children: [
        /* @__PURE__ */ jsx106(Label4, { htmlFor: "notes", children: "Notes" }),
        /* @__PURE__ */ jsx106(
          "textarea",
          {
            id: "notes",
            value: formData.notes,
            onChange: (e2) => handleInputChange("notes", e2.target.value),
            placeholder: "Enter any additional notes",
            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",
            rows: 3,
            disabled: isFormSubmitting
          }
        )
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs90("div", { className: "flex justify-end space-x-3", children: [
      /* @__PURE__ */ jsxs90(
        Button23,
        {
          type: "button",
          variant: "outline",
          onClick: handleCancel,
          disabled: isFormSubmitting,
          children: [
            /* @__PURE__ */ jsx106(X9, { className: "w-4 h-4 mr-2" }),
            "Cancel"
          ]
        }
      ),
      /* @__PURE__ */ jsxs90(
        Button23,
        {
          type: "submit",
          disabled: isFormSubmitting,
          children: [
            /* @__PURE__ */ jsx106(Save4, { className: "w-4 h-4 mr-2" }),
            isFormSubmitting ? "Saving..." : mode === "create" ? "Create Customer" : "Update Customer"
          ]
        }
      )
    ] })
  ] });
};

// src/components/features/Customers/components/CustomerActions.tsx
import { useState as useState42, useEffect as useEffect23 } from "react";
import { useRouter as useRouter4 } from "next/navigation";
import { Plus as Plus5, Filter as Filter2 } from "lucide-react";
import { jsx as jsx107, jsxs as jsxs91 } from "react/jsx-runtime";
function CustomerActions({
  onAction,
  merchantId,
  onCustomerCreated,
  onCustomerUpdated,
  onError,
  onViewOrders
}) {
  const [isAddDialogOpen, setIsAddDialogOpen] = useState42(false);
  const router = useRouter4();
  useEffect23(() => {
    const handleCustomerAction = (event) => {
      const { action, customer } = event.detail;
      if (!customer)
        return;
      switch (action) {
        case "view":
          if (customer.id) {
            router.push(`/customers/${customer.id}`);
          } else {
            console.error("Customer missing id for navigation:", customer);
          }
          break;
        case "edit":
          if (customer.id) {
            router.push(`/customers/${customer.id}/edit`);
          } else {
            console.error("Customer missing id for navigation:", customer);
          }
          break;
        default:
          console.log("Unknown customer action:", action);
      }
    };
    const handleViewOrdersAction = (event) => {
      const { customerId, customer } = event.detail;
      if (customer && customer.id) {
        router.push(`/customers/${customer.id}/orders`);
      } else if (onViewOrders) {
        onViewOrders(customerId);
      }
    };
    window.addEventListener("customer-action", handleCustomerAction);
    window.addEventListener("customer-view-orders", handleViewOrdersAction);
    return () => {
      window.removeEventListener("customer-action", handleCustomerAction);
      window.removeEventListener("customer-view-orders", handleViewOrdersAction);
    };
  }, [router, onViewOrders]);
  const handleAddCustomer = () => {
    setIsAddDialogOpen(true);
  };
  const actions = [
    {
      id: "add-customer",
      label: "Add Customer",
      icon: Plus5,
      onClick: handleAddCustomer,
      variant: "default"
    },
    {
      id: "bulk-actions",
      label: "Bulk Actions",
      icon: Filter2,
      onClick: () => onAction("bulk-actions", 0),
      variant: "outline"
    }
  ];
  return /* @__PURE__ */ jsxs91("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsx107("div", { className: "flex flex-wrap gap-3", children: actions.map((action) => /* @__PURE__ */ jsxs91(
      Button2,
      {
        onClick: action.onClick,
        variant: action.variant,
        className: "flex items-center space-x-2",
        children: [
          /* @__PURE__ */ jsx107(action.icon, { className: "w-4 h-4" }),
          /* @__PURE__ */ jsx107("span", { children: action.label })
        ]
      },
      action.id
    )) }),
    /* @__PURE__ */ jsx107(
      AddCustomerDialog,
      {
        open: isAddDialogOpen,
        onOpenChange: setIsAddDialogOpen,
        onCustomerCreated,
        onError
      }
    )
  ] });
}

// src/components/features/Customers/components/CustomerHeader.tsx
import { Card as Card24, CardContent as CardContent23, CardHeader as CardHeader19, CardTitle as CardTitle19 } from "@rentalshop/ui";
import { jsx as jsx108, jsxs as jsxs92 } from "react/jsx-runtime";
function CustomerHeader({ totalCustomers, stats }) {
  const formatCurrency22 = (amount) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(amount);
  };
  const activeCustomers = stats.topCustomers.length;
  const totalRevenue = stats.topCustomers.reduce((sum, customer) => sum + customer.totalSpent, 0);
  return /* @__PURE__ */ jsx108("div", { className: "space-y-6", children: /* @__PURE__ */ jsxs92("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [
    /* @__PURE__ */ jsxs92(Card24, { children: [
      /* @__PURE__ */ jsx108(CardHeader19, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx108(CardTitle19, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Total Customers" }) }),
      /* @__PURE__ */ jsxs92(CardContent23, { children: [
        /* @__PURE__ */ jsx108("div", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: stats.totalCustomers.toLocaleString() }),
        /* @__PURE__ */ jsx108("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "All time customers" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs92(Card24, { children: [
      /* @__PURE__ */ jsx108(CardHeader19, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx108(CardTitle19, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Active Customers" }) }),
      /* @__PURE__ */ jsxs92(CardContent23, { children: [
        /* @__PURE__ */ jsx108("div", { className: "text-2xl font-bold text-green-600 dark:text-green-400", children: activeCustomers.toLocaleString() }),
        /* @__PURE__ */ jsxs92("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: [
          (activeCustomers / stats.totalCustomers * 100).toFixed(1),
          "% of total"
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs92(Card24, { children: [
      /* @__PURE__ */ jsx108(CardHeader19, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx108(CardTitle19, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "New This Month" }) }),
      /* @__PURE__ */ jsxs92(CardContent23, { children: [
        /* @__PURE__ */ jsx108("div", { className: "text-2xl font-bold text-blue-600 dark:text-blue-400", children: stats.newCustomersThisMonth.toLocaleString() }),
        /* @__PURE__ */ jsx108("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Recent signups" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs92(Card24, { children: [
      /* @__PURE__ */ jsx108(CardHeader19, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: /* @__PURE__ */ jsx108(CardTitle19, { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Total Revenue" }) }),
      /* @__PURE__ */ jsxs92(CardContent23, { children: [
        /* @__PURE__ */ jsx108("div", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: formatCurrency22(totalRevenue) }),
        /* @__PURE__ */ jsx108("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "From all customers" })
      ] })
    ] })
  ] }) });
}

// src/components/features/Customers/components/CustomerSearch.tsx
import { Input as Input13, Button as Button24 } from "@rentalshop/ui";
import { useCustomerTranslations as useCustomerTranslations7, useCommonTranslations as useCommonTranslations14 } from "@rentalshop/hooks";
import { Fragment as Fragment22, jsx as jsx109, jsxs as jsxs93 } from "react/jsx-runtime";
function CustomerSearch({ filters, onFiltersChange, onSearchChange, onClearFilters }) {
  const t2 = useCustomerTranslations7();
  const tc = useCommonTranslations14();
  const handleInputChange = (e2) => {
    onSearchChange(e2.target.value);
  };
  return /* @__PURE__ */ jsxs93(Fragment22, { children: [
    /* @__PURE__ */ jsx109("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs93("div", { className: "relative", children: [
      /* @__PURE__ */ jsx109(
        Input13,
        {
          placeholder: t2("search.placeholder"),
          value: filters.search || "",
          onChange: handleInputChange,
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx109(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx109(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    filters.search && onClearFilters && /* @__PURE__ */ jsx109(
      Button24,
      {
        variant: "outline",
        size: "sm",
        onClick: onClearFilters,
        className: "h-10",
        children: tc("buttons.clear")
      }
    )
  ] });
}

// src/components/features/Customers/components/CustomerStats.tsx
import { Card as Card25, CardContent as CardContent24, CardHeader as CardHeader20, CardTitle as CardTitle20 } from "@rentalshop/ui";
import { Badge as Badge8 } from "@rentalshop/ui";
import { jsx as jsx110, jsxs as jsxs94 } from "react/jsx-runtime";
function CustomerStats({ stats }) {
  const formatCurrency22 = (amount) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(amount);
  };
  const formatDate11 = (dateString) => {
    return new Date(dateString).toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const activeCustomers = stats.topCustomers.length;
  const totalRevenue = stats.topCustomers.reduce((sum, customer) => sum + customer.totalSpent, 0);
  const averageOrderValue = activeCustomers > 0 ? totalRevenue / activeCustomers : 0;
  return /* @__PURE__ */ jsxs94("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs94(Card25, { children: [
      /* @__PURE__ */ jsxs94(CardHeader20, { children: [
        /* @__PURE__ */ jsx110(CardTitle20, { children: "Top Customers" }),
        /* @__PURE__ */ jsx110("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Customers with highest lifetime value" })
      ] }),
      /* @__PURE__ */ jsx110(CardContent24, { children: /* @__PURE__ */ jsxs94("div", { className: "space-y-4", children: [
        stats.topCustomers.map((customer, index) => /* @__PURE__ */ jsxs94("div", { className: "flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs94("div", { className: "flex items-center space-x-3", children: [
            /* @__PURE__ */ jsxs94("div", { className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${index === 0 ? "bg-yellow-100 text-yellow-800" : index === 1 ? "bg-gray-100 text-gray-800" : index === 2 ? "bg-orange-100 text-orange-800" : "bg-blue-100 text-blue-800"}`, children: [
              "#",
              index + 1
            ] }),
            /* @__PURE__ */ jsxs94("div", { children: [
              /* @__PURE__ */ jsx110("div", { className: "font-medium text-gray-900 dark:text-white", children: customer.name }),
              /* @__PURE__ */ jsxs94("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: [
                customer.orderCount,
                " orders"
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs94("div", { className: "text-right", children: [
            /* @__PURE__ */ jsx110("div", { className: "font-medium text-gray-900 dark:text-white", children: formatCurrency22(customer.totalSpent) }),
            /* @__PURE__ */ jsxs94("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: [
              "Customer ID: ",
              customer.id
            ] })
          ] })
        ] }, customer.id)),
        stats.topCustomers.length === 0 && /* @__PURE__ */ jsx110("div", { className: "text-center py-8 text-gray-500 dark:text-gray-400", children: /* @__PURE__ */ jsx110("p", { children: "No customer data available" }) })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs94("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs94(Card25, { children: [
        /* @__PURE__ */ jsx110(CardHeader20, { children: /* @__PURE__ */ jsx110(CardTitle20, { children: "Customer Distribution" }) }),
        /* @__PURE__ */ jsx110(CardContent24, { children: /* @__PURE__ */ jsxs94("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxs94("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx110("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Active" }),
            /* @__PURE__ */ jsxs94("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx110("div", { className: "w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2", children: /* @__PURE__ */ jsx110(
                "div",
                {
                  className: "bg-green-600 h-2 rounded-full",
                  style: { width: `${activeCustomers / stats.totalCustomers * 100}%` }
                }
              ) }),
              /* @__PURE__ */ jsx110("span", { className: "text-sm font-medium", children: activeCustomers })
            ] })
          ] }),
          /* @__PURE__ */ jsxs94("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx110("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Inactive" }),
            /* @__PURE__ */ jsxs94("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx110("div", { className: "w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2", children: /* @__PURE__ */ jsx110(
                "div",
                {
                  className: "bg-gray-600 h-2 rounded-full",
                  style: { width: `${(stats.totalCustomers - activeCustomers) / stats.totalCustomers * 100}%` }
                }
              ) }),
              /* @__PURE__ */ jsx110("span", { className: "text-sm font-medium", children: stats.totalCustomers - activeCustomers })
            ] })
          ] }),
          /* @__PURE__ */ jsxs94("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx110("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "New This Month" }),
            /* @__PURE__ */ jsxs94("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx110("div", { className: "w-20 bg-blue-200 dark:bg-blue-700 rounded-full h-2", children: /* @__PURE__ */ jsx110(
                "div",
                {
                  className: "bg-blue-600 h-2 rounded-full",
                  style: { width: `${stats.newCustomersThisMonth / stats.totalCustomers * 100}%` }
                }
              ) }),
              /* @__PURE__ */ jsx110("span", { className: "text-sm font-medium", children: stats.newCustomersThisMonth })
            ] })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs94(Card25, { children: [
        /* @__PURE__ */ jsx110(CardHeader20, { children: /* @__PURE__ */ jsx110(CardTitle20, { children: "Performance Metrics" }) }),
        /* @__PURE__ */ jsx110(CardContent24, { children: /* @__PURE__ */ jsxs94("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs94("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx110("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Average Order Value" }),
            /* @__PURE__ */ jsx110("span", { className: "font-medium", children: formatCurrency22(averageOrderValue) })
          ] }),
          /* @__PURE__ */ jsxs94("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx110("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "New This Month" }),
            /* @__PURE__ */ jsx110("div", { className: "flex items-center space-x-2", children: /* @__PURE__ */ jsxs94(Badge8, { variant: "outline", className: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200", children: [
              "+",
              stats.newCustomersThisMonth
            ] }) })
          ] }),
          /* @__PURE__ */ jsxs94("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx110("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Total Revenue" }),
            /* @__PURE__ */ jsx110("span", { className: "font-medium text-lg", children: formatCurrency22(totalRevenue) })
          ] })
        ] }) })
      ] })
    ] })
  ] });
}

// src/components/features/Customers/components/CustomerOrdersDialog.tsx
import { useState as useState43, useEffect as useEffect24 } from "react";
import { Dialog as Dialog5, DialogContent as DialogContent5, DialogHeader as DialogHeader5, DialogTitle as DialogTitle5, DialogDescription as DialogDescription3 } from "@rentalshop/ui";
import { Card as Card26, CardContent as CardContent25, CardHeader as CardHeader21, CardTitle as CardTitle21 } from "@rentalshop/ui";
import { Badge as Badge9 } from "@rentalshop/ui";
import { Package as Package10, Calendar as Calendar8, DollarSign as DollarSign7, User as User8, MapPin as MapPin5, Clock as Clock4 } from "lucide-react";
import { ORDER_STATUS_COLORS as ORDER_STATUS_COLORS3 } from "@rentalshop/constants";
import { jsx as jsx111, jsxs as jsxs95 } from "react/jsx-runtime";
var CustomerOrdersDialog = ({
  open,
  onOpenChange,
  customer
}) => {
  const [orders, setOrders] = useState43([]);
  const [loading, setLoading] = useState43(false);
  const [error2, setError] = useState43(null);
  useEffect24(() => {
    if (open && customer) {
      fetchCustomerOrders(customer.id);
    }
  }, [open, customer]);
  const fetchCustomerOrders = async (customerId) => {
    setLoading(true);
    setError(null);
    try {
      const mockOrders = [
        {
          id: 1,
          orderNumber: "1",
          orderType: "RENT",
          status: "PICKUPED",
          totalAmount: 150,
          depositAmount: 50,
          pickupPlanAt: /* @__PURE__ */ new Date("2024-01-15"),
          returnPlanAt: /* @__PURE__ */ new Date("2024-01-20"),
          pickedUpAt: /* @__PURE__ */ new Date("2024-01-15"),
          returnedAt: void 0,
          createdAt: /* @__PURE__ */ new Date("2024-01-10"),
          outletName: "Downtown Store"
        },
        {
          id: 2,
          orderNumber: "2",
          orderType: "SALE",
          status: "COMPLETED",
          totalAmount: 299.99,
          depositAmount: 0,
          pickupPlanAt: void 0,
          returnPlanAt: void 0,
          pickedUpAt: /* @__PURE__ */ new Date("2024-01-05"),
          returnedAt: void 0,
          createdAt: /* @__PURE__ */ new Date("2024-01-01"),
          outletName: "Downtown Store"
        },
        {
          id: 3,
          orderNumber: "3",
          orderType: "RENT",
          status: "PICKUPED",
          totalAmount: 200,
          depositAmount: 75,
          pickupPlanAt: /* @__PURE__ */ new Date("2024-01-08"),
          returnPlanAt: /* @__PURE__ */ new Date("2024-01-12"),
          pickedUpAt: /* @__PURE__ */ new Date("2024-01-08"),
          returnedAt: void 0,
          createdAt: /* @__PURE__ */ new Date("2024-01-05"),
          outletName: "Downtown Store"
        }
      ];
      setOrders(mockOrders);
    } catch (err) {
      setError("Failed to fetch customer orders");
      console.error("Error fetching customer orders:", err);
    } finally {
      setLoading(false);
    }
  };
  const getStatusBadge = (status) => {
    const colors = ORDER_STATUS_COLORS3[status] || "bg-gray-100 text-gray-800";
    return /* @__PURE__ */ jsx111(Badge9, { variant: "outline", className: colors, children: status });
  };
  const getOrderTypeBadge = (orderType) => {
    const variants = {
      RENT: "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",
      SALE: "bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",
      RENT_TO_OWN: "bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"
    };
    return /* @__PURE__ */ jsx111(Badge9, { variant: "outline", className: variants[orderType] || variants.RENT, children: orderType });
  };
  const formatCurrency22 = (amount) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 2
    }).format(amount);
  };
  const formatDate11 = (date2) => {
    if (!date2)
      return "N/A";
    return date2.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const getDaysOverdue = (returnDate) => {
    if (!returnDate)
      return 0;
    const today = /* @__PURE__ */ new Date();
    const diffTime = today.getTime() - returnDate.getTime();
    const diffDays = Math.ceil(diffTime / (1e3 * 60 * 60 * 24));
    return diffDays > 0 ? diffDays : 0;
  };
  if (!customer)
    return null;
  return /* @__PURE__ */ jsx111(Dialog5, { open, onOpenChange, children: /* @__PURE__ */ jsxs95(DialogContent5, { className: "max-w-6xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsx111(DialogHeader5, { children: /* @__PURE__ */ jsxs95("div", { children: [
      /* @__PURE__ */ jsx111(DialogTitle5, { className: "text-xl font-semibold", children: "Customer Orders" }),
      /* @__PURE__ */ jsxs95(DialogDescription3, { className: "text-sm text-gray-600 mt-1", children: [
        "View all orders for ",
        customer.firstName,
        " ",
        customer.lastName
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs95("div", { className: "mt-6", children: [
      /* @__PURE__ */ jsxs95(Card26, { className: "mb-6", children: [
        /* @__PURE__ */ jsx111(CardHeader21, { className: "pb-3", children: /* @__PURE__ */ jsx111(CardTitle21, { className: "text-lg", children: "Customer Information" }) }),
        /* @__PURE__ */ jsx111(CardContent25, { children: /* @__PURE__ */ jsxs95("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
          /* @__PURE__ */ jsxs95("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsx111(User8, { className: "w-5 h-5 text-gray-500" }),
            /* @__PURE__ */ jsxs95("div", { children: [
              /* @__PURE__ */ jsxs95("p", { className: "font-medium", children: [
                customer.firstName,
                " ",
                customer.lastName
              ] }),
              /* @__PURE__ */ jsx111("p", { className: "text-sm text-gray-500", children: customer.email })
            ] })
          ] }),
          /* @__PURE__ */ jsxs95("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsx111(Package10, { className: "w-5 h-5 text-gray-500" }),
            /* @__PURE__ */ jsxs95("div", { children: [
              /* @__PURE__ */ jsxs95("p", { className: "font-medium", children: [
                orders.length,
                " Orders"
              ] }),
              /* @__PURE__ */ jsx111("p", { className: "text-sm text-gray-500", children: "Total Orders" })
            ] })
          ] }),
          /* @__PURE__ */ jsxs95("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsx111(DollarSign7, { className: "w-5 h-5 text-gray-500" }),
            /* @__PURE__ */ jsxs95("div", { children: [
              /* @__PURE__ */ jsx111("p", { className: "font-medium", children: formatCurrency22(orders.reduce((sum, order) => sum + order.totalAmount, 0)) }),
              /* @__PURE__ */ jsx111("p", { className: "text-sm text-gray-500", children: "Total Spent" })
            ] })
          ] })
        ] }) })
      ] }),
      loading ? /* @__PURE__ */ jsx111(Card26, { children: /* @__PURE__ */ jsx111(CardContent25, { className: "text-center py-12", children: /* @__PURE__ */ jsxs95("div", { className: "text-gray-500", children: [
        /* @__PURE__ */ jsx111(Package10, { className: "w-8 h-8 mx-auto mb-2 animate-spin" }),
        /* @__PURE__ */ jsx111("p", { children: "Loading orders..." })
      ] }) }) }) : error2 ? /* @__PURE__ */ jsx111(Card26, { children: /* @__PURE__ */ jsx111(CardContent25, { className: "text-center py-12", children: /* @__PURE__ */ jsxs95("div", { className: "text-red-500", children: [
        /* @__PURE__ */ jsx111(Package10, { className: "w-8 h-8 mx-auto mb-2" }),
        /* @__PURE__ */ jsx111("p", { children: error2 })
      ] }) }) }) : orders.length === 0 ? /* @__PURE__ */ jsx111(Card26, { children: /* @__PURE__ */ jsx111(CardContent25, { className: "text-center py-12", children: /* @__PURE__ */ jsxs95("div", { className: "text-gray-500", children: [
        /* @__PURE__ */ jsx111(Package10, { className: "w-8 h-8 mx-auto mb-2" }),
        /* @__PURE__ */ jsx111("p", { children: "No orders found for this customer" })
      ] }) }) }) : /* @__PURE__ */ jsx111("div", { className: "space-y-4", children: orders.map((order) => /* @__PURE__ */ jsx111(Card26, { className: "hover:shadow-md transition-shadow", children: /* @__PURE__ */ jsx111(CardContent25, { className: "p-4", children: /* @__PURE__ */ jsxs95("div", { className: "flex items-start justify-between", children: [
        /* @__PURE__ */ jsxs95("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsxs95("div", { className: "flex items-center gap-3 mb-3", children: [
            /* @__PURE__ */ jsxs95("h3", { className: "font-semibold text-lg", children: [
              "#",
              order.orderNumber
            ] }),
            getStatusBadge(order.status),
            getOrderTypeBadge(order.orderType),
            order.status === "PICKUPED" && order.returnPlanAt && /* @__PURE__ */ new Date() > order.returnPlanAt && /* @__PURE__ */ jsxs95(Badge9, { variant: "outline", className: "bg-red-50 text-red-700 border-red-200", children: [
              getDaysOverdue(order.returnPlanAt),
              " days overdue"
            ] })
          ] }),
          /* @__PURE__ */ jsxs95("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm", children: [
            /* @__PURE__ */ jsxs95("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx111(MapPin5, { className: "w-4 h-4 text-gray-500" }),
              /* @__PURE__ */ jsx111("span", { className: "text-gray-600", children: order.outletName })
            ] }),
            /* @__PURE__ */ jsxs95("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx111(Calendar8, { className: "w-4 h-4 text-gray-500" }),
              /* @__PURE__ */ jsxs95("span", { className: "text-gray-600", children: [
                "Created: ",
                formatDate11(order.createdAt)
              ] })
            ] }),
            order.pickupPlanAt && /* @__PURE__ */ jsxs95("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx111(Package10, { className: "w-4 h-4 text-gray-500" }),
              /* @__PURE__ */ jsxs95("span", { className: "text-gray-600", children: [
                "Pickup: ",
                formatDate11(order.pickupPlanAt)
              ] })
            ] }),
            order.returnPlanAt && /* @__PURE__ */ jsxs95("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx111(Clock4, { className: "w-4 h-4 text-gray-500" }),
              /* @__PURE__ */ jsxs95("span", { className: "text-gray-600", children: [
                "Return: ",
                formatDate11(order.returnPlanAt)
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs95("div", { className: "text-right ml-4", children: [
          /* @__PURE__ */ jsx111("div", { className: "text-lg font-semibold text-gray-900", children: formatCurrency22(order.totalAmount) }),
          order.depositAmount > 0 && /* @__PURE__ */ jsxs95("div", { className: "text-sm text-gray-500", children: [
            "Deposit: ",
            formatCurrency22(order.depositAmount)
          ] })
        ] })
      ] }) }) }, order.id)) })
    ] })
  ] }) });
};

// src/components/features/Customers/components/CustomersLoading.tsx
import {
  TableSkeleton as TableSkeleton3,
  SearchSkeleton as SearchSkeleton3,
  PaginationSkeleton as PaginationSkeleton3,
  StatsSkeleton as StatsSkeleton3
} from "@rentalshop/ui";
import { jsx as jsx112, jsxs as jsxs96 } from "react/jsx-runtime";
function CustomersLoading() {
  return /* @__PURE__ */ jsxs96("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx112(StatsSkeleton3, {}),
    /* @__PURE__ */ jsx112(SearchSkeleton3, {}),
    /* @__PURE__ */ jsx112(TableSkeleton3, { rows: 8, columns: 5 }),
    /* @__PURE__ */ jsx112(PaginationSkeleton3, {})
  ] });
}
function CustomerDetailLoading() {
  return /* @__PURE__ */ jsxs96("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs96("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs96("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx112("div", { className: "h-8 w-48 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx112("div", { className: "h-4 w-32 bg-gray-200 rounded animate-pulse" })
      ] }),
      /* @__PURE__ */ jsxs96("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx112("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx112("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs96("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs96("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx112("div", { className: "h-6 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx112("div", { className: "space-y-2", children: Array.from({ length: 5 }).map((_, i) => /* @__PURE__ */ jsx112("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }, i)) })
      ] }),
      /* @__PURE__ */ jsxs96("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx112("div", { className: "h-6 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx112("div", { className: "space-y-2", children: Array.from({ length: 4 }).map((_, i) => /* @__PURE__ */ jsx112("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }, i)) })
      ] })
    ] }),
    /* @__PURE__ */ jsxs96("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx112("div", { className: "h-6 w-32 bg-gray-200 rounded animate-pulse" }),
      /* @__PURE__ */ jsx112(TableSkeleton3, { rows: 3, columns: 4 })
    ] })
  ] });
}

// src/components/features/Customers/Customers.tsx
import {
  User as UserIcon,
  Download as Download3
} from "lucide-react";
import { useUserRole as useUserRole3 } from "@rentalshop/hooks";
import { jsx as jsx113, jsxs as jsxs97 } from "react/jsx-runtime";
var Customers = ({
  // Data props
  data,
  filters = {},
  onFiltersChange = () => {
  },
  onSearchChange = () => {
  },
  onClearFilters = () => {
  },
  onCustomerAction = () => {
  },
  onPageChange = () => {
  },
  onSort = () => {
  },
  // Display props
  title = "Customer Management",
  subtitle = "Manage customers in the system",
  showExportButton = false,
  showAddButton = false,
  addButtonText = "Add Customer",
  exportButtonText = "Export Customers",
  showStats = false,
  currentUser,
  onExport,
  className = ""
}) => {
  const { canManageUsers } = useUserRole3(currentUser);
  const handleExport = () => {
    if (onExport) {
      onExport();
    } else {
      console.log("Export functionality not implemented");
    }
  };
  const handleAddCustomer = () => {
    console.log("Add customer functionality should be implemented in page");
  };
  const customers = data?.customers || [];
  const totalCustomers = data?.total || 0;
  const currentPage = data?.page || 1;
  const totalPages = data?.totalPages || 1;
  const limit = data?.limit || 25;
  const memoizedOnFiltersChange = React64.useCallback(onFiltersChange, [onFiltersChange]);
  const memoizedOnSearchChange = React64.useCallback(onSearchChange, [onSearchChange]);
  const memoizedOnClearFilters = React64.useCallback(onClearFilters, [onClearFilters]);
  const memoizedOnCustomerAction = React64.useCallback(onCustomerAction, [onCustomerAction]);
  const memoizedOnPageChange = React64.useCallback(onPageChange, [onPageChange]);
  const memoizedOnSort = React64.useCallback(onSort, [onSort]);
  return /* @__PURE__ */ jsxs97("div", { className: `flex flex-col h-full ${className}`, children: [
    /* @__PURE__ */ jsxs97("div", { className: "flex-shrink-0 space-y-4", children: [
      /* @__PURE__ */ jsxs97(
        CustomerPageHeader,
        {
          title,
          subtitle,
          children: [
            showAddButton && canManageUsers && /* @__PURE__ */ jsxs97(
              Button25,
              {
                onClick: handleAddCustomer,
                className: "flex items-center space-x-2",
                children: [
                  /* @__PURE__ */ jsx113(UserIcon, { className: "w-4 h-4" }),
                  /* @__PURE__ */ jsx113("span", { children: addButtonText })
                ]
              }
            ),
            showExportButton && /* @__PURE__ */ jsxs97(
              Button25,
              {
                variant: "outline",
                onClick: handleExport,
                className: "flex items-center space-x-2",
                children: [
                  /* @__PURE__ */ jsx113(Download3, { className: "w-4 h-4" }),
                  /* @__PURE__ */ jsx113("span", { children: exportButtonText })
                ]
              }
            )
          ]
        }
      ),
      /* @__PURE__ */ jsx113(Card27, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx113(CardContent26, { className: "pt-4 pb-4", children: /* @__PURE__ */ jsx113("div", { className: "flex flex-wrap items-center gap-3", children: /* @__PURE__ */ jsx113(
        CustomerSearch,
        {
          filters,
          onFiltersChange: memoizedOnFiltersChange,
          onSearchChange: memoizedOnSearchChange,
          onClearFilters: memoizedOnClearFilters
        }
      ) }) }) })
    ] }),
    /* @__PURE__ */ jsx113("div", { className: "flex-1 min-h-0 mt-4", children: customers.length > 0 ? /* @__PURE__ */ jsx113(
      CustomerTable,
      {
        customers,
        onCustomerAction: memoizedOnCustomerAction,
        sortBy: filters.sortBy || "createdAt",
        sortOrder: filters.sortOrder || "desc",
        onSort: memoizedOnSort
      }
    ) : /* @__PURE__ */ jsx113(
      EmptyState3,
      {
        icon: UserIcon,
        title: "No customers found",
        description: filters.search || filters.q ? "Try adjusting your search" : "Get started by adding your first customer",
        actionLabel: canManageUsers ? addButtonText : void 0,
        onAction: canManageUsers ? handleAddCustomer : void 0
      }
    ) }),
    customers.length > 0 && totalCustomers > limit && /* @__PURE__ */ jsx113("div", { className: "flex-shrink-0 py-4", children: /* @__PURE__ */ jsx113(
      Pagination5,
      {
        currentPage,
        totalPages,
        total: totalCustomers,
        limit,
        onPageChange: memoizedOnPageChange,
        itemName: "customers"
      }
    ) })
  ] });
};
var Customers_default = Customers;

// src/components/features/Orders/Orders.tsx
import React65 from "react";
import { Pagination as Pagination6, Card as Card28, CardContent as CardContent27 } from "@rentalshop/ui";
import { AlertCircle as AlertCircle8 } from "lucide-react";
import { useOrderTranslations as useOrderTranslations10 } from "@rentalshop/hooks";
import { jsx as jsx114, jsxs as jsxs98 } from "react/jsx-runtime";
var Orders = React65.memo(function Orders2({
  data,
  filters,
  onFiltersChange,
  onSearchChange,
  onClearFilters,
  onOrderAction,
  onPageChange,
  onSort,
  onQuickFilterChange,
  onDateRangeChange,
  activeQuickFilter,
  showStats = true,
  showQuickFilters = true,
  filterStyle = "dropdown"
  // ⭐ Default to dropdown (modern pattern)
}) {
  const t2 = useOrderTranslations10();
  React65.useEffect(() => {
    console.log("\u{1F4CA} Orders Component: received new data", {
      ordersCount: data.orders.length,
      searchTerm: filters.search,
      statusFilter: filters.status,
      firstOrder: data.orders[0]?.orderNumber
    });
  }, [data.orders, filters.search, filters.status]);
  const memoizedOnFiltersChange = React65.useCallback(onFiltersChange, [onFiltersChange]);
  const memoizedOnSearchChange = React65.useCallback(onSearchChange, [onSearchChange]);
  const memoizedOnClearFilters = React65.useCallback(onClearFilters || (() => {
  }), [onClearFilters]);
  const memoizedOnOrderAction = React65.useCallback(onOrderAction, [onOrderAction]);
  const memoizedOnPageChange = React65.useCallback(onPageChange, [onPageChange]);
  const memoizedOnSort = React65.useCallback(onSort || (() => {
  }), [onSort]);
  const memoizedOnQuickFilterChange = React65.useCallback(onQuickFilterChange || (() => {
  }), [onQuickFilterChange]);
  const memoizedOnDateRangeChange = React65.useCallback(onDateRangeChange || (() => {
  }), [onDateRangeChange]);
  const showLargeDatasetWarning = activeQuickFilter === "all" && data.total > 1e4;
  return /* @__PURE__ */ jsxs98("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ jsxs98("div", { className: "flex-shrink-0 space-y-4", children: [
      /* @__PURE__ */ jsx114(
        OrderHeader,
        {
          totalOrders: data.total,
          stats: data.stats,
          showStats
        }
      ),
      /* @__PURE__ */ jsx114(Card28, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx114(CardContent27, { className: "pt-4 pb-4", children: /* @__PURE__ */ jsxs98("div", { className: "flex flex-wrap items-center gap-3", children: [
        showQuickFilters && filterStyle === "dropdown" && /* @__PURE__ */ jsx114(
          OrderDateRangeFilter,
          {
            activeRange: activeQuickFilter,
            totalOrders: data.total,
            filteredCount: filters.startDate || filters.endDate ? data.total : void 0,
            onRangeChange: memoizedOnDateRangeChange,
            showWarning: showLargeDatasetWarning
          }
        ),
        /* @__PURE__ */ jsx114(
          OrderFilters,
          {
            filters,
            onFiltersChange: memoizedOnFiltersChange,
            onSearchChange: memoizedOnSearchChange,
            onClearFilters: memoizedOnClearFilters
          }
        )
      ] }) }) }),
      showLargeDatasetWarning && /* @__PURE__ */ jsxs98("div", { className: "flex items-center gap-2 px-3 py-2 rounded-lg bg-warning-bg border border-warning-border", children: [
        /* @__PURE__ */ jsx114(AlertCircle8, { className: "w-4 h-4 text-warning-text flex-shrink-0" }),
        /* @__PURE__ */ jsxs98("span", { className: "text-sm text-warning-text font-medium", children: [
          t2("messages.viewingAllOrders"),
          " ",
          data.total.toLocaleString(),
          " ",
          t2("messages.mayBeSlow")
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsx114("div", { className: "flex-1 min-h-0 mt-4", children: /* @__PURE__ */ jsx114(
      OrderTable,
      {
        orders: data.orders,
        onOrderAction: memoizedOnOrderAction,
        sortBy: filters.sortBy,
        sortOrder: filters.sortOrder,
        onSort: memoizedOnSort
      }
    ) }),
    data.total > 0 && data.total > (data.limit || 20) && /* @__PURE__ */ jsx114("div", { className: "flex-shrink-0 py-4", children: /* @__PURE__ */ jsx114(
      Pagination6,
      {
        currentPage: data.currentPage,
        totalPages: data.totalPages,
        total: data.total,
        limit: data.limit || 20,
        onPageChange: memoizedOnPageChange,
        itemName: "orders"
      }
    ) })
  ] });
});
var Orders_default = Orders;

// src/components/features/Orders/RentalPeriodSelector.tsx
import { useState as useState44, useEffect as useEffect25 } from "react";
import { Button as Button26, Label as Label5, DateRangePicker as DateRangePicker3 } from "@rentalshop/ui";
import { PricingResolver, PricingValidator } from "@rentalshop/utils";
import { useOrderTranslations as useOrderTranslations11 } from "@rentalshop/hooks";
import { jsx as jsx115, jsxs as jsxs99 } from "react/jsx-runtime";
var RentalPeriodSelector2 = ({
  product,
  merchant,
  onPeriodChange,
  onPriceChange,
  initialStartDate,
  initialEndDate
}) => {
  const t2 = useOrderTranslations11();
  const [rentalStartAt, setRentalStartAt] = useState44(
    () => initialStartDate ? new Date(initialStartDate) : null
  );
  const [rentalEndAt, setRentalEndAt] = useState44(
    () => initialEndDate ? new Date(initialEndDate) : null
  );
  const [validationResult, setValidationResult] = useState44(null);
  const [lastNotifiedDates, setLastNotifiedDates] = useState44("");
  const config = PricingResolver.getEffectivePricingConfig(product, merchant);
  const [pickupHour, setPickupHour] = useState44(() => {
    if (initialStartDate) {
      return new Date(initialStartDate).getHours();
    }
    return 9;
  });
  const [returnHour, setReturnHour] = useState44(() => {
    if (initialEndDate) {
      return new Date(initialEndDate).getHours();
    }
    return 17;
  });
  console.log("\u{1F50D} RentalPeriodSelector rendered:", {
    pricingType: config.pricingType,
    productName: product.name,
    merchantBusinessType: merchant.businessType
  });
  useEffect25(() => {
    if (rentalStartAt && rentalEndAt) {
      const currentDatesKey = `${rentalStartAt.toISOString()}_${rentalEndAt.toISOString()}`;
      if (currentDatesKey !== lastNotifiedDates) {
        console.log("\u{1F50D} RentalPeriodSelector dates changed:", {
          rentalStartAt,
          rentalEndAt,
          currentDatesKey,
          lastNotifiedDates
        });
        setLastNotifiedDates(currentDatesKey);
        onPeriodChange(rentalStartAt, rentalEndAt);
        const validation = PricingValidator.validateRentalPeriod(
          product,
          merchant,
          rentalStartAt,
          rentalEndAt,
          1
        );
        setValidationResult(validation);
        console.log("\u{1F50D} Validation result:", validation);
        if (validation.isValid && onPriceChange) {
          try {
            const pricing = PricingResolver.calculatePrice(
              product,
              merchant,
              rentalStartAt,
              rentalEndAt,
              1
            );
            onPriceChange(pricing);
          } catch (error2) {
            console.error("Price calculation error:", error2);
          }
        }
      }
    }
  }, [rentalStartAt, rentalEndAt]);
  const setQuickDuration = (duration, unit) => {
    const now = /* @__PURE__ */ new Date();
    let endTime;
    switch (unit) {
      case "hour":
        endTime = new Date(now.getTime() + duration * 60 * 60 * 1e3);
        break;
      case "day":
        endTime = new Date(now.getTime() + duration * 24 * 60 * 60 * 1e3);
        break;
      case "week":
        endTime = new Date(now.getTime() + duration * 7 * 24 * 60 * 60 * 1e3);
        break;
      default:
        endTime = now;
    }
    setRentalStartAt(now);
    setRentalEndAt(endTime);
  };
  const calculateDuration = (start, end, pricingType) => {
    const durationMs = end.getTime() - start.getTime();
    switch (pricingType) {
      case "HOURLY":
        const hours = Math.ceil(durationMs / (1e3 * 60 * 60));
        return `${hours} hour${hours > 1 ? "s" : ""}`;
      case "DAILY":
        const days = Math.ceil(durationMs / (1e3 * 60 * 60 * 24));
        return `${days} day${days > 1 ? "s" : ""}`;
      case "WEEKLY":
        const weeks = Math.ceil(durationMs / (1e3 * 60 * 60 * 24 * 7));
        return `${weeks} week${weeks > 1 ? "s" : ""}`;
      default:
        return "N/A";
    }
  };
  const calculateTotalPrice = () => {
    if (!rentalStartAt || !rentalEndAt)
      return 0;
    try {
      const pricing = PricingResolver.calculatePrice(
        product,
        merchant,
        rentalStartAt,
        rentalEndAt,
        1
      );
      return pricing.totalPrice;
    } catch (error2) {
      return 0;
    }
  };
  const renderPricingUI = () => {
    switch (config.pricingType) {
      case "HOURLY":
        return renderHourlyPricing();
      case "DAILY":
        return renderDailyPricing();
      case "WEEKLY":
        return renderWeeklyPricing();
      case "FIXED":
      default:
        return renderFixedPricing();
    }
  };
  const renderCalendarUI = (label, quickButtons) => /* @__PURE__ */ jsxs99("div", { className: "space-y-3", children: [
    /* @__PURE__ */ jsxs99(Label5, { className: "text-sm font-medium", children: [
      label,
      " ",
      /* @__PURE__ */ jsx115("span", { className: "text-red-500", children: "*" })
    ] }),
    /* @__PURE__ */ jsx115(
      DateRangePicker3,
      {
        value: {
          from: rentalStartAt || void 0,
          to: rentalEndAt || void 0
        },
        onChange: (range) => {
          if (range?.from)
            setRentalStartAt(range.from);
          if (range?.to)
            setRentalEndAt(range.to);
        },
        placeholder: "Select pickup and return dates",
        minDate: /* @__PURE__ */ new Date(),
        showPresets: true
      }
    ),
    quickButtons && quickButtons.length > 0 && /* @__PURE__ */ jsx115("div", { className: "flex gap-2 flex-wrap", children: quickButtons.map((btn) => /* @__PURE__ */ jsx115(
      Button26,
      {
        type: "button",
        variant: "outline",
        size: "sm",
        onClick: () => setQuickDuration(btn.value, btn.unit),
        children: btn.label
      },
      btn.value
    )) })
  ] });
  const renderFixedPricing = () => renderCalendarUI("Rental Period");
  const renderHourlyPricing = () => {
    const updateHourlyDates = (pickup, returnH) => {
      if (rentalStartAt) {
        const newStart = new Date(rentalStartAt);
        newStart.setHours(pickup, 0, 0, 0);
        setRentalStartAt(newStart);
        const newEnd = new Date(rentalStartAt);
        newEnd.setHours(returnH, 0, 0, 0);
        setRentalEndAt(newEnd);
      }
    };
    return /* @__PURE__ */ jsxs99("div", { className: "space-y-3", children: [
      /* @__PURE__ */ jsxs99(Label5, { className: "text-sm font-medium", children: [
        "Rental Period (Hourly) ",
        /* @__PURE__ */ jsx115("span", { className: "text-red-500", children: "*" })
      ] }),
      /* @__PURE__ */ jsx115("div", { className: "space-y-2", children: /* @__PURE__ */ jsx115(
        DateRangePicker3,
        {
          value: {
            from: rentalStartAt || void 0,
            to: rentalStartAt || void 0
            // Same day for hourly
          },
          onChange: (range) => {
            if (range?.from) {
              const selectedDate = new Date(range.from);
              const newStart = new Date(selectedDate);
              newStart.setHours(pickupHour, 0, 0, 0);
              setRentalStartAt(newStart);
              const newEnd = new Date(selectedDate);
              newEnd.setHours(returnHour, 0, 0, 0);
              setRentalEndAt(newEnd);
            }
          },
          placeholder: "Select rental date",
          minDate: /* @__PURE__ */ new Date(),
          showPresets: false
        }
      ) }),
      /* @__PURE__ */ jsxs99("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx115(Label5, { className: "text-sm font-medium text-gray-600", children: "Pickup Hour" }),
        /* @__PURE__ */ jsx115("div", { className: "grid grid-cols-8 gap-1", children: Array.from({ length: 24 }, (_, i) => i).map((hour) => /* @__PURE__ */ jsx115(
          Button26,
          {
            type: "button",
            variant: pickupHour === hour ? "default" : "outline",
            size: "sm",
            onClick: () => {
              setPickupHour(hour);
              updateHourlyDates(hour, returnHour);
            },
            disabled: !rentalStartAt,
            className: "text-xs px-1",
            children: hour.toString().padStart(2, "0")
          },
          hour
        )) })
      ] }),
      /* @__PURE__ */ jsxs99("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx115(Label5, { className: "text-sm font-medium text-gray-600", children: "Return Hour" }),
        /* @__PURE__ */ jsx115("div", { className: "grid grid-cols-8 gap-1", children: Array.from({ length: 24 }, (_, i) => i).map((hour) => /* @__PURE__ */ jsx115(
          Button26,
          {
            type: "button",
            variant: returnHour === hour ? "default" : "outline",
            size: "sm",
            onClick: () => {
              setReturnHour(hour);
              updateHourlyDates(pickupHour, hour);
            },
            disabled: !rentalStartAt || hour <= pickupHour,
            className: "text-xs px-1",
            children: hour.toString().padStart(2, "0")
          },
          hour
        )) })
      ] }),
      rentalStartAt && rentalEndAt && /* @__PURE__ */ jsx115("div", { className: "p-3 bg-blue-50 rounded-lg border border-blue-200 text-sm", children: /* @__PURE__ */ jsxs99("div", { className: "flex justify-between", children: [
        /* @__PURE__ */ jsx115("span", { className: "text-gray-600", children: "Duration:" }),
        /* @__PURE__ */ jsxs99("span", { className: "font-medium text-blue-700", children: [
          Math.ceil((rentalEndAt.getTime() - rentalStartAt.getTime()) / (1e3 * 60 * 60)),
          " hours"
        ] })
      ] }) })
    ] });
  };
  const renderDailyPricing = () => renderCalendarUI(
    t2("messages.rentalPeriodDaily"),
    []
    // Bỏ suggest dates theo yêu cầu
  );
  const renderWeeklyPricing = () => renderCalendarUI(
    t2("messages.rentalPeriodWeekly"),
    []
    // Bỏ suggest dates theo yêu cầu
  );
  return renderPricingUI();
};

// src/components/features/Merchants/Merchants.tsx
import React82 from "react";

// src/components/features/Merchants/components/MerchantHeader.tsx
import { Users as Users4, Building2 as Building23, TrendingUp as TrendingUp3 } from "lucide-react";
import { jsx as jsx116, jsxs as jsxs100 } from "react/jsx-runtime";
function MerchantHeader({ merchant, stats }) {
  return /* @__PURE__ */ jsxs100("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [
    /* @__PURE__ */ jsx116(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx116(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs100("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx116("p", { className: "text-xs font-medium text-gray-600 dark:text-gray-400", children: "Merchant" }),
      /* @__PURE__ */ jsx116("p", { className: "text-base font-bold text-gray-900 dark:text-white", children: merchant.name }),
      /* @__PURE__ */ jsx116("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: merchant.email })
    ] }) }) }),
    /* @__PURE__ */ jsx116(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx116(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs100("div", { className: "text-center", children: [
      /* @__PURE__ */ jsx116(Building23, { className: "w-6 h-6 text-blue-600 mx-auto mb-2" }),
      /* @__PURE__ */ jsx116("p", { className: "text-xs font-medium text-gray-600 dark:text-gray-400", children: "Total Outlets" }),
      /* @__PURE__ */ jsx116("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: stats.totalOutlets }),
      /* @__PURE__ */ jsx116("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Business locations" })
    ] }) }) }),
    /* @__PURE__ */ jsx116(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx116(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs100("div", { className: "text-center", children: [
      /* @__PURE__ */ jsx116(Users4, { className: "w-6 h-6 text-purple-600 mx-auto mb-2" }),
      /* @__PURE__ */ jsx116("p", { className: "text-xs font-medium text-gray-600 dark:text-gray-400", children: "Total Users" }),
      /* @__PURE__ */ jsx116("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: stats.totalUsers }),
      /* @__PURE__ */ jsx116("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Staff accounts" })
    ] }) }) }),
    /* @__PURE__ */ jsx116(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx116(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs100("div", { className: "text-center", children: [
      /* @__PURE__ */ jsx116(TrendingUp3, { className: "w-6 h-6 text-green-600 mx-auto mb-2" }),
      /* @__PURE__ */ jsx116("p", { className: "text-xs font-medium text-gray-600 dark:text-gray-400", children: "Total Revenue" }),
      /* @__PURE__ */ jsxs100("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: [
        "$",
        (stats.totalRevenue || 0).toLocaleString()
      ] }),
      /* @__PURE__ */ jsx116("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Lifetime earnings" })
    ] }) }) })
  ] });
}

// src/components/features/Merchants/components/MerchantListHeader.tsx
import { jsx as jsx117, jsxs as jsxs101 } from "react/jsx-runtime";
function MerchantListHeader({ stats }) {
  return /* @__PURE__ */ jsxs101("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [
    /* @__PURE__ */ jsx117(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx117(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs101("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx117("p", { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Total Merchants" }),
      /* @__PURE__ */ jsx117("p", { className: "text-3xl font-bold text-gray-900 dark:text-white", children: stats.totalMerchants }),
      /* @__PURE__ */ jsx117("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "All registered merchants" })
    ] }) }) }),
    /* @__PURE__ */ jsx117(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx117(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs101("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx117("p", { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Active Merchants" }),
      /* @__PURE__ */ jsx117("p", { className: "text-3xl font-bold text-gray-900 dark:text-white", children: stats.activeMerchants }),
      /* @__PURE__ */ jsx117("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Currently active accounts" })
    ] }) }) }),
    /* @__PURE__ */ jsx117(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx117(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs101("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx117("p", { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Trial Accounts" }),
      /* @__PURE__ */ jsx117("p", { className: "text-3xl font-bold text-gray-900 dark:text-white", children: stats.trialAccounts }),
      /* @__PURE__ */ jsx117("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Free trial users" })
    ] }) }) }),
    /* @__PURE__ */ jsx117(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx117(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs101("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx117("p", { className: "text-sm font-medium text-gray-600 dark:text-gray-400", children: "Total Revenue" }),
      /* @__PURE__ */ jsxs101("p", { className: "text-3xl font-bold text-gray-900 dark:text-white", children: [
        "$",
        (stats.totalRevenue || 0).toLocaleString()
      ] }),
      /* @__PURE__ */ jsx117("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Lifetime earnings" })
    ] }) }) })
  ] });
}
var MerchantListHeader_default = MerchantListHeader;

// src/components/features/Merchants/components/MerchantFilters.tsx
import { Fragment as Fragment23, jsx as jsx118, jsxs as jsxs102 } from "react/jsx-runtime";
function MerchantFilters({
  filters,
  onFiltersChange,
  onSearchChange,
  onClearFilters
}) {
  const handleSearchChange = (e2) => {
    onSearchChange(e2.target.value);
  };
  const handleStatusChange = (value) => {
    onFiltersChange({ ...filters, status: value });
  };
  const handlePlanChange = (value) => {
    onFiltersChange({ ...filters, plan: value });
  };
  return /* @__PURE__ */ jsxs102(Fragment23, { children: [
    /* @__PURE__ */ jsx118("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs102("div", { className: "relative", children: [
      /* @__PURE__ */ jsx118(
        Input,
        {
          type: "text",
          placeholder: "Search merchants...",
          value: filters.search,
          onChange: handleSearchChange,
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx118(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx118(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs102(Select, { value: filters.status, onValueChange: handleStatusChange, children: [
      /* @__PURE__ */ jsx118(SelectTrigger, { className: "w-[150px] h-10", children: /* @__PURE__ */ jsx118(SelectValue, { placeholder: "Status" }) }),
      /* @__PURE__ */ jsxs102(SelectContent, { children: [
        /* @__PURE__ */ jsx118(SelectItem, { value: "all", children: "All Status" }),
        /* @__PURE__ */ jsx118(SelectItem, { value: "active", children: "Active" }),
        /* @__PURE__ */ jsx118(SelectItem, { value: "inactive", children: "Inactive" }),
        /* @__PURE__ */ jsx118(SelectItem, { value: "trial", children: "Trial" }),
        /* @__PURE__ */ jsx118(SelectItem, { value: "expired", children: "Expired" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs102(Select, { value: filters.plan, onValueChange: handlePlanChange, children: [
      /* @__PURE__ */ jsx118(SelectTrigger, { className: "w-[160px] h-10", children: /* @__PURE__ */ jsx118(SelectValue, { placeholder: "Plan" }) }),
      /* @__PURE__ */ jsxs102(SelectContent, { children: [
        /* @__PURE__ */ jsx118(SelectItem, { value: "all", children: "All Plans" }),
        /* @__PURE__ */ jsx118(SelectItem, { value: "Basic", children: "Basic" }),
        /* @__PURE__ */ jsx118(SelectItem, { value: "Professional", children: "Professional" }),
        /* @__PURE__ */ jsx118(SelectItem, { value: "Enterprise", children: "Enterprise" })
      ] })
    ] }),
    onClearFilters && (filters.search || filters.status !== "all" || filters.plan !== "all") && /* @__PURE__ */ jsx118(
      Button2,
      {
        variant: "outline",
        size: "sm",
        onClick: onClearFilters,
        className: "h-10",
        children: "Clear"
      }
    )
  ] });
}
var MerchantFilters_default = MerchantFilters;

// src/components/features/Merchants/components/MerchantTable.tsx
import { useState as useState45 } from "react";
import {
  Eye as Eye7,
  Edit as Edit6,
  MoreVertical as MoreVertical3
} from "lucide-react";
import { jsx as jsx119, jsxs as jsxs103 } from "react/jsx-runtime";
function MerchantTable({
  merchants,
  onMerchantAction,
  sortBy = "name",
  sortOrder = "asc",
  onSort
}) {
  const [openMenuId, setOpenMenuId] = useState45(null);
  const getStatusBadge = (merchant) => {
    if (!merchant.isActive) {
      return /* @__PURE__ */ jsx119(StatusBadge, { status: "inactive", type: "entity", size: "sm" });
    }
    const status = merchant.subscription?.status;
    return /* @__PURE__ */ jsx119(StatusBadge, { status, type: "subscription", size: "sm" });
  };
  if (merchants.length === 0) {
    return /* @__PURE__ */ jsx119(Card, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx119(CardContent, { className: "text-center py-12", children: /* @__PURE__ */ jsxs103("div", { className: "text-text-tertiary", children: [
      /* @__PURE__ */ jsx119("div", { className: "text-4xl mb-4", children: "\u{1F3EA}" }),
      /* @__PURE__ */ jsx119("h3", { className: "text-lg font-medium mb-2", children: "No merchants found" }),
      /* @__PURE__ */ jsx119("p", { className: "text-sm", children: "Try adjusting your filters or create some merchants to get started." })
    ] }) }) });
  }
  return /* @__PURE__ */ jsx119(Card, { className: "shadow-sm border-border flex flex-col h-full", children: /* @__PURE__ */ jsx119(CardContent, { className: "p-0 flex-1 overflow-hidden", children: /* @__PURE__ */ jsx119("div", { className: "flex-1 overflow-auto h-full", children: /* @__PURE__ */ jsxs103("table", { className: "w-full", children: [
    /* @__PURE__ */ jsx119("thead", { className: "bg-bg-secondary border-b border-border sticky top-0 z-10", children: /* @__PURE__ */ jsxs103("tr", { children: [
      /* @__PURE__ */ jsx119("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Merchant Name" }),
      /* @__PURE__ */ jsx119("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Plan & Status" }),
      /* @__PURE__ */ jsx119("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Created At" }),
      /* @__PURE__ */ jsx119("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Start Date" }),
      /* @__PURE__ */ jsx119("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "End Date" }),
      /* @__PURE__ */ jsx119("th", { className: "px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Actions" })
    ] }) }),
    /* @__PURE__ */ jsx119("tbody", { className: "divide-y divide-border bg-bg-card", children: merchants.map((merchant) => /* @__PURE__ */ jsxs103(
      "tr",
      {
        className: "hover:bg-bg-secondary transition-colors",
        children: [
          /* @__PURE__ */ jsx119("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs103("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsx119("div", { className: "flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-action-primary to-brand-primary flex items-center justify-center", children: /* @__PURE__ */ jsx119("span", { className: "text-white font-semibold text-sm", children: merchant.name.substring(0, 2).toUpperCase() }) }),
            /* @__PURE__ */ jsxs103("div", { children: [
              /* @__PURE__ */ jsx119("div", { className: "text-sm font-medium text-text-primary", children: merchant.name }),
              /* @__PURE__ */ jsx119("div", { className: "text-sm text-text-tertiary", children: merchant.email || "No email" })
            ] })
          ] }) }),
          /* @__PURE__ */ jsx119("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs103("div", { className: "flex flex-col gap-1", children: [
            /* @__PURE__ */ jsx119("div", { className: "text-sm font-medium text-text-primary", children: merchant.subscription?.plan?.name || "No Plan" }),
            getStatusBadge(merchant)
          ] }) }),
          /* @__PURE__ */ jsx119("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx119("div", { className: "text-sm text-text-primary", children: merchant.createdAt ? new Date(merchant.createdAt).toLocaleDateString("en-US", {
            month: "short",
            day: "numeric",
            year: "numeric"
          }) : "N/A" }) }),
          /* @__PURE__ */ jsx119("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx119("div", { className: "text-sm text-text-primary", children: merchant.subscription?.currentPeriodStart ? new Date(merchant.subscription.currentPeriodStart).toLocaleDateString("en-US", {
            month: "short",
            day: "numeric",
            year: "numeric"
          }) : merchant.createdAt ? new Date(merchant.createdAt).toLocaleDateString("en-US", {
            month: "short",
            day: "numeric",
            year: "numeric"
          }) : "N/A" }) }),
          /* @__PURE__ */ jsx119("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx119("div", { className: "text-sm text-text-primary", children: merchant.subscription?.currentPeriodEnd ? new Date(merchant.subscription.currentPeriodEnd).toLocaleDateString("en-US", {
            month: "short",
            day: "numeric",
            year: "numeric"
          }) : merchant.lastActiveAt ? new Date(merchant.lastActiveAt).toLocaleDateString("en-US", {
            month: "short",
            day: "numeric",
            year: "numeric"
          }) : "No end date" }) }),
          /* @__PURE__ */ jsx119("td", { className: "px-6 py-4 text-right", children: /* @__PURE__ */ jsxs103(DropdownMenu, { children: [
            /* @__PURE__ */ jsx119(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsx119(
              Button2,
              {
                variant: "ghost",
                size: "sm",
                onClick: () => setOpenMenuId(openMenuId === merchant.id ? null : merchant.id),
                children: /* @__PURE__ */ jsx119(MoreVertical3, { className: "h-4 w-4" })
              }
            ) }),
            /* @__PURE__ */ jsxs103(
              DropdownMenuContent,
              {
                align: "end",
                open: openMenuId === merchant.id,
                onOpenChange: (open) => setOpenMenuId(open ? merchant.id : null),
                children: [
                  /* @__PURE__ */ jsxs103(
                    DropdownMenuItem,
                    {
                      onClick: () => {
                        onMerchantAction("view", merchant.id);
                        setOpenMenuId(null);
                      },
                      children: [
                        /* @__PURE__ */ jsx119(Eye7, { className: "h-4 w-4 mr-2" }),
                        "View Details"
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsxs103(
                    DropdownMenuItem,
                    {
                      onClick: () => {
                        onMerchantAction("edit", merchant.id);
                        setOpenMenuId(null);
                      },
                      children: [
                        /* @__PURE__ */ jsx119(Edit6, { className: "h-4 w-4 mr-2" }),
                        "Edit Merchant"
                      ]
                    }
                  )
                ]
              }
            )
          ] }) })
        ]
      },
      merchant.id
    )) })
  ] }) }) }) });
}
var MerchantTable_default = MerchantTable;

// src/components/features/Merchants/components/MerchantPlanManagement.tsx
import { useState as useState58, useEffect as useEffect33 } from "react";

// src/components/features/Subscriptions/components/SubscriptionList.tsx
import { useState as useState50 } from "react";
import {
  Eye as Eye8,
  Edit as Edit8,
  Building as Building3,
  MoreVertical as MoreVertical4,
  Ban
} from "lucide-react";

// src/components/features/Subscriptions/components/SubscriptionViewDialog.tsx
import {
  Dialog as Dialog6,
  DialogContent as DialogContent6,
  DialogHeader as DialogHeader6,
  DialogTitle as DialogTitle6,
  DialogDescription as DialogDescription4,
  DialogFooter as DialogFooter2,
  Button as Button27,
  Card as Card30,
  CardHeader as CardHeader23,
  CardTitle as CardTitle23,
  CardContent as CardContent29,
  Badge as Badge11,
  Separator as Separator4
} from "@rentalshop/ui";
import { formatDate as formatDate4, formatCurrency as formatCurrency8 } from "@rentalshop/ui";
import {
  Edit as Edit7,
  Pause,
  Play,
  Clock as Clock5,
  ArrowRight,
  X as X10
} from "lucide-react";
import { jsx as jsx120, jsxs as jsxs104 } from "react/jsx-runtime";
function SubscriptionViewDialog({
  subscription,
  isOpen,
  onClose,
  onEdit,
  onCancel,
  onExtend,
  onSuspend,
  onReactivate,
  onChangePlan
}) {
  if (!subscription)
    return null;
  const getStatusColor11 = (status) => {
    const normalizedStatus2 = status.toLowerCase();
    switch (normalizedStatus2) {
      case "active":
        return "default";
      case "trial":
        return "secondary";
      case "past_due":
        return "destructive";
      case "cancelled":
        return "destructive";
      case "paused":
        return "destructive";
      case "expired":
        return "destructive";
      default:
        return "secondary";
    }
  };
  const normalizedStatus = subscription.status.toLowerCase();
  const isActive = ["active", "trial", "past_due"].includes(normalizedStatus);
  const isInactive = ["cancelled", "paused", "expired"].includes(normalizedStatus);
  const isExpired = normalizedStatus === "expired" || subscription.status === "EXPIRED";
  const isActiveStatus = normalizedStatus === "active" || subscription.status === "ACTIVE";
  const debugMode = false;
  const canCancel = debugMode ? !!onCancel : isActive && !!onCancel;
  const canExtend = debugMode ? !!onExtend : isActive && !!onExtend;
  const canChangePlan = debugMode ? !!onChangePlan : isActive && !!onChangePlan;
  console.log("SubscriptionViewDialog Debug:", {
    subscription,
    originalStatus: subscription.status,
    normalizedStatus,
    isActive,
    isInactive,
    isExpired,
    isActiveStatus,
    canCancel,
    canExtend,
    canChangePlan,
    hasHandlers: {
      onCancel: !!onCancel,
      onExtend: !!onExtend,
      onChangePlan: !!onChangePlan
    }
  });
  return /* @__PURE__ */ jsx120(Dialog6, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxs104(DialogContent6, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsxs104(DialogHeader6, { children: [
      /* @__PURE__ */ jsxs104(DialogTitle6, { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsx120("span", { children: "Subscription Details" }),
        /* @__PURE__ */ jsx120(Badge11, { variant: getStatusColor11(subscription.status), children: subscription.status })
      ] }),
      /* @__PURE__ */ jsxs104(DialogDescription4, { children: [
        "View and manage subscription information for ",
        subscription.merchant?.name || "Unknown Merchant"
      ] })
    ] }),
    /* @__PURE__ */ jsxs104("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxs104(Card30, { children: [
        /* @__PURE__ */ jsx120(CardHeader23, { children: /* @__PURE__ */ jsx120(CardTitle23, { children: "Basic Information" }) }),
        /* @__PURE__ */ jsx120(CardContent29, { className: "space-y-4", children: /* @__PURE__ */ jsxs104("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Subscription ID" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.id })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Status" }),
            /* @__PURE__ */ jsx120("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsx120(Badge11, { variant: getStatusColor11(subscription.status), children: subscription.status }) })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Plan" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm font-medium", children: subscription.plan?.name || "Unknown Plan" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Amount" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm font-medium", children: formatCurrency8(subscription.amount, subscription.plan?.currency || "USD") })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Billing Interval" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.billingInterval || "month" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Currency" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.plan?.currency || "USD" })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs104(Card30, { children: [
        /* @__PURE__ */ jsx120(CardHeader23, { children: /* @__PURE__ */ jsx120(CardTitle23, { children: "Merchant Information" }) }),
        /* @__PURE__ */ jsx120(CardContent29, { className: "space-y-4", children: /* @__PURE__ */ jsxs104("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Merchant ID" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.merchantId })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Merchant Name" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm font-medium", children: subscription.merchant?.name || "Unknown" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Email" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.merchant?.email || "Unknown" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Subscription Status" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.status || "Unknown" })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs104(Card30, { children: [
        /* @__PURE__ */ jsx120(CardHeader23, { children: /* @__PURE__ */ jsx120(CardTitle23, { children: "Plan Details" }) }),
        /* @__PURE__ */ jsx120(CardContent29, { className: "space-y-4", children: /* @__PURE__ */ jsxs104("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Plan ID" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.planId })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Plan Name" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm font-medium", children: subscription.plan?.name || "Unknown" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Plan Price" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm font-medium", children: subscription.plan ? formatCurrency8(subscription.plan.basePrice, subscription.plan.currency) : "Unknown" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Billing Interval" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.billingInterval || "month" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Status" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.status || "Unknown" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Plan ID" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.planId || "Unknown" })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs104(Card30, { children: [
        /* @__PURE__ */ jsx120(CardHeader23, { children: /* @__PURE__ */ jsx120(CardTitle23, { children: "Important Dates" }) }),
        /* @__PURE__ */ jsx120(CardContent29, { className: "space-y-4", children: /* @__PURE__ */ jsxs104("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Current Period Start" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: formatDate4(subscription.currentPeriodStart) })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Current Period End" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: subscription.currentPeriodEnd ? formatDate4(subscription.currentPeriodEnd) : "No end date" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Trial Start" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: "No trial data available" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Trial End" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: "No trial data available" })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Created At" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: formatDate4(subscription.createdAt) })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Updated At" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: formatDate4(subscription.updatedAt) })
          ] })
        ] }) })
      ] }),
      subscription.status === "cancelled" && /* @__PURE__ */ jsxs104(Card30, { children: [
        /* @__PURE__ */ jsx120(CardHeader23, { children: /* @__PURE__ */ jsx120(CardTitle23, { children: "Cancellation Information" }) }),
        /* @__PURE__ */ jsx120(CardContent29, { className: "space-y-4", children: /* @__PURE__ */ jsxs104("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Cancelled At" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: formatDate4(subscription.updatedAt) })
          ] }),
          /* @__PURE__ */ jsxs104("div", { children: [
            /* @__PURE__ */ jsx120("label", { className: "text-sm font-medium text-gray-500", children: "Cancellation Reason" }),
            /* @__PURE__ */ jsx120("p", { className: "text-sm", children: "No reason provided" })
          ] })
        ] }) })
      ] })
    ] }),
    /* @__PURE__ */ jsx120(Separator4, {}),
    /* @__PURE__ */ jsxs104(DialogFooter2, { className: "flex justify-between", children: [
      /* @__PURE__ */ jsxs104("div", { className: "flex gap-2 flex-wrap", children: [
        canExtend && onExtend && /* @__PURE__ */ jsxs104(
          Button27,
          {
            variant: "outline",
            onClick: () => onExtend(subscription),
            className: "flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx120(Clock5, { className: "h-4 w-4" }),
              "Extend Subscription"
            ]
          }
        ),
        canChangePlan && onChangePlan && /* @__PURE__ */ jsxs104(
          Button27,
          {
            variant: "outline",
            onClick: () => onChangePlan(subscription),
            className: "flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx120(ArrowRight, { className: "h-4 w-4" }),
              "Change Plan"
            ]
          }
        ),
        isActiveStatus && onSuspend && /* @__PURE__ */ jsxs104(
          Button27,
          {
            variant: "outline",
            onClick: () => onSuspend(subscription, "Paused from subscription view"),
            className: "flex items-center gap-2 text-orange-600 hover:text-orange-700",
            children: [
              /* @__PURE__ */ jsx120(Pause, { className: "h-4 w-4" }),
              "Pause Subscription"
            ]
          }
        ),
        subscription.status === "paused" && onReactivate && /* @__PURE__ */ jsxs104(
          Button27,
          {
            variant: "outline",
            onClick: () => onReactivate(subscription),
            className: "flex items-center gap-2 text-green-600 hover:text-green-700",
            children: [
              /* @__PURE__ */ jsx120(Play, { className: "h-4 w-4" }),
              "Resume Subscription"
            ]
          }
        ),
        canCancel && onCancel && /* @__PURE__ */ jsxs104(
          Button27,
          {
            variant: "destructive",
            onClick: () => onCancel(subscription),
            className: "flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx120(X10, { className: "h-4 w-4" }),
              "Cancel Subscription"
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs104("div", { className: "flex gap-2", children: [
        onEdit && /* @__PURE__ */ jsxs104(
          Button27,
          {
            variant: "outline",
            onClick: () => onEdit(subscription),
            className: "flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx120(Edit7, { className: "h-4 w-4" }),
              "Edit"
            ]
          }
        ),
        /* @__PURE__ */ jsx120(Button27, { variant: "outline", onClick: onClose, children: "Close" })
      ] })
    ] })
  ] }) });
}

// src/components/features/Subscriptions/components/SubscriptionExtendDialog.tsx
import { useState as useState46 } from "react";
import {
  Dialog as Dialog7,
  DialogContent as DialogContent7,
  DialogHeader as DialogHeader7,
  DialogTitle as DialogTitle7,
  DialogDescription as DialogDescription5,
  DialogFooter as DialogFooter3,
  Button as Button28,
  Card as Card31,
  CardHeader as CardHeader24,
  CardTitle as CardTitle24,
  CardContent as CardContent30,
  Input as Input15,
  Label as Label6,
  Alert as Alert3,
  AlertDescription as AlertDescription3
} from "@rentalshop/ui";
import { formatDate as formatDate5, formatCurrency as formatCurrency9 } from "@rentalshop/ui";
import { Calendar as Calendar9, DollarSign as DollarSign8, Clock as Clock6 } from "lucide-react";
import { jsx as jsx121, jsxs as jsxs105 } from "react/jsx-runtime";
var EXTENSION_METHODS = [
  "MANUAL_EXTENSION",
  "PAYMENT_RECEIVED",
  "ADMIN_EXTENSION",
  "COMPENSATION",
  "OTHER"
];
function SubscriptionExtendDialog({
  subscription,
  isOpen,
  onClose,
  onConfirm,
  loading = false
}) {
  const [newEndDate, setNewEndDate] = useState46("");
  const [amount, setAmount] = useState46("");
  const [method, setMethod] = useState46("MANUAL_EXTENSION");
  const [description, setDescription] = useState46("");
  const handleSubmit = () => {
    if (!subscription || !newEndDate || !amount)
      return;
    const extensionData = {
      newEndDate: new Date(newEndDate),
      amount: parseFloat(amount),
      method,
      description: description.trim() || void 0
    };
    onConfirm(subscription, extensionData);
  };
  const handleClose = () => {
    setNewEndDate("");
    setAmount("");
    setMethod("MANUAL_EXTENSION");
    setDescription("");
    onClose();
  };
  if (!subscription)
    return null;
  const currentEndDate = subscription.endDate ? new Date(subscription.endDate) : /* @__PURE__ */ new Date();
  const minDate = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
  const suggestedEndDate = new Date(currentEndDate.getTime() + 30 * 24 * 60 * 60 * 1e3).toISOString().split("T")[0];
  return /* @__PURE__ */ jsx121(Dialog7, { open: isOpen, onOpenChange: handleClose, children: /* @__PURE__ */ jsxs105(DialogContent7, { className: "max-w-2xl", children: [
    /* @__PURE__ */ jsxs105(DialogHeader7, { children: [
      /* @__PURE__ */ jsxs105(DialogTitle7, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx121(Calendar9, { className: "h-5 w-5 text-blue-600" }),
        "Extend Subscription"
      ] }),
      /* @__PURE__ */ jsxs105(DialogDescription5, { children: [
        "Extend subscription for ",
        subscription.merchant?.name || "Unknown Merchant",
        ". This will update the end date and create a payment record."
      ] })
    ] }),
    /* @__PURE__ */ jsxs105("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxs105(Card31, { children: [
        /* @__PURE__ */ jsx121(CardHeader24, { children: /* @__PURE__ */ jsx121(CardTitle24, { children: "Current Subscription" }) }),
        /* @__PURE__ */ jsx121(CardContent30, { className: "space-y-4", children: /* @__PURE__ */ jsxs105("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs105("div", { children: [
            /* @__PURE__ */ jsx121(Label6, { className: "text-sm font-medium text-gray-500", children: "Plan" }),
            /* @__PURE__ */ jsx121("p", { className: "text-sm font-medium", children: subscription.plan?.name || "Unknown Plan" })
          ] }),
          /* @__PURE__ */ jsxs105("div", { children: [
            /* @__PURE__ */ jsx121(Label6, { className: "text-sm font-medium text-gray-500", children: "Current Amount" }),
            /* @__PURE__ */ jsx121("p", { className: "text-sm font-medium", children: formatCurrency9(subscription.amount, subscription.currency) })
          ] }),
          /* @__PURE__ */ jsxs105("div", { children: [
            /* @__PURE__ */ jsx121(Label6, { className: "text-sm font-medium text-gray-500", children: "Current End Date" }),
            /* @__PURE__ */ jsx121("p", { className: "text-sm", children: formatDate5(subscription.endDate) })
          ] }),
          /* @__PURE__ */ jsxs105("div", { children: [
            /* @__PURE__ */ jsx121(Label6, { className: "text-sm font-medium text-gray-500", children: "Status" }),
            /* @__PURE__ */ jsx121("p", { className: "text-sm", children: subscription.status })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs105("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs105("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs105("div", { children: [
            /* @__PURE__ */ jsx121(Label6, { htmlFor: "newEndDate", children: "New End Date *" }),
            /* @__PURE__ */ jsx121(
              Input15,
              {
                id: "newEndDate",
                type: "date",
                value: newEndDate,
                onChange: (e2) => setNewEndDate(e2.target.value),
                min: minDate,
                placeholder: suggestedEndDate,
                className: "mt-1"
              }
            ),
            /* @__PURE__ */ jsxs105("p", { className: "text-xs text-gray-500 mt-1", children: [
              "Suggested: ",
              suggestedEndDate,
              " (30 days from current end date)"
            ] })
          ] }),
          /* @__PURE__ */ jsxs105("div", { children: [
            /* @__PURE__ */ jsx121(Label6, { htmlFor: "amount", children: "Extension Amount *" }),
            /* @__PURE__ */ jsxs105("div", { className: "relative mt-1", children: [
              /* @__PURE__ */ jsx121(DollarSign8, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" }),
              /* @__PURE__ */ jsx121(
                Input15,
                {
                  id: "amount",
                  type: "number",
                  value: amount,
                  onChange: (e2) => setAmount(e2.target.value),
                  placeholder: subscription.amount.toString(),
                  className: "pl-10",
                  step: "0.01",
                  min: "0"
                }
              )
            ] }),
            /* @__PURE__ */ jsxs105("p", { className: "text-xs text-gray-500 mt-1", children: [
              "Current amount: ",
              formatCurrency9(subscription.amount, subscription.currency)
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs105("div", { children: [
          /* @__PURE__ */ jsx121(Label6, { htmlFor: "method", children: "Extension Method *" }),
          /* @__PURE__ */ jsx121(
            "select",
            {
              id: "method",
              value: method,
              onChange: (e2) => setMethod(e2.target.value),
              className: "w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",
              children: EXTENSION_METHODS.map((m) => /* @__PURE__ */ jsx121("option", { value: m, children: m.replace("_", " ") }, m))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs105("div", { children: [
          /* @__PURE__ */ jsx121(Label6, { htmlFor: "description", children: "Description (Optional)" }),
          /* @__PURE__ */ jsx121(
            Input15,
            {
              id: "description",
              value: description,
              onChange: (e2) => setDescription(e2.target.value),
              placeholder: "Reason for extension...",
              className: "mt-1"
            }
          )
        ] })
      ] }),
      newEndDate && amount && /* @__PURE__ */ jsxs105(Alert3, { children: [
        /* @__PURE__ */ jsx121(Clock6, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx121(AlertDescription3, { children: /* @__PURE__ */ jsxs105("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx121("p", { className: "font-medium", children: "Extension Preview:" }),
          /* @__PURE__ */ jsxs105("div", { className: "grid grid-cols-2 gap-4 text-sm", children: [
            /* @__PURE__ */ jsxs105("div", { children: [
              /* @__PURE__ */ jsx121("span", { className: "font-medium", children: "Current End:" }),
              " ",
              formatDate5(subscription.endDate)
            ] }),
            /* @__PURE__ */ jsxs105("div", { children: [
              /* @__PURE__ */ jsx121("span", { className: "font-medium", children: "New End:" }),
              " ",
              formatDate5(new Date(newEndDate))
            ] }),
            /* @__PURE__ */ jsxs105("div", { children: [
              /* @__PURE__ */ jsx121("span", { className: "font-medium", children: "Extension Amount:" }),
              " ",
              formatCurrency9(parseFloat(amount) || 0, subscription.currency)
            ] }),
            /* @__PURE__ */ jsxs105("div", { children: [
              /* @__PURE__ */ jsx121("span", { className: "font-medium", children: "Method:" }),
              " ",
              method.replace("_", " ")
            ] })
          ] })
        ] }) })
      ] })
    ] }),
    /* @__PURE__ */ jsxs105(DialogFooter3, { children: [
      /* @__PURE__ */ jsx121(Button28, { variant: "outline", onClick: handleClose, disabled: loading, children: "Cancel" }),
      /* @__PURE__ */ jsx121(
        Button28,
        {
          onClick: handleSubmit,
          disabled: loading || !newEndDate || !amount,
          children: loading ? "Extending..." : "Extend Subscription"
        }
      )
    ] })
  ] }) });
}

// src/components/features/Subscriptions/components/SubscriptionChangePlanDialog.tsx
import { useState as useState47 } from "react";
import {
  Dialog as Dialog8,
  DialogContent as DialogContent8,
  DialogHeader as DialogHeader8,
  DialogTitle as DialogTitle8,
  DialogDescription as DialogDescription6,
  DialogFooter as DialogFooter4,
  Button as Button29,
  Card as Card32,
  CardHeader as CardHeader25,
  CardTitle as CardTitle25,
  CardContent as CardContent31,
  Label as Label7,
  Alert as Alert4,
  AlertDescription as AlertDescription4,
  Select as Select9,
  SelectContent as SelectContent9,
  SelectItem as SelectItem9,
  SelectTrigger as SelectTrigger9,
  SelectValue as SelectValue9,
  Badge as Badge12
} from "@rentalshop/ui";
import { formatCurrency as formatCurrency10 } from "@rentalshop/ui";
import { ArrowRight as ArrowRight2, Check as Check3, X as X11 } from "lucide-react";
import { jsx as jsx122, jsxs as jsxs106 } from "react/jsx-runtime";
function SubscriptionChangePlanDialog({
  subscription,
  plans,
  isOpen,
  onClose,
  onConfirm,
  loading = false
}) {
  const [selectedPlanId, setSelectedPlanId] = useState47(null);
  const [selectedPeriod, setSelectedPeriod] = useState47(1);
  const handleSubmit = () => {
    if (!subscription || !selectedPlanId)
      return;
    onConfirm(subscription, selectedPlanId, selectedPeriod);
  };
  const handleClose = () => {
    setSelectedPlanId(null);
    onClose();
  };
  if (!subscription)
    return null;
  const currentPlan = subscription.plan;
  const selectedPlan = plans.find((p2) => p2.id === selectedPlanId);
  const getFeatureComparison = (current, selected) => {
    const features2 = [
      { key: "outlets", label: "Max Outlets", current: current?.limits?.outlets, selected: selected?.limits?.outlets },
      { key: "users", label: "Max Users", current: current?.limits?.users, selected: selected?.limits?.users },
      { key: "products", label: "Max Products", current: current?.limits?.products, selected: selected?.limits?.products },
      { key: "customers", label: "Max Customers", current: current?.limits?.customers, selected: selected?.limits?.customers }
    ];
    return features2.map((feature) => ({
      ...feature,
      change: feature.selected > feature.current ? "upgrade" : feature.selected < feature.current ? "downgrade" : "same"
    }));
  };
  const features = getFeatureComparison(currentPlan, selectedPlan);
  return /* @__PURE__ */ jsx122(Dialog8, { open: isOpen, onOpenChange: handleClose, children: /* @__PURE__ */ jsxs106(DialogContent8, { className: "max-w-4xl", children: [
    /* @__PURE__ */ jsxs106(DialogHeader8, { children: [
      /* @__PURE__ */ jsxs106(DialogTitle8, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx122(ArrowRight2, { className: "h-5 w-5 text-blue-600" }),
        "Change Subscription Plan"
      ] }),
      /* @__PURE__ */ jsxs106(DialogDescription6, { children: [
        "Change subscription plan for ",
        subscription.merchant?.name || "Unknown Merchant",
        ". This will update the plan and pricing immediately."
      ] })
    ] }),
    /* @__PURE__ */ jsxs106("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxs106(Card32, { children: [
        /* @__PURE__ */ jsx122(CardHeader25, { children: /* @__PURE__ */ jsx122(CardTitle25, { children: "Current Plan" }) }),
        /* @__PURE__ */ jsx122(CardContent31, { children: /* @__PURE__ */ jsxs106("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs106("div", { children: [
            /* @__PURE__ */ jsx122("h3", { className: "text-lg font-semibold", children: currentPlan?.name || "Unknown Plan" }),
            /* @__PURE__ */ jsx122("p", { className: "text-sm text-gray-600", children: currentPlan?.description || "No description" })
          ] }),
          /* @__PURE__ */ jsxs106("div", { className: "text-right", children: [
            /* @__PURE__ */ jsx122("p", { className: "text-2xl font-bold", children: currentPlan ? formatCurrency10(currentPlan.basePrice, currentPlan.currency) : "Unknown" }),
            /* @__PURE__ */ jsx122("p", { className: "text-sm text-gray-600", children: "per month" })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs106("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx122(Label7, { className: "text-lg font-semibold", children: "Billing Period" }),
        /* @__PURE__ */ jsxs106(Select9, { value: selectedPeriod.toString(), onValueChange: (value) => setSelectedPeriod(parseInt(value)), children: [
          /* @__PURE__ */ jsx122(SelectTrigger9, { className: "w-full", children: /* @__PURE__ */ jsx122(SelectValue9, { placeholder: "Select billing period" }) }),
          /* @__PURE__ */ jsxs106(SelectContent9, { children: [
            /* @__PURE__ */ jsx122(SelectItem9, { value: "1", children: "Monthly (0% discount)" }),
            /* @__PURE__ */ jsx122(SelectItem9, { value: "3", children: "Quarterly (10% discount)" }),
            /* @__PURE__ */ jsx122(SelectItem9, { value: "12", children: "Yearly (20% discount)" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs106("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx122(Label7, { className: "text-lg font-semibold", children: "Select New Plan" }),
        /* @__PURE__ */ jsx122("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: plans.map((plan) => {
          const pricing = plan.pricing || {};
          const periodKey = selectedPeriod === 1 ? "monthly" : selectedPeriod === 3 ? "quarterly" : "yearly";
          const periodPricing = pricing[periodKey] || { price: plan.basePrice, discount: 0, discountedPrice: plan.basePrice, savings: 0 };
          return /* @__PURE__ */ jsxs106(
            Card32,
            {
              className: `cursor-pointer transition-all ${selectedPlanId === plan.id ? "ring-2 ring-blue-500 border-blue-500" : "hover:border-gray-300"}`,
              onClick: () => setSelectedPlanId(plan.id),
              children: [
                /* @__PURE__ */ jsxs106(CardHeader25, { children: [
                  /* @__PURE__ */ jsxs106("div", { className: "flex items-center justify-between", children: [
                    /* @__PURE__ */ jsx122(CardTitle25, { className: "text-lg", children: plan.name }),
                    selectedPlanId === plan.id && /* @__PURE__ */ jsx122(Check3, { className: "h-5 w-5 text-blue-600" })
                  ] }),
                  /* @__PURE__ */ jsx122("p", { className: "text-sm text-gray-600", children: plan.description })
                ] }),
                /* @__PURE__ */ jsx122(CardContent31, { children: /* @__PURE__ */ jsxs106("div", { className: "space-y-3", children: [
                  /* @__PURE__ */ jsxs106("div", { className: "text-center", children: [
                    /* @__PURE__ */ jsx122("div", { className: "text-2xl font-bold", children: formatCurrency10(periodPricing.price, plan.currency) }),
                    /* @__PURE__ */ jsx122("div", { className: "text-sm text-gray-600", children: selectedPeriod === 1 ? "per month" : selectedPeriod === 3 ? "per quarter" : "per year" }),
                    periodPricing.discount > 0 && /* @__PURE__ */ jsxs106("div", { className: "flex items-center justify-center gap-2 mt-1", children: [
                      /* @__PURE__ */ jsxs106(Badge12, { variant: "outline", className: "text-green-600 border-green-200", children: [
                        periodPricing.discount,
                        "% off"
                      ] }),
                      /* @__PURE__ */ jsxs106("span", { className: "text-xs text-green-600", children: [
                        "Save ",
                        formatCurrency10(periodPricing.savings, plan.currency)
                      ] })
                    ] })
                  ] }),
                  /* @__PURE__ */ jsxs106("div", { className: "space-y-1 text-sm", children: [
                    /* @__PURE__ */ jsxs106("div", { children: [
                      "Outlets: ",
                      plan.limits.outlets === -1 ? "Unlimited" : plan.limits.outlets
                    ] }),
                    /* @__PURE__ */ jsxs106("div", { children: [
                      "Users: ",
                      plan.limits.users === -1 ? "Unlimited" : plan.limits.users
                    ] }),
                    /* @__PURE__ */ jsxs106("div", { children: [
                      "Products: ",
                      plan.limits.products === -1 ? "Unlimited" : plan.limits.products
                    ] }),
                    /* @__PURE__ */ jsxs106("div", { children: [
                      "Customers: ",
                      plan.limits.customers === -1 ? "Unlimited" : plan.limits.customers
                    ] })
                  ] })
                ] }) })
              ]
            },
            plan.id
          );
        }) })
      ] }),
      selectedPlan && /* @__PURE__ */ jsxs106(Card32, { children: [
        /* @__PURE__ */ jsx122(CardHeader25, { children: /* @__PURE__ */ jsx122(CardTitle25, { children: "Plan Comparison" }) }),
        /* @__PURE__ */ jsx122(CardContent31, { children: /* @__PURE__ */ jsxs106("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs106("div", { className: "grid grid-cols-3 gap-4 text-sm", children: [
            /* @__PURE__ */ jsx122("div", { className: "font-medium", children: "Feature" }),
            /* @__PURE__ */ jsx122("div", { className: "font-medium text-center", children: "Current" }),
            /* @__PURE__ */ jsx122("div", { className: "font-medium text-center", children: "New Plan" })
          ] }),
          features.map((feature) => /* @__PURE__ */ jsxs106("div", { className: "grid grid-cols-3 gap-4 text-sm", children: [
            /* @__PURE__ */ jsx122("div", { children: feature.label }),
            /* @__PURE__ */ jsx122("div", { className: "text-center", children: feature.current === -1 ? "Unlimited" : feature.current }),
            /* @__PURE__ */ jsxs106("div", { className: "text-center flex items-center justify-center gap-1", children: [
              feature.selected === -1 ? "Unlimited" : feature.selected,
              feature.change === "upgrade" && /* @__PURE__ */ jsx122(ArrowRight2, { className: "h-4 w-4 text-green-600" }),
              feature.change === "downgrade" && /* @__PURE__ */ jsx122(X11, { className: "h-4 w-4 text-red-600" })
            ] })
          ] }, feature.key))
        ] }) })
      ] }),
      selectedPlan && currentPlan && /* @__PURE__ */ jsx122(Alert4, { children: /* @__PURE__ */ jsx122(AlertDescription4, { children: /* @__PURE__ */ jsxs106("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx122("p", { className: "font-medium", children: "Pricing Change:" }),
        /* @__PURE__ */ jsxs106("div", { className: "flex items-center gap-4", children: [
          /* @__PURE__ */ jsxs106("span", { className: "text-sm", children: [
            "From: ",
            formatCurrency10(currentPlan.basePrice, currentPlan.currency),
            "/month"
          ] }),
          /* @__PURE__ */ jsx122(ArrowRight2, { className: "h-4 w-4" }),
          /* @__PURE__ */ jsxs106("span", { className: "text-sm font-medium", children: [
            "To: ",
            formatCurrency10(selectedPlan.basePrice, selectedPlan.currency),
            "/month"
          ] })
        ] }),
        /* @__PURE__ */ jsx122("p", { className: "text-sm text-gray-600", children: "The plan change will take effect immediately and billing will be updated accordingly." })
      ] }) }) })
    ] }),
    /* @__PURE__ */ jsxs106(DialogFooter4, { children: [
      /* @__PURE__ */ jsx122(Button29, { variant: "outline", onClick: handleClose, disabled: loading, children: "Cancel" }),
      /* @__PURE__ */ jsx122(
        Button29,
        {
          onClick: handleSubmit,
          disabled: loading || !selectedPlanId,
          children: loading ? "Changing Plan..." : "Change Plan"
        }
      )
    ] })
  ] }) });
}

// src/components/features/Subscriptions/components/SubscriptionEditDialog.tsx
import { useState as useState49, useEffect as useEffect27 } from "react";
import {
  Dialog as Dialog9,
  DialogContent as DialogContent9,
  DialogHeader as DialogHeader9,
  DialogTitle as DialogTitle9,
  DialogDescription as DialogDescription7,
  DialogFooter as DialogFooter5,
  Button as Button30,
  Card as Card33,
  CardHeader as CardHeader26,
  CardTitle as CardTitle26,
  CardContent as CardContent32,
  Badge as Badge14,
  cn as cn4
} from "@rentalshop/ui";

// src/components/features/Subscriptions/components/SubscriptionFormSimple.tsx
import { useState as useState48, useEffect as useEffect26 } from "react";
import {
  DollarSign as DollarSign10,
  Users as Users5,
  Building,
  CreditCard as CreditCard3,
  AlertCircle as AlertCircle9
} from "lucide-react";
import { jsx as jsx123, jsxs as jsxs107 } from "react/jsx-runtime";
function SubscriptionFormSimple({
  initialData,
  plans,
  merchants,
  onSubmit,
  onCancel,
  loading = false,
  mode = "create",
  title,
  submitText,
  showCard = true,
  showActions = true
}) {
  const [formData, setFormData] = useState48({
    merchantId: initialData?.merchantId || 0,
    planId: initialData?.planId || 0,
    status: initialData?.status || "trial",
    currentPeriodStart: initialData?.currentPeriodStart || /* @__PURE__ */ new Date(),
    currentPeriodEnd: initialData?.currentPeriodEnd || /* @__PURE__ */ new Date(),
    trialStart: initialData?.trialStart,
    trialEnd: initialData?.trialEnd,
    amount: initialData?.amount || 0,
    currency: initialData?.currency || "USD",
    interval: initialData?.interval || "month",
    intervalCount: initialData?.intervalCount || 1,
    period: initialData?.period || 1,
    discount: initialData?.discount || 0,
    savings: initialData?.savings || 0,
    platform: initialData?.platform || "web-mobile",
    cancelAtPeriodEnd: initialData?.cancelAtPeriodEnd || false,
    canceledAt: initialData?.canceledAt,
    cancelReason: initialData?.cancelReason,
    autoRenew: initialData?.autoRenew ?? true,
    changeReason: initialData?.changeReason || ""
  });
  const [selectedPlan, setSelectedPlan] = useState48(null);
  const [errors, setErrors] = useState48({});
  const [merchantOptions, setMerchantOptions] = useState48([]);
  useEffect26(() => {
    const options = merchants.map((merchant) => ({
      value: merchant.id.toString(),
      label: merchant.name,
      subtitle: merchant.email,
      description: `${merchant.city}, ${merchant.state}`,
      type: "merchant"
    }));
    setMerchantOptions(options);
  }, [merchants]);
  const handleMerchantSearch = async (query) => {
    if (!query.trim()) {
      return merchantOptions;
    }
    const filtered = merchantOptions.filter(
      (option) => option.label.toLowerCase().includes(query.toLowerCase()) || option.subtitle?.toLowerCase().includes(query.toLowerCase()) || option.description?.toLowerCase().includes(query.toLowerCase())
    );
    return filtered;
  };
  useEffect26(() => {
    const plan = plans.find((p2) => p2.id === formData.planId);
    setSelectedPlan(plan || null);
  }, [formData.planId, plans]);
  const validateForm = () => {
    const newErrors = {};
    if (!formData.merchantId) {
      newErrors.merchantId = "Merchant is required";
    }
    if (!formData.planId) {
      newErrors.planId = "Plan is required";
    }
    if (!formData.amount || formData.amount <= 0) {
      newErrors.amount = "Amount must be greater than 0";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    try {
      const submitData = {
        merchantId: formData.merchantId,
        planId: formData.planId,
        status: formData.status,
        currentPeriodStart: formData.currentPeriodStart,
        currentPeriodEnd: formData.currentPeriodEnd,
        trialStart: formData.trialStart,
        trialEnd: formData.trialEnd,
        amount: formData.amount,
        currency: formData.currency,
        interval: formData.interval,
        intervalCount: formData.intervalCount,
        period: formData.period,
        discount: formData.discount,
        savings: formData.savings,
        platform: formData.platform,
        cancelAtPeriodEnd: formData.cancelAtPeriodEnd,
        canceledAt: formData.canceledAt,
        cancelReason: formData.cancelReason,
        autoRenew: formData.autoRenew,
        changeReason: formData.changeReason
      };
      await onSubmit(submitData);
    } catch (error2) {
      console.error("Error submitting subscription:", error2);
    }
  };
  const getDiscountPercentage3 = (period) => {
    const discountMap = {
      1: 0,
      // Monthly: 0% discount
      3: 10,
      // Quarterly: 10% discount
      6: 15,
      // 6 Months: 15% discount
      12: 20
      // Yearly: 20% discount
    };
    return discountMap[period] || 0;
  };
  const calculatePricingWithDiscount = (basePrice, period) => {
    const discount = getDiscountPercentage3(period);
    const totalMonths = period;
    const totalBasePrice = basePrice * totalMonths;
    const discountAmount = totalBasePrice * discount / 100;
    const finalPrice = totalBasePrice - discountAmount;
    const monthlyEquivalent = finalPrice / totalMonths;
    return {
      basePrice: totalBasePrice,
      discount,
      finalPrice,
      savings: discountAmount,
      monthlyEquivalent
    };
  };
  const handleInputChange = (field, value) => {
    setFormData((prev) => {
      const newData = { ...prev, [field]: value };
      if (field === "interval") {
        const intervalToPeriodMap = {
          "month": 1,
          "quarter": 3,
          "6months": 6,
          "year": 12
        };
        newData.period = intervalToPeriodMap[value] || 1;
        if (selectedPlan) {
          const pricing = calculatePricingWithDiscount(selectedPlan.basePrice, newData.period);
          newData.amount = pricing.finalPrice;
          newData.discount = pricing.discount;
          newData.savings = pricing.savings;
        }
      }
      return newData;
    });
    if (errors[field]) {
      setErrors((prev) => ({
        ...prev,
        [field]: ""
      }));
    }
  };
  const formatCurrency22 = (amount, currency = "USD") => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency
    }).format(amount);
  };
  const formContent = /* @__PURE__ */ jsxs107("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs107("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxs107(Label2, { htmlFor: "merchantId", className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx123(Building, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx123("span", { children: "Merchant *" })
      ] }),
      /* @__PURE__ */ jsx123(
        SearchableSelect,
        {
          value: formData.merchantId,
          onChange: (value) => handleInputChange("merchantId", value),
          options: merchantOptions,
          onSearch: handleMerchantSearch,
          placeholder: "Search for a merchant...",
          searchPlaceholder: "Type merchant name, email, or location...",
          emptyText: "No merchants found",
          displayMode: "input",
          className: `w-full ${errors.merchantId ? "border-red-500" : ""}`
        }
      ),
      errors.merchantId && /* @__PURE__ */ jsxs107("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
        /* @__PURE__ */ jsx123(AlertCircle9, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx123("span", { children: errors.merchantId })
      ] })
    ] }),
    /* @__PURE__ */ jsxs107("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxs107(Label2, { htmlFor: "planId", className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx123(CreditCard3, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx123("span", { children: "Plan *" })
      ] }),
      /* @__PURE__ */ jsxs107(
        Select,
        {
          value: formData.planId.toString(),
          onValueChange: (value) => handleInputChange("planId", parseInt(value)),
          disabled: mode === "view",
          children: [
            /* @__PURE__ */ jsx123(SelectTrigger, { className: `w-full ${errors.planId ? "border-red-500" : ""}`, children: /* @__PURE__ */ jsx123(SelectValue, { placeholder: "Select a plan" }) }),
            /* @__PURE__ */ jsx123(SelectContent, { children: plans.length > 0 ? plans.map((plan) => /* @__PURE__ */ jsx123(SelectItem, { value: plan.id.toString(), children: /* @__PURE__ */ jsxs107("div", { className: "flex flex-col", children: [
              /* @__PURE__ */ jsx123("span", { className: "font-medium", children: plan.name }),
              /* @__PURE__ */ jsxs107("span", { className: "text-sm text-gray-500", children: [
                formatCurrency22(plan.basePrice, plan.currency),
                "/",
                plan.currency
              ] })
            ] }) }, plan.id)) : /* @__PURE__ */ jsx123(SelectItem, { value: "no-plans", disabled: true, children: "No plans available" }) })
          ]
        }
      ),
      errors.planId && /* @__PURE__ */ jsxs107("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
        /* @__PURE__ */ jsx123(AlertCircle9, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx123("span", { children: errors.planId })
      ] })
    ] }),
    /* @__PURE__ */ jsxs107("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxs107(Label2, { htmlFor: "status", className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx123(StatusBadge, { status: formData.status }),
        /* @__PURE__ */ jsx123("span", { children: "Status" })
      ] }),
      /* @__PURE__ */ jsxs107(
        Select,
        {
          value: formData.status,
          onValueChange: (value) => handleInputChange("status", value),
          disabled: mode === "view",
          children: [
            /* @__PURE__ */ jsx123(SelectTrigger, { className: "w-full", children: /* @__PURE__ */ jsx123(SelectValue, { placeholder: "Select status" }) }),
            /* @__PURE__ */ jsxs107(SelectContent, { children: [
              /* @__PURE__ */ jsx123(SelectItem, { value: "trial", children: "Trial" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "active", children: "Active" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "past_due", children: "Past Due" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "cancelled", children: "Cancelled" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "paused", children: "Paused" })
            ] })
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxs107("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxs107(Label2, { htmlFor: "amount", className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx123(DollarSign10, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx123("span", { children: "Amount *" })
      ] }),
      /* @__PURE__ */ jsx123(
        Input,
        {
          type: "number",
          step: "0.01",
          value: formData.amount,
          onChange: (e2) => handleInputChange("amount", parseFloat(e2.target.value) || 0),
          placeholder: "0.00",
          disabled: mode === "view",
          className: `w-full ${errors.amount ? "border-red-500" : ""}`
        }
      ),
      errors.amount && /* @__PURE__ */ jsxs107("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
        /* @__PURE__ */ jsx123(AlertCircle9, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx123("span", { children: errors.amount })
      ] })
    ] }),
    /* @__PURE__ */ jsxs107("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx123(Label2, { htmlFor: "currency", children: "Currency" }),
      /* @__PURE__ */ jsxs107(
        Select,
        {
          value: formData.currency,
          onValueChange: (value) => handleInputChange("currency", value),
          disabled: mode === "view",
          children: [
            /* @__PURE__ */ jsx123(SelectTrigger, { className: "w-full", children: /* @__PURE__ */ jsx123(SelectValue, { placeholder: "Select currency" }) }),
            /* @__PURE__ */ jsxs107(SelectContent, { children: [
              /* @__PURE__ */ jsx123(SelectItem, { value: "USD", children: "USD" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "EUR", children: "EUR" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "GBP", children: "GBP" })
            ] })
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxs107("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxs107(Label2, { htmlFor: "platform", className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx123(Users5, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx123("span", { children: "Platform Support" })
      ] }),
      /* @__PURE__ */ jsxs107(
        Select,
        {
          value: formData.platform,
          onValueChange: (value) => handleInputChange("platform", value),
          disabled: mode === "view",
          children: [
            /* @__PURE__ */ jsx123(SelectTrigger, { className: "w-full", children: /* @__PURE__ */ jsx123(SelectValue, { placeholder: "Select platform support" }) }),
            /* @__PURE__ */ jsxs107(SelectContent, { children: [
              /* @__PURE__ */ jsx123(SelectItem, { value: "web-only", children: "Web Only" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "mobile-only", children: "Mobile Only" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "web-mobile", children: "Web & Mobile" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "desktop-only", children: "Desktop Only" }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "all-platforms", children: "All Platforms" })
            ] })
          ]
        }
      ),
      /* @__PURE__ */ jsx123("p", { className: "text-xs text-gray-500", children: "Select which platforms this subscription supports" })
    ] }),
    /* @__PURE__ */ jsxs107("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx123(Label2, { htmlFor: "interval", children: "Billing Interval" }),
      /* @__PURE__ */ jsxs107(
        Select,
        {
          value: formData.interval,
          onValueChange: (value) => handleInputChange("interval", value),
          disabled: mode === "view",
          children: [
            /* @__PURE__ */ jsx123(SelectTrigger, { className: "w-full", children: /* @__PURE__ */ jsx123(SelectValue, { placeholder: "Select interval" }) }),
            /* @__PURE__ */ jsxs107(SelectContent, { children: [
              /* @__PURE__ */ jsx123(SelectItem, { value: "month", children: /* @__PURE__ */ jsxs107("div", { className: "flex items-center justify-between w-full", children: [
                /* @__PURE__ */ jsx123("span", { children: "Monthly" }),
                /* @__PURE__ */ jsx123("span", { className: "text-gray-500 text-sm", children: "(0% discount)" })
              ] }) }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "quarter", children: /* @__PURE__ */ jsxs107("div", { className: "flex items-center justify-between w-full", children: [
                /* @__PURE__ */ jsx123("span", { children: "Quarterly" }),
                /* @__PURE__ */ jsx123("span", { className: "text-green-600 text-sm font-medium", children: "(10% discount)" })
              ] }) }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "6months", children: /* @__PURE__ */ jsxs107("div", { className: "flex items-center justify-between w-full", children: [
                /* @__PURE__ */ jsx123("span", { children: "6 Months" }),
                /* @__PURE__ */ jsx123("span", { className: "text-green-600 text-sm font-medium", children: "(15% discount)" })
              ] }) }),
              /* @__PURE__ */ jsx123(SelectItem, { value: "year", children: /* @__PURE__ */ jsxs107("div", { className: "flex items-center justify-between w-full", children: [
                /* @__PURE__ */ jsx123("span", { children: "Yearly" }),
                /* @__PURE__ */ jsx123("span", { className: "text-green-600 text-sm font-medium", children: "(20% discount)" })
              ] }) })
            ] })
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxs107("div", { className: "flex items-center space-x-2", children: [
      /* @__PURE__ */ jsx123(
        Switch,
        {
          id: "autoRenew",
          checked: formData.autoRenew,
          onCheckedChange: (checked) => handleInputChange("autoRenew", checked),
          disabled: mode === "view"
        }
      ),
      /* @__PURE__ */ jsx123(Label2, { htmlFor: "autoRenew", children: "Auto Renew" })
    ] }),
    mode !== "view" && /* @__PURE__ */ jsxs107("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx123(Label2, { htmlFor: "changeReason", children: "Change Reason" }),
      /* @__PURE__ */ jsx123(
        Textarea,
        {
          value: formData.changeReason || "",
          onChange: (e2) => handleInputChange("changeReason", e2.target.value),
          placeholder: "Reason for this change...",
          rows: 3
        }
      )
    ] })
  ] });
  return /* @__PURE__ */ jsxs107("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
    showCard ? /* @__PURE__ */ jsxs107(Card, { children: [
      /* @__PURE__ */ jsx123(CardHeader, { children: /* @__PURE__ */ jsxs107(CardTitle, { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx123(CreditCard3, { className: "h-5 w-5" }),
        /* @__PURE__ */ jsx123("span", { children: title || (mode === "create" ? "Create Subscription" : "Edit Subscription") })
      ] }) }),
      /* @__PURE__ */ jsx123(CardContent, { children: formContent })
    ] }) : formContent,
    showActions && mode !== "view" && /* @__PURE__ */ jsxs107("div", { className: "flex justify-end space-x-2", children: [
      /* @__PURE__ */ jsx123(Button2, { type: "button", variant: "outline", onClick: onCancel, disabled: loading, children: "Cancel" }),
      /* @__PURE__ */ jsx123(Button2, { type: "submit", disabled: loading, children: loading ? "Saving..." : submitText || "Save" })
    ] })
  ] });
}

// src/components/features/Subscriptions/components/SubscriptionEditDialog.tsx
import { formatCurrency as formatCurrency11 } from "@rentalshop/utils";
import { DollarSign as DollarSign11, TrendingUp as TrendingUp4, Calendar as Calendar11, Percent } from "lucide-react";
import { jsx as jsx124, jsxs as jsxs108 } from "react/jsx-runtime";
function SubscriptionEditDialog({
  subscription,
  plans,
  merchants,
  isOpen,
  onClose,
  onSave,
  loading = false
}) {
  const [formData, setFormData] = useState49({});
  useEffect27(() => {
    if (subscription) {
      setFormData({
        planId: parseInt(subscription.planId),
        merchantId: parseInt(subscription.merchantId),
        status: subscription.status,
        amount: subscription.amount,
        currency: subscription.currency,
        interval: subscription.interval,
        intervalCount: subscription.intervalCount,
        period: subscription.period,
        discount: subscription.discount,
        savings: subscription.savings,
        platform: subscription.platform || "web-mobile",
        currentPeriodStart: subscription.currentPeriodStart,
        currentPeriodEnd: subscription.currentPeriodEnd,
        trialStart: subscription.trialStart,
        trialEnd: subscription.trialEnd,
        cancelAtPeriodEnd: subscription.cancelAtPeriodEnd,
        canceledAt: subscription.canceledAt,
        cancelReason: subscription.cancelReason,
        autoRenew: !subscription.cancelAtPeriodEnd,
        changeReason: ""
      });
    }
  }, [subscription]);
  const handleSubmit = async (data) => {
    try {
      await onSave(data);
      onClose();
    } catch (error2) {
      console.error("Failed to update subscription:", error2);
    }
  };
  const handleCancel = () => {
    setFormData({});
    onClose();
  };
  const calculateDiscountBreakdown = (basePrice, currency) => {
    const periods = [
      { duration: 1, label: "Monthly", discount: 0 },
      { duration: 3, label: "Quarterly", discount: 10 },
      { duration: 6, label: "6 Months", discount: 15 },
      { duration: 12, label: "Yearly", discount: 20 }
    ];
    return periods.map((period) => {
      const discountedPrice = basePrice * (1 - period.discount / 100);
      const totalSavings = basePrice * period.duration - discountedPrice * period.duration;
      return {
        ...period,
        originalPrice: basePrice * period.duration,
        discountedPrice: discountedPrice * period.duration,
        monthlyPrice: discountedPrice,
        totalSavings,
        savingsPercentage: period.discount
      };
    });
  };
  const selectedPlan = plans.find((plan) => plan.id === formData.planId);
  if (!subscription)
    return null;
  return /* @__PURE__ */ jsx124(Dialog9, { open: isOpen, onOpenChange: handleCancel, children: /* @__PURE__ */ jsxs108(DialogContent9, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsxs108(DialogHeader9, { children: [
      /* @__PURE__ */ jsx124(DialogTitle9, { children: "Edit Subscription" }),
      /* @__PURE__ */ jsxs108(DialogDescription7, { children: [
        "Update subscription details for ",
        subscription.merchant?.name || "Merchant"
      ] })
    ] }),
    /* @__PURE__ */ jsxs108("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsx124("div", { className: "w-full", children: /* @__PURE__ */ jsx124(
        SubscriptionFormSimple,
        {
          initialData: formData,
          plans,
          merchants,
          onSubmit: handleSubmit,
          onCancel: handleCancel,
          loading,
          mode: "edit",
          title: "",
          submitText: "",
          showCard: false,
          showActions: false
        }
      ) }),
      selectedPlan && /* @__PURE__ */ jsxs108("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [
        /* @__PURE__ */ jsx124("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs108(Card33, { children: [
          /* @__PURE__ */ jsx124(CardHeader26, { children: /* @__PURE__ */ jsxs108(CardTitle26, { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx124(Percent, { className: "h-5 w-5" }),
            "Discount Breakdown by Period"
          ] }) }),
          /* @__PURE__ */ jsx124(CardContent32, { children: /* @__PURE__ */ jsx124("div", { className: "space-y-4", children: calculateDiscountBreakdown(selectedPlan.basePrice, formData.currency || "USD").map((period) => /* @__PURE__ */ jsxs108(
            "div",
            {
              className: cn4(
                "p-4 rounded-lg border-2 transition-all",
                formData.period === period.duration ? "border-blue-500 bg-blue-50" : "border-gray-200 hover:border-gray-300"
              ),
              children: [
                /* @__PURE__ */ jsxs108("div", { className: "flex items-center justify-between mb-2", children: [
                  /* @__PURE__ */ jsxs108("div", { className: "flex items-center gap-2", children: [
                    /* @__PURE__ */ jsx124(Calendar11, { className: "h-4 w-4 text-gray-600" }),
                    /* @__PURE__ */ jsx124("span", { className: "font-semibold text-gray-900", children: period.label }),
                    period.savingsPercentage > 0 && /* @__PURE__ */ jsxs108(Badge14, { className: "bg-green-100 text-green-800 border-green-200", children: [
                      period.savingsPercentage,
                      "% OFF"
                    ] })
                  ] }),
                  formData.period === period.duration && /* @__PURE__ */ jsx124(Badge14, { className: "bg-blue-100 text-blue-800 border-blue-200", children: "Current" })
                ] }),
                /* @__PURE__ */ jsxs108("div", { className: "grid grid-cols-2 gap-4 text-sm", children: [
                  /* @__PURE__ */ jsxs108("div", { children: [
                    /* @__PURE__ */ jsx124("div", { className: "text-gray-600", children: "Monthly Price" }),
                    /* @__PURE__ */ jsx124("div", { className: "font-semibold", children: formatCurrency11(period.monthlyPrice, formData.currency) })
                  ] }),
                  /* @__PURE__ */ jsxs108("div", { children: [
                    /* @__PURE__ */ jsx124("div", { className: "text-gray-600", children: "Total Price" }),
                    /* @__PURE__ */ jsx124("div", { className: "font-semibold", children: formatCurrency11(period.discountedPrice, formData.currency) })
                  ] })
                ] }),
                period.savingsPercentage > 0 && /* @__PURE__ */ jsxs108("div", { className: "mt-3 pt-3 border-t border-gray-200", children: [
                  /* @__PURE__ */ jsxs108("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsxs108("div", { className: "flex items-center gap-2", children: [
                      /* @__PURE__ */ jsx124(TrendingUp4, { className: "h-4 w-4 text-green-600" }),
                      /* @__PURE__ */ jsx124("span", { className: "text-gray-600", children: "Total Savings" })
                    ] }),
                    /* @__PURE__ */ jsx124("div", { className: "font-semibold text-green-600", children: formatCurrency11(period.totalSavings, formData.currency) })
                  ] }),
                  /* @__PURE__ */ jsxs108("div", { className: "text-xs text-gray-500 mt-1", children: [
                    "vs ",
                    formatCurrency11(period.originalPrice, formData.currency),
                    " at regular price"
                  ] })
                ] })
              ]
            },
            period.duration
          )) }) })
        ] }) }),
        /* @__PURE__ */ jsx124("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs108(Card33, { children: [
          /* @__PURE__ */ jsx124(CardHeader26, { children: /* @__PURE__ */ jsxs108(CardTitle26, { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx124(DollarSign11, { className: "h-5 w-5" }),
            "Current Subscription Summary"
          ] }) }),
          /* @__PURE__ */ jsx124(CardContent32, { children: /* @__PURE__ */ jsxs108("div", { className: "space-y-3", children: [
            /* @__PURE__ */ jsxs108("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx124("span", { className: "text-gray-600", children: "Plan" }),
              /* @__PURE__ */ jsx124("span", { className: "font-semibold", children: selectedPlan.name })
            ] }),
            /* @__PURE__ */ jsxs108("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx124("span", { className: "text-gray-600", children: "Billing Period" }),
              /* @__PURE__ */ jsx124("span", { className: "font-semibold", children: formData.period === 1 ? "Monthly" : formData.period === 3 ? "Quarterly" : formData.period === 6 ? "6 Months" : formData.period === 12 ? "Yearly" : `${formData.period || 1} months` })
            ] }),
            /* @__PURE__ */ jsxs108("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx124("span", { className: "text-gray-600", children: "Current Amount" }),
              /* @__PURE__ */ jsx124("span", { className: "font-semibold", children: formatCurrency11(formData.amount || 0, formData.currency) })
            ] }),
            /* @__PURE__ */ jsxs108("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx124("span", { className: "text-gray-600", children: "Discount Applied" }),
              /* @__PURE__ */ jsxs108("span", { className: "font-semibold text-green-600", children: [
                formData.discount || 0,
                "%"
              ] })
            ] }),
            /* @__PURE__ */ jsxs108("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx124("span", { className: "text-gray-600", children: "Platform" }),
              /* @__PURE__ */ jsx124("span", { className: "font-semibold", children: formData.platform === "web-only" ? "Web Only" : formData.platform === "mobile-only" ? "Mobile Only" : formData.platform === "web-mobile" ? "Web & Mobile" : formData.platform === "desktop-only" ? "Desktop Only" : formData.platform === "all-platforms" ? "All Platforms" : "Web & Mobile" })
            ] })
          ] }) })
        ] }) })
      ] })
    ] }),
    /* @__PURE__ */ jsxs108(DialogFooter5, { className: "flex justify-end gap-2", children: [
      /* @__PURE__ */ jsx124(Button30, { variant: "outline", onClick: handleCancel, disabled: loading, children: "Cancel" }),
      /* @__PURE__ */ jsx124(Button30, { onClick: () => handleSubmit(formData), disabled: loading, children: loading ? "Saving..." : "Save Changes" })
    ] })
  ] }) });
}

// src/components/features/Subscriptions/components/SubscriptionList.tsx
import { Fragment as Fragment24, jsx as jsx125, jsxs as jsxs109 } from "react/jsx-runtime";
function SubscriptionList({
  subscriptions = [],
  plans = [],
  merchants = [],
  onView,
  onEdit,
  onDelete,
  onExtend,
  onCancel,
  onSuspend,
  onReactivate,
  onChangePlan,
  loading = false,
  pagination
}) {
  const [openMenuId, setOpenMenuId] = useState50(null);
  const [showViewDialog, setShowViewDialog] = useState50(false);
  const [showEditDialog, setShowEditDialog] = useState50(false);
  const [showExtendDialog, setShowExtendDialog] = useState50(false);
  const [showChangePlanDialog, setShowChangePlanDialog] = useState50(false);
  const [selectedSubscription, setSelectedSubscription] = useState50(null);
  const filteredSubscriptions = subscriptions;
  const getStatusBadge = (status) => {
    const statusMap = {
      "trial": "trial",
      "active": "active",
      "past_due": "warning",
      "cancelled": "cancelled",
      "paused": "warning"
    };
    const mappedStatus = statusMap[status] || status.toLowerCase();
    return /* @__PURE__ */ jsx125(StatusBadge, { status: mappedStatus });
  };
  const formatDate11 = (date2) => {
    return new Date(date2).toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const formatCurrency22 = (amount, currency = "USD") => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency
    }).format(amount);
  };
  const isExpiringSoon = (endDate) => {
    if (!endDate)
      return false;
    const end = new Date(endDate);
    const now = /* @__PURE__ */ new Date();
    const daysUntilExpiry = Math.ceil((end.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    return daysUntilExpiry <= 7 && daysUntilExpiry > 0;
  };
  const isExpired = (endDate) => {
    if (!endDate)
      return false;
    return new Date(endDate) < /* @__PURE__ */ new Date();
  };
  const handleView = (subscription) => {
    setSelectedSubscription(subscription);
    setShowViewDialog(true);
  };
  const handleEdit = (subscription) => {
    setSelectedSubscription(subscription);
    setShowEditDialog(true);
    setShowViewDialog(false);
  };
  const handleEditSave = async (data) => {
    if (onEdit) {
      await onEdit(data);
    }
    setShowEditDialog(false);
  };
  const handleCancel = (subscription) => {
    onCancel?.(subscription, "");
    setShowViewDialog(false);
  };
  const handleExtend = (subscription) => {
    setSelectedSubscription(subscription);
    setShowExtendDialog(true);
    setShowViewDialog(false);
  };
  const handleChangePlan = (subscription) => {
    setSelectedSubscription(subscription);
    setShowChangePlanDialog(true);
    setShowViewDialog(false);
  };
  const handleExtendConfirm = (subscription, data) => {
    onExtend?.(subscription);
    setShowExtendDialog(false);
    setShowViewDialog(false);
    setSelectedSubscription(null);
  };
  const handleChangePlanConfirm = (subscription, newPlanId, period) => {
    onChangePlan?.(subscription, newPlanId, period);
    setShowChangePlanDialog(false);
    setShowViewDialog(false);
    setSelectedSubscription(null);
  };
  const canCancel = (subscription) => ["active", "trial"].includes(subscription.status);
  const canExtend = (subscription) => ["active", "trial", "past_due"].includes(subscription.status);
  const canChangePlan = (subscription) => ["active", "trial"].includes(subscription.status);
  return /* @__PURE__ */ jsxs109(Fragment24, { children: [
    /* @__PURE__ */ jsxs109(Card, { className: "shadow-sm border-border flex flex-col h-full", children: [
      /* @__PURE__ */ jsx125(CardHeader, { className: "flex-shrink-0", children: /* @__PURE__ */ jsx125(CardTitle, { children: "Subscriptions" }) }),
      loading ? /* @__PURE__ */ jsx125("div", { className: "flex items-center justify-center py-12", children: /* @__PURE__ */ jsxs109("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx125("div", { className: "animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600" }),
        /* @__PURE__ */ jsx125("span", { children: "Loading subscriptions..." })
      ] }) }) : filteredSubscriptions.length === 0 ? /* @__PURE__ */ jsx125("div", { className: "text-center py-12", children: /* @__PURE__ */ jsxs109("div", { className: "text-text-tertiary", children: [
        /* @__PURE__ */ jsx125("div", { className: "text-4xl mb-4", children: "\u{1F4B3}" }),
        /* @__PURE__ */ jsx125("h3", { className: "text-lg font-medium mb-2", children: "No subscriptions found" }),
        /* @__PURE__ */ jsx125("p", { className: "text-sm", children: "Try adjusting your search or filter criteria." })
      ] }) }) : (
        /* Table with scroll - same structure as ProductTable */
        /* @__PURE__ */ jsx125("div", { className: "flex-1 overflow-auto", children: /* @__PURE__ */ jsxs109("table", { className: "w-full", children: [
          /* @__PURE__ */ jsx125("thead", { className: "bg-bg-secondary border-b border-border sticky top-0 z-10", children: /* @__PURE__ */ jsxs109("tr", { children: [
            /* @__PURE__ */ jsx125("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Merchant" }),
            /* @__PURE__ */ jsx125("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Plan" }),
            /* @__PURE__ */ jsx125("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Amount" }),
            /* @__PURE__ */ jsx125("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Period" }),
            /* @__PURE__ */ jsx125("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Status" }),
            /* @__PURE__ */ jsx125("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Next Billing" }),
            /* @__PURE__ */ jsx125("th", { className: "px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Actions" })
          ] }) }),
          /* @__PURE__ */ jsx125("tbody", { className: "bg-bg-card divide-y divide-border", children: filteredSubscriptions.map((subscription) => /* @__PURE__ */ jsxs109("tr", { className: "hover:bg-bg-secondary transition-colors", children: [
            /* @__PURE__ */ jsx125("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs109("div", { className: "flex items-center gap-3", children: [
              /* @__PURE__ */ jsx125("div", { className: "flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-action-primary to-brand-primary flex items-center justify-center", children: /* @__PURE__ */ jsx125(Building3, { className: "w-5 h-5 text-white" }) }),
              /* @__PURE__ */ jsx125("div", { children: /* @__PURE__ */ jsx125("div", { className: "text-sm font-medium text-text-primary", children: subscription.merchant?.name || "Unknown Merchant" }) })
            ] }) }),
            /* @__PURE__ */ jsx125("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx125("div", { className: "text-sm text-text-primary", children: subscription.plan?.name || "Unknown Plan" }) }),
            /* @__PURE__ */ jsx125("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx125("div", { children: /* @__PURE__ */ jsx125("div", { className: "text-sm font-medium text-text-primary", children: formatCurrency22(subscription.amount, "USD") }) }) }),
            /* @__PURE__ */ jsx125("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx125("div", { className: "text-sm text-text-primary", children: subscription.billingInterval === "month" ? "Monthly" : subscription.billingInterval === "quarter" ? "Quarterly" : subscription.billingInterval === "year" ? "Yearly" : subscription.billingInterval === "semiAnnual" ? "Semi-Annual" : "Custom" }) }),
            /* @__PURE__ */ jsx125("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs109("div", { className: "flex items-center gap-2", children: [
              getStatusBadge(subscription.status),
              isExpiringSoon(subscription.currentPeriodEnd) && /* @__PURE__ */ jsx125(Badge, { className: "bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 text-xs", children: "Expiring" })
            ] }) }),
            /* @__PURE__ */ jsx125("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx125("div", { className: "text-sm text-text-primary", children: formatDate11(subscription.currentPeriodEnd) }) }),
            /* @__PURE__ */ jsx125("td", { className: "px-6 py-4 text-right", children: /* @__PURE__ */ jsxs109(DropdownMenu, { children: [
              /* @__PURE__ */ jsx125(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsx125(
                Button2,
                {
                  variant: "ghost",
                  size: "sm",
                  onClick: () => setOpenMenuId(openMenuId === subscription.id ? null : subscription.id),
                  children: /* @__PURE__ */ jsx125(MoreVertical4, { className: "h-4 w-4" })
                }
              ) }),
              /* @__PURE__ */ jsxs109(
                DropdownMenuContent,
                {
                  align: "end",
                  open: openMenuId === subscription.id,
                  onOpenChange: (open) => setOpenMenuId(open ? subscription.id : null),
                  className: "z-50",
                  children: [
                    /* @__PURE__ */ jsxs109(
                      DropdownMenuItem,
                      {
                        onClick: () => {
                          handleView(subscription);
                          setOpenMenuId(null);
                        },
                        children: [
                          /* @__PURE__ */ jsx125(Eye8, { className: "h-4 w-4 mr-2" }),
                          "View Details"
                        ]
                      }
                    ),
                    /* @__PURE__ */ jsxs109(
                      DropdownMenuItem,
                      {
                        onClick: () => {
                          onEdit?.(subscription);
                          setOpenMenuId(null);
                        },
                        children: [
                          /* @__PURE__ */ jsx125(Edit8, { className: "h-4 w-4 mr-2" }),
                          "Edit"
                        ]
                      }
                    ),
                    canCancel(subscription) && /* @__PURE__ */ jsxs109(Fragment24, { children: [
                      /* @__PURE__ */ jsx125(DropdownMenuSeparator, {}),
                      /* @__PURE__ */ jsxs109(
                        DropdownMenuItem,
                        {
                          onClick: () => {
                            handleCancel(subscription);
                            setOpenMenuId(null);
                          },
                          className: "text-action-danger focus:text-action-danger",
                          children: [
                            /* @__PURE__ */ jsx125(Ban, { className: "h-4 w-4 mr-2" }),
                            "Cancel Subscription"
                          ]
                        }
                      )
                    ] })
                  ]
                }
              )
            ] }) })
          ] }, subscription.id)) })
        ] }) })
      )
    ] }),
    pagination && filteredSubscriptions.length > 0 && pagination.total > pagination.limit && /* @__PURE__ */ jsx125("div", { className: "flex-shrink-0 py-4", children: /* @__PURE__ */ jsx125(
      Pagination,
      {
        currentPage: pagination.page,
        totalPages: Math.ceil(pagination.total / pagination.limit),
        total: pagination.total,
        limit: pagination.limit,
        onPageChange: pagination.onPageChange
      }
    ) }),
    /* @__PURE__ */ jsx125(
      SubscriptionViewDialog,
      {
        subscription: selectedSubscription,
        isOpen: showViewDialog,
        onClose: () => setShowViewDialog(false),
        onEdit: handleEdit,
        onCancel: handleCancel,
        onExtend: handleExtend,
        onSuspend,
        onReactivate,
        onChangePlan: handleChangePlan
      }
    ),
    /* @__PURE__ */ jsx125(
      SubscriptionEditDialog,
      {
        subscription: selectedSubscription,
        plans,
        merchants,
        isOpen: showEditDialog,
        onClose: () => setShowEditDialog(false),
        onSave: handleEditSave,
        loading
      }
    ),
    /* @__PURE__ */ jsx125(
      SubscriptionExtendDialog,
      {
        subscription: selectedSubscription,
        isOpen: showExtendDialog,
        onClose: () => setShowExtendDialog(false),
        onConfirm: handleExtendConfirm,
        loading
      }
    ),
    /* @__PURE__ */ jsx125(
      SubscriptionChangePlanDialog,
      {
        subscription: selectedSubscription,
        plans,
        isOpen: showChangePlanDialog,
        onClose: () => setShowChangePlanDialog(false),
        onConfirm: handleChangePlanConfirm,
        loading
      }
    )
  ] });
}

// src/components/features/Subscriptions/components/SubscriptionForm.tsx
import { useState as useState51, useEffect as useEffect28 } from "react";
import {
  Calendar as Calendar12,
  DollarSign as DollarSign12,
  Users as Users6,
  Building as Building4,
  CreditCard as CreditCard4,
  AlertCircle as AlertCircle10,
  CheckCircle as CheckCircle14
} from "lucide-react";
import { jsx as jsx126, jsxs as jsxs110 } from "react/jsx-runtime";
function SubscriptionForm({
  initialData,
  plans,
  merchants,
  onSubmit,
  onCancel,
  loading = false,
  mode = "create",
  title,
  submitText
}) {
  const [formData, setFormData] = useState51({
    merchantId: initialData?.merchantId || 0,
    planId: initialData?.planId || 0,
    status: initialData?.status || "trial",
    currentPeriodStart: initialData?.currentPeriodStart || /* @__PURE__ */ new Date(),
    currentPeriodEnd: initialData?.currentPeriodEnd || /* @__PURE__ */ new Date(),
    trialStart: initialData?.trialStart,
    trialEnd: initialData?.trialEnd,
    amount: initialData?.amount || 0,
    currency: initialData?.currency || "USD",
    interval: initialData?.interval || "month",
    intervalCount: initialData?.intervalCount || 1,
    period: initialData?.period || 1,
    discount: initialData?.discount || 0,
    savings: initialData?.savings || 0,
    platform: initialData?.platform || "web-mobile",
    cancelAtPeriodEnd: initialData?.cancelAtPeriodEnd || false,
    canceledAt: initialData?.canceledAt,
    cancelReason: initialData?.cancelReason,
    autoRenew: initialData?.autoRenew ?? true,
    changeReason: initialData?.changeReason || "",
    // Initialize additional fields
    startDate: initialData?.currentPeriodStart || /* @__PURE__ */ new Date(),
    endDate: initialData?.currentPeriodEnd || /* @__PURE__ */ new Date(),
    nextBillingDate: initialData?.currentPeriodEnd || /* @__PURE__ */ new Date()
  });
  const [selectedPlan, setSelectedPlan] = useState51(null);
  const [planVariants, setPlanVariants] = useState51([]);
  const [errors, setErrors] = useState51({});
  const [merchantOptions, setMerchantOptions] = useState51([]);
  const [selectedMerchant, setSelectedMerchant] = useState51(null);
  console.log("SubscriptionForm - merchants:", merchants);
  console.log("SubscriptionForm - plans:", plans);
  useEffect28(() => {
    const options = merchants.map((merchant) => ({
      value: merchant.id.toString(),
      label: merchant.name,
      subtitle: merchant.email,
      description: `${merchant.city}, ${merchant.state}`,
      type: "merchant"
    }));
    setMerchantOptions(options);
    if (formData.merchantId && merchants.length > 0) {
      const merchant = merchants.find((m) => m.id === formData.merchantId.toString());
      if (merchant) {
        setSelectedMerchant({
          value: merchant.id.toString(),
          label: merchant.name,
          subtitle: merchant.email,
          description: `${merchant.city}, ${merchant.state}`,
          type: "merchant"
        });
      }
    }
  }, [merchants, formData.merchantId]);
  const handleMerchantSearch = async (query) => {
    if (!query.trim()) {
      return merchantOptions;
    }
    const filtered = merchantOptions.filter(
      (option) => option.label.toLowerCase().includes(query.toLowerCase()) || option.subtitle?.toLowerCase().includes(query.toLowerCase()) || option.description?.toLowerCase().includes(query.toLowerCase())
    );
    return filtered;
  };
  useEffect28(() => {
    const plan = plans.find((p2) => p2.id === formData.planId);
    setSelectedPlan(plan || null);
    if (plan) {
      setPlanVariants([]);
      setFormData((prev) => ({
        ...prev,
        amount: plan.basePrice,
        currency: plan.currency
      }));
    }
  }, [formData.planId, plans]);
  useEffect28(() => {
    if (selectedPlan && formData.status === "trial" && selectedPlan.trialDays > 0) {
      const endDate = new Date(formData.startDate || formData.currentPeriodStart);
      endDate.setDate(endDate.getDate() + selectedPlan.trialDays);
      setFormData((prev) => ({
        ...prev,
        endDate,
        nextBillingDate: endDate,
        amount: 0
        // Trial is free
      }));
    }
  }, [selectedPlan, formData.startDate, formData.status]);
  useEffect28(() => {
    if (formData.status === "ACTIVE" && selectedPlan) {
      const endDate = new Date(formData.startDate || formData.currentPeriodStart);
      endDate.setMonth(endDate.getMonth() + 1);
      setFormData((prev) => ({
        ...prev,
        endDate,
        nextBillingDate: endDate
      }));
    }
  }, [formData.startDate, formData.status, selectedPlan]);
  const validateForm = () => {
    const newErrors = {};
    if (!formData.merchantId) {
      newErrors.merchantId = "Merchant is required";
    }
    if (!formData.planId) {
      newErrors.planId = "Plan is required";
    }
    if (!formData.startDate) {
      newErrors.startDate = "Start date is required";
    }
    if (!formData.nextBillingDate) {
      newErrors.nextBillingDate = "Next billing date is required";
    }
    if (formData.amount < 0) {
      newErrors.amount = "Amount cannot be negative";
    }
    if (formData.status === "TRIAL" && !formData.endDate) {
      newErrors.endDate = "End date is required for trial subscriptions";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    try {
      const submitData = {
        ...formData,
        startDate: formData.startDate,
        endDate: formData.endDate,
        nextBillingDate: formData.nextBillingDate
      };
      await onSubmit(submitData);
    } catch (error2) {
      console.error("Error submitting subscription:", error2);
    }
  };
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({
      ...prev,
      [field]: value
    }));
    if (errors[field]) {
      setErrors((prev) => ({
        ...prev,
        [field]: ""
      }));
    }
  };
  const getStatusBadge = (status) => {
    const statusMap = {
      "TRIAL": "trial",
      "ACTIVE": "active",
      "CANCELLED": "cancelled",
      "SUSPENDED": "warning"
    };
    const mappedStatus = statusMap[status] || status.toLowerCase();
    return /* @__PURE__ */ jsx126(StatusBadge, { status: mappedStatus });
  };
  const formatCurrency22 = (amount, currency = "USD") => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency
    }).format(amount);
  };
  return /* @__PURE__ */ jsxs110("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
    /* @__PURE__ */ jsxs110(Card, { children: [
      /* @__PURE__ */ jsx126(CardHeader, { children: /* @__PURE__ */ jsxs110(CardTitle, { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx126(CreditCard4, { className: "h-5 w-5" }),
        /* @__PURE__ */ jsx126("span", { children: title || (mode === "create" ? "Create Subscription" : "Edit Subscription") })
      ] }) }),
      /* @__PURE__ */ jsxs110(CardContent, { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs110(Label2, { htmlFor: "merchantId", className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx126(Building4, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: "Merchant *" })
          ] }),
          /* @__PURE__ */ jsx126(
            SearchableSelect,
            {
              value: formData.merchantId,
              onChange: (value) => handleInputChange("merchantId", value),
              options: merchantOptions,
              onSearch: handleMerchantSearch,
              placeholder: "Search for a merchant...",
              searchPlaceholder: "Type merchant name, email, or location...",
              emptyText: "No merchants found",
              displayMode: "input",
              className: errors.merchantId ? "border-red-500" : ""
            }
          ),
          errors.merchantId && /* @__PURE__ */ jsxs110("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
            /* @__PURE__ */ jsx126(AlertCircle10, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: errors.merchantId })
          ] })
        ] }),
        /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs110(Label2, { htmlFor: "planId", className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx126(CreditCard4, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: "Plan *" })
          ] }),
          /* @__PURE__ */ jsxs110(
            Select,
            {
              value: formData.planId.toString(),
              onValueChange: (value) => handleInputChange("planId", parseInt(value)),
              disabled: mode === "view",
              children: [
                /* @__PURE__ */ jsx126(SelectTrigger, { className: errors.planId ? "border-red-500" : "", children: /* @__PURE__ */ jsx126(SelectValue, { placeholder: "Select a plan" }) }),
                /* @__PURE__ */ jsx126(SelectContent, { children: plans.map((plan) => /* @__PURE__ */ jsx126(SelectItem, { value: plan.id.toString(), children: /* @__PURE__ */ jsxs110("div", { className: "flex items-center justify-between w-full", children: [
                  /* @__PURE__ */ jsx126("span", { children: plan.name }),
                  /* @__PURE__ */ jsx126("span", { className: "text-sm text-gray-500 ml-2", children: formatCurrency22(plan.basePrice, plan.currency) })
                ] }) }, plan.id)) })
              ]
            }
          ),
          errors.planId && /* @__PURE__ */ jsxs110("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
            /* @__PURE__ */ jsx126(AlertCircle10, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: errors.planId })
          ] })
        ] }),
        planVariants.length > 0 && /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx126(Label2, { htmlFor: "planVariantId", children: "Plan Variant" }),
          /* @__PURE__ */ jsxs110(
            Select,
            {
              value: formData.planVariantId?.toString() || "",
              onValueChange: (value) => handleInputChange("planVariantId", value ? parseInt(value) : void 0),
              disabled: mode === "view",
              children: [
                /* @__PURE__ */ jsx126(SelectTrigger, { children: /* @__PURE__ */ jsx126(SelectValue, { placeholder: "Select a plan variant" }) }),
                /* @__PURE__ */ jsx126(SelectContent, { children: planVariants.map((variant) => /* @__PURE__ */ jsxs110(SelectItem, { value: variant.id.toString(), children: [
                  variant.name,
                  " - ",
                  formatCurrency22(variant.price, formData.currency)
                ] }, variant.id)) })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs110(Label2, { htmlFor: "status", className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx126(CheckCircle14, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: "Status" })
          ] }),
          /* @__PURE__ */ jsxs110(
            Select,
            {
              value: formData.status,
              onValueChange: (value) => handleInputChange("status", value),
              disabled: mode === "view",
              children: [
                /* @__PURE__ */ jsx126(SelectTrigger, { children: /* @__PURE__ */ jsx126(SelectValue, {}) }),
                /* @__PURE__ */ jsxs110(SelectContent, { children: [
                  /* @__PURE__ */ jsx126(SelectItem, { value: "TRIAL", children: "Trial" }),
                  /* @__PURE__ */ jsx126(SelectItem, { value: "ACTIVE", children: "Active" }),
                  /* @__PURE__ */ jsx126(SelectItem, { value: "CANCELLED", children: "Cancelled" }),
                  /* @__PURE__ */ jsx126(SelectItem, { value: "SUSPENDED", children: "Suspended" })
                ] })
              ]
            }
          ),
          /* @__PURE__ */ jsx126("div", { className: "flex items-center space-x-2", children: getStatusBadge(formData.status) })
        ] }),
        /* @__PURE__ */ jsxs110("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxs110(Label2, { htmlFor: "currentPeriodStart", className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx126(Calendar12, { className: "h-4 w-4" }),
              /* @__PURE__ */ jsx126("span", { children: "Start Date *" })
            ] }),
            /* @__PURE__ */ jsx126(
              Input,
              {
                type: "datetime-local",
                value: formData.startDate?.toISOString().slice(0, 16) || "",
                onChange: (e2) => handleInputChange("startDate", new Date(e2.target.value)),
                disabled: mode === "view",
                className: errors.startDate ? "border-red-500" : ""
              }
            ),
            errors.startDate && /* @__PURE__ */ jsxs110("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
              /* @__PURE__ */ jsx126(AlertCircle10, { className: "h-4 w-4" }),
              /* @__PURE__ */ jsx126("span", { children: errors.startDate })
            ] })
          ] }),
          /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxs110(Label2, { htmlFor: "nextBillingDate", className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx126(Calendar12, { className: "h-4 w-4" }),
              /* @__PURE__ */ jsx126("span", { children: "Next Billing Date *" })
            ] }),
            /* @__PURE__ */ jsx126(
              Input,
              {
                type: "datetime-local",
                value: formData.nextBillingDate.toISOString().slice(0, 16),
                onChange: (e2) => handleInputChange("nextBillingDate", new Date(e2.target.value)),
                disabled: mode === "view",
                className: errors.nextBillingDate ? "border-red-500" : ""
              }
            ),
            errors.nextBillingDate && /* @__PURE__ */ jsxs110("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
              /* @__PURE__ */ jsx126(AlertCircle10, { className: "h-4 w-4" }),
              /* @__PURE__ */ jsx126("span", { children: errors.nextBillingDate })
            ] })
          ] })
        ] }),
        formData.status === "TRIAL" && formData.endDate && /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs110(Label2, { htmlFor: "endDate", className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx126(Calendar12, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: "Trial End Date" })
          ] }),
          /* @__PURE__ */ jsx126(
            Input,
            {
              type: "datetime-local",
              value: formData.endDate.toISOString().slice(0, 16),
              onChange: (e2) => handleInputChange("endDate", new Date(e2.target.value)),
              disabled: mode === "view",
              className: errors.endDate ? "border-red-500" : ""
            }
          ),
          errors.endDate && /* @__PURE__ */ jsxs110("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
            /* @__PURE__ */ jsx126(AlertCircle10, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: errors.endDate })
          ] })
        ] }),
        formData.status === "ACTIVE" && formData.endDate && /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs110(Label2, { htmlFor: "endDate", className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx126(Calendar12, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: "End Date" })
          ] }),
          /* @__PURE__ */ jsx126(
            Input,
            {
              type: "datetime-local",
              value: formData.endDate.toISOString().slice(0, 16),
              onChange: (e2) => handleInputChange("endDate", new Date(e2.target.value)),
              disabled: mode === "view"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs110("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxs110(Label2, { htmlFor: "amount", className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsx126(DollarSign12, { className: "h-4 w-4" }),
              /* @__PURE__ */ jsx126("span", { children: "Amount *" })
            ] }),
            /* @__PURE__ */ jsx126(
              Input,
              {
                type: "number",
                step: "0.01",
                min: "0",
                value: formData.amount,
                onChange: (e2) => handleInputChange("amount", parseFloat(e2.target.value) || 0),
                disabled: mode === "view" || formData.status === "TRIAL",
                className: errors.amount ? "border-red-500" : ""
              }
            ),
            errors.amount && /* @__PURE__ */ jsxs110("p", { className: "text-sm text-red-500 flex items-center space-x-1", children: [
              /* @__PURE__ */ jsx126(AlertCircle10, { className: "h-4 w-4" }),
              /* @__PURE__ */ jsx126("span", { children: errors.amount })
            ] })
          ] }),
          /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx126(Label2, { htmlFor: "currency", children: "Currency" }),
            /* @__PURE__ */ jsxs110(
              Select,
              {
                value: formData.currency,
                onValueChange: (value) => handleInputChange("currency", value),
                disabled: mode === "view",
                children: [
                  /* @__PURE__ */ jsx126(SelectTrigger, { children: /* @__PURE__ */ jsx126(SelectValue, {}) }),
                  /* @__PURE__ */ jsxs110(SelectContent, { children: [
                    /* @__PURE__ */ jsx126(SelectItem, { value: "USD", children: "USD" }),
                    /* @__PURE__ */ jsx126(SelectItem, { value: "EUR", children: "EUR" }),
                    /* @__PURE__ */ jsx126(SelectItem, { value: "GBP", children: "GBP" }),
                    /* @__PURE__ */ jsx126(SelectItem, { value: "CAD", children: "CAD" })
                  ] })
                ]
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs110(Label2, { htmlFor: "discount", className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx126(DollarSign12, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: "Discount %" })
          ] }),
          /* @__PURE__ */ jsx126(
            Input,
            {
              type: "number",
              min: "0",
              max: "100",
              step: "0.1",
              value: formData.discount,
              onChange: (e2) => handleInputChange("discount", parseFloat(e2.target.value) || 0),
              placeholder: "0.0",
              disabled: mode === "view",
              className: "w-32"
            }
          ),
          /* @__PURE__ */ jsx126("p", { className: "text-xs text-gray-500", children: "Enter discount percentage (0-100%)" })
        ] }),
        /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs110(Label2, { htmlFor: "platform", className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx126(Users6, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx126("span", { children: "Platform Support" })
          ] }),
          /* @__PURE__ */ jsxs110(
            Select,
            {
              value: formData.platform,
              onValueChange: (value) => handleInputChange("platform", value),
              disabled: mode === "view",
              children: [
                /* @__PURE__ */ jsx126(SelectTrigger, { children: /* @__PURE__ */ jsx126(SelectValue, { placeholder: "Select platform support" }) }),
                /* @__PURE__ */ jsxs110(SelectContent, { children: [
                  /* @__PURE__ */ jsx126(SelectItem, { value: "web-only", children: "Web Only" }),
                  /* @__PURE__ */ jsx126(SelectItem, { value: "mobile-only", children: "Mobile Only" }),
                  /* @__PURE__ */ jsx126(SelectItem, { value: "web-mobile", children: "Web & Mobile" }),
                  /* @__PURE__ */ jsx126(SelectItem, { value: "desktop-only", children: "Desktop Only" }),
                  /* @__PURE__ */ jsx126(SelectItem, { value: "all-platforms", children: "All Platforms" })
                ] })
              ]
            }
          ),
          /* @__PURE__ */ jsx126("p", { className: "text-xs text-gray-500", children: "Select which platforms this subscription supports" })
        ] }),
        /* @__PURE__ */ jsxs110("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx126(
            Switch,
            {
              id: "autoRenew",
              checked: formData.autoRenew,
              onCheckedChange: (checked) => handleInputChange("autoRenew", checked),
              disabled: mode === "view"
            }
          ),
          /* @__PURE__ */ jsx126(Label2, { htmlFor: "autoRenew", children: "Auto-renew subscription" })
        ] }),
        /* @__PURE__ */ jsxs110("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx126(Label2, { htmlFor: "changeReason", children: "Change Reason" }),
          /* @__PURE__ */ jsx126(
            Textarea,
            {
              id: "changeReason",
              placeholder: "Reason for this subscription change...",
              value: formData.changeReason || "",
              onChange: (e2) => handleInputChange("changeReason", e2.target.value),
              disabled: mode === "view",
              rows: 3
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs110("div", { className: "flex items-center justify-end space-x-2", children: [
      /* @__PURE__ */ jsx126(
        Button2,
        {
          type: "button",
          variant: "outline",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      mode !== "view" && /* @__PURE__ */ jsx126(
        Button2,
        {
          type: "submit",
          disabled: loading,
          children: loading ? "Saving..." : submitText || "Save Subscription"
        }
      )
    ] })
  ] });
}

// src/components/features/Subscriptions/components/SubscriptionPreviewPage.tsx
import { useState as useState52, useEffect as useEffect29 } from "react";
import {
  Card as Card34,
  CardHeader as CardHeader27,
  CardTitle as CardTitle27,
  CardContent as CardContent34,
  Button as Button31,
  Badge as Badge16,
  cn as cn5
} from "@rentalshop/ui";
import { publicPlansApi, formatCurrency as formatCurrency12 } from "@rentalshop/utils";
import {
  Check as Check4,
  Users as Users7,
  Store as Store2,
  Package as Package11,
  UserCheck,
  Zap,
  Shield,
  TrendingUp as TrendingUp5
} from "lucide-react";
import { Fragment as Fragment25, jsx as jsx127, jsxs as jsxs111 } from "react/jsx-runtime";
var SubscriptionPreviewPage = ({
  onSelectPlan,
  showSelectButton = true,
  className
}) => {
  const [plans, setPlans] = useState52([]);
  const [loading, setLoading] = useState52(true);
  const [error2, setError] = useState52(null);
  const [selectedPlan, setSelectedPlan] = useState52(null);
  const [selectedDuration, setSelectedDuration] = useState52(1);
  useEffect29(() => {
    fetchPlans();
  }, []);
  const fetchPlans = async () => {
    try {
      setLoading(true);
      setError(null);
      const response = await publicPlansApi.getPublicPlansWithVariants();
      if (response.success && response.data) {
        setPlans(response.data);
      } else {
        setError(response.error || "Failed to fetch plans");
      }
    } catch (err) {
      console.error("Error fetching plans:", err);
      setError("Failed to fetch plans");
    } finally {
      setLoading(false);
    }
  };
  const handlePlanSelect = (plan, duration) => {
    setSelectedPlan(plan);
    setSelectedDuration(duration);
    if (onSelectPlan) {
      onSelectPlan(plan, duration);
    }
  };
  const getFeatureIcon = (feature) => {
    const featureLower = feature.toLowerCase();
    if (featureLower.includes("outlet") || featureLower.includes("store")) {
      return /* @__PURE__ */ jsx127(Store2, { className: "w-4 h-4" });
    }
    if (featureLower.includes("user") || featureLower.includes("staff")) {
      return /* @__PURE__ */ jsx127(Users7, { className: "w-4 h-4" });
    }
    if (featureLower.includes("product") || featureLower.includes("inventory")) {
      return /* @__PURE__ */ jsx127(Package11, { className: "w-4 h-4" });
    }
    if (featureLower.includes("customer")) {
      return /* @__PURE__ */ jsx127(UserCheck, { className: "w-4 h-4" });
    }
    if (featureLower.includes("analytics") || featureLower.includes("report")) {
      return /* @__PURE__ */ jsx127(TrendingUp5, { className: "w-4 h-4" });
    }
    if (featureLower.includes("security") || featureLower.includes("secure")) {
      return /* @__PURE__ */ jsx127(Shield, { className: "w-4 h-4" });
    }
    if (featureLower.includes("performance") || featureLower.includes("speed")) {
      return /* @__PURE__ */ jsx127(Zap, { className: "w-4 h-4" });
    }
    return /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4" });
  };
  const getDurationText = (duration) => {
    if (duration === 1)
      return "1 Month";
    if (duration === 3)
      return "3 Months";
    if (duration === 6)
      return "6 Months";
    if (duration === 12)
      return "1 Year";
    return `${duration} Months`;
  };
  const getDiscountBadgeColor = (discount) => {
    if (discount >= 20)
      return "bg-red-100 text-red-800 border-red-200";
    if (discount >= 10)
      return "bg-orange-100 text-orange-800 border-orange-200";
    if (discount > 0)
      return "bg-green-100 text-green-800 border-green-200";
    return "bg-gray-100 text-gray-800 border-gray-200";
  };
  const getPlatformDisplayText = (platform) => {
    switch (platform) {
      case "web-only":
        return "Web Only";
      case "mobile-only":
        return "Mobile Only";
      case "web-mobile":
        return "Web & Mobile";
      case "desktop-only":
        return "Desktop Only";
      case "all-platforms":
        return "All Platforms";
      default:
        return "Web & Mobile";
    }
  };
  const getPlatformIcon = (platform) => {
    switch (platform) {
      case "web-only":
        return /* @__PURE__ */ jsx127(Package11, { className: "w-4 h-4" });
      case "mobile-only":
        return /* @__PURE__ */ jsx127(Zap, { className: "w-4 h-4" });
      case "web-mobile":
        return /* @__PURE__ */ jsx127(Shield, { className: "w-4 h-4" });
      case "desktop-only":
        return /* @__PURE__ */ jsx127(TrendingUp5, { className: "w-4 h-4" });
      case "all-platforms":
        return /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4" });
      default:
        return /* @__PURE__ */ jsx127(Shield, { className: "w-4 h-4" });
    }
  };
  if (loading) {
    return /* @__PURE__ */ jsx127("div", { className: "min-h-screen bg-gray-50 py-12", children: /* @__PURE__ */ jsx127("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: /* @__PURE__ */ jsxs111("div", { className: "text-center", children: [
      /* @__PURE__ */ jsx127("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto" }),
      /* @__PURE__ */ jsx127("p", { className: "mt-4 text-gray-600", children: "Loading subscription plans..." })
    ] }) }) });
  }
  if (error2) {
    return /* @__PURE__ */ jsx127("div", { className: "min-h-screen bg-gray-50 py-12", children: /* @__PURE__ */ jsx127("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: /* @__PURE__ */ jsx127("div", { className: "text-center", children: /* @__PURE__ */ jsxs111("div", { className: "bg-red-50 border border-red-200 rounded-lg p-6", children: [
      /* @__PURE__ */ jsx127("p", { className: "text-red-800", children: error2 }),
      /* @__PURE__ */ jsx127(
        Button31,
        {
          onClick: fetchPlans,
          className: "mt-4",
          variant: "outline",
          children: "Try Again"
        }
      )
    ] }) }) }) });
  }
  const durations = [1, 3, 6, 12];
  const getDiscountForDuration = (duration) => {
    if (duration === 1)
      return 0;
    if (duration === 3)
      return 10;
    if (duration === 6)
      return 15;
    if (duration === 12)
      return 20;
    return 0;
  };
  const calculatePlanPricing = (plan, duration) => {
    const basePrice = plan.basePrice;
    const discount = getDiscountForDuration(duration);
    const discountedPrice = basePrice * (1 - discount / 100);
    const totalSavings = basePrice * duration - discountedPrice * duration;
    return {
      basePrice,
      discount,
      discountedPrice,
      totalSavings,
      monthlyPrice: discountedPrice,
      totalPrice: discountedPrice * duration
    };
  };
  return /* @__PURE__ */ jsx127("div", { className: cn5("min-h-screen bg-white py-12", className), children: /* @__PURE__ */ jsxs111("div", { className: "max-w-6xl mx-auto px-4 sm:px-6 lg:px-8", children: [
    /* @__PURE__ */ jsxs111("div", { className: "text-center mb-12", children: [
      /* @__PURE__ */ jsx127("h1", { className: "text-4xl font-bold text-gray-900 mb-4", children: "Choose Your Subscription Plan" }),
      /* @__PURE__ */ jsx127("p", { className: "text-xl text-gray-600 max-w-3xl mx-auto", children: "Start with our free trial plan or choose a paid plan that fits your business needs." })
    ] }),
    durations.length > 0 && /* @__PURE__ */ jsx127("div", { className: "flex justify-center mb-12", children: /* @__PURE__ */ jsx127("div", { className: "flex bg-gray-100 rounded-lg p-1", children: durations.map((duration) => {
      const discount = getDiscountForDuration(duration);
      const isSelected = selectedDuration === duration;
      return /* @__PURE__ */ jsxs111(
        Button31,
        {
          variant: isSelected ? "default" : "ghost",
          onClick: () => setSelectedDuration(duration),
          className: cn5(
            "px-6 py-3 rounded-md text-sm font-medium transition-all duration-200 relative",
            isSelected ? "bg-blue-600 text-white shadow-sm" : "text-gray-600 hover:text-gray-900 hover:bg-gray-50"
          ),
          children: [
            /* @__PURE__ */ jsxs111("div", { className: "text-center", children: [
              /* @__PURE__ */ jsx127("div", { className: "font-semibold", children: duration === 1 ? "Monthly" : duration === 3 ? "Quarterly" : duration === 6 ? "6 Months" : duration === 12 ? "Yearly" : `${duration} months` }),
              discount > 0 ? /* @__PURE__ */ jsxs111("div", { className: "text-xs opacity-90 font-medium", children: [
                "Save ",
                discount,
                "%"
              ] }) : /* @__PURE__ */ jsx127("div", { className: "text-xs opacity-90", children: "Standard" })
            ] }),
            discount > 0 && /* @__PURE__ */ jsx127("div", { className: "absolute -top-1 -right-1", children: /* @__PURE__ */ jsxs111("div", { className: "bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold", children: [
              discount,
              "%"
            ] }) })
          ]
        },
        duration
      );
    }) }) }),
    /* @__PURE__ */ jsx127("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-12", children: plans.map((plan) => {
      const pricing = calculatePlanPricing(plan, selectedDuration);
      return /* @__PURE__ */ jsxs111(
        Card34,
        {
          className: cn5(
            "relative transition-all duration-200 hover:shadow-lg bg-white border-2",
            plan.isPopular ? "border-blue-500 shadow-lg" : "border-gray-200 hover:border-gray-300"
          ),
          children: [
            plan.isPopular && /* @__PURE__ */ jsx127("div", { className: "absolute -top-3 left-1/2 transform -translate-x-1/2", children: /* @__PURE__ */ jsx127(Badge16, { className: "bg-blue-600 text-white px-4 py-1 rounded-full text-sm font-medium", children: "Most Popular" }) }),
            /* @__PURE__ */ jsxs111(CardHeader27, { className: "text-center pb-4 pt-8", children: [
              /* @__PURE__ */ jsx127(CardTitle27, { className: "text-2xl font-bold text-gray-900 mb-2", children: plan.name }),
              /* @__PURE__ */ jsx127("p", { className: "text-gray-600 text-sm mb-4", children: plan.description }),
              /* @__PURE__ */ jsx127("div", { className: "mb-4", children: plan.name === "Trial" ? /* @__PURE__ */ jsxs111("div", { children: [
                /* @__PURE__ */ jsx127("span", { className: "text-3xl font-bold text-green-600", children: "Free" }),
                /* @__PURE__ */ jsx127("div", { className: "text-sm text-gray-600 mt-1", children: "14-day trial" })
              ] }) : /* @__PURE__ */ jsxs111("div", { className: "space-y-2", children: [
                /* @__PURE__ */ jsxs111("div", { className: "flex items-baseline justify-center", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-3xl font-bold text-gray-900", children: formatCurrency12(pricing.monthlyPrice, plan.currency) }),
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-600 ml-1 text-sm", children: "/month" })
                ] }),
                pricing.discount > 0 && /* @__PURE__ */ jsxs111("div", { className: "text-center space-y-1", children: [
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-center gap-2", children: [
                    /* @__PURE__ */ jsxs111("span", { className: "text-sm text-gray-500 line-through", children: [
                      formatCurrency12(pricing.basePrice, plan.currency),
                      "/month"
                    ] }),
                    /* @__PURE__ */ jsxs111(Badge16, { className: cn5("text-xs font-medium", getDiscountBadgeColor(pricing.discount)), children: [
                      pricing.discount,
                      "% OFF"
                    ] })
                  ] }),
                  /* @__PURE__ */ jsxs111("div", { className: "text-sm text-green-600 font-medium", children: [
                    "Save ",
                    formatCurrency12(pricing.totalSavings, plan.currency),
                    " total"
                  ] })
                ] }),
                selectedDuration > 1 && /* @__PURE__ */ jsxs111("div", { className: "text-center", children: [
                  /* @__PURE__ */ jsxs111("div", { className: "text-sm text-gray-600", children: [
                    "Total for ",
                    selectedDuration,
                    " month",
                    selectedDuration > 1 ? "s" : "",
                    ":"
                  ] }),
                  /* @__PURE__ */ jsx127("div", { className: "text-lg font-semibold text-gray-900", children: formatCurrency12(pricing.totalPrice, plan.currency) })
                ] })
              ] }) })
            ] }),
            /* @__PURE__ */ jsxs111(CardContent34, { className: "pt-0", children: [
              /* @__PURE__ */ jsxs111("div", { className: "space-y-3 mb-6", children: [
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Outlets" }),
                  /* @__PURE__ */ jsx127("span", { className: "font-medium text-gray-900", children: plan.limits.outlets === -1 ? "Unlimited" : plan.limits.outlets })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Users" }),
                  /* @__PURE__ */ jsx127("span", { className: "font-medium text-gray-900", children: plan.limits.users === -1 ? "Unlimited" : plan.limits.users })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Products" }),
                  /* @__PURE__ */ jsx127("span", { className: "font-medium text-gray-900", children: plan.limits.products === -1 ? "Unlimited" : plan.limits.products.toLocaleString() })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Customers" }),
                  /* @__PURE__ */ jsx127("span", { className: "font-medium text-gray-900", children: plan.limits.customers === -1 ? "Unlimited" : plan.limits.customers.toLocaleString() })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Trial Period" }),
                  /* @__PURE__ */ jsxs111("span", { className: "font-medium text-gray-900", children: [
                    plan.trialDays,
                    " days"
                  ] })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Platform" }),
                  /* @__PURE__ */ jsx127("span", { className: "font-medium text-gray-900", children: /* @__PURE__ */ jsxs111("span", { className: "inline-flex items-center gap-1 text-green-600", children: [
                    getPlatformIcon("web-mobile"),
                    getPlatformDisplayText("web-mobile")
                  ] }) })
                ] })
              ] }),
              plan.features && plan.features.length > 0 && /* @__PURE__ */ jsxs111("div", { className: "space-y-3 mb-6", children: [
                /* @__PURE__ */ jsx127("h4", { className: "text-sm font-semibold text-gray-900 mb-2", children: "Features" }),
                plan.features.map((feature, index) => /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: feature }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }, index))
              ] }),
              /* @__PURE__ */ jsxs111("div", { className: "space-y-3 mb-6", children: [
                /* @__PURE__ */ jsx127("h4", { className: "text-sm font-semibold text-gray-900 mb-2", children: "Core Features" }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Order Management" }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Product Management" }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Customer Management" }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Revenue Reports" }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Web Portal" }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Mobile App" }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Free Updates" }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }),
                /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Email Support" }),
                  /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                ] }),
                plan.name === "Professional" && /* @__PURE__ */ jsxs111(Fragment25, { children: [
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Priority Support" }),
                    /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                  ] }),
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "API Access" }),
                    /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                  ] }),
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Team Collaboration" }),
                    /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                  ] })
                ] }),
                plan.name === "Enterprise" && /* @__PURE__ */ jsxs111(Fragment25, { children: [
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "24/7 Priority Support" }),
                    /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                  ] }),
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Full API Access" }),
                    /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                  ] }),
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "White-label Solution" }),
                    /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                  ] }),
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "Dedicated Account Manager" }),
                    /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                  ] }),
                  /* @__PURE__ */ jsxs111("div", { className: "flex items-center justify-between text-sm", children: [
                    /* @__PURE__ */ jsx127("span", { className: "text-gray-700", children: "SLA Guarantee" }),
                    /* @__PURE__ */ jsx127(Check4, { className: "w-4 h-4 text-green-500" })
                  ] })
                ] })
              ] }),
              showSelectButton && /* @__PURE__ */ jsx127(
                Button31,
                {
                  className: "w-full",
                  variant: plan.isPopular ? "default" : plan.name === "Trial" ? "default" : "outline",
                  onClick: () => {
                    handlePlanSelect(plan, selectedDuration);
                  },
                  children: selectedPlan?.id === plan.id ? "Selected" : plan.name === "Trial" ? "Start Free Trial" : "Select Plan"
                }
              )
            ] })
          ]
        },
        plan.id
      );
    }) }),
    selectedPlan && /* @__PURE__ */ jsxs111("div", { className: "bg-white rounded-lg shadow-lg p-6 border border-gray-200", children: [
      /* @__PURE__ */ jsx127("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Selected Plan Summary" }),
      /* @__PURE__ */ jsxs111("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: [
        /* @__PURE__ */ jsxs111("div", { children: [
          /* @__PURE__ */ jsx127("p", { className: "text-sm text-gray-600", children: "Plan" }),
          /* @__PURE__ */ jsx127("p", { className: "font-medium text-gray-900", children: selectedPlan.name })
        ] }),
        /* @__PURE__ */ jsxs111("div", { children: [
          /* @__PURE__ */ jsx127("p", { className: "text-sm text-gray-600", children: "Billing Period" }),
          /* @__PURE__ */ jsx127("p", { className: "font-medium text-gray-900", children: selectedDuration === 1 ? "Monthly" : selectedDuration === 3 ? "Quarterly" : selectedDuration === 6 ? "6 Months" : selectedDuration === 12 ? "Yearly" : `${selectedDuration} months` })
        ] }),
        /* @__PURE__ */ jsxs111("div", { children: [
          /* @__PURE__ */ jsx127("p", { className: "text-sm text-gray-600", children: "Monthly Price" }),
          /* @__PURE__ */ jsxs111("p", { className: "font-medium text-gray-900", children: [
            formatCurrency12(calculatePlanPricing(selectedPlan, selectedDuration).monthlyPrice, selectedPlan.currency),
            calculatePlanPricing(selectedPlan, selectedDuration).discount > 0 && /* @__PURE__ */ jsxs111("span", { className: "text-green-600 ml-2 text-sm", children: [
              "(",
              calculatePlanPricing(selectedPlan, selectedDuration).discount,
              "% OFF)"
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs111("div", { children: [
          /* @__PURE__ */ jsx127("p", { className: "text-sm text-gray-600", children: "Total Price" }),
          /* @__PURE__ */ jsxs111("p", { className: "font-medium text-gray-900", children: [
            formatCurrency12(calculatePlanPricing(selectedPlan, selectedDuration).totalPrice, selectedPlan.currency),
            calculatePlanPricing(selectedPlan, selectedDuration).discount > 0 && /* @__PURE__ */ jsxs111("div", { className: "text-xs text-green-600", children: [
              "Save ",
              formatCurrency12(calculatePlanPricing(selectedPlan, selectedDuration).totalSavings, selectedPlan.currency)
            ] })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsx127("div", { className: "text-center mt-12 text-gray-600", children: /* @__PURE__ */ jsx127("p", { className: "text-sm", children: "All plans include 24/7 support and can be upgraded or downgraded at any time." }) })
  ] }) });
};

// src/components/features/Subscriptions/components/PlanSelectionModal.tsx
import { useState as useState53, useEffect as useEffect30 } from "react";
import {
  Dialog as Dialog10,
  DialogContent as DialogContent10,
  DialogHeader as DialogHeader10,
  DialogTitle as DialogTitle10,
  Button as Button32,
  Card as Card35,
  CardContent as CardContent35,
  CardHeader as CardHeader28,
  CardTitle as CardTitle28,
  Badge as Badge17,
  Select as Select10,
  SelectContent as SelectContent10,
  SelectItem as SelectItem10,
  SelectTrigger as SelectTrigger10,
  SelectValue as SelectValue10,
  Separator as Separator5
} from "@rentalshop/ui";
import {
  Check as Check5,
  CreditCard as CreditCard5,
  AlertTriangle as AlertTriangle7,
  Clock as Clock9,
  Shield as Shield2,
  Zap as Zap2
} from "lucide-react";
import { jsx as jsx128, jsxs as jsxs112 } from "react/jsx-runtime";
var BILLING_CYCLES2 = [
  {
    value: "monthly",
    label: "Monthly",
    months: 1,
    discount: 0,
    description: "Pay monthly, cancel anytime"
  },
  {
    value: "quarterly",
    label: "Quarterly",
    months: 3,
    discount: 10,
    description: "Save 10% with quarterly billing"
  },
  {
    value: "semi_annual",
    label: "Semi-Annual",
    months: 6,
    discount: 15,
    description: "Save 15% with semi-annual billing"
  },
  {
    value: "annual",
    label: "Annual",
    months: 12,
    discount: 25,
    description: "Save 25% with annual billing"
  }
];
var PAYMENT_METHODS = [
  { value: "STRIPE", label: "Credit Card (Stripe)", icon: CreditCard5 },
  { value: "PAYPAL", label: "PayPal", icon: CreditCard5 },
  { value: "BANK_TRANSFER", label: "Bank Transfer", icon: CreditCard5 },
  { value: "MANUAL", label: "Manual Payment", icon: CreditCard5 }
];
var PlanSelectionModal = ({
  isOpen,
  onClose,
  onSelectPlan,
  plans,
  currentPlan,
  loading = false
}) => {
  const [selectedPlan, setSelectedPlan] = useState53(null);
  const [selectedBillingCycle, setSelectedBillingCycle] = useState53("monthly");
  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState53("STRIPE");
  const [calculatedPrice, setCalculatedPrice] = useState53(0);
  useEffect30(() => {
    if (selectedPlan) {
      const billingCycle = BILLING_CYCLES2.find((bc) => bc.value === selectedBillingCycle);
      if (billingCycle) {
        const basePrice = selectedPlan.price;
        const discount = billingCycle.discount / 100;
        const discountedPrice = basePrice * (1 - discount);
        const totalPrice = discountedPrice * billingCycle.months;
        setCalculatedPrice(Math.round(totalPrice * 100) / 100);
      }
    }
  }, [selectedPlan, selectedBillingCycle]);
  const handlePlanSelect = (plan) => {
    setSelectedPlan(plan);
  };
  const handleBillingCycleChange = (value) => {
    setSelectedBillingCycle(value);
  };
  const handlePaymentMethodChange = (value) => {
    setSelectedPaymentMethod(value);
  };
  const handleConfirm = () => {
    if (selectedPlan) {
      onSelectPlan(selectedPlan.id, selectedBillingCycle);
    }
  };
  const getFeatureIcon = (feature) => {
    if (feature.toLowerCase().includes("unlimited"))
      return Zap2;
    if (feature.toLowerCase().includes("security") || feature.toLowerCase().includes("secure"))
      return Shield2;
    if (feature.toLowerCase().includes("support"))
      return Shield2;
    return Check5;
  };
  const formatPrice = (price, currency = "USD") => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency
    }).format(price);
  };
  const getBillingCycleInfo = () => {
    return BILLING_CYCLES2.find((bc) => bc.value === selectedBillingCycle);
  };
  return /* @__PURE__ */ jsx128(Dialog10, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxs112(DialogContent10, { className: "max-w-6xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsx128(DialogHeader10, { children: /* @__PURE__ */ jsxs112(DialogTitle10, { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx128(AlertTriangle7, { className: "h-5 w-5 text-orange-500" }),
      "Subscription Expired - Select a Plan"
    ] }) }),
    /* @__PURE__ */ jsxs112("div", { className: "space-y-6", children: [
      currentPlan && /* @__PURE__ */ jsx128(Card35, { className: "border-orange-200 bg-orange-50", children: /* @__PURE__ */ jsxs112(CardContent35, { className: "pt-6", children: [
        /* @__PURE__ */ jsxs112("div", { className: "flex items-center gap-2 text-orange-700", children: [
          /* @__PURE__ */ jsx128(Clock9, { className: "h-4 w-4" }),
          /* @__PURE__ */ jsxs112("span", { className: "font-medium", children: [
            "Current Plan: ",
            currentPlan.name
          ] }),
          /* @__PURE__ */ jsx128(Badge17, { variant: "destructive", children: "Expired" })
        ] }),
        /* @__PURE__ */ jsx128("p", { className: "text-sm text-orange-600 mt-1", children: "Your subscription has expired. Please select a new plan to continue using the service." })
      ] }) }),
      /* @__PURE__ */ jsxs112("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx128("h3", { className: "text-lg font-semibold", children: "Choose Your Plan" }),
        /* @__PURE__ */ jsx128("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: plans.map((plan) => /* @__PURE__ */ jsxs112(
          Card35,
          {
            className: `cursor-pointer transition-all hover:shadow-md ${selectedPlan?.id === plan.id ? "ring-2 ring-blue-500 border-blue-500" : "hover:border-gray-300"} ${plan.isPopular ? "border-blue-500 bg-blue-50" : ""}`,
            onClick: () => handlePlanSelect(plan),
            children: [
              /* @__PURE__ */ jsxs112(CardHeader28, { className: "pb-3", children: [
                /* @__PURE__ */ jsxs112("div", { className: "flex items-center justify-between", children: [
                  /* @__PURE__ */ jsx128(CardTitle28, { className: "text-lg", children: plan.name }),
                  plan.isPopular && /* @__PURE__ */ jsx128(Badge17, { className: "bg-blue-500", children: "Most Popular" })
                ] }),
                /* @__PURE__ */ jsxs112("div", { className: "text-2xl font-bold text-blue-600", children: [
                  formatPrice(plan.price, plan.currency),
                  /* @__PURE__ */ jsxs112("span", { className: "text-sm font-normal text-gray-500", children: [
                    "/",
                    plan.billingCycle
                  ] })
                ] }),
                /* @__PURE__ */ jsx128("p", { className: "text-sm text-gray-600", children: plan.description })
              ] }),
              /* @__PURE__ */ jsx128(CardContent35, { className: "pt-0", children: /* @__PURE__ */ jsx128("div", { className: "space-y-2", children: (typeof plan.features === "string" ? JSON.parse(plan.features) : plan.features || []).map((feature, index) => {
                const Icon2 = getFeatureIcon(feature);
                return /* @__PURE__ */ jsxs112("div", { className: "flex items-center gap-2 text-sm", children: [
                  /* @__PURE__ */ jsx128(Icon2, { className: "h-4 w-4 text-green-500" }),
                  /* @__PURE__ */ jsx128("span", { children: feature })
                ] }, index);
              }) }) })
            ]
          },
          plan.id
        )) })
      ] }),
      selectedPlan && /* @__PURE__ */ jsxs112("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx128("h3", { className: "text-lg font-semibold", children: "Choose Billing Cycle" }),
        /* @__PURE__ */ jsx128("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3", children: BILLING_CYCLES2.map((cycle) => /* @__PURE__ */ jsx128(
          Card35,
          {
            className: `cursor-pointer transition-all hover:shadow-md ${selectedBillingCycle === cycle.value ? "ring-2 ring-blue-500 border-blue-500" : "hover:border-gray-300"}`,
            onClick: () => handleBillingCycleChange(cycle.value),
            children: /* @__PURE__ */ jsx128(CardContent35, { className: "pt-4", children: /* @__PURE__ */ jsxs112("div", { className: "text-center", children: [
              /* @__PURE__ */ jsx128("h4", { className: "font-semibold", children: cycle.label }),
              cycle.discount > 0 && /* @__PURE__ */ jsxs112(Badge17, { className: "mt-1 bg-green-500", children: [
                "Save ",
                cycle.discount,
                "%"
              ] }),
              /* @__PURE__ */ jsx128("p", { className: "text-xs text-gray-600 mt-2", children: cycle.description })
            ] }) })
          },
          cycle.value
        )) })
      ] }),
      selectedPlan && /* @__PURE__ */ jsxs112("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx128("h3", { className: "text-lg font-semibold", children: "Payment Method" }),
        /* @__PURE__ */ jsxs112(Select10, { value: selectedPaymentMethod, onValueChange: handlePaymentMethodChange, children: [
          /* @__PURE__ */ jsx128(SelectTrigger10, { children: /* @__PURE__ */ jsx128(SelectValue10, { placeholder: "Select payment method" }) }),
          /* @__PURE__ */ jsx128(SelectContent10, { children: PAYMENT_METHODS.map((method) => {
            const Icon2 = method.icon;
            return /* @__PURE__ */ jsx128(SelectItem10, { value: method.value, children: /* @__PURE__ */ jsxs112("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx128(Icon2, { className: "h-4 w-4" }),
              method.label
            ] }) }, method.value);
          }) })
        ] })
      ] }),
      selectedPlan && /* @__PURE__ */ jsx128(Card35, { className: "bg-gray-50", children: /* @__PURE__ */ jsx128(CardContent35, { className: "pt-4", children: /* @__PURE__ */ jsxs112("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxs112("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx128("span", { className: "font-medium", children: "Plan:" }),
          /* @__PURE__ */ jsx128("span", { children: selectedPlan.name })
        ] }),
        /* @__PURE__ */ jsxs112("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx128("span", { className: "font-medium", children: "Billing Cycle:" }),
          /* @__PURE__ */ jsx128("span", { children: getBillingCycleInfo()?.label })
        ] }),
        /* @__PURE__ */ jsxs112("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx128("span", { className: "font-medium", children: "Base Price:" }),
          /* @__PURE__ */ jsx128("span", { children: formatPrice(selectedPlan.price, selectedPlan.currency) })
        ] }),
        getBillingCycleInfo()?.discount > 0 && /* @__PURE__ */ jsxs112("div", { className: "flex justify-between items-center text-green-600", children: [
          /* @__PURE__ */ jsxs112("span", { className: "font-medium", children: [
            "Discount (",
            getBillingCycleInfo()?.discount,
            "%):"
          ] }),
          /* @__PURE__ */ jsxs112("span", { children: [
            "-",
            formatPrice(selectedPlan.price * getBillingCycleInfo().discount / 100, selectedPlan.currency)
          ] })
        ] }),
        /* @__PURE__ */ jsx128(Separator5, {}),
        /* @__PURE__ */ jsxs112("div", { className: "flex justify-between items-center text-lg font-bold", children: [
          /* @__PURE__ */ jsx128("span", { children: "Total:" }),
          /* @__PURE__ */ jsx128("span", { className: "text-blue-600", children: formatPrice(calculatedPrice, selectedPlan.currency) })
        ] })
      ] }) }) }),
      /* @__PURE__ */ jsxs112("div", { className: "flex justify-end gap-3", children: [
        /* @__PURE__ */ jsx128(Button32, { variant: "outline", onClick: onClose, children: "Cancel" }),
        /* @__PURE__ */ jsx128(
          Button32,
          {
            onClick: handleConfirm,
            disabled: !selectedPlan || loading,
            className: "bg-blue-600 hover:bg-blue-700",
            children: loading ? "Processing..." : "Continue with Payment"
          }
        )
      ] })
    ] })
  ] }) });
};

// src/components/features/Subscriptions/components/SubscriptionStatusBanner.tsx
import {
  AlertTriangle as AlertTriangle8,
  CreditCard as CreditCard6,
  Download as Download4,
  Clock as Clock10,
  Shield as Shield3,
  XCircle as XCircle8,
  CheckCircle as CheckCircle15,
  Info as Info6
} from "lucide-react";
import { useSubscriptionStatusInfo } from "@rentalshop/hooks";
import { jsx as jsx129, jsxs as jsxs113 } from "react/jsx-runtime";
function SubscriptionStatusBanner({
  className = "",
  showActions = true,
  onUpgrade,
  onPayment,
  onExport
}) {
  const {
    statusMessage,
    statusColor,
    hasAccess,
    accessLevel,
    requiresPayment,
    upgradeRequired,
    gracePeriodEnds,
    canExportData,
    isRestricted,
    isReadOnly,
    isLimited,
    isDenied
  } = useSubscriptionStatusInfo();
  if (!isRestricted) {
    return null;
  }
  const getStatusIcon5 = () => {
    if (isDenied)
      return /* @__PURE__ */ jsx129(XCircle8, { className: "w-5 h-5" });
    if (isReadOnly)
      return /* @__PURE__ */ jsx129(Shield3, { className: "w-5 h-5" });
    if (isLimited)
      return /* @__PURE__ */ jsx129(Clock10, { className: "w-5 h-5" });
    if (requiresPayment)
      return /* @__PURE__ */ jsx129(CreditCard6, { className: "w-5 h-5" });
    if (upgradeRequired)
      return /* @__PURE__ */ jsx129(AlertTriangle8, { className: "w-5 h-5" });
    return /* @__PURE__ */ jsx129(Info6, { className: "w-5 h-5" });
  };
  const getStatusVariant = () => {
    switch (statusColor) {
      case "red":
        return "destructive";
      case "orange":
        return "default";
      case "yellow":
        return "default";
      case "green":
        return "default";
      default:
        return "default";
    }
  };
  const getStatusBadgeVariant = () => {
    switch (accessLevel) {
      case "denied":
        return "destructive";
      case "limited":
        return "secondary";
      case "readonly":
        return "outline";
      default:
        return "default";
    }
  };
  return /* @__PURE__ */ jsx129(Alert, { className: `${className} ${getStatusVariant()}`, children: /* @__PURE__ */ jsxs113("div", { className: "flex items-start justify-between", children: [
    /* @__PURE__ */ jsxs113("div", { className: "flex items-start space-x-3", children: [
      getStatusIcon5(),
      /* @__PURE__ */ jsxs113("div", { className: "flex-1", children: [
        /* @__PURE__ */ jsxs113(AlertTitle, { className: "flex items-center gap-2", children: [
          "Subscription Status",
          /* @__PURE__ */ jsx129(Badge, { variant: getStatusBadgeVariant(), children: accessLevel.toUpperCase() })
        ] }),
        /* @__PURE__ */ jsx129(AlertDescription, { className: "mt-1", children: statusMessage }),
        gracePeriodEnds && /* @__PURE__ */ jsxs113("div", { className: "mt-2 text-sm text-muted-foreground", children: [
          /* @__PURE__ */ jsx129(Clock10, { className: "w-4 h-4 inline mr-1" }),
          "Grace period ends: ",
          gracePeriodEnds.toLocaleDateString()
        ] })
      ] })
    ] }),
    showActions && /* @__PURE__ */ jsxs113("div", { className: "flex items-center space-x-2 ml-4", children: [
      upgradeRequired && onUpgrade && /* @__PURE__ */ jsxs113(Button2, { size: "sm", onClick: onUpgrade, children: [
        /* @__PURE__ */ jsx129(CheckCircle15, { className: "w-4 h-4 mr-1" }),
        "Upgrade Now"
      ] }),
      requiresPayment && onPayment && /* @__PURE__ */ jsxs113(Button2, { size: "sm", variant: "outline", onClick: onPayment, children: [
        /* @__PURE__ */ jsx129(CreditCard6, { className: "w-4 h-4 mr-1" }),
        "Make Payment"
      ] }),
      canExportData && onExport && /* @__PURE__ */ jsxs113(Button2, { size: "sm", variant: "outline", onClick: onExport, children: [
        /* @__PURE__ */ jsx129(Download4, { className: "w-4 h-4 mr-1" }),
        "Export Data"
      ] })
    ] })
  ] }) });
}
function SubscriptionStatusCard({
  className = "",
  showActions = true,
  onUpgrade,
  onPayment,
  onExport
}) {
  const {
    statusMessage,
    statusColor,
    hasAccess,
    accessLevel,
    requiresPayment,
    upgradeRequired,
    gracePeriodEnds,
    canExportData,
    isRestricted,
    isReadOnly,
    isLimited,
    isDenied
  } = useSubscriptionStatusInfo();
  if (!isRestricted) {
    return null;
  }
  const getStatusIcon5 = () => {
    if (isDenied)
      return /* @__PURE__ */ jsx129(XCircle8, { className: "w-6 h-6 text-red-500" });
    if (isReadOnly)
      return /* @__PURE__ */ jsx129(Shield3, { className: "w-6 h-6 text-yellow-500" });
    if (isLimited)
      return /* @__PURE__ */ jsx129(Clock10, { className: "w-6 h-6 text-orange-500" });
    if (requiresPayment)
      return /* @__PURE__ */ jsx129(CreditCard6, { className: "w-6 h-6 text-orange-500" });
    if (upgradeRequired)
      return /* @__PURE__ */ jsx129(AlertTriangle8, { className: "w-6 h-6 text-red-500" });
    return /* @__PURE__ */ jsx129(Info6, { className: "w-6 h-6 text-blue-500" });
  };
  const getStatusColor11 = () => {
    switch (statusColor) {
      case "red":
        return "border-red-200 bg-red-50";
      case "orange":
        return "border-orange-200 bg-orange-50";
      case "yellow":
        return "border-yellow-200 bg-yellow-50";
      case "green":
        return "border-green-200 bg-green-50";
      default:
        return "border-gray-200 bg-gray-50";
    }
  };
  return /* @__PURE__ */ jsx129(Card, { className: `${className} ${getStatusColor11()}`, children: /* @__PURE__ */ jsx129(CardContent, { className: "p-6", children: /* @__PURE__ */ jsx129("div", { className: "flex items-start justify-between", children: /* @__PURE__ */ jsxs113("div", { className: "flex items-start space-x-4", children: [
    getStatusIcon5(),
    /* @__PURE__ */ jsxs113("div", { className: "flex-1", children: [
      /* @__PURE__ */ jsxs113("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: [
        "Subscription Status: ",
        accessLevel.toUpperCase()
      ] }),
      /* @__PURE__ */ jsx129("p", { className: "text-gray-700 mb-3", children: statusMessage }),
      gracePeriodEnds && /* @__PURE__ */ jsxs113("div", { className: "text-sm text-gray-600 mb-3", children: [
        /* @__PURE__ */ jsx129(Clock10, { className: "w-4 h-4 inline mr-1" }),
        "Grace period ends: ",
        gracePeriodEnds.toLocaleDateString()
      ] }),
      showActions && /* @__PURE__ */ jsxs113("div", { className: "flex items-center space-x-3", children: [
        upgradeRequired && onUpgrade && /* @__PURE__ */ jsxs113(Button2, { size: "sm", onClick: onUpgrade, children: [
          /* @__PURE__ */ jsx129(CheckCircle15, { className: "w-4 h-4 mr-1" }),
          "Upgrade Now"
        ] }),
        requiresPayment && onPayment && /* @__PURE__ */ jsxs113(Button2, { size: "sm", variant: "outline", onClick: onPayment, children: [
          /* @__PURE__ */ jsx129(CreditCard6, { className: "w-4 h-4 mr-1" }),
          "Make Payment"
        ] }),
        canExportData && onExport && /* @__PURE__ */ jsxs113(Button2, { size: "sm", variant: "outline", onClick: onExport, children: [
          /* @__PURE__ */ jsx129(Download4, { className: "w-4 h-4 mr-1" }),
          "Export Data"
        ] })
      ] })
    ] })
  ] }) }) }) });
}

// src/components/features/Subscriptions/SubscriptionPeriodCard.tsx
import {
  Calendar as Calendar14,
  Clock as Clock11,
  AlertTriangle as AlertTriangle9,
  CheckCircle as CheckCircle16,
  Pause as Pause2,
  XCircle as XCircle9,
  MinusCircle
} from "lucide-react";
import { formatSubscriptionPeriod, getSubscriptionStatusBadge } from "@rentalshop/utils";
import { jsx as jsx130, jsxs as jsxs114 } from "react/jsx-runtime";
function SubscriptionPeriodCard({
  period,
  planName,
  amount,
  currency = "USD",
  className = ""
}) {
  const formatted = formatSubscriptionPeriod(period);
  const statusBadge = getSubscriptionStatusBadge(period.isActive ? "active" : "inactive", period.daysRemaining);
  const getStatusIcon5 = () => {
    switch (statusBadge.icon) {
      case "clock":
        return /* @__PURE__ */ jsx130(Clock11, { className: "w-4 h-4" });
      case "alert-triangle":
        return /* @__PURE__ */ jsx130(AlertTriangle9, { className: "w-4 h-4" });
      case "check-circle":
        return /* @__PURE__ */ jsx130(CheckCircle16, { className: "w-4 h-4" });
      case "pause":
        return /* @__PURE__ */ jsx130(Pause2, { className: "w-4 h-4" });
      case "x-circle":
        return /* @__PURE__ */ jsx130(XCircle9, { className: "w-4 h-4" });
      default:
        return /* @__PURE__ */ jsx130(MinusCircle, { className: "w-4 h-4" });
    }
  };
  return /* @__PURE__ */ jsxs114(Card, { className: `${className}`, children: [
    /* @__PURE__ */ jsx130(CardHeader, { className: "pb-3", children: /* @__PURE__ */ jsxs114("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsx130(CardTitle, { className: "text-lg font-semibold", children: "Subscription Period" }),
      /* @__PURE__ */ jsxs114(Badge, { className: `${statusBadge.color} flex items-center gap-1`, children: [
        getStatusIcon5(),
        statusBadge.text
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs114(CardContent, { className: "space-y-4", children: [
      planName && /* @__PURE__ */ jsxs114("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx130("span", { className: "text-sm font-medium text-gray-600", children: "Plan" }),
        /* @__PURE__ */ jsx130("span", { className: "text-sm font-semibold", children: planName })
      ] }),
      amount !== void 0 && /* @__PURE__ */ jsxs114("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx130("span", { className: "text-sm font-medium text-gray-600", children: "Amount" }),
        /* @__PURE__ */ jsxs114("span", { className: "text-sm font-semibold", children: [
          currency,
          " ",
          amount.toFixed(2)
        ] })
      ] }),
      /* @__PURE__ */ jsxs114("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx130(Calendar14, { className: "w-4 h-4 text-gray-500" }),
        /* @__PURE__ */ jsxs114("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsx130("div", { className: "text-sm font-medium text-gray-900", children: formatted.period }),
          /* @__PURE__ */ jsxs114("div", { className: "text-xs text-gray-500", children: [
            period.duration,
            " billing cycle"
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs114("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx130(Clock11, { className: "w-4 h-4 text-gray-500" }),
        /* @__PURE__ */ jsxs114("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsx130("div", { className: "text-sm font-medium text-gray-900", children: formatted.timeRemaining }),
          /* @__PURE__ */ jsxs114("div", { className: "text-xs text-gray-500", children: [
            "Next billing: ",
            formatted.nextBilling
          ] })
        ] })
      ] }),
      period.isTrial && period.endDate && /* @__PURE__ */ jsx130("div", { className: "bg-blue-50 border border-blue-200 rounded-lg p-3", children: /* @__PURE__ */ jsxs114("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx130(Clock11, { className: "w-4 h-4 text-blue-600" }),
        /* @__PURE__ */ jsxs114("div", { children: [
          /* @__PURE__ */ jsx130("div", { className: "text-sm font-medium text-blue-900", children: "Trial Period" }),
          /* @__PURE__ */ jsxs114("div", { className: "text-xs text-blue-700", children: [
            "Trial ends: ",
            formatted.trialEnd
          ] })
        ] })
      ] }) })
    ] })
  ] });
}

// src/components/features/Subscriptions/components/RestrictedButton.tsx
import { useCanPerform } from "@rentalshop/hooks";
import { Lock as Lock3, AlertTriangle as AlertTriangle10 } from "lucide-react";
import { Fragment as Fragment26, jsx as jsx131, jsxs as jsxs115 } from "react/jsx-runtime";
function RestrictedButton({
  action,
  reason,
  showTooltip = true,
  fallbackText,
  fallbackIcon,
  children,
  disabled,
  ...props
}) {
  const canPerform = useCanPerform(action);
  const isDisabled = disabled || !canPerform;
  const getRestrictionIcon = () => {
    if (fallbackIcon)
      return fallbackIcon;
    if (action.includes("Manage") || action.includes("Process")) {
      return /* @__PURE__ */ jsx131(Lock3, { className: "w-4 h-4" });
    }
    return /* @__PURE__ */ jsx131(AlertTriangle10, { className: "w-4 h-4" });
  };
  const getRestrictionText = () => {
    if (fallbackText)
      return fallbackText;
    if (reason)
      return reason;
    switch (action) {
      case "canCreate":
        return "Cannot create with current subscription";
      case "canEdit":
        return "Cannot edit with current subscription";
      case "canDelete":
        return "Cannot delete with current subscription";
      case "canManageUsers":
        return "User management not available with current subscription";
      case "canManageOutlets":
        return "Outlet management not available with current subscription";
      case "canManageProducts":
        return "Product management not available with current subscription";
      case "canProcessOrders":
        return "Order processing not available with current subscription";
      default:
        return "Action not available with current subscription";
    }
  };
  return /* @__PURE__ */ jsxs115(
    Button2,
    {
      ...props,
      disabled: isDisabled,
      variant: isDisabled ? "outline" : props.variant,
      className: `${props.className} ${isDisabled ? "opacity-50 cursor-not-allowed" : ""}`,
      title: isDisabled && showTooltip ? getRestrictionText() : void 0,
      children: [
        isDisabled && getRestrictionIcon(),
        children
      ]
    }
  );
}
function RestrictedAction({
  action,
  children,
  fallback,
  reason
}) {
  const canPerform = useCanPerform(action);
  if (!canPerform) {
    return fallback ? /* @__PURE__ */ jsx131(Fragment26, { children: fallback }) : null;
  }
  return /* @__PURE__ */ jsx131(Fragment26, { children });
}
function RestrictedSection({
  action,
  children,
  fallback,
  reason,
  className = ""
}) {
  const canPerform = useCanPerform(action);
  if (!canPerform) {
    return fallback ? /* @__PURE__ */ jsx131("div", { className, children: fallback }) : null;
  }
  return /* @__PURE__ */ jsx131("div", { className, children });
}

// src/components/features/Subscriptions/components/PaymentHistoryTable.tsx
import { useState as useState54 } from "react";
import {
  Card as Card36,
  CardHeader as CardHeader29,
  CardTitle as CardTitle29,
  CardContent as CardContent36,
  Button as Button33,
  Badge as Badge18,
  Pagination as Pagination7
} from "@rentalshop/ui";
import { formatDate as formatDate7, formatCurrency as formatCurrency13 } from "@rentalshop/utils";
import { Download as Download5, FileText, Eye as Eye9 } from "lucide-react";
import { Fragment as Fragment27, jsx as jsx132, jsxs as jsxs116 } from "react/jsx-runtime";
function PaymentHistoryTable({
  subscriptionId,
  payments,
  loading = false,
  onViewPayment,
  onDownloadInvoice,
  pagination
}) {
  const [statusFilter, setStatusFilter] = useState54("all");
  const [methodFilter, setMethodFilter] = useState54("all");
  const getStatusBadge = (status) => {
    const statusMap = {
      COMPLETED: { variant: "success", label: "Paid" },
      PENDING: { variant: "warning", label: "Pending" },
      FAILED: { variant: "danger", label: "Failed" },
      REFUNDED: { variant: "secondary", label: "Refunded" }
    };
    const config = statusMap[status] || { variant: "default", label: status };
    return /* @__PURE__ */ jsx132(Badge18, { variant: config.variant, children: config.label });
  };
  const getMethodIcon = (method) => {
    switch (method.toUpperCase()) {
      case "STRIPE":
        return "\u{1F4B3}";
      case "TRANSFER":
        return "\u{1F3E6}";
      case "MANUAL":
        return "\u270F\uFE0F";
      default:
        return "\u{1F4B0}";
    }
  };
  const exportToCSV = () => {
    const csv = [
      ["Date", "Amount", "Method", "Status", "Transaction ID"].join(","),
      ...payments.map((p2) => [
        formatDate7(p2.createdAt, "MMM dd, yyyy"),
        p2.amount,
        p2.method,
        p2.status,
        p2.transactionId
      ].join(","))
    ].join("\n");
    const blob = new Blob([csv], { type: "text/csv" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `payment-history-${subscriptionId}-${Date.now()}.csv`;
    a.click();
  };
  if (loading) {
    return /* @__PURE__ */ jsx132(Card36, { children: /* @__PURE__ */ jsxs116(CardContent36, { className: "p-8 text-center", children: [
      /* @__PURE__ */ jsx132("div", { className: "animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto" }),
      /* @__PURE__ */ jsx132("p", { className: "mt-4 text-gray-600", children: "Loading payment history..." })
    ] }) });
  }
  return /* @__PURE__ */ jsxs116(Card36, { children: [
    /* @__PURE__ */ jsx132(CardHeader29, { children: /* @__PURE__ */ jsxs116("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsx132(CardTitle29, { children: "\u{1F4B3} Payment History" }),
      /* @__PURE__ */ jsx132("div", { className: "flex gap-2", children: /* @__PURE__ */ jsxs116(Button33, { variant: "outline", size: "sm", onClick: exportToCSV, children: [
        /* @__PURE__ */ jsx132(Download5, { className: "w-4 h-4 mr-2" }),
        "Export CSV"
      ] }) })
    ] }) }),
    /* @__PURE__ */ jsx132(CardContent36, { children: payments.length === 0 ? /* @__PURE__ */ jsxs116("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsx132(FileText, { className: "w-12 h-12 text-gray-300 mx-auto mb-4" }),
      /* @__PURE__ */ jsx132("p", { className: "text-gray-600", children: "No payment history yet" })
    ] }) : /* @__PURE__ */ jsxs116(Fragment27, { children: [
      /* @__PURE__ */ jsx132("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsxs116("table", { className: "w-full", children: [
        /* @__PURE__ */ jsx132("thead", { className: "border-b", children: /* @__PURE__ */ jsxs116("tr", { className: "text-left text-sm text-gray-600", children: [
          /* @__PURE__ */ jsx132("th", { className: "pb-3 font-medium", children: "Date" }),
          /* @__PURE__ */ jsx132("th", { className: "pb-3 font-medium", children: "Amount" }),
          /* @__PURE__ */ jsx132("th", { className: "pb-3 font-medium", children: "Method" }),
          /* @__PURE__ */ jsx132("th", { className: "pb-3 font-medium", children: "Status" }),
          /* @__PURE__ */ jsx132("th", { className: "pb-3 font-medium", children: "Transaction ID" }),
          /* @__PURE__ */ jsx132("th", { className: "pb-3 font-medium", children: "Invoice" }),
          /* @__PURE__ */ jsx132("th", { className: "pb-3 font-medium text-right", children: "Actions" })
        ] }) }),
        /* @__PURE__ */ jsx132("tbody", { children: payments.map((payment) => /* @__PURE__ */ jsxs116("tr", { className: "border-b hover:bg-gray-50", children: [
          /* @__PURE__ */ jsx132("td", { className: "py-4 text-sm", children: formatDate7(new Date(payment.createdAt), "MMM dd, yyyy") }),
          /* @__PURE__ */ jsx132("td", { className: "py-4 text-sm font-semibold", children: formatCurrency13(payment.amount, payment.currency) }),
          /* @__PURE__ */ jsx132("td", { className: "py-4 text-sm", children: /* @__PURE__ */ jsxs116("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx132("span", { children: getMethodIcon(payment.method) }),
            /* @__PURE__ */ jsx132("span", { className: "capitalize", children: payment.method.toLowerCase() })
          ] }) }),
          /* @__PURE__ */ jsx132("td", { className: "py-4 text-sm", children: getStatusBadge(payment.status) }),
          /* @__PURE__ */ jsx132("td", { className: "py-4 text-sm font-mono", children: payment.transactionId }),
          /* @__PURE__ */ jsx132("td", { className: "py-4 text-sm", children: payment.invoiceNumber ? /* @__PURE__ */ jsxs116(
            Button33,
            {
              variant: "ghost",
              size: "sm",
              onClick: () => onDownloadInvoice?.(payment),
              children: [
                /* @__PURE__ */ jsx132(FileText, { className: "w-4 h-4 mr-1" }),
                payment.invoiceNumber
              ]
            }
          ) : /* @__PURE__ */ jsx132("span", { className: "text-gray-400", children: "N/A" }) }),
          /* @__PURE__ */ jsx132("td", { className: "py-4 text-sm text-right", children: /* @__PURE__ */ jsx132(
            Button33,
            {
              variant: "ghost",
              size: "sm",
              onClick: () => onViewPayment?.(payment),
              children: /* @__PURE__ */ jsx132(Eye9, { className: "w-4 h-4" })
            }
          ) })
        ] }, payment.id)) })
      ] }) }),
      pagination && pagination.total > pagination.limit && /* @__PURE__ */ jsx132("div", { className: "mt-6", children: /* @__PURE__ */ jsx132(
        Pagination7,
        {
          currentPage: pagination.page,
          totalPages: Math.ceil(pagination.total / pagination.limit),
          onPageChange: pagination.onPageChange
        }
      ) })
    ] }) })
  ] });
}

// src/components/features/Subscriptions/components/ManualRenewalModal.tsx
import { useState as useState55 } from "react";
import {
  Dialog as Dialog11,
  DialogContent as DialogContent11,
  DialogHeader as DialogHeader11,
  DialogTitle as DialogTitle11,
  DialogDescription as DialogDescription8,
  DialogFooter as DialogFooter6,
  Button as Button34,
  Input as Input17,
  Label as Label8,
  Textarea as Textarea4,
  Select as Select11,
  SelectContent as SelectContent11,
  SelectItem as SelectItem11,
  SelectTrigger as SelectTrigger11,
  SelectValue as SelectValue11
} from "@rentalshop/ui";
import { formatDate as formatDate8, formatCurrency as formatCurrency14 } from "@rentalshop/utils";
import {
  RENEWAL_DURATIONS
} from "@rentalshop/constants";
import {
  calculateRenewalPrice,
  calculateSavings,
  getDiscountPercentage
} from "@rentalshop/utils";
import { CreditCard as CreditCard9, Building2 as Building24, AlertCircle as AlertCircle11 } from "lucide-react";
import { jsx as jsx133, jsxs as jsxs117 } from "react/jsx-runtime";
function ManualRenewalModal({
  isOpen,
  onClose,
  subscription,
  onRenew,
  loading = false
}) {
  const [method, setMethod] = useState55("TRANSFER");
  const [duration, setDuration] = useState55(1);
  const [transactionId, setTransactionId] = useState55("");
  const [reference, setReference] = useState55("");
  const [description, setDescription] = useState55("");
  const [errors, setErrors] = useState55({});
  const calculateTotal = () => calculateRenewalPrice(subscription.amount, duration);
  const getSavings = () => calculateSavings(subscription.amount, duration);
  const nextPeriodStart = new Date(subscription.currentPeriodEnd);
  const nextPeriodEnd = new Date(nextPeriodStart);
  nextPeriodEnd.setMonth(nextPeriodEnd.getMonth() + duration);
  const validate = () => {
    const newErrors = {};
    if (!transactionId.trim()) {
      newErrors.transactionId = "Transaction ID is required";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async () => {
    if (!validate())
      return;
    try {
      await onRenew({
        method,
        transactionId,
        reference: reference || void 0,
        description: description || `${duration} month${duration > 1 ? "s" : ""} subscription renewal - ${formatDate8(/* @__PURE__ */ new Date(), "MMMM yyyy")}`
      });
      setTransactionId("");
      setReference("");
      setDescription("");
      onClose();
    } catch (error2) {
      console.error("Renewal failed:", error2);
    }
  };
  return /* @__PURE__ */ jsx133(Dialog11, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxs117(DialogContent11, { className: "max-w-2xl max-h-[90vh] overflow-hidden flex flex-col", children: [
    /* @__PURE__ */ jsxs117(DialogHeader11, { className: "flex-shrink-0", children: [
      /* @__PURE__ */ jsxs117(DialogTitle11, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx133(CreditCard9, { className: "h-5 w-5 text-green-500" }),
        "Renew Subscription"
      ] }),
      /* @__PURE__ */ jsxs117(DialogDescription8, { children: [
        "Extend subscription for ",
        subscription.merchantName
      ] })
    ] }),
    /* @__PURE__ */ jsxs117("div", { className: "space-y-6 overflow-y-auto flex-1 pr-2", children: [
      /* @__PURE__ */ jsxs117("div", { className: "p-4 bg-gray-50 border rounded-lg", children: [
        /* @__PURE__ */ jsx133("p", { className: "text-sm text-gray-600 mb-1", children: "Current Plan" }),
        /* @__PURE__ */ jsxs117("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsx133("p", { className: "font-semibold text-lg", children: subscription.planName }),
          /* @__PURE__ */ jsxs117("p", { className: "font-semibold text-lg", children: [
            formatCurrency14(subscription.amount, subscription.currency),
            "/month"
          ] })
        ] }),
        /* @__PURE__ */ jsxs117("p", { className: "text-sm text-gray-500 mt-2", children: [
          "Expires: ",
          formatDate8(subscription.currentPeriodEnd, "MMM dd, yyyy")
        ] })
      ] }),
      /* @__PURE__ */ jsxs117("div", { children: [
        /* @__PURE__ */ jsx133(Label8, { htmlFor: "duration", children: "Renewal Period *" }),
        /* @__PURE__ */ jsxs117(
          Select11,
          {
            value: duration.toString(),
            onValueChange: (value) => setDuration(parseInt(value)),
            children: [
              /* @__PURE__ */ jsx133(SelectTrigger11, { children: /* @__PURE__ */ jsx133(SelectValue11, { placeholder: "Choose renewal period..." }) }),
              /* @__PURE__ */ jsx133(SelectContent11, { children: RENEWAL_DURATIONS.map((option) => {
                const discount = getDiscountPercentage(option.months);
                const price = calculateRenewalPrice(subscription.amount, option.months);
                const endDate = new Date(nextPeriodStart);
                endDate.setMonth(endDate.getMonth() + option.months);
                return /* @__PURE__ */ jsx133(SelectItem11, { value: option.months.toString(), children: /* @__PURE__ */ jsxs117("div", { className: "flex flex-col py-1", children: [
                  /* @__PURE__ */ jsxs117("div", { className: "flex items-center gap-2", children: [
                    /* @__PURE__ */ jsxs117("span", { className: "font-medium", children: [
                      option.name,
                      " (",
                      option.label,
                      ")"
                    ] }),
                    /* @__PURE__ */ jsx133("span", { className: "font-semibold", children: formatCurrency14(price, subscription.currency) }),
                    discount > 0 && /* @__PURE__ */ jsxs117("span", { className: "text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded", children: [
                      "Save ",
                      discount,
                      "%"
                    ] })
                  ] }),
                  /* @__PURE__ */ jsxs117("span", { className: "text-xs text-gray-500 mt-0.5", children: [
                    "Period: ",
                    formatDate8(nextPeriodStart, "MMM dd"),
                    " - ",
                    formatDate8(endDate, "MMM dd, yyyy")
                  ] })
                ] }) }, option.months);
              }) })
            ]
          }
        ),
        /* @__PURE__ */ jsx133("p", { className: "text-xs text-gray-500 mt-1", children: "Longer renewal periods offer better discounts" })
      ] }),
      /* @__PURE__ */ jsxs117("div", { className: "p-4 bg-blue-50 border border-blue-200 rounded-lg", children: [
        /* @__PURE__ */ jsx133("p", { className: "font-medium text-blue-900 mb-2", children: "Pricing Summary" }),
        /* @__PURE__ */ jsxs117("div", { className: "space-y-2 text-sm", children: [
          /* @__PURE__ */ jsxs117("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsx133("span", { children: "Duration:" }),
            /* @__PURE__ */ jsx133("span", { className: "font-medium", children: RENEWAL_DURATIONS.find((d2) => d2.months === duration)?.name })
          ] }),
          /* @__PURE__ */ jsxs117("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsx133("span", { children: "Period:" }),
            /* @__PURE__ */ jsxs117("span", { className: "font-medium", children: [
              formatDate8(nextPeriodStart, "MMM dd"),
              " - ",
              formatDate8(nextPeriodEnd, "MMM dd, yyyy")
            ] })
          ] }),
          /* @__PURE__ */ jsxs117("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsx133("span", { children: "Base Price:" }),
            /* @__PURE__ */ jsx133("span", { className: "font-medium", children: formatCurrency14(subscription.amount * duration, subscription.currency) })
          ] }),
          getSavings() > 0 && /* @__PURE__ */ jsxs117("div", { className: "flex justify-between text-green-700", children: [
            /* @__PURE__ */ jsxs117("span", { children: [
              "Discount (",
              getDiscountPercentage(duration),
              "%):"
            ] }),
            /* @__PURE__ */ jsxs117("span", { className: "font-medium", children: [
              "-",
              formatCurrency14(getSavings(), subscription.currency)
            ] })
          ] }),
          /* @__PURE__ */ jsxs117("div", { className: "flex justify-between pt-2 border-t text-base", children: [
            /* @__PURE__ */ jsx133("span", { className: "font-semibold", children: "Total:" }),
            /* @__PURE__ */ jsx133("span", { className: "font-bold text-blue-900", children: formatCurrency14(calculateTotal(), subscription.currency) })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs117("div", { children: [
        /* @__PURE__ */ jsx133(Label8, { children: "Payment Method *" }),
        /* @__PURE__ */ jsxs117("div", { className: "grid grid-cols-2 gap-3 mt-2", children: [
          /* @__PURE__ */ jsx133(
            Button34,
            {
              variant: "outline",
              type: "button",
              onClick: () => setMethod("TRANSFER"),
              className: `p-3 border-2 rounded-lg text-left transition-all justify-start h-auto ${method === "TRANSFER" ? "border-blue-500 bg-blue-50" : "border-gray-200 hover:border-gray-300"}`,
              children: /* @__PURE__ */ jsxs117("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ jsx133(Building24, { className: "w-5 h-5 text-gray-600" }),
                /* @__PURE__ */ jsx133("span", { className: "font-medium", children: "Bank Transfer" })
              ] })
            }
          ),
          /* @__PURE__ */ jsx133(
            Button34,
            {
              variant: "outline",
              type: "button",
              onClick: () => setMethod("STRIPE"),
              className: `p-3 border-2 rounded-lg text-left transition-all justify-start h-auto ${method === "STRIPE" ? "border-blue-500 bg-blue-50" : "border-gray-200 hover:border-gray-300"}`,
              children: /* @__PURE__ */ jsxs117("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ jsx133(CreditCard9, { className: "w-5 h-5 text-gray-600" }),
                /* @__PURE__ */ jsx133("span", { className: "font-medium", children: "Stripe" })
              ] })
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs117("div", { children: [
        /* @__PURE__ */ jsxs117(Label8, { htmlFor: "transactionId", children: [
          "Transaction ID *",
          /* @__PURE__ */ jsx133("span", { className: "text-gray-500 text-sm font-normal ml-2", children: method === "STRIPE" ? "(e.g., txn_1234567890)" : "(Bank reference number)" })
        ] }),
        /* @__PURE__ */ jsx133(
          Input17,
          {
            id: "transactionId",
            value: transactionId,
            onChange: (e2) => setTransactionId(e2.target.value),
            placeholder: method === "STRIPE" ? "txn_1234567890" : "BANK-REF-123",
            className: errors.transactionId ? "border-red-500" : ""
          }
        ),
        errors.transactionId && /* @__PURE__ */ jsxs117("p", { className: "text-sm text-red-600 flex items-center gap-1 mt-1", children: [
          /* @__PURE__ */ jsx133(AlertCircle11, { className: "w-4 h-4" }),
          errors.transactionId
        ] })
      ] }),
      /* @__PURE__ */ jsxs117("div", { children: [
        /* @__PURE__ */ jsx133(Label8, { htmlFor: "reference", children: "Reference Number (Optional)" }),
        /* @__PURE__ */ jsx133(
          Input17,
          {
            id: "reference",
            value: reference,
            onChange: (e2) => setReference(e2.target.value),
            placeholder: "REF-2025-001"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs117("div", { children: [
        /* @__PURE__ */ jsx133(Label8, { htmlFor: "description", children: "Description (Optional)" }),
        /* @__PURE__ */ jsx133(
          Textarea4,
          {
            id: "description",
            value: description,
            onChange: (e2) => setDescription(e2.target.value),
            placeholder: `${duration} month${duration > 1 ? "s" : ""} subscription renewal - ${formatDate8(/* @__PURE__ */ new Date(), "MMMM yyyy")}`,
            rows: 2
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs117(DialogFooter6, { className: "flex-shrink-0 border-t pt-4 mt-4", children: [
      /* @__PURE__ */ jsx133(Button34, { variant: "outline", onClick: onClose, disabled: loading, children: "Cancel" }),
      /* @__PURE__ */ jsx133(Button34, { onClick: handleSubmit, disabled: loading, children: loading ? "Processing..." : "Process Renewal" })
    ] })
  ] }) });
}

// src/components/features/Subscriptions/components/UpgradeTrialModal.tsx
import { useState as useState56, useEffect as useEffect31 } from "react";
import {
  Dialog as Dialog12,
  DialogContent as DialogContent12,
  DialogHeader as DialogHeader12,
  DialogTitle as DialogTitle12,
  DialogDescription as DialogDescription9,
  DialogFooter as DialogFooter7,
  Button as Button35,
  Label as Label9,
  Card as Card37
} from "@rentalshop/ui";
import { formatDate as formatDate9, formatCurrency as formatCurrency15 } from "@rentalshop/utils";
import { Check as Check6, CreditCard as CreditCard10, Building2 as Building25, Sparkles } from "lucide-react";
import { Fragment as Fragment28, jsx as jsx134, jsxs as jsxs118 } from "react/jsx-runtime";
function UpgradeTrialModal({
  isOpen,
  onClose,
  subscription,
  plans,
  onUpgrade,
  loading = false
}) {
  const [selectedPlan, setSelectedPlan] = useState56(null);
  const [billingCycle, setBillingCycle] = useState56("month");
  const [paymentMethod, setPaymentMethod] = useState56("STRIPE");
  useEffect31(() => {
    if (plans.length > 0 && !selectedPlan) {
      const firstPaidPlan = plans.find((p2) => p2.name !== "Trial" && p2.basePrice > 0);
      if (firstPaidPlan) {
        setSelectedPlan(firstPaidPlan);
      }
    }
  }, [plans, selectedPlan]);
  const calculatePrice = (basePrice, cycle) => {
    switch (cycle) {
      case "quarter":
        return basePrice * 3 * 0.9;
      case "year":
        return basePrice * 12 * 0.8;
      default:
        return basePrice;
    }
  };
  const getSavings = (basePrice, cycle) => {
    const fullPrice = cycle === "quarter" ? basePrice * 3 : cycle === "year" ? basePrice * 12 : basePrice;
    const discountedPrice = calculatePrice(basePrice, cycle);
    return fullPrice - discountedPrice;
  };
  const getNextBillingDate = () => {
    const now = /* @__PURE__ */ new Date();
    const next = new Date(now);
    switch (billingCycle) {
      case "quarter":
        next.setMonth(next.getMonth() + 3);
        break;
      case "year":
        next.setFullYear(next.getFullYear() + 1);
        break;
      default:
        next.setMonth(next.getMonth() + 1);
    }
    return next;
  };
  const handleSubmit = async () => {
    if (!selectedPlan)
      return;
    try {
      await onUpgrade(selectedPlan.id, billingCycle, paymentMethod);
      onClose();
    } catch (error2) {
      console.error("Upgrade failed:", error2);
    }
  };
  const paidPlans = plans.filter((p2) => p2.name !== "Trial" && p2.basePrice > 0);
  return /* @__PURE__ */ jsx134(Dialog12, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxs118(DialogContent12, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsxs118(DialogHeader12, { children: [
      /* @__PURE__ */ jsx134(DialogTitle12, { children: "\u{1F4C8} Upgrade Subscription" }),
      /* @__PURE__ */ jsx134(DialogDescription9, { children: "Upgrade from Trial to a paid plan to unlock all features" })
    ] }),
    /* @__PURE__ */ jsxs118("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsx134("div", { className: "bg-yellow-50 border border-yellow-200 p-4 rounded-lg", children: /* @__PURE__ */ jsxs118("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx134(Sparkles, { className: "w-5 h-5 text-yellow-600" }),
        /* @__PURE__ */ jsxs118("div", { children: [
          /* @__PURE__ */ jsx134("p", { className: "font-medium text-yellow-900", children: "Currently on Trial" }),
          /* @__PURE__ */ jsxs118("p", { className: "text-sm text-yellow-700", children: [
            "Upgrade now to continue using ",
            subscription.merchantName
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs118("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx134(Label9, { className: "text-lg font-semibold", children: "Choose a Plan *" }),
        /* @__PURE__ */ jsx134("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: paidPlans.map((plan) => /* @__PURE__ */ jsx134(
          Card37,
          {
            className: `cursor-pointer transition-all ${selectedPlan?.id === plan.id ? "border-blue-500 bg-blue-50 shadow-lg" : "hover:border-gray-400"} ${plan.isPopular ? "ring-2 ring-blue-500" : ""}`,
            onClick: () => setSelectedPlan(plan),
            children: /* @__PURE__ */ jsxs118("div", { className: "p-4 space-y-3", children: [
              plan.isPopular && /* @__PURE__ */ jsx134("div", { className: "bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded inline-block", children: "POPULAR" }),
              /* @__PURE__ */ jsxs118("div", { children: [
                /* @__PURE__ */ jsx134("h3", { className: "font-bold text-lg", children: plan.name }),
                /* @__PURE__ */ jsx134("p", { className: "text-sm text-gray-600", children: plan.description })
              ] }),
              /* @__PURE__ */ jsxs118("div", { className: "text-2xl font-bold", children: [
                formatCurrency15(plan.basePrice, "USD"),
                /* @__PURE__ */ jsx134("span", { className: "text-sm text-gray-600 font-normal", children: "/month" })
              ] }),
              plan.limits && /* @__PURE__ */ jsxs118("ul", { className: "text-sm space-y-1", children: [
                /* @__PURE__ */ jsxs118("li", { children: [
                  "\u2022 ",
                  plan.limits.outlets || 0,
                  " outlets"
                ] }),
                /* @__PURE__ */ jsxs118("li", { children: [
                  "\u2022 ",
                  plan.limits.users || 0,
                  " users"
                ] }),
                /* @__PURE__ */ jsxs118("li", { children: [
                  "\u2022 ",
                  plan.limits.products === 999999 ? "Unlimited" : plan.limits.products,
                  " products"
                ] })
              ] }),
              selectedPlan?.id === plan.id && /* @__PURE__ */ jsxs118("div", { className: "flex items-center gap-1 text-blue-600 font-medium", children: [
                /* @__PURE__ */ jsx134(Check6, { className: "w-4 h-4" }),
                "Selected"
              ] })
            ] })
          },
          plan.id
        )) })
      ] }),
      selectedPlan && /* @__PURE__ */ jsxs118("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx134(Label9, { className: "text-lg font-semibold", children: "Billing Cycle *" }),
        /* @__PURE__ */ jsxs118("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx134(
            "div",
            {
              className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:bg-gray-50 ${billingCycle === "month" ? "border-blue-500 bg-blue-50" : ""}`,
              onClick: () => setBillingCycle("month"),
              children: /* @__PURE__ */ jsxs118("div", { className: "flex items-center gap-3", children: [
                /* @__PURE__ */ jsx134(
                  "input",
                  {
                    type: "radio",
                    checked: billingCycle === "month",
                    onChange: () => setBillingCycle("month"),
                    className: "cursor-pointer"
                  }
                ),
                /* @__PURE__ */ jsxs118("div", { children: [
                  /* @__PURE__ */ jsx134("p", { className: "font-medium", children: "Monthly" }),
                  /* @__PURE__ */ jsxs118("p", { className: "text-sm text-gray-600", children: [
                    formatCurrency15(selectedPlan.basePrice, "USD"),
                    "/month"
                  ] })
                ] })
              ] })
            }
          ),
          /* @__PURE__ */ jsxs118(
            "div",
            {
              className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:bg-gray-50 ${billingCycle === "quarter" ? "border-blue-500 bg-blue-50" : ""}`,
              onClick: () => setBillingCycle("quarter"),
              children: [
                /* @__PURE__ */ jsxs118("div", { className: "flex items-center gap-3", children: [
                  /* @__PURE__ */ jsx134(
                    "input",
                    {
                      type: "radio",
                      checked: billingCycle === "quarter",
                      onChange: () => setBillingCycle("quarter"),
                      className: "cursor-pointer"
                    }
                  ),
                  /* @__PURE__ */ jsxs118("div", { children: [
                    /* @__PURE__ */ jsx134("p", { className: "font-medium", children: "Quarterly" }),
                    /* @__PURE__ */ jsxs118("p", { className: "text-sm text-gray-600", children: [
                      formatCurrency15(calculatePrice(selectedPlan.basePrice, "quarter"), "USD"),
                      "/quarter"
                    ] })
                  ] })
                ] }),
                /* @__PURE__ */ jsx134("div", { className: "bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded", children: "Save 10%" })
              ]
            }
          ),
          /* @__PURE__ */ jsxs118(
            "div",
            {
              className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:bg-gray-50 ${billingCycle === "year" ? "border-blue-500 bg-blue-50" : ""}`,
              onClick: () => setBillingCycle("year"),
              children: [
                /* @__PURE__ */ jsxs118("div", { className: "flex items-center gap-3", children: [
                  /* @__PURE__ */ jsx134(
                    "input",
                    {
                      type: "radio",
                      checked: billingCycle === "year",
                      onChange: () => setBillingCycle("year"),
                      className: "cursor-pointer"
                    }
                  ),
                  /* @__PURE__ */ jsxs118("div", { children: [
                    /* @__PURE__ */ jsx134("p", { className: "font-medium", children: "Yearly" }),
                    /* @__PURE__ */ jsxs118("p", { className: "text-sm text-gray-600", children: [
                      formatCurrency15(calculatePrice(selectedPlan.basePrice, "year"), "USD"),
                      "/year"
                    ] })
                  ] })
                ] }),
                /* @__PURE__ */ jsx134("div", { className: "bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded", children: "Save 20%" })
              ]
            }
          )
        ] })
      ] }),
      selectedPlan && /* @__PURE__ */ jsxs118("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx134(Label9, { className: "text-lg font-semibold", children: "Payment Method *" }),
        /* @__PURE__ */ jsxs118("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs118(
            "div",
            {
              className: `flex items-center space-x-2 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer ${paymentMethod === "STRIPE" ? "border-blue-500 bg-blue-50" : ""}`,
              onClick: () => setPaymentMethod("STRIPE"),
              children: [
                /* @__PURE__ */ jsx134(
                  "input",
                  {
                    type: "radio",
                    checked: paymentMethod === "STRIPE",
                    onChange: () => setPaymentMethod("STRIPE"),
                    className: "cursor-pointer"
                  }
                ),
                /* @__PURE__ */ jsxs118(Label9, { className: "flex items-center gap-2 cursor-pointer flex-1", children: [
                  /* @__PURE__ */ jsx134(CreditCard10, { className: "w-4 h-4" }),
                  /* @__PURE__ */ jsx134("span", { children: "Stripe (Card Payment)" })
                ] })
              ]
            }
          ),
          /* @__PURE__ */ jsxs118(
            "div",
            {
              className: `flex items-center space-x-2 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer ${paymentMethod === "TRANSFER" ? "border-blue-500 bg-blue-50" : ""}`,
              onClick: () => setPaymentMethod("TRANSFER"),
              children: [
                /* @__PURE__ */ jsx134(
                  "input",
                  {
                    type: "radio",
                    checked: paymentMethod === "TRANSFER",
                    onChange: () => setPaymentMethod("TRANSFER"),
                    className: "cursor-pointer"
                  }
                ),
                /* @__PURE__ */ jsxs118(Label9, { className: "flex items-center gap-2 cursor-pointer flex-1", children: [
                  /* @__PURE__ */ jsx134(Building25, { className: "w-4 h-4" }),
                  /* @__PURE__ */ jsx134("span", { children: "Bank Transfer" })
                ] })
              ]
            }
          )
        ] })
      ] }),
      selectedPlan && /* @__PURE__ */ jsx134(Card37, { className: "bg-gray-50 border-gray-200", children: /* @__PURE__ */ jsxs118("div", { className: "p-4 space-y-2", children: [
        /* @__PURE__ */ jsx134("h3", { className: "font-semibold", children: "Payment Summary" }),
        /* @__PURE__ */ jsxs118("div", { className: "space-y-1 text-sm", children: [
          /* @__PURE__ */ jsxs118("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsx134("span", { children: "First payment:" }),
            /* @__PURE__ */ jsxs118("span", { className: "font-semibold", children: [
              formatCurrency15(calculatePrice(selectedPlan.basePrice, billingCycle), "USD"),
              billingCycle === "quarter" && " (3 months)",
              billingCycle === "year" && " (12 months)"
            ] })
          ] }),
          /* @__PURE__ */ jsxs118("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsx134("span", { children: "Next billing:" }),
            /* @__PURE__ */ jsx134("span", { children: formatDate9(getNextBillingDate(), "MMM dd, yyyy") })
          ] }),
          getSavings(selectedPlan.basePrice, billingCycle) > 0 && /* @__PURE__ */ jsxs118("div", { className: "flex justify-between text-green-600 font-medium", children: [
            /* @__PURE__ */ jsx134("span", { children: "You save:" }),
            /* @__PURE__ */ jsx134("span", { children: formatCurrency15(getSavings(selectedPlan.basePrice, billingCycle), "USD") })
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs118(DialogFooter7, { children: [
      /* @__PURE__ */ jsx134(Button35, { variant: "outline", onClick: onClose, disabled: loading, children: "Cancel" }),
      /* @__PURE__ */ jsx134(Button35, { onClick: handleSubmit, disabled: loading || !selectedPlan, children: loading ? /* @__PURE__ */ jsxs118(Fragment28, { children: [
        /* @__PURE__ */ jsx134("div", { className: "animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2" }),
        "Processing..."
      ] }) : /* @__PURE__ */ jsx134(Fragment28, { children: "\u{1F680} Upgrade Now" }) })
    ] })
  ] }) });
}

// src/components/features/Subscriptions/components/SubscriptionActivityTimeline.tsx
import React79 from "react";
import { formatDate as formatDate10, formatCurrency as formatCurrency16 } from "@rentalshop/utils";
import {
  Clock as Clock13,
  TrendingUp as TrendingUp6,
  RefreshCw as RefreshCw3,
  XCircle as XCircle10,
  Pause as Pause3,
  Play as Play2,
  CreditCard as CreditCard11,
  User as User9,
  Download as Download6,
  DollarSign as DollarSign14,
  AlertCircle as AlertCircle12,
  AlertTriangle as AlertTriangle11,
  Percent as Percent2,
  RotateCcw,
  FileText as FileText2,
  Bell
} from "lucide-react";
import { jsx as jsx135, jsxs as jsxs119 } from "react/jsx-runtime";
function SubscriptionActivityTimeline({
  activities,
  payments,
  loading = false,
  onExport
}) {
  const timeline = React79.useMemo(() => {
    const items = [];
    activities.forEach((activity) => {
      items.push({
        itemType: "activity",
        ...activity,
        timestamp: new Date(activity.timestamp)
      });
    });
    payments.forEach((payment) => {
      items.push({
        itemType: "payment",
        ...payment,
        type: payment.type,
        // Keep payment type from API
        timestamp: new Date(payment.createdAt)
      });
    });
    return items.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());
  }, [activities, payments]);
  const getActivityIcon = (action) => {
    switch (action.toUpperCase()) {
      case "PLAN_CHANGED":
      case "PLAN_UPGRADED":
      case "PLAN_DOWNGRADED":
        return TrendingUp6;
      case "SUBSCRIPTION_ACTIVATED":
      case "BILLING_CYCLE_RENEWED":
        return RefreshCw3;
      case "SUBSCRIPTION_CANCELLED":
      case "CANCEL":
      case "CANCELLATION":
        return XCircle10;
      case "SUBSCRIPTION_PAUSED":
      case "PAUSE":
        return Pause3;
      case "SUBSCRIPTION_RESUMED":
      case "RESUME":
        return Play2;
      case "SUBSCRIPTION_CREATED":
      case "CREATE":
        return CreditCard11;
      case "PAYMENT_RECEIVED":
        return DollarSign14;
      case "PAYMENT_FAILED":
        return AlertCircle12;
      case "TRIAL_STARTED":
        return Clock13;
      case "TRIAL_ENDED":
        return AlertTriangle11;
      case "DISCOUNT_APPLIED":
        return Percent2;
      case "REFUND_PROCESSED":
        return RotateCcw;
      case "INVOICE_GENERATED":
        return FileText2;
      case "REMINDER_SENT":
        return Bell;
      case "DUNNING_STARTED":
        return AlertTriangle11;
      case "SUBSCRIPTION_EXPIRED":
        return AlertCircle12;
      case "SUBSCRIPTION_REACTIVATED":
        return Play2;
      default:
        return Clock13;
    }
  };
  const getActivityColor = (action) => {
    switch (action.toUpperCase()) {
      case "PLAN_CHANGED":
      case "PLAN_UPGRADED":
      case "PLAN_DOWNGRADED":
        return "text-blue-600 bg-blue-100";
      case "SUBSCRIPTION_ACTIVATED":
      case "BILLING_CYCLE_RENEWED":
      case "RENEWAL":
      case "RENEW":
        return "text-green-600 bg-green-100";
      case "SUBSCRIPTION_CANCELLED":
      case "CANCEL":
      case "CANCELLATION":
        return "text-red-600 bg-red-100";
      case "SUBSCRIPTION_PAUSED":
      case "PAUSE":
        return "text-orange-600 bg-orange-100";
      case "SUBSCRIPTION_RESUMED":
      case "RESUME":
        return "text-purple-600 bg-purple-100";
      case "SUBSCRIPTION_CREATED":
      case "CREATE":
        return "text-indigo-600 bg-indigo-100";
      case "PAYMENT_RECEIVED":
        return "text-green-600 bg-green-100";
      case "PAYMENT_FAILED":
        return "text-red-600 bg-red-100";
      case "TRIAL_STARTED":
        return "text-blue-600 bg-blue-100";
      case "TRIAL_ENDED":
        return "text-yellow-600 bg-yellow-100";
      case "DISCOUNT_APPLIED":
        return "text-green-600 bg-green-100";
      case "REFUND_PROCESSED":
        return "text-orange-600 bg-orange-100";
      case "INVOICE_GENERATED":
        return "text-indigo-600 bg-indigo-100";
      case "REMINDER_SENT":
        return "text-blue-600 bg-blue-100";
      case "DUNNING_STARTED":
        return "text-red-600 bg-red-100";
      case "SUBSCRIPTION_EXPIRED":
        return "text-red-600 bg-red-100";
      case "SUBSCRIPTION_REACTIVATED":
        return "text-green-600 bg-green-100";
      default:
        return "text-gray-600 bg-gray-100";
    }
  };
  const getPaymentStatusBadge = (status) => {
    const statusMap = {
      COMPLETED: { variant: "success", label: "Paid" },
      PENDING: { variant: "warning", label: "Pending" },
      FAILED: { variant: "danger", label: "Failed" }
    };
    const config = statusMap[status] || { variant: "default", label: status };
    return /* @__PURE__ */ jsx135(Badge, { variant: config.variant, children: config.label });
  };
  if (loading) {
    return /* @__PURE__ */ jsx135(Card, { children: /* @__PURE__ */ jsxs119(CardContent, { className: "p-8 text-center", children: [
      /* @__PURE__ */ jsx135("div", { className: "animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto" }),
      /* @__PURE__ */ jsx135("p", { className: "mt-4 text-gray-600", children: "Loading activity history..." })
    ] }) });
  }
  return /* @__PURE__ */ jsxs119(Card, { children: [
    /* @__PURE__ */ jsx135(CardHeader, { children: /* @__PURE__ */ jsxs119("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsx135(CardTitle, { children: "\u{1F4CA} Subscription Activity & Payment History" }),
      onExport && /* @__PURE__ */ jsxs119(Button2, { variant: "outline", size: "sm", onClick: onExport, children: [
        /* @__PURE__ */ jsx135(Download6, { className: "w-4 h-4 mr-2" }),
        "Export"
      ] })
    ] }) }),
    /* @__PURE__ */ jsx135(CardContent, { children: timeline.length === 0 ? /* @__PURE__ */ jsxs119("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsx135(Clock13, { className: "w-12 h-12 text-gray-300 mx-auto mb-4" }),
      /* @__PURE__ */ jsx135("p", { className: "text-gray-600", children: "No activity yet" })
    ] }) : /* @__PURE__ */ jsxs119("div", { className: "relative", children: [
      /* @__PURE__ */ jsx135("div", { className: "absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200" }),
      /* @__PURE__ */ jsx135("div", { className: "space-y-6", children: timeline.map((item, index) => {
        if (item.itemType === "activity") {
          const Icon2 = getActivityIcon(item.type);
          const colorClass = getActivityColor(item.type);
          return /* @__PURE__ */ jsxs119("div", { className: "relative pl-14", children: [
            /* @__PURE__ */ jsx135("div", { className: `absolute left-3 w-6 h-6 rounded-full ${colorClass} flex items-center justify-center`, children: /* @__PURE__ */ jsx135(Icon2, { className: "w-3 h-3" }) }),
            /* @__PURE__ */ jsx135("div", { className: "bg-white border rounded-lg p-4 shadow-sm", children: /* @__PURE__ */ jsxs119("div", { className: "flex items-start justify-between", children: [
              /* @__PURE__ */ jsxs119("div", { className: "flex-1", children: [
                /* @__PURE__ */ jsxs119("div", { className: "flex items-center gap-2 mb-1", children: [
                  /* @__PURE__ */ jsx135("h4", { className: "font-semibold text-gray-900", children: item.description }),
                  /* @__PURE__ */ jsx135(
                    Badge,
                    {
                      variant: item.metadata?.severity === "error" ? "destructive" : item.metadata?.severity === "warning" ? "warning" : item.metadata?.severity === "success" ? "success" : "secondary",
                      children: item.type?.replace(/_/g, " ").toUpperCase()
                    }
                  )
                ] }),
                item.metadata?.performedBy && /* @__PURE__ */ jsxs119("p", { className: "text-sm text-gray-600 mb-2", children: [
                  /* @__PURE__ */ jsx135(User9, { className: "w-3 h-3 inline mr-1" }),
                  "By: ",
                  item.metadata.performedBy.name,
                  " (",
                  item.metadata.performedBy.email,
                  ")",
                  /* @__PURE__ */ jsx135("span", { className: "ml-2 text-xs bg-gray-100 px-2 py-0.5 rounded", children: item.metadata.performedBy.role })
                ] }),
                item.metadata && /* @__PURE__ */ jsxs119("div", { className: "text-sm text-gray-700 space-y-1 mt-2", children: [
                  item.metadata.planName && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Plan: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-medium", children: item.metadata.planName })
                  ] }),
                  item.metadata.amount !== void 0 && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Amount: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-semibold", children: formatCurrency16(item.metadata.amount, item.metadata.currency || "USD") })
                  ] }),
                  item.metadata.status && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Status: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-medium capitalize", children: item.metadata.status.toLowerCase() })
                  ] }),
                  item.metadata.paymentMethod && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Method: ",
                    /* @__PURE__ */ jsx135("span", { className: "capitalize", children: item.metadata.paymentMethod.toLowerCase() })
                  ] }),
                  item.metadata.transactionId && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Transaction: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-mono text-xs", children: item.metadata.transactionId })
                  ] }),
                  item.metadata.invoiceNumber && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Invoice: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-mono text-xs", children: item.metadata.invoiceNumber })
                  ] }),
                  item.metadata.newPlan && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 New Plan: ",
                    /* @__PURE__ */ jsxs119("span", { className: "font-medium", children: [
                      item.metadata.newPlan.name,
                      " (",
                      formatCurrency16(item.metadata.newPlan.amount, item.metadata.currency || "USD"),
                      ")"
                    ] })
                  ] }),
                  item.metadata.previousPlan && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Previous: ",
                    /* @__PURE__ */ jsxs119("span", { className: "text-gray-500", children: [
                      item.metadata.previousPlan.name,
                      " (",
                      formatCurrency16(item.metadata.previousPlan.amount, item.metadata.currency || "USD"),
                      ")"
                    ] })
                  ] }),
                  item.metadata.effectiveDate && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Effective: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-medium", children: formatDate10(item.metadata.effectiveDate, "MMM dd, yyyy") })
                  ] }),
                  item.metadata.nextBillingDate && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Next Billing: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-medium", children: formatDate10(item.metadata.nextBillingDate, "MMM dd, yyyy") })
                  ] }),
                  item.metadata.trialEndDate && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Trial Ends: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-medium", children: formatDate10(item.metadata.trialEndDate, "MMM dd, yyyy") })
                  ] }),
                  item.metadata.reason && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Reason: ",
                    /* @__PURE__ */ jsx135("span", { className: "italic text-gray-600", children: item.metadata.reason })
                  ] }),
                  item.metadata.source && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Source: ",
                    /* @__PURE__ */ jsx135("span", { className: "text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded", children: item.metadata.source.replace(/_/g, " ").toUpperCase() })
                  ] })
                ] })
              ] }),
              /* @__PURE__ */ jsxs119("div", { className: "text-right text-sm text-gray-500 ml-4", children: [
                formatDate10(item.timestamp, "MMM dd, yyyy"),
                /* @__PURE__ */ jsx135("br", {}),
                formatDate10(item.timestamp, "HH:mm")
              ] })
            ] }) })
          ] }, `activity-${item.id}-${index}`);
        } else {
          return /* @__PURE__ */ jsxs119("div", { className: "relative pl-14", children: [
            /* @__PURE__ */ jsx135("div", { className: "absolute left-3 w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center", children: /* @__PURE__ */ jsx135(CreditCard11, { className: "w-3 h-3" }) }),
            /* @__PURE__ */ jsx135("div", { className: "bg-white border rounded-lg p-4 shadow-sm", children: /* @__PURE__ */ jsxs119("div", { className: "flex items-start justify-between", children: [
              /* @__PURE__ */ jsxs119("div", { className: "flex-1", children: [
                /* @__PURE__ */ jsxs119("div", { className: "flex items-center gap-2 mb-1", children: [
                  /* @__PURE__ */ jsx135("h4", { className: "font-semibold text-gray-900", children: "\u{1F4B0} Payment Received" }),
                  getPaymentStatusBadge(item.status)
                ] }),
                /* @__PURE__ */ jsxs119("div", { className: "text-sm text-gray-700 space-y-1", children: [
                  /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Amount: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-semibold", children: formatCurrency16(item.amount, item.currency) })
                  ] }),
                  item.method && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Method: ",
                    /* @__PURE__ */ jsx135("span", { className: "capitalize", children: item.method.toLowerCase() })
                  ] }),
                  item.transactionId && /* @__PURE__ */ jsxs119("div", { children: [
                    "\u2022 Transaction: ",
                    /* @__PURE__ */ jsx135("span", { className: "font-mono text-xs", children: item.transactionId })
                  ] }),
                  item.description && /* @__PURE__ */ jsx135("div", { className: "text-gray-600 mt-2", children: item.description })
                ] })
              ] }),
              /* @__PURE__ */ jsxs119("div", { className: "text-right text-sm text-gray-500 ml-4", children: [
                formatDate10(item.timestamp, "MMM dd, yyyy"),
                /* @__PURE__ */ jsx135("br", {}),
                formatDate10(item.timestamp, "HH:mm")
              ] })
            ] }) })
          ] }, `payment-${item.id}-${index}`);
        }
      }) })
    ] }) })
  ] });
}

// src/components/features/Subscriptions/components/SubscriptionHistoryDialog.tsx
import { useState as useState57, useEffect as useEffect32 } from "react";
import { subscriptionsApi } from "@rentalshop/utils";
import { jsx as jsx136 } from "react/jsx-runtime";
function SubscriptionHistoryDialog({
  subscriptionId,
  merchantId
}) {
  const [activities, setActivities] = useState57([]);
  const [payments, setPayments] = useState57([]);
  const [loading, setLoading] = useState57(false);
  const fetchHistory = async () => {
    if (!subscriptionId)
      return;
    setLoading(true);
    try {
      const [activitiesResponse, paymentsResponse] = await Promise.all([
        subscriptionsApi.getActivities(subscriptionId, 50),
        subscriptionsApi.getPayments(subscriptionId, 50)
      ]);
      if (activitiesResponse.success && activitiesResponse.data) {
        setActivities(activitiesResponse.data);
      }
      if (paymentsResponse.success && paymentsResponse.data) {
        setPayments(paymentsResponse.data);
      }
    } catch (error2) {
      console.error("Error fetching subscription history:", error2);
    } finally {
      setLoading(false);
    }
  };
  useEffect32(() => {
    if (subscriptionId) {
      fetchHistory();
    }
  }, [subscriptionId]);
  if (!subscriptionId) {
    return /* @__PURE__ */ jsx136("div", { className: "text-center py-8 text-gray-500", children: "No subscription found" });
  }
  return /* @__PURE__ */ jsx136(
    SubscriptionActivityTimeline,
    {
      activities,
      payments,
      loading,
      onExport: () => {
        console.log("Export subscription history");
      }
    }
  );
}

// src/components/features/Merchants/components/MerchantPlanManagement.tsx
import {
  CreditCard as CreditCard12,
  Clock as Clock14,
  ArrowRight as ArrowRight3,
  Pause as Pause4,
  Play as Play3,
  Plus as Plus6,
  X as X12,
  History
} from "lucide-react";
import { formatDateTimeLong } from "@rentalshop/utils";
import { jsx as jsx137, jsxs as jsxs120 } from "react/jsx-runtime";
var BILLING_INTERVALS = [
  {
    id: "month",
    name: "Monthly",
    months: 1,
    discountPercentage: 0,
    description: "No discount for monthly billing",
    isActive: true
  },
  {
    id: "quarter",
    name: "Quarterly",
    months: 3,
    discountPercentage: 5,
    description: "5% discount for quarterly billing",
    isActive: true
  },
  {
    id: "semiAnnual",
    name: "6 Months",
    months: 6,
    discountPercentage: 10,
    description: "10% discount for 6-month billing",
    isActive: true
  },
  {
    id: "year",
    name: "Yearly",
    months: 12,
    discountPercentage: 20,
    description: "20% discount for yearly billing",
    isActive: true
  }
];
var getActiveBillingIntervals = () => BILLING_INTERVALS.filter((interval) => interval.isActive);
var getDiscountPercentage2 = (intervalId) => {
  const interval = BILLING_INTERVALS.find((i) => i.id === intervalId);
  return interval?.discountPercentage || 0;
};
var calculateDiscountedPrice2 = (basePrice, intervalId, duration = 1) => {
  const interval = BILLING_INTERVALS.find((i) => i.id === intervalId);
  if (!interval)
    return basePrice * duration;
  const discount = interval.discountPercentage / 100;
  const discountedPrice = basePrice * (1 - discount);
  return discountedPrice * duration;
};
var formatBillingInterval = (intervalId) => {
  const interval = BILLING_INTERVALS.find((i) => i.id === intervalId);
  if (!interval)
    return intervalId;
  const discount = interval.discountPercentage > 0 ? ` (${interval.discountPercentage}% discount)` : "";
  return `${interval.name}${discount}`;
};
function MerchantPlanManagement({
  merchant,
  subscriptions = [],
  plans = [],
  onPlanChange,
  onExtend,
  onCancel,
  onSuspend,
  onReactivate,
  loading = false,
  currentUserRole
}) {
  const currentSubscription = merchant.subscription || subscriptions[0];
  console.log("\u{1F50D} MerchantPlanManagement Debug:", {
    merchantId: merchant.id,
    merchantName: merchant.name,
    subscription: currentSubscription,
    subscriptionStatus: currentSubscription?.status
  });
  const subscriptionStatus = currentSubscription.status.toLowerCase();
  const isActiveStatus = subscriptionStatus === "trial" || subscriptionStatus === "active";
  const isPausedStatus = subscriptionStatus === "paused" || subscriptionStatus === "cancelled" || subscriptionStatus === "expired";
  const isTrialStatus = subscriptionStatus === "trial";
  const isActivePaidStatus = subscriptionStatus === "active";
  const isPaused = subscriptionStatus === "paused";
  const isTrialPlan = currentSubscription.plan?.name?.toLowerCase() === "trial" || currentSubscription.plan?.basePrice === 0;
  const [showChangeDialog, setShowChangeDialog] = useState58(false);
  const [showRenewalModal, setShowRenewalModal] = useState58(false);
  const [showCancelDialog, setShowCancelDialog] = useState58(false);
  const [showSuspendDialog, setShowSuspendDialog] = useState58(false);
  const [showResumeDialog, setShowResumeDialog] = useState58(false);
  const [showHistoryDialog, setShowHistoryDialog] = useState58(false);
  const [cancelReason, setCancelReason] = useState58("");
  const [cancelType, setCancelType] = useState58("end_of_period");
  const [suspendReason, setSuspendReason] = useState58("");
  const [isSubmitting, setIsSubmitting] = useState58(false);
  const [renewalLoading, setRenewalLoading] = useState58(false);
  const [selectedPlanId, setSelectedPlanId] = useState58("");
  const [changeReason, setChangeReason] = useState58("");
  const [notifyMerchant, setNotifyMerchant] = useState58(true);
  const [changeBillingInterval, setChangeBillingInterval] = useState58("month");
  const handleOpenChangeDialog = () => {
    setShowChangeDialog(true);
    setSelectedPlanId("");
    setChangeReason("");
    setChangeBillingInterval("month");
    setNotifyMerchant(true);
  };
  useEffect33(() => {
    if (showChangeDialog && !changeBillingInterval) {
      setChangeBillingInterval("month");
    }
  }, [showChangeDialog, changeBillingInterval]);
  const formatPrice = (price, currency) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency
    }).format(price);
  };
  const formatDate11 = (date2) => {
    return new Date(date2).toLocaleDateString("en-US", {
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    });
  };
  const billingIntervals = getActiveBillingIntervals();
  const getStatusColor11 = (status) => {
    switch (status.toLowerCase()) {
      case "active":
        return "success";
      case "trial":
        return "warning";
      case "expired":
        return "danger";
      case "cancelled":
        return "danger";
      case "paused":
        return "warning";
      case "suspended":
        return "warning";
      case "disabled":
        return "danger";
      default:
        return "secondary";
    }
  };
  const handleRenewal = async (paymentData) => {
    if (!currentSubscription || !onExtend)
      return;
    try {
      setRenewalLoading(true);
      await onExtend({
        subscription: currentSubscription,
        duration: 1,
        billingInterval: "month",
        discount: 0,
        totalPrice: currentSubscription.amount,
        paymentData
        // Include payment info
      });
      setShowRenewalModal(false);
    } catch (error2) {
      console.error("Failed to renew subscription:", error2);
      throw error2;
    } finally {
      setRenewalLoading(false);
    }
  };
  const handleCancel = async () => {
    if (!currentSubscription || !cancelReason.trim())
      return;
    setIsSubmitting(true);
    try {
      await onCancel?.(currentSubscription, cancelReason.trim(), cancelType);
      setShowCancelDialog(false);
      setCancelReason("");
      setCancelType("end_of_period");
    } catch (error2) {
      console.error("Error canceling subscription:", error2);
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleChangePlan = async () => {
    if (!selectedPlanId || !changeBillingInterval)
      return;
    setIsSubmitting(true);
    try {
      const selectedPlan = plans.find((p2) => p2.id.toString() === selectedPlanId);
      const discount = getDiscountPercentage2(changeBillingInterval);
      const planChangeData = {
        planId: Number(selectedPlanId),
        reason: changeReason.trim() || "Plan changed by admin",
        notifyMerchant,
        billingInterval: changeBillingInterval,
        duration: 1,
        // Always 1 period
        discount,
        totalPrice: selectedPlan ? calculateDiscountedPrice2(selectedPlan.basePrice, changeBillingInterval, 1) : 0
      };
      await onPlanChange?.(planChangeData);
      setShowChangeDialog(false);
      setSelectedPlanId("");
      setChangeReason("");
      setNotifyMerchant(true);
      setChangeBillingInterval("month");
    } catch (error2) {
      console.error("Error changing plan:", error2);
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleSuspend = async () => {
    if (!currentSubscription || !suspendReason.trim())
      return;
    setIsSubmitting(true);
    try {
      await onSuspend?.(currentSubscription, suspendReason.trim());
      setShowSuspendDialog(false);
      setSuspendReason("");
    } catch (error2) {
      console.error("Error suspending subscription:", error2);
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleReactivate = async () => {
    if (!currentSubscription)
      return;
    setIsSubmitting(true);
    try {
      await onReactivate?.(currentSubscription);
      setShowResumeDialog(false);
    } catch (error2) {
      console.error("Error reactivating subscription:", error2);
    } finally {
      setIsSubmitting(false);
    }
  };
  if (loading) {
    return /* @__PURE__ */ jsxs120(Card, { children: [
      /* @__PURE__ */ jsx137(CardHeader, { children: /* @__PURE__ */ jsxs120(CardTitle, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx137(CreditCard12, { className: "h-5 w-5" }),
        "Plan Management"
      ] }) }),
      /* @__PURE__ */ jsx137(CardContent, { children: /* @__PURE__ */ jsxs120("div", { className: "animate-pulse space-y-4", children: [
        /* @__PURE__ */ jsx137("div", { className: "h-4 bg-gray-200 rounded w-3/4" }),
        /* @__PURE__ */ jsx137("div", { className: "h-4 bg-gray-200 rounded w-1/2" }),
        /* @__PURE__ */ jsx137("div", { className: "h-8 bg-gray-200 rounded w-1/4" })
      ] }) })
    ] });
  }
  return /* @__PURE__ */ jsxs120("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs120(Card, { children: [
      /* @__PURE__ */ jsx137(CardHeader, { children: /* @__PURE__ */ jsxs120("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs120(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx137(CreditCard12, { className: "h-5 w-5" }),
          "Current Subscription"
        ] }),
        currentSubscription && (currentUserRole === "ADMIN" || currentUserRole === "MERCHANT") && /* @__PURE__ */ jsxs120(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => setShowHistoryDialog(true),
            className: "flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx137(History, { className: "h-4 w-4" }),
              "View History"
            ]
          }
        )
      ] }) }),
      /* @__PURE__ */ jsx137(CardContent, { children: currentSubscription ? /* @__PURE__ */ jsxs120("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs120("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs120("div", { children: [
            /* @__PURE__ */ jsx137("h3", { className: "text-lg font-semibold", children: currentSubscription?.plan?.name || "No plan assigned" }),
            /* @__PURE__ */ jsx137("p", { className: "text-sm text-gray-500", children: currentSubscription ? formatPrice(currentSubscription.amount, currentSubscription.currency) + "/month" : "No pricing available" })
          ] }),
          /* @__PURE__ */ jsx137("div", { className: "flex flex-col items-end gap-2", children: /* @__PURE__ */ jsx137("div", { className: `px-3 py-1.5 rounded-lg font-semibold text-sm ${currentSubscription?.status === "ACTIVE" ? "bg-green-100 text-green-800" : currentSubscription?.status === "TRIAL" ? "bg-blue-100 text-blue-800" : currentSubscription?.status === "PAUSED" ? "bg-orange-100 text-orange-800" : currentSubscription?.status === "CANCELLED" ? "bg-red-100 text-red-800" : currentSubscription?.status === "EXPIRED" ? "bg-gray-100 text-gray-800" : "bg-gray-100 text-gray-800"}`, children: currentSubscription?.status || "Unknown" }) })
        ] }),
        currentSubscription && /* @__PURE__ */ jsxs120("div", { className: "p-4 bg-gray-50 border rounded-lg space-y-2", children: [
          /* @__PURE__ */ jsxs120("div", { className: "flex items-center justify-between text-sm", children: [
            /* @__PURE__ */ jsx137("span", { className: "text-gray-600", children: "Period:" }),
            /* @__PURE__ */ jsxs120("span", { className: "font-medium", children: [
              formatDateTimeLong(currentSubscription.currentPeriodStart),
              " - ",
              formatDateTimeLong(currentSubscription.currentPeriodEnd)
            ] })
          ] }),
          /* @__PURE__ */ jsxs120("div", { className: "flex items-center justify-between text-sm", children: [
            /* @__PURE__ */ jsx137("span", { className: "text-gray-600", children: "Billing Interval:" }),
            /* @__PURE__ */ jsx137("span", { className: "font-medium capitalize", children: currentSubscription.interval || "month" })
          ] }),
          currentSubscription.subscriptionPeriod?.daysRemaining !== void 0 && /* @__PURE__ */ jsxs120("div", { className: "flex items-center justify-between text-sm", children: [
            /* @__PURE__ */ jsx137("span", { className: "text-gray-600", children: currentSubscription.status === "trial" ? "Trial ends in:" : "Renews in:" }),
            /* @__PURE__ */ jsxs120("span", { className: `font-medium ${currentSubscription.subscriptionPeriod?.daysRemaining <= 7 ? "text-orange-600" : "text-gray-900"}`, children: [
              currentSubscription.subscriptionPeriod?.daysRemaining,
              " days"
            ] })
          ] })
        ] }),
        (currentUserRole === "ADMIN" || currentUserRole === "MERCHANT") && /* @__PURE__ */ jsxs120("div", { className: "flex flex-wrap items-center gap-3 pt-4", children: [
          isTrialPlan && /* @__PURE__ */ jsxs120(
            Button2,
            {
              variant: "default",
              size: "sm",
              onClick: handleOpenChangeDialog,
              className: "flex items-center gap-2 bg-blue-600 hover:bg-blue-700",
              children: [
                /* @__PURE__ */ jsx137(ArrowRight3, { className: "h-4 w-4" }),
                "Upgrade to Paid Plan"
              ]
            }
          ),
          !isTrialPlan && /* @__PURE__ */ jsxs120(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: handleOpenChangeDialog,
              className: "flex items-center gap-2",
              children: [
                /* @__PURE__ */ jsx137(ArrowRight3, { className: "h-4 w-4" }),
                "Change Plan"
              ]
            }
          ),
          currentSubscription && isActiveStatus && !isTrialPlan && /* @__PURE__ */ jsxs120(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => setShowRenewalModal(true),
              className: "flex items-center gap-2",
              children: [
                /* @__PURE__ */ jsx137(Plus6, { className: "h-4 w-4" }),
                "Renew/Extend"
              ]
            }
          ),
          currentSubscription && isActivePaidStatus && /* @__PURE__ */ jsxs120(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => setShowSuspendDialog(true),
              className: "flex items-center gap-2 text-orange-600 hover:text-orange-700",
              children: [
                /* @__PURE__ */ jsx137(Pause4, { className: "h-4 w-4" }),
                "Pause Plan"
              ]
            }
          ),
          currentSubscription && isPaused && /* @__PURE__ */ jsxs120(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => setShowResumeDialog(true),
              disabled: isSubmitting,
              className: "flex items-center gap-2 text-green-600 hover:text-green-700",
              children: [
                /* @__PURE__ */ jsx137(Play3, { className: "h-4 w-4" }),
                "Resume Plan"
              ]
            }
          ),
          currentSubscription && (isActiveStatus || isPausedStatus) && /* @__PURE__ */ jsxs120(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => setShowCancelDialog(true),
              className: "flex items-center gap-2 text-red-600 hover:text-red-700",
              children: [
                /* @__PURE__ */ jsx137(X12, { className: "h-4 w-4" }),
                isTrialStatus ? "End Trial" : "Cancel Plan"
              ]
            }
          )
        ] })
      ] }) : /* @__PURE__ */ jsxs120("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsx137(CreditCard12, { className: "h-12 w-12 text-gray-400 mx-auto mb-4" }),
        /* @__PURE__ */ jsx137("h3", { className: "text-lg font-medium text-gray-900 mb-2", children: "No Subscription" }),
        /* @__PURE__ */ jsx137("p", { className: "text-gray-500 mb-4", children: "This merchant doesn't have an active subscription." }),
        (currentUserRole === "ADMIN" || currentUserRole === "MERCHANT") && /* @__PURE__ */ jsxs120("div", { className: "flex flex-wrap items-center justify-center gap-3", children: [
          /* @__PURE__ */ jsxs120(Button2, { onClick: handleOpenChangeDialog, children: [
            /* @__PURE__ */ jsx137(CreditCard12, { className: "h-4 w-4 mr-2" }),
            "Create Subscription"
          ] }),
          /* @__PURE__ */ jsxs120(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: handleOpenChangeDialog,
              className: "flex items-center gap-2",
              children: [
                /* @__PURE__ */ jsx137(ArrowRight3, { className: "h-4 w-4" }),
                "Change Plan"
              ]
            }
          )
        ] })
      ] }) })
    ] }),
    subscriptions.length > 1 && /* @__PURE__ */ jsxs120(Card, { children: [
      /* @__PURE__ */ jsx137(CardHeader, { children: /* @__PURE__ */ jsxs120(CardTitle, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx137(Clock14, { className: "h-5 w-5" }),
        "Plan History"
      ] }) }),
      /* @__PURE__ */ jsx137(CardContent, { children: /* @__PURE__ */ jsx137("div", { className: "space-y-3", children: subscriptions.slice(1).map((subscription) => /* @__PURE__ */ jsxs120("div", { className: "flex items-center justify-between p-3 border rounded-lg", children: [
        /* @__PURE__ */ jsxs120("div", { children: [
          /* @__PURE__ */ jsx137("p", { className: "font-medium", children: subscription.planName || "Unknown Plan" }),
          /* @__PURE__ */ jsxs120("p", { className: "text-sm text-gray-500", children: [
            formatDate11(subscription.currentPeriodStart),
            " - ",
            subscription.currentPeriodEnd ? formatDate11(subscription.currentPeriodEnd) : "N/A"
          ] }),
          subscription.changeReason && /* @__PURE__ */ jsxs120("p", { className: "text-xs text-gray-400 mt-1", children: [
            "Reason: ",
            subscription.changeReason
          ] })
        ] }),
        /* @__PURE__ */ jsxs120("div", { className: "text-right", children: [
          /* @__PURE__ */ jsx137("p", { className: "font-medium", children: formatPrice(subscription.amount, subscription.currency || "USD") }),
          /* @__PURE__ */ jsx137(
            StatusBadge,
            {
              status: getStatusColor11(subscription.status),
              size: "sm"
            }
          )
        ] })
      ] }, subscription.id)) }) })
    ] }),
    currentSubscription && !isTrialPlan && /* @__PURE__ */ jsx137(
      ManualRenewalModal,
      {
        isOpen: showRenewalModal,
        onClose: () => setShowRenewalModal(false),
        subscription: {
          id: currentSubscription.id,
          merchantName: merchant.name,
          planName: currentSubscription.plan?.name || "Unknown Plan",
          amount: currentSubscription.plan?.basePrice || currentSubscription.amount || 0,
          currency: currentSubscription.currency || "USD",
          currentPeriodEnd: currentSubscription.currentPeriodEnd ? new Date(currentSubscription.currentPeriodEnd) : /* @__PURE__ */ new Date()
        },
        onRenew: handleRenewal,
        loading: renewalLoading
      }
    ),
    /* @__PURE__ */ jsx137(Dialog, { open: showChangeDialog, onOpenChange: setShowChangeDialog, children: /* @__PURE__ */ jsxs120(DialogContent, { className: "max-w-2xl max-h-[90vh] overflow-y-auto", children: [
      /* @__PURE__ */ jsxs120(DialogHeader, { children: [
        /* @__PURE__ */ jsxs120(DialogTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx137(ArrowRight3, { className: "h-5 w-5 text-blue-500" }),
          "Change Subscription Plan"
        ] }),
        /* @__PURE__ */ jsxs120(DialogDescription, { children: [
          "Change the subscription plan for ",
          merchant.name
        ] })
      ] }),
      /* @__PURE__ */ jsxs120("div", { className: "space-y-6", children: [
        currentSubscription?.plan && /* @__PURE__ */ jsxs120("div", { className: "p-4 bg-gray-50 border rounded-lg", children: [
          /* @__PURE__ */ jsx137("p", { className: "text-sm text-gray-600 mb-1", children: "Current Plan" }),
          /* @__PURE__ */ jsxs120("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx137("p", { className: "font-semibold text-lg", children: currentSubscription.plan.name }),
            /* @__PURE__ */ jsxs120("p", { className: "font-semibold text-lg", children: [
              formatPrice(currentSubscription.plan.basePrice, currentSubscription.plan.currency),
              "/month"
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs120("div", { children: [
          /* @__PURE__ */ jsx137(Label2, { htmlFor: "planSelect", children: "New Plan *" }),
          /* @__PURE__ */ jsxs120(Select, { value: selectedPlanId, onValueChange: setSelectedPlanId, children: [
            /* @__PURE__ */ jsx137(SelectTrigger, { children: /* @__PURE__ */ jsx137(SelectValue, { placeholder: "Choose a plan..." }) }),
            /* @__PURE__ */ jsx137(SelectContent, { children: plans.map((plan) => /* @__PURE__ */ jsxs120(SelectItem, { value: plan.id.toString(), children: [
              plan.name,
              " - $",
              plan.basePrice,
              "/month"
            ] }, plan.id)) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs120("div", { children: [
          /* @__PURE__ */ jsx137(Label2, { htmlFor: "changeBillingInterval", children: "Billing Cycle *" }),
          /* @__PURE__ */ jsxs120(Select, { value: changeBillingInterval, onValueChange: setChangeBillingInterval, children: [
            /* @__PURE__ */ jsx137(SelectTrigger, { children: /* @__PURE__ */ jsx137(SelectValue, {}) }),
            /* @__PURE__ */ jsx137(SelectContent, { children: billingIntervals.map((interval) => /* @__PURE__ */ jsx137(SelectItem, { value: interval.id, children: formatBillingInterval(interval.id) }, interval.id)) })
          ] }),
          /* @__PURE__ */ jsx137("p", { className: "text-xs text-gray-500 mt-1", children: "Longer billing cycles offer better discounts" })
        ] }),
        selectedPlanId && changeBillingInterval && /* @__PURE__ */ jsxs120("div", { className: "p-4 bg-blue-50 border border-blue-200 rounded-lg", children: [
          /* @__PURE__ */ jsx137("p", { className: "font-medium text-blue-900 mb-2", children: "Pricing Summary" }),
          /* @__PURE__ */ jsxs120("div", { className: "space-y-2 text-sm", children: [
            /* @__PURE__ */ jsxs120("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx137("span", { children: "New Plan:" }),
              /* @__PURE__ */ jsx137("span", { className: "font-medium", children: plans.find((p2) => p2.id.toString() === selectedPlanId)?.name })
            ] }),
            /* @__PURE__ */ jsxs120("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx137("span", { children: "Billing:" }),
              /* @__PURE__ */ jsx137("span", { className: "font-medium", children: formatBillingInterval(changeBillingInterval) })
            ] }),
            getDiscountPercentage2(changeBillingInterval) > 0 && /* @__PURE__ */ jsxs120("div", { className: "flex justify-between text-green-700", children: [
              /* @__PURE__ */ jsx137("span", { children: "Discount:" }),
              /* @__PURE__ */ jsxs120("span", { className: "font-medium", children: [
                getDiscountPercentage2(changeBillingInterval),
                "% off"
              ] })
            ] }),
            /* @__PURE__ */ jsxs120("div", { className: "flex justify-between pt-2 border-t text-base", children: [
              /* @__PURE__ */ jsx137("span", { className: "font-semibold", children: "Total:" }),
              /* @__PURE__ */ jsxs120("span", { className: "font-bold text-blue-900", children: [
                (() => {
                  const selectedPlan = plans.find((p2) => p2.id.toString() === selectedPlanId);
                  if (!selectedPlan)
                    return "$0.00";
                  const discount = getDiscountPercentage2(changeBillingInterval);
                  const discountedPrice = selectedPlan.basePrice * (1 - discount / 100);
                  return formatPrice(discountedPrice, selectedPlan.currency);
                })(),
                "/",
                changeBillingInterval
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs120("div", { children: [
          /* @__PURE__ */ jsx137(Label2, { htmlFor: "changeReason", children: "Reason for Change (Optional)" }),
          /* @__PURE__ */ jsx137(
            Textarea,
            {
              id: "changeReason",
              value: changeReason,
              onChange: (e2) => setChangeReason(e2.target.value),
              placeholder: "e.g., Customer requested upgrade, Business growth, etc.",
              rows: 2
            }
          )
        ] }),
        /* @__PURE__ */ jsxs120("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx137(
            "input",
            {
              type: "checkbox",
              id: "notifyMerchant",
              checked: notifyMerchant,
              onChange: (e2) => setNotifyMerchant(e2.target.checked),
              className: "rounded border-gray-300"
            }
          ),
          /* @__PURE__ */ jsx137(Label2, { htmlFor: "notifyMerchant", className: "text-sm", children: "Send email notification to merchant" })
        ] })
      ] }),
      /* @__PURE__ */ jsxs120(DialogFooter, { className: "border-t pt-4", children: [
        /* @__PURE__ */ jsx137(
          Button2,
          {
            variant: "outline",
            onClick: () => setShowChangeDialog(false),
            disabled: isSubmitting,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx137(
          Button2,
          {
            onClick: handleChangePlan,
            disabled: !selectedPlanId || !changeBillingInterval || isSubmitting,
            children: isSubmitting ? "Changing..." : "Change Plan"
          }
        )
      ] })
    ] }) }),
    /* @__PURE__ */ jsx137(Dialog, { open: showCancelDialog, onOpenChange: setShowCancelDialog, children: /* @__PURE__ */ jsxs120(DialogContent, { className: "max-w-md max-h-[90vh] overflow-y-auto flex flex-col", children: [
      /* @__PURE__ */ jsxs120(DialogHeader, { children: [
        /* @__PURE__ */ jsxs120(DialogTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx137(X12, { className: "h-5 w-5 text-red-500" }),
          "Cancel Plan"
        ] }),
        /* @__PURE__ */ jsxs120(DialogDescription, { children: [
          "Permanently cancel the current plan for ",
          merchant.name,
          ". This action cannot be undone."
        ] })
      ] }),
      /* @__PURE__ */ jsxs120("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx137("div", { className: "p-4 bg-red-50 border border-red-200 rounded-lg", children: /* @__PURE__ */ jsxs120("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx137(X12, { className: "h-5 w-5 text-red-500" }),
          /* @__PURE__ */ jsx137("p", { className: "text-sm text-red-700 font-medium", children: "Warning: This will permanently cancel the subscription" })
        ] }) }),
        /* @__PURE__ */ jsxs120("div", { children: [
          /* @__PURE__ */ jsx137(Label2, { htmlFor: "cancelType", children: "Cancellation Type" }),
          /* @__PURE__ */ jsxs120(Select, { value: cancelType, onValueChange: (value) => setCancelType(value), children: [
            /* @__PURE__ */ jsx137(SelectTrigger, { children: /* @__PURE__ */ jsx137(SelectValue, {}) }),
            /* @__PURE__ */ jsxs120(SelectContent, { children: [
              /* @__PURE__ */ jsx137(SelectItem, { value: "end_of_period", children: "End of Current Period (Recommended)" }),
              /* @__PURE__ */ jsx137(SelectItem, { value: "immediate", children: "Immediate Cancellation" })
            ] })
          ] }),
          /* @__PURE__ */ jsx137("p", { className: "text-xs text-gray-500 mt-1", children: cancelType === "end_of_period" ? "Customer keeps access until current billing period ends" : "Customer loses access immediately" })
        ] }),
        /* @__PURE__ */ jsxs120("div", { children: [
          /* @__PURE__ */ jsx137(Label2, { htmlFor: "cancelReason", children: "Reason for Cancellation" }),
          /* @__PURE__ */ jsx137(
            Textarea,
            {
              id: "cancelReason",
              value: cancelReason,
              onChange: (e2) => setCancelReason(e2.target.value),
              placeholder: "Enter reason for canceling this plan...",
              rows: 3
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs120(DialogFooter, { children: [
        /* @__PURE__ */ jsx137(
          Button2,
          {
            variant: "outline",
            onClick: () => setShowCancelDialog(false),
            disabled: isSubmitting,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx137(
          Button2,
          {
            variant: "destructive",
            onClick: handleCancel,
            disabled: !cancelReason.trim() || isSubmitting,
            children: isSubmitting ? "Canceling..." : "Cancel Plan"
          }
        )
      ] })
    ] }) }),
    /* @__PURE__ */ jsx137(Dialog, { open: showSuspendDialog, onOpenChange: setShowSuspendDialog, children: /* @__PURE__ */ jsxs120(DialogContent, { className: "max-w-md max-h-[90vh] overflow-y-auto flex flex-col", children: [
      /* @__PURE__ */ jsxs120(DialogHeader, { children: [
        /* @__PURE__ */ jsxs120(DialogTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx137(Pause4, { className: "h-5 w-5 text-orange-500" }),
          "Pause Plan"
        ] }),
        /* @__PURE__ */ jsxs120(DialogDescription, { children: [
          "Pause the current plan for ",
          merchant.name,
          ". The plan can be resumed later without losing subscription history."
        ] })
      ] }),
      /* @__PURE__ */ jsxs120("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx137("div", { className: "p-4 bg-orange-50 border border-orange-200 rounded-lg", children: /* @__PURE__ */ jsxs120("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx137(Clock14, { className: "h-5 w-5 text-orange-500" }),
          /* @__PURE__ */ jsx137("p", { className: "text-sm text-orange-700 font-medium", children: "Pausing preserves subscription history and makes reactivation easier" })
        ] }) }),
        /* @__PURE__ */ jsxs120("div", { children: [
          /* @__PURE__ */ jsx137(Label2, { htmlFor: "suspendReason", children: "Reason for Pausing" }),
          /* @__PURE__ */ jsx137(
            Textarea,
            {
              id: "suspendReason",
              value: suspendReason,
              onChange: (e2) => setSuspendReason(e2.target.value),
              placeholder: "Enter reason for pausing this plan...",
              rows: 3
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs120(DialogFooter, { children: [
        /* @__PURE__ */ jsx137(
          Button2,
          {
            variant: "outline",
            onClick: () => setShowSuspendDialog(false),
            disabled: isSubmitting,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx137(
          Button2,
          {
            variant: "destructive",
            onClick: handleSuspend,
            disabled: !suspendReason.trim() || isSubmitting,
            children: isSubmitting ? "Pausing..." : "Pause Plan"
          }
        )
      ] })
    ] }) }),
    /* @__PURE__ */ jsx137(Dialog, { open: showResumeDialog, onOpenChange: setShowResumeDialog, children: /* @__PURE__ */ jsxs120(DialogContent, { className: "max-w-md max-h-[90vh] overflow-y-auto flex flex-col", children: [
      /* @__PURE__ */ jsxs120(DialogHeader, { children: [
        /* @__PURE__ */ jsxs120(DialogTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx137(Play3, { className: "h-5 w-5 text-green-500" }),
          "Resume Subscription"
        ] }),
        /* @__PURE__ */ jsx137(DialogDescription, { children: "Are you sure you want to resume this subscription?" })
      ] }),
      /* @__PURE__ */ jsxs120("div", { className: "space-y-4 flex-1 overflow-y-auto", children: [
        /* @__PURE__ */ jsxs120("div", { className: "p-4 bg-green-50 border border-green-200 rounded-lg", children: [
          /* @__PURE__ */ jsx137("h4", { className: "font-semibold text-green-900 mb-2", children: "Resuming Subscription" }),
          /* @__PURE__ */ jsxs120("ul", { className: "text-sm text-green-800 space-y-1", children: [
            /* @__PURE__ */ jsx137("li", { children: "\u2713 Your subscription will be reactivated immediately" }),
            /* @__PURE__ */ jsx137("li", { children: "\u2713 You will regain full access to all features" }),
            /* @__PURE__ */ jsx137("li", { children: "\u2713 Billing will resume according to your current plan" }),
            /* @__PURE__ */ jsx137("li", { children: "\u2713 All services will be restored" })
          ] })
        ] }),
        currentSubscription && /* @__PURE__ */ jsxs120("div", { className: "p-4 bg-gray-50 border rounded-lg space-y-2 text-sm", children: [
          /* @__PURE__ */ jsxs120("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsx137("span", { className: "text-gray-600", children: "Plan:" }),
            /* @__PURE__ */ jsx137("span", { className: "font-medium", children: currentSubscription.plan?.name })
          ] }),
          /* @__PURE__ */ jsxs120("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsx137("span", { className: "text-gray-600", children: "Amount:" }),
            /* @__PURE__ */ jsxs120("span", { className: "font-medium", children: [
              formatPrice(currentSubscription.amount, currentSubscription.currency),
              "/month"
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs120(DialogFooter, { className: "flex-shrink-0", children: [
        /* @__PURE__ */ jsx137(
          Button2,
          {
            variant: "outline",
            onClick: () => setShowResumeDialog(false),
            disabled: isSubmitting,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx137(
          Button2,
          {
            variant: "default",
            onClick: handleReactivate,
            disabled: isSubmitting,
            className: "bg-green-600 hover:bg-green-700",
            children: isSubmitting ? "Resuming..." : "Resume Subscription"
          }
        )
      ] })
    ] }) }),
    /* @__PURE__ */ jsx137(Dialog, { open: showHistoryDialog, onOpenChange: setShowHistoryDialog, children: /* @__PURE__ */ jsxs120(DialogContent, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
      /* @__PURE__ */ jsxs120(DialogHeader, { children: [
        /* @__PURE__ */ jsxs120(DialogTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx137(History, { className: "h-5 w-5 text-blue-500" }),
          "Subscription Activity & Payment History"
        ] }),
        /* @__PURE__ */ jsx137(DialogDescription, { children: "View detailed activity and payment history for this subscription" })
      ] }),
      /* @__PURE__ */ jsx137("div", { className: "mt-4", children: /* @__PURE__ */ jsx137(
        SubscriptionHistoryDialog,
        {
          subscriptionId: currentSubscription?.id,
          merchantId: merchant.id
        }
      ) }),
      /* @__PURE__ */ jsx137(DialogFooter, { children: /* @__PURE__ */ jsx137(
        Button2,
        {
          variant: "outline",
          onClick: () => setShowHistoryDialog(false),
          children: "Close"
        }
      ) })
    ] }) })
  ] });
}

// src/components/features/Merchants/Merchants.tsx
import { jsx as jsx138, jsxs as jsxs121 } from "react/jsx-runtime";
function Merchants({
  data,
  filters,
  onFiltersChange,
  onSearchChange,
  onClearFilters,
  onMerchantAction,
  onPageChange,
  onSort
}) {
  console.log("\u{1F3E2} Merchants Component - Data check:", {
    total: data.total,
    currentPage: data.currentPage,
    totalPages: data.totalPages,
    merchantsCount: data.merchants?.length,
    shouldShowPagination: data.total > 0,
    paginationCondition: `data.total > 0 = ${data.total} > 0 = ${data.total > 0}`
  });
  const memoizedOnFiltersChange = React82.useCallback(onFiltersChange, [onFiltersChange]);
  const memoizedOnSearchChange = React82.useCallback(onSearchChange, [onSearchChange]);
  const memoizedOnClearFilters = React82.useCallback(onClearFilters || (() => {
  }), [onClearFilters]);
  const memoizedOnMerchantAction = React82.useCallback(onMerchantAction, [onMerchantAction]);
  const memoizedOnPageChange = React82.useCallback(onPageChange, [onPageChange]);
  const memoizedOnSort = React82.useCallback(onSort || (() => {
  }), [onSort]);
  return /* @__PURE__ */ jsxs121("div", { className: "flex flex-col h-full", children: [
    /* @__PURE__ */ jsxs121("div", { className: "flex-shrink-0 space-y-4", children: [
      /* @__PURE__ */ jsx138(MerchantListHeader_default, { stats: data.stats }),
      /* @__PURE__ */ jsx138(Card, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx138(CardContent, { className: "pt-4 pb-4", children: /* @__PURE__ */ jsx138("div", { className: "flex flex-wrap items-center gap-3", children: /* @__PURE__ */ jsx138(
        MerchantFilters_default,
        {
          filters,
          onFiltersChange: memoizedOnFiltersChange,
          onSearchChange: memoizedOnSearchChange,
          onClearFilters: memoizedOnClearFilters
        }
      ) }) }) })
    ] }),
    /* @__PURE__ */ jsx138("div", { className: "flex-1 min-h-0 mt-4", children: /* @__PURE__ */ jsx138(
      MerchantTable_default,
      {
        merchants: data.merchants,
        onMerchantAction: memoizedOnMerchantAction,
        sortBy: filters.sortBy || "createdAt",
        sortOrder: filters.sortOrder || "desc",
        onSort: memoizedOnSort
      }
    ) }),
    data.merchants.length > 0 && data.total > data.limit && /* @__PURE__ */ jsx138("div", { className: "flex-shrink-0 py-4", children: /* @__PURE__ */ jsx138(
      Pagination,
      {
        currentPage: data.currentPage || data.page || 1,
        totalPages: data.totalPages || 1,
        total: data.total || data.merchants.length,
        limit: data.limit || 10,
        onPageChange: memoizedOnPageChange,
        itemName: "merchants"
      }
    ) })
  ] });
}
var Merchants_default = Merchants;

// src/components/features/Merchants/components/MerchantDetail.tsx
import { useRouter as useRouter5 } from "next/navigation";

// src/components/features/Merchants/components/MerchantSubscriptionSection.tsx
import { useState as useState59, useEffect as useEffect34 } from "react";
import {
  Pause as Pause5,
  XCircle as XCircle11,
  AlertCircle as AlertCircle13,
  CheckCircle as CheckCircle17,
  Clock as Clock15,
  History as History2
} from "lucide-react";
import { Fragment as Fragment29, jsx as jsx139, jsxs as jsxs122 } from "react/jsx-runtime";
function MerchantSubscriptionSection({
  merchantId,
  subscription,
  loading = false
}) {
  const [activities, setActivities] = useState59([]);
  const [payments, setPayments] = useState59([]);
  const [loadingHistory, setLoadingHistory] = useState59(false);
  const [showHistoryDialog, setShowHistoryDialog] = useState59(false);
  useEffect34(() => {
    if (subscription && showHistoryDialog) {
      fetchHistory();
    }
  }, [subscription, showHistoryDialog]);
  const fetchHistory = async () => {
    if (!subscription)
      return;
    try {
      setLoadingHistory(true);
      const { subscriptionsApi: subscriptionsApi3 } = await import("@rentalshop/utils");
      try {
        const activitiesResult = await subscriptionsApi3.getActivities(subscription.id, 20);
        if (activitiesResult.success && activitiesResult.data) {
          setActivities(activitiesResult.data || []);
        }
      } catch (err) {
        console.log("Activities not yet implemented or error:", err);
        setActivities([]);
      }
      try {
        const paymentsResult = await subscriptionsApi3.getPayments(subscription.id, 20);
        if (paymentsResult.success && paymentsResult.data) {
          setPayments(paymentsResult.data || []);
        }
      } catch (err) {
        console.log("Payments not yet implemented or error:", err);
        setPayments([]);
      }
    } catch (error2) {
      console.error("Error fetching history:", error2);
    } finally {
      setLoadingHistory(false);
    }
  };
  const getStatusBadge = (status) => {
    const statusMap = {
      active: { variant: "success", label: "Active", icon: CheckCircle17 },
      trial: { variant: "warning", label: "Trial", icon: Clock15 },
      past_due: { variant: "danger", label: "Past Due", icon: AlertCircle13 },
      paused: { variant: "secondary", label: "Paused", icon: Pause5 },
      cancelled: { variant: "danger", label: "Cancelled", icon: XCircle11 }
    };
    const config = statusMap[status] || { variant: "default", label: status, icon: Clock15 };
    const Icon2 = config.icon;
    return /* @__PURE__ */ jsxs122(Badge, { variant: config.variant, className: "flex items-center gap-1", children: [
      /* @__PURE__ */ jsx139(Icon2, { className: "w-3 h-3" }),
      config.label
    ] });
  };
  const getDaysRemaining = () => {
    if (!subscription || !subscription.currentPeriodEnd)
      return 0;
    try {
      const now = /* @__PURE__ */ new Date();
      const end = new Date(subscription.currentPeriodEnd);
      if (isNaN(end.getTime()))
        return 0;
      const diff = end.getTime() - now.getTime();
      return Math.ceil(diff / (1e3 * 60 * 60 * 24));
    } catch (error2) {
      console.error("Error calculating days remaining:", error2);
      return 0;
    }
  };
  if (!subscription) {
    return null;
  }
  return /* @__PURE__ */ jsx139(Fragment29, { children: /* @__PURE__ */ jsx139(Dialog, { open: showHistoryDialog, onOpenChange: setShowHistoryDialog, children: /* @__PURE__ */ jsxs122(DialogContent, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsxs122(DialogHeader, { children: [
      /* @__PURE__ */ jsxs122(DialogTitle, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx139(History2, { className: "h-5 w-5 text-blue-500" }),
        "Subscription Activity & Payment History"
      ] }),
      /* @__PURE__ */ jsx139(DialogDescription, { children: "View detailed activity and payment history for this subscription" })
    ] }),
    /* @__PURE__ */ jsx139("div", { className: "mt-4", children: /* @__PURE__ */ jsx139(
      SubscriptionActivityTimeline,
      {
        activities,
        payments,
        loading: loadingHistory,
        onExport: () => {
          console.log("Export subscription history");
        }
      }
    ) }),
    /* @__PURE__ */ jsx139(DialogFooter, { children: /* @__PURE__ */ jsx139(
      Button2,
      {
        variant: "outline",
        onClick: () => setShowHistoryDialog(false),
        children: "Close"
      }
    ) })
  ] }) }) });
}

// src/components/features/Merchants/components/MerchantDetail.tsx
import { Building2 as Building26, Users as Users8, Package as Package12, ShoppingCart as ShoppingCart7 } from "lucide-react";
import { jsx as jsx140, jsxs as jsxs123 } from "react/jsx-runtime";
function MerchantDetail({
  data,
  plans = [],
  currentUserRole,
  onMerchantAction,
  onOutletAction,
  onUserAction,
  onProductAction,
  onOrderAction,
  onPlanChange,
  onExtend,
  onCancel,
  onSuspend,
  onReactivate
}) {
  const router = useRouter5();
  const navigateToPage = (page, id) => {
    const url = id ? `/${page}/${id}` : `/${page}`;
    router.push(url);
  };
  const handleNavigateToAdmin = (page, id) => {
    navigateToPage(page, id);
  };
  return /* @__PURE__ */ jsxs123("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx140(
      MerchantHeader,
      {
        merchant: data.merchant,
        stats: data.stats
      }
    ),
    /* @__PURE__ */ jsx140("div", { className: "grid grid-cols-1 gap-6", children: /* @__PURE__ */ jsxs123(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx140(CardHeader, { children: /* @__PURE__ */ jsx140(CardTitle, { children: "Basic Information" }) }),
      /* @__PURE__ */ jsx140(CardContent, { children: /* @__PURE__ */ jsxs123("div", { className: "space-y-3", children: [
        /* @__PURE__ */ jsxs123("div", { children: [
          /* @__PURE__ */ jsx140("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400", children: "Name" }),
          /* @__PURE__ */ jsx140("p", { className: "text-sm text-gray-900 dark:text-white", children: data.merchant.name })
        ] }),
        /* @__PURE__ */ jsxs123("div", { children: [
          /* @__PURE__ */ jsx140("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400", children: "Email" }),
          /* @__PURE__ */ jsx140("p", { className: "text-sm text-gray-900 dark:text-white", children: data.merchant.email })
        ] }),
        /* @__PURE__ */ jsxs123("div", { children: [
          /* @__PURE__ */ jsx140("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400", children: "Phone" }),
          /* @__PURE__ */ jsx140("p", { className: "text-sm text-gray-900 dark:text-white", children: data.merchant.phone || "Not provided" })
        ] }),
        /* @__PURE__ */ jsxs123("div", { children: [
          /* @__PURE__ */ jsx140("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400", children: "Address" }),
          /* @__PURE__ */ jsx140("p", { className: "text-sm text-gray-900 dark:text-white", children: data.merchant.address || "Not provided" })
        ] }),
        /* @__PURE__ */ jsxs123("div", { children: [
          /* @__PURE__ */ jsx140("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400", children: "Description" }),
          /* @__PURE__ */ jsx140("p", { className: "text-sm text-gray-900 dark:text-white", children: data.merchant.description || "No description" })
        ] }),
        /* @__PURE__ */ jsxs123("div", { children: [
          /* @__PURE__ */ jsx140("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400", children: "Status" }),
          /* @__PURE__ */ jsx140("p", { className: `text-sm ${data.merchant.isActive ? "text-green-600" : "text-red-600"}`, children: data.merchant.isActive ? "Active" : "Inactive" })
        ] })
      ] }) })
    ] }) }),
    onPlanChange && /* @__PURE__ */ jsx140(
      MerchantPlanManagement,
      {
        merchant: {
          id: data.merchant.id,
          name: data.merchant.name,
          email: data.merchant.email,
          currentPlan: data.merchant.plan ? {
            id: data.merchant.plan.id,
            name: data.merchant.plan.name,
            price: data.merchant.plan.basePrice,
            currency: data.merchant.plan.currency
          } : null,
          subscriptionStatus: data.merchant.subscription?.status || "unknown"
        },
        subscriptions: data.merchant.subscription ? [data.merchant.subscription] : [],
        plans,
        currentUserRole,
        onPlanChange,
        onExtend,
        onCancel,
        onSuspend,
        onReactivate
      }
    ),
    data.merchant.subscription && /* @__PURE__ */ jsx140(
      MerchantSubscriptionSection,
      {
        merchantId: data.merchant.id,
        subscription: data.merchant.subscription
      }
    ),
    /* @__PURE__ */ jsxs123("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: [
      /* @__PURE__ */ jsxs123(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs123(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
          /* @__PURE__ */ jsx140(CardTitle, { className: "text-sm font-medium", children: "Manage Outlets" }),
          /* @__PURE__ */ jsx140(Building26, { className: "w-5 h-5 text-blue-600" })
        ] }),
        /* @__PURE__ */ jsx140(CardContent, { children: /* @__PURE__ */ jsx140(
          Button2,
          {
            variant: "outline",
            className: "w-full",
            onClick: () => handleNavigateToAdmin("merchants/" + data.merchant.id + "/outlets"),
            children: "Go to Outlets"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs123(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs123(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
          /* @__PURE__ */ jsx140(CardTitle, { className: "text-sm font-medium", children: "Manage Products" }),
          /* @__PURE__ */ jsx140(Package12, { className: "w-5 h-5 text-green-600" })
        ] }),
        /* @__PURE__ */ jsx140(CardContent, { children: /* @__PURE__ */ jsx140(
          Button2,
          {
            variant: "outline",
            className: "w-full",
            onClick: () => handleNavigateToAdmin("merchants/" + data.merchant.id + "/products"),
            children: "Go to Products"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs123(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs123(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
          /* @__PURE__ */ jsx140(CardTitle, { className: "text-sm font-medium", children: "Manage Users" }),
          /* @__PURE__ */ jsx140(Users8, { className: "w-5 h-5 text-purple-600" })
        ] }),
        /* @__PURE__ */ jsx140(CardContent, { children: /* @__PURE__ */ jsx140(
          Button2,
          {
            variant: "outline",
            className: "w-full",
            onClick: () => handleNavigateToAdmin("merchants/" + data.merchant.id + "/users"),
            children: "Go to Users"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs123(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs123(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
          /* @__PURE__ */ jsx140(CardTitle, { className: "text-sm font-medium", children: "Manage Orders" }),
          /* @__PURE__ */ jsx140(ShoppingCart7, { className: "w-5 h-5 text-orange-600" })
        ] }),
        /* @__PURE__ */ jsx140(CardContent, { children: /* @__PURE__ */ jsx140(
          Button2,
          {
            variant: "outline",
            className: "w-full",
            onClick: () => handleNavigateToAdmin("merchants/" + data.merchant.id + "/orders"),
            children: "Go to Orders"
          }
        ) })
      ] })
    ] })
  ] });
}

// src/components/features/Calendars/Calendars.tsx
import { useState as useState60, useCallback as useCallback9 } from "react";

// src/components/features/Calendars/components/CalendarHeader.tsx
import { Calendar as Calendar16 } from "lucide-react";
import { useCalendarTranslations } from "@rentalshop/hooks";
import { jsx as jsx141, jsxs as jsxs124 } from "react/jsx-runtime";
function CalendarHeader({
  title,
  subtitle,
  children
}) {
  const t2 = useCalendarTranslations();
  return /* @__PURE__ */ jsxs124("div", { className: "flex items-center justify-between mb-6", children: [
    /* @__PURE__ */ jsxs124("div", { className: "flex items-center space-x-3", children: [
      /* @__PURE__ */ jsx141("div", { className: "w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center", children: /* @__PURE__ */ jsx141(Calendar16, { className: "w-6 h-6 text-blue-600" }) }),
      /* @__PURE__ */ jsxs124("div", { children: [
        /* @__PURE__ */ jsx141("h1", { className: "text-2xl font-bold text-gray-900", children: title || t2("title") }),
        subtitle && /* @__PURE__ */ jsx141("p", { className: "text-sm text-gray-600", children: subtitle })
      ] })
    ] }),
    children && /* @__PURE__ */ jsx141("div", { className: "flex items-center space-x-3", children })
  ] });
}

// src/components/features/Calendars/components/CalendarNavigation.tsx
import { ChevronLeft as ChevronLeft3, ChevronRight as ChevronRight4, Calendar as CalendarIcon } from "lucide-react";
import { useCalendarTranslations as useCalendarTranslations2 } from "@rentalshop/hooks";
import { jsx as jsx142, jsxs as jsxs125 } from "react/jsx-runtime";
function CalendarNavigation({
  currentDate,
  onPreviousMonth,
  onNextMonth,
  onToday,
  className = ""
}) {
  const t2 = useCalendarTranslations2();
  const monthNames = [
    t2("months.january"),
    t2("months.february"),
    t2("months.march"),
    t2("months.april"),
    t2("months.may"),
    t2("months.june"),
    t2("months.july"),
    t2("months.august"),
    t2("months.september"),
    t2("months.october"),
    t2("months.november"),
    t2("months.december")
  ];
  const currentMonth = monthNames[currentDate.getMonth()];
  const currentYear = currentDate.getFullYear();
  return /* @__PURE__ */ jsxs125("div", { className: `flex items-center justify-between ${className}`, children: [
    /* @__PURE__ */ jsxs125("div", { className: "flex items-center space-x-3", children: [
      /* @__PURE__ */ jsx142(CalendarIcon, { className: "w-5 h-5 text-blue-600" }),
      /* @__PURE__ */ jsxs125("h2", { className: "text-xl font-semibold text-gray-900", children: [
        currentMonth,
        " ",
        currentYear
      ] })
    ] }),
    /* @__PURE__ */ jsxs125("div", { className: "flex items-center space-x-2", children: [
      /* @__PURE__ */ jsx142(
        Button2,
        {
          variant: "outline",
          size: "icon",
          onClick: onPreviousMonth,
          "aria-label": "Previous month",
          children: /* @__PURE__ */ jsx142(ChevronLeft3, { className: "w-5 h-5 text-gray-600" })
        }
      ),
      /* @__PURE__ */ jsx142(
        Button2,
        {
          variant: "outline",
          onClick: onToday,
          className: "px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100",
          children: t2("navigation.today")
        }
      ),
      /* @__PURE__ */ jsx142(
        Button2,
        {
          variant: "outline",
          size: "icon",
          onClick: onNextMonth,
          "aria-label": "Next month",
          children: /* @__PURE__ */ jsx142(ChevronRight4, { className: "w-5 h-5 text-gray-600" })
        }
      )
    ] })
  ] });
}

// src/components/features/Calendars/components/CalendarStats.tsx
import { Package as Package13, ArrowUpRight } from "lucide-react";
import { useCalendarTranslations as useCalendarTranslations3 } from "@rentalshop/hooks";
import { jsx as jsx143, jsxs as jsxs126 } from "react/jsx-runtime";
function CalendarStats({
  totalPickups,
  currentMonth,
  currentYear,
  className = ""
}) {
  const t2 = useCalendarTranslations3();
  const monthNames = [
    t2("months.january"),
    t2("months.february"),
    t2("months.march"),
    t2("months.april"),
    t2("months.may"),
    t2("months.june"),
    t2("months.july"),
    t2("months.august"),
    t2("months.september"),
    t2("months.october"),
    t2("months.november"),
    t2("months.december")
  ];
  return /* @__PURE__ */ jsxs126("div", { className: `grid grid-cols-1 md:grid-cols-2 gap-4 ${className}`, children: [
    /* @__PURE__ */ jsx143("div", { className: "bg-white rounded-lg border border-gray-200 p-4", children: /* @__PURE__ */ jsxs126("div", { className: "flex items-center space-x-3", children: [
      /* @__PURE__ */ jsx143("div", { className: "w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center", children: /* @__PURE__ */ jsx143(ArrowUpRight, { className: "w-5 h-5 text-green-600" }) }),
      /* @__PURE__ */ jsxs126("div", { children: [
        /* @__PURE__ */ jsx143("p", { className: "text-sm font-medium text-gray-600", children: t2("labels.pickupOrders") }),
        /* @__PURE__ */ jsx143("p", { className: "text-2xl font-bold text-gray-900", children: totalPickups })
      ] })
    ] }) }),
    /* @__PURE__ */ jsx143("div", { className: "bg-white rounded-lg border border-gray-200 p-4", children: /* @__PURE__ */ jsxs126("div", { className: "flex items-center space-x-3", children: [
      /* @__PURE__ */ jsx143("div", { className: "w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center", children: /* @__PURE__ */ jsx143(Package13, { className: "w-5 h-5 text-purple-600" }) }),
      /* @__PURE__ */ jsxs126("div", { children: [
        /* @__PURE__ */ jsx143("p", { className: "text-sm font-medium text-gray-600", children: t2("labels.month") }),
        /* @__PURE__ */ jsxs126("p", { className: "text-lg font-semibold text-gray-900", children: [
          monthNames[currentMonth],
          " ",
          currentYear
        ] })
      ] })
    ] }) })
  ] });
}

// src/components/features/Calendars/components/CalendarGrid.tsx
import React84 from "react";
import { useCalendarTranslations as useCalendarTranslations4 } from "@rentalshop/hooks";
import { jsx as jsx144, jsxs as jsxs127 } from "react/jsx-runtime";
function CalendarGrid({
  currentDate,
  selectedDate,
  orders,
  onDateClick,
  className = ""
}) {
  const t2 = useCalendarTranslations4();
  const calendarDays = React84.useMemo(() => {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const startDate = new Date(firstDay);
    startDate.setDate(startDate.getDate() - firstDay.getDay());
    const endDate = new Date(lastDay);
    endDate.setDate(endDate.getDate() + (6 - lastDay.getDay()));
    const days = [];
    const tempDate = new Date(startDate);
    while (tempDate <= endDate) {
      const dayOfMonth = tempDate.getDate();
      const isCurrentMonth = tempDate.getMonth() === month;
      const isToday = tempDate.toDateString() === (/* @__PURE__ */ new Date()).toDateString();
      const isSelected = selectedDate?.toDateString() === tempDate.toDateString();
      const currentDateKey = `${tempDate.getFullYear()}-${String(tempDate.getMonth() + 1).padStart(2, "0")}-${String(tempDate.getDate()).padStart(2, "0")}`;
      const dateOrders = orders.filter((order) => {
        const pickupDate = new Date(order.pickupPlanAt || order.pickupDate);
        const returnDate = new Date(order.returnPlanAt || order.returnDate);
        const pickupDateKey = `${pickupDate.getFullYear()}-${String(pickupDate.getMonth() + 1).padStart(2, "0")}-${String(pickupDate.getDate()).padStart(2, "0")}`;
        const returnDateKey = `${returnDate.getFullYear()}-${String(returnDate.getMonth() + 1).padStart(2, "0")}-${String(returnDate.getDate()).padStart(2, "0")}`;
        const matches = pickupDateKey === currentDateKey || returnDateKey === currentDateKey;
        return matches;
      });
      const pickupOrders = dateOrders.filter((order) => {
        const pickupDate = new Date(order.pickupPlanAt || order.pickupDate);
        const pickupDateKey = `${pickupDate.getFullYear()}-${String(pickupDate.getMonth() + 1).padStart(2, "0")}-${String(pickupDate.getDate()).padStart(2, "0")}`;
        return pickupDateKey === currentDateKey;
      });
      const returnOrders = [];
      days.push({
        date: new Date(tempDate),
        events: [],
        // Required by CalendarDay interface
        isCurrentMonth,
        isToday,
        isSelected,
        // Additional properties for this component
        dayOfMonth,
        pickupOrders,
        returnOrders,
        hasEvents: dateOrders.length > 0,
        orders: dateOrders,
        pickupCount: pickupOrders.length,
        returnCount: returnOrders.length
      });
      tempDate.setDate(tempDate.getDate() + 1);
    }
    return days;
  }, [currentDate, orders, selectedDate]);
  const weekdays = [
    t2("days.sunday"),
    t2("days.monday"),
    t2("days.tuesday"),
    t2("days.wednesday"),
    t2("days.thursday"),
    t2("days.friday"),
    t2("days.saturday")
  ];
  return /* @__PURE__ */ jsxs127("div", { className: `bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden ${className}`, children: [
    /* @__PURE__ */ jsx144("div", { className: "grid grid-cols-7 bg-gray-50 border-b border-gray-200", children: weekdays.map((day) => /* @__PURE__ */ jsx144(
      "div",
      {
        className: "px-3 py-3 text-center text-sm font-medium text-gray-700",
        children: day
      },
      day
    )) }),
    /* @__PURE__ */ jsx144("div", { className: "grid grid-cols-7", children: calendarDays.map((day, index) => /* @__PURE__ */ jsxs127(
      "div",
      {
        onClick: () => onDateClick(day.date),
        className: `
              min-h-[120px] p-2 border-r border-b border-gray-200 cursor-pointer transition-colors
              ${day.isCurrentMonth ? "bg-white" : "bg-gray-50"}
              ${day.isToday ? "bg-blue-50" : ""}
              ${day.isSelected ? "bg-blue-100 ring-2 ring-blue-500" : ""}
              ${day.isCurrentMonth ? "hover:bg-gray-50" : ""}
            `,
        children: [
          /* @__PURE__ */ jsx144("div", { className: "mb-2", children: /* @__PURE__ */ jsx144(
            "span",
            {
              className: `
                  text-sm font-medium
                  ${day.isCurrentMonth ? "text-gray-900" : "text-gray-400"}
                  ${day.isToday ? "text-blue-600 font-bold" : ""}
                `,
              children: day.dayOfMonth
            }
          ) }),
          /* @__PURE__ */ jsxs127("div", { className: "space-y-1", children: [
            day.hasEvents && /* @__PURE__ */ jsxs127("div", { className: "space-y-1", children: [
              day.pickupCount > 0 && /* @__PURE__ */ jsxs127("div", { className: "flex items-center justify-between px-2 py-1 bg-green-50 border border-green-200 rounded text-xs", children: [
                /* @__PURE__ */ jsx144("span", { className: "text-green-700 font-medium", children: t2("labels.pickup") }),
                /* @__PURE__ */ jsx144("span", { className: "text-green-800 font-bold", children: day.pickupCount })
              ] }),
              day.returnCount > 0 && /* @__PURE__ */ jsxs127("div", { className: "flex items-center justify-between px-2 py-1 bg-blue-50 border border-blue-200 rounded text-xs", children: [
                /* @__PURE__ */ jsx144("span", { className: "text-blue-700 font-medium", children: t2("labels.return") }),
                /* @__PURE__ */ jsx144("span", { className: "text-blue-800 font-bold", children: day.returnCount })
              ] }),
              /* @__PURE__ */ jsx144("div", { className: "text-xs text-gray-400 text-left", children: t2("labels.more") })
            ] }),
            !day.hasEvents && day.isCurrentMonth && /* @__PURE__ */ jsx144("div", { className: "text-xs text-gray-400 text-center py-2", children: t2("labels.noOrders") })
          ] })
        ]
      },
      index
    )) })
  ] });
}

// src/components/features/Calendars/components/CalendarLoading.tsx
import { jsx as jsx145, jsxs as jsxs128 } from "react/jsx-runtime";
function CalendarLoading() {
  return /* @__PURE__ */ jsxs128("div", { className: "space-y-6 animate-pulse", children: [
    /* @__PURE__ */ jsx145("div", { className: "bg-white rounded-xl border border-gray-200 p-6 shadow-sm", children: /* @__PURE__ */ jsxs128("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs128("div", { className: "space-y-3", children: [
        /* @__PURE__ */ jsx145("div", { className: "h-8 w-64 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsxs128("div", { className: "flex items-center gap-6", children: [
          /* @__PURE__ */ jsxs128("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx145("div", { className: "w-3 h-3 bg-gray-200 rounded-full" }),
            /* @__PURE__ */ jsx145("div", { className: "h-4 w-32 bg-gray-200 rounded" })
          ] }),
          /* @__PURE__ */ jsxs128("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx145("div", { className: "w-3 h-3 bg-gray-200 rounded-full" }),
            /* @__PURE__ */ jsx145("div", { className: "h-4 w-32 bg-gray-200 rounded" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs128("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsx145("div", { className: "w-12 h-12 bg-gray-200 rounded-lg" }),
        /* @__PURE__ */ jsx145("div", { className: "w-12 h-12 bg-gray-200 rounded-lg" })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs128("div", { className: "bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden", children: [
      /* @__PURE__ */ jsx145("div", { className: "grid grid-cols-7 bg-gray-50 border-b border-gray-200", children: Array.from({ length: 7 }).map((_, i) => /* @__PURE__ */ jsx145("div", { className: "px-3 py-3", children: /* @__PURE__ */ jsx145("div", { className: "h-4 bg-gray-200 rounded mx-auto w-8" }) }, i)) }),
      /* @__PURE__ */ jsx145("div", { className: "grid grid-cols-7", children: Array.from({ length: 35 }).map((_, i) => /* @__PURE__ */ jsx145(
        "div",
        {
          className: "min-h-[120px] p-2 border-r border-b border-gray-200",
          children: /* @__PURE__ */ jsxs128("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx145("div", { className: "h-4 w-6 bg-gray-200 rounded" }),
            /* @__PURE__ */ jsx145("div", { className: "h-3 w-16 bg-gray-200 rounded" }),
            /* @__PURE__ */ jsx145("div", { className: "h-3 w-12 bg-gray-200 rounded" })
          ] })
        },
        i
      )) })
    ] })
  ] });
}
function CalendarEventLoading() {
  return /* @__PURE__ */ jsxs128("div", { className: "space-y-4 animate-pulse", children: [
    /* @__PURE__ */ jsxs128("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs128("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx145("div", { className: "h-6 w-32 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsx145("div", { className: "h-4 w-24 bg-gray-200 rounded" })
      ] }),
      /* @__PURE__ */ jsx145("div", { className: "h-8 w-20 bg-gray-200 rounded" })
    ] }),
    /* @__PURE__ */ jsxs128("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs128("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx145("div", { className: "h-5 w-20 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsx145("div", { className: "space-y-2", children: Array.from({ length: 4 }).map((_, i) => /* @__PURE__ */ jsx145("div", { className: "h-4 w-full bg-gray-200 rounded" }, i)) })
      ] }),
      /* @__PURE__ */ jsxs128("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx145("div", { className: "h-5 w-20 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsx145("div", { className: "space-y-2", children: Array.from({ length: 3 }).map((_, i) => /* @__PURE__ */ jsx145("div", { className: "h-4 w-full bg-gray-200 rounded" }, i)) })
      ] })
    ] }),
    /* @__PURE__ */ jsxs128("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx145("div", { className: "h-5 w-28 bg-gray-200 rounded" }),
      /* @__PURE__ */ jsx145("div", { className: "space-y-3", children: Array.from({ length: 3 }).map((_, i) => /* @__PURE__ */ jsxs128("div", { className: "flex items-center gap-3 p-3 border rounded-lg", children: [
        /* @__PURE__ */ jsx145("div", { className: "h-4 w-4 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsx145("div", { className: "h-4 w-32 bg-gray-200 rounded" }),
        /* @__PURE__ */ jsx145("div", { className: "h-4 w-24 bg-gray-200 rounded" })
      ] }, i)) })
    ] })
  ] });
}

// src/components/features/Calendars/Calendars.tsx
import { jsx as jsx146, jsxs as jsxs129 } from "react/jsx-runtime";
function Calendars({
  orders = [],
  loading = false,
  error: error2 = null,
  authenticated = false,
  onFiltersChange,
  onOrderClick,
  onDateSelect,
  onLoginClick,
  onDevLogin,
  onRetry,
  className = ""
}) {
  const [currentDate, setCurrentDate] = useState60(/* @__PURE__ */ new Date());
  const [selectedDate, setSelectedDate] = useState60(null);
  const goToPreviousMonth = useCallback9(() => {
    setCurrentDate((prev) => new Date(prev.getFullYear(), prev.getMonth() - 1, 1));
  }, []);
  const goToNextMonth = useCallback9(() => {
    setCurrentDate((prev) => new Date(prev.getFullYear(), prev.getMonth() + 1, 1));
  }, []);
  const goToToday = useCallback9(() => {
    const today = /* @__PURE__ */ new Date();
    setCurrentDate(today);
    setSelectedDate(today);
  }, []);
  const handleDateClick = useCallback9((date2) => {
    setSelectedDate(date2);
    onDateSelect?.(date2);
  }, [onDateSelect]);
  const currentMonth = currentDate.getMonth();
  const currentYear = currentDate.getFullYear();
  const monthOrders = orders.filter((order) => {
    const orderDate = new Date(order.pickupPlanAt || order.pickupDate);
    return orderDate.getMonth() === currentMonth && orderDate.getFullYear() === currentYear;
  });
  const totalPickups = monthOrders.length;
  const totalReturns = 0;
  if (loading) {
    return /* @__PURE__ */ jsxs129("div", { className, children: [
      /* @__PURE__ */ jsx146(CalendarHeader, {}),
      /* @__PURE__ */ jsx146(CalendarLoading, {})
    ] });
  }
  return /* @__PURE__ */ jsxs129("div", { className: `space-y-6 ${className}`, children: [
    /* @__PURE__ */ jsx146(CalendarHeader, { children: /* @__PURE__ */ jsx146(
      CalendarNavigation,
      {
        currentDate,
        onPreviousMonth: goToPreviousMonth,
        onNextMonth: goToNextMonth,
        onToday: goToToday
      }
    ) }),
    /* @__PURE__ */ jsx146(
      CalendarStats,
      {
        totalPickups,
        currentMonth,
        currentYear
      }
    ),
    /* @__PURE__ */ jsx146(
      CalendarGrid,
      {
        currentDate,
        selectedDate,
        orders,
        onDateClick: handleDateClick
      }
    )
  ] });
}

// src/components/features/Calendars/components/OrdersList.tsx
import { Package as Package14, User as User10, Clock as Clock16 } from "lucide-react";
import { jsx as jsx147, jsxs as jsxs130 } from "react/jsx-runtime";
function OrdersList({
  orders,
  selectedDate,
  onOrderClick,
  className = ""
}) {
  if (orders.length === 0) {
    return /* @__PURE__ */ jsxs130("div", { className: `text-center py-8 text-gray-500 ${className}`, children: [
      /* @__PURE__ */ jsx147(Package14, { className: "w-12 h-12 mx-auto mb-4 text-gray-300" }),
      /* @__PURE__ */ jsx147("p", { className: "text-lg font-medium", children: "No orders found" }),
      selectedDate && /* @__PURE__ */ jsxs130("p", { className: "text-sm", children: [
        "for ",
        selectedDate.toLocaleDateString()
      ] })
    ] });
  }
  return /* @__PURE__ */ jsxs130("div", { className: `space-y-4 ${className}`, children: [
    /* @__PURE__ */ jsxs130("h3", { className: "text-lg font-semibold text-gray-900", children: [
      "Orders ",
      selectedDate && `for ${selectedDate.toLocaleDateString()}`
    ] }),
    /* @__PURE__ */ jsx147("div", { className: "space-y-3", children: orders.map((order) => /* @__PURE__ */ jsxs130(
      "div",
      {
        onClick: () => onOrderClick?.(order),
        className: "bg-white border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all duration-200 cursor-pointer",
        children: [
          /* @__PURE__ */ jsxs130("div", { className: "flex items-center justify-between mb-3", children: [
            /* @__PURE__ */ jsxs130("h4", { className: "font-semibold text-gray-900", children: [
              "#",
              order.orderNumber
            ] }),
            /* @__PURE__ */ jsx147("span", { className: `px-2 py-1 text-xs rounded-full font-medium ${order.status === "RESERVED" ? "bg-red-100 text-red-800" : order.status === "PICKUPED" ? "bg-green-100 text-green-800" : "bg-gray-100 text-gray-800"}`, children: order.status })
          ] }),
          /* @__PURE__ */ jsxs130("div", { className: "flex items-center space-x-3 mb-3", children: [
            /* @__PURE__ */ jsx147("div", { className: "w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx147(User10, { className: "w-4 h-4 text-blue-600" }) }),
            /* @__PURE__ */ jsxs130("div", { children: [
              /* @__PURE__ */ jsx147("p", { className: "font-medium text-gray-900", children: order.customerName }),
              /* @__PURE__ */ jsx147("p", { className: "text-sm text-gray-500", children: order.customerPhone || "No phone" })
            ] })
          ] }),
          /* @__PURE__ */ jsxs130("div", { className: "flex items-center space-x-2 mb-3", children: [
            /* @__PURE__ */ jsx147(Package14, { className: "w-4 h-4 text-gray-500" }),
            /* @__PURE__ */ jsx147("span", { className: "text-sm text-gray-700", children: order.productName })
          ] }),
          /* @__PURE__ */ jsxs130("div", { className: "flex items-center text-sm text-gray-600", children: [
            /* @__PURE__ */ jsx147(Clock16, { className: "w-4 h-4 mr-2" }),
            /* @__PURE__ */ jsx147("span", { className: "capitalize", children: order.status })
          ] })
        ]
      },
      order.id
    )) })
  ] });
}

// src/components/features/Users/Users.tsx
import React93 from "react";
import {
  Pagination as Pagination8,
  EmptyState as EmptyState4,
  Card as Card43,
  CardContent as CardContent42
} from "@rentalshop/ui";

// src/components/features/Users/components/UserHeader.tsx
import { Grid, List, Plus as Plus7 } from "lucide-react";
import { jsx as jsx148, jsxs as jsxs131 } from "react/jsx-runtime";
function UserHeader({ viewMode, onViewModeChange, onAddUser }) {
  return /* @__PURE__ */ jsxs131("div", { className: "flex justify-between items-center gap-4", children: [
    /* @__PURE__ */ jsx148("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsxs131(
      Button2,
      {
        onClick: onAddUser,
        className: "bg-blue-600 hover:bg-blue-700 text-white",
        children: [
          /* @__PURE__ */ jsx148(Plus7, { className: "w-4 h-4 mr-2" }),
          "Add User"
        ]
      }
    ) }),
    /* @__PURE__ */ jsxs131("div", { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsxs131(
        Button2,
        {
          variant: viewMode === "table" ? "default" : "outline",
          size: "sm",
          onClick: () => onViewModeChange("table"),
          className: "flex items-center gap-2",
          children: [
            /* @__PURE__ */ jsx148(List, { className: "w-4 h-4" }),
            "Table"
          ]
        }
      ),
      /* @__PURE__ */ jsxs131(
        Button2,
        {
          variant: viewMode === "grid" ? "default" : "outline",
          size: "sm",
          onClick: () => onViewModeChange("grid"),
          className: "flex items-center gap-2",
          children: [
            /* @__PURE__ */ jsx148(Grid, { className: "w-4 h-4" }),
            "Grid"
          ]
        }
      )
    ] })
  ] });
}

// src/components/features/Users/components/UserFilters.tsx
import {
  Input as Input19,
  Select as Select12,
  SelectContent as SelectContent12,
  SelectItem as SelectItem12,
  SelectTrigger as SelectTrigger12,
  SelectValue as SelectValue12,
  Button as Button36
} from "@rentalshop/ui";
import { Fragment as Fragment30, jsx as jsx149, jsxs as jsxs132 } from "react/jsx-runtime";
function UserFilters({ filters, onFiltersChange, onSearchChange, onClearFilters }) {
  const handleFilterChange = (key, value) => {
    onFiltersChange({
      ...filters,
      [key]: value
    });
  };
  const handleInputChange = (e2) => {
    onSearchChange(e2.target.value);
  };
  return /* @__PURE__ */ jsxs132(Fragment30, { children: [
    /* @__PURE__ */ jsx149("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs132("div", { className: "relative", children: [
      /* @__PURE__ */ jsx149(
        Input19,
        {
          placeholder: "Search users...",
          value: filters.search || "",
          onChange: handleInputChange,
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx149(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx149(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs132(Select12, { value: filters.role || "all", onValueChange: (value) => handleFilterChange("role", value === "all" ? "" : value), children: [
      /* @__PURE__ */ jsx149(SelectTrigger12, { className: "w-[160px] h-10", children: /* @__PURE__ */ jsx149(SelectValue12, { placeholder: "Role" }) }),
      /* @__PURE__ */ jsxs132(SelectContent12, { children: [
        /* @__PURE__ */ jsx149(SelectItem12, { value: "all", children: "All Roles" }),
        /* @__PURE__ */ jsx149(SelectItem12, { value: "ADMIN", children: "Admin" }),
        /* @__PURE__ */ jsx149(SelectItem12, { value: "MERCHANT", children: "Merchant" }),
        /* @__PURE__ */ jsx149(SelectItem12, { value: "OUTLET_ADMIN", children: "Outlet Admin" }),
        /* @__PURE__ */ jsx149(SelectItem12, { value: "OUTLET_STAFF", children: "Outlet Staff" })
      ] })
    ] }),
    (filters.search || filters.role) && onClearFilters && /* @__PURE__ */ jsx149(
      Button36,
      {
        variant: "outline",
        size: "sm",
        onClick: onClearFilters,
        className: "h-10",
        children: "Clear"
      }
    )
  ] });
}

// src/components/features/Users/components/UserCard.tsx
import { Card as Card39, Badge as Badge21, Button as Button37 } from "@rentalshop/ui";
import { Mail as Mail6, Phone as Phone3, Calendar as Calendar17, Building as Building5, User as UserIcon2 } from "lucide-react";
import { jsx as jsx150, jsxs as jsxs133 } from "react/jsx-runtime";
function UserCard({ user, onUserAction }) {
  const getRoleBadgeVariant = (role) => {
    switch (role) {
      case "ADMIN":
        return "destructive";
      case "MERCHANT":
        return "default";
      case "OUTLET_STAFF":
        return "secondary";
      case "CLIENT":
        return "outline";
      default:
        return "outline";
    }
  };
  const getRoleDisplayName = (role) => {
    switch (role) {
      case "ADMIN":
        return "Admin";
      case "MERCHANT":
        return "Merchant";
      case "OUTLET_STAFF":
        return "Staff";
      case "CLIENT":
        return "Client";
      default:
        return role;
    }
  };
  const formatDate11 = (dateString) => {
    return new Date(dateString).toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  return /* @__PURE__ */ jsx150(Card39, { className: "overflow-hidden hover:shadow-lg transition-shadow", children: /* @__PURE__ */ jsxs133("div", { className: "p-6", children: [
    /* @__PURE__ */ jsxs133("div", { className: "flex items-start justify-between mb-4", children: [
      /* @__PURE__ */ jsxs133("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsx150("div", { className: "w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx150(UserIcon2, { className: "w-6 h-6 text-blue-600" }) }),
        /* @__PURE__ */ jsxs133("div", { children: [
          /* @__PURE__ */ jsx150("h3", { className: "font-semibold text-lg text-gray-900", children: user.name }),
          /* @__PURE__ */ jsx150(Badge21, { variant: getRoleBadgeVariant(user.role), children: getRoleDisplayName(user.role) })
        ] })
      ] }),
      /* @__PURE__ */ jsx150(Badge21, { variant: user.isActive ? "default" : "secondary", children: user.isActive ? "Active" : "Inactive" })
    ] }),
    /* @__PURE__ */ jsxs133("div", { className: "space-y-2 mb-4", children: [
      /* @__PURE__ */ jsxs133("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [
        /* @__PURE__ */ jsx150(Mail6, { className: "w-4 h-4" }),
        /* @__PURE__ */ jsx150("span", { children: user.email })
      ] }),
      user.phone && /* @__PURE__ */ jsxs133("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [
        /* @__PURE__ */ jsx150(Phone3, { className: "w-4 h-4" }),
        /* @__PURE__ */ jsx150("span", { children: user.phone })
      ] }),
      /* @__PURE__ */ jsxs133("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [
        /* @__PURE__ */ jsx150(Calendar17, { className: "w-4 h-4" }),
        /* @__PURE__ */ jsxs133("span", { children: [
          "Joined ",
          formatDate11(user.createdAt.toString())
        ] })
      ] })
    ] }),
    user.merchant && /* @__PURE__ */ jsxs133("div", { className: "flex items-center gap-2 text-sm text-gray-600 mb-4", children: [
      /* @__PURE__ */ jsx150(Building5, { className: "w-4 h-4" }),
      /* @__PURE__ */ jsx150("span", { children: user.merchant.name })
    ] }),
    user.outlet && /* @__PURE__ */ jsxs133("div", { className: "flex items-center gap-2 text-sm text-gray-600 mb-4", children: [
      /* @__PURE__ */ jsx150(Building5, { className: "w-4 h-4" }),
      /* @__PURE__ */ jsx150("span", { children: user.outlet.name }),
      user.outlet.merchant && /* @__PURE__ */ jsxs133("span", { className: "text-gray-500", children: [
        " - ",
        user.outlet.merchant.name
      ] })
    ] }),
    /* @__PURE__ */ jsx150("div", { className: "flex gap-2 pt-4 border-t", children: /* @__PURE__ */ jsx150(
      Button37,
      {
        variant: "outline",
        size: "sm",
        onClick: () => onUserAction("view", user.id),
        className: "flex-1",
        children: "View"
      }
    ) })
  ] }) });
}

// src/components/features/Users/components/UserGrid.tsx
import { Card as Card40, CardContent as CardContent39 } from "@rentalshop/ui";
import { jsx as jsx151, jsxs as jsxs134 } from "react/jsx-runtime";
function UserGrid({ users, onUserAction }) {
  if (users.length === 0) {
    return /* @__PURE__ */ jsx151(Card40, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx151(CardContent39, { className: "text-center py-12", children: /* @__PURE__ */ jsxs134("div", { className: "text-gray-500 dark:text-gray-400", children: [
      /* @__PURE__ */ jsx151("div", { className: "text-4xl mb-4", children: "\u{1F465}" }),
      /* @__PURE__ */ jsx151("h3", { className: "text-lg font-medium mb-2", children: "No users found" }),
      /* @__PURE__ */ jsx151("p", { className: "text-sm", children: "Try adjusting your filters or add some users to get started." })
    ] }) }) });
  }
  return /* @__PURE__ */ jsx151("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6", children: users.map((user) => /* @__PURE__ */ jsx151(
    UserCard,
    {
      user,
      onUserAction
    },
    user.id
  )) });
}

// src/components/features/Users/components/UserTable.tsx
import React86 from "react";
import { Eye as Eye10, Edit as Edit9, Trash2 as Trash29, MoreVertical as MoreVertical5, UserCheck as UserCheck2, UserX } from "lucide-react";
import { useUsersTranslations } from "@rentalshop/hooks";
import { jsx as jsx152, jsxs as jsxs135 } from "react/jsx-runtime";
function UserTable({
  users,
  onUserAction,
  sortBy = "createdAt",
  sortOrder = "desc",
  onSort
}) {
  const t2 = useUsersTranslations();
  const [openDropdownId, setOpenDropdownId] = React86.useState(null);
  if (users.length === 0) {
    return /* @__PURE__ */ jsx152(Card, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx152(CardContent, { className: "text-center py-12", children: /* @__PURE__ */ jsxs135("div", { className: "text-text-tertiary", children: [
      /* @__PURE__ */ jsx152("div", { className: "text-4xl mb-4", children: "\u{1F465}" }),
      /* @__PURE__ */ jsx152("h3", { className: "text-lg font-medium mb-2", children: t2("messages.noUsers") }),
      /* @__PURE__ */ jsx152("p", { className: "text-sm", children: t2("messages.loadingUsers") })
    ] }) }) });
  }
  const formatDate11 = (dateString) => {
    if (!dateString)
      return t2("messages.na");
    const date2 = typeof dateString === "string" ? new Date(dateString) : dateString;
    return date2.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const getRoleBadge = (role) => {
    const variants = {
      ADMIN: "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",
      MERCHANT: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",
      OUTLET_ADMIN: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",
      OUTLET_STAFF: "bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"
    };
    const roleKey = role;
    return /* @__PURE__ */ jsx152(Badge, { className: variants[role] || variants.OUTLET_STAFF, children: t2(`roles.${roleKey}`) || role.replace("_", " ") });
  };
  const getStatusBadge = (isActive) => {
    return isActive ? /* @__PURE__ */ jsx152(Badge, { className: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200", children: t2("fields.active") }) : /* @__PURE__ */ jsx152(Badge, { className: "bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200", children: t2("fields.inactive") });
  };
  const handleSort = (column) => {
    if (onSort) {
      onSort(column);
    }
  };
  return /* @__PURE__ */ jsx152(Card, { className: "shadow-sm border-border flex flex-col h-full", children: /* @__PURE__ */ jsx152(CardContent, { className: "p-0 flex-1 overflow-hidden", children: /* @__PURE__ */ jsx152("div", { className: "flex-1 overflow-auto h-full", children: /* @__PURE__ */ jsxs135("table", { className: "w-full", children: [
    /* @__PURE__ */ jsx152("thead", { className: "bg-bg-secondary border-b border-border sticky top-0 z-10", children: /* @__PURE__ */ jsxs135("tr", { children: [
      /* @__PURE__ */ jsx152("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: t2("fields.name") }),
      /* @__PURE__ */ jsx152("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: t2("fields.role") }),
      /* @__PURE__ */ jsxs135("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: [
        t2("fields.outlet"),
        " / ",
        t2("fields.merchant")
      ] }),
      /* @__PURE__ */ jsx152("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: t2("fields.status") }),
      /* @__PURE__ */ jsx152("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: t2("fields.createdAt") }),
      /* @__PURE__ */ jsx152("th", { className: "px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider", children: t2("fields.actions") })
    ] }) }),
    /* @__PURE__ */ jsx152("tbody", { className: "bg-bg-card divide-y divide-border", children: users.map((user) => /* @__PURE__ */ jsxs135("tr", { className: "hover:bg-bg-secondary transition-colors", children: [
      /* @__PURE__ */ jsx152("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs135("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsx152("div", { className: "flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-action-primary to-brand-primary flex items-center justify-center", children: /* @__PURE__ */ jsxs135("span", { className: "text-white font-semibold text-sm", children: [
          user.firstName?.substring(0, 1),
          user.lastName?.substring(0, 1)
        ] }) }),
        /* @__PURE__ */ jsxs135("div", { children: [
          /* @__PURE__ */ jsxs135("div", { className: "text-sm font-medium text-text-primary", children: [
            user.firstName,
            " ",
            user.lastName
          ] }),
          /* @__PURE__ */ jsx152("div", { className: "text-sm text-text-tertiary", children: user.email })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx152("td", { className: "px-6 py-4", children: getRoleBadge(user.role) }),
      /* @__PURE__ */ jsx152("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx152("div", { className: "text-sm text-text-primary", children: user.outlet?.name || user.merchant?.name || t2("messages.na") }) }),
      /* @__PURE__ */ jsx152("td", { className: "px-6 py-4", children: getStatusBadge(user.isActive) }),
      /* @__PURE__ */ jsx152("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx152("div", { className: "text-sm text-text-primary", children: formatDate11(user.createdAt) }) }),
      /* @__PURE__ */ jsx152("td", { className: "px-6 py-4 text-right", children: /* @__PURE__ */ jsxs135(DropdownMenu, { children: [
        /* @__PURE__ */ jsx152(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsx152(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => setOpenDropdownId(openDropdownId === user.id ? null : user.id),
            children: /* @__PURE__ */ jsx152(MoreVertical5, { className: "h-4 w-4" })
          }
        ) }),
        /* @__PURE__ */ jsxs135(
          DropdownMenuContent,
          {
            align: "end",
            open: openDropdownId === user.id,
            onOpenChange: (open) => setOpenDropdownId(open ? user.id : null),
            children: [
              /* @__PURE__ */ jsxs135(DropdownMenuItem, { onClick: () => {
                onUserAction("view", user.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx152(Eye10, { className: "h-4 w-4 mr-2" }),
                t2("actions.viewDetails")
              ] }),
              /* @__PURE__ */ jsxs135(DropdownMenuItem, { onClick: () => {
                onUserAction("edit", user.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx152(Edit9, { className: "h-4 w-4 mr-2" }),
                t2("actions.editUser")
              ] }),
              /* @__PURE__ */ jsxs135(DropdownMenuItem, { onClick: () => {
                onUserAction(user.isActive ? "deactivate" : "activate", user.id);
                setOpenDropdownId(null);
              }, children: [
                user.isActive ? /* @__PURE__ */ jsx152(UserX, { className: "h-4 w-4 mr-2" }) : /* @__PURE__ */ jsx152(UserCheck2, { className: "h-4 w-4 mr-2" }),
                user.isActive ? t2("actions.deactivate") : t2("actions.activate")
              ] }),
              /* @__PURE__ */ jsx152(DropdownMenuSeparator, {}),
              /* @__PURE__ */ jsxs135(
                DropdownMenuItem,
                {
                  onClick: () => {
                    onUserAction("delete", user.id);
                    setOpenDropdownId(null);
                  },
                  className: "text-action-danger focus:text-action-danger",
                  children: [
                    /* @__PURE__ */ jsx152(Trash29, { className: "h-4 w-4 mr-2" }),
                    t2("actions.delete")
                  ]
                }
              )
            ]
          }
        )
      ] }) })
    ] }, user.id)) })
  ] }) }) }) });
}

// src/components/features/Users/components/UsersLoading.tsx
import { jsx as jsx153, jsxs as jsxs136 } from "react/jsx-runtime";
function UsersLoading() {
  return /* @__PURE__ */ jsxs136("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx153(StatsSkeleton, {}),
    /* @__PURE__ */ jsx153(SearchSkeleton, {}),
    /* @__PURE__ */ jsx153(TableSkeleton, { rows: 8, columns: 6 }),
    /* @__PURE__ */ jsx153(PaginationSkeleton, {})
  ] });
}

// src/components/features/Users/components/UserActions.tsx
import { useState as useState63, useEffect as useEffect36 } from "react";
import { useRouter as useRouter6 } from "next/navigation";
import { ConfirmationDialog as ConfirmationDialog3 } from "@rentalshop/ui";

// src/components/features/Users/components/UserDetailDialog.tsx
import { useState as useState62 } from "react";
import {
  Dialog as Dialog13,
  DialogContent as DialogContent13,
  DialogHeader as DialogHeader13,
  DialogTitle as DialogTitle13,
  DialogDescription as DialogDescription10,
  DialogFooter as DialogFooter8
} from "@rentalshop/ui";
import { Button as Button39 } from "@rentalshop/ui";
import { ConfirmationDialog as ConfirmationDialog2 } from "@rentalshop/ui";

// src/components/features/Users/components/ChangePasswordDialog.tsx
import { useState as useState61 } from "react";

// src/components/features/Users/lib/UserApiClient.ts
import { getAuthToken as getAuthToken2 } from "@rentalshop/utils";
var UserApiClient = class {
  constructor(baseUrl = "/api") {
    this.baseUrl = baseUrl;
  }
  async request(endpoint, options = {}) {
    const url = `${this.baseUrl}${endpoint}`;
    const token = getAuthToken2() || "";
    const config = {
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${token}`,
        ...options.headers
      },
      ...options
    };
    try {
      const response = await fetch(url, config);
      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);
      }
      return await response.json();
    } catch (error2) {
      console.error(`API request failed for ${endpoint}:`, error2);
      throw error2;
    }
  }
  async getUsers(filters = {}, options = {}) {
    const params = new URLSearchParams();
    if (filters.search)
      params.append("search", filters.search);
    if (filters.role)
      params.append("role", filters.role);
    if (filters.isActive !== void 0)
      params.append("isActive", filters.isActive.toString());
    if (options.page)
      params.append("page", options.page.toString());
    if (options.limit)
      params.append("limit", options.limit.toString());
    if (options.sortBy)
      params.append("sortBy", options.sortBy);
    if (options.sortOrder)
      params.append("sortOrder", options.sortOrder);
    const queryString = params.toString();
    const endpoint = `/users${queryString ? `?${queryString}` : ""}`;
    return this.request(endpoint);
  }
  async getUserById(userId) {
    return this.request(`/users/${userId}`);
  }
  async createUser(userData) {
    return this.request("/users", {
      method: "POST",
      body: JSON.stringify(userData)
    });
  }
  async updateUser(userId, userData) {
    return this.request(`/users/${userId}`, {
      method: "PUT",
      body: JSON.stringify(userData)
    });
  }
  async deactivateUser(userId) {
    return this.request(`/users/${userId}/deactivate`, {
      method: "PATCH",
      body: JSON.stringify({ isActive: false })
    });
  }
  async activateUser(userId) {
    return this.request(`/users/${userId}/activate`, {
      method: "PATCH",
      body: JSON.stringify({ isActive: true })
    });
  }
  async changePassword(userId, newPassword) {
    return this.request(`/users/${userId}/change-password`, {
      method: "PATCH",
      body: JSON.stringify({ newPassword })
    });
  }
  async deleteUser(userId) {
    return this.request(`/users/${userId}`, {
      method: "DELETE"
    });
  }
};
var userApiClient = new UserApiClient();

// src/components/features/Users/components/ChangePasswordDialog.tsx
import { Eye as Eye11, EyeOff as EyeOff3 } from "lucide-react";
import { jsx as jsx154, jsxs as jsxs137 } from "react/jsx-runtime";
var ChangePasswordDialog = ({
  open,
  onOpenChange,
  userId,
  userName,
  onSuccess,
  onError
}) => {
  const [formData, setFormData] = useState61({
    newPassword: "",
    confirmPassword: ""
  });
  const [errors, setErrors] = useState61({});
  const [isLoading, setIsLoading] = useState61(false);
  const [showPasswords, setShowPasswords] = useState61({
    new: false,
    confirm: false
  });
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }));
    }
  };
  const togglePasswordVisibility = (field) => {
    setShowPasswords((prev) => ({ ...prev, [field]: !prev[field] }));
  };
  const validateForm = () => {
    const newErrors = {};
    if (!formData.newPassword.trim()) {
      newErrors.newPassword = "New password is required";
    } else if (formData.newPassword.length < 8) {
      newErrors.newPassword = "New password must be at least 8 characters long";
    }
    if (!formData.confirmPassword.trim()) {
      newErrors.confirmPassword = "Please confirm your new password";
    } else if (formData.newPassword !== formData.confirmPassword) {
      newErrors.confirmPassword = "Passwords do not match";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    setIsLoading(true);
    try {
      const response = await userApiClient.changePassword(
        userId,
        formData.newPassword
      );
      if (response.success) {
        onSuccess?.();
        onOpenChange(false);
        setFormData({
          newPassword: "",
          confirmPassword: ""
        });
        setErrors({});
      } else {
        onError?.(response.error || "Failed to change password");
      }
    } catch (error2) {
      const errorMessage = error2 instanceof Error ? error2.message : "An error occurred";
      onError?.(errorMessage);
    } finally {
      setIsLoading(false);
    }
  };
  const handleCancel = () => {
    onOpenChange(false);
    setFormData({
      newPassword: "",
      confirmPassword: ""
    });
    setErrors({});
  };
  return /* @__PURE__ */ jsx154(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs137(DialogContent, { className: "max-w-md", children: [
    /* @__PURE__ */ jsxs137(DialogHeader, { children: [
      /* @__PURE__ */ jsx154(DialogTitle, { className: "text-xl font-semibold", children: "Change Password" }),
      /* @__PURE__ */ jsxs137(DialogDescription, { className: "text-sm text-gray-600 mt-1", children: [
        "Change password for user: ",
        /* @__PURE__ */ jsx154("span", { className: "font-medium", children: userName })
      ] })
    ] }),
    /* @__PURE__ */ jsxs137("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs137("div", { className: "mt-6 space-y-4", children: [
        /* @__PURE__ */ jsxs137("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx154(Label2, { htmlFor: "newPassword", children: "New Password *" }),
          /* @__PURE__ */ jsxs137("div", { className: "relative", children: [
            /* @__PURE__ */ jsx154(
              Input,
              {
                id: "newPassword",
                type: showPasswords.new ? "text" : "password",
                value: formData.newPassword,
                onChange: (e2) => handleInputChange("newPassword", e2.target.value),
                placeholder: "Enter new password",
                className: errors.newPassword ? "border-red-500 pr-10" : "pr-10"
              }
            ),
            /* @__PURE__ */ jsx154(
              Button2,
              {
                variant: "ghost",
                size: "icon",
                type: "button",
                onClick: () => togglePasswordVisibility("new"),
                className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 h-6 w-6 p-0",
                children: showPasswords.new ? /* @__PURE__ */ jsx154(EyeOff3, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx154(Eye11, { className: "h-4 w-4" })
              }
            )
          ] }),
          errors.newPassword && /* @__PURE__ */ jsx154("p", { className: "text-sm text-red-600", children: errors.newPassword }),
          /* @__PURE__ */ jsx154("p", { className: "text-xs text-gray-500", children: "Password must be at least 8 characters long" })
        ] }),
        /* @__PURE__ */ jsxs137("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx154(Label2, { htmlFor: "confirmPassword", children: "Confirm New Password *" }),
          /* @__PURE__ */ jsxs137("div", { className: "relative", children: [
            /* @__PURE__ */ jsx154(
              Input,
              {
                id: "confirmPassword",
                type: showPasswords.confirm ? "text" : "password",
                value: formData.confirmPassword,
                onChange: (e2) => handleInputChange("confirmPassword", e2.target.value),
                placeholder: "Confirm new password",
                className: errors.confirmPassword ? "border-red-500 pr-10" : "pr-10"
              }
            ),
            /* @__PURE__ */ jsx154(
              Button2,
              {
                variant: "ghost",
                size: "icon",
                type: "button",
                onClick: () => togglePasswordVisibility("confirm"),
                className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 h-6 w-6 p-0",
                children: showPasswords.confirm ? /* @__PURE__ */ jsx154(EyeOff3, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx154(Eye11, { className: "h-4 w-4" })
              }
            )
          ] }),
          errors.confirmPassword && /* @__PURE__ */ jsx154("p", { className: "text-sm text-red-600", children: errors.confirmPassword })
        ] })
      ] }),
      /* @__PURE__ */ jsxs137(DialogFooter, { className: "flex justify-end space-x-2 mt-6", children: [
        /* @__PURE__ */ jsx154(
          Button2,
          {
            type: "button",
            variant: "outline",
            onClick: handleCancel,
            disabled: isLoading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx154(
          Button2,
          {
            type: "submit",
            disabled: isLoading,
            className: "bg-blue-600 hover:bg-blue-700",
            children: isLoading ? "Changing..." : "Change Password"
          }
        )
      ] })
    ] })
  ] }) });
};

// src/components/features/Users/components/UserDisplayInfo.tsx
import { Card as Card41, CardContent as CardContent40, Button as Button38 } from "@rentalshop/ui";
import { useUsersTranslations as useUsersTranslations2 } from "@rentalshop/hooks";
import { Fragment as Fragment31, jsx as jsx155, jsxs as jsxs138 } from "react/jsx-runtime";
var UserDisplayInfo = ({
  user,
  showActions = false,
  onEdit,
  onView,
  onDelete,
  onActivate,
  onDeactivate,
  onChangePassword,
  isLoading = false
}) => {
  const t2 = useUsersTranslations2();
  const getRoleBadgeStyle = (role) => {
    switch (role) {
      case "ADMIN":
        return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
      case "MERCHANT":
        return "bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800";
      case "OUTLET_ADMIN":
        return "bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800";
      case "OUTLET_STAFF":
        return "bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800";
      case "CLIENT":
        return "bg-green-100 text-green-800 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800";
      default:
        return "bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800";
    }
  };
  const getStatusBadgeStyle = (isActive) => {
    if (isActive) {
      return "bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800";
    } else {
      return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
    }
  };
  const getRoleDisplayName = (role) => {
    const roleKey = role;
    return t2(`roles.${roleKey}`) || role;
  };
  const getStatusDisplayName = (isActive) => {
    return isActive ? t2("fields.active") : t2("fields.inactive");
  };
  return /* @__PURE__ */ jsx155(Card41, { children: /* @__PURE__ */ jsxs138(CardContent40, { className: "p-6 space-y-6", children: [
    /* @__PURE__ */ jsxs138("div", { children: [
      /* @__PURE__ */ jsx155("h3", { className: "text-sm font-medium text-gray-900 mb-4", children: t2("userInformation") }),
      /* @__PURE__ */ jsxs138("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs138("div", { children: [
          /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.name") }),
          /* @__PURE__ */ jsx155("p", { className: "text-gray-900 font-medium", children: `${user.firstName || ""} ${user.lastName || ""}`.trim() || t2("messages.na") })
        ] }),
        /* @__PURE__ */ jsxs138("div", { children: [
          /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.email") }),
          /* @__PURE__ */ jsx155("p", { className: "text-gray-900", children: user.email })
        ] }),
        /* @__PURE__ */ jsxs138("div", { children: [
          /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.phone") }),
          /* @__PURE__ */ jsx155("p", { className: "text-gray-900", children: user.phone || t2("messages.na") })
        ] }),
        /* @__PURE__ */ jsxs138("div", { children: [
          /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.role") }),
          /* @__PURE__ */ jsx155("div", { className: `inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${getRoleBadgeStyle(user.role)}`, children: getRoleDisplayName(user.role) })
        ] }),
        /* @__PURE__ */ jsxs138("div", { children: [
          /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.status") }),
          /* @__PURE__ */ jsx155("div", { className: `inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${getStatusBadgeStyle(user.isActive)}`, children: getStatusDisplayName(user.isActive) })
        ] }),
        /* @__PURE__ */ jsxs138("div", { children: [
          /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.id") }),
          /* @__PURE__ */ jsx155("p", { className: "text-gray-500 text-sm font-mono", children: user.id })
        ] })
      ] })
    ] }),
    user.outlet && /* @__PURE__ */ jsxs138("div", { className: "border-t pt-6", children: [
      /* @__PURE__ */ jsx155("h3", { className: "text-sm font-medium text-gray-900 mb-4", children: t2("outletInformation") }),
      /* @__PURE__ */ jsx155("div", { className: "border rounded-lg p-4 bg-gray-50", children: /* @__PURE__ */ jsxs138("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs138("div", { children: [
          /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.outletName") }),
          /* @__PURE__ */ jsx155("p", { className: "text-gray-900 text-base", children: user.outlet.name })
        ] }),
        /* @__PURE__ */ jsxs138("div", { children: [
          /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.outletId") }),
          /* @__PURE__ */ jsx155("p", { className: "text-gray-500 text-sm font-mono", children: user.outlet.id })
        ] }),
        user.outlet.merchant && /* @__PURE__ */ jsxs138(Fragment31, { children: [
          /* @__PURE__ */ jsxs138("div", { children: [
            /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.merchantName") }),
            /* @__PURE__ */ jsx155("p", { className: "text-gray-900 text-base", children: user.outlet.merchant.name })
          ] }),
          /* @__PURE__ */ jsxs138("div", { children: [
            /* @__PURE__ */ jsx155("label", { className: "block text-sm font-medium text-gray-700 mb-1", children: t2("fields.merchantId") }),
            /* @__PURE__ */ jsx155("p", { className: "text-gray-500 text-sm font-mono", children: user.outlet.merchant.id })
          ] })
        ] })
      ] }) })
    ] }),
    showActions && /* @__PURE__ */ jsxs138("div", { className: "border-t pt-6", children: [
      /* @__PURE__ */ jsx155("h3", { className: "text-sm font-medium text-gray-900 mb-4", children: t2("accountActions") }),
      /* @__PURE__ */ jsxs138("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        onChangePassword && /* @__PURE__ */ jsxs138("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsx155("h4", { className: "font-medium text-gray-900", children: t2("passwordManagement") }),
          /* @__PURE__ */ jsxs138(
            Button38,
            {
              variant: "outline",
              onClick: onChangePassword,
              className: "w-full flex items-center justify-start px-3 py-2 text-sm h-auto",
              disabled: isLoading,
              children: [
                "\u{1F511} ",
                t2("actions.changePassword")
              ]
            }
          ),
          /* @__PURE__ */ jsx155("p", { className: "text-xs text-gray-500", children: t2("messages.allowChangePassword") })
        ] }),
        /* @__PURE__ */ jsxs138("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsx155("h4", { className: "font-medium text-gray-900", children: t2("accountStatus") }),
          user.isActive ? onDeactivate && /* @__PURE__ */ jsx155(
            Button38,
            {
              variant: "outline",
              onClick: onDeactivate,
              className: "w-full flex items-center justify-start px-3 py-2 text-sm text-orange-600 border-orange-200 hover:bg-orange-50 h-auto",
              disabled: isLoading || user.role === "ADMIN",
              children: isLoading ? `\u23F3 ${t2("actions.deactivating")}` : `\u274C ${t2("actions.deactivateAccount")}`
            }
          ) : onActivate && /* @__PURE__ */ jsx155(
            Button38,
            {
              variant: "outline",
              onClick: onActivate,
              className: "w-full flex items-center justify-start px-3 py-2 text-sm text-green-600 border-green-200 hover:bg-green-50 h-auto",
              disabled: isLoading,
              children: isLoading ? `\u23F3 ${t2("actions.activating")}` : `\u2705 ${t2("actions.activateAccount")}`
            }
          ),
          /* @__PURE__ */ jsx155("p", { className: "text-xs text-gray-500", children: user.isActive ? t2("messages.deactivateToPrevent") : t2("messages.activateToRestore") }),
          user.role === "ADMIN" && /* @__PURE__ */ jsxs138("div", { className: "flex items-center gap-2 text-xs text-amber-600 bg-amber-50 p-2 rounded", children: [
            "\u26A0\uFE0F ",
            t2("messages.cannotDeactivateAdminShort")
          ] })
        ] }),
        onDelete && /* @__PURE__ */ jsxs138("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsx155("h4", { className: "font-medium text-gray-900", children: t2("dangerZone") }),
          /* @__PURE__ */ jsx155(
            Button38,
            {
              variant: "outline",
              onClick: onDelete,
              className: "w-full flex items-center justify-start px-3 py-2 text-sm text-red-600 border-red-200 hover:bg-red-50 h-auto",
              disabled: isLoading || user.role === "ADMIN",
              children: isLoading ? `\u23F3 ${t2("actions.deleting")}` : `\u{1F5D1}\uFE0F ${t2("actions.deleteAccount")}`
            }
          ),
          /* @__PURE__ */ jsx155("p", { className: "text-xs text-gray-500", children: t2("messages.permanentlyDeleteShort") }),
          user.role === "ADMIN" && /* @__PURE__ */ jsxs138("div", { className: "flex items-center gap-2 text-xs text-amber-600 bg-amber-50 p-2 rounded", children: [
            "\u26A0\uFE0F ",
            t2("messages.cannotDeleteAdmin")
          ] })
        ] })
      ] })
    ] })
  ] }) });
};

// src/components/features/Users/components/UserDetailDialog.tsx
import { usersApi } from "@rentalshop/utils";
import { useUsersTranslations as useUsersTranslations3, useCommonTranslations as useCommonTranslations15 } from "@rentalshop/hooks";
import { Fragment as Fragment32, jsx as jsx156, jsxs as jsxs139 } from "react/jsx-runtime";
var UserDetailDialog = ({
  open,
  onOpenChange,
  user,
  onUserUpdated,
  onError
}) => {
  const t2 = useUsersTranslations3();
  const tc = useCommonTranslations15();
  const [isChangePasswordOpen, setIsChangePasswordOpen] = useState62(false);
  const [isDeactivateConfirmOpen, setIsDeactivateConfirmOpen] = useState62(false);
  const [isActivateConfirmOpen, setIsActivateConfirmOpen] = useState62(false);
  const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState62(false);
  const [isLoading, setIsLoading] = useState62(false);
  if (!user)
    return null;
  const handleDeactivateUser = async () => {
    setIsLoading(true);
    try {
      const response = await usersApi.updateUserStatus(user.id, "inactive");
      if (response.success) {
        const updatedUser = { ...user, isActive: false };
        onUserUpdated?.(updatedUser);
        onOpenChange(false);
      } else {
        onError?.(response.error || "Failed to deactivate user");
      }
    } catch (error2) {
      const errorMessage = error2 instanceof Error ? error2.message : "An error occurred";
      onError?.(errorMessage);
    } finally {
      setIsLoading(false);
    }
  };
  const handleActivateUser = async () => {
    setIsLoading(true);
    try {
      const response = await usersApi.updateUserStatus(user.id, "active");
      if (response.success) {
        const updatedUser = { ...user, isActive: true };
        onUserUpdated?.(updatedUser);
        onOpenChange(false);
      } else {
        onError?.(response.error || "Failed to activate user");
      }
    } catch (error2) {
      const errorMessage = error2 instanceof Error ? error2.message : "An error occurred";
      onError?.(errorMessage);
    } finally {
      setIsLoading(false);
    }
  };
  const handlePasswordChangeSuccess = () => {
    console.log("Password changed successfully");
  };
  const handlePasswordChangeError = (error2) => {
    onError?.(error2);
  };
  const handleDeleteUser = async () => {
    setIsLoading(true);
    try {
      const response = await usersApi.deleteUserByPublicId(user.id);
      if (response.success) {
        onOpenChange(false);
        onUserUpdated?.(user);
      } else {
        onError?.(response.error || "Failed to delete user");
      }
    } catch (error2) {
      const errorMessage = error2 instanceof Error ? error2.message : "An error occurred";
      onError?.(errorMessage);
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs139(Fragment32, { children: [
    /* @__PURE__ */ jsx156(Dialog13, { open, onOpenChange, children: /* @__PURE__ */ jsxs139(DialogContent13, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
      /* @__PURE__ */ jsx156(DialogHeader13, { children: /* @__PURE__ */ jsxs139("div", { children: [
        /* @__PURE__ */ jsx156(DialogTitle13, { className: "text-xl font-semibold", children: t2("userDetails") }),
        /* @__PURE__ */ jsx156(DialogDescription10, { className: "text-sm text-gray-600 mt-1", children: t2("viewUserInfo") })
      ] }) }),
      /* @__PURE__ */ jsx156("div", { className: "mt-6", children: /* @__PURE__ */ jsx156(
        UserDisplayInfo,
        {
          user,
          showActions: true,
          onChangePassword: () => setIsChangePasswordOpen(true),
          onActivate: () => setIsActivateConfirmOpen(true),
          onDeactivate: () => setIsDeactivateConfirmOpen(true),
          onDelete: () => setIsDeleteConfirmOpen(true),
          isLoading
        }
      ) }),
      /* @__PURE__ */ jsx156(DialogFooter8, { className: "flex justify-end space-x-2", children: /* @__PURE__ */ jsx156(
        Button39,
        {
          variant: "outline",
          onClick: () => onOpenChange(false),
          children: tc("buttons.close")
        }
      ) })
    ] }) }),
    /* @__PURE__ */ jsx156(
      ChangePasswordDialog,
      {
        open: isChangePasswordOpen,
        onOpenChange: setIsChangePasswordOpen,
        userId: user.id,
        userName: `${user.firstName || ""} ${user.lastName || ""}`.trim(),
        onSuccess: handlePasswordChangeSuccess,
        onError: handlePasswordChangeError
      }
    ),
    /* @__PURE__ */ jsx156(
      ConfirmationDialog2,
      {
        open: isDeactivateConfirmOpen,
        onOpenChange: setIsDeactivateConfirmOpen,
        type: "warning",
        title: t2("messages.confirmDeactivateAccount"),
        description: `${t2("messages.confirmDeactivate")} ${`${user.firstName || ""} ${user.lastName || ""}`.trim()}? ${t2("messages.confirmDeactivateDetails")}`,
        confirmText: t2("actions.deactivateAccount"),
        cancelText: tc("buttons.cancel"),
        onConfirm: handleDeactivateUser
      }
    ),
    /* @__PURE__ */ jsx156(
      ConfirmationDialog2,
      {
        open: isActivateConfirmOpen,
        onOpenChange: setIsActivateConfirmOpen,
        type: "info",
        title: t2("messages.confirmActivateAccount"),
        description: `${t2("messages.confirmActivate")} ${`${user.firstName || ""} ${user.lastName || ""}`.trim()}? ${t2("messages.confirmActivateDetails")}`,
        confirmText: t2("actions.activateAccount"),
        cancelText: tc("buttons.cancel"),
        onConfirm: handleActivateUser
      }
    ),
    /* @__PURE__ */ jsx156(
      ConfirmationDialog2,
      {
        open: isDeleteConfirmOpen,
        onOpenChange: setIsDeleteConfirmOpen,
        type: "danger",
        title: t2("messages.confirmDeleteAccount"),
        description: `${t2("messages.confirmDelete")} ${`${user.firstName || ""} ${user.lastName || ""}`.trim()}? ${t2("messages.confirmDeleteDetails")}`,
        confirmText: t2("actions.deleteAccount"),
        cancelText: tc("buttons.cancel"),
        onConfirm: handleDeleteUser
      }
    )
  ] });
};

// src/components/features/Users/components/UserActions.tsx
import { Fragment as Fragment33, jsx as jsx157, jsxs as jsxs140 } from "react/jsx-runtime";
function UserActions({
  onAction,
  onUserCreated,
  onUserUpdated,
  onError,
  onSuccess
}) {
  const router = useRouter6();
  const [isViewDialogOpen, setIsViewDialogOpen] = useState63(false);
  const [isDeactivateDialogOpen, setIsDeactivateDialogOpen] = useState63(false);
  const [selectedUser, setSelectedUser] = useState63(null);
  const [userToDeactivate, setUserToDeactivate] = useState63(null);
  useEffect36(() => {
    const handleUserAction = (event) => {
      const { action, userId, user } = event.detail;
      console.log("\u{1F50D} UserActions: Event received:", { action, userId, user });
      if (action === "view" && user) {
        console.log("\u{1F50D} UserActions: Handling view action for user:", user);
        setSelectedUser(user);
        setIsViewDialogOpen(true);
      } else if (action === "edit" && user) {
        console.log("\u{1F50D} UserActions: Handling edit action for user:", user);
        console.log("\u{1F50D} User id:", user.id, "type:", typeof user.id);
        console.log("\u{1F50D} Full user object:", user);
        handleAction("edit", user);
      } else if (action === "deactivate" && user) {
        console.log("\u{1F50D} UserActions: Handling deactivate action for user:", user);
        setUserToDeactivate(user);
        setIsDeactivateDialogOpen(true);
      }
    };
    window.addEventListener("user-action", handleUserAction);
    return () => window.removeEventListener("user-action", handleUserAction);
  }, [router]);
  const handleViewDialogClose = () => {
    setIsViewDialogOpen(false);
    setSelectedUser(null);
  };
  const handleDeactivateDialogClose = () => {
    setIsDeactivateDialogOpen(false);
    setUserToDeactivate(null);
  };
  const handleConfirmDeactivate = () => {
    if (userToDeactivate) {
      onAction("deactivate", userToDeactivate.id);
      handleDeactivateDialogClose();
    }
  };
  const handleSaveUser = async (userData) => {
    console.log("\u{1F50D} UserActions: handleSaveUser called but no longer used");
  };
  const handleCreateUser = async (userData) => {
    console.log("\u{1F50D} UserActions: handleCreateUser called but no longer used");
  };
  const handleAction = (action, user) => {
    console.log("\u{1F50D} UserActions: Action triggered:", { action, userId: user.id });
    switch (action) {
      case "edit":
        console.log("\u{1F50D} UserActions: Edit action - checking id:", {
          id: user.id,
          type: typeof user.id,
          isValid: user.id && typeof user.id === "number"
        });
        if (user.id && typeof user.id === "number") {
          const formattedId = `USER-${user.id.toString().padStart(4, "0")}`;
          console.log("\u{1F50D} UserActions: Navigating to user page:", formattedId);
          console.log("\u{1F50D} Full URL:", `/users/${formattedId}`);
          router.push(`/users/${formattedId}`);
        } else {
          console.error("\u274C UserActions: No valid id available for user:", user);
          console.error("\u274C User data:", user);
          onError?.("Cannot edit user: Missing or invalid id");
        }
        break;
      case "add":
        console.log("\u{1F50D} UserActions: Navigating to add user");
        router.push("/users/add");
        break;
      default:
        console.warn("\u26A0\uFE0F UserActions: Unknown action:", action);
    }
  };
  return /* @__PURE__ */ jsxs140(Fragment33, { children: [
    /* @__PURE__ */ jsx157(
      UserDetailDialog,
      {
        open: isViewDialogOpen,
        onOpenChange: setIsViewDialogOpen,
        user: selectedUser,
        onUserUpdated,
        onError
      }
    ),
    /* @__PURE__ */ jsx157(
      ConfirmationDialog3,
      {
        open: isDeactivateDialogOpen,
        onOpenChange: setIsDeactivateDialogOpen,
        type: "warning",
        title: "Deactivate User",
        description: `Are you sure you want to deactivate ${userToDeactivate?.name}? This action will prevent them from accessing the system.`,
        confirmText: "Deactivate",
        cancelText: "Cancel",
        onConfirm: handleConfirmDeactivate
      }
    )
  ] });
}

// src/components/features/Users/components/AddUserDialog.tsx
import { useState as useState66 } from "react";

// src/components/features/Users/components/UserForm.tsx
import { useState as useState65, useEffect as useEffect37 } from "react";
import { Save as Save5, X as X13 } from "lucide-react";

// src/components/features/Users/components/UserFormFields.tsx
import { useState as useState64 } from "react";
import { Eye as Eye12, EyeOff as EyeOff4, Building2 as Building27, Store as Store3 } from "lucide-react";
import { Fragment as Fragment34, jsx as jsx158, jsxs as jsxs141 } from "react/jsx-runtime";
var FormField = ({
  id,
  label,
  value,
  onChange,
  error: error2,
  disabled = false,
  required = false,
  placeholder,
  type = "text",
  showPasswordToggle = false
}) => {
  const [showPassword, setShowPassword] = useState64(false);
  const inputType = type === "password" && showPassword ? "text" : type;
  return /* @__PURE__ */ jsxs141("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsxs141(Label2, { htmlFor: id, children: [
      label,
      " ",
      required && "*"
    ] }),
    /* @__PURE__ */ jsxs141("div", { className: "relative", children: [
      /* @__PURE__ */ jsx158(
        Input,
        {
          id,
          type: inputType,
          value,
          onChange: (e2) => onChange(e2.target.value),
          placeholder,
          className: error2 ? "border-red-500 focus:border-red-500 focus:ring-red-500" : "",
          disabled,
          required
        }
      ),
      showPasswordToggle && type === "password" && /* @__PURE__ */ jsx158(
        Button2,
        {
          variant: "ghost",
          size: "icon",
          type: "button",
          onClick: () => setShowPassword(!showPassword),
          className: "absolute right-3 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",
          disabled,
          children: showPassword ? /* @__PURE__ */ jsx158(EyeOff4, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx158(Eye12, { className: "h-4 w-4" })
        }
      )
    ] }),
    error2 && /* @__PURE__ */ jsx158("p", { className: "text-sm text-red-600", children: error2 })
  ] });
};
var RoleSelect = ({
  value,
  onChange,
  error: error2,
  disabled = false,
  currentUserRole
}) => {
  console.log("\u{1F50D} RoleSelect: Current value:", value, "Type:", typeof value);
  console.log("\u{1F50D} RoleSelect: Current user role:", currentUserRole);
  console.log("\u{1F50D} RoleSelect: Available roles for current user:", currentUserRole === "ADMIN" ? ["ADMIN", "MERCHANT", "OUTLET_ADMIN", "OUTLET_STAFF"] : ["OUTLET_ADMIN", "OUTLET_STAFF"]);
  return /* @__PURE__ */ jsxs141("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsx158(Label2, { htmlFor: "role", children: "Role *" }),
    /* @__PURE__ */ jsxs141(
      Select,
      {
        value: value || void 0,
        onValueChange: onChange,
        disabled,
        children: [
          /* @__PURE__ */ jsx158(SelectTrigger, { className: error2 ? "border-red-500 focus:border-red-500 focus:ring-red-500" : "", children: /* @__PURE__ */ jsx158(SelectValue, { placeholder: value ? `Current: ${value}` : "Select role" }) }),
          /* @__PURE__ */ jsxs141(SelectContent, { children: [
            currentUserRole === "ADMIN" && /* @__PURE__ */ jsxs141(Fragment34, { children: [
              /* @__PURE__ */ jsx158(SelectItem, { value: "ADMIN", children: "System Admin" }),
              /* @__PURE__ */ jsx158(SelectItem, { value: "MERCHANT", children: "Merchant" })
            ] }),
            /* @__PURE__ */ jsx158(SelectItem, { value: "OUTLET_ADMIN", children: "Outlet Admin" }),
            /* @__PURE__ */ jsx158(SelectItem, { value: "OUTLET_STAFF", children: "Outlet Staff" })
          ] })
        ]
      }
    ),
    error2 && /* @__PURE__ */ jsx158("p", { className: "text-sm text-red-600", children: error2 })
  ] });
};
var MerchantSelect = ({
  value,
  onChange,
  merchants,
  loading,
  error: error2,
  disabled = false,
  canSelect,
  currentUser
}) => {
  return /* @__PURE__ */ jsxs141("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsxs141(Label2, { htmlFor: "merchant", className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx158(Building27, { className: "w-4 h-4" }),
      "Merchant ",
      canSelect ? "*" : "(Read-only)"
    ] }),
    canSelect ? /* @__PURE__ */ jsx158(
      SearchableSelect,
      {
        value: value ? Number(value) : void 0,
        onChange: (val) => onChange(val.toString()),
        options: merchants.map((merchant) => ({
          value: merchant.id.toString(),
          label: merchant.name
        })),
        placeholder: loading ? "Loading merchants..." : "Search and select merchant",
        searchPlaceholder: "Search merchants...",
        emptyText: "No merchants found",
        className: error2 ? "border-red-500 focus:border-red-500 focus:ring-red-500" : ""
      },
      `merchant-${merchants.length}`
    ) : /* @__PURE__ */ jsx158(
      Input,
      {
        value: currentUser?.merchant?.name || "",
        disabled: true,
        className: "bg-gray-50 text-gray-600 cursor-not-allowed",
        placeholder: "Current merchant"
      }
    ),
    error2 && /* @__PURE__ */ jsx158("p", { className: "text-sm text-red-600", children: error2 })
  ] });
};
var OutletSelect = ({
  value,
  onChange,
  outlets,
  loading,
  error: error2,
  disabled = false,
  canSelect,
  canSelectMerchant,
  merchantId,
  currentUser
}) => {
  return /* @__PURE__ */ jsxs141("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsxs141(Label2, { htmlFor: "outlet", className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx158(Store3, { className: "w-4 h-4" }),
      "Outlet ",
      canSelect ? "*" : "(Read-only)"
    ] }),
    canSelect ? /* @__PURE__ */ jsx158(
      SearchableSelect,
      {
        value: value ? Number(value) : void 0,
        onChange: (val) => onChange(val.toString()),
        options: outlets.map((outlet) => ({
          value: outlet.id.toString(),
          label: outlet.name
        })),
        placeholder: loading ? "Loading outlets..." : !merchantId && canSelectMerchant ? "Select merchant first" : "Search and select outlet",
        searchPlaceholder: "Search outlets...",
        emptyText: "No outlets found",
        className: error2 ? "border-red-500 focus:border-red-500 focus:ring-red-500" : ""
      },
      `outlet-${outlets.length}-${merchantId}`
    ) : /* @__PURE__ */ jsx158(
      Input,
      {
        value: currentUser?.outlet?.name || "",
        disabled: true,
        className: "bg-gray-50 text-gray-600 cursor-not-allowed",
        placeholder: "Current outlet"
      }
    ),
    error2 && /* @__PURE__ */ jsx158("p", { className: "text-sm text-red-600", children: error2 })
  ] });
};

// src/components/features/Users/components/UserFormValidation.ts
var validateEmail = (email) => {
  if (!email.trim()) {
    return "Email is required";
  }
  if (!/\S+@\S+\.\S+/.test(email)) {
    return "Email is invalid";
  }
  return null;
};
var validatePhone = (phone) => {
  if (!phone.trim()) {
    return "Phone number is required";
  }
  const digitsOnly = phone.replace(/\D/g, "");
  if (digitsOnly.length < 8) {
    return "Phone number must be at least 8 digits";
  }
  if (digitsOnly.length > 15) {
    return "Phone number must be less than 16 digits";
  }
  const phoneRegex = /^[\+]?[0-9\s\-\(\)]+$/;
  if (!phoneRegex.test(phone.trim())) {
    return "Phone number contains invalid characters";
  }
  return null;
};
var validateName = (name, fieldName = "Name") => {
  if (!name.trim()) {
    return `${fieldName} is required`;
  }
  if (name.trim().length < 2) {
    return `${fieldName} must be at least 2 characters`;
  }
  return null;
};
var validatePassword = (password) => {
  if (!password) {
    return "Password is required";
  }
  if (password.length < 6) {
    return "Password must be at least 6 characters";
  }
  return null;
};
var validateConfirmPassword = (password, confirmPassword) => {
  if (password && password !== confirmPassword) {
    return "Passwords do not match";
  }
  return null;
};
var validateUserCreateInput = (data) => {
  const errors = {};
  console.log("\u{1F50D} UserFormValidation: Validating create input:", data);
  const nameParts = data.name?.trim().split(" ") || [];
  const firstName = nameParts[0] || "";
  const lastName = nameParts.slice(1).join(" ") || "";
  console.log("\u{1F50D} UserFormValidation: Name parts:", { firstName, lastName });
  const firstNameError = validateName(firstName, "First name");
  if (firstNameError)
    errors.firstName = firstNameError;
  const lastNameError = lastName ? validateName(lastName, "Last name") : null;
  if (lastNameError)
    errors.lastName = lastNameError;
  const emailError = validateEmail(data.email || "");
  if (emailError)
    errors.email = emailError;
  const phoneError = validatePhone(data.phone || "");
  if (phoneError)
    errors.phone = phoneError;
  if (!data.role) {
    errors.role = "Role is required";
  }
  if (data.role) {
    if (data.role === "ADMIN") {
    } else if (data.role === "MERCHANT") {
      if (!data.merchantId) {
        errors.merchantId = "Merchant is required for this role";
      }
      if (data.outletId) {
        errors.outletId = "Outlet should not be selected for merchant role";
      }
    } else if (data.role === "OUTLET_ADMIN" || data.role === "OUTLET_STAFF") {
      if (!data.merchantId) {
        errors.merchantId = "Merchant is required for this role";
      }
      if (!data.outletId) {
        errors.outletId = "Outlet is required for this role";
      }
    }
  }
  const passwordError = validatePassword(data.password || "");
  if (passwordError)
    errors.password = passwordError;
  const confirmPasswordError = validateConfirmPassword(data.password || "", data.confirmPassword || "");
  if (confirmPasswordError)
    errors.confirmPassword = confirmPasswordError;
  console.log("\u{1F50D} UserFormValidation: Validation errors:", errors);
  return errors;
};
var validateUserUpdateInput = (data) => {
  const errors = {};
  console.log("\u{1F50D} UserFormValidation: Validating update input:", data);
  const firstNameError = validateName(data.firstName || "", "First name");
  if (firstNameError)
    errors.firstName = firstNameError;
  const lastNameError = validateName(data.lastName || "", "Last name");
  if (lastNameError)
    errors.lastName = lastNameError;
  const emailError = validateEmail(data.email || "");
  if (emailError)
    errors.email = emailError;
  const phoneError = validatePhone(data.phone || "");
  if (phoneError)
    errors.phone = phoneError;
  if (!data.role) {
    errors.role = "Role is required";
  }
  if (data.role) {
    if (data.role === "ADMIN") {
    } else if (data.role === "MERCHANT") {
      if (!data.merchantId) {
        errors.merchantId = "Merchant is required for this role";
      }
      if (data.outletId) {
        errors.outletId = "Outlet should not be selected for merchant role";
      }
    } else if (data.role === "OUTLET_ADMIN" || data.role === "OUTLET_STAFF") {
      if (!data.merchantId) {
        errors.merchantId = "Merchant is required for this role";
      }
      if (!data.outletId) {
        errors.outletId = "Outlet is required for this role";
      }
    }
  }
  console.log("\u{1F50D} UserFormValidation: Update validation errors:", errors);
  return errors;
};

// src/components/features/Users/components/UserForm.tsx
import { merchantsApi, outletsApi as outletsApi2 } from "@rentalshop/utils";
import { useUsersTranslations as useUsersTranslations4, useCommonTranslations as useCommonTranslations16 } from "@rentalshop/hooks";
import { Fragment as Fragment35, jsx as jsx159, jsxs as jsxs142 } from "react/jsx-runtime";
var UserForm = ({
  mode,
  user,
  onSave,
  onCancel,
  isSubmitting: externalIsSubmitting,
  currentUser
}) => {
  const t2 = useUsersTranslations4();
  const tc = useCommonTranslations16();
  const isEditMode = mode === "edit";
  const [formData, setFormData] = useState65(() => {
    console.log("\u{1F50D} UserForm: Initial state setup - isEditMode:", isEditMode, "user:", user);
    if (isEditMode && user) {
      const initialData = {
        firstName: user.firstName || "",
        lastName: user.lastName || "",
        email: user.email || "",
        phone: user.phone || "",
        // ✅ ADD MISSING FIELDS
        role: user.role || "OUTLET_STAFF",
        merchantId: user.merchantId?.toString() || "",
        outletId: user.outletId?.toString() || ""
      };
      console.log("\u{1F50D} UserForm: Initial formData (edit mode):", initialData);
      return initialData;
    } else {
      const initialData = {
        name: "",
        email: "",
        phone: "",
        role: "OUTLET_STAFF",
        // Default to OUTLET_STAFF for safety
        isActive: true,
        password: "",
        confirmPassword: "",
        merchantId: "",
        outletId: ""
      };
      console.log("\u{1F50D} UserForm: Initial formData (create mode):", initialData);
      return initialData;
    }
  });
  const [errors, setErrors] = useState65({});
  const [internalIsSubmitting, setInternalIsSubmitting] = useState65(false);
  const [merchants, setMerchants] = useState65([]);
  const [outlets, setOutlets] = useState65([]);
  const [loadingMerchants, setLoadingMerchants] = useState65(false);
  const [loadingOutlets, setLoadingOutlets] = useState65(false);
  const isSubmitting = externalIsSubmitting !== void 0 ? externalIsSubmitting : internalIsSubmitting;
  const canSelectMerchant = currentUser?.role === "ADMIN";
  const canSelectOutlet = currentUser?.role === "ADMIN" || currentUser?.role === "MERCHANT";
  const showMerchantField = currentUser?.role === "ADMIN" || currentUser?.role === "MERCHANT" || currentUser?.role === "OUTLET_ADMIN" || currentUser?.role === "OUTLET_STAFF";
  const showOutletField = currentUser?.role === "ADMIN" || currentUser?.role === "MERCHANT" || currentUser?.role === "OUTLET_ADMIN" || currentUser?.role === "OUTLET_STAFF";
  useEffect37(() => {
    if (isEditMode && user) {
      console.log("\u{1F50D} UserForm: User object for edit:", user);
      console.log("\u{1F50D} UserForm: User role:", user.role, "Type:", typeof user.role);
      console.log("\u{1F50D} UserForm: User merchantId:", user.merchantId, "Type:", typeof user.merchantId);
      console.log("\u{1F50D} UserForm: User outletId:", user.outletId, "Type:", typeof user.outletId);
      const userRole = user.role;
      const validRoles = ["ADMIN", "MERCHANT", "OUTLET_ADMIN", "OUTLET_STAFF"];
      const role = validRoles.includes(userRole) ? userRole : "OUTLET_STAFF";
      const formData2 = {
        firstName: user.firstName || "",
        lastName: user.lastName || "",
        email: user.email || "",
        phone: user.phone || "",
        role,
        merchantId: user.merchantId?.toString() || "",
        outletId: user.outletId?.toString() || ""
      };
      console.log("\u{1F50D} UserForm: About to set formData:", formData2);
      console.log("\u{1F50D} UserForm: formData.role:", formData2.role, "Type:", typeof formData2.role);
      setFormData(formData2);
      setErrors({});
      console.log("\u{1F50D} UserForm: Auto-filled edit form with user data:", user);
      console.log("\u{1F50D} UserForm: Final role set:", formData2.role);
    }
  }, [user, isEditMode]);
  useEffect37(() => {
    if (!isEditMode && currentUser) {
      const updates = {};
      const userMerchantId = currentUser.merchantId || currentUser.merchant?.id;
      if (!canSelectMerchant && userMerchantId) {
        updates.merchantId = userMerchantId.toString();
      }
      const userOutletId = currentUser.outletId || currentUser.outlet?.id;
      if (!canSelectOutlet && userOutletId) {
        updates.outletId = userOutletId.toString();
      }
      if (Object.keys(updates).length > 0) {
        setFormData((prev) => ({ ...prev, ...updates }));
      }
    }
  }, [currentUser, canSelectMerchant, canSelectOutlet, isEditMode]);
  useEffect37(() => {
    if (!isEditMode && canSelectMerchant) {
      setLoadingMerchants(true);
      merchantsApi.getMerchants().then((response) => {
        if (response.success && response.data) {
          setMerchants(response.data.merchants || []);
        }
      }).catch((error2) => {
        console.error("Error loading merchants:", error2);
      }).finally(() => {
        setLoadingMerchants(false);
      });
    } else if (!isEditMode && currentUser?.merchantId || currentUser?.merchant?.id) {
      const userMerchantId = currentUser.merchantId || currentUser.merchant?.id;
      setMerchants([{
        id: userMerchantId,
        name: currentUser.merchant?.name || "Current Merchant"
      }]);
      setFormData((prev) => ({ ...prev, merchantId: userMerchantId?.toString() || "" }));
    }
  }, [canSelectMerchant, currentUser, isEditMode]);
  useEffect37(() => {
    if (!isEditMode && canSelectOutlet) {
      setLoadingOutlets(true);
      const merchantId = canSelectMerchant ? formData.merchantId : currentUser?.merchantId || currentUser?.merchant?.id;
      console.log("\u{1F50D} UserForm: Loading outlets for merchantId:", merchantId, "canSelectMerchant:", canSelectMerchant);
      if (merchantId) {
        outletsApi2.getOutletsByMerchant(Number(merchantId)).then((response) => {
          console.log("\u{1F50D} UserForm: Outlets API response:", response);
          if (response.success && response.data) {
            const outletsData = response.data.outlets || response.data || [];
            console.log("\u{1F50D} UserForm: Setting outlets:", outletsData);
            setOutlets(outletsData);
          } else {
            console.warn("\u{1F50D} UserForm: No outlets data in response:", response);
            setOutlets([]);
          }
        }).catch((error2) => {
          console.error("\u{1F50D} UserForm: Error loading outlets:", error2);
          setOutlets([]);
        }).finally(() => {
          setLoadingOutlets(false);
        });
      } else {
        console.log("\u{1F50D} UserForm: No merchantId, clearing outlets");
        setOutlets([]);
        setLoadingOutlets(false);
      }
    } else if (!isEditMode && currentUser?.outletId) {
      console.log("\u{1F50D} UserForm: Setting single outlet for current user:", currentUser.outletId);
      setOutlets([{
        id: currentUser.outletId,
        name: currentUser.outlet?.name || "Current Outlet"
      }]);
      setFormData((prev) => ({ ...prev, outletId: currentUser.outletId?.toString() || "" }));
    }
  }, [canSelectOutlet, canSelectMerchant, formData.merchantId, currentUser?.merchantId, currentUser?.outletId, isEditMode]);
  useEffect37(() => {
    if (!isEditMode && canSelectMerchant && formData.merchantId) {
      console.log("\u{1F50D} UserForm: Merchant changed, resetting outlet and reloading outlets");
      setFormData((prev) => ({ ...prev, outletId: "" }));
      setLoadingOutlets(true);
      outletsApi2.getOutletsByMerchant(Number(formData.merchantId)).then((response) => {
        console.log("\u{1F50D} UserForm: Reloading outlets for new merchant:", response);
        if (response.success && response.data) {
          const outletsData = response.data.outlets || response.data || [];
          setOutlets(outletsData);
        } else {
          setOutlets([]);
        }
      }).catch((error2) => {
        console.error("\u{1F50D} UserForm: Error reloading outlets:", error2);
        setOutlets([]);
      }).finally(() => {
        setLoadingOutlets(false);
      });
    }
  }, [formData.merchantId, canSelectMerchant, isEditMode]);
  const handleInputChange = (field, value) => {
    console.log("\u{1F50D} UserForm: Input changed:", { field, value });
    setFormData((prev) => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }));
    }
  };
  const validateForm = () => {
    let newErrors;
    if (isEditMode) {
      newErrors = validateUserUpdateInput(formData);
    } else {
      newErrors = validateUserCreateInput(formData);
    }
    console.log("\u{1F50D} UserForm: Validation errors:", newErrors);
    console.log("\u{1F50D} UserForm: Form data being validated:", formData);
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    console.log("\u{1F50D} UserForm: Form submitted, validating...");
    if (!validateForm()) {
      return;
    }
    if (!externalIsSubmitting) {
      setInternalIsSubmitting(true);
    }
    try {
      let submitData;
      if (isEditMode) {
        const updateData = formData;
        submitData = {
          id: user?.id || 0,
          firstName: updateData.firstName.trim(),
          lastName: updateData.lastName.trim(),
          email: updateData.email.trim().toLowerCase(),
          phone: updateData.phone.trim(),
          role: updateData.role,
          merchantId: updateData.merchantId ? Number(updateData.merchantId) : void 0,
          outletId: updateData.outletId ? Number(updateData.outletId) : void 0
        };
      } else {
        const createData = formData;
        submitData = {
          firstName: createData.name.trim().split(" ")[0] || "",
          lastName: createData.name.trim().split(" ").slice(1).join(" ") || "",
          email: createData.email.trim().toLowerCase(),
          phone: createData.phone.trim(),
          role: createData.role,
          password: createData.password,
          merchantId: createData.merchantId ? Number(createData.merchantId) : void 0,
          outletId: createData.outletId ? Number(createData.outletId) : void 0
        };
      }
      console.log("\u{1F50D} UserForm: About to call onSave with data:", submitData);
      console.log("\u{1F50D} UserForm: Submit data type:", isEditMode ? "UserUpdateInput" : "UserCreateInput");
      console.log("\u{1F50D} UserForm: Submit data keys:", Object.keys(submitData));
      await onSave(submitData);
      console.log("\u2705 UserForm: User operation completed successfully");
    } catch (error2) {
      console.error("\u274C UserForm: Error in user operation:", error2);
    } finally {
      if (!externalIsSubmitting) {
        setInternalIsSubmitting(false);
      }
    }
  };
  const handleCancel = () => {
    console.log("\u{1F50D} UserForm: Cancel button clicked");
    if (onCancel) {
      onCancel();
    }
  };
  return /* @__PURE__ */ jsx159("form", { onSubmit: handleSubmit, children: /* @__PURE__ */ jsx159(Card, { children: /* @__PURE__ */ jsxs142(CardContent, { className: "p-6 space-y-6", children: [
    /* @__PURE__ */ jsxs142("div", { children: [
      /* @__PURE__ */ jsx159("h3", { className: "text-sm font-medium text-gray-900 mb-4", children: isEditMode ? t2("fields.basicInformation") : t2("fields.personalInformation") }),
      /* @__PURE__ */ jsxs142("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        isEditMode ? /* @__PURE__ */ jsxs142(Fragment35, { children: [
          /* @__PURE__ */ jsx159(
            FormField,
            {
              id: "firstName",
              label: t2("fields.firstName"),
              value: formData.firstName,
              onChange: (value) => handleInputChange("firstName", value),
              error: errors.firstName,
              disabled: isSubmitting,
              required: true,
              placeholder: t2("placeholders.enterFirstName")
            }
          ),
          /* @__PURE__ */ jsx159(
            FormField,
            {
              id: "lastName",
              label: t2("fields.lastName"),
              value: formData.lastName,
              onChange: (value) => handleInputChange("lastName", value),
              error: errors.lastName,
              disabled: isSubmitting,
              required: true,
              placeholder: t2("placeholders.enterLastName")
            }
          )
        ] }) : /* @__PURE__ */ jsx159(
          FormField,
          {
            id: "name",
            label: t2("fields.fullName"),
            value: formData.name,
            onChange: (value) => handleInputChange("name", value),
            error: errors.name,
            disabled: isSubmitting,
            required: true,
            placeholder: t2("placeholders.enterFullName")
          }
        ),
        /* @__PURE__ */ jsx159(
          FormField,
          {
            id: "email",
            label: t2("fields.email"),
            value: formData.email,
            onChange: (value) => handleInputChange("email", value),
            error: errors.email,
            disabled: isSubmitting,
            required: true,
            type: "email",
            placeholder: t2("placeholders.enterEmail")
          }
        ),
        /* @__PURE__ */ jsx159(
          FormField,
          {
            id: "phone",
            label: t2("fields.phone"),
            value: formData.phone,
            onChange: (value) => handleInputChange("phone", value),
            error: errors.phone,
            disabled: isSubmitting,
            required: true,
            placeholder: t2("placeholders.enterPhone")
          }
        ),
        console.log("\u{1F50D} UserForm: RoleSelect value:", formData.role, "FormData:", formData),
        /* @__PURE__ */ jsx159(
          RoleSelect,
          {
            value: formData.role,
            onChange: (value) => {
              console.log("\u{1F50D} UserForm: Role changed to:", value);
              handleInputChange("role", value);
            },
            error: errors.role,
            disabled: isSubmitting,
            currentUserRole: currentUser?.role
          }
        )
      ] })
    ] }),
    (showMerchantField || showOutletField) && /* @__PURE__ */ jsxs142("div", { className: "border-t pt-6", children: [
      /* @__PURE__ */ jsx159("h3", { className: "text-sm font-medium text-gray-900 mb-4", children: t2("organizationAssignment") }),
      /* @__PURE__ */ jsxs142("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        showMerchantField && /* @__PURE__ */ jsx159(
          MerchantSelect,
          {
            value: formData.merchantId,
            onChange: (value) => handleInputChange("merchantId", value),
            merchants,
            loading: loadingMerchants,
            error: errors.merchantId,
            disabled: isSubmitting,
            canSelect: canSelectMerchant,
            currentUser
          }
        ),
        showOutletField && /* @__PURE__ */ jsx159(
          OutletSelect,
          {
            value: formData.outletId,
            onChange: (value) => handleInputChange("outletId", value),
            outlets,
            loading: loadingOutlets,
            error: errors.outletId,
            disabled: isSubmitting,
            canSelect: canSelectOutlet,
            canSelectMerchant,
            merchantId: formData.merchantId,
            currentUser
          }
        )
      ] })
    ] }),
    !isEditMode && /* @__PURE__ */ jsxs142("div", { className: "border-t pt-6", children: [
      /* @__PURE__ */ jsx159("h3", { className: "text-sm font-medium text-gray-900 mb-4", children: t2("passwordSettings") }),
      /* @__PURE__ */ jsxs142("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsx159(
          FormField,
          {
            id: "password",
            label: t2("fields.password"),
            value: formData.password,
            onChange: (value) => handleInputChange("password", value),
            error: errors.password,
            disabled: isSubmitting,
            required: true,
            type: "password",
            placeholder: t2("placeholders.enterPassword"),
            showPasswordToggle: true
          }
        ),
        /* @__PURE__ */ jsx159(
          FormField,
          {
            id: "confirmPassword",
            label: t2("fields.confirmPassword"),
            value: formData.confirmPassword,
            onChange: (value) => handleInputChange("confirmPassword", value),
            error: errors.confirmPassword,
            disabled: isSubmitting,
            type: "password",
            placeholder: t2("placeholders.confirmPassword"),
            showPasswordToggle: true
          }
        )
      ] })
    ] }),
    isEditMode && user && /* @__PURE__ */ jsxs142("div", { className: "border-t pt-6", children: [
      /* @__PURE__ */ jsx159("h3", { className: "text-sm font-medium text-gray-900 mb-4", children: t2("currentUserInformation") }),
      /* @__PURE__ */ jsxs142("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 text-sm", children: [
        /* @__PURE__ */ jsxs142("div", { children: [
          /* @__PURE__ */ jsxs142("span", { className: "font-medium text-gray-700", children: [
            t2("fields.role"),
            ":"
          ] }),
          /* @__PURE__ */ jsx159("span", { className: "ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs", children: t2(`roles.${user.role}`) })
        ] }),
        /* @__PURE__ */ jsxs142("div", { children: [
          /* @__PURE__ */ jsxs142("span", { className: "font-medium text-gray-700", children: [
            t2("fields.status"),
            ":"
          ] }),
          /* @__PURE__ */ jsx159("span", { className: `ml-2 px-2 py-1 rounded-full text-xs ${user.isActive ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`, children: user.isActive ? t2("fields.active") : t2("fields.inactive") })
        ] }),
        user.merchant && /* @__PURE__ */ jsxs142("div", { children: [
          /* @__PURE__ */ jsxs142("span", { className: "font-medium text-gray-700", children: [
            t2("fields.merchant"),
            ":"
          ] }),
          /* @__PURE__ */ jsx159("span", { className: "ml-2 text-gray-600", children: user.merchant.name })
        ] }),
        user.outlet && /* @__PURE__ */ jsxs142("div", { children: [
          /* @__PURE__ */ jsxs142("span", { className: "font-medium text-gray-700", children: [
            t2("fields.outlet"),
            ":"
          ] }),
          /* @__PURE__ */ jsx159("span", { className: "ml-2 text-gray-600", children: user.outlet.name })
        ] }),
        /* @__PURE__ */ jsxs142("div", { children: [
          /* @__PURE__ */ jsxs142("span", { className: "font-medium text-gray-700", children: [
            t2("created"),
            ":"
          ] }),
          /* @__PURE__ */ jsx159("span", { className: "ml-2 text-gray-600", children: new Date(user.createdAt).toLocaleDateString() })
        ] }),
        user.lastLoginAt && /* @__PURE__ */ jsxs142("div", { children: [
          /* @__PURE__ */ jsxs142("span", { className: "font-medium text-gray-700", children: [
            t2("fields.lastLogin"),
            ":"
          ] }),
          /* @__PURE__ */ jsx159("span", { className: "ml-2 text-gray-600", children: new Date(user.lastLoginAt).toLocaleDateString() })
        ] })
      ] })
    ] }),
    Object.keys(errors).length > 0 && /* @__PURE__ */ jsx159("div", { className: "bg-yellow-50 border border-yellow-200 rounded-md p-4", children: /* @__PURE__ */ jsxs142("div", { className: "flex items-start", children: [
      /* @__PURE__ */ jsx159("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx159("span", { className: "text-yellow-400 text-lg", children: "\u26A0\uFE0F" }) }),
      /* @__PURE__ */ jsxs142("div", { className: "ml-3", children: [
        /* @__PURE__ */ jsx159("h3", { className: "text-sm font-medium text-yellow-800", children: t2("messages.validationErrors") }),
        /* @__PURE__ */ jsx159("div", { className: "mt-2 text-sm text-yellow-700", children: /* @__PURE__ */ jsx159("ul", { className: "list-disc list-inside space-y-1", children: Object.entries(errors).map(([field, error2]) => /* @__PURE__ */ jsxs142("li", { children: [
          /* @__PURE__ */ jsxs142("strong", { children: [
            field.charAt(0).toUpperCase() + field.slice(1),
            ":"
          ] }),
          " ",
          error2
        ] }, field)) }) })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs142("div", { className: "flex justify-end space-x-3 border-t pt-6", children: [
      /* @__PURE__ */ jsxs142(
        Button2,
        {
          type: "button",
          variant: "outline",
          onClick: handleCancel,
          disabled: isSubmitting,
          children: [
            /* @__PURE__ */ jsx159(X13, { className: "w-4 h-4 mr-2" }),
            tc("buttons.cancel")
          ]
        }
      ),
      /* @__PURE__ */ jsxs142(
        Button2,
        {
          type: "submit",
          disabled: isSubmitting,
          children: [
            /* @__PURE__ */ jsx159(Save5, { className: "w-4 h-4 mr-2" }),
            isSubmitting ? isEditMode ? t2("actions.updating") : t2("actions.creating") : isEditMode ? t2("actions.updateUser") : t2("actions.createUser")
          ]
        }
      )
    ] })
  ] }) }) });
};

// src/components/features/Users/components/AddUserDialog.tsx
import { useUsersTranslations as useUsersTranslations5 } from "@rentalshop/hooks";
import { jsx as jsx160, jsxs as jsxs143 } from "react/jsx-runtime";
var AddUserDialog = ({
  open,
  onOpenChange,
  onUserCreated,
  onError,
  currentUser
}) => {
  const t2 = useUsersTranslations5();
  const [isSubmitting, setIsSubmitting] = useState66(false);
  const handleSave = async (userData) => {
    try {
      setIsSubmitting(true);
      if (onUserCreated) {
        await onUserCreated(userData);
      }
      onOpenChange(false);
    } catch (error2) {
      console.error("\u274C AddUserDialog: Error occurred:", error2);
      if (onError) {
        onError(error2 instanceof Error ? error2.message : "Failed to create user");
      }
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (isSubmitting)
      return;
    onOpenChange(false);
  };
  return /* @__PURE__ */ jsx160(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs143(DialogContent, { className: "max-w-4xl max-h-[90vh] overflow-y-auto p-0", children: [
    /* @__PURE__ */ jsx160(DialogHeader, { className: "px-6 py-4 border-b border-gray-200", children: /* @__PURE__ */ jsx160(DialogTitle, { className: "text-xl font-semibold text-gray-900", children: t2("addNewUser") }) }),
    /* @__PURE__ */ jsx160("div", { className: "p-6", children: /* @__PURE__ */ jsx160(
      UserForm,
      {
        mode: "create",
        user: void 0,
        onSave: handleSave,
        onCancel: handleCancel,
        isSubmitting,
        currentUser
      }
    ) })
  ] }) });
};

// src/components/features/Users/components/UserRow.tsx
import {
  Card as Card42,
  CardContent as CardContent41,
  Button as Button40
} from "@rentalshop/ui";
import {
  Eye as Eye14,
  Edit as Edit10,
  Store as Store5,
  Mail as Mail7,
  Phone as Phone4,
  Calendar as Calendar18
} from "lucide-react";
import { jsx as jsx161, jsxs as jsxs144 } from "react/jsx-runtime";
function UserRow({
  user,
  onUserAction,
  showActions = true,
  actions = ["view", "edit"],
  className = "py-4"
}) {
  const handleUserAction = (action, userId) => {
    console.log("\u{1F50D} UserRow: handleUserAction called:", { action, userId, user });
    onUserAction(action, userId);
  };
  const getRoleBadgeStyle = (role) => {
    switch (role) {
      case "ADMIN":
        return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
      case "MERCHANT":
        return "bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800";
      case "OUTLET_ADMIN":
        return "bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800";
      case "OUTLET_STAFF":
        return "bg-green-100 text-green-800 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800";
      default:
        return "bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800";
    }
  };
  const getRoleDisplayName = (role) => {
    switch (role) {
      case "ADMIN":
        return "Admin";
      case "MERCHANT":
        return "Merchant";
      case "OUTLET_ADMIN":
        return "Outlet Admin";
      case "OUTLET_STAFF":
        return "Outlet Staff";
      default:
        return role;
    }
  };
  const getStatusBadgeStyle = (isActive) => {
    if (isActive) {
      return "bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800";
    } else {
      return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
    }
  };
  const getStatusDisplayName = (isActive) => {
    return isActive ? "Active" : "Inactive";
  };
  const formatDate11 = (dateString) => {
    return new Date(dateString).toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const renderActionButton = (action) => {
    switch (action) {
      case "view":
        return /* @__PURE__ */ jsxs144(
          Button40,
          {
            variant: "outline",
            size: "sm",
            onClick: () => handleUserAction("view", user.id),
            children: [
              /* @__PURE__ */ jsx161(Eye14, { className: "w-4 h-4 mr-2" }),
              "View"
            ]
          }
        );
      case "edit":
        return /* @__PURE__ */ jsxs144(
          Button40,
          {
            variant: "outline",
            size: "sm",
            onClick: () => handleUserAction("edit", user.id),
            children: [
              /* @__PURE__ */ jsx161(Edit10, { className: "w-4 h-4 mr-2" }),
              "Edit"
            ]
          }
        );
      case "activate":
        return /* @__PURE__ */ jsx161(
          Button40,
          {
            variant: "outline",
            size: "sm",
            onClick: () => handleUserAction("activate", user.id),
            children: "Activate"
          }
        );
      case "deactivate":
        return /* @__PURE__ */ jsx161(
          Button40,
          {
            variant: "outline",
            size: "sm",
            onClick: () => handleUserAction("deactivate", user.id),
            children: "Deactivate"
          }
        );
      default:
        return null;
    }
  };
  return /* @__PURE__ */ jsx161(Card42, { className: "hover:shadow-md transition-shadow duration-200", children: /* @__PURE__ */ jsx161(CardContent41, { className, children: /* @__PURE__ */ jsxs144("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ jsx161("div", { className: "flex-1", children: /* @__PURE__ */ jsx161("div", { className: "flex items-center gap-4", children: /* @__PURE__ */ jsxs144("div", { className: "flex-1", children: [
      /* @__PURE__ */ jsxs144("div", { className: "flex items-center gap-3 mb-2", children: [
        /* @__PURE__ */ jsx161("h3", { className: "text-lg font-semibold text-text-primary", children: `${user.firstName || ""} ${user.lastName || ""}`.trim() || user.name || "Unknown User" }),
        /* @__PURE__ */ jsx161("div", { className: `inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${getRoleBadgeStyle(user.role)}`, children: getRoleDisplayName(user.role) }),
        /* @__PURE__ */ jsx161("div", { className: `inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${getStatusBadgeStyle(user.isActive)}`, children: getStatusDisplayName(user.isActive) })
      ] }),
      /* @__PURE__ */ jsxs144("div", { className: "flex items-center gap-6 text-sm text-text-secondary", children: [
        /* @__PURE__ */ jsxs144("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx161(Mail7, { className: "w-4 h-4" }),
          /* @__PURE__ */ jsx161("span", { children: user.email })
        ] }),
        user.phone && /* @__PURE__ */ jsxs144("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx161(Phone4, { className: "w-4 h-4" }),
          /* @__PURE__ */ jsx161("span", { children: user.phone })
        ] }),
        user.outlet && /* @__PURE__ */ jsxs144("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx161(Store5, { className: "w-4 h-4" }),
          /* @__PURE__ */ jsx161("span", { children: user.outlet.name }),
          user.outlet.merchant && /* @__PURE__ */ jsxs144("span", { className: "text-text-tertiary", children: [
            "\u2022 ",
            user.outlet.merchant.name
          ] })
        ] }),
        /* @__PURE__ */ jsxs144("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx161(Calendar18, { className: "w-4 h-4" }),
          /* @__PURE__ */ jsxs144("span", { children: [
            "Joined ",
            formatDate11(typeof user.createdAt === "string" ? user.createdAt : user.createdAt.toISOString())
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs144("div", { className: "flex items-center gap-6 text-sm text-text-tertiary mt-1", children: [
        /* @__PURE__ */ jsxs144("span", { children: [
          "Last login: ",
          user.lastLoginAt ? formatDate11(typeof user.lastLoginAt === "string" ? user.lastLoginAt : user.lastLoginAt.toISOString()) : "Never"
        ] }),
        /* @__PURE__ */ jsxs144("span", { children: [
          "Email verified: ",
          user.emailVerified ? "Yes" : "No"
        ] })
      ] })
    ] }) }) }),
    showActions && /* @__PURE__ */ jsx161("div", { className: "flex items-center gap-2", children: actions.map((action) => {
      if (action === "activate" && user.isActive)
        return null;
      if (action === "deactivate" && !user.isActive)
        return null;
      return /* @__PURE__ */ jsx161("div", { children: renderActionButton(action) }, action);
    }) })
  ] }) }) });
}

// src/components/features/Users/components/UserPageHeader.tsx
import { Button as Button41 } from "@rentalshop/ui";
import { Plus as Plus8, Download as Download7 } from "lucide-react";
import { jsx as jsx162, jsxs as jsxs145 } from "react/jsx-runtime";
function UserPageHeader({
  title = "Users",
  subtitle = "Manage users in the system",
  showExportButton = false,
  showAddButton = true,
  onExport,
  onAdd,
  addButtonText = "Add User",
  exportButtonText = "Export",
  className = ""
}) {
  return /* @__PURE__ */ jsx162("div", { className: `flex justify-between items-start ${className}`, children: /* @__PURE__ */ jsxs145("div", { className: "flex gap-3", children: [
    showExportButton && /* @__PURE__ */ jsxs145(
      Button41,
      {
        onClick: onExport,
        className: "h-9 px-4 text-sm",
        children: [
          /* @__PURE__ */ jsx162(Download7, { className: "w-4 h-4 mr-2" }),
          exportButtonText
        ]
      }
    ),
    showAddButton && /* @__PURE__ */ jsxs145(
      Button41,
      {
        onClick: onAdd,
        className: "bg-green-600 hover:bg-green-700 text-white h-9 px-4",
        children: [
          /* @__PURE__ */ jsx162(Plus8, { className: "w-4 h-4 mr-2" }),
          addButtonText
        ]
      }
    )
  ] }) });
}

// src/components/features/Users/components/AccountManagementCard.tsx
import { UserCheck as UserCheck3, UserX as UserX2, Trash2 as Trash210 } from "lucide-react";
import { jsx as jsx163, jsxs as jsxs146 } from "react/jsx-runtime";
var AccountManagementCard = ({
  user,
  isUpdating,
  onActivate,
  onDeactivate,
  onDelete
}) => {
  return /* @__PURE__ */ jsxs146("div", { className: "bg-white shadow rounded-lg", children: [
    /* @__PURE__ */ jsx163("div", { className: "px-6 py-4 border-b border-gray-200", children: /* @__PURE__ */ jsx163("h2", { className: "text-lg font-medium text-gray-900", children: "Account Management" }) }),
    /* @__PURE__ */ jsxs146("div", { className: "px-6 py-4 space-y-4", children: [
      /* @__PURE__ */ jsxs146("div", { className: "flex items-center justify-between p-4 bg-gray-50 rounded-lg", children: [
        /* @__PURE__ */ jsxs146("div", { children: [
          /* @__PURE__ */ jsx163("h3", { className: "text-sm font-medium text-gray-900", children: "Account Status" }),
          /* @__PURE__ */ jsx163("p", { className: "text-sm text-gray-600", children: user.isActive ? "User can currently log in and access the system" : "User is currently disabled and cannot access the system" })
        ] }),
        /* @__PURE__ */ jsx163("div", { className: "flex gap-2", children: user.isActive ? /* @__PURE__ */ jsxs146(
          Button2,
          {
            onClick: onDeactivate,
            variant: "outline",
            disabled: isUpdating,
            className: "text-orange-600 border-orange-600 hover:bg-orange-50",
            children: [
              /* @__PURE__ */ jsx163(UserX2, { className: "w-4 h-4 mr-2" }),
              "Deactivate"
            ]
          }
        ) : /* @__PURE__ */ jsxs146(
          Button2,
          {
            onClick: onActivate,
            variant: "outline",
            disabled: isUpdating,
            className: "text-green-600 border-green-600 hover:bg-green-50",
            children: [
              /* @__PURE__ */ jsx163(UserCheck3, { className: "w-4 h-4 mr-2" }),
              "Activate"
            ]
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs146("div", { className: "flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-lg", children: [
        /* @__PURE__ */ jsxs146("div", { children: [
          /* @__PURE__ */ jsx163("h3", { className: "text-sm font-medium text-red-900", children: "Delete Account" }),
          /* @__PURE__ */ jsx163("p", { className: "text-sm text-red-700", children: "This action cannot be undone. This will permanently delete the user account and remove all associated data." })
        ] }),
        /* @__PURE__ */ jsxs146(
          Button2,
          {
            onClick: onDelete,
            variant: "destructive",
            className: "bg-red-600 hover:bg-red-700",
            children: [
              /* @__PURE__ */ jsx163(Trash210, { className: "w-4 h-4 mr-2" }),
              "Delete Account"
            ]
          }
        )
      ] })
    ] })
  ] });
};

// src/components/features/Users/Users.tsx
import {
  User as UserIcon3
} from "lucide-react";
import { useUserRole as useUserRole4 } from "@rentalshop/hooks";
import { jsx as jsx164, jsxs as jsxs147 } from "react/jsx-runtime";
var Users9 = ({
  // Data props
  data,
  filters = {},
  onFiltersChange = () => {
  },
  onSearchChange = () => {
  },
  onClearFilters = () => {
  },
  onUserAction = () => {
  },
  onPageChange = () => {
  },
  onSort = () => {
  },
  // Display props
  title = "User Management",
  subtitle = "Manage users in the system",
  showExportButton = false,
  showAddButton = false,
  addButtonText = "Add User",
  exportButtonText = "Export Users",
  showStats = false,
  currentUser,
  onExport,
  className = ""
}) => {
  const { canManageUsers } = useUserRole4(currentUser);
  console.log("\u{1F465} Users Component - Received data:", {
    hasData: !!data,
    usersCount: data?.users?.length || 0,
    total: data?.total,
    page: data?.page,
    filters
  });
  const handleExport = () => {
    if (onExport) {
      onExport();
    } else {
      console.log("Export functionality not implemented");
    }
  };
  const handleAddUser = () => {
    console.log("Add user functionality should be implemented in page");
  };
  const users = data?.users || [];
  const totalUsers = data?.total || 0;
  const currentPage = data?.page || 1;
  const totalPages = data?.totalPages || 1;
  const limit = data?.limit || 25;
  console.log("\u{1F465} Users Component - Processed data:", {
    usersCount: users.length,
    totalUsers,
    currentPage,
    totalPages,
    limit
  });
  const memoizedOnFiltersChange = React93.useCallback(onFiltersChange, [onFiltersChange]);
  const memoizedOnSearchChange = React93.useCallback(onSearchChange, [onSearchChange]);
  const memoizedOnClearFilters = React93.useCallback(onClearFilters, [onClearFilters]);
  const memoizedOnUserAction = React93.useCallback(onUserAction, [onUserAction]);
  const memoizedOnPageChange = React93.useCallback(onPageChange, [onPageChange]);
  const memoizedOnSort = React93.useCallback(onSort, [onSort]);
  return /* @__PURE__ */ jsxs147("div", { className: `flex flex-col h-full ${className}`, children: [
    /* @__PURE__ */ jsxs147("div", { className: "flex-shrink-0 space-y-4", children: [
      /* @__PURE__ */ jsx164(
        UserPageHeader,
        {
          title,
          subtitle,
          showExportButton,
          showAddButton: showAddButton && canManageUsers,
          onExport: handleExport,
          onAdd: handleAddUser,
          addButtonText,
          exportButtonText
        }
      ),
      /* @__PURE__ */ jsx164(Card43, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx164(CardContent42, { className: "pt-4 pb-4", children: /* @__PURE__ */ jsx164("div", { className: "flex flex-wrap items-center gap-3", children: /* @__PURE__ */ jsx164(
        UserFilters,
        {
          filters,
          onFiltersChange: memoizedOnFiltersChange,
          onSearchChange: memoizedOnSearchChange,
          onClearFilters: memoizedOnClearFilters
        }
      ) }) }) })
    ] }),
    /* @__PURE__ */ jsx164("div", { className: "flex-1 min-h-0 mt-4", children: users.length > 0 ? /* @__PURE__ */ jsx164(
      UserTable,
      {
        users,
        onUserAction: memoizedOnUserAction,
        sortBy: filters.sortBy || "createdAt",
        sortOrder: filters.sortOrder || "desc",
        onSort: memoizedOnSort
      }
    ) : /* @__PURE__ */ jsx164(
      EmptyState4,
      {
        icon: UserIcon3,
        title: "No users found",
        description: filters.search || filters.q || filters.role ? "Try adjusting your search or filters" : "Get started by adding your first user",
        actionLabel: canManageUsers ? addButtonText : void 0,
        onAction: canManageUsers ? handleAddUser : void 0
      }
    ) }),
    users.length > 0 && totalUsers > limit && /* @__PURE__ */ jsx164("div", { className: "flex-shrink-0 py-4", children: /* @__PURE__ */ jsx164(
      Pagination8,
      {
        currentPage,
        totalPages,
        total: totalUsers,
        limit,
        onPageChange: memoizedOnPageChange,
        itemName: "users"
      }
    ) })
  ] });
};
var Users_default = Users9;

// src/components/features/Outlets/Outlets.tsx
import React97 from "react";
import {
  Pagination as Pagination10,
  EmptyState as EmptyState5,
  Card as Card47,
  CardContent as CardContent46
} from "@rentalshop/ui";

// src/components/features/Outlets/components/OutletHeader.tsx
import {
  Card as Card44,
  CardHeader as CardHeader32,
  CardTitle as CardTitle32,
  Button as Button43
} from "@rentalshop/ui";
import {
  Building2 as Building210,
  Grid as Grid2,
  List as List2,
  Plus as Plus9
} from "lucide-react";
import { useOutletsTranslations } from "@rentalshop/hooks";
import { jsx as jsx165, jsxs as jsxs148 } from "react/jsx-runtime";
function OutletHeader({
  viewMode,
  onViewModeChange,
  onAddOutlet,
  totalOutlets,
  merchantId
}) {
  const t2 = useOutletsTranslations();
  return /* @__PURE__ */ jsx165(Card44, { children: /* @__PURE__ */ jsxs148(CardHeader32, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
    /* @__PURE__ */ jsx165("div", { className: "flex items-center space-x-4", children: /* @__PURE__ */ jsxs148(CardTitle32, { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx165(Building210, { className: "w-5 h-5" }),
      t2("title"),
      " (",
      totalOutlets,
      ")"
    ] }) }),
    /* @__PURE__ */ jsxs148("div", { className: "flex items-center space-x-2", children: [
      /* @__PURE__ */ jsxs148("div", { className: "flex items-center space-x-1 border rounded-lg p-1", children: [
        /* @__PURE__ */ jsx165(
          Button43,
          {
            variant: viewMode === "grid" ? "default" : "ghost",
            size: "sm",
            onClick: () => onViewModeChange("grid"),
            className: "h-8 w-8 p-0",
            children: /* @__PURE__ */ jsx165(Grid2, { className: "w-4 h-4" })
          }
        ),
        /* @__PURE__ */ jsx165(
          Button43,
          {
            variant: viewMode === "table" ? "default" : "ghost",
            size: "sm",
            onClick: () => onViewModeChange("table"),
            className: "h-8 w-8 p-0",
            children: /* @__PURE__ */ jsx165(List2, { className: "w-4 h-4" })
          }
        )
      ] }),
      /* @__PURE__ */ jsxs148(Button43, { onClick: onAddOutlet, children: [
        /* @__PURE__ */ jsx165(Plus9, { className: "w-4 h-4 mr-2" }),
        t2("addOutlet")
      ] })
    ] })
  ] }) });
}

// src/components/features/Outlets/components/OutletFilters.tsx
import {
  Input as Input20,
  Select as Select14,
  SelectContent as SelectContent14,
  SelectItem as SelectItem14,
  SelectTrigger as SelectTrigger14,
  SelectValue as SelectValue14,
  Button as Button44
} from "@rentalshop/ui";
import { Fragment as Fragment36, jsx as jsx166, jsxs as jsxs149 } from "react/jsx-runtime";
function OutletFilters({
  filters,
  onFiltersChange,
  onSearchChange,
  onClearFilters
}) {
  const handleStatusFilter = (value) => {
    const status = value === "all" ? void 0 : value;
    onFiltersChange({ ...filters, status });
  };
  return /* @__PURE__ */ jsxs149(Fragment36, { children: [
    /* @__PURE__ */ jsx166("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs149("div", { className: "relative", children: [
      /* @__PURE__ */ jsx166(
        Input20,
        {
          placeholder: "Search outlets...",
          value: filters.search || "",
          onChange: (e2) => onSearchChange(e2.target.value),
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx166(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx166(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs149(
      Select14,
      {
        value: filters.status || "all",
        onValueChange: handleStatusFilter,
        children: [
          /* @__PURE__ */ jsx166(SelectTrigger14, { className: "w-[150px] h-10", children: /* @__PURE__ */ jsx166(SelectValue14, { placeholder: "Status" }) }),
          /* @__PURE__ */ jsxs149(SelectContent14, { children: [
            /* @__PURE__ */ jsx166(SelectItem14, { value: "all", children: "All Status" }),
            /* @__PURE__ */ jsx166(SelectItem14, { value: "active", children: "Active" }),
            /* @__PURE__ */ jsx166(SelectItem14, { value: "inactive", children: "Inactive" })
          ] })
        ]
      }
    ),
    (filters.search || filters.status) && onClearFilters && /* @__PURE__ */ jsx166(
      Button44,
      {
        variant: "outline",
        size: "sm",
        onClick: onClearFilters,
        className: "h-10",
        children: "Clear"
      }
    )
  ] });
}

// src/components/features/Outlets/components/OutletGrid.tsx
import {
  Card as Card45,
  CardContent as CardContent44,
  CardHeader as CardHeader33,
  CardTitle as CardTitle33,
  Button as Button45,
  StatusBadge as StatusBadge2
} from "@rentalshop/ui";
import {
  Building2 as Building211,
  MapPin as MapPin6,
  Phone as Phone5,
  Edit as Edit11,
  Eye as Eye15
} from "lucide-react";
import { jsx as jsx167, jsxs as jsxs150 } from "react/jsx-runtime";
function OutletGrid({
  outlets,
  onOutletAction
}) {
  if (outlets.length === 0) {
    return /* @__PURE__ */ jsx167(Card45, { children: /* @__PURE__ */ jsxs150(CardContent44, { className: "text-center py-8 text-gray-500 dark:text-gray-400", children: [
      /* @__PURE__ */ jsx167(Building211, { className: "w-12 h-12 mx-auto mb-4 text-gray-300" }),
      /* @__PURE__ */ jsx167("h3", { className: "text-lg font-medium mb-2", children: "No Outlets Found" }),
      /* @__PURE__ */ jsx167("p", { className: "text-sm", children: "No outlets match your current filters." })
    ] }) });
  }
  return /* @__PURE__ */ jsx167("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: outlets.map((outlet) => /* @__PURE__ */ jsxs150(Card45, { className: "hover:shadow-lg transition-shadow", children: [
    /* @__PURE__ */ jsx167(CardHeader33, { children: /* @__PURE__ */ jsxs150("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs150(CardTitle33, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx167(Building211, { className: "w-5 h-5" }),
        outlet.name,
        outlet.isDefault && /* @__PURE__ */ jsx167(
          StatusBadge2,
          {
            status: "main branch",
            variant: "outline",
            className: "flex items-center gap-1"
          }
        )
      ] }),
      /* @__PURE__ */ jsx167(
        StatusBadge2,
        {
          status: outlet.isActive ? "active" : "inactive",
          variant: "default"
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs150(CardContent44, { className: "space-y-4", children: [
      outlet.address && /* @__PURE__ */ jsxs150("div", { className: "flex items-start gap-2", children: [
        /* @__PURE__ */ jsx167(MapPin6, { className: "w-4 h-4 text-gray-500 mt-0.5 flex-shrink-0" }),
        /* @__PURE__ */ jsx167("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: outlet.address })
      ] }),
      outlet.phone && /* @__PURE__ */ jsxs150("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx167(Phone5, { className: "w-4 h-4 text-gray-500" }),
        /* @__PURE__ */ jsx167("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: outlet.phone })
      ] }),
      outlet.description && /* @__PURE__ */ jsx167("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: outlet.description }),
      /* @__PURE__ */ jsxs150("div", { className: "text-xs text-gray-500", children: [
        "Created: ",
        new Date(outlet.createdAt).toLocaleDateString()
      ] }),
      /* @__PURE__ */ jsxs150("div", { className: "flex space-x-2 pt-2", children: [
        /* @__PURE__ */ jsxs150(
          Button45,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onOutletAction("view", outlet.id),
            className: "flex-1",
            children: [
              /* @__PURE__ */ jsx167(Eye15, { className: "w-4 h-4 mr-1" }),
              "View"
            ]
          }
        ),
        /* @__PURE__ */ jsxs150(
          Button45,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onOutletAction("edit", outlet.id),
            className: "flex-1",
            children: [
              /* @__PURE__ */ jsx167(Edit11, { className: "w-4 h-4 mr-1" }),
              "Edit"
            ]
          }
        )
      ] })
    ] })
  ] }, outlet.id)) });
}

// src/components/features/Outlets/components/OutletTable.tsx
import React94 from "react";
import { Eye as Eye16, Edit as Edit12, XCircle as XCircle13, CheckCircle as CheckCircle19, MoreVertical as MoreVertical6, Building2 as Building212 } from "lucide-react";
import { useOutletsTranslations as useOutletsTranslations2, useCommonTranslations as useCommonTranslations17 } from "@rentalshop/hooks";
import { jsx as jsx168, jsxs as jsxs151 } from "react/jsx-runtime";
function OutletTable({
  outlets,
  onOutletAction,
  sortBy = "createdAt",
  sortOrder = "desc",
  onSort
}) {
  const t2 = useOutletsTranslations2();
  const tc = useCommonTranslations17();
  const [openDropdownId, setOpenDropdownId] = React94.useState(null);
  if (outlets.length === 0) {
    return /* @__PURE__ */ jsx168(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx168(CardContent, { className: "text-center py-12", children: /* @__PURE__ */ jsxs151("div", { className: "text-gray-500 dark:text-gray-400", children: [
      /* @__PURE__ */ jsx168(Building212, { className: "w-16 h-16 mx-auto mb-4 text-gray-400" }),
      /* @__PURE__ */ jsx168("h3", { className: "text-lg font-medium mb-2", children: t2("messages.noOutlets") }),
      /* @__PURE__ */ jsx168("p", { className: "text-sm", children: t2("messages.tryAdjustingSearch") })
    ] }) }) });
  }
  const formatDate11 = (dateString) => {
    if (!dateString)
      return t2("fields.notAvailable");
    const date2 = typeof dateString === "string" ? new Date(dateString) : dateString;
    return date2.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const getStatusBadge = (isActive) => {
    return isActive ? /* @__PURE__ */ jsx168(Badge, { className: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200", children: tc("labels.active") }) : /* @__PURE__ */ jsx168(Badge, { className: "bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200", children: tc("labels.inactive") });
  };
  const handleSort = (column) => {
    if (onSort) {
      onSort(column);
    }
  };
  return /* @__PURE__ */ jsx168(Card, { className: "shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col h-full", children: /* @__PURE__ */ jsx168("div", { className: "flex-1 overflow-auto", children: /* @__PURE__ */ jsxs151("table", { className: "w-full", children: [
    /* @__PURE__ */ jsx168("thead", { className: "bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10", children: /* @__PURE__ */ jsxs151("tr", { children: [
      /* @__PURE__ */ jsx168(
        "th",
        {
          onClick: () => handleSort("id"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs151("div", { className: "flex items-center gap-1", children: [
            "ID",
            sortBy === "id" && /* @__PURE__ */ jsx168("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx168(
        "th",
        {
          onClick: () => handleSort("name"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs151("div", { className: "flex items-center gap-1", children: [
            tc("labels.name"),
            sortBy === "name" && /* @__PURE__ */ jsx168("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx168("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: tc("labels.address") }),
      /* @__PURE__ */ jsx168("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: t2("fields.phone") }),
      /* @__PURE__ */ jsx168("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: tc("labels.status") }),
      /* @__PURE__ */ jsx168(
        "th",
        {
          onClick: () => handleSort("createdAt"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs151("div", { className: "flex items-center gap-1", children: [
            tc("labels.createdAt"),
            sortBy === "createdAt" && /* @__PURE__ */ jsx168("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx168("th", { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: tc("labels.actions") })
    ] }) }),
    /* @__PURE__ */ jsx168("tbody", { className: "bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700", children: outlets.map((outlet) => /* @__PURE__ */ jsxs151("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-800", children: [
      /* @__PURE__ */ jsx168("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsxs151("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [
        "#",
        outlet.id
      ] }) }),
      /* @__PURE__ */ jsx168("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx168("div", { className: "text-sm", children: /* @__PURE__ */ jsx168("div", { className: "font-medium text-gray-900 dark:text-white", children: outlet.name }) }) }),
      /* @__PURE__ */ jsx168("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx168("div", { className: "text-sm text-gray-900 dark:text-white", children: outlet.address || t2("fields.notAvailable") }) }),
      /* @__PURE__ */ jsx168("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx168("div", { className: "text-sm text-gray-900 dark:text-white", children: outlet.phone || t2("fields.notAvailable") }) }),
      /* @__PURE__ */ jsx168("td", { className: "px-6 py-4 whitespace-nowrap", children: getStatusBadge(outlet.isActive) }),
      /* @__PURE__ */ jsx168("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx168("div", { className: "text-sm text-gray-900 dark:text-white", children: formatDate11(outlet.createdAt) }) }),
      /* @__PURE__ */ jsx168("td", { className: "px-6 py-4 whitespace-nowrap text-right text-sm font-medium", children: /* @__PURE__ */ jsxs151(DropdownMenu, { children: [
        /* @__PURE__ */ jsx168(DropdownMenuTrigger, { children: /* @__PURE__ */ jsx168(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            className: "h-8 w-8 p-0",
            onClick: () => setOpenDropdownId(outlet.id),
            children: /* @__PURE__ */ jsx168(MoreVertical6, { className: "h-4 w-4" })
          }
        ) }),
        /* @__PURE__ */ jsxs151(
          DropdownMenuContent,
          {
            align: "end",
            open: openDropdownId === outlet.id,
            onOpenChange: (open) => setOpenDropdownId(open ? outlet.id : null),
            children: [
              /* @__PURE__ */ jsxs151(DropdownMenuItem, { onClick: () => {
                onOutletAction("view", outlet.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx168(Eye16, { className: "h-4 w-4 mr-2" }),
                t2("actions.viewDetails")
              ] }),
              /* @__PURE__ */ jsxs151(DropdownMenuItem, { onClick: () => {
                onOutletAction("edit", outlet.id);
                setOpenDropdownId(null);
              }, children: [
                /* @__PURE__ */ jsx168(Edit12, { className: "h-4 w-4 mr-2" }),
                t2("actions.editOutlet")
              ] }),
              /* @__PURE__ */ jsx168(DropdownMenuSeparator, {}),
              /* @__PURE__ */ jsxs151(DropdownMenuItem, { onClick: () => {
                onOutletAction(outlet.isActive ? "disable" : "enable", outlet.id);
                setOpenDropdownId(null);
              }, children: [
                outlet.isActive ? /* @__PURE__ */ jsx168(XCircle13, { className: "h-4 w-4 mr-2" }) : /* @__PURE__ */ jsx168(CheckCircle19, { className: "h-4 w-4 mr-2" }),
                outlet.isActive ? t2("actions.disableOutlet") : t2("actions.enableOutlet")
              ] })
            ]
          }
        )
      ] }) })
    ] }, outlet.id)) })
  ] }) }) });
}

// src/components/features/Outlets/components/OutletSearch.tsx
import { Input as Input21, Button as Button46 } from "@rentalshop/ui";
import { useOutletsTranslations as useOutletsTranslations3, useCommonTranslations as useCommonTranslations18 } from "@rentalshop/hooks";
import { Fragment as Fragment37, jsx as jsx169, jsxs as jsxs152 } from "react/jsx-runtime";
function OutletSearch({ value, onChange, onClear }) {
  const t2 = useOutletsTranslations3();
  const tc = useCommonTranslations18();
  return /* @__PURE__ */ jsxs152(Fragment37, { children: [
    /* @__PURE__ */ jsx169("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs152("div", { className: "relative", children: [
      /* @__PURE__ */ jsx169(
        Input21,
        {
          type: "text",
          placeholder: t2("search.placeholder"),
          value,
          onChange: (e2) => onChange(e2.target.value),
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx169(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx169(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    value && /* @__PURE__ */ jsx169(
      Button46,
      {
        onClick: onClear,
        variant: "outline",
        size: "sm",
        className: "h-10",
        children: tc("buttons.clear")
      }
    )
  ] });
}

// src/components/features/Outlets/components/OutletPagination.tsx
import { Pagination as Pagination9 } from "@rentalshop/ui";
import { jsx as jsx170 } from "react/jsx-runtime";
function OutletPagination({
  currentPage,
  totalPages,
  total,
  limit,
  onPageChange
}) {
  return /* @__PURE__ */ jsx170(
    Pagination9,
    {
      currentPage,
      totalPages,
      total,
      limit,
      onPageChange
    }
  );
}

// src/components/features/Outlets/components/AddOutletDialog.tsx
import { useState as useState68 } from "react";

// src/components/features/Outlets/components/AddOutletForm.tsx
import { useState as useState67 } from "react";
import { Save as Save6, X as X14 } from "lucide-react";
import { Button as Button47, Input as Input22, Label as Label10, Textarea as Textarea5, Card as Card46, CardContent as CardContent45 } from "@rentalshop/ui";
import { useOutletsTranslations as useOutletsTranslations4, useCommonTranslations as useCommonTranslations19 } from "@rentalshop/hooks";
import { jsx as jsx171, jsxs as jsxs153 } from "react/jsx-runtime";
var AddOutletForm = ({
  onSave,
  onCancel,
  isSubmitting = false,
  merchantId
}) => {
  const t2 = useOutletsTranslations4();
  const tc = useCommonTranslations19();
  const [formData, setFormData] = useState67({
    name: "",
    address: "",
    city: "",
    state: "",
    zipCode: "",
    country: "",
    phone: "",
    description: "",
    merchantId: merchantId || 0
  });
  const [errors, setErrors] = useState67({});
  const validateForm = () => {
    const newErrors = {};
    if (!formData.name.trim()) {
      newErrors.name = "Outlet name is required";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    try {
      await onSave(formData);
    } catch (error2) {
      console.error("Error saving outlet:", error2);
    }
  };
  const handleCancel = () => {
    if (onCancel) {
      onCancel();
    }
  };
  return /* @__PURE__ */ jsx171("form", { onSubmit: handleSubmit, children: /* @__PURE__ */ jsx171(Card46, { children: /* @__PURE__ */ jsxs153(CardContent45, { className: "p-6 space-y-4", children: [
    /* @__PURE__ */ jsxs153("div", { children: [
      /* @__PURE__ */ jsxs153(Label10, { htmlFor: "name", children: [
        t2("fields.name"),
        " *"
      ] }),
      /* @__PURE__ */ jsx171(
        Input22,
        {
          id: "name",
          value: formData.name,
          onChange: (e2) => setFormData((prev) => ({ ...prev, name: e2.target.value })),
          placeholder: t2("placeholders.enterOutletName"),
          className: errors.name ? "border-red-500" : ""
        }
      ),
      errors.name && /* @__PURE__ */ jsx171("p", { className: "text-sm text-red-600 mt-1", children: errors.name })
    ] }),
    /* @__PURE__ */ jsxs153("div", { children: [
      /* @__PURE__ */ jsx171(Label10, { htmlFor: "address", children: t2("fields.address") }),
      /* @__PURE__ */ jsx171(
        Input22,
        {
          id: "address",
          value: formData.address,
          onChange: (e2) => setFormData((prev) => ({ ...prev, address: e2.target.value })),
          placeholder: t2("placeholders.enterStreetAddress")
        }
      )
    ] }),
    /* @__PURE__ */ jsxs153("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
      /* @__PURE__ */ jsxs153("div", { children: [
        /* @__PURE__ */ jsx171(Label10, { htmlFor: "city", children: t2("fields.city") }),
        /* @__PURE__ */ jsx171(
          Input22,
          {
            id: "city",
            value: formData.city,
            onChange: (e2) => setFormData((prev) => ({ ...prev, city: e2.target.value })),
            placeholder: t2("placeholders.enterCity")
          }
        )
      ] }),
      /* @__PURE__ */ jsxs153("div", { children: [
        /* @__PURE__ */ jsx171(Label10, { htmlFor: "state", children: t2("fields.state") }),
        /* @__PURE__ */ jsx171(
          Input22,
          {
            id: "state",
            value: formData.state,
            onChange: (e2) => setFormData((prev) => ({ ...prev, state: e2.target.value })),
            placeholder: t2("placeholders.enterState")
          }
        )
      ] }),
      /* @__PURE__ */ jsxs153("div", { children: [
        /* @__PURE__ */ jsx171(Label10, { htmlFor: "zipCode", children: t2("fields.zipCode") }),
        /* @__PURE__ */ jsx171(
          Input22,
          {
            id: "zipCode",
            value: formData.zipCode,
            onChange: (e2) => setFormData((prev) => ({ ...prev, zipCode: e2.target.value })),
            placeholder: t2("placeholders.enterZipCode")
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs153("div", { children: [
      /* @__PURE__ */ jsx171(Label10, { htmlFor: "country", children: t2("fields.country") }),
      /* @__PURE__ */ jsx171(
        Input22,
        {
          id: "country",
          value: formData.country,
          onChange: (e2) => setFormData((prev) => ({ ...prev, country: e2.target.value })),
          placeholder: t2("placeholders.enterCountry")
        }
      )
    ] }),
    /* @__PURE__ */ jsxs153("div", { children: [
      /* @__PURE__ */ jsx171(Label10, { htmlFor: "phone", children: t2("fields.phone") }),
      /* @__PURE__ */ jsx171(
        Input22,
        {
          id: "phone",
          type: "tel",
          value: formData.phone,
          onChange: (e2) => setFormData((prev) => ({ ...prev, phone: e2.target.value })),
          placeholder: t2("placeholders.enterOutletPhone")
        }
      )
    ] }),
    /* @__PURE__ */ jsxs153("div", { children: [
      /* @__PURE__ */ jsx171(Label10, { htmlFor: "description", children: t2("fields.description") }),
      /* @__PURE__ */ jsx171(
        Textarea5,
        {
          id: "description",
          value: formData.description,
          onChange: (e2) => setFormData((prev) => ({ ...prev, description: e2.target.value })),
          placeholder: t2("placeholders.enterOutletDescription"),
          rows: 3
        }
      )
    ] }),
    /* @__PURE__ */ jsxs153("div", { className: "flex justify-end space-x-3 border-t pt-4", children: [
      /* @__PURE__ */ jsxs153(
        Button47,
        {
          type: "button",
          variant: "outline",
          onClick: handleCancel,
          disabled: isSubmitting,
          children: [
            /* @__PURE__ */ jsx171(X14, { className: "w-4 h-4 mr-2" }),
            tc("buttons.cancel")
          ]
        }
      ),
      /* @__PURE__ */ jsxs153(
        Button47,
        {
          type: "submit",
          disabled: isSubmitting,
          children: [
            /* @__PURE__ */ jsx171(Save6, { className: "w-4 h-4 mr-2" }),
            isSubmitting ? tc("buttons.saving") : tc("buttons.save")
          ]
        }
      )
    ] })
  ] }) }) });
};

// src/components/features/Outlets/components/AddOutletDialog.tsx
import { useOutletsTranslations as useOutletsTranslations5 } from "@rentalshop/hooks";
import { jsx as jsx172, jsxs as jsxs154 } from "react/jsx-runtime";
var AddOutletDialog = ({
  open,
  onOpenChange,
  onOutletCreated,
  onError,
  merchantId
}) => {
  const t2 = useOutletsTranslations5();
  const [isSubmitting, setIsSubmitting] = useState68(false);
  const handleSave = async (outletData) => {
    try {
      setIsSubmitting(true);
      if (onOutletCreated) {
        await onOutletCreated(outletData);
      }
      onOpenChange(false);
    } catch (error2) {
      console.error("\u274C AddOutletDialog: Error occurred:", error2);
      if (onError) {
        onError(error2 instanceof Error ? error2.message : "Failed to create outlet");
      }
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (isSubmitting)
      return;
    onOpenChange(false);
  };
  return /* @__PURE__ */ jsx172(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs154(DialogContent, { className: "max-w-4xl max-h-[90vh] overflow-y-auto p-0", children: [
    /* @__PURE__ */ jsx172(DialogHeader, { className: "px-6 py-4 border-b border-gray-200", children: /* @__PURE__ */ jsx172(DialogTitle, { className: "text-xl font-semibold text-gray-900", children: t2("dialogs.addOutletTitle") }) }),
    /* @__PURE__ */ jsx172("div", { className: "p-6", children: /* @__PURE__ */ jsx172(
      AddOutletForm,
      {
        onSave: handleSave,
        onCancel: handleCancel,
        isSubmitting,
        merchantId
      }
    ) })
  ] }) });
};

// src/components/features/Outlets/Outlets.tsx
import { Building2 as Building213 } from "lucide-react";
import { jsx as jsx173, jsxs as jsxs155 } from "react/jsx-runtime";
var Outlets = ({
  data,
  filters = {},
  onSearchChange = () => {
  },
  onOutletAction = () => {
  },
  onPageChange = () => {
  },
  onSort = () => {
  },
  currentUser,
  className = ""
}) => {
  const outlets = data?.outlets || [];
  const totalOutlets = data?.total || 0;
  const currentPage = data?.page || 1;
  const totalPages = data?.totalPages || 1;
  const limit = data?.limit || 25;
  const memoizedOnSearchChange = React97.useCallback(onSearchChange, [onSearchChange]);
  const memoizedOnOutletAction = React97.useCallback(onOutletAction, [onOutletAction]);
  const memoizedOnPageChange = React97.useCallback(onPageChange, [onPageChange]);
  const memoizedOnSort = React97.useCallback(onSort, [onSort]);
  return /* @__PURE__ */ jsxs155("div", { className: `flex flex-col h-full ${className}`, children: [
    /* @__PURE__ */ jsx173("div", { className: "flex-shrink-0 mb-4", children: /* @__PURE__ */ jsx173(Card47, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx173(CardContent46, { className: "pt-4 pb-4", children: /* @__PURE__ */ jsx173("div", { className: "flex flex-wrap items-center gap-3", children: /* @__PURE__ */ jsx173(
      OutletSearch,
      {
        value: filters.q || "",
        onChange: memoizedOnSearchChange,
        onClear: () => memoizedOnSearchChange("")
      }
    ) }) }) }) }),
    /* @__PURE__ */ jsx173("div", { className: "flex-1 min-h-0", children: outlets.length > 0 ? /* @__PURE__ */ jsx173(
      OutletTable,
      {
        outlets,
        onOutletAction: memoizedOnOutletAction,
        sortBy: filters.sortBy || "createdAt",
        sortOrder: filters.sortOrder || "desc",
        onSort: memoizedOnSort
      }
    ) : /* @__PURE__ */ jsx173(
      EmptyState5,
      {
        icon: Building213,
        title: "No outlets found",
        description: filters.q ? "Try adjusting your search" : "Get started by adding your first outlet"
      }
    ) }),
    outlets.length > 0 && totalOutlets > limit && /* @__PURE__ */ jsx173("div", { className: "flex-shrink-0 py-4", children: /* @__PURE__ */ jsx173(
      Pagination10,
      {
        currentPage,
        totalPages,
        total: totalOutlets,
        limit,
        onPageChange: memoizedOnPageChange,
        itemName: "outlets"
      }
    ) })
  ] });
};

// src/components/features/Categories/Categories.tsx
import React103 from "react";
import {
  Pagination as Pagination11,
  EmptyState as EmptyState6,
  Card as Card48,
  CardContent as CardContent47
} from "@rentalshop/ui";

// src/components/features/Categories/components/CategoryHeader.tsx
import { Button as Button48 } from "@rentalshop/ui";
import { Plus as Plus10 } from "lucide-react";
import { useUserRole as useUserRole5 } from "@rentalshop/hooks";
import { jsx as jsx174, jsxs as jsxs156 } from "react/jsx-runtime";
var CategoryHeader = ({
  onAddCategory
}) => {
  const { canManageCategories } = useUserRole5();
  return /* @__PURE__ */ jsxs156("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ jsxs156("div", { children: [
      /* @__PURE__ */ jsx174("h1", { className: "text-3xl font-bold tracking-tight", children: "Product Categories" }),
      /* @__PURE__ */ jsx174("p", { className: "text-muted-foreground", children: "Manage your product categories for better organization" })
    ] }),
    canManageCategories && /* @__PURE__ */ jsxs156(Button48, { onClick: onAddCategory, className: "flex items-center space-x-2", children: [
      /* @__PURE__ */ jsx174(Plus10, { className: "h-4 w-4" }),
      /* @__PURE__ */ jsx174("span", { children: "Add Category" })
    ] })
  ] });
};

// src/components/features/Categories/components/CategoryActions.tsx
import { useState as useState71 } from "react";
import { useUserRole as useUserRole6 } from "@rentalshop/hooks";

// src/components/features/Categories/components/AddCategoryDialog.tsx
import { useState as useState70 } from "react";
import { useCategoriesTranslations as useCategoriesTranslations2 } from "@rentalshop/hooks";

// src/components/features/Categories/components/CategoryFormContent.tsx
import { useState as useState69, useEffect as useEffect38 } from "react";
import { useCategoriesTranslations, useCommonTranslations as useCommonTranslations20 } from "@rentalshop/hooks";
import { Save as Save7, Loader2 as Loader27 } from "lucide-react";
import { Fragment as Fragment38, jsx as jsx175, jsxs as jsxs157 } from "react/jsx-runtime";
var CategoryFormContent = ({
  category,
  onSave,
  onCancel,
  mode,
  isSubmitting: externalIsSubmitting
}) => {
  const t2 = useCategoriesTranslations();
  const tc = useCommonTranslations20();
  const [formData, setFormData] = useState69({
    name: "",
    description: ""
  });
  const [errors, setErrors] = useState69({});
  const [isSubmitting, setIsSubmitting] = useState69(false);
  const submitting = externalIsSubmitting !== void 0 ? externalIsSubmitting : isSubmitting;
  useEffect38(() => {
    if (category && mode === "edit") {
      setFormData({
        name: category.name || "",
        description: category.description || ""
      });
    }
  }, [category, mode]);
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }));
    }
  };
  const validateForm = () => {
    const newErrors = {};
    if (!formData.name.trim()) {
      newErrors.name = t2("validation.nameRequired");
    } else if (formData.name.trim().length < 2) {
      newErrors.name = t2("validation.nameMinLength");
    } else if (formData.name.trim().length > 50) {
      newErrors.name = t2("validation.nameMaxLength");
    }
    if (formData.description && formData.description.trim().length > 200) {
      newErrors.description = t2("validation.descriptionMaxLength");
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = async (e2) => {
    e2.preventDefault();
    if (!validateForm()) {
      return;
    }
    if (externalIsSubmitting === void 0) {
      setIsSubmitting(true);
    }
    try {
      const categoryData = {
        name: formData.name.trim(),
        description: formData.description.trim() || void 0
      };
      await onSave(categoryData);
    } catch (error2) {
      console.error("Error saving category:", error2);
    } finally {
      if (externalIsSubmitting === void 0) {
        setIsSubmitting(false);
      }
    }
  };
  const handleCancel = () => {
    if (submitting)
      return;
    onCancel();
  };
  return /* @__PURE__ */ jsxs157("form", { onSubmit: handleSubmit, className: "space-y-4", children: [
    /* @__PURE__ */ jsxs157("div", { children: [
      /* @__PURE__ */ jsxs157(Label2, { htmlFor: "name", children: [
        t2("fields.name"),
        " *"
      ] }),
      /* @__PURE__ */ jsx175(
        Input,
        {
          id: "name",
          value: formData.name,
          onChange: (e2) => handleInputChange("name", e2.target.value),
          placeholder: t2("fields.name"),
          className: errors.name ? "border-red-500" : "",
          disabled: submitting,
          required: true
        }
      ),
      errors.name && /* @__PURE__ */ jsx175("p", { className: "text-sm text-red-500 mt-1", children: errors.name })
    ] }),
    /* @__PURE__ */ jsxs157("div", { children: [
      /* @__PURE__ */ jsx175(Label2, { htmlFor: "description", children: t2("fields.description") }),
      /* @__PURE__ */ jsx175(
        Textarea,
        {
          id: "description",
          value: formData.description,
          onChange: (e2) => handleInputChange("description", e2.target.value),
          placeholder: t2("fields.description"),
          rows: 3,
          className: errors.description ? "border-red-500" : "",
          disabled: submitting
        }
      ),
      errors.description && /* @__PURE__ */ jsx175("p", { className: "text-sm text-red-500 mt-1", children: errors.description }),
      /* @__PURE__ */ jsxs157("p", { className: "text-xs text-gray-500 mt-1", children: [
        formData.description.length,
        "/200 ",
        t2("validation.characters")
      ] })
    ] }),
    /* @__PURE__ */ jsxs157("div", { className: "flex items-center justify-end gap-3 pt-4", children: [
      /* @__PURE__ */ jsx175(
        Button2,
        {
          type: "button",
          variant: "outline",
          onClick: handleCancel,
          disabled: submitting,
          children: tc("buttons.cancel")
        }
      ),
      /* @__PURE__ */ jsx175(
        Button2,
        {
          type: "submit",
          disabled: submitting,
          children: submitting ? /* @__PURE__ */ jsxs157(Fragment38, { children: [
            /* @__PURE__ */ jsx175(Loader27, { className: "h-4 w-4 mr-2 animate-spin" }),
            tc("buttons.saving")
          ] }) : /* @__PURE__ */ jsxs157(Fragment38, { children: [
            /* @__PURE__ */ jsx175(Save7, { className: "h-4 w-4 mr-2" }),
            mode === "create" ? t2("actions.create") : t2("actions.update")
          ] })
        }
      )
    ] })
  ] });
};

// src/components/features/Categories/components/AddCategoryDialog.tsx
import { jsx as jsx176, jsxs as jsxs158 } from "react/jsx-runtime";
var AddCategoryDialog = ({
  open,
  onOpenChange,
  onCategoryCreated,
  onError
}) => {
  const t2 = useCategoriesTranslations2();
  const [isSubmitting, setIsSubmitting] = useState70(false);
  const handleSave = async (categoryData) => {
    try {
      setIsSubmitting(true);
      if (onCategoryCreated) {
        await onCategoryCreated(categoryData);
      }
      onOpenChange(false);
    } catch (error2) {
      console.error("\u274C AddCategoryDialog: Error occurred:", error2);
      if (onError) {
        onError(error2 instanceof Error ? error2.message : "Failed to create category");
      }
    } finally {
      setIsSubmitting(false);
    }
  };
  const handleCancel = () => {
    if (isSubmitting)
      return;
    onOpenChange(false);
  };
  return /* @__PURE__ */ jsx176(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs158(DialogContent, { className: "sm:max-w-[600px]", children: [
    /* @__PURE__ */ jsx176(DialogHeader, { children: /* @__PURE__ */ jsx176(DialogTitle, { children: t2("dialog.addNew") }) }),
    /* @__PURE__ */ jsx176(
      CategoryFormContent,
      {
        category: null,
        onSave: handleSave,
        onCancel: handleCancel,
        mode: "create",
        isSubmitting
      }
    )
  ] }) });
};

// src/components/features/Categories/components/CategoryActions.tsx
import { Fragment as Fragment39, jsx as jsx177, jsxs as jsxs159 } from "react/jsx-runtime";
var CategoryActions = ({
  onAddCategory,
  onImportCategories,
  onExportCategories,
  onBulkEdit,
  onCategoryCreated,
  onError
}) => {
  const [isAddDialogOpen, setIsAddDialogOpen] = useState71(false);
  const { canManageCategories } = useUserRole6();
  const allActions = [
    {
      id: "add-category",
      label: "Add Category",
      description: "Create a new product category",
      icon: "\u2795",
      variant: "default",
      onClick: () => setIsAddDialogOpen(true),
      roles: canManageCategories ? ["ALL"] : []
      // Use permission check
    },
    {
      id: "import-categories",
      label: "Import Categories",
      description: "Import from CSV/Excel",
      icon: "\u{1F4E5}",
      variant: "secondary",
      onClick: onImportCategories,
      roles: canManageCategories ? ["ALL"] : []
      // Use permission check
    },
    {
      id: "export-categories",
      label: "Export Categories",
      description: "Export to CSV/Excel",
      icon: "\u{1F4E4}",
      variant: "outline",
      onClick: onExportCategories,
      roles: ["ALL"]
      // All roles can export
    },
    {
      id: "bulk-edit",
      label: "Bulk Edit",
      description: "Edit multiple categories",
      icon: "\u270F\uFE0F",
      variant: "outline",
      onClick: onBulkEdit,
      roles: canManageCategories ? ["ALL"] : []
      // Use permission check
    }
  ];
  const actions = allActions.filter(
    (action) => !action.roles || action.roles.length > 0
  ).map(({ roles, ...action }) => action);
  return /* @__PURE__ */ jsxs159(Fragment39, { children: [
    /* @__PURE__ */ jsx177(Card, { children: /* @__PURE__ */ jsx177(CardContent, { className: "p-4", children: /* @__PURE__ */ jsx177("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3", children: actions.map((action) => /* @__PURE__ */ jsx177(
      Button2,
      {
        variant: action.variant,
        className: "h-auto p-3 flex flex-col items-start space-y-2 text-left",
        onClick: action.onClick,
        children: /* @__PURE__ */ jsxs159("div", { className: "flex items-center space-x-2 w-full", children: [
          /* @__PURE__ */ jsx177("span", { className: "text-lg", children: action.icon }),
          /* @__PURE__ */ jsxs159("div", { className: "flex-1", children: [
            /* @__PURE__ */ jsx177("div", { className: "font-medium text-sm", children: action.label }),
            /* @__PURE__ */ jsx177("div", { className: "text-xs opacity-80", children: action.description })
          ] })
        ] })
      },
      action.id
    )) }) }) }),
    /* @__PURE__ */ jsx177(
      AddCategoryDialog,
      {
        open: isAddDialogOpen,
        onOpenChange: setIsAddDialogOpen,
        onCategoryCreated,
        onError
      }
    )
  ] });
};

// src/components/features/Categories/components/CategoryCard.tsx
import { Edit as Edit13, Tag as Tag2, Calendar as Calendar19, Eye as Eye17 } from "lucide-react";
import { jsx as jsx178, jsxs as jsxs160 } from "react/jsx-runtime";
var CategoryCard = ({
  category,
  onView,
  onEdit
}) => {
  const handleView = () => {
    onView(category);
  };
  const handleEdit = () => {
    onEdit(category);
  };
  return /* @__PURE__ */ jsxs160(Card, { className: "h-full hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsx178(CardHeader, { className: "pb-3", children: /* @__PURE__ */ jsxs160("div", { className: "flex items-start justify-between", children: [
      /* @__PURE__ */ jsxs160("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx178("div", { className: "p-2 bg-primary/10 rounded-lg", children: /* @__PURE__ */ jsx178(Tag2, { className: "h-4 w-4 text-primary" }) }),
        /* @__PURE__ */ jsxs160("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ jsx178(CardTitle, { className: "text-lg font-semibold truncate", children: category.name }),
          /* @__PURE__ */ jsx178("div", { className: "flex items-center space-x-2 mt-1", children: /* @__PURE__ */ jsx178(
            Badge,
            {
              variant: category.isActive ? "default" : "secondary",
              className: "text-xs",
              children: category.isActive ? "Active" : "Inactive"
            }
          ) })
        ] })
      ] }),
      /* @__PURE__ */ jsxs160("div", { className: "flex items-center space-x-1", children: [
        /* @__PURE__ */ jsxs160(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: handleView,
            className: "h-8 px-3",
            children: [
              /* @__PURE__ */ jsx178(Eye17, { className: "h-4 w-4 mr-1" }),
              "View"
            ]
          }
        ),
        /* @__PURE__ */ jsxs160(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: handleEdit,
            className: "h-8 px-3 text-blue-600 hover:text-blue-700 hover:bg-blue-50 border-blue-200 hover:border-blue-300",
            children: [
              /* @__PURE__ */ jsx178(Edit13, { className: "h-4 w-4 mr-1" }),
              "Edit"
            ]
          }
        )
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs160(CardContent, { className: "pt-0", children: [
      category.description ? /* @__PURE__ */ jsx178("p", { className: "text-sm text-muted-foreground line-clamp-2 mb-3", children: category.description }) : /* @__PURE__ */ jsx178("p", { className: "text-sm text-muted-foreground mb-3 italic", children: "No description provided" }),
      /* @__PURE__ */ jsxs160("div", { className: "flex items-center justify-between text-xs text-muted-foreground", children: [
        /* @__PURE__ */ jsxs160("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsx178(Calendar19, { className: "h-3 w-3" }),
          /* @__PURE__ */ jsxs160("span", { children: [
            "Created ",
            new Date(category.createdAt).toLocaleDateString()
          ] })
        ] }),
        category.updatedAt && category.updatedAt !== category.createdAt && /* @__PURE__ */ jsxs160("span", { className: "text-xs", children: [
          "Updated ",
          new Date(category.updatedAt).toLocaleDateString()
        ] })
      ] })
    ] })
  ] });
};

// src/components/features/Categories/components/CategoryGrid.tsx
import { jsx as jsx179, jsxs as jsxs161 } from "react/jsx-runtime";
var CategoryGrid = ({
  categories,
  onViewCategory,
  onEditCategory,
  sortField,
  sortOrder,
  onSortChange
}) => {
  if (categories.length === 0) {
    return /* @__PURE__ */ jsx179("div", { className: "bg-white rounded-lg border p-6", children: /* @__PURE__ */ jsxs161("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsx179("div", { className: "mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4", children: /* @__PURE__ */ jsx179(
        "svg",
        {
          className: "w-12 h-12 text-muted-foreground",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          xmlns: "http://www.w3.org/2000/svg",
          children: /* @__PURE__ */ jsx179(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"
            }
          )
        }
      ) }),
      /* @__PURE__ */ jsx179("h3", { className: "text-lg font-medium text-muted-foreground mb-2", children: "No categories found" }),
      /* @__PURE__ */ jsx179("p", { className: "text-muted-foreground mb-4", children: "Get started by creating your first product category" })
    ] }) });
  }
  return /* @__PURE__ */ jsx179("div", { className: "bg-white rounded-lg border p-6", children: /* @__PURE__ */ jsx179("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6", children: categories.map((category) => /* @__PURE__ */ jsx179(
    CategoryCard,
    {
      category,
      onView: onViewCategory,
      onEdit: onEditCategory
    },
    category.id
  )) }) });
};

// src/components/features/Categories/components/CategoryTable.tsx
import React101 from "react";
import { useCategoriesTranslations as useCategoriesTranslations3, useCommonTranslations as useCommonTranslations21 } from "@rentalshop/hooks";
import { Eye as Eye18, Edit as Edit14, Trash2 as Trash211, MoreVertical as MoreVertical7, FolderOpen } from "lucide-react";
import { jsx as jsx180, jsxs as jsxs162 } from "react/jsx-runtime";
function CategoryTable({
  categories,
  onCategoryAction,
  sortBy = "name",
  sortOrder = "asc",
  onSort
}) {
  const [openDropdownId, setOpenDropdownId] = React101.useState(null);
  const t2 = useCategoriesTranslations3();
  const tc = useCommonTranslations21();
  if (categories.length === 0) {
    return /* @__PURE__ */ jsx180(Card, { className: "shadow-sm border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx180(CardContent, { className: "text-center py-12", children: /* @__PURE__ */ jsxs162("div", { className: "text-gray-500 dark:text-gray-400", children: [
      /* @__PURE__ */ jsx180(FolderOpen, { className: "w-16 h-16 mx-auto mb-4 text-gray-400" }),
      /* @__PURE__ */ jsx180("h3", { className: "text-lg font-medium mb-2", children: t2("messages.noCategories") }),
      /* @__PURE__ */ jsx180("p", { className: "text-sm", children: t2("messages.noCategoriesDescription") })
    ] }) }) });
  }
  const formatDate11 = (dateString) => {
    if (!dateString)
      return "N/A";
    const date2 = typeof dateString === "string" ? new Date(dateString) : dateString;
    return date2.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const getStatusBadge = (isActive) => {
    return isActive ? /* @__PURE__ */ jsx180(Badge, { className: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200", children: t2("status.active") }) : /* @__PURE__ */ jsx180(Badge, { className: "bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200", children: t2("status.inactive") });
  };
  const handleSort = (column) => {
    if (onSort) {
      onSort(column);
    }
  };
  return /* @__PURE__ */ jsx180(Card, { className: "shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col h-full", children: /* @__PURE__ */ jsx180("div", { className: "flex-1 overflow-auto", children: /* @__PURE__ */ jsxs162("table", { className: "w-full", children: [
    /* @__PURE__ */ jsx180("thead", { className: "bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10", children: /* @__PURE__ */ jsxs162("tr", { children: [
      /* @__PURE__ */ jsx180(
        "th",
        {
          onClick: () => handleSort("id"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs162("div", { className: "flex items-center gap-1", children: [
            "ID",
            sortBy === "id" && /* @__PURE__ */ jsx180("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx180(
        "th",
        {
          onClick: () => handleSort("name"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs162("div", { className: "flex items-center gap-1", children: [
            tc("labels.name"),
            sortBy === "name" && /* @__PURE__ */ jsx180("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx180("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: tc("labels.description") }),
      /* @__PURE__ */ jsx180(
        "th",
        {
          onClick: () => handleSort("createdAt"),
          className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",
          children: /* @__PURE__ */ jsxs162("div", { className: "flex items-center gap-1", children: [
            tc("labels.createdAt"),
            sortBy === "createdAt" && /* @__PURE__ */ jsx180("span", { className: "text-xs", children: sortOrder === "desc" ? "\u2193" : "\u2191" })
          ] })
        }
      ),
      /* @__PURE__ */ jsx180("th", { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: tc("labels.actions") })
    ] }) }),
    /* @__PURE__ */ jsx180("tbody", { className: "bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700", children: categories.map((category) => /* @__PURE__ */ jsxs162(
      "tr",
      {
        className: "hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",
        children: [
          /* @__PURE__ */ jsxs162("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100", children: [
            "#",
            category.id
          ] }),
          /* @__PURE__ */ jsx180("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx180("div", { className: "text-sm font-medium text-gray-900 dark:text-gray-100", children: category.name }) }),
          /* @__PURE__ */ jsx180("td", { className: "px-6 py-4 text-sm text-gray-500 dark:text-gray-400", children: /* @__PURE__ */ jsx180("div", { className: "max-w-xs truncate", children: category.description || "N/A" }) }),
          /* @__PURE__ */ jsx180("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: formatDate11(category.createdAt) }),
          /* @__PURE__ */ jsx180("td", { className: "px-6 py-4 whitespace-nowrap text-right text-sm font-medium", children: /* @__PURE__ */ jsxs162(DropdownMenu, { children: [
            /* @__PURE__ */ jsx180(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsx180(
              Button2,
              {
                variant: "ghost",
                size: "sm",
                className: "h-8 w-8 p-0",
                onClick: () => setOpenDropdownId(category.id),
                children: /* @__PURE__ */ jsx180(MoreVertical7, { className: "h-4 w-4" })
              }
            ) }),
            /* @__PURE__ */ jsxs162(
              DropdownMenuContent,
              {
                align: "end",
                open: openDropdownId === category.id,
                onOpenChange: (open) => setOpenDropdownId(open ? category.id : null),
                children: [
                  /* @__PURE__ */ jsxs162(
                    DropdownMenuItem,
                    {
                      onClick: () => {
                        onCategoryAction("view", category.id);
                        setOpenDropdownId(null);
                      },
                      className: "cursor-pointer",
                      children: [
                        /* @__PURE__ */ jsx180(Eye18, { className: "mr-2 h-4 w-4" }),
                        t2("actions.viewDetails")
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsxs162(
                    DropdownMenuItem,
                    {
                      onClick: () => {
                        onCategoryAction("edit", category.id);
                        setOpenDropdownId(null);
                      },
                      className: "cursor-pointer",
                      children: [
                        /* @__PURE__ */ jsx180(Edit14, { className: "mr-2 h-4 w-4" }),
                        t2("actions.edit")
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsx180(DropdownMenuSeparator, {}),
                  /* @__PURE__ */ jsxs162(
                    DropdownMenuItem,
                    {
                      onClick: () => {
                        onCategoryAction("delete", category.id);
                        setOpenDropdownId(null);
                      },
                      className: "cursor-pointer text-red-600 dark:text-red-400",
                      children: [
                        /* @__PURE__ */ jsx180(Trash211, { className: "mr-2 h-4 w-4" }),
                        t2("actions.delete")
                      ]
                    }
                  )
                ]
              }
            )
          ] }) })
        ]
      },
      category.id
    )) })
  ] }) }) });
}

// src/components/features/Categories/components/CategoryForm.tsx
import { useCategoriesTranslations as useCategoriesTranslations4 } from "@rentalshop/hooks";
import { jsx as jsx181, jsxs as jsxs163 } from "react/jsx-runtime";
var CategoryForm = ({
  category,
  onSave,
  onCancel,
  mode
}) => {
  const t2 = useCategoriesTranslations4();
  return /* @__PURE__ */ jsx181(Dialog, { open: true, onOpenChange: onCancel, children: /* @__PURE__ */ jsxs163(DialogContent, { className: "sm:max-w-[600px]", children: [
    /* @__PURE__ */ jsx181(DialogHeader, { children: /* @__PURE__ */ jsx181(DialogTitle, { children: mode === "create" ? t2("dialog.addNew") : t2("dialog.edit") }) }),
    /* @__PURE__ */ jsx181(
      CategoryFormContent,
      {
        category,
        onSave,
        onCancel,
        mode
      }
    )
  ] }) });
};

// src/components/features/Categories/components/CategoryView.tsx
import { useState as useState72 } from "react";
import { useCategoriesTranslations as useCategoriesTranslations5, useCommonTranslations as useCommonTranslations22 } from "@rentalshop/hooks";
import { formatDateWithLocale } from "@rentalshop/utils";
import { Fragment as Fragment40, jsx as jsx182, jsxs as jsxs164 } from "react/jsx-runtime";
var CategoryView = ({
  category,
  onClose,
  onEdit,
  onDelete
}) => {
  const t2 = useCategoriesTranslations5();
  const tc = useCommonTranslations22();
  const locale2 = Z();
  const [showDeleteConfirm, setShowDeleteConfirm] = useState72(false);
  if (!category)
    return null;
  const handleEdit = () => {
    onEdit(category);
    onClose();
  };
  const handleDelete = () => {
    setShowDeleteConfirm(true);
  };
  const handleConfirmDelete = () => {
    onDelete(category);
    setShowDeleteConfirm(false);
    onClose();
  };
  const handleCancelDelete = () => {
    setShowDeleteConfirm(false);
  };
  return /* @__PURE__ */ jsxs164(Fragment40, { children: [
    /* @__PURE__ */ jsx182(Dialog, { open: !!category, onOpenChange: onClose, children: /* @__PURE__ */ jsxs164(DialogContent, { className: "sm:max-w-[600px]", children: [
      /* @__PURE__ */ jsx182(DialogHeader, { children: /* @__PURE__ */ jsxs164("div", { children: [
        /* @__PURE__ */ jsx182(DialogTitle, { className: "text-xl font-semibold", children: t2("dialog.viewDetails") }),
        /* @__PURE__ */ jsx182(DialogDescription, { className: "text-sm text-gray-600 mt-1", children: t2("dialog.viewDescription") })
      ] }) }),
      category && /* @__PURE__ */ jsxs164("div", { className: "mt-6", children: [
        /* @__PURE__ */ jsxs164("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs164("div", { children: [
            /* @__PURE__ */ jsx182(Label2, { className: "text-sm font-medium text-gray-700", children: t2("fields.name") }),
            /* @__PURE__ */ jsx182("div", { className: "mt-1 p-3 bg-gray-50 rounded-md border", children: /* @__PURE__ */ jsx182("p", { className: "text-gray-900 font-medium", children: category.name }) })
          ] }),
          category.description && /* @__PURE__ */ jsxs164("div", { className: "md:col-span-2", children: [
            /* @__PURE__ */ jsx182(Label2, { className: "text-sm font-medium text-gray-700", children: t2("fields.description") }),
            /* @__PURE__ */ jsx182("div", { className: "mt-1 p-3 bg-gray-50 rounded-md border", children: /* @__PURE__ */ jsx182("p", { className: "text-gray-900 whitespace-pre-wrap", children: category.description }) })
          ] }),
          /* @__PURE__ */ jsxs164("div", { children: [
            /* @__PURE__ */ jsx182(Label2, { className: "text-sm font-medium text-gray-700", children: tc("labels.createdAt") }),
            /* @__PURE__ */ jsx182("div", { className: "mt-1 p-3 bg-gray-50 rounded-md border", children: /* @__PURE__ */ jsx182("p", { className: "text-gray-900", children: category.createdAt ? formatDateWithLocale(category.createdAt, locale2) : tc("labels.unknown") }) })
          ] }),
          /* @__PURE__ */ jsxs164("div", { children: [
            /* @__PURE__ */ jsx182(Label2, { className: "text-sm font-medium text-gray-700", children: tc("labels.updatedAt") }),
            /* @__PURE__ */ jsx182("div", { className: "mt-1 p-3 bg-gray-50 rounded-md border", children: /* @__PURE__ */ jsx182("p", { className: "text-gray-900", children: category.updatedAt && category.updatedAt !== category.createdAt ? formatDateWithLocale(category.updatedAt, locale2) : t2("dialog.neverUpdated") }) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs164("div", { className: "flex items-center justify-end gap-3 pt-4", children: [
          /* @__PURE__ */ jsx182(
            Button2,
            {
              type: "button",
              variant: "outline",
              onClick: onClose,
              children: tc("buttons.close")
            }
          ),
          /* @__PURE__ */ jsx182(
            Button2,
            {
              type: "button",
              onClick: handleEdit,
              children: t2("actions.edit")
            }
          )
        ] })
      ] })
    ] }) }),
    /* @__PURE__ */ jsx182(Dialog, { open: showDeleteConfirm, onOpenChange: setShowDeleteConfirm, children: /* @__PURE__ */ jsxs164(DialogContent, { className: "sm:max-w-[600px]", children: [
      /* @__PURE__ */ jsx182(DialogHeader, { children: /* @__PURE__ */ jsx182(DialogTitle, { children: t2("dialog.deleteTitle") }) }),
      /* @__PURE__ */ jsxs164("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs164("p", { className: "text-gray-600", children: [
          t2("dialog.deleteConfirmation"),
          " ",
          /* @__PURE__ */ jsxs164("strong", { children: [
            '"',
            category?.name,
            '"'
          ] }),
          "?"
        ] }),
        /* @__PURE__ */ jsx182("p", { className: "text-sm text-gray-500", children: t2("dialog.deleteWarning") }),
        /* @__PURE__ */ jsxs164("div", { className: "flex items-center justify-end gap-3 pt-4", children: [
          /* @__PURE__ */ jsx182(
            Button2,
            {
              type: "button",
              variant: "outline",
              onClick: handleCancelDelete,
              children: tc("buttons.cancel")
            }
          ),
          /* @__PURE__ */ jsx182(
            Button2,
            {
              type: "button",
              variant: "destructive",
              onClick: handleConfirmDelete,
              children: t2("actions.delete")
            }
          )
        ] })
      ] })
    ] }) })
  ] });
};

// src/components/features/Categories/components/CategoryFilters.tsx
import { Input as Input23, Button as Button49 } from "@rentalshop/ui";
import { Fragment as Fragment41, jsx as jsx183, jsxs as jsxs165 } from "react/jsx-runtime";
var CategoryFilters = ({
  filters,
  onSearchChange,
  onClearFilters
}) => {
  return /* @__PURE__ */ jsxs165(Fragment41, { children: [
    /* @__PURE__ */ jsx183("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs165("div", { className: "relative", children: [
      /* @__PURE__ */ jsx183(
        Input23,
        {
          type: "text",
          placeholder: "Search categories...",
          value: filters.search || "",
          onChange: (e2) => onSearchChange(e2.target.value),
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx183(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx183(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    filters.search && /* @__PURE__ */ jsx183(
      Button49,
      {
        onClick: onClearFilters,
        variant: "outline",
        size: "sm",
        className: "h-10",
        children: "Clear"
      }
    )
  ] });
};

// src/components/features/Categories/components/CategorySearch.tsx
import { Input as Input24, Button as Button50 } from "@rentalshop/ui";
import { Fragment as Fragment42, jsx as jsx184, jsxs as jsxs166 } from "react/jsx-runtime";
function CategorySearch({ value, onChange, onClear }) {
  return /* @__PURE__ */ jsxs166(Fragment42, { children: [
    /* @__PURE__ */ jsx184("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs166("div", { className: "relative", children: [
      /* @__PURE__ */ jsx184(
        Input24,
        {
          type: "text",
          placeholder: "Search categories...",
          value,
          onChange: (e2) => onChange(e2.target.value),
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx184(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx184(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    value && /* @__PURE__ */ jsx184(
      Button50,
      {
        onClick: onClear,
        variant: "outline",
        size: "sm",
        className: "h-10",
        children: "Clear"
      }
    )
  ] });
}

// src/components/features/Categories/components/CategoriesLoading.tsx
import { jsx as jsx185, jsxs as jsxs167 } from "react/jsx-runtime";
function CategoriesLoading() {
  return /* @__PURE__ */ jsxs167("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx185(StatsSkeleton, {}),
    /* @__PURE__ */ jsx185(SearchSkeleton, {}),
    /* @__PURE__ */ jsx185(TableSkeleton, { rows: 8, columns: 4 }),
    /* @__PURE__ */ jsx185(PaginationSkeleton, {})
  ] });
}
function CategoryDetailLoading() {
  return /* @__PURE__ */ jsx185("div", { className: "space-y-6", children: /* @__PURE__ */ jsxs167("div", { className: "animate-pulse", children: [
    /* @__PURE__ */ jsx185("div", { className: "h-8 bg-gray-200 rounded w-1/4 mb-4" }),
    /* @__PURE__ */ jsx185("div", { className: "h-4 bg-gray-200 rounded w-1/2 mb-2" }),
    /* @__PURE__ */ jsx185("div", { className: "h-4 bg-gray-200 rounded w-3/4 mb-2" }),
    /* @__PURE__ */ jsx185("div", { className: "h-4 bg-gray-200 rounded w-2/3" })
  ] }) });
}

// src/components/features/Categories/Categories.tsx
import { FolderOpen as FolderOpen2 } from "lucide-react";
import { jsx as jsx186, jsxs as jsxs168 } from "react/jsx-runtime";
var Categories = ({
  data,
  filters = {},
  onSearchChange = () => {
  },
  onCategoryAction = () => {
  },
  onPageChange = () => {
  },
  onSort = () => {
  },
  currentUser,
  className = ""
}) => {
  const categories = data?.categories || [];
  const totalCategories = data?.total || 0;
  const currentPage = data?.currentPage || 1;
  const totalPages = data?.totalPages || 1;
  const limit = data?.limit || 25;
  const memoizedOnSearchChange = React103.useCallback(onSearchChange, [onSearchChange]);
  const memoizedOnCategoryAction = React103.useCallback(onCategoryAction, [onCategoryAction]);
  const memoizedOnPageChange = React103.useCallback(onPageChange, [onPageChange]);
  const memoizedOnSort = React103.useCallback(onSort, [onSort]);
  return /* @__PURE__ */ jsxs168("div", { className: `flex flex-col h-full ${className}`, children: [
    /* @__PURE__ */ jsx186("div", { className: "flex-shrink-0 mb-4", children: /* @__PURE__ */ jsx186(Card48, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx186(CardContent47, { className: "pt-4 pb-4", children: /* @__PURE__ */ jsx186("div", { className: "flex flex-wrap items-center gap-3", children: /* @__PURE__ */ jsx186(
      CategorySearch,
      {
        value: filters.q || "",
        onChange: memoizedOnSearchChange,
        onClear: () => memoizedOnSearchChange("")
      }
    ) }) }) }) }),
    /* @__PURE__ */ jsx186("div", { className: "flex-1 min-h-0", children: categories.length > 0 ? /* @__PURE__ */ jsx186(
      CategoryTable,
      {
        categories,
        onCategoryAction: memoizedOnCategoryAction,
        sortBy: filters.sortBy || "name",
        sortOrder: filters.sortOrder || "asc",
        onSort: memoizedOnSort
      }
    ) : /* @__PURE__ */ jsx186(
      EmptyState6,
      {
        icon: FolderOpen2,
        title: "No categories found",
        description: filters.q ? "Try adjusting your search" : "Get started by adding your first category"
      }
    ) }),
    categories.length > 0 && totalCategories > limit && /* @__PURE__ */ jsx186("div", { className: "flex-shrink-0 py-4", children: /* @__PURE__ */ jsx186(
      Pagination11,
      {
        currentPage,
        totalPages,
        total: totalCategories,
        limit,
        onPageChange: memoizedOnPageChange,
        itemName: "categories"
      }
    ) })
  ] });
};

// src/components/features/Plans/components/PlanDialog.tsx
import {
  Dialog as Dialog14,
  DialogContent as DialogContent14,
  DialogHeader as DialogHeader14,
  DialogTitle as DialogTitle14,
  DialogDescription as DialogDescription11
} from "@rentalshop/ui";
import { jsx as jsx187, jsxs as jsxs169 } from "react/jsx-runtime";
var PlanDialog = ({
  open,
  onOpenChange,
  mode,
  plan,
  onSubmit,
  loading = false
}) => {
  const getDialogTitle = () => {
    switch (mode) {
      case "create":
        return "Create New Plan";
      case "edit":
        return "Edit Plan";
      case "view":
        return "Plan Details";
      default:
        return "Plan";
    }
  };
  const getDialogDescription = () => {
    switch (mode) {
      case "create":
        return "Create a new subscription plan for merchants";
      case "edit":
        return "Update the plan information and settings";
      case "view":
        return "View plan details and configuration";
      default:
        return "";
    }
  };
  const handleSubmit = async (data) => {
    try {
      await onSubmit(data);
      onOpenChange(false);
    } catch (error2) {
      console.error("Error submitting plan:", error2);
    }
  };
  const handleCancel = () => {
    onOpenChange(false);
  };
  return /* @__PURE__ */ jsx187(Dialog14, { open, onOpenChange, children: /* @__PURE__ */ jsxs169(DialogContent14, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsxs169(DialogHeader14, { children: [
      /* @__PURE__ */ jsx187(DialogTitle14, { children: getDialogTitle() }),
      /* @__PURE__ */ jsx187(DialogDescription11, { children: getDialogDescription() })
    ] }),
    /* @__PURE__ */ jsx187(
      PlanForm,
      {
        initialData: plan,
        onSubmit: handleSubmit,
        onCancel: handleCancel,
        loading,
        mode,
        hideHeader: true,
        title: getDialogTitle(),
        submitText: mode === "create" ? "Create Plan" : mode === "edit" ? "Update Plan" : "Save Changes"
      }
    )
  ] }) });
};

// src/components/features/Plans/components/PlanActions.tsx
import {
  Button as Button51,
  DropdownMenu as DropdownMenu3,
  DropdownMenuContent as DropdownMenuContent3,
  DropdownMenuItem as DropdownMenuItem3,
  DropdownMenuTrigger as DropdownMenuTrigger3,
  DropdownMenuSeparator as DropdownMenuSeparator3
} from "@rentalshop/ui";
import {
  Eye as Eye19,
  Edit as Edit15,
  Trash2 as Trash212,
  Settings as Settings3,
  MoreHorizontal as MoreHorizontal2,
  Copy,
  Archive,
  Star as Star3
} from "lucide-react";
import { jsx as jsx188, jsxs as jsxs170 } from "react/jsx-runtime";
var PlanActions = ({
  plan,
  onView,
  onEdit,
  onDelete,
  onToggleStatus,
  onTogglePopular,
  onDuplicate,
  onArchive
}) => {
  return /* @__PURE__ */ jsxs170("div", { className: "flex items-center justify-end gap-2", children: [
    /* @__PURE__ */ jsx188(
      Button51,
      {
        variant: "ghost",
        size: "sm",
        onClick: () => onView(plan),
        className: "h-8 w-8 p-0",
        title: "View plan details",
        children: /* @__PURE__ */ jsx188(Eye19, { className: "w-4 h-4" })
      }
    ),
    /* @__PURE__ */ jsx188(
      Button51,
      {
        variant: "ghost",
        size: "sm",
        onClick: () => onEdit(plan),
        className: "h-8 w-8 p-0",
        title: "Edit plan",
        children: /* @__PURE__ */ jsx188(Edit15, { className: "w-4 h-4" })
      }
    ),
    /* @__PURE__ */ jsxs170(DropdownMenu3, { children: [
      /* @__PURE__ */ jsx188(DropdownMenuTrigger3, { asChild: true, children: /* @__PURE__ */ jsx188(
        Button51,
        {
          variant: "ghost",
          size: "sm",
          className: "h-8 w-8 p-0",
          title: "More actions",
          children: /* @__PURE__ */ jsx188(MoreHorizontal2, { className: "w-4 h-4" })
        }
      ) }),
      /* @__PURE__ */ jsxs170(DropdownMenuContent3, { align: "end", className: "w-48", children: [
        /* @__PURE__ */ jsxs170(DropdownMenuItem3, { onClick: () => onToggleStatus(plan), children: [
          /* @__PURE__ */ jsx188(Settings3, { className: "w-4 h-4 mr-2" }),
          plan.isActive ? "Deactivate" : "Activate"
        ] }),
        /* @__PURE__ */ jsxs170(DropdownMenuItem3, { onClick: () => onTogglePopular(plan), children: [
          /* @__PURE__ */ jsx188(Star3, { className: "w-4 h-4 mr-2" }),
          plan.isPopular ? "Remove Popular" : "Mark Popular"
        ] }),
        onDuplicate && /* @__PURE__ */ jsxs170(DropdownMenuItem3, { onClick: () => onDuplicate(plan), children: [
          /* @__PURE__ */ jsx188(Copy, { className: "w-4 h-4 mr-2" }),
          "Duplicate Plan"
        ] }),
        /* @__PURE__ */ jsx188(DropdownMenuSeparator3, {}),
        onArchive && /* @__PURE__ */ jsxs170(DropdownMenuItem3, { onClick: () => onArchive(plan), children: [
          /* @__PURE__ */ jsx188(Archive, { className: "w-4 h-4 mr-2" }),
          "Archive Plan"
        ] }),
        /* @__PURE__ */ jsxs170(
          DropdownMenuItem3,
          {
            onClick: () => onDelete(plan),
            className: "text-red-600 focus:text-red-600",
            children: [
              /* @__PURE__ */ jsx188(Trash212, { className: "w-4 h-4 mr-2" }),
              "Delete Plan"
            ]
          }
        )
      ] })
    ] })
  ] });
};

// src/components/features/Plans/components/PlanSelection.tsx
import { useState as useState73, useEffect as useEffect39 } from "react";
import {
  Card as Card49,
  CardHeader as CardHeader34,
  CardTitle as CardTitle34,
  CardContent as CardContent48,
  Button as Button52,
  Badge as Badge22,
  RadioGroup as RadioGroup2,
  RadioGroupItem as RadioGroupItem2,
  Label as Label11
} from "@rentalshop/ui";
import {
  CheckCircle as CheckCircle21,
  Star as Star4,
  Package as Package15,
  Users as Users10,
  CreditCard as CreditCard14
} from "lucide-react";
import { BILLING_CYCLES as BILLING_CYCLES3 } from "@rentalshop/constants";
import {
  getBillingCycleDiscount as getBillingCycleDiscount2,
  formatBillingCycle as formatBillingCycle2
} from "@rentalshop/utils";
import { jsx as jsx189, jsxs as jsxs171 } from "react/jsx-runtime";
var PlanSelection = ({
  plans,
  selectedPlanId,
  selectedBillingCycle = "monthly",
  onPlanSelect,
  loading = false,
  disabled = false
}) => {
  const [selectedPlan, setSelectedPlan] = useState73(selectedPlanId);
  const [selectedCycle, setSelectedCycle] = useState73(selectedBillingCycle);
  useEffect39(() => {
    if (selectedPlanId) {
      setSelectedPlan(selectedPlanId);
    }
  }, [selectedPlanId]);
  useEffect39(() => {
    if (selectedBillingCycle) {
      setSelectedCycle(selectedBillingCycle);
    }
  }, [selectedBillingCycle]);
  const handlePlanSelect = (planId) => {
    setSelectedPlan(planId);
    onPlanSelect(planId, selectedCycle);
  };
  const handleBillingCycleSelect = (cycle) => {
    setSelectedCycle(cycle);
    if (selectedPlan) {
      onPlanSelect(selectedPlan, cycle);
    }
  };
  const formatCurrency22 = (price, currency) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: currency || "USD"
    }).format(price);
  };
  const getLimitText = (limit) => {
    return limit === -1 ? "Unlimited" : limit.toString();
  };
  const getPlanCardVariant = (plan) => {
    if (selectedPlan === plan.id)
      return "default";
    if (plan.isPopular)
      return "bordered";
    return "bordered";
  };
  const getBillingCyclePrice = (plan, cycle) => {
    const cycleOption = BILLING_CYCLES3.find((option) => option.value === cycle);
    if (!cycleOption)
      return plan.price;
    const totalPrice = plan.price * cycleOption.months;
    const discount = getBillingCycleDiscount2(cycle);
    const discountAmount = totalPrice * (discount / 100);
    return totalPrice - discountAmount;
  };
  const getBillingCycleMonthlyPrice = (plan, cycle) => {
    const totalPrice = getBillingCyclePrice(plan, cycle);
    const cycleOption = BILLING_CYCLES3.find((option) => option.value === cycle);
    return cycleOption ? totalPrice / cycleOption.months : plan.price;
  };
  if (loading) {
    return /* @__PURE__ */ jsx189("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs171("div", { className: "animate-pulse", children: [
      /* @__PURE__ */ jsx189("div", { className: "h-8 bg-bg-tertiary rounded w-1/4 mb-4" }),
      /* @__PURE__ */ jsx189("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [...Array(3)].map((_, i) => /* @__PURE__ */ jsx189("div", { className: "h-96 bg-bg-tertiary rounded" }, i)) })
    ] }) });
  }
  return /* @__PURE__ */ jsxs171("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs171("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs171("div", { children: [
        /* @__PURE__ */ jsx189("h3", { className: "text-lg font-medium text-text-primary mb-2", children: "Select Billing Cycle" }),
        /* @__PURE__ */ jsx189("p", { className: "text-text-secondary", children: "Choose how often you'd like to be billed" })
      ] }),
      /* @__PURE__ */ jsx189(
        RadioGroup2,
        {
          value: selectedCycle,
          onValueChange: handleBillingCycleSelect,
          className: "grid grid-cols-1 md:grid-cols-4 gap-4",
          children: BILLING_CYCLES3.map((cycle) => /* @__PURE__ */ jsxs171("div", { children: [
            /* @__PURE__ */ jsx189(
              RadioGroupItem2,
              {
                value: cycle.value,
                id: cycle.value,
                className: "peer sr-only",
                disabled
              }
            ),
            /* @__PURE__ */ jsx189(
              Label11,
              {
                htmlFor: cycle.value,
                className: "flex flex-col items-center justify-between rounded-md border-2 border-border bg-bg-card p-4 hover:bg-bg-secondary cursor-pointer peer-data-[state=checked]:border-action-primary peer-data-[state=checked]:bg-action-primary/5 [&:has([data-state=checked])]:border-action-primary",
                children: /* @__PURE__ */ jsxs171("div", { className: "text-center", children: [
                  /* @__PURE__ */ jsx189("div", { className: "font-medium text-text-primary", children: cycle.label }),
                  /* @__PURE__ */ jsx189("div", { className: "text-sm text-text-secondary", children: cycle.description }),
                  getBillingCycleDiscount2(cycle.value) > 0 && /* @__PURE__ */ jsxs171(Badge22, { variant: "default", className: "mt-2", children: [
                    getBillingCycleDiscount2(cycle.value),
                    "% OFF"
                  ] })
                ] })
              }
            )
          ] }, cycle.value))
        }
      )
    ] }),
    /* @__PURE__ */ jsxs171("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs171("div", { children: [
        /* @__PURE__ */ jsx189("h3", { className: "text-lg font-medium text-text-primary mb-2", children: "Select Your Plan" }),
        /* @__PURE__ */ jsx189("p", { className: "text-text-secondary", children: "Choose the plan that best fits your business needs" })
      ] }),
      /* @__PURE__ */ jsx189("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: plans.map((plan) => /* @__PURE__ */ jsxs171(
        Card49,
        {
          className: `cursor-pointer transition-all duration-200 hover:shadow-lg ${selectedPlan === plan.id ? "ring-2 ring-action-primary" : ""} ${plan.isPopular ? "ring-2 ring-action-primary" : ""}`,
          onClick: () => !disabled && handlePlanSelect(plan.id),
          children: [
            /* @__PURE__ */ jsx189(CardHeader34, { children: /* @__PURE__ */ jsxs171("div", { className: "text-center", children: [
              plan.isPopular && /* @__PURE__ */ jsxs171("div", { className: "inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-action-primary text-white mb-3", children: [
                /* @__PURE__ */ jsx189(Star4, { className: "w-3 h-3 mr-1" }),
                "Most Popular"
              ] }),
              /* @__PURE__ */ jsx189(CardTitle34, { children: plan.name }),
              /* @__PURE__ */ jsx189("p", { className: "text-text-secondary text-sm mt-2", children: plan.description })
            ] }) }),
            /* @__PURE__ */ jsxs171(CardContent48, { children: [
              /* @__PURE__ */ jsxs171("div", { className: "text-center mb-6", children: [
                /* @__PURE__ */ jsx189("div", { className: "text-4xl font-bold text-text-primary", children: formatCurrency22(getBillingCyclePrice(plan, selectedCycle), plan.currency) }),
                /* @__PURE__ */ jsxs171("div", { className: "text-lg text-text-secondary", children: [
                  "per ",
                  formatBillingCycle2(selectedCycle).toLowerCase()
                ] }),
                /* @__PURE__ */ jsxs171("div", { className: "text-sm text-text-tertiary mt-1", children: [
                  formatCurrency22(getBillingCycleMonthlyPrice(plan, selectedCycle), plan.currency),
                  "/month"
                ] }),
                getBillingCycleDiscount2(selectedCycle) > 0 && /* @__PURE__ */ jsxs171("div", { className: "text-sm text-action-success mt-1", children: [
                  getBillingCycleDiscount2(selectedCycle),
                  "% discount applied"
                ] }),
                plan.trialDays > 0 && /* @__PURE__ */ jsxs171("div", { className: "text-sm text-action-primary mt-1", children: [
                  plan.trialDays,
                  "-day free trial"
                ] })
              ] }),
              /* @__PURE__ */ jsxs171("div", { className: "space-y-3 mb-6", children: [
                /* @__PURE__ */ jsxs171("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsxs171("span", { className: "text-text-secondary flex items-center gap-2", children: [
                    /* @__PURE__ */ jsx189(Package15, { className: "w-4 h-4" }),
                    "Outlets"
                  ] }),
                  /* @__PURE__ */ jsx189("span", { className: "font-medium", children: getLimitText(plan.limits.outlets) })
                ] }),
                /* @__PURE__ */ jsxs171("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsxs171("span", { className: "text-text-secondary flex items-center gap-2", children: [
                    /* @__PURE__ */ jsx189(Users10, { className: "w-4 h-4" }),
                    "Users"
                  ] }),
                  /* @__PURE__ */ jsx189("span", { className: "font-medium", children: getLimitText(plan.limits.users) })
                ] }),
                /* @__PURE__ */ jsxs171("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsxs171("span", { className: "text-text-secondary flex items-center gap-2", children: [
                    /* @__PURE__ */ jsx189(CreditCard14, { className: "w-4 h-4" }),
                    "Products"
                  ] }),
                  /* @__PURE__ */ jsx189("span", { className: "font-medium", children: getLimitText(plan.limits.products) })
                ] }),
                /* @__PURE__ */ jsxs171("div", { className: "flex items-center justify-between text-sm", children: [
                  /* @__PURE__ */ jsxs171("span", { className: "text-text-secondary flex items-center gap-2", children: [
                    /* @__PURE__ */ jsx189(Users10, { className: "w-4 h-4" }),
                    "Customers"
                  ] }),
                  /* @__PURE__ */ jsx189("span", { className: "font-medium", children: getLimitText(plan.limits.customers) })
                ] })
              ] }),
              /* @__PURE__ */ jsxs171("div", { className: "space-y-2 mb-6", children: [
                plan.features.slice(0, 4).map((feature, index) => /* @__PURE__ */ jsxs171("div", { className: "flex items-center gap-2 text-sm", children: [
                  /* @__PURE__ */ jsx189(CheckCircle21, { className: "w-4 h-4 text-action-success flex-shrink-0" }),
                  /* @__PURE__ */ jsx189("span", { className: "text-text-secondary", children: feature })
                ] }, index)),
                plan.features.length > 4 && /* @__PURE__ */ jsxs171("div", { className: "text-sm text-text-tertiary", children: [
                  "+",
                  plan.features.length - 4,
                  " more features"
                ] })
              ] }),
              /* @__PURE__ */ jsx189("div", { className: "text-center", children: selectedPlan === plan.id ? /* @__PURE__ */ jsxs171("div", { className: "inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-action-success text-white", children: [
                /* @__PURE__ */ jsx189(CheckCircle21, { className: "w-3 h-3 mr-1" }),
                "Selected"
              ] }) : /* @__PURE__ */ jsx189(
                Button52,
                {
                  variant: "outline",
                  className: "w-full",
                  disabled,
                  children: "Select Plan"
                }
              ) })
            ] })
          ]
        },
        plan.id
      )) })
    ] })
  ] });
};

// src/components/features/Plans/components/PlanCard.tsx
import {
  Card as Card50,
  CardHeader as CardHeader35,
  CardTitle as CardTitle35,
  CardContent as CardContent49,
  Badge as Badge23,
  Button as Button53
} from "@rentalshop/ui";
import {
  Package as Package16,
  Users as Users11,
  CreditCard as CreditCard15,
  Star as Star5,
  Eye as Eye20,
  Edit as Edit16,
  Settings as Settings4
} from "lucide-react";
import { jsx as jsx190, jsxs as jsxs172 } from "react/jsx-runtime";
var PlanCard = ({
  plan,
  onView,
  onEdit,
  onToggleStatus,
  showActions = true,
  variant = "default"
}) => {
  const formatCurrency22 = (price, currency) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: currency || "USD"
    }).format(price);
  };
  const getBillingCycleText = (cycle) => {
    return cycle === "monthly" ? "/month" : "/year";
  };
  const getLimitText = (limit) => {
    return limit === -1 ? "Unlimited" : limit.toString();
  };
  const formatDate11 = (date2) => {
    const dateObj = typeof date2 === "string" ? new Date(date2) : date2;
    return dateObj.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  if (variant === "compact") {
    return /* @__PURE__ */ jsx190(Card50, { className: "hover:shadow-md transition-shadow", children: /* @__PURE__ */ jsx190(CardContent49, { className: "p-4", children: /* @__PURE__ */ jsxs172("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsx190("div", { className: "flex items-center gap-3", children: /* @__PURE__ */ jsxs172("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx190(Package16, { className: "w-4 h-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx190("span", { className: "font-medium text-text-primary", children: plan.name }),
        plan.isPopular && /* @__PURE__ */ jsxs172(Badge23, { variant: "default", className: "text-xs", children: [
          /* @__PURE__ */ jsx190(Star5, { className: "w-3 h-3 mr-1" }),
          "Popular"
        ] })
      ] }) }),
      /* @__PURE__ */ jsx190("div", { className: "text-right", children: /* @__PURE__ */ jsxs172("div", { className: "font-medium text-text-primary", children: [
        formatCurrency22(plan.price, plan.currency),
        /* @__PURE__ */ jsx190("span", { className: "text-sm text-text-secondary font-normal", children: getBillingCycleText(plan.billingCycle) })
      ] }) })
    ] }) }) });
  }
  if (variant === "detailed") {
    return /* @__PURE__ */ jsxs172(Card50, { className: "hover:shadow-md transition-shadow", children: [
      /* @__PURE__ */ jsx190(CardHeader35, { children: /* @__PURE__ */ jsxs172("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs172(CardTitle35, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx190(Package16, { className: "w-5 h-5" }),
          plan.name,
          plan.isPopular && /* @__PURE__ */ jsxs172(Badge23, { variant: "default", className: "text-xs", children: [
            /* @__PURE__ */ jsx190(Star5, { className: "w-3 h-3 mr-1" }),
            "Popular"
          ] })
        ] }),
        /* @__PURE__ */ jsxs172("div", { className: "text-right", children: [
          /* @__PURE__ */ jsxs172("div", { className: "text-2xl font-bold text-action-primary", children: [
            formatCurrency22(plan.price, plan.currency),
            /* @__PURE__ */ jsx190("span", { className: "text-sm text-text-secondary font-normal", children: getBillingCycleText(plan.billingCycle) })
          ] }),
          plan.trialDays > 0 && /* @__PURE__ */ jsxs172("div", { className: "text-xs text-action-primary", children: [
            plan.trialDays,
            "-day trial"
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs172(CardContent49, { className: "space-y-4", children: [
        /* @__PURE__ */ jsx190("p", { className: "text-text-secondary", children: plan.description }),
        /* @__PURE__ */ jsxs172("div", { className: "grid grid-cols-2 gap-4 text-sm", children: [
          /* @__PURE__ */ jsxs172("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx190(Package16, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsx190("span", { className: "text-text-secondary", children: "Outlets:" }),
            /* @__PURE__ */ jsx190("span", { className: "font-medium", children: getLimitText(plan.limits.outlets) })
          ] }),
          /* @__PURE__ */ jsxs172("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx190(Users11, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsx190("span", { className: "text-text-secondary", children: "Users:" }),
            /* @__PURE__ */ jsx190("span", { className: "font-medium", children: getLimitText(plan.limits.users) })
          ] }),
          /* @__PURE__ */ jsxs172("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx190(CreditCard15, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsx190("span", { className: "text-text-secondary", children: "Products:" }),
            /* @__PURE__ */ jsx190("span", { className: "font-medium", children: getLimitText(plan.limits.products) })
          ] }),
          /* @__PURE__ */ jsxs172("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx190(Users11, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsx190("span", { className: "text-text-secondary", children: "Customers:" }),
            /* @__PURE__ */ jsx190("span", { className: "font-medium", children: getLimitText(plan.limits.customers) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs172("div", { className: "text-sm text-text-secondary", children: [
          /* @__PURE__ */ jsxs172("div", { className: "font-medium mb-1", children: [
            "Features (",
            plan.features.length,
            "):"
          ] }),
          /* @__PURE__ */ jsxs172("div", { className: "text-xs text-text-tertiary", children: [
            plan.features.slice(0, 3).join(", "),
            plan.features.length > 3 && "..."
          ] })
        ] }),
        /* @__PURE__ */ jsxs172("div", { className: "flex items-center justify-between text-xs text-text-tertiary", children: [
          /* @__PURE__ */ jsxs172("span", { children: [
            "Created: ",
            formatDate11(plan.createdAt)
          ] }),
          /* @__PURE__ */ jsxs172("span", { children: [
            "Sort Order: ",
            plan.sortOrder
          ] })
        ] }),
        showActions && /* @__PURE__ */ jsxs172("div", { className: "flex items-center justify-end gap-2 pt-2 border-t border-border", children: [
          onView && /* @__PURE__ */ jsx190(
            Button53,
            {
              variant: "ghost",
              size: "sm",
              onClick: () => onView(plan),
              className: "h-8 w-8 p-0",
              children: /* @__PURE__ */ jsx190(Eye20, { className: "w-4 h-4" })
            }
          ),
          onEdit && /* @__PURE__ */ jsx190(
            Button53,
            {
              variant: "ghost",
              size: "sm",
              onClick: () => onEdit(plan),
              className: "h-8 w-8 p-0",
              children: /* @__PURE__ */ jsx190(Edit16, { className: "w-4 h-4" })
            }
          ),
          onToggleStatus && /* @__PURE__ */ jsx190(
            Button53,
            {
              variant: "ghost",
              size: "sm",
              onClick: () => onToggleStatus(plan),
              className: "h-8 w-8 p-0",
              children: /* @__PURE__ */ jsx190(Settings4, { className: "w-4 h-4" })
            }
          )
        ] })
      ] })
    ] });
  }
  return /* @__PURE__ */ jsxs172(Card50, { className: "hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsx190(CardHeader35, { children: /* @__PURE__ */ jsxs172("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs172(CardTitle35, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx190(Package16, { className: "w-5 h-5" }),
        plan.name,
        plan.isPopular && /* @__PURE__ */ jsxs172(Badge23, { variant: "default", className: "text-xs", children: [
          /* @__PURE__ */ jsx190(Star5, { className: "w-3 h-3 mr-1" }),
          "Popular"
        ] })
      ] }),
      /* @__PURE__ */ jsxs172("div", { className: "text-right", children: [
        /* @__PURE__ */ jsxs172("div", { className: "text-xl font-bold text-action-primary", children: [
          formatCurrency22(plan.price, plan.currency),
          /* @__PURE__ */ jsx190("span", { className: "text-sm text-text-secondary font-normal", children: getBillingCycleText(plan.billingCycle) })
        ] }),
        plan.trialDays > 0 && /* @__PURE__ */ jsxs172("div", { className: "text-xs text-action-primary", children: [
          plan.trialDays,
          "-day trial"
        ] })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs172(CardContent49, { className: "space-y-3", children: [
      /* @__PURE__ */ jsx190("p", { className: "text-sm text-text-secondary line-clamp-2", children: plan.description }),
      /* @__PURE__ */ jsxs172("div", { className: "grid grid-cols-2 gap-2 text-xs", children: [
        /* @__PURE__ */ jsxs172("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ jsx190(Package16, { className: "w-3 h-3 text-text-tertiary" }),
          /* @__PURE__ */ jsx190("span", { className: "text-text-secondary", children: "Outlets:" }),
          /* @__PURE__ */ jsx190("span", { className: "font-medium", children: getLimitText(plan.maxOutlets) })
        ] }),
        /* @__PURE__ */ jsxs172("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ jsx190(Users11, { className: "w-3 h-3 text-text-tertiary" }),
          /* @__PURE__ */ jsx190("span", { className: "text-text-secondary", children: "Users:" }),
          /* @__PURE__ */ jsx190("span", { className: "font-medium", children: getLimitText(plan.maxUsers) })
        ] })
      ] }),
      showActions && /* @__PURE__ */ jsxs172("div", { className: "flex items-center justify-end gap-2 pt-2 border-t border-border", children: [
        onView && /* @__PURE__ */ jsx190(
          Button53,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => onView(plan),
            className: "h-8 w-8 p-0",
            children: /* @__PURE__ */ jsx190(Eye20, { className: "w-4 h-4" })
          }
        ),
        onEdit && /* @__PURE__ */ jsx190(
          Button53,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => onEdit(plan),
            className: "h-8 w-8 p-0",
            children: /* @__PURE__ */ jsx190(Edit16, { className: "w-4 h-4" })
          }
        ),
        onToggleStatus && /* @__PURE__ */ jsx190(
          Button53,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => onToggleStatus(plan),
            className: "h-8 w-8 p-0",
            children: /* @__PURE__ */ jsx190(Settings4, { className: "w-4 h-4" })
          }
        )
      ] })
    ] })
  ] });
};

// src/components/features/Plans/components/PlanTable.tsx
import { useState as useState74 } from "react";
import {
  Card as Card51,
  CardContent as CardContent50,
  Badge as Badge24,
  Button as Button54,
  StatusBadge as StatusBadge3,
  DropdownMenu as DropdownMenu4,
  DropdownMenuContent as DropdownMenuContent4,
  DropdownMenuItem as DropdownMenuItem4,
  DropdownMenuTrigger as DropdownMenuTrigger4,
  DropdownMenuSeparator as DropdownMenuSeparator4
} from "@rentalshop/ui";
import {
  Package as Package17,
  Star as Star6,
  Eye as Eye21,
  Edit as Edit17,
  Settings as Settings5,
  ChevronUp as ChevronUp2,
  ChevronDown as ChevronDown6,
  Trash2 as Trash213,
  MoreVertical as MoreVertical8
} from "lucide-react";
import { Fragment as Fragment43, jsx as jsx191, jsxs as jsxs173 } from "react/jsx-runtime";
var PlanTable = ({
  plans,
  onView,
  onEdit,
  onDelete,
  onToggleStatus,
  sortBy = "sortOrder",
  sortOrder = "asc",
  onSort,
  loading = false
}) => {
  const [openMenuId, setOpenMenuId] = useState74(null);
  const formatCurrency22 = (price, currency) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: currency || "USD"
    }).format(price);
  };
  const getLimitText = (limit) => {
    if (limit === void 0 || limit === null)
      return "N/A";
    return limit === -1 ? "Unlimited" : limit.toString();
  };
  const formatDate11 = (date2) => {
    const dateObj = typeof date2 === "string" ? new Date(date2) : date2;
    return dateObj.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const handleSort = (field) => {
    if (onSort) {
      onSort(field);
    }
  };
  const getSortIcon = (field) => {
    if (sortBy !== field)
      return null;
    return sortOrder === "asc" ? /* @__PURE__ */ jsx191(ChevronUp2, { className: "w-4 h-4" }) : /* @__PURE__ */ jsx191(ChevronDown6, { className: "w-4 h-4" });
  };
  if (loading) {
    return /* @__PURE__ */ jsx191(Card51, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx191(CardContent50, { className: "p-0", children: /* @__PURE__ */ jsx191("div", { className: "animate-pulse space-y-4 p-6", children: [...Array(3)].map((_, i) => /* @__PURE__ */ jsx191("div", { className: "h-16 bg-bg-tertiary rounded" }, i)) }) }) });
  }
  if (plans.length === 0) {
    return /* @__PURE__ */ jsx191(Card51, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx191(CardContent50, { className: "text-center py-12", children: /* @__PURE__ */ jsxs173("div", { className: "text-text-tertiary", children: [
      /* @__PURE__ */ jsx191("div", { className: "text-4xl mb-4", children: "\u{1F4CB}" }),
      /* @__PURE__ */ jsx191("h3", { className: "text-lg font-medium mb-2", children: "No plans found" }),
      /* @__PURE__ */ jsx191("p", { className: "text-sm", children: "Get started by creating your first subscription plan." })
    ] }) }) });
  }
  return /* @__PURE__ */ jsx191(Card51, { className: "shadow-sm border-border flex flex-col h-full", children: /* @__PURE__ */ jsx191(CardContent50, { className: "p-0 flex-1 overflow-hidden", children: /* @__PURE__ */ jsx191("div", { className: "flex-1 overflow-auto h-full", children: /* @__PURE__ */ jsxs173("table", { className: "w-full", children: [
    /* @__PURE__ */ jsx191("thead", { className: "bg-bg-secondary border-b border-border sticky top-0 z-10", children: /* @__PURE__ */ jsxs173("tr", { children: [
      /* @__PURE__ */ jsx191("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Plan Name" }),
      /* @__PURE__ */ jsx191("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Price & Billing" }),
      /* @__PURE__ */ jsx191("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Limits" }),
      /* @__PURE__ */ jsx191("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Status" }),
      /* @__PURE__ */ jsx191("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Created At" }),
      /* @__PURE__ */ jsx191("th", { className: "px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Actions" })
    ] }) }),
    /* @__PURE__ */ jsx191("tbody", { className: "bg-bg-card divide-y divide-border", children: plans.map((plan) => /* @__PURE__ */ jsxs173("tr", { className: "hover:bg-bg-secondary transition-colors", children: [
      /* @__PURE__ */ jsx191("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs173("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsx191("div", { className: "flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-action-primary to-brand-primary flex items-center justify-center", children: /* @__PURE__ */ jsx191(Package17, { className: "w-5 h-5 text-white" }) }),
        /* @__PURE__ */ jsxs173("div", { children: [
          /* @__PURE__ */ jsxs173("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx191("div", { className: "text-sm font-medium text-text-primary", children: plan.name }),
            plan.isPopular && /* @__PURE__ */ jsxs173(Badge24, { className: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200", children: [
              /* @__PURE__ */ jsx191(Star6, { className: "w-3 h-3 mr-1" }),
              "Popular"
            ] })
          ] }),
          /* @__PURE__ */ jsx191("div", { className: "text-sm text-text-tertiary mt-1", children: plan.description })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx191("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs173("div", { children: [
        /* @__PURE__ */ jsxs173("div", { className: "text-sm font-medium text-text-primary", children: [
          formatCurrency22(plan.basePrice, plan.currency),
          /* @__PURE__ */ jsx191("span", { className: "text-sm text-text-secondary font-normal", children: "/month" })
        ] }),
        plan.trialDays > 0 && /* @__PURE__ */ jsxs173("div", { className: "text-xs text-action-primary mt-1", children: [
          plan.trialDays,
          "-day trial"
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs173("td", { className: "px-6 py-4", children: [
        /* @__PURE__ */ jsxs173("div", { className: "text-sm text-text-primary", children: [
          getLimitText(plan.limits.outlets),
          " outlets"
        ] }),
        /* @__PURE__ */ jsxs173("div", { className: "text-sm text-text-secondary", children: [
          getLimitText(plan.limits.users),
          " users"
        ] })
      ] }),
      /* @__PURE__ */ jsx191("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx191(
        StatusBadge3,
        {
          status: plan.isActive ? "active" : "inactive"
        }
      ) }),
      /* @__PURE__ */ jsx191("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx191("div", { className: "text-sm text-text-primary", children: formatDate11(plan.createdAt) }) }),
      /* @__PURE__ */ jsx191("td", { className: "px-6 py-4 text-right", children: /* @__PURE__ */ jsxs173(DropdownMenu4, { children: [
        /* @__PURE__ */ jsx191(DropdownMenuTrigger4, { asChild: true, children: /* @__PURE__ */ jsx191(
          Button54,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => setOpenMenuId(openMenuId === plan.id ? null : plan.id),
            children: /* @__PURE__ */ jsx191(MoreVertical8, { className: "h-4 w-4" })
          }
        ) }),
        /* @__PURE__ */ jsxs173(
          DropdownMenuContent4,
          {
            align: "end",
            open: openMenuId === plan.id,
            onOpenChange: (open) => setOpenMenuId(open ? plan.id : null),
            children: [
              onView && /* @__PURE__ */ jsxs173(
                DropdownMenuItem4,
                {
                  onClick: () => {
                    onView(plan);
                    setOpenMenuId(null);
                  },
                  children: [
                    /* @__PURE__ */ jsx191(Eye21, { className: "h-4 w-4 mr-2" }),
                    "View Details"
                  ]
                }
              ),
              onEdit && /* @__PURE__ */ jsxs173(
                DropdownMenuItem4,
                {
                  onClick: () => {
                    onEdit(plan);
                    setOpenMenuId(null);
                  },
                  children: [
                    /* @__PURE__ */ jsx191(Edit17, { className: "h-4 w-4 mr-2" }),
                    "Edit Plan"
                  ]
                }
              ),
              onToggleStatus && /* @__PURE__ */ jsxs173(
                DropdownMenuItem4,
                {
                  onClick: () => {
                    onToggleStatus(plan);
                    setOpenMenuId(null);
                  },
                  children: [
                    /* @__PURE__ */ jsx191(Settings5, { className: "h-4 w-4 mr-2" }),
                    plan.isActive ? "Deactivate" : "Activate"
                  ]
                }
              ),
              onDelete && /* @__PURE__ */ jsxs173(Fragment43, { children: [
                /* @__PURE__ */ jsx191(DropdownMenuSeparator4, {}),
                /* @__PURE__ */ jsxs173(
                  DropdownMenuItem4,
                  {
                    onClick: () => {
                      onDelete(plan);
                      setOpenMenuId(null);
                    },
                    className: "text-action-danger focus:text-action-danger",
                    children: [
                      /* @__PURE__ */ jsx191(Trash213, { className: "h-4 w-4 mr-2" }),
                      "Delete Plan"
                    ]
                  }
                )
              ] })
            ]
          }
        )
      ] }) })
    ] }, plan.id)) })
  ] }) }) }) });
};

// src/components/features/Plans/components/PlanFilters.tsx
import {
  Input as Input25,
  Select as Select15,
  SelectContent as SelectContent15,
  SelectItem as SelectItem15,
  SelectTrigger as SelectTrigger15,
  SelectValue as SelectValue15,
  Button as Button55
} from "@rentalshop/ui";
import { Fragment as Fragment44, jsx as jsx192, jsxs as jsxs174 } from "react/jsx-runtime";
var PlanFilters = ({
  searchTerm,
  statusFilter,
  onSearchChange,
  onStatusFilterChange,
  onClearFilters,
  showClearButton = true
}) => {
  const hasActiveFilters = searchTerm || statusFilter !== "all";
  return /* @__PURE__ */ jsxs174(Fragment44, { children: [
    /* @__PURE__ */ jsx192("div", { className: "flex-1 min-w-[280px]", children: /* @__PURE__ */ jsxs174("div", { className: "relative", children: [
      /* @__PURE__ */ jsx192(
        Input25,
        {
          placeholder: "Search plans...",
          value: searchTerm,
          onChange: (e2) => onSearchChange(e2.target.value),
          className: "pl-9 h-10"
        }
      ),
      /* @__PURE__ */ jsx192(
        "svg",
        {
          className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          children: /* @__PURE__ */ jsx192(
            "path",
            {
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 2,
              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            }
          )
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs174(Select15, { value: statusFilter, onValueChange: onStatusFilterChange, children: [
      /* @__PURE__ */ jsx192(SelectTrigger15, { className: "w-[150px] h-10", children: /* @__PURE__ */ jsx192(SelectValue15, { placeholder: "Status" }) }),
      /* @__PURE__ */ jsxs174(SelectContent15, { children: [
        /* @__PURE__ */ jsx192(SelectItem15, { value: "all", children: "All Plans" }),
        /* @__PURE__ */ jsx192(SelectItem15, { value: "active", children: "Active" }),
        /* @__PURE__ */ jsx192(SelectItem15, { value: "inactive", children: "Inactive" })
      ] })
    ] }),
    showClearButton && hasActiveFilters && onClearFilters && /* @__PURE__ */ jsx192(
      Button55,
      {
        variant: "outline",
        size: "sm",
        onClick: onClearFilters,
        className: "h-10",
        children: "Clear"
      }
    )
  ] });
};

// src/components/features/Plans/components/PlanStats.tsx
import {
  Card as Card52,
  CardContent as CardContent51
} from "@rentalshop/ui";
import { jsx as jsx193, jsxs as jsxs175 } from "react/jsx-runtime";
var PlanStats = ({
  totalPlans,
  activePlans,
  featuredPlans,
  plansWithTrial,
  className = ""
}) => {
  return /* @__PURE__ */ jsxs175("div", { className: `grid grid-cols-1 md:grid-cols-4 gap-6 ${className}`, children: [
    /* @__PURE__ */ jsx193(Card52, { children: /* @__PURE__ */ jsx193(CardContent51, { className: "pt-6", children: /* @__PURE__ */ jsxs175("div", { className: "text-center", children: [
      /* @__PURE__ */ jsx193("div", { className: "text-2xl font-bold text-action-primary", children: totalPlans }),
      /* @__PURE__ */ jsx193("div", { className: "text-sm text-text-secondary", children: "Total Plans" })
    ] }) }) }),
    /* @__PURE__ */ jsx193(Card52, { children: /* @__PURE__ */ jsx193(CardContent51, { className: "pt-6", children: /* @__PURE__ */ jsxs175("div", { className: "text-center", children: [
      /* @__PURE__ */ jsx193("div", { className: "text-2xl font-bold text-action-success", children: activePlans }),
      /* @__PURE__ */ jsx193("div", { className: "text-sm text-text-secondary", children: "Active Plans" })
    ] }) }) }),
    /* @__PURE__ */ jsx193(Card52, { children: /* @__PURE__ */ jsx193(CardContent51, { className: "pt-6", children: /* @__PURE__ */ jsxs175("div", { className: "text-center", children: [
      /* @__PURE__ */ jsx193("div", { className: "text-2xl font-bold text-brand-secondary", children: featuredPlans }),
      /* @__PURE__ */ jsx193("div", { className: "text-sm text-text-secondary", children: "Featured Plans" })
    ] }) }) }),
    /* @__PURE__ */ jsx193(Card52, { children: /* @__PURE__ */ jsx193(CardContent51, { className: "pt-6", children: /* @__PURE__ */ jsxs175("div", { className: "text-center", children: [
      /* @__PURE__ */ jsx193("div", { className: "text-2xl font-bold text-action-primary", children: plansWithTrial }),
      /* @__PURE__ */ jsx193("div", { className: "text-sm text-text-secondary", children: "Plans with Trial" })
    ] }) }) })
  ] });
};

// src/components/features/Plans/components/PlanDetailModal.tsx
import { X as X15, Check as Check7, Star as Star7 } from "lucide-react";
import { formatCurrency as formatCurrency17 } from "@rentalshop/utils";
import { jsx as jsx194, jsxs as jsxs176 } from "react/jsx-runtime";
var BILLING_CYCLES4 = [
  { value: "monthly", label: "Monthly", months: 1, discount: 0 },
  { value: "quarterly", label: "Quarterly", months: 3, discount: 5 },
  { value: "semi_annual", label: "Semi-Annual", months: 6, discount: 10 },
  { value: "annual", label: "Annual", months: 12, discount: 20 }
];
var getBillingCycleDiscount3 = (cycle) => {
  const billingCycle = BILLING_CYCLES4.find((bc) => bc.value === cycle);
  return billingCycle?.discount || 0;
};
var calculateDiscountedPrice4 = (basePrice, cycle) => {
  const discount = getBillingCycleDiscount3(cycle);
  const billingCycle = BILLING_CYCLES4.find((bc) => bc.value === cycle);
  const months = billingCycle?.months || 1;
  const totalBeforeDiscount = basePrice * months;
  const discountAmount = totalBeforeDiscount * discount / 100;
  return totalBeforeDiscount - discountAmount;
};
var calculateSavings2 = (basePrice, cycle) => {
  const discount = getBillingCycleDiscount3(cycle);
  const billingCycle = BILLING_CYCLES4.find((bc) => bc.value === cycle);
  const months = billingCycle?.months || 1;
  const totalBeforeDiscount = basePrice * months;
  return totalBeforeDiscount * discount / 100;
};
var PlanDetailModal = ({
  plan,
  open,
  onOpenChange,
  onSubscribe
}) => {
  if (!plan)
    return null;
  const handleSubscribe = (billingCycle) => {
    onSubscribe(plan.id, billingCycle);
  };
  return /* @__PURE__ */ jsxs176("div", { className: `fixed inset-0 z-50 flex items-center justify-center ${open ? "block" : "hidden"}`, children: [
    /* @__PURE__ */ jsx194(
      "div",
      {
        className: "absolute inset-0 bg-black/50 backdrop-blur-sm",
        onClick: () => onOpenChange(false)
      }
    ),
    /* @__PURE__ */ jsxs176("div", { className: "relative w-full max-w-4xl mx-4 bg-white rounded-lg shadow-xl max-h-[90vh] overflow-y-auto", children: [
      /* @__PURE__ */ jsxs176("div", { className: "flex items-center justify-between p-6 border-b", children: [
        /* @__PURE__ */ jsxs176("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ jsxs176("h2", { className: "text-2xl font-bold text-gray-900", children: [
            plan.name,
            " Plan"
          ] }),
          plan.isPopular && /* @__PURE__ */ jsxs176(Badge, { variant: "default", className: "bg-yellow-100 text-yellow-800 border-yellow-200", children: [
            /* @__PURE__ */ jsx194(Star7, { className: "w-3 h-3 mr-1" }),
            "Popular"
          ] })
        ] }),
        /* @__PURE__ */ jsx194(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => onOpenChange(false),
            className: "h-8 w-8 p-0",
            children: /* @__PURE__ */ jsx194(X15, { className: "w-4 h-4" })
          }
        )
      ] }),
      /* @__PURE__ */ jsxs176("div", { className: "p-6", children: [
        /* @__PURE__ */ jsx194("p", { className: "text-gray-600 mb-6", children: plan.description }),
        /* @__PURE__ */ jsxs176("div", { className: "mb-8", children: [
          /* @__PURE__ */ jsx194("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Choose Your Billing Cycle" }),
          /* @__PURE__ */ jsx194("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: BILLING_CYCLES4.map((cycle) => {
            const discountedPrice = calculateDiscountedPrice4(plan.price, cycle.value);
            const savings = calculateSavings2(plan.price, cycle.value);
            const isSelected = plan.billingCycle === cycle.value;
            return /* @__PURE__ */ jsxs176(
              Card,
              {
                className: `cursor-pointer transition-all duration-200 hover:shadow-md ${isSelected ? "ring-2 ring-blue-500 bg-blue-50" : "hover:bg-gray-50"}`,
                onClick: () => handleSubscribe(cycle.value),
                children: [
                  /* @__PURE__ */ jsx194(CardHeader, { className: "pb-3", children: /* @__PURE__ */ jsxs176("div", { className: "flex items-center justify-between", children: [
                    /* @__PURE__ */ jsx194(CardTitle, { className: "text-base font-semibold", children: cycle.label }),
                    isSelected && /* @__PURE__ */ jsx194(Check7, { className: "w-5 h-5 text-blue-500" })
                  ] }) }),
                  /* @__PURE__ */ jsx194(CardContent, { className: "pt-0", children: /* @__PURE__ */ jsxs176("div", { className: "space-y-2", children: [
                    /* @__PURE__ */ jsxs176("div", { className: "text-2xl font-bold text-gray-900", children: [
                      formatCurrency17(plan.price, plan.currency),
                      "/month"
                    ] }),
                    cycle.discount > 0 && /* @__PURE__ */ jsxs176("div", { className: "text-sm text-green-600 font-medium", children: [
                      cycle.discount,
                      "% discount"
                    ] }),
                    /* @__PURE__ */ jsxs176("div", { className: "text-sm text-gray-600", children: [
                      "Total: ",
                      formatCurrency17(discountedPrice, plan.currency)
                    ] }),
                    savings > 0 && /* @__PURE__ */ jsxs176("div", { className: "text-xs text-green-600", children: [
                      "Save: ",
                      formatCurrency17(savings, plan.currency)
                    ] }),
                    /* @__PURE__ */ jsx194(
                      Button2,
                      {
                        variant: isSelected ? "default" : "outline",
                        size: "sm",
                        className: "w-full mt-3",
                        onClick: (e2) => {
                          e2.stopPropagation();
                          handleSubscribe(cycle.value);
                        },
                        children: isSelected ? "Selected" : "Select"
                      }
                    )
                  ] }) })
                ]
              },
              cycle.value
            );
          }) })
        ] }),
        /* @__PURE__ */ jsxs176("div", { className: "mb-8", children: [
          /* @__PURE__ */ jsx194("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Plan Features" }),
          /* @__PURE__ */ jsxs176("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
            /* @__PURE__ */ jsxs176("div", { children: [
              /* @__PURE__ */ jsx194("h4", { className: "font-medium text-gray-900 mb-3", children: "Limits" }),
              /* @__PURE__ */ jsxs176("ul", { className: "space-y-2 text-sm text-gray-600", children: [
                /* @__PURE__ */ jsxs176("li", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsx194(Check7, { className: "w-4 h-4 text-green-500" }),
                  plan.limits.outlets === -1 ? "Unlimited" : plan.limits.outlets,
                  " outlets"
                ] }),
                /* @__PURE__ */ jsxs176("li", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsx194(Check7, { className: "w-4 h-4 text-green-500" }),
                  plan.limits.users === -1 ? "Unlimited" : plan.limits.users,
                  " users"
                ] }),
                /* @__PURE__ */ jsxs176("li", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsx194(Check7, { className: "w-4 h-4 text-green-500" }),
                  plan.limits.products === -1 ? "Unlimited" : plan.limits.products,
                  " products"
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxs176("div", { children: [
              /* @__PURE__ */ jsx194("h4", { className: "font-medium text-gray-900 mb-3", children: "Features" }),
              /* @__PURE__ */ jsx194("ul", { className: "space-y-2 text-sm text-gray-600", children: plan.features.map((feature, index) => /* @__PURE__ */ jsxs176("li", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ jsx194(Check7, { className: "w-4 h-4 text-green-500" }),
                feature
              ] }, index)) })
            ] })
          ] })
        ] }),
        plan.trialDays > 0 && /* @__PURE__ */ jsxs176("div", { className: "bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6", children: [
          /* @__PURE__ */ jsxs176("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx194(Check7, { className: "w-5 h-5 text-blue-500" }),
            /* @__PURE__ */ jsxs176("span", { className: "font-medium text-blue-900", children: [
              plan.trialDays,
              "-day free trial included"
            ] })
          ] }),
          /* @__PURE__ */ jsxs176("p", { className: "text-sm text-blue-700 mt-1", children: [
            "Start your ",
            plan.trialDays,
            "-day free trial today. No credit card required."
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs176("div", { className: "flex items-center justify-end gap-3 p-6 border-t bg-gray-50", children: [
        /* @__PURE__ */ jsx194(
          Button2,
          {
            variant: "outline",
            onClick: () => onOpenChange(false),
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsxs176(
          Button2,
          {
            onClick: () => handleSubscribe(plan.billingCycle),
            className: "bg-blue-600 hover:bg-blue-700",
            children: [
              "Subscribe to ",
              plan.name,
              " Plan"
            ]
          }
        )
      ] })
    ] })
  ] });
};

// src/components/features/BillingCycles/components/BillingCycleTable.tsx
import {
  Card as Card53,
  CardContent as CardContent52,
  Badge as Badge25,
  Button as Button56,
  StatusBadge as StatusBadge4
} from "@rentalshop/ui";
import {
  Calendar as Calendar21,
  Edit as Edit18,
  ChevronUp as ChevronUp3,
  ChevronDown as ChevronDown7,
  Eye as Eye22
} from "lucide-react";
import { jsx as jsx195, jsxs as jsxs177 } from "react/jsx-runtime";
var BillingCycleTable = ({
  billingCycles,
  onView,
  onEdit,
  onToggleStatus,
  sortBy = "sortOrder",
  sortOrder = "asc",
  onSort,
  loading = false
}) => {
  const formatDate11 = (date2) => {
    return new Date(date2).toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const handleSort = (field) => {
    if (onSort) {
      onSort(field);
    }
  };
  const getSortIcon = (field) => {
    if (sortBy !== field)
      return null;
    return sortOrder === "asc" ? /* @__PURE__ */ jsx195(ChevronUp3, { className: "w-4 h-4" }) : /* @__PURE__ */ jsx195(ChevronDown7, { className: "w-4 h-4" });
  };
  if (loading) {
    return /* @__PURE__ */ jsx195(Card53, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx195(CardContent52, { children: /* @__PURE__ */ jsx195("div", { className: "animate-pulse space-y-4", children: [...Array(3)].map((_, i) => /* @__PURE__ */ jsx195("div", { className: "h-16 bg-bg-tertiary rounded" }, i)) }) }) });
  }
  return /* @__PURE__ */ jsx195(Card53, { className: "shadow-sm border-border flex flex-col h-full", children: /* @__PURE__ */ jsx195(CardContent52, { className: "p-0 flex-1 overflow-hidden", children: /* @__PURE__ */ jsxs177("div", { className: "flex-1 overflow-auto h-full", children: [
    /* @__PURE__ */ jsxs177("table", { className: "w-full", children: [
      /* @__PURE__ */ jsx195("thead", { className: "bg-bg-secondary border-b border-border sticky top-0 z-10", children: /* @__PURE__ */ jsxs177("tr", { children: [
        /* @__PURE__ */ jsx195(
          "th",
          {
            className: "text-left py-3 px-4 font-medium text-text-primary cursor-pointer hover:bg-bg-secondary",
            onClick: () => handleSort("name"),
            children: /* @__PURE__ */ jsxs177("div", { className: "flex items-center gap-2", children: [
              "Name",
              getSortIcon("name")
            ] })
          }
        ),
        /* @__PURE__ */ jsx195(
          "th",
          {
            className: "text-left py-3 px-4 font-medium text-text-primary cursor-pointer hover:bg-bg-secondary",
            onClick: () => handleSort("value"),
            children: /* @__PURE__ */ jsxs177("div", { className: "flex items-center gap-2", children: [
              "Value",
              getSortIcon("value")
            ] })
          }
        ),
        /* @__PURE__ */ jsx195(
          "th",
          {
            className: "text-left py-3 px-4 font-medium text-text-primary cursor-pointer hover:bg-bg-secondary",
            onClick: () => handleSort("months"),
            children: /* @__PURE__ */ jsxs177("div", { className: "flex items-center gap-2", children: [
              "Months",
              getSortIcon("months")
            ] })
          }
        ),
        /* @__PURE__ */ jsx195(
          "th",
          {
            className: "text-left py-3 px-4 font-medium text-text-primary cursor-pointer hover:bg-bg-secondary",
            onClick: () => handleSort("discount"),
            children: /* @__PURE__ */ jsxs177("div", { className: "flex items-center gap-2", children: [
              "Discount",
              getSortIcon("discount")
            ] })
          }
        ),
        /* @__PURE__ */ jsx195("th", { className: "text-left py-3 px-4 font-medium text-text-primary", children: "Description" }),
        /* @__PURE__ */ jsx195("th", { className: "text-left py-3 px-4 font-medium text-text-primary", children: "Status" }),
        /* @__PURE__ */ jsx195(
          "th",
          {
            className: "text-left py-3 px-4 font-medium text-text-primary cursor-pointer hover:bg-bg-secondary",
            onClick: () => handleSort("createdAt"),
            children: /* @__PURE__ */ jsxs177("div", { className: "flex items-center gap-2", children: [
              "Created",
              getSortIcon("createdAt")
            ] })
          }
        ),
        /* @__PURE__ */ jsx195("th", { className: "text-right py-3 px-4 font-medium text-text-primary", children: "Actions" })
      ] }) }),
      /* @__PURE__ */ jsx195("tbody", { children: billingCycles.map((cycle) => /* @__PURE__ */ jsxs177("tr", { className: "border-b border-border hover:bg-bg-secondary", children: [
        /* @__PURE__ */ jsx195("td", { className: "py-4 px-4", children: /* @__PURE__ */ jsx195("div", { className: "font-medium text-text-primary", children: cycle.name }) }),
        /* @__PURE__ */ jsx195("td", { className: "py-4 px-4", children: /* @__PURE__ */ jsx195(Badge25, { variant: "outline", className: "font-mono", children: cycle.value }) }),
        /* @__PURE__ */ jsx195("td", { className: "py-4 px-4", children: /* @__PURE__ */ jsxs177("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx195(Calendar21, { className: "w-4 h-4 text-text-tertiary" }),
          /* @__PURE__ */ jsx195("span", { className: "font-medium", children: cycle.months }),
          /* @__PURE__ */ jsx195("span", { className: "text-sm text-text-secondary", children: cycle.months === 1 ? "month" : "months" })
        ] }) }),
        /* @__PURE__ */ jsx195("td", { className: "py-4 px-4", children: /* @__PURE__ */ jsx195("div", { className: "flex items-center gap-2", children: cycle.discount > 0 ? /* @__PURE__ */ jsxs177(Badge25, { variant: "default", className: "bg-green-100 text-green-800 border-green-200", children: [
          cycle.discount,
          "%"
        ] }) : /* @__PURE__ */ jsx195("span", { className: "text-text-tertiary", children: "No discount" }) }) }),
        /* @__PURE__ */ jsx195("td", { className: "py-4 px-4", children: /* @__PURE__ */ jsx195("div", { className: "text-sm text-text-secondary max-w-xs truncate", children: cycle.description || "No description" }) }),
        /* @__PURE__ */ jsx195("td", { className: "py-4 px-4", children: /* @__PURE__ */ jsx195("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsx195(
          StatusBadge4,
          {
            status: cycle.isActive ? "active" : "inactive"
          }
        ) }) }),
        /* @__PURE__ */ jsx195("td", { className: "py-4 px-4 text-sm text-text-secondary", children: formatDate11(cycle.createdAt) }),
        /* @__PURE__ */ jsx195("td", { className: "py-4 px-4", children: /* @__PURE__ */ jsxs177("div", { className: "flex items-center justify-end gap-2", children: [
          onView && /* @__PURE__ */ jsx195(
            Button56,
            {
              variant: "ghost",
              size: "sm",
              onClick: () => onView(cycle),
              className: "h-8 w-8 p-0",
              title: "View billing cycle",
              children: /* @__PURE__ */ jsx195(Eye22, { className: "w-4 h-4" })
            }
          ),
          onEdit && /* @__PURE__ */ jsx195(
            Button56,
            {
              variant: "ghost",
              size: "sm",
              onClick: () => onEdit(cycle),
              className: "h-8 w-8 p-0",
              title: "Edit billing cycle",
              children: /* @__PURE__ */ jsx195(Edit18, { className: "w-4 h-4" })
            }
          )
        ] }) })
      ] }, cycle.id)) })
    ] }),
    billingCycles.length === 0 && /* @__PURE__ */ jsxs177("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsx195(Calendar21, { className: "w-12 h-12 text-text-tertiary mx-auto mb-4" }),
      /* @__PURE__ */ jsx195("h3", { className: "text-lg font-medium text-text-primary mb-2", children: "No billing cycles found" }),
      /* @__PURE__ */ jsx195("p", { className: "text-text-secondary", children: "Get started by creating your first billing cycle" })
    ] })
  ] }) }) });
};

// src/components/features/BillingCycles/components/BillingCycleForm.tsx
import { useState as useState75, useEffect as useEffect40 } from "react";
import {
  Button as Button57,
  Input as Input26,
  Label as Label12,
  Textarea as Textarea6,
  Switch as Switch2
} from "@rentalshop/ui";
import { jsx as jsx196, jsxs as jsxs178 } from "react/jsx-runtime";
var BillingCycleForm = ({
  initialData = {},
  onSubmit,
  onCancel,
  loading = false
}) => {
  const [formData, setFormData] = useState75({
    name: initialData.name || "",
    value: initialData.value || "",
    months: initialData.months || 1,
    discount: initialData.discount || 0,
    description: initialData.description || "",
    isActive: initialData.isActive !== void 0 ? initialData.isActive : true,
    sortOrder: initialData.sortOrder || 0
  });
  const [errors, setErrors] = useState75({});
  useEffect40(() => {
    if (initialData) {
      setFormData({
        name: initialData.name || "",
        value: initialData.value || "",
        months: initialData.months || 1,
        discount: initialData.discount || 0,
        description: initialData.description || "",
        isActive: initialData.isActive !== void 0 ? initialData.isActive : true,
        sortOrder: initialData.sortOrder || 0
      });
    }
  }, [initialData]);
  const validateForm = () => {
    const newErrors = {};
    if (!formData.name.trim()) {
      newErrors.name = "Name is required";
    }
    if (!formData.value.trim()) {
      newErrors.value = "Value is required";
    } else if (!/^[a-z_]+$/.test(formData.value)) {
      newErrors.value = "Value must contain only lowercase letters and underscores";
    }
    if (formData.months < 1) {
      newErrors.months = "Months must be at least 1";
    }
    if (formData.discount < 0 || formData.discount > 100) {
      newErrors.discount = "Discount must be between 0 and 100";
    }
    if (formData.sortOrder < 0) {
      newErrors.sortOrder = "Sort order must be non-negative";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  const handleSubmit = (e2) => {
    e2.preventDefault();
    if (validateForm()) {
      onSubmit(formData);
    }
  };
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({
      ...prev,
      [field]: value
    }));
    if (errors[field]) {
      setErrors((prev) => ({
        ...prev,
        [field]: ""
      }));
    }
  };
  const handleNumberInputChange = (field, value) => {
    const numValue = value === "" ? 0 : parseInt(value, 10);
    if (!isNaN(numValue)) {
      handleInputChange(field, numValue);
    }
  };
  return /* @__PURE__ */ jsxs178("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
    /* @__PURE__ */ jsxs178("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs178("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx196(Label12, { htmlFor: "name", children: "Name *" }),
        /* @__PURE__ */ jsx196(
          Input26,
          {
            id: "name",
            type: "text",
            value: formData.name,
            onChange: (e2) => handleInputChange("name", e2.target.value),
            placeholder: "e.g., Monthly, Quarterly",
            className: errors.name ? "border-red-500" : ""
          }
        ),
        errors.name && /* @__PURE__ */ jsx196("p", { className: "text-sm text-red-500", children: errors.name })
      ] }),
      /* @__PURE__ */ jsxs178("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx196(Label12, { htmlFor: "value", children: "Value *" }),
        /* @__PURE__ */ jsx196(
          Input26,
          {
            id: "value",
            type: "text",
            value: formData.value,
            onChange: (e2) => handleInputChange("value", e2.target.value),
            placeholder: "e.g., monthly, quarterly",
            className: errors.value ? "border-red-500" : ""
          }
        ),
        errors.value && /* @__PURE__ */ jsx196("p", { className: "text-sm text-red-500", children: errors.value }),
        /* @__PURE__ */ jsx196("p", { className: "text-xs text-text-tertiary", children: "Use lowercase letters and underscores only" })
      ] }),
      /* @__PURE__ */ jsxs178("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx196(Label12, { htmlFor: "months", children: "Months *" }),
        /* @__PURE__ */ jsx196(
          Input26,
          {
            id: "months",
            type: "number",
            value: formData.months,
            onChange: (e2) => handleNumberInputChange("months", e2.target.value),
            placeholder: "1",
            min: "1",
            className: errors.months ? "border-red-500" : ""
          }
        ),
        errors.months && /* @__PURE__ */ jsx196("p", { className: "text-sm text-red-500", children: errors.months })
      ] }),
      /* @__PURE__ */ jsxs178("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx196(Label12, { htmlFor: "discount", children: "Discount (%)" }),
        /* @__PURE__ */ jsx196(
          Input26,
          {
            id: "discount",
            type: "number",
            value: formData.discount,
            onChange: (e2) => handleNumberInputChange("discount", e2.target.value),
            placeholder: "0",
            min: "0",
            max: "100",
            step: "0.1",
            className: errors.discount ? "border-red-500" : ""
          }
        ),
        errors.discount && /* @__PURE__ */ jsx196("p", { className: "text-sm text-red-500", children: errors.discount }),
        /* @__PURE__ */ jsx196("p", { className: "text-xs text-text-tertiary", children: "Percentage discount for this billing cycle (0-100)" })
      ] }),
      /* @__PURE__ */ jsxs178("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx196(Label12, { htmlFor: "sortOrder", children: "Sort Order" }),
        /* @__PURE__ */ jsx196(
          Input26,
          {
            id: "sortOrder",
            type: "number",
            value: formData.sortOrder,
            onChange: (e2) => handleNumberInputChange("sortOrder", e2.target.value),
            placeholder: "0",
            min: "0",
            className: errors.sortOrder ? "border-red-500" : ""
          }
        ),
        errors.sortOrder && /* @__PURE__ */ jsx196("p", { className: "text-sm text-red-500", children: errors.sortOrder }),
        /* @__PURE__ */ jsx196("p", { className: "text-xs text-text-tertiary", children: "Lower numbers appear first in lists" })
      ] }),
      /* @__PURE__ */ jsxs178("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx196(Label12, { htmlFor: "isActive", children: "Active" }),
        /* @__PURE__ */ jsxs178("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx196(
            Switch2,
            {
              id: "isActive",
              checked: formData.isActive,
              onCheckedChange: (checked) => handleInputChange("isActive", checked)
            }
          ),
          /* @__PURE__ */ jsx196("span", { className: "text-sm text-text-secondary", children: formData.isActive ? "Active" : "Inactive" })
        ] }),
        /* @__PURE__ */ jsx196("p", { className: "text-xs text-text-tertiary", children: "Inactive billing cycles won't be available for selection" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs178("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx196(Label12, { htmlFor: "description", children: "Description" }),
      /* @__PURE__ */ jsx196(
        Textarea6,
        {
          id: "description",
          value: formData.description,
          onChange: (e2) => handleInputChange("description", e2.target.value),
          placeholder: "Describe this billing cycle...",
          rows: 3
        }
      ),
      /* @__PURE__ */ jsx196("p", { className: "text-xs text-text-tertiary", children: "Optional description for this billing cycle" })
    ] }),
    /* @__PURE__ */ jsxs178("div", { className: "bg-bg-secondary p-4 rounded-lg", children: [
      /* @__PURE__ */ jsx196("h4", { className: "font-medium text-text-primary mb-2", children: "Preview" }),
      /* @__PURE__ */ jsxs178("div", { className: "space-y-2 text-sm", children: [
        /* @__PURE__ */ jsxs178("div", { children: [
          /* @__PURE__ */ jsx196("span", { className: "text-text-secondary", children: "Name:" }),
          " ",
          formData.name || "Not set"
        ] }),
        /* @__PURE__ */ jsxs178("div", { children: [
          /* @__PURE__ */ jsx196("span", { className: "text-text-secondary", children: "Value:" }),
          " ",
          formData.value || "Not set"
        ] }),
        /* @__PURE__ */ jsxs178("div", { children: [
          /* @__PURE__ */ jsx196("span", { className: "text-text-secondary", children: "Duration:" }),
          " ",
          formData.months,
          " ",
          formData.months === 1 ? "month" : "months"
        ] }),
        /* @__PURE__ */ jsxs178("div", { children: [
          /* @__PURE__ */ jsx196("span", { className: "text-text-secondary", children: "Discount:" }),
          " ",
          formData.discount,
          "%"
        ] }),
        /* @__PURE__ */ jsxs178("div", { children: [
          /* @__PURE__ */ jsx196("span", { className: "text-text-secondary", children: "Status:" }),
          " ",
          formData.isActive ? "Active" : "Inactive"
        ] }),
        formData.description && /* @__PURE__ */ jsxs178("div", { children: [
          /* @__PURE__ */ jsx196("span", { className: "text-text-secondary", children: "Description:" }),
          " ",
          formData.description
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs178("div", { className: "flex items-center justify-end gap-3 pt-6 border-t", children: [
      /* @__PURE__ */ jsx196(
        Button57,
        {
          type: "button",
          variant: "outline",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx196(
        Button57,
        {
          type: "submit",
          disabled: loading,
          children: loading ? "Saving..." : initialData.id ? "Update Billing Cycle" : "Create Billing Cycle"
        }
      )
    ] })
  ] });
};

// src/components/features/BillingCycles/components/BillingCycleDetailDialog.tsx
import React107, { useState as useState76 } from "react";
import {
  Dialog as Dialog15,
  DialogContent as DialogContent15,
  DialogHeader as DialogHeader15,
  DialogTitle as DialogTitle15,
  DialogDescription as DialogDescription12,
  Card as Card54,
  CardContent as CardContent53,
  Button as Button58,
  Badge as Badge26,
  StatusBadge as StatusBadge5,
  Switch as Switch3,
  Label as Label13
} from "@rentalshop/ui";
import {
  Calendar as Calendar22,
  Percent as Percent3,
  Clock as Clock17,
  Edit as Edit19,
  Save as Save8,
  X as X16,
  Info as Info7,
  DollarSign as DollarSign16,
  Trash2 as Trash215
} from "lucide-react";
import { Fragment as Fragment45, jsx as jsx197, jsxs as jsxs179 } from "react/jsx-runtime";
var BillingCycleDetailDialog = ({
  open,
  onOpenChange,
  billingCycle,
  onToggleStatus,
  onEdit,
  onDelete,
  loading = false
}) => {
  const [isEditing, setIsEditing] = useState76(false);
  const [tempStatus, setTempStatus] = useState76(billingCycle?.isActive ?? false);
  React107.useEffect(() => {
    setTempStatus(billingCycle?.isActive ?? false);
  }, [billingCycle]);
  const handleToggleStatus = () => {
    if (billingCycle && onToggleStatus) {
      onToggleStatus(billingCycle);
    }
  };
  const handleEdit = () => {
    if (billingCycle && onEdit) {
      onEdit(billingCycle);
      onOpenChange(false);
    }
  };
  const handleDelete = () => {
    if (billingCycle && onDelete) {
      onDelete(billingCycle);
      onOpenChange(false);
    }
  };
  const handleSaveStatus = () => {
    setTempStatus(!tempStatus);
    handleToggleStatus();
    setIsEditing(false);
  };
  const handleCancelEdit = () => {
    setTempStatus(billingCycle?.isActive ?? false);
    setIsEditing(false);
  };
  const formatDate11 = (date2) => {
    return new Date(date2).toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  };
  if (!billingCycle)
    return null;
  return /* @__PURE__ */ jsx197(Dialog15, { open, onOpenChange, children: /* @__PURE__ */ jsxs179(DialogContent15, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsx197(DialogHeader15, { children: /* @__PURE__ */ jsxs179("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs179("div", { children: [
        /* @__PURE__ */ jsx197(DialogTitle15, { className: "text-xl font-semibold", children: "Billing Cycle Details" }),
        /* @__PURE__ */ jsx197(DialogDescription12, { className: "text-sm text-text-secondary mt-1", children: "View and manage billing cycle information" })
      ] }),
      /* @__PURE__ */ jsxs179("div", { className: "flex items-center gap-2", children: [
        onEdit && /* @__PURE__ */ jsxs179(
          Button58,
          {
            variant: "outline",
            size: "sm",
            onClick: handleEdit,
            className: "flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx197(Edit19, { className: "w-4 h-4" }),
              "Edit"
            ]
          }
        ),
        onDelete && /* @__PURE__ */ jsxs179(
          Button58,
          {
            variant: "outline",
            size: "sm",
            onClick: handleDelete,
            className: "flex items-center gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",
            children: [
              /* @__PURE__ */ jsx197(Trash215, { className: "w-4 h-4" }),
              "Delete"
            ]
          }
        )
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs179("div", { className: "mt-6 space-y-6", children: [
      /* @__PURE__ */ jsx197(Card54, { children: /* @__PURE__ */ jsxs179(CardContent53, { className: "p-6", children: [
        /* @__PURE__ */ jsxs179("h3", { className: "text-lg font-medium text-text-primary mb-4 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx197(Info7, { className: "w-5 h-5 text-text-tertiary" }),
          "Basic Information"
        ] }),
        /* @__PURE__ */ jsxs179("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Name" }),
            /* @__PURE__ */ jsx197("p", { className: "text-lg font-semibold text-text-primary mt-1", children: billingCycle.name })
          ] }),
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Value" }),
            /* @__PURE__ */ jsx197("div", { className: "mt-1", children: /* @__PURE__ */ jsx197(Badge26, { variant: "outline", className: "font-mono text-sm", children: billingCycle.value }) })
          ] }),
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Description" }),
            /* @__PURE__ */ jsx197("p", { className: "text-text-primary mt-1", children: billingCycle.description || "No description provided" })
          ] }),
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Sort Order" }),
            /* @__PURE__ */ jsx197("p", { className: "text-text-primary mt-1", children: billingCycle.sortOrder })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx197(Card54, { children: /* @__PURE__ */ jsxs179(CardContent53, { className: "p-6", children: [
        /* @__PURE__ */ jsxs179("h3", { className: "text-lg font-medium text-text-primary mb-4 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx197(DollarSign16, { className: "w-5 h-5 text-text-tertiary" }),
          "Billing Details"
        ] }),
        /* @__PURE__ */ jsxs179("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Billing Period" }),
            /* @__PURE__ */ jsxs179("div", { className: "flex items-center gap-2 mt-1", children: [
              /* @__PURE__ */ jsx197(Calendar22, { className: "w-4 h-4 text-text-tertiary" }),
              /* @__PURE__ */ jsx197("span", { className: "text-lg font-semibold text-text-primary", children: billingCycle.months }),
              /* @__PURE__ */ jsx197("span", { className: "text-text-secondary", children: billingCycle.months === 1 ? "month" : "months" })
            ] })
          ] }),
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Discount" }),
            /* @__PURE__ */ jsxs179("div", { className: "flex items-center gap-2 mt-1", children: [
              /* @__PURE__ */ jsx197(Percent3, { className: "w-4 h-4 text-text-tertiary" }),
              billingCycle.discount > 0 ? /* @__PURE__ */ jsxs179(Badge26, { variant: "default", className: "bg-green-100 text-green-800 border-green-200", children: [
                billingCycle.discount,
                "% off"
              ] }) : /* @__PURE__ */ jsx197("span", { className: "text-text-tertiary", children: "No discount" })
            ] })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx197(Card54, { children: /* @__PURE__ */ jsxs179(CardContent53, { className: "p-6", children: [
        /* @__PURE__ */ jsxs179("h3", { className: "text-lg font-medium text-text-primary mb-4 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx197(Clock17, { className: "w-5 h-5 text-text-tertiary" }),
          "Status Management"
        ] }),
        /* @__PURE__ */ jsx197("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs179("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Current Status" }),
            /* @__PURE__ */ jsx197("div", { className: "mt-1", children: /* @__PURE__ */ jsx197(StatusBadge5, { status: billingCycle.isActive ? "active" : "inactive" }) })
          ] }),
          onToggleStatus && /* @__PURE__ */ jsx197("div", { className: "flex items-center gap-4", children: isEditing ? /* @__PURE__ */ jsxs179(Fragment45, { children: [
            /* @__PURE__ */ jsxs179("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx197(
                Switch3,
                {
                  checked: tempStatus,
                  onCheckedChange: setTempStatus,
                  disabled: loading
                }
              ),
              /* @__PURE__ */ jsx197(Label13, { className: "text-sm", children: tempStatus ? "Active" : "Inactive" })
            ] }),
            /* @__PURE__ */ jsxs179("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxs179(
                Button58,
                {
                  size: "sm",
                  onClick: handleSaveStatus,
                  disabled: loading,
                  className: "flex items-center gap-2",
                  children: [
                    /* @__PURE__ */ jsx197(Save8, { className: "w-4 h-4" }),
                    "Save"
                  ]
                }
              ),
              /* @__PURE__ */ jsx197(
                Button58,
                {
                  variant: "outline",
                  size: "sm",
                  onClick: handleCancelEdit,
                  disabled: loading,
                  children: /* @__PURE__ */ jsx197(X16, { className: "w-4 h-4" })
                }
              )
            ] })
          ] }) : /* @__PURE__ */ jsx197(
            Button58,
            {
              variant: "outline",
              size: "sm",
              onClick: () => setIsEditing(true),
              disabled: loading,
              children: "Change Status"
            }
          ) })
        ] }) })
      ] }) }),
      /* @__PURE__ */ jsx197(Card54, { children: /* @__PURE__ */ jsxs179(CardContent53, { className: "p-6", children: [
        /* @__PURE__ */ jsxs179("h3", { className: "text-lg font-medium text-text-primary mb-4 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx197(Clock17, { className: "w-5 h-5 text-text-tertiary" }),
          "Timestamps"
        ] }),
        /* @__PURE__ */ jsxs179("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Created" }),
            /* @__PURE__ */ jsx197("p", { className: "text-text-primary mt-1", children: formatDate11(billingCycle.createdAt) })
          ] }),
          /* @__PURE__ */ jsxs179("div", { children: [
            /* @__PURE__ */ jsx197(Label13, { className: "text-sm font-medium text-text-secondary", children: "Last Updated" }),
            /* @__PURE__ */ jsx197("p", { className: "text-text-primary mt-1", children: formatDate11(billingCycle.updatedAt) })
          ] })
        ] })
      ] }) })
    ] })
  ] }) });
};

// src/components/features/Payments/components/PaymentForm.tsx
import React108, { useState as useState77, useEffect as useEffect41 } from "react";
import {
  Button as Button59,
  Input as Input27,
  Label as Label14,
  Textarea as Textarea7,
  Select as Select16,
  SelectContent as SelectContent16,
  SelectItem as SelectItem16,
  SelectTrigger as SelectTrigger16,
  SelectValue as SelectValue16,
  Card as Card55,
  CardContent as CardContent54,
  CardHeader as CardHeader37,
  CardTitle as CardTitle37,
  Switch as Switch4,
  SearchableSelect as SearchableSelect4
} from "@rentalshop/ui";
import { merchantsApi as merchantsApi2 } from "@rentalshop/utils";
import { DollarSign as DollarSign17, CreditCard as CreditCard17 } from "lucide-react";
import { jsx as jsx198, jsxs as jsxs180 } from "react/jsx-runtime";
var PAYMENT_METHODS2 = [
  { value: "STRIPE", label: "Stripe" },
  { value: "PAYPAL", label: "PayPal" },
  { value: "BANK_TRANSFER", label: "Bank Transfer" },
  { value: "CREDIT_CARD", label: "Credit Card" },
  { value: "CASH", label: "Cash" }
];
var PaymentForm = ({
  onSubmit,
  onCancel,
  loading = false,
  merchants = [],
  plans = [],
  planVariants = [],
  // ✅ REQUIRED: Plan variants
  mode = "create",
  // ✅ NEW: Default to create mode
  existingPayment
  // ✅ NEW: Existing payment data for edit mode
}) => {
  const [formData, setFormData] = useState77(() => {
    if (mode === "edit" && existingPayment) {
      return {
        merchantId: existingPayment.merchantId,
        planId: existingPayment.planId,
        planVariantId: existingPayment.planVariantId,
        amount: existingPayment.amount,
        currency: existingPayment.currency,
        method: existingPayment.method,
        description: existingPayment.description,
        extendSubscription: existingPayment.extendSubscription,
        monthsToExtend: existingPayment.monthsToExtend,
        invoiceNumber: existingPayment.invoiceNumber,
        transactionId: existingPayment.transactionId,
        startDate: existingPayment.startDate,
        endDate: existingPayment.endDate
      };
    }
    const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    const nextMonth = /* @__PURE__ */ new Date();
    nextMonth.setMonth(nextMonth.getMonth() + 1);
    const nextMonthStr = nextMonth.toISOString().split("T")[0];
    return {
      merchantId: 0,
      planId: 0,
      planVariantId: 0,
      amount: 0,
      currency: "USD",
      method: "STRIPE",
      description: "",
      extendSubscription: false,
      startDate: today,
      endDate: nextMonthStr
    };
  });
  const [selectedPlan, setSelectedPlan] = useState77(null);
  const [selectedPlanVariant, setSelectedPlanVariant] = useState77(null);
  const [isSearchingMerchants, setIsSearchingMerchants] = useState77(false);
  const searchMerchants = React108.useCallback(async (query) => {
    console.log("\u{1F50D} PaymentForm: searchMerchants called with query:", query);
    if (!query.trim()) {
      console.log("\u{1F50D} PaymentForm: Empty query, returning empty array");
      return [];
    }
    setIsSearchingMerchants(true);
    console.log("\u{1F50D} PaymentForm: Starting API call for query:", query);
    try {
      const response = await merchantsApi2.searchMerchants({
        q: query,
        limit: 20,
        sortBy: "name",
        sortOrder: "asc"
      });
      console.log("\u{1F50D} PaymentForm: API response:", response);
      if (response.success && response.data) {
        const results = response.data.merchants.map((merchant) => {
          const descriptionParts = [];
          if (merchant.phone)
            descriptionParts.push(`${merchant.phone}`);
          if (merchant.email)
            descriptionParts.push(`${merchant.email}`);
          const addressParts = [];
          if (merchant.address)
            addressParts.push(merchant.address);
          if (merchant.city)
            addressParts.push(merchant.city);
          if (merchant.state)
            addressParts.push(merchant.state);
          if (merchant.zipCode)
            addressParts.push(merchant.zipCode);
          if (merchant.country)
            addressParts.push(merchant.country);
          if (addressParts.length > 0) {
            descriptionParts.push(`${addressParts.join(", ")}`);
          }
          if (merchant.businessType)
            descriptionParts.push(`Business: ${merchant.businessType}`);
          if (merchant.website)
            descriptionParts.push(`Website: ${merchant.website}`);
          return {
            value: merchant.id.toString(),
            label: merchant.name,
            description: descriptionParts.join("\n") || "No contact info",
            type: "default"
          };
        });
        console.log("\u{1F50D} PaymentForm: Returning results:", results);
        return results;
      }
      console.log("\u{1F50D} PaymentForm: No success or data, returning empty array");
      return [];
    } catch (error2) {
      console.error("\u{1F50D} PaymentForm: Error searching merchants:", error2);
      return [];
    } finally {
      setIsSearchingMerchants(false);
      console.log("\u{1F50D} PaymentForm: Search completed for query:", query);
    }
  }, []);
  useEffect41(() => {
    if (mode === "edit" && existingPayment && plans.length > 0 && planVariants.length > 0) {
      const plan = plans.find((p2) => p2.id === existingPayment.planId);
      const planVariant = planVariants.find((v2) => v2.id === existingPayment.planVariantId);
      if (plan)
        setSelectedPlan(plan);
      if (planVariant)
        setSelectedPlanVariant(planVariant);
    }
  }, [mode, existingPayment, plans, planVariants]);
  useEffect41(() => {
    if (selectedPlan && selectedPlanVariant) {
      const totalAmount = selectedPlanVariant.price;
      const currency = selectedPlan.currency;
      setFormData((prev) => ({
        ...prev,
        amount: Math.round(totalAmount * 100) / 100,
        // Round to 2 decimal places
        currency
      }));
    }
  }, [selectedPlan, selectedPlanVariant]);
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
    if (field === "startDate" && selectedPlanVariant && value) {
      const startDate = new Date(value);
      const endDate = new Date(startDate);
      endDate.setMonth(endDate.getMonth() + selectedPlanVariant.duration);
      const endDateStr = endDate.toISOString().split("T")[0];
      setFormData((prev) => ({ ...prev, endDate: endDateStr }));
    }
  };
  const handlePlanChange = (planId) => {
    const plan = plans.find((p2) => p2.id === planId);
    setSelectedPlan(plan || null);
    setSelectedPlanVariant(null);
    handleInputChange("planId", planId);
    handleInputChange("planVariantId", 0);
  };
  const handlePlanVariantChange = (planVariantId) => {
    const planVariant = planVariants.find((v2) => v2.id === planVariantId);
    setSelectedPlanVariant(planVariant || null);
    handleInputChange("planVariantId", planVariantId);
    if (planVariant && formData.startDate) {
      const startDate = new Date(formData.startDate);
      const endDate = new Date(startDate);
      endDate.setMonth(endDate.getMonth() + planVariant.duration);
      const endDateStr = endDate.toISOString().split("T")[0];
      handleInputChange("endDate", endDateStr);
    }
  };
  const handleSubmit = (e2) => {
    e2.preventDefault();
    if (formData.extendSubscription && !formData.monthsToExtend) {
      alert("Please specify months to extend when extending subscription");
      return;
    }
    if (formData.startDate && formData.endDate) {
      const startDate = new Date(formData.startDate);
      const endDate = new Date(formData.endDate);
      if (endDate <= startDate) {
        alert("End date must be after start date");
        return;
      }
    }
    onSubmit(formData);
  };
  const isFormValid = formData.merchantId && formData.planId && formData.planVariantId > 0 && formData.amount > 0 && formData.startDate && formData.endDate;
  return /* @__PURE__ */ jsxs180(Card55, { children: [
    /* @__PURE__ */ jsx198(CardHeader37, { children: /* @__PURE__ */ jsxs180(CardTitle37, { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx198(DollarSign17, { className: "w-5 h-5" }),
      mode === "edit" ? "Edit Payment" : "Create Manual Payment"
    ] }) }),
    /* @__PURE__ */ jsx198(CardContent54, { children: /* @__PURE__ */ jsxs180("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
      /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx198(Label14, { htmlFor: "merchant", children: "Merchant *" }),
        /* @__PURE__ */ jsx198(
          SearchableSelect4,
          {
            value: formData.merchantId,
            onChange: (merchantId) => handleInputChange("merchantId", merchantId),
            onSearch: searchMerchants,
            placeholder: "Search merchants...",
            searchPlaceholder: "Type to search merchants...",
            emptyText: "No merchants found. Try a different search term.",
            displayMode: "input"
          }
        ),
        isSearchingMerchants && /* @__PURE__ */ jsx198("p", { className: "text-sm text-blue-500", children: "Searching merchants..." }),
        process.env.NODE_ENV === "development" && /* @__PURE__ */ jsx198("p", { className: "text-xs text-gray-400", children: "Debug: Using API search for merchants" })
      ] }),
      /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx198(Label14, { htmlFor: "plan", children: "Plan *" }),
        /* @__PURE__ */ jsx198(
          SearchableSelect4,
          {
            value: formData.planId,
            onChange: (planId) => handlePlanChange(planId),
            options: plans.map((plan) => ({
              value: plan.id.toString(),
              label: `${plan.name} - $${plan.price} ${plan.currency}`,
              description: `Base price: $${plan.price}`,
              type: "default"
            })),
            placeholder: "Search plans...",
            searchPlaceholder: "Type to search plans...",
            emptyText: "No plans found. Please add plans first.",
            displayMode: "input"
          }
        ),
        plans.length === 0 && /* @__PURE__ */ jsx198("p", { className: "text-sm text-red-500", children: "No plans available. Please add plans first." }),
        process.env.NODE_ENV === "development" && /* @__PURE__ */ jsxs180("p", { className: "text-xs text-gray-400", children: [
          "Debug: ",
          plans.length,
          " plans loaded"
        ] })
      ] }),
      selectedPlan && /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx198(Label14, { htmlFor: "planVariant", children: "Plan Variant *" }),
        /* @__PURE__ */ jsx198(
          SearchableSelect4,
          {
            value: formData.planVariantId,
            onChange: (planVariantId) => handlePlanVariantChange(planVariantId),
            options: planVariants.filter((variant) => variant.planId === selectedPlan.id && variant.isActive).map((variant) => ({
              value: variant.id.toString(),
              label: `${variant.name} (${variant.duration} months) - $${variant.price} ${selectedPlan.currency}`,
              description: variant.discount > 0 ? `Save $${variant.savings} with ${variant.discount}% discount` : `Standard pricing`,
              type: "default"
            })),
            placeholder: "Search plan variants...",
            searchPlaceholder: "Type to search plan variants...",
            emptyText: "No plan variants found for this plan.",
            displayMode: "input"
          }
        ),
        planVariants.length === 0 ? /* @__PURE__ */ jsx198("p", { className: "text-sm text-red-500", children: "No plan variants available for this plan. Please add plan variants first." }) : /* @__PURE__ */ jsx198("p", { className: "text-sm text-gray-500", children: "Select a specific plan variant for precise pricing and duration." }),
        process.env.NODE_ENV === "development" && /* @__PURE__ */ jsxs180("p", { className: "text-xs text-gray-400", children: [
          "Debug: ",
          planVariants.length,
          " plan variants loaded, ",
          planVariants.filter((v2) => v2.planId === selectedPlan.id && v2.isActive).length,
          " for selected plan"
        ] })
      ] }),
      formData.amount > 0 && /* @__PURE__ */ jsxs180("div", { className: "p-4 bg-blue-50 rounded-lg", children: [
        /* @__PURE__ */ jsxs180("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsx198("span", { className: "font-medium", children: "Total Amount:" }),
          /* @__PURE__ */ jsxs180("span", { className: "text-xl font-bold text-blue-600", children: [
            "$",
            formData.amount,
            " ",
            formData.currency
          ] })
        ] }),
        selectedPlan && selectedPlanVariant && /* @__PURE__ */ jsxs180("div", { className: "text-sm text-gray-600 mt-1", children: [
          selectedPlan.name,
          " - ",
          selectedPlanVariant.name,
          " (",
          selectedPlanVariant.duration,
          " months)",
          selectedPlanVariant.discount > 0 && /* @__PURE__ */ jsxs180("span", { className: "text-green-600 ml-2", children: [
            "(Save $",
            selectedPlanVariant.savings,
            " with ",
            selectedPlanVariant.discount,
            "% discount)"
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx198(Label14, { htmlFor: "method", children: "Payment Method *" }),
        /* @__PURE__ */ jsxs180(
          Select16,
          {
            value: formData.method,
            onValueChange: (value) => handleInputChange("method", value),
            children: [
              /* @__PURE__ */ jsx198(SelectTrigger16, { children: /* @__PURE__ */ jsx198(SelectValue16, { placeholder: "Select payment method" }) }),
              /* @__PURE__ */ jsx198(SelectContent16, { children: PAYMENT_METHODS2.map((method) => /* @__PURE__ */ jsx198(SelectItem16, { value: method.value, children: /* @__PURE__ */ jsxs180("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ jsx198(CreditCard17, { className: "w-4 h-4" }),
                method.label
              ] }) }, method.value)) })
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs180("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs180("div", { className: "space-y-1", children: [
          /* @__PURE__ */ jsx198(Label14, { htmlFor: "extendSubscription", children: "Extend Existing Subscription" }),
          /* @__PURE__ */ jsx198("p", { className: "text-sm text-gray-600", children: "Check this to extend the merchant's current subscription instead of creating a new one" })
        ] }),
        /* @__PURE__ */ jsx198(
          Switch4,
          {
            checked: formData.extendSubscription,
            onCheckedChange: (checked) => handleInputChange("extendSubscription", checked)
          }
        )
      ] }),
      formData.extendSubscription && /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx198(Label14, { htmlFor: "monthsToExtend", children: "Months to Extend *" }),
        /* @__PURE__ */ jsx198(
          Input27,
          {
            type: "number",
            min: "1",
            max: "60",
            value: formData.monthsToExtend || "",
            onChange: (e2) => handleInputChange("monthsToExtend", parseInt(e2.target.value)),
            placeholder: "Enter number of months"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs180("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx198(Label14, { htmlFor: "invoiceNumber", children: "Invoice Number (Optional)" }),
          /* @__PURE__ */ jsx198(
            Input27,
            {
              value: formData.invoiceNumber || "",
              onChange: (e2) => handleInputChange("invoiceNumber", e2.target.value),
              placeholder: "e.g., INV-2024-001"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx198(Label14, { htmlFor: "transactionId", children: "Transaction ID (Optional)" }),
          /* @__PURE__ */ jsx198(
            Input27,
            {
              value: formData.transactionId || "",
              onChange: (e2) => handleInputChange("transactionId", e2.target.value),
              placeholder: "e.g., txn_123456789"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs180("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx198(Label14, { htmlFor: "startDate", children: "Start Date *" }),
          /* @__PURE__ */ jsx198(
            Input27,
            {
              type: "date",
              value: formData.startDate || "",
              onChange: (e2) => handleInputChange("startDate", e2.target.value),
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx198(Label14, { htmlFor: "endDate", children: "End Date *" }),
          /* @__PURE__ */ jsx198(
            Input27,
            {
              type: "date",
              value: formData.endDate || "",
              onChange: (e2) => handleInputChange("endDate", e2.target.value),
              required: true
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs180("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx198(Label14, { htmlFor: "description", children: "Description" }),
        /* @__PURE__ */ jsx198(
          Textarea7,
          {
            value: formData.description,
            onChange: (e2) => handleInputChange("description", e2.target.value),
            placeholder: "Payment description or notes...",
            rows: 3
          }
        )
      ] }),
      /* @__PURE__ */ jsxs180("div", { className: "flex items-center justify-end gap-3 pt-4", children: [
        /* @__PURE__ */ jsx198(
          Button59,
          {
            type: "button",
            variant: "outline",
            onClick: onCancel,
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx198(
          Button59,
          {
            type: "submit",
            disabled: !isFormValid || loading,
            className: "min-w-[120px]",
            children: loading ? mode === "edit" ? "Updating..." : "Creating..." : mode === "edit" ? "Update Payment" : "Create Payment"
          }
        )
      ] })
    ] }) })
  ] });
};

// src/components/features/Payments/components/PaymentDetailDialog.tsx
import {
  CreditCard as CreditCard18,
  DollarSign as DollarSign18,
  Clock as Clock18,
  CheckCircle as CheckCircle22,
  XCircle as XCircle15,
  AlertCircle as AlertCircle14,
  Building as Building6,
  Package as Package19,
  FileText as FileText3,
  RotateCcw as RotateCcw2,
  Download as Download9
} from "lucide-react";
import { jsx as jsx199, jsxs as jsxs181 } from "react/jsx-runtime";
var PaymentDetailDialog = ({
  open,
  onOpenChange,
  payment,
  onProcessPayment,
  onRefundPayment,
  onDownloadReceipt
}) => {
  if (!payment)
    return null;
  const getStatusBadge = (status) => {
    const statusConfig = {
      "completed": { color: "bg-action-success/10 text-action-success", icon: CheckCircle22, text: "Completed" },
      "pending": { color: "bg-action-warning/10 text-action-warning", icon: Clock18, text: "Pending" },
      "failed": { color: "bg-action-danger/10 text-action-danger", icon: XCircle15, text: "Failed" },
      "refunded": { color: "bg-text-tertiary/10 text-text-tertiary", icon: AlertCircle14, text: "Refunded" }
    };
    const config = statusConfig[status];
    const Icon2 = config.icon;
    return /* @__PURE__ */ jsxs181("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`, children: [
      /* @__PURE__ */ jsx199(Icon2, { className: "w-3 h-3 mr-1" }),
      config.text
    ] });
  };
  const getPaymentMethodIcon = (method) => {
    const methodConfig = {
      "credit_card": CreditCard18,
      "bank_transfer": DollarSign18,
      "paypal": DollarSign18,
      "stripe": CreditCard18
    };
    const Icon2 = methodConfig[method] || CreditCard18;
    return /* @__PURE__ */ jsx199(Icon2, { className: "w-4 h-4" });
  };
  const getPaymentMethodText = (method) => {
    const methodConfig = {
      "credit_card": "Credit Card",
      "bank_transfer": "Bank Transfer",
      "paypal": "PayPal",
      "stripe": "Stripe"
    };
    return methodConfig[method] || method;
  };
  const formatDate11 = (date2) => {
    return new Date(date2).toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  };
  const formatCurrency22 = (amount, currency = "USD") => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency
    }).format(amount);
  };
  return /* @__PURE__ */ jsx199(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxs181(DialogContent, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsx199(DialogHeader, { children: /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs181("div", { children: [
        /* @__PURE__ */ jsx199(DialogTitle, { className: "text-xl font-semibold", children: "Payment Details" }),
        /* @__PURE__ */ jsx199(DialogDescription, { className: "text-sm text-text-secondary mt-1", children: "View payment information and transaction details" })
      ] }),
      /* @__PURE__ */ jsx199("div", { className: "flex items-center gap-2", children: onDownloadReceipt && /* @__PURE__ */ jsxs181(
        Button2,
        {
          variant: "outline",
          size: "sm",
          onClick: () => onDownloadReceipt(payment.id),
          className: "flex items-center gap-2",
          children: [
            /* @__PURE__ */ jsx199(Download9, { className: "w-4 h-4" }),
            "Receipt"
          ]
        }
      ) })
    ] }) }),
    /* @__PURE__ */ jsxs181("div", { className: "mt-6 space-y-6", children: [
      /* @__PURE__ */ jsx199(Card, { children: /* @__PURE__ */ jsxs181(CardContent, { className: "p-6", children: [
        /* @__PURE__ */ jsxs181("h3", { className: "text-lg font-medium text-gray-900 mb-4 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx199("span", { className: "w-2 h-2 bg-blue-500 rounded-full" }),
          "Payment Overview"
        ] }),
        /* @__PURE__ */ jsxs181("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs181("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Payment ID:" }),
              /* @__PURE__ */ jsxs181("span", { className: "text-sm text-gray-900", children: [
                "#",
                payment.id
              ] })
            ] }),
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Status:" }),
              getStatusBadge(payment.status)
            ] }),
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Amount:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-lg font-bold text-gray-900", children: formatCurrency22(payment.amount, payment.currency) })
            ] }),
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Method:" }),
              /* @__PURE__ */ jsxs181("div", { className: "flex items-center gap-2", children: [
                getPaymentMethodIcon(payment.method),
                /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: getPaymentMethodText(payment.method) })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs181("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Created:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: formatDate11(payment.createdAt) })
            ] }),
            payment.processedAt && /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Processed:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: formatDate11(payment.processedAt) })
            ] }),
            payment.updatedAt && /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Updated:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: formatDate11(payment.updatedAt) })
            ] }),
            payment.transactionId && /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Transaction ID:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900 font-mono", children: payment.transactionId })
            ] })
          ] })
        ] })
      ] }) }),
      payment.subscription?.merchant && /* @__PURE__ */ jsx199(Card, { children: /* @__PURE__ */ jsxs181(CardContent, { className: "p-6", children: [
        /* @__PURE__ */ jsxs181("h3", { className: "text-lg font-medium text-gray-900 mb-4 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx199(Building6, { className: "w-5 h-5" }),
          "Merchant Information"
        ] }),
        /* @__PURE__ */ jsxs181("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs181("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Merchant Name:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: payment.subscription.merchant.name })
            ] }),
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Email:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: payment.subscription.merchant.email })
            ] })
          ] }),
          /* @__PURE__ */ jsx199("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Merchant ID:" }),
            /* @__PURE__ */ jsxs181("span", { className: "text-sm text-gray-900", children: [
              "#",
              payment.subscription.merchant.id
            ] })
          ] }) })
        ] })
      ] }) }),
      payment.subscription?.plan && /* @__PURE__ */ jsx199(Card, { children: /* @__PURE__ */ jsxs181(CardContent, { className: "p-6", children: [
        /* @__PURE__ */ jsxs181("h3", { className: "text-lg font-medium text-gray-900 mb-4 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx199(Package19, { className: "w-5 h-5" }),
          "Subscription Details"
        ] }),
        /* @__PURE__ */ jsxs181("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs181("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Plan:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: payment.subscription.plan.name })
            ] }),
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Plan Price:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: formatCurrency22(payment.subscription.plan.price, payment.subscription.plan.currency) })
            ] })
          ] }),
          /* @__PURE__ */ jsxs181("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Plan Variant:" }),
              /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900", children: payment.subscription.planVariant?.name || "N/A" })
            ] }),
            /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Subscription Status:" }),
              /* @__PURE__ */ jsx199(Badge, { variant: "outline", className: "text-xs", children: payment.subscription.status })
            ] })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx199(Card, { children: /* @__PURE__ */ jsxs181(CardContent, { className: "p-6", children: [
        /* @__PURE__ */ jsxs181("h3", { className: "text-lg font-medium text-gray-900 mb-4 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx199(FileText3, { className: "w-5 h-5" }),
          "Additional Information"
        ] }),
        /* @__PURE__ */ jsxs181("div", { className: "space-y-4", children: [
          payment.invoiceNumber && /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Invoice Number:" }),
            /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900 font-mono", children: payment.invoiceNumber })
          ] }),
          payment.description && /* @__PURE__ */ jsxs181("div", { className: "flex items-start justify-between", children: [
            /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-gray-600", children: "Description:" }),
            /* @__PURE__ */ jsx199("span", { className: "text-sm text-gray-900 max-w-xs text-right", children: payment.description })
          ] }),
          payment.failureReason && /* @__PURE__ */ jsxs181("div", { className: "flex items-start justify-between", children: [
            /* @__PURE__ */ jsx199("span", { className: "text-sm font-medium text-red-600", children: "Failure Reason:" }),
            /* @__PURE__ */ jsx199("span", { className: "text-sm text-red-600 max-w-xs text-right", children: payment.failureReason })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs181("div", { className: "flex items-center justify-end gap-3 pt-4 border-t", children: [
        payment.status === "pending" && onProcessPayment && /* @__PURE__ */ jsxs181(
          Button2,
          {
            onClick: () => onProcessPayment(payment.id),
            className: "flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx199(CheckCircle22, { className: "w-4 h-4" }),
              "Process Payment"
            ]
          }
        ),
        payment.status === "completed" && onRefundPayment && /* @__PURE__ */ jsxs181(
          Button2,
          {
            variant: "outline",
            onClick: () => onRefundPayment(payment.id),
            className: "flex items-center gap-2 text-red-600 hover:text-red-700",
            children: [
              /* @__PURE__ */ jsx199(RotateCcw2, { className: "w-4 h-4" }),
              "Refund Payment"
            ]
          }
        ),
        /* @__PURE__ */ jsx199(
          Button2,
          {
            variant: "outline",
            onClick: () => onOpenChange(false),
            children: "Close"
          }
        )
      ] })
    ] })
  ] }) });
};

// src/components/features/Payments/components/PaymentTable.tsx
import { useState as useState78 } from "react";
import {
  Eye as Eye23,
  Download as Download10,
  CreditCard as CreditCard19,
  MoreVertical as MoreVertical9,
  RefreshCcw
} from "lucide-react";
import { Fragment as Fragment46, jsx as jsx200, jsxs as jsxs182 } from "react/jsx-runtime";
function PaymentTable({
  payments,
  onView,
  onDownloadReceipt,
  onRefund,
  loading = false
}) {
  const [openMenuId, setOpenMenuId] = useState78(null);
  const formatCurrency22 = (amount, currency = "USD") => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency
    }).format(amount);
  };
  const formatDate11 = (date2) => {
    return new Date(date2).toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const getStatusBadge = (status) => {
    const statusMap = {
      "completed": "active",
      "pending": "warning",
      "failed": "danger",
      "refunded": "inactive"
    };
    return /* @__PURE__ */ jsx200(StatusBadge, { status: statusMap[status.toLowerCase()] || "inactive" });
  };
  const getPaymentMethodText = (method) => {
    const methodConfig = {
      "credit_card": "Credit Card",
      "bank_transfer": "Bank Transfer",
      "paypal": "PayPal",
      "stripe": "Stripe"
    };
    return methodConfig[method.toLowerCase()] || method;
  };
  if (loading) {
    return /* @__PURE__ */ jsx200(Card, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx200(CardContent, { className: "p-0", children: /* @__PURE__ */ jsx200("div", { className: "animate-pulse space-y-4 p-6", children: [...Array(3)].map((_, i) => /* @__PURE__ */ jsx200("div", { className: "h-16 bg-bg-tertiary rounded" }, i)) }) }) });
  }
  if (payments.length === 0) {
    return /* @__PURE__ */ jsx200(Card, { className: "shadow-sm border-border", children: /* @__PURE__ */ jsx200(CardContent, { className: "text-center py-12", children: /* @__PURE__ */ jsxs182("div", { className: "text-text-tertiary", children: [
      /* @__PURE__ */ jsx200("div", { className: "text-4xl mb-4", children: "\u{1F4B3}" }),
      /* @__PURE__ */ jsx200("h3", { className: "text-lg font-medium mb-2", children: "No payments found" }),
      /* @__PURE__ */ jsx200("p", { className: "text-sm", children: "Try adjusting your search or filter criteria." })
    ] }) }) });
  }
  return /* @__PURE__ */ jsx200(Card, { className: "shadow-sm border-border flex flex-col h-full", children: /* @__PURE__ */ jsx200(CardContent, { className: "p-0 flex-1 overflow-hidden", children: /* @__PURE__ */ jsx200("div", { className: "flex-1 overflow-auto h-full", children: /* @__PURE__ */ jsxs182("table", { className: "w-full", children: [
    /* @__PURE__ */ jsx200("thead", { className: "bg-bg-secondary border-b border-border sticky top-0 z-10", children: /* @__PURE__ */ jsxs182("tr", { children: [
      /* @__PURE__ */ jsx200("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Merchant" }),
      /* @__PURE__ */ jsx200("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Plan" }),
      /* @__PURE__ */ jsx200("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Amount" }),
      /* @__PURE__ */ jsx200("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Method" }),
      /* @__PURE__ */ jsx200("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Status" }),
      /* @__PURE__ */ jsx200("th", { className: "px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Date" }),
      /* @__PURE__ */ jsx200("th", { className: "px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Actions" })
    ] }) }),
    /* @__PURE__ */ jsx200("tbody", { className: "bg-bg-card divide-y divide-border", children: payments.map((payment) => /* @__PURE__ */ jsxs182("tr", { className: "hover:bg-bg-secondary transition-colors", children: [
      /* @__PURE__ */ jsx200("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxs182("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsx200("div", { className: "flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-action-primary to-brand-primary flex items-center justify-center", children: /* @__PURE__ */ jsx200(CreditCard19, { className: "w-5 h-5 text-white" }) }),
        /* @__PURE__ */ jsxs182("div", { children: [
          /* @__PURE__ */ jsx200("div", { className: "text-sm font-medium text-text-primary", children: payment.subscription?.merchant?.name || "Unknown Merchant" }),
          payment.invoiceNumber && /* @__PURE__ */ jsxs182("div", { className: "text-xs text-text-tertiary", children: [
            "INV: ",
            payment.invoiceNumber
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx200("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx200("div", { className: "text-sm text-text-primary", children: payment.subscription?.plan?.name || "Unknown Plan" }) }),
      /* @__PURE__ */ jsx200("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx200("div", { className: "text-sm font-medium text-text-primary", children: formatCurrency22(payment.amount, payment.currency) }) }),
      /* @__PURE__ */ jsx200("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx200("div", { className: "text-sm text-text-primary", children: getPaymentMethodText(payment.method) }) }),
      /* @__PURE__ */ jsx200("td", { className: "px-6 py-4", children: getStatusBadge(payment.status) }),
      /* @__PURE__ */ jsx200("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsx200("div", { className: "text-sm text-text-primary", children: formatDate11(payment.createdAt) }) }),
      /* @__PURE__ */ jsx200("td", { className: "px-6 py-4 text-right", children: /* @__PURE__ */ jsxs182(DropdownMenu, { children: [
        /* @__PURE__ */ jsx200(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsx200(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => setOpenMenuId(openMenuId === payment.id ? null : payment.id),
            children: /* @__PURE__ */ jsx200(MoreVertical9, { className: "h-4 w-4" })
          }
        ) }),
        /* @__PURE__ */ jsxs182(
          DropdownMenuContent,
          {
            align: "end",
            open: openMenuId === payment.id,
            onOpenChange: (open) => setOpenMenuId(open ? payment.id : null),
            children: [
              onView && /* @__PURE__ */ jsxs182(
                DropdownMenuItem,
                {
                  onClick: () => {
                    onView(payment);
                    setOpenMenuId(null);
                  },
                  children: [
                    /* @__PURE__ */ jsx200(Eye23, { className: "h-4 w-4 mr-2" }),
                    "View Details"
                  ]
                }
              ),
              onDownloadReceipt && /* @__PURE__ */ jsxs182(
                DropdownMenuItem,
                {
                  onClick: () => {
                    onDownloadReceipt(payment);
                    setOpenMenuId(null);
                  },
                  children: [
                    /* @__PURE__ */ jsx200(Download10, { className: "h-4 w-4 mr-2" }),
                    "Download Receipt"
                  ]
                }
              ),
              onRefund && payment.status === "completed" && /* @__PURE__ */ jsxs182(Fragment46, { children: [
                /* @__PURE__ */ jsx200(DropdownMenuSeparator, {}),
                /* @__PURE__ */ jsxs182(
                  DropdownMenuItem,
                  {
                    onClick: () => {
                      onRefund(payment);
                      setOpenMenuId(null);
                    },
                    className: "text-action-danger focus:text-action-danger",
                    children: [
                      /* @__PURE__ */ jsx200(RefreshCcw, { className: "h-4 w-4 mr-2" }),
                      "Refund Payment"
                    ]
                  }
                )
              ] })
            ]
          }
        )
      ] }) })
    ] }, payment.id)) })
  ] }) }) }) });
}

// src/components/features/Admin/components/StatsOverview.tsx
import { jsx as jsx201, jsxs as jsxs183 } from "react/jsx-runtime";
function StatsOverview({ stats, className = "" }) {
  return /* @__PURE__ */ jsx201("div", { className: `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 ${className}`, children: stats.map((stat, index) => {
    const Icon2 = stat.icon;
    return /* @__PURE__ */ jsx201(Card, { children: /* @__PURE__ */ jsx201(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs183("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs183("div", { children: [
        /* @__PURE__ */ jsx201("p", { className: "text-sm font-medium text-text-secondary mb-2", children: stat.label }),
        /* @__PURE__ */ jsx201("p", { className: `text-2xl font-bold ${stat.color} mb-1`, children: stat.value }),
        stat.trend && /* @__PURE__ */ jsxs183("div", { className: `flex items-center gap-1 text-sm ${stat.trend.isPositive ? "text-green-600" : "text-red-600"}`, children: [
          /* @__PURE__ */ jsx201("span", { children: stat.trend.isPositive ? "\u2197" : "\u2198" }),
          /* @__PURE__ */ jsxs183("span", { children: [
            Math.abs(stat.trend.value),
            "%"
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsx201("div", { className: `p-3 rounded-full ${stat.bgColor}`, children: /* @__PURE__ */ jsx201(Icon2, { className: `h-6 w-6 ${stat.color}` }) })
    ] }) }) }, index);
  }) });
}

// src/components/features/Admin/components/SearchAndFilters.tsx
import { Search as Search4 } from "lucide-react";
import { jsx as jsx202, jsxs as jsxs184 } from "react/jsx-runtime";
function SearchAndFilters({
  searchTerm,
  onSearchChange,
  searchPlaceholder = "Search...",
  filters = [],
  className = ""
}) {
  return /* @__PURE__ */ jsx202(Card, { className, children: /* @__PURE__ */ jsx202(CardContent, { children: /* @__PURE__ */ jsxs184("div", { className: "flex flex-col sm:flex-row gap-4", children: [
    /* @__PURE__ */ jsx202("div", { className: "flex-1", children: /* @__PURE__ */ jsxs184("div", { className: "relative", children: [
      /* @__PURE__ */ jsx202(Search4, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary w-4 h-4" }),
      /* @__PURE__ */ jsx202(
        Input,
        {
          type: "text",
          placeholder: searchPlaceholder,
          value: searchTerm,
          onChange: (e2) => onSearchChange(e2.target.value),
          className: "w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-action-primary focus:border-transparent"
        }
      )
    ] }) }),
    filters.length > 0 && /* @__PURE__ */ jsx202("div", { className: "flex gap-2", children: filters.map((filter, index) => /* @__PURE__ */ jsx202(
      "select",
      {
        value: filter.value,
        onChange: (e2) => filter.onChange(e2.target.value),
        className: "px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-action-primary focus:border-transparent",
        children: filter.options.map((option) => /* @__PURE__ */ jsx202("option", { value: option.value, children: option.label }, option.value))
      },
      index
    )) })
  ] }) }) });
}

// src/components/features/Admin/components/StatusBadge.tsx
import { jsx as jsx203 } from "react/jsx-runtime";
function AdminStatusBadge({ status, type = "default", className = "" }) {
  const getStatusConfig = () => {
    switch (type) {
      case "role":
        return {
          "ADMIN": { color: "bg-red-100 text-red-800", text: "Admin" },
          "MERCHANT": { color: "bg-blue-100 text-blue-800", text: "Merchant" },
          "OUTLET_ADMIN": { color: "bg-green-100 text-green-800", text: "Outlet Admin" },
          "OUTLET_STAFF": { color: "bg-gray-100 text-gray-800", text: "Outlet Staff" }
        };
      case "user":
        return {
          "ACTIVE": { color: "bg-green-100 text-green-800", text: "Active" },
          "INACTIVE": { color: "bg-gray-100 text-gray-800", text: "Inactive" },
          "PENDING": { color: "bg-yellow-100 text-yellow-800", text: "Pending" },
          "SUSPENDED": { color: "bg-red-100 text-red-800", text: "Suspended" }
        };
      case "system":
        return {
          "HEALTHY": { color: "bg-green-100 text-green-800", text: "Healthy" },
          "WARNING": { color: "bg-yellow-100 text-yellow-800", text: "Warning" },
          "ERROR": { color: "bg-red-100 text-red-800", text: "Error" },
          "MAINTENANCE": { color: "bg-blue-100 text-blue-800", text: "Maintenance" }
        };
      case "audit":
        return {
          "SUCCESS": { color: "bg-green-100 text-green-800", text: "Success" },
          "FAILED": { color: "bg-red-100 text-red-800", text: "Failed" },
          "WARNING": { color: "bg-yellow-100 text-yellow-800", text: "Warning" },
          "LOW": { color: "bg-gray-100 text-gray-800", text: "Low" },
          "MEDIUM": { color: "bg-blue-100 text-blue-800", text: "Medium" },
          "HIGH": { color: "bg-orange-100 text-orange-800", text: "High" },
          "CRITICAL": { color: "bg-red-100 text-red-800", text: "Critical" }
        };
      default:
        return {
          "SUCCESS": { color: "bg-green-100 text-green-800", text: "Success" },
          "ERROR": { color: "bg-red-100 text-red-800", text: "Error" },
          "WARNING": { color: "bg-yellow-100 text-yellow-800", text: "Warning" },
          "INFO": { color: "bg-blue-100 text-blue-800", text: "Info" }
        };
    }
  };
  const config = getStatusConfig()[status];
  if (!config) {
    return /* @__PURE__ */ jsx203("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 ${className}`, children: status });
  }
  return /* @__PURE__ */ jsx203("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color} ${className}`, children: config.text });
}

// src/components/features/Admin/components/ActionButton.tsx
import { jsx as jsx204, jsxs as jsxs185 } from "react/jsx-runtime";
function ActionButton({
  icon: Icon2,
  label,
  onClick,
  variant = "outline",
  size = "sm",
  disabled = false,
  className = ""
}) {
  return /* @__PURE__ */ jsxs185(
    Button2,
    {
      variant,
      size,
      onClick,
      disabled,
      className,
      children: [
        /* @__PURE__ */ jsx204(Icon2, { className: "w-4 h-4 mr-2" }),
        label
      ]
    }
  );
}

// src/components/features/Admin/components/EmptyState.tsx
import { jsx as jsx205, jsxs as jsxs186 } from "react/jsx-runtime";
function EmptyState7({
  icon: Icon2,
  title,
  description,
  actionLabel,
  onAction,
  className = ""
}) {
  return /* @__PURE__ */ jsx205(Card, { className, children: /* @__PURE__ */ jsx205(CardContent, { children: /* @__PURE__ */ jsxs186("div", { className: "text-center py-12", children: [
    /* @__PURE__ */ jsx205(Icon2, { className: "w-12 h-12 text-text-tertiary mx-auto mb-4" }),
    /* @__PURE__ */ jsx205("h3", { className: "text-lg font-medium text-text-secondary mb-2", children: title }),
    /* @__PURE__ */ jsx205("p", { className: "text-text-tertiary mb-4", children: description }),
    actionLabel && onAction && /* @__PURE__ */ jsx205(Button2, { onClick: onAction, children: actionLabel })
  ] }) }) });
}

// src/components/features/Admin/components/DataTable.tsx
import { jsx as jsx206, jsxs as jsxs187 } from "react/jsx-runtime";
function DataTable({
  data,
  columns,
  loading = false,
  onRowClick,
  className = ""
}) {
  if (loading) {
    return /* @__PURE__ */ jsx206(Card, { className, children: /* @__PURE__ */ jsx206(CardContent, { children: /* @__PURE__ */ jsxs187("div", { className: "animate-pulse", children: [
      /* @__PURE__ */ jsx206("div", { className: "h-12 bg-bg-tertiary rounded mb-4" }),
      [...Array(5)].map((_, i) => /* @__PURE__ */ jsx206("div", { className: "h-16 bg-bg-tertiary rounded mb-2" }, i))
    ] }) }) });
  }
  return /* @__PURE__ */ jsx206(Card, { className, children: /* @__PURE__ */ jsx206(CardContent, { children: /* @__PURE__ */ jsx206("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsxs187("table", { className: "w-full", children: [
    /* @__PURE__ */ jsx206("thead", { children: /* @__PURE__ */ jsx206("tr", { className: "border-b border-border", children: columns.map((column) => /* @__PURE__ */ jsx206(
      "th",
      {
        className: `text-left py-3 px-4 font-medium text-text-secondary ${column.className || ""}`,
        children: column.label
      },
      column.key
    )) }) }),
    /* @__PURE__ */ jsx206("tbody", { children: data.map((row, index) => /* @__PURE__ */ jsx206(
      "tr",
      {
        className: `border-b border-border hover:bg-bg-secondary transition-colors ${onRowClick ? "cursor-pointer" : ""}`,
        onClick: () => onRowClick?.(row),
        children: columns.map((column) => /* @__PURE__ */ jsx206("td", { className: "py-3 px-4", children: column.render ? column.render(row[column.key], row) : row[column.key] }, column.key))
      },
      index
    )) })
  ] }) }) }) });
}

// src/components/layout/PageWrapper.tsx
import { jsx as jsx207, jsxs as jsxs188 } from "react/jsx-runtime";
var maxWidthClasses = {
  sm: "max-w-sm",
  md: "max-w-md",
  lg: "max-w-lg",
  xl: "max-w-xl",
  "2xl": "max-w-2xl",
  "7xl": "max-w-7xl",
  full: "max-w-full"
};
var paddingClasses = {
  none: "",
  sm: "px-4 py-4",
  md: "px-6 py-6",
  lg: "px-8 py-8",
  xl: "px-10 py-10"
};
var spacingClasses = {
  none: "",
  sm: "space-y-4",
  md: "space-y-6",
  lg: "space-y-8",
  xl: "space-y-10"
};
function PageWrapper4({
  children,
  className,
  container = true,
  maxWidth = "7xl",
  padding = "sm",
  spacing = "sm",
  scrollMode = "page"
}) {
  if (scrollMode === "content") {
    return /* @__PURE__ */ jsx207("div", { className: "h-screen overflow-y-auto", children: /* @__PURE__ */ jsx207("div", { className: cn2(
      // Base container
      container && "mx-auto",
      // Max width
      maxWidth !== "full" && maxWidthClasses[maxWidth],
      // Padding
      padding !== "none" && paddingClasses[padding],
      // Spacing between children
      spacing !== "none" && spacingClasses[spacing],
      // Custom classes
      className
    ), children }) });
  }
  return /* @__PURE__ */ jsx207("div", { className: cn2(
    // Base container
    container && "mx-auto",
    // Max width
    maxWidth !== "full" && maxWidthClasses[maxWidth],
    // Padding
    padding !== "none" && paddingClasses[padding],
    // Spacing between children
    spacing !== "none" && spacingClasses[spacing],
    // Custom classes
    className
  ), children });
}
function PageHeader({
  children,
  className
}) {
  return /* @__PURE__ */ jsx207("div", { className: cn2("mb-4", className), children });
}
function PageTitle({
  children,
  className,
  subtitle
}) {
  return /* @__PURE__ */ jsxs188("div", { className: cn2("mb-2", className), children: [
    /* @__PURE__ */ jsx207("h1", { className: "text-3xl font-bold text-gray-900", children }),
    subtitle && /* @__PURE__ */ jsx207("p", { className: "text-gray-600 mt-1", children: subtitle })
  ] });
}
function PageContent4({
  children,
  className
}) {
  return /* @__PURE__ */ jsx207("div", { className: cn2("space-y-4", className), children });
}
function PageSection({
  children,
  className,
  title
}) {
  return /* @__PURE__ */ jsxs188("section", { className: cn2("space-y-4", className), children: [
    title && /* @__PURE__ */ jsx207("h2", { className: "text-xl font-semibold text-gray-900", children: title }),
    children
  ] });
}

// src/components/features/Admin/components/AdminPageHeader.tsx
import { jsx as jsx208, jsxs as jsxs189 } from "react/jsx-runtime";
function AdminPageHeader({
  title,
  subtitle,
  actionLabel,
  actionIcon: ActionIcon,
  onAction,
  className = ""
}) {
  return /* @__PURE__ */ jsx208(PageHeader, { className, children: /* @__PURE__ */ jsxs189("div", { className: "flex justify-between items-start", children: [
    /* @__PURE__ */ jsx208("div", { children: /* @__PURE__ */ jsx208(PageTitle, { subtitle, children: title }) }),
    actionLabel && onAction && ActionIcon && /* @__PURE__ */ jsxs189(Button2, { onClick: onAction, children: [
      /* @__PURE__ */ jsx208(ActionIcon, { className: "w-4 h-4 mr-2" }),
      actionLabel
    ] })
  ] }) });
}

// src/components/features/Admin/components/SettingsNavigation.tsx
import { jsx as jsx209, jsxs as jsxs190 } from "react/jsx-runtime";
function SettingsNavigation({
  tabs,
  activeTab,
  onTabChange,
  className = ""
}) {
  return /* @__PURE__ */ jsxs190(Card, { className, children: [
    /* @__PURE__ */ jsx209(CardHeader, { children: /* @__PURE__ */ jsx209(CardTitle, { children: "Settings Categories" }) }),
    /* @__PURE__ */ jsx209(CardContent, { children: /* @__PURE__ */ jsx209("nav", { className: "space-y-2", children: tabs.map((tab) => {
      const Icon2 = tab.icon;
      return /* @__PURE__ */ jsxs190(
        Button2,
        {
          variant: "ghost",
          onClick: () => onTabChange(tab.id),
          className: `w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors justify-start h-auto ${activeTab === tab.id ? "bg-action-primary text-text-inverted" : "text-text-secondary hover:text-text-primary hover:bg-bg-secondary"}`,
          children: [
            /* @__PURE__ */ jsx209(Icon2, { className: "w-4 h-4" }),
            tab.label
          ]
        },
        tab.id
      );
    }) }) })
  ] });
}

// src/components/features/Admin/components/SettingsForm.tsx
import { jsx as jsx210, jsxs as jsxs191 } from "react/jsx-runtime";
function SettingsForm({
  title,
  fields,
  values,
  onChange,
  onSave,
  onReset,
  saving = false,
  className = ""
}) {
  const renderField = (field) => {
    const commonProps = {
      value: values[field.name] || "",
      onChange: (e2) => onChange(field.name, e2.target.value),
      placeholder: field.placeholder,
      required: field.required,
      min: field.min,
      max: field.max
    };
    switch (field.type) {
      case "textarea":
        return /* @__PURE__ */ jsx210(
          Textarea,
          {
            ...commonProps,
            rows: field.rows || 3,
            onChange: (e2) => onChange(field.name, e2.target.value)
          }
        );
      case "select":
        return /* @__PURE__ */ jsx210(
          Select,
          {
            value: values[field.name] || "",
            onValueChange: (value) => onChange(field.name, value),
            children: field.options?.map((option) => /* @__PURE__ */ jsx210("option", { value: option.value, children: option.label }, option.value))
          }
        );
      case "switch":
        return /* @__PURE__ */ jsxs191("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs191("div", { children: [
            /* @__PURE__ */ jsx210("label", { className: "text-sm font-medium text-text-secondary", children: field.label }),
            field.description && /* @__PURE__ */ jsx210("p", { className: "text-xs text-text-tertiary", children: field.description })
          ] }),
          /* @__PURE__ */ jsx210(
            Switch,
            {
              checked: values[field.name] || false,
              onCheckedChange: (checked) => onChange(field.name, checked)
            }
          )
        ] });
      default:
        return /* @__PURE__ */ jsx210(Input, { ...commonProps, type: field.type });
    }
  };
  return /* @__PURE__ */ jsxs191(Card, { className, children: [
    /* @__PURE__ */ jsx210(CardHeader, { children: /* @__PURE__ */ jsxs191("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsx210(CardTitle, { children: title }),
      /* @__PURE__ */ jsxs191("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx210(Button2, { variant: "outline", onClick: onReset, children: "Reset" }),
        /* @__PURE__ */ jsx210(Button2, { onClick: onSave, disabled: saving, children: saving ? "Saving..." : "Save" })
      ] })
    ] }) }),
    /* @__PURE__ */ jsx210(CardContent, { children: /* @__PURE__ */ jsx210("div", { className: "space-y-6", children: fields.map((field) => /* @__PURE__ */ jsxs191("div", { children: [
      field.type !== "switch" && /* @__PURE__ */ jsxs191("label", { className: "block text-sm font-medium text-text-secondary mb-2", children: [
        field.label,
        field.required && /* @__PURE__ */ jsx210("span", { className: "text-red-500 ml-1", children: "*" })
      ] }),
      renderField(field),
      field.description && field.type !== "switch" && /* @__PURE__ */ jsx210("p", { className: "text-xs text-text-tertiary mt-1", children: field.description })
    ] }, field.name)) }) })
  ] });
}

// src/components/features/Admin/components/SystemStatus.tsx
import { jsx as jsx211, jsxs as jsxs192 } from "react/jsx-runtime";
function SystemStatus({ statusItems, className = "" }) {
  const getStatusColor11 = (status) => {
    switch (status) {
      case "healthy":
        return "text-green-600";
      case "warning":
        return "text-yellow-600";
      case "error":
        return "text-red-600";
      default:
        return "text-blue-600";
    }
  };
  const getStatusBgColor = (status) => {
    switch (status) {
      case "healthy":
        return "bg-green-100";
      case "warning":
        return "bg-yellow-100";
      case "error":
        return "bg-red-100";
      default:
        return "bg-blue-100";
    }
  };
  return /* @__PURE__ */ jsx211("div", { className: `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 ${className}`, children: statusItems.map((item, index) => {
    const Icon2 = item.icon;
    const statusColor = item.status ? getStatusColor11(item.status) : item.color;
    const statusBgColor = item.status ? getStatusBgColor(item.status) : item.bgColor;
    return /* @__PURE__ */ jsx211(Card, { children: /* @__PURE__ */ jsx211(CardContent, { children: /* @__PURE__ */ jsxs192("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs192("div", { children: [
        /* @__PURE__ */ jsx211("p", { className: "text-sm font-medium text-text-secondary", children: item.label }),
        /* @__PURE__ */ jsx211("p", { className: `text-2xl font-bold ${statusColor}`, children: item.value })
      ] }),
      /* @__PURE__ */ jsx211("div", { className: `p-3 rounded-full ${statusBgColor}`, children: /* @__PURE__ */ jsx211(Icon2, { className: `h-6 w-6 ${statusColor}` }) })
    ] }) }) }, index);
  }) });
}

// src/components/features/Admin/components/SettingsLayout.tsx
import { jsx as jsx212, jsxs as jsxs193 } from "react/jsx-runtime";
function SettingsLayout({
  title,
  subtitle,
  tabs,
  activeTab,
  onTabChange,
  statusItems,
  children,
  onSave,
  onReset,
  saving = false,
  className = ""
}) {
  return /* @__PURE__ */ jsxs193(PageWrapper4, { className, children: [
    /* @__PURE__ */ jsx212(
      AdminPageHeader,
      {
        title,
        subtitle,
        actionLabel: "Save Changes",
        onAction: onSave
      }
    ),
    /* @__PURE__ */ jsxs193(PageContent4, { children: [
      /* @__PURE__ */ jsx212(
        SystemStatus,
        {
          statusItems,
          className: "mb-8"
        }
      ),
      /* @__PURE__ */ jsxs193("div", { className: "grid grid-cols-1 lg:grid-cols-4 gap-6", children: [
        /* @__PURE__ */ jsx212("div", { className: "lg:col-span-1", children: /* @__PURE__ */ jsx212(
          SettingsNavigation,
          {
            tabs,
            activeTab,
            onTabChange
          }
        ) }),
        /* @__PURE__ */ jsx212("div", { className: "lg:col-span-3", children })
      ] })
    ] })
  ] });
}

// src/components/features/Admin/components/SettingsFields.tsx
import { Globe as Globe2, Shield as Shield4, Mail as Mail8, Bell as Bell2, Server } from "lucide-react";
var settingsTabs = [
  { id: "general", label: "General", icon: Globe2 },
  { id: "security", label: "Security", icon: Shield4 },
  { id: "email", label: "Email", icon: Mail8 },
  { id: "notifications", label: "Notifications", icon: Bell2 },
  { id: "system", label: "System", icon: Server }
];
var generalSettingsFields = [
  {
    type: "text",
    name: "siteName",
    label: "Site Name",
    placeholder: "Enter site name",
    required: true
  },
  {
    type: "select",
    name: "defaultLanguage",
    label: "Default Language",
    options: [
      { value: "en", label: "English" },
      { value: "es", label: "Spanish" },
      { value: "fr", label: "French" },
      { value: "de", label: "German" }
    ]
  },
  {
    type: "textarea",
    name: "siteDescription",
    label: "Site Description",
    placeholder: "Enter site description",
    rows: 3
  },
  {
    type: "select",
    name: "timezone",
    label: "Timezone",
    options: [
      { value: "UTC", label: "UTC" },
      { value: "America/New_York", label: "Eastern Time" },
      { value: "America/Chicago", label: "Central Time" },
      { value: "America/Denver", label: "Mountain Time" },
      { value: "America/Los_Angeles", label: "Pacific Time" }
    ]
  },
  {
    type: "select",
    name: "dateFormat",
    label: "Date Format",
    options: [
      { value: "MM/DD/YYYY", label: "MM/DD/YYYY" },
      { value: "DD/MM/YYYY", label: "DD/MM/YYYY" },
      { value: "YYYY-MM-DD", label: "YYYY-MM-DD" }
    ]
  },
  {
    type: "select",
    name: "currency",
    label: "Currency",
    options: [
      { value: "USD", label: "USD" },
      { value: "EUR", label: "EUR" },
      { value: "GBP", label: "GBP" },
      { value: "CAD", label: "CAD" }
    ]
  }
];
var securitySettingsFields = [
  {
    type: "number",
    name: "sessionTimeout",
    label: "Session Timeout (minutes)",
    min: 5,
    max: 480,
    description: "How long users stay logged in before being required to log in again"
  },
  {
    type: "number",
    name: "maxLoginAttempts",
    label: "Max Login Attempts",
    min: 3,
    max: 10,
    description: "Number of failed login attempts before account lockout"
  },
  {
    type: "number",
    name: "passwordMinLength",
    label: "Password Minimum Length",
    min: 6,
    max: 20,
    description: "Minimum number of characters required for passwords"
  },
  {
    type: "switch",
    name: "requireTwoFactor",
    label: "Require Two-Factor Authentication",
    description: "Force all users to enable 2FA"
  },
  {
    type: "switch",
    name: "allowRegistration",
    label: "Allow User Registration",
    description: "Allow new users to register accounts"
  }
];
var emailSettingsFields = [
  {
    type: "text",
    name: "smtpHost",
    label: "SMTP Host",
    placeholder: "smtp.gmail.com"
  },
  {
    type: "number",
    name: "smtpPort",
    label: "SMTP Port",
    placeholder: "587",
    min: 1,
    max: 65535
  },
  {
    type: "email",
    name: "smtpUsername",
    label: "SMTP Username",
    placeholder: "your-email@gmail.com"
  },
  {
    type: "password",
    name: "smtpPassword",
    label: "SMTP Password",
    placeholder: "Your email password"
  },
  {
    type: "email",
    name: "fromEmail",
    label: "From Email",
    placeholder: "noreply@yourdomain.com"
  },
  {
    type: "text",
    name: "fromName",
    label: "From Name",
    placeholder: "Your Company Name"
  }
];
var notificationSettingsFields = [
  {
    type: "switch",
    name: "emailNotifications",
    label: "Email Notifications",
    description: "Send email notifications for system events"
  },
  {
    type: "switch",
    name: "systemAlerts",
    label: "System Alerts",
    description: "Show system alerts in the admin dashboard"
  },
  {
    type: "switch",
    name: "maintenanceMode",
    label: "Maintenance Mode",
    description: "Put the system in maintenance mode"
  }
];
var systemSettingsFields = [
  {
    type: "number",
    name: "maxFileSize",
    label: "Max File Size (MB)",
    min: 1,
    max: 100,
    description: "Maximum file size allowed for uploads"
  },
  {
    type: "select",
    name: "backupFrequency",
    label: "Backup Frequency",
    options: [
      { value: "hourly", label: "Hourly" },
      { value: "daily", label: "Daily" },
      { value: "weekly", label: "Weekly" },
      { value: "monthly", label: "Monthly" }
    ]
  },
  {
    type: "number",
    name: "logRetentionDays",
    label: "Log Retention (days)",
    min: 7,
    max: 365,
    description: "How long to keep system logs"
  },
  {
    type: "text",
    name: "allowedFileTypes",
    label: "Allowed File Types",
    placeholder: "jpg, jpeg, png, pdf, doc, docx",
    description: "Comma-separated list of allowed file extensions"
  }
];

// src/components/features/Admin/components/SecurityCard.tsx
import { jsx as jsx213, jsxs as jsxs194 } from "react/jsx-runtime";
function SecurityCard({
  title,
  description,
  icon: Icon2,
  status,
  actionLabel,
  onAction,
  className = ""
}) {
  const getStatusConfig = () => {
    switch (status) {
      case "secure":
        return {
          color: "text-green-600",
          bgColor: "bg-green-100",
          borderColor: "border-green-200"
        };
      case "warning":
        return {
          color: "text-yellow-600",
          bgColor: "bg-yellow-100",
          borderColor: "border-yellow-200"
        };
      case "critical":
        return {
          color: "text-red-600",
          bgColor: "bg-red-100",
          borderColor: "border-red-200"
        };
    }
  };
  const config = getStatusConfig();
  return /* @__PURE__ */ jsxs194(Card, { className: `${className} ${config.borderColor} border-2`, children: [
    /* @__PURE__ */ jsx213(CardHeader, { children: /* @__PURE__ */ jsxs194("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs194("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsx213("div", { className: `p-2 rounded-full ${config.bgColor}`, children: /* @__PURE__ */ jsx213(Icon2, { className: `w-5 h-5 ${config.color}` }) }),
        /* @__PURE__ */ jsx213(CardTitle, { className: "text-lg", children: title })
      ] }),
      actionLabel && onAction && /* @__PURE__ */ jsx213(Button2, { variant: "outline", size: "sm", onClick: onAction, children: actionLabel })
    ] }) }),
    /* @__PURE__ */ jsx213(CardContent, { children: /* @__PURE__ */ jsx213("p", { className: "text-sm text-text-secondary", children: description }) })
  ] });
}

// src/components/features/Admin/components/MetricCard.tsx
import { jsx as jsx214, jsxs as jsxs195 } from "react/jsx-runtime";
function MetricCard({
  title,
  value,
  change,
  icon: Icon2,
  color,
  bgColor,
  className = ""
}) {
  return /* @__PURE__ */ jsx214(Card, { className, children: /* @__PURE__ */ jsx214(CardContent, { children: /* @__PURE__ */ jsxs195("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ jsxs195("div", { children: [
      /* @__PURE__ */ jsx214("p", { className: "text-sm font-medium text-text-secondary", children: title }),
      /* @__PURE__ */ jsx214("p", { className: `text-2xl font-bold ${color}`, children: value }),
      change && /* @__PURE__ */ jsxs195("div", { className: `flex items-center gap-1 text-sm mt-1 ${change.isPositive ? "text-green-600" : "text-red-600"}`, children: [
        /* @__PURE__ */ jsx214("span", { children: change.isPositive ? "\u2197" : "\u2198" }),
        /* @__PURE__ */ jsxs195("span", { children: [
          Math.abs(change.value),
          "%"
        ] }),
        /* @__PURE__ */ jsxs195("span", { className: "text-text-tertiary", children: [
          "vs ",
          change.period
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsx214("div", { className: `p-3 rounded-full ${bgColor}`, children: /* @__PURE__ */ jsx214(Icon2, { className: `h-6 w-6 ${color}` }) })
  ] }) }) });
}

// src/components/features/Admin/components/ActivityFeed.tsx
import { User as User13, Settings as Settings6, Database, CreditCard as CreditCard20, ShoppingCart as ShoppingCart8, Building2 as Building214, AlertCircle as AlertCircle15, CheckCircle as CheckCircle23, Info as Info8 } from "lucide-react";
import { jsx as jsx215, jsxs as jsxs196 } from "react/jsx-runtime";
function ActivityFeed({
  title,
  activities,
  maxItems = 10,
  className = ""
}) {
  const getTypeColor6 = (type) => {
    switch (type) {
      case "success":
        return "text-green-600 bg-green-100";
      case "warning":
        return "text-yellow-600 bg-yellow-100";
      case "error":
        return "text-red-600 bg-red-100";
      case "info":
        return "text-blue-600 bg-blue-100";
      default:
        return "text-gray-600 bg-gray-100";
    }
  };
  const getDefaultIcon = (action, type) => {
    const actionLower = action.toLowerCase();
    if (actionLower.includes("create") || actionLower.includes("add")) {
      return Building214;
    } else if (actionLower.includes("update") || actionLower.includes("edit")) {
      return Settings6;
    } else if (actionLower.includes("delete") || actionLower.includes("remove")) {
      return AlertCircle15;
    } else if (actionLower.includes("login") || actionLower.includes("auth")) {
      return User13;
    } else if (actionLower.includes("payment") || actionLower.includes("billing")) {
      return CreditCard20;
    } else if (actionLower.includes("order") || actionLower.includes("purchase")) {
      return ShoppingCart8;
    } else if (actionLower.includes("backup") || actionLower.includes("system")) {
      return Database;
    } else if (actionLower.includes("error") || actionLower.includes("fail")) {
      return AlertCircle15;
    } else if (actionLower.includes("success") || actionLower.includes("complete")) {
      return CheckCircle23;
    }
    switch (type) {
      case "success":
        return CheckCircle23;
      case "warning":
        return AlertCircle15;
      case "error":
        return AlertCircle15;
      case "info":
      default:
        return Info8;
    }
  };
  const displayActivities = activities.slice(0, maxItems);
  return /* @__PURE__ */ jsxs196(Card, { className, children: [
    /* @__PURE__ */ jsx215(CardHeader, { children: /* @__PURE__ */ jsx215(CardTitle, { children: title }) }),
    /* @__PURE__ */ jsx215(CardContent, { children: /* @__PURE__ */ jsx215("div", { className: "space-y-4", children: displayActivities.map((activity) => {
      const Icon2 = activity.icon || getDefaultIcon(activity.action, activity.type);
      return /* @__PURE__ */ jsxs196("div", { className: "flex items-start gap-3", children: [
        /* @__PURE__ */ jsx215("div", { className: `p-2 rounded-full ${getTypeColor6(activity.type)}`, children: /* @__PURE__ */ jsx215(Icon2, { className: "w-4 h-4" }) }),
        /* @__PURE__ */ jsxs196("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ jsxs196("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx215("span", { className: "text-sm font-medium text-text-primary", children: activity.user }),
            /* @__PURE__ */ jsx215("span", { className: "text-sm text-text-secondary", children: activity.action })
          ] }),
          /* @__PURE__ */ jsx215("p", { className: "text-sm text-text-secondary mt-1", children: activity.description }),
          /* @__PURE__ */ jsx215("p", { className: "text-xs text-text-tertiary mt-1", children: activity.timestamp })
        ] })
      ] }, activity.id);
    }) }) })
  ] });
}

// src/components/features/Admin/components/QuickActions.tsx
import { jsx as jsx216, jsxs as jsxs197 } from "react/jsx-runtime";
function QuickActions({
  title,
  actions,
  className = ""
}) {
  return /* @__PURE__ */ jsxs197(Card, { className, children: [
    /* @__PURE__ */ jsx216(CardHeader, { children: /* @__PURE__ */ jsx216(CardTitle, { children: title }) }),
    /* @__PURE__ */ jsx216(CardContent, { children: /* @__PURE__ */ jsx216("div", { className: "grid grid-cols-1 sm:grid-cols-2 gap-3", children: actions.map((action) => {
      const Icon2 = action.icon;
      return /* @__PURE__ */ jsxs197(
        Button2,
        {
          variant: action.variant || "outline",
          onClick: action.onClick,
          className: "h-auto p-4 flex flex-col items-start gap-2",
          children: [
            /* @__PURE__ */ jsxs197("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx216(Icon2, { className: "w-4 h-4" }),
              /* @__PURE__ */ jsx216("span", { className: "font-medium", children: action.label })
            ] }),
            /* @__PURE__ */ jsx216("span", { className: "text-xs text-text-tertiary text-left", children: action.description })
          ]
        },
        action.id
      );
    }) }) })
  ] });
}

// src/components/features/Admin/components/SystemHealth.tsx
import { jsx as jsx217, jsxs as jsxs198 } from "react/jsx-runtime";
function SystemHealth({
  title,
  metrics,
  className = ""
}) {
  const getStatusColor11 = (status) => {
    switch (status) {
      case "healthy":
        return "bg-green-500";
      case "warning":
        return "bg-yellow-500";
      case "critical":
        return "bg-red-500";
      default:
        return "bg-gray-500";
    }
  };
  const getStatusText = (status) => {
    switch (status) {
      case "healthy":
        return "Healthy";
      case "warning":
        return "Warning";
      case "critical":
        return "Critical";
      default:
        return "Unknown";
    }
  };
  return /* @__PURE__ */ jsxs198(Card, { className, children: [
    /* @__PURE__ */ jsx217(CardHeader, { children: /* @__PURE__ */ jsx217(CardTitle, { children: title }) }),
    /* @__PURE__ */ jsx217(CardContent, { children: /* @__PURE__ */ jsx217("div", { className: "space-y-4", children: metrics.map((metric, index) => {
      const Icon2 = metric.icon;
      const percentage = metric.value / metric.max * 100;
      return /* @__PURE__ */ jsxs198("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxs198("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs198("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx217(Icon2, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsx217("span", { className: "text-sm font-medium text-text-primary", children: metric.name })
          ] }),
          /* @__PURE__ */ jsxs198("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsxs198("span", { className: "text-sm text-text-secondary", children: [
              metric.value,
              " / ",
              metric.max,
              " ",
              metric.unit
            ] }),
            /* @__PURE__ */ jsx217("span", { className: `text-xs px-2 py-1 rounded-full text-white ${getStatusColor11(metric.status)}`, children: getStatusText(metric.status) })
          ] })
        ] }),
        /* @__PURE__ */ jsx217("div", { className: "w-full bg-bg-tertiary rounded-full h-2", children: /* @__PURE__ */ jsx217(
          "div",
          {
            className: `h-2 rounded-full ${getStatusColor11(metric.status)}`,
            style: { width: `${Math.min(percentage, 100)}%` }
          }
        ) })
      ] }, index);
    }) }) })
  ] });
}

// src/components/features/Performance/components/PerformanceMetricCard.tsx
import { TrendingUp as TrendingUp8, TrendingDown as TrendingDown2, Activity as Activity2, Cpu, Monitor, HardDrive, Wifi, Database as Database2, Globe as Globe3 } from "lucide-react";
import { jsx as jsx218, jsxs as jsxs199 } from "react/jsx-runtime";
var getCategoryIcon = (category) => {
  switch (category) {
    case "CPU":
      return Cpu;
    case "MEMORY":
      return Monitor;
    case "DISK":
      return HardDrive;
    case "NETWORK":
      return Wifi;
    case "DATABASE":
      return Database2;
    case "API":
      return Globe3;
    default:
      return Activity2;
  }
};
var getStatusColor4 = (status) => {
  switch (status) {
    case "HEALTHY":
      return "bg-green-100 text-green-800";
    case "WARNING":
      return "bg-yellow-100 text-yellow-800";
    case "CRITICAL":
      return "bg-red-100 text-red-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getTrendIcon = (trend) => {
  switch (trend) {
    case "UP":
      return TrendingUp8;
    case "DOWN":
      return TrendingDown2;
    case "STABLE":
      return Activity2;
    default:
      return Activity2;
  }
};
var getTrendColor = (trend, change) => {
  if (trend === "UP")
    return "text-red-500";
  if (trend === "DOWN")
    return "text-green-500";
  return "text-gray-500";
};
function PerformanceMetricCard({ metric, onClick }) {
  const Icon2 = getCategoryIcon(metric.category);
  const TrendIcon = getTrendIcon(metric.trend);
  const trendColor = getTrendColor(metric.trend, metric.change);
  return /* @__PURE__ */ jsxs199(
    Card,
    {
      className: `cursor-pointer transition-all hover:shadow-md ${onClick ? "hover:border-primary" : ""}`,
      onClick: () => onClick?.(metric),
      children: [
        /* @__PURE__ */ jsxs199(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
          /* @__PURE__ */ jsx218(CardTitle, { className: "text-sm font-medium text-text-secondary", children: metric.name }),
          /* @__PURE__ */ jsx218(Icon2, { className: "h-4 w-4 text-text-tertiary" })
        ] }),
        /* @__PURE__ */ jsxs199(CardContent, { children: [
          /* @__PURE__ */ jsxs199("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsxs199("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsxs199("span", { className: "text-2xl font-bold text-text-primary", children: [
                metric.value,
                metric.unit
              ] }),
              /* @__PURE__ */ jsxs199("div", { className: "flex items-center space-x-1", children: [
                /* @__PURE__ */ jsx218(TrendIcon, { className: `h-3 w-3 ${trendColor}` }),
                /* @__PURE__ */ jsxs199("span", { className: `text-xs ${trendColor}`, children: [
                  metric.change > 0 ? "+" : "",
                  metric.change,
                  metric.unit
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsx218(Badge, { className: getStatusColor4(metric.status), children: metric.status })
          ] }),
          /* @__PURE__ */ jsx218("p", { className: "text-xs text-text-tertiary mt-1", children: metric.description }),
          /* @__PURE__ */ jsxs199("div", { className: "mt-2 text-xs text-text-tertiary", children: [
            /* @__PURE__ */ jsxs199("div", { children: [
              "Warn: ",
              metric.threshold.warning,
              metric.unit
            ] }),
            /* @__PURE__ */ jsxs199("div", { children: [
              "Critical: ",
              metric.threshold.critical,
              metric.unit
            ] })
          ] })
        ] })
      ]
    }
  );
}
var PerformanceMetricCard_default = PerformanceMetricCard;

// src/components/features/Performance/components/PerformanceAlertCard.tsx
import { AlertTriangle as AlertTriangle12, CheckCircle as CheckCircle24, Clock as Clock19, User as User14 } from "lucide-react";
import { jsx as jsx219, jsxs as jsxs200 } from "react/jsx-runtime";
var getSeverityColor = (severity) => {
  switch (severity) {
    case "LOW":
      return "bg-blue-100 text-blue-800";
    case "MEDIUM":
      return "bg-yellow-100 text-yellow-800";
    case "HIGH":
      return "bg-orange-100 text-orange-800";
    case "CRITICAL":
      return "bg-red-100 text-red-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getSeverityIcon = (severity) => {
  switch (severity) {
    case "LOW":
      return AlertTriangle12;
    case "MEDIUM":
      return AlertTriangle12;
    case "HIGH":
      return AlertTriangle12;
    case "CRITICAL":
      return AlertTriangle12;
    default:
      return AlertTriangle12;
  }
};
function PerformanceAlertCard({
  alert: alert2,
  onResolve,
  onViewDetails
}) {
  const SeverityIcon = getSeverityIcon(alert2.severity);
  return /* @__PURE__ */ jsxs200(Card, { className: "border-l-4 border-l-orange-500", children: [
    /* @__PURE__ */ jsxs200(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs200("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx219(SeverityIcon, { className: "h-4 w-4 text-orange-500" }),
        /* @__PURE__ */ jsx219(CardTitle, { className: "text-sm font-medium text-text-primary", children: alert2.metric })
      ] }),
      /* @__PURE__ */ jsx219(Badge, { className: getSeverityColor(alert2.severity), children: alert2.severity })
    ] }),
    /* @__PURE__ */ jsxs200(CardContent, { children: [
      /* @__PURE__ */ jsx219("p", { className: "text-sm text-text-secondary mb-3", children: alert2.message }),
      /* @__PURE__ */ jsxs200("div", { className: "flex items-center space-x-4 text-xs text-text-tertiary mb-3", children: [
        /* @__PURE__ */ jsxs200("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsx219(Clock19, { className: "h-3 w-3" }),
          /* @__PURE__ */ jsx219("span", { children: new Date(alert2.timestamp).toLocaleString() })
        ] }),
        alert2.resolved && alert2.resolvedBy && /* @__PURE__ */ jsxs200("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsx219(User14, { className: "h-3 w-3" }),
          /* @__PURE__ */ jsxs200("span", { children: [
            "Resolved by ",
            alert2.resolvedBy
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs200("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx219("div", { className: "flex items-center space-x-2", children: alert2.resolved ? /* @__PURE__ */ jsxs200("div", { className: "flex items-center space-x-1 text-green-600", children: [
          /* @__PURE__ */ jsx219(CheckCircle24, { className: "h-4 w-4" }),
          /* @__PURE__ */ jsx219("span", { className: "text-sm", children: "Resolved" })
        ] }) : /* @__PURE__ */ jsxs200("div", { className: "flex items-center space-x-1 text-orange-600", children: [
          /* @__PURE__ */ jsx219(AlertTriangle12, { className: "h-4 w-4" }),
          /* @__PURE__ */ jsx219("span", { className: "text-sm", children: "Active" })
        ] }) }),
        /* @__PURE__ */ jsxs200("div", { className: "flex space-x-2", children: [
          onViewDetails && /* @__PURE__ */ jsx219(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onViewDetails(alert2),
              children: "View Details"
            }
          ),
          !alert2.resolved && onResolve && /* @__PURE__ */ jsx219(
            Button2,
            {
              size: "sm",
              onClick: () => onResolve(alert2.id),
              children: "Resolve"
            }
          )
        ] })
      ] })
    ] })
  ] });
}
var PerformanceAlertCard_default = PerformanceAlertCard;

// src/components/features/Performance/components/PerformanceMetricsGrid.tsx
import { jsx as jsx220 } from "react/jsx-runtime";
function PerformanceMetricsGrid({
  metrics,
  onMetricClick,
  loading = false
}) {
  if (loading) {
    return /* @__PURE__ */ jsx220("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4", children: Array.from({ length: 8 }).map((_, index) => /* @__PURE__ */ jsx220("div", { className: "h-32 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  if (metrics.length === 0) {
    return /* @__PURE__ */ jsx220("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx220("p", { className: "text-text-tertiary", children: "No performance metrics available" }) });
  }
  return /* @__PURE__ */ jsx220("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4", children: metrics.map((metric) => /* @__PURE__ */ jsx220(
    PerformanceMetricCard,
    {
      metric,
      onClick: onMetricClick
    },
    metric.id
  )) });
}

// src/components/features/Performance/components/PerformanceAlertsList.tsx
import { jsx as jsx221, jsxs as jsxs201 } from "react/jsx-runtime";
function PerformanceAlertsList({
  alerts,
  onResolveAlert,
  onViewAlertDetails,
  loading = false,
  maxItems = 10
}) {
  if (loading) {
    return /* @__PURE__ */ jsx221("div", { className: "space-y-4", children: Array.from({ length: 3 }).map((_, index) => /* @__PURE__ */ jsx221("div", { className: "h-24 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  const displayAlerts = alerts.slice(0, maxItems);
  const activeAlerts = displayAlerts.filter((alert2) => !alert2.resolved);
  const resolvedAlerts = displayAlerts.filter((alert2) => alert2.resolved);
  if (alerts.length === 0) {
    return /* @__PURE__ */ jsx221("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx221("p", { className: "text-text-tertiary", children: "No performance alerts" }) });
  }
  return /* @__PURE__ */ jsxs201("div", { className: "space-y-4", children: [
    activeAlerts.length > 0 && /* @__PURE__ */ jsxs201("div", { children: [
      /* @__PURE__ */ jsxs201("h3", { className: "text-sm font-medium text-text-primary mb-3", children: [
        "Active Alerts (",
        activeAlerts.length,
        ")"
      ] }),
      /* @__PURE__ */ jsx221("div", { className: "space-y-3", children: activeAlerts.map((alert2) => /* @__PURE__ */ jsx221(
        PerformanceAlertCard,
        {
          alert: alert2,
          onResolve: onResolveAlert,
          onViewDetails: onViewAlertDetails
        },
        alert2.id
      )) })
    ] }),
    resolvedAlerts.length > 0 && /* @__PURE__ */ jsxs201("div", { children: [
      /* @__PURE__ */ jsxs201("h3", { className: "text-sm font-medium text-text-primary mb-3", children: [
        "Recently Resolved (",
        resolvedAlerts.length,
        ")"
      ] }),
      /* @__PURE__ */ jsx221("div", { className: "space-y-3", children: resolvedAlerts.map((alert2) => /* @__PURE__ */ jsx221(
        PerformanceAlertCard,
        {
          alert: alert2,
          onViewDetails: onViewAlertDetails
        },
        alert2.id
      )) })
    ] })
  ] });
}

// src/components/features/Maintenance/components/MaintenanceTaskCard.tsx
import {
  Wrench,
  Play as Play5,
  CheckCircle as CheckCircle25,
  XCircle as XCircle16,
  Clock as Clock20,
  Calendar as Calendar25,
  User as User15
} from "lucide-react";
import { jsx as jsx222, jsxs as jsxs202 } from "react/jsx-runtime";
var getTypeColor = (type) => {
  switch (type) {
    case "SCHEDULED":
      return "bg-blue-100 text-blue-800";
    case "EMERGENCY":
      return "bg-red-100 text-red-800";
    case "ROUTINE":
      return "bg-green-100 text-green-800";
    case "UPDATE":
      return "bg-purple-100 text-purple-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusColor5 = (status) => {
  switch (status) {
    case "PENDING":
      return "bg-yellow-100 text-yellow-800";
    case "IN_PROGRESS":
      return "bg-blue-100 text-blue-800";
    case "COMPLETED":
      return "bg-green-100 text-green-800";
    case "FAILED":
      return "bg-red-100 text-red-800";
    case "CANCELLED":
      return "bg-gray-100 text-gray-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getPriorityColor = (priority) => {
  switch (priority) {
    case "LOW":
      return "bg-gray-100 text-gray-800";
    case "MEDIUM":
      return "bg-yellow-100 text-yellow-800";
    case "HIGH":
      return "bg-orange-100 text-orange-800";
    case "CRITICAL":
      return "bg-red-100 text-red-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusIcon = (status) => {
  switch (status) {
    case "PENDING":
      return Clock20;
    case "IN_PROGRESS":
      return Play5;
    case "COMPLETED":
      return CheckCircle25;
    case "FAILED":
      return XCircle16;
    case "CANCELLED":
      return XCircle16;
    default:
      return Clock20;
  }
};
function MaintenanceTaskCard({
  task,
  onStart,
  onComplete,
  onCancel,
  onViewDetails
}) {
  const StatusIcon = getStatusIcon(task.status);
  return /* @__PURE__ */ jsxs202(Card, { className: "hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsxs202(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs202("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx222(Wrench, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx222(CardTitle, { className: "text-sm font-medium text-text-primary", children: task.name })
      ] }),
      /* @__PURE__ */ jsxs202("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx222(Badge, { className: getPriorityColor(task.priority), children: task.priority }),
        /* @__PURE__ */ jsx222(Badge, { className: getTypeColor(task.type), children: task.type })
      ] })
    ] }),
    /* @__PURE__ */ jsxs202(CardContent, { children: [
      /* @__PURE__ */ jsx222("p", { className: "text-sm text-text-secondary mb-3", children: task.description }),
      /* @__PURE__ */ jsxs202("div", { className: "flex items-center space-x-4 text-xs text-text-tertiary mb-3", children: [
        /* @__PURE__ */ jsxs202("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsx222(Calendar25, { className: "h-3 w-3" }),
          /* @__PURE__ */ jsx222("span", { children: new Date(task.scheduledAt).toLocaleDateString() })
        ] }),
        /* @__PURE__ */ jsxs202("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsx222(Clock20, { className: "h-3 w-3" }),
          /* @__PURE__ */ jsx222("span", { children: task.estimatedDuration })
        ] }),
        /* @__PURE__ */ jsxs202("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsx222(User15, { className: "h-3 w-3" }),
          /* @__PURE__ */ jsx222("span", { children: task.createdBy })
        ] })
      ] }),
      /* @__PURE__ */ jsxs202("div", { className: "flex items-center justify-between mb-3", children: [
        /* @__PURE__ */ jsxs202("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx222(StatusIcon, { className: "h-4 w-4 text-text-tertiary" }),
          /* @__PURE__ */ jsx222(Badge, { className: getStatusColor5(task.status), children: task.status.replace("_", " ") })
        ] }),
        task.actualDuration && /* @__PURE__ */ jsxs202("span", { className: "text-xs text-text-tertiary", children: [
          "Actual: ",
          task.actualDuration
        ] })
      ] }),
      /* @__PURE__ */ jsxs202("div", { className: "mb-3", children: [
        /* @__PURE__ */ jsx222("p", { className: "text-xs text-text-tertiary mb-1", children: "Affected Services:" }),
        /* @__PURE__ */ jsx222("div", { className: "flex flex-wrap gap-1", children: task.affectedServices.map((service, index) => /* @__PURE__ */ jsx222("span", { className: "text-xs bg-bg-secondary px-2 py-1 rounded", children: service }, index)) })
      ] }),
      /* @__PURE__ */ jsxs202("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx222("div", { className: "flex space-x-2", children: onViewDetails && /* @__PURE__ */ jsx222(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onViewDetails(task),
            children: "View Details"
          }
        ) }),
        /* @__PURE__ */ jsxs202("div", { className: "flex space-x-2", children: [
          task.status === "PENDING" && onStart && /* @__PURE__ */ jsxs202(
            Button2,
            {
              size: "sm",
              onClick: () => onStart(task.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx222(Play5, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx222("span", { children: "Start" })
              ]
            }
          ),
          task.status === "IN_PROGRESS" && onComplete && /* @__PURE__ */ jsxs202(
            Button2,
            {
              size: "sm",
              onClick: () => onComplete(task.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx222(CheckCircle25, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx222("span", { children: "Complete" })
              ]
            }
          ),
          (task.status === "PENDING" || task.status === "IN_PROGRESS") && onCancel && /* @__PURE__ */ jsxs202(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onCancel(task.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx222(XCircle16, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx222("span", { children: "Cancel" })
              ]
            }
          )
        ] })
      ] })
    ] })
  ] });
}
var MaintenanceTaskCard_default = MaintenanceTaskCard;

// src/components/features/Maintenance/components/MaintenanceModeToggle.tsx
import { Shield as Shield5, Eye as Eye24, EyeOff as EyeOff6 } from "lucide-react";
import { jsx as jsx223, jsxs as jsxs203 } from "react/jsx-runtime";
function MaintenanceModeToggle({
  isActive,
  onToggle,
  loading = false
}) {
  return /* @__PURE__ */ jsxs203(Card, { className: "border-l-4 border-l-orange-500", children: [
    /* @__PURE__ */ jsx223(CardHeader, { children: /* @__PURE__ */ jsxs203(CardTitle, { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx223(Shield5, { className: "w-5 h-5" }),
      "Maintenance Mode Status"
    ] }) }),
    /* @__PURE__ */ jsxs203(CardContent, { children: [
      /* @__PURE__ */ jsxs203("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs203("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ jsx223("div", { className: `w-3 h-3 rounded-full ${isActive ? "bg-red-500" : "bg-green-500"}` }),
          /* @__PURE__ */ jsx223("span", { className: "text-sm font-medium", children: isActive ? "Maintenance Mode Active" : "System Normal" })
        ] }),
        /* @__PURE__ */ jsxs203(
          Button2,
          {
            variant: isActive ? "default" : "outline",
            onClick: onToggle,
            disabled: loading,
            className: "flex items-center gap-2",
            children: [
              isActive ? /* @__PURE__ */ jsx223(Eye24, { className: "w-4 h-4" }) : /* @__PURE__ */ jsx223(EyeOff6, { className: "w-4 h-4" }),
              isActive ? "Disable" : "Enable",
              " Maintenance Mode"
            ]
          }
        )
      ] }),
      isActive && /* @__PURE__ */ jsx223("div", { className: "mt-3 p-3 bg-orange-50 border border-orange-200 rounded-lg", children: /* @__PURE__ */ jsxs203("p", { className: "text-sm text-orange-800", children: [
        /* @__PURE__ */ jsx223("strong", { children: "Warning:" }),
        " Maintenance mode is currently active. Users may experience limited access to the system."
      ] }) })
    ] })
  ] });
}

// src/components/features/Maintenance/components/MaintenanceTasksGrid.tsx
import { jsx as jsx224 } from "react/jsx-runtime";
function MaintenanceTasksGrid({
  tasks,
  onStartTask,
  onCompleteTask,
  onCancelTask,
  onViewTaskDetails,
  loading = false
}) {
  if (loading) {
    return /* @__PURE__ */ jsx224("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: Array.from({ length: 6 }).map((_, index) => /* @__PURE__ */ jsx224("div", { className: "h-64 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  if (tasks.length === 0) {
    return /* @__PURE__ */ jsx224("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx224("p", { className: "text-text-tertiary", children: "No maintenance tasks found" }) });
  }
  return /* @__PURE__ */ jsx224("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: tasks.map((task) => /* @__PURE__ */ jsx224(
    MaintenanceTaskCard,
    {
      task,
      onStart: onStartTask,
      onComplete: onCompleteTask,
      onCancel: onCancelTask,
      onViewDetails: onViewTaskDetails
    },
    task.id
  )) });
}

// src/components/features/Maintenance/components/MaintenanceWindowCard.tsx
import { Calendar as Calendar26, Clock as Clock21, Bell as Bell3, BellOff } from "lucide-react";
import { jsx as jsx225, jsxs as jsxs204 } from "react/jsx-runtime";
var getStatusColor6 = (status) => {
  switch (status) {
    case "ACTIVE":
      return "bg-green-100 text-green-800";
    case "SCHEDULED":
      return "bg-blue-100 text-blue-800";
    case "COMPLETED":
      return "bg-gray-100 text-gray-800";
    case "CANCELLED":
      return "bg-red-100 text-red-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusIcon2 = (status) => {
  switch (status) {
    case "ACTIVE":
      return Clock21;
    case "SCHEDULED":
      return Calendar26;
    case "COMPLETED":
      return Calendar26;
    case "CANCELLED":
      return Calendar26;
    default:
      return Calendar26;
  }
};
function MaintenanceWindowCard({
  window: window2,
  onEdit,
  onCancel,
  onViewDetails
}) {
  const StatusIcon = getStatusIcon2(window2.status);
  const startDate = new Date(window2.startTime);
  const endDate = new Date(window2.endTime);
  const duration = Math.round((endDate.getTime() - startDate.getTime()) / (1e3 * 60 * 60));
  return /* @__PURE__ */ jsxs204(Card, { className: "hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsxs204(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs204("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx225(StatusIcon, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx225(CardTitle, { className: "text-sm font-medium text-text-primary", children: window2.name })
      ] }),
      /* @__PURE__ */ jsx225(Badge, { className: getStatusColor6(window2.status), children: window2.status })
    ] }),
    /* @__PURE__ */ jsxs204(CardContent, { children: [
      /* @__PURE__ */ jsx225("p", { className: "text-sm text-text-secondary mb-3", children: window2.description }),
      /* @__PURE__ */ jsxs204("div", { className: "space-y-2 mb-3", children: [
        /* @__PURE__ */ jsxs204("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx225("span", { className: "text-text-tertiary", children: "Start Time:" }),
          /* @__PURE__ */ jsx225("span", { className: "text-text-primary", children: startDate.toLocaleString() })
        ] }),
        /* @__PURE__ */ jsxs204("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx225("span", { className: "text-text-tertiary", children: "End Time:" }),
          /* @__PURE__ */ jsx225("span", { className: "text-text-primary", children: endDate.toLocaleString() })
        ] }),
        /* @__PURE__ */ jsxs204("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx225("span", { className: "text-text-tertiary", children: "Duration:" }),
          /* @__PURE__ */ jsxs204("span", { className: "text-text-primary", children: [
            duration,
            " hours"
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs204("div", { className: "mb-3", children: [
        /* @__PURE__ */ jsx225("p", { className: "text-xs text-text-tertiary mb-1", children: "Affected Services:" }),
        /* @__PURE__ */ jsx225("div", { className: "flex flex-wrap gap-1", children: window2.affectedServices.map((service, index) => /* @__PURE__ */ jsx225("span", { className: "text-xs bg-bg-secondary px-2 py-1 rounded", children: service }, index)) })
      ] }),
      /* @__PURE__ */ jsxs204("div", { className: "mb-3", children: [
        /* @__PURE__ */ jsx225("p", { className: "text-xs text-text-tertiary mb-1", children: "Notifications:" }),
        /* @__PURE__ */ jsxs204("div", { className: "flex items-center space-x-4", children: [
          /* @__PURE__ */ jsxs204("div", { className: "flex items-center space-x-1", children: [
            window2.notifications.users ? /* @__PURE__ */ jsx225(Bell3, { className: "h-3 w-3 text-green-500" }) : /* @__PURE__ */ jsx225(BellOff, { className: "h-3 w-3 text-gray-400" }),
            /* @__PURE__ */ jsx225("span", { className: "text-xs", children: "Users" })
          ] }),
          /* @__PURE__ */ jsxs204("div", { className: "flex items-center space-x-1", children: [
            window2.notifications.admins ? /* @__PURE__ */ jsx225(Bell3, { className: "h-3 w-3 text-green-500" }) : /* @__PURE__ */ jsx225(BellOff, { className: "h-3 w-3 text-gray-400" }),
            /* @__PURE__ */ jsx225("span", { className: "text-xs", children: "Admins" })
          ] }),
          /* @__PURE__ */ jsxs204("div", { className: "flex items-center space-x-1", children: [
            window2.notifications.customers ? /* @__PURE__ */ jsx225(Bell3, { className: "h-3 w-3 text-green-500" }) : /* @__PURE__ */ jsx225(BellOff, { className: "h-3 w-3 text-gray-400" }),
            /* @__PURE__ */ jsx225("span", { className: "text-xs", children: "Customers" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs204("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx225("div", { className: "flex space-x-2", children: onViewDetails && /* @__PURE__ */ jsx225(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onViewDetails(window2),
            children: "View Details"
          }
        ) }),
        /* @__PURE__ */ jsxs204("div", { className: "flex space-x-2", children: [
          window2.status === "SCHEDULED" && onEdit && /* @__PURE__ */ jsx225(
            Button2,
            {
              size: "sm",
              onClick: () => onEdit(window2),
              children: "Edit"
            }
          ),
          (window2.status === "SCHEDULED" || window2.status === "ACTIVE") && onCancel && /* @__PURE__ */ jsx225(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onCancel(window2.id),
              children: "Cancel"
            }
          )
        ] })
      ] })
    ] })
  ] });
}

// src/components/features/Backup/components/BackupCard.tsx
import {
  Database as Database3,
  Download as Download11,
  Play as Play6,
  Trash2 as Trash216,
  Clock as Clock22,
  User as User16,
  HardDrive as HardDrive2,
  Cloud,
  Archive as Archive2,
  CheckCircle as CheckCircle26,
  XCircle as XCircle17,
  AlertTriangle as AlertTriangle14
} from "lucide-react";
import { jsx as jsx226, jsxs as jsxs205 } from "react/jsx-runtime";
var getTypeColor2 = (type) => {
  switch (type) {
    case "FULL":
      return "bg-blue-100 text-blue-800";
    case "INCREMENTAL":
      return "bg-green-100 text-green-800";
    case "DIFFERENTIAL":
      return "bg-purple-100 text-purple-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusColor7 = (status) => {
  switch (status) {
    case "COMPLETED":
      return "bg-green-100 text-green-800";
    case "IN_PROGRESS":
      return "bg-blue-100 text-blue-800";
    case "FAILED":
      return "bg-red-100 text-red-800";
    case "SCHEDULED":
      return "bg-yellow-100 text-yellow-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusIcon3 = (status) => {
  switch (status) {
    case "COMPLETED":
      return CheckCircle26;
    case "IN_PROGRESS":
      return Clock22;
    case "FAILED":
      return XCircle17;
    case "SCHEDULED":
      return AlertTriangle14;
    default:
      return Clock22;
  }
};
var getLocationIcon = (location) => {
  switch (location) {
    case "CLOUD":
      return Cloud;
    case "LOCAL":
      return HardDrive2;
    case "BOTH":
      return Archive2;
    default:
      return Database3;
  }
};
function BackupCard({
  backup,
  onDownload,
  onRestore,
  onDelete,
  onViewDetails
}) {
  const StatusIcon = getStatusIcon3(backup.status);
  const LocationIcon = getLocationIcon(backup.location);
  return /* @__PURE__ */ jsxs205(Card, { className: "hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsxs205(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs205("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx226(Database3, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx226(CardTitle, { className: "text-sm font-medium text-text-primary", children: backup.name })
      ] }),
      /* @__PURE__ */ jsxs205("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx226(Badge, { className: getTypeColor2(backup.type), children: backup.type }),
        /* @__PURE__ */ jsx226(Badge, { className: getStatusColor7(backup.status), children: backup.status })
      ] })
    ] }),
    /* @__PURE__ */ jsxs205(CardContent, { children: [
      /* @__PURE__ */ jsx226("p", { className: "text-sm text-text-secondary mb-3", children: backup.description }),
      /* @__PURE__ */ jsxs205("div", { className: "space-y-2 mb-3", children: [
        /* @__PURE__ */ jsxs205("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx226("span", { className: "text-text-tertiary", children: "Size:" }),
          /* @__PURE__ */ jsx226("span", { className: "text-text-primary", children: backup.size })
        ] }),
        /* @__PURE__ */ jsxs205("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx226("span", { className: "text-text-tertiary", children: "Created:" }),
          /* @__PURE__ */ jsx226("span", { className: "text-text-primary", children: new Date(backup.createdAt).toLocaleDateString() })
        ] }),
        backup.completedAt && /* @__PURE__ */ jsxs205("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx226("span", { className: "text-text-tertiary", children: "Completed:" }),
          /* @__PURE__ */ jsx226("span", { className: "text-text-primary", children: new Date(backup.completedAt).toLocaleDateString() })
        ] }),
        backup.duration && /* @__PURE__ */ jsxs205("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx226("span", { className: "text-text-tertiary", children: "Duration:" }),
          /* @__PURE__ */ jsx226("span", { className: "text-text-primary", children: backup.duration })
        ] })
      ] }),
      /* @__PURE__ */ jsxs205("div", { className: "flex items-center justify-between mb-3", children: [
        /* @__PURE__ */ jsxs205("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx226(StatusIcon, { className: "h-4 w-4 text-text-tertiary" }),
          /* @__PURE__ */ jsx226("span", { className: "text-xs text-text-tertiary", children: backup.status.replace("_", " ") })
        ] }),
        /* @__PURE__ */ jsxs205("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsx226(LocationIcon, { className: "h-3 w-3 text-text-tertiary" }),
          /* @__PURE__ */ jsx226("span", { className: "text-xs text-text-tertiary", children: backup.location })
        ] })
      ] }),
      /* @__PURE__ */ jsx226("div", { className: "flex items-center justify-between text-xs text-text-tertiary mb-3", children: /* @__PURE__ */ jsxs205("div", { className: "flex items-center space-x-1", children: [
        /* @__PURE__ */ jsx226(User16, { className: "h-3 w-3" }),
        /* @__PURE__ */ jsx226("span", { children: backup.createdBy })
      ] }) }),
      /* @__PURE__ */ jsxs205("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx226("div", { className: "flex space-x-2", children: onViewDetails && /* @__PURE__ */ jsx226(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onViewDetails(backup),
            children: "View Details"
          }
        ) }),
        /* @__PURE__ */ jsxs205("div", { className: "flex space-x-2", children: [
          backup.status === "COMPLETED" && onDownload && /* @__PURE__ */ jsxs205(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onDownload(backup.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx226(Download11, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx226("span", { children: "Download" })
              ]
            }
          ),
          backup.status === "COMPLETED" && onRestore && /* @__PURE__ */ jsxs205(
            Button2,
            {
              size: "sm",
              onClick: () => onRestore(backup.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx226(Play6, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx226("span", { children: "Restore" })
              ]
            }
          ),
          onDelete && /* @__PURE__ */ jsxs205(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onDelete(backup.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx226(Trash216, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx226("span", { children: "Delete" })
              ]
            }
          )
        ] })
      ] })
    ] })
  ] });
}
var BackupCard_default = BackupCard;

// src/components/features/Backup/components/BackupScheduleCard.tsx
import {
  Clock as Clock23,
  Play as Play7,
  Pause as Pause7,
  Settings as Settings7,
  CheckCircle as CheckCircle27,
  XCircle as XCircle18,
  AlertTriangle as AlertTriangle15
} from "lucide-react";
import { jsx as jsx227, jsxs as jsxs206 } from "react/jsx-runtime";
var getFrequencyColor = (frequency) => {
  switch (frequency) {
    case "HOURLY":
      return "bg-green-100 text-green-800";
    case "DAILY":
      return "bg-blue-100 text-blue-800";
    case "WEEKLY":
      return "bg-purple-100 text-purple-800";
    case "MONTHLY":
      return "bg-orange-100 text-orange-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusColor8 = (status) => {
  switch (status) {
    case "ACTIVE":
      return "bg-green-100 text-green-800";
    case "PAUSED":
      return "bg-yellow-100 text-yellow-800";
    case "DISABLED":
      return "bg-red-100 text-red-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getTypeColor3 = (type) => {
  switch (type) {
    case "FULL":
      return "bg-blue-100 text-blue-800";
    case "INCREMENTAL":
      return "bg-green-100 text-green-800";
    case "DIFFERENTIAL":
      return "bg-purple-100 text-purple-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusIcon4 = (status) => {
  switch (status) {
    case "ACTIVE":
      return CheckCircle27;
    case "PAUSED":
      return Pause7;
    case "DISABLED":
      return XCircle18;
    default:
      return AlertTriangle15;
  }
};
function BackupScheduleCard({
  schedule,
  onPause,
  onResume,
  onEdit,
  onDelete,
  onViewDetails
}) {
  const StatusIcon = getStatusIcon4(schedule.status);
  const nextRunDate = new Date(schedule.nextRun);
  const lastRunDate = schedule.lastRun ? new Date(schedule.lastRun) : null;
  return /* @__PURE__ */ jsxs206(Card, { className: "hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsxs206(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs206("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx227(Clock23, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx227(CardTitle, { className: "text-sm font-medium text-text-primary", children: schedule.name })
      ] }),
      /* @__PURE__ */ jsxs206("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx227(Badge, { className: getFrequencyColor(schedule.frequency), children: schedule.frequency }),
        /* @__PURE__ */ jsx227(Badge, { className: getTypeColor3(schedule.type), children: schedule.type })
      ] })
    ] }),
    /* @__PURE__ */ jsxs206(CardContent, { children: [
      /* @__PURE__ */ jsxs206("div", { className: "space-y-2 mb-3", children: [
        /* @__PURE__ */ jsxs206("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx227("span", { className: "text-text-tertiary", children: "Next Run:" }),
          /* @__PURE__ */ jsx227("span", { className: "text-text-primary", children: nextRunDate.toLocaleString() })
        ] }),
        lastRunDate && /* @__PURE__ */ jsxs206("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx227("span", { className: "text-text-tertiary", children: "Last Run:" }),
          /* @__PURE__ */ jsx227("span", { className: "text-text-primary", children: lastRunDate.toLocaleString() })
        ] }),
        /* @__PURE__ */ jsxs206("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx227("span", { className: "text-text-tertiary", children: "Retention:" }),
          /* @__PURE__ */ jsxs206("span", { className: "text-text-primary", children: [
            schedule.retention,
            " days"
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsx227("div", { className: "flex items-center justify-between mb-3", children: /* @__PURE__ */ jsxs206("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx227(StatusIcon, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx227(Badge, { className: getStatusColor8(schedule.status), children: schedule.status })
      ] }) }),
      /* @__PURE__ */ jsxs206("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx227("div", { className: "flex space-x-2", children: onViewDetails && /* @__PURE__ */ jsx227(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onViewDetails(schedule),
            children: "View Details"
          }
        ) }),
        /* @__PURE__ */ jsxs206("div", { className: "flex space-x-2", children: [
          schedule.status === "ACTIVE" && onPause && /* @__PURE__ */ jsxs206(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onPause(schedule.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx227(Pause7, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx227("span", { children: "Pause" })
              ]
            }
          ),
          schedule.status === "PAUSED" && onResume && /* @__PURE__ */ jsxs206(
            Button2,
            {
              size: "sm",
              onClick: () => onResume(schedule.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx227(Play7, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx227("span", { children: "Resume" })
              ]
            }
          ),
          onEdit && /* @__PURE__ */ jsxs206(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onEdit(schedule),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx227(Settings7, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx227("span", { children: "Edit" })
              ]
            }
          ),
          onDelete && /* @__PURE__ */ jsx227(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onDelete(schedule.id),
              children: "Delete"
            }
          )
        ] })
      ] })
    ] })
  ] });
}
var BackupScheduleCard_default = BackupScheduleCard;

// src/components/features/Backup/components/BackupGrid.tsx
import { jsx as jsx228 } from "react/jsx-runtime";
function BackupGrid({
  backups,
  onDownloadBackup,
  onRestoreBackup,
  onDeleteBackup,
  onViewBackupDetails,
  loading = false
}) {
  if (loading) {
    return /* @__PURE__ */ jsx228("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: Array.from({ length: 6 }).map((_, index) => /* @__PURE__ */ jsx228("div", { className: "h-80 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  if (backups.length === 0) {
    return /* @__PURE__ */ jsx228("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx228("p", { className: "text-text-tertiary", children: "No backups found" }) });
  }
  return /* @__PURE__ */ jsx228("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: backups.map((backup) => /* @__PURE__ */ jsx228(
    BackupCard,
    {
      backup,
      onDownload: onDownloadBackup,
      onRestore: onRestoreBackup,
      onDelete: onDeleteBackup,
      onViewDetails: onViewBackupDetails
    },
    backup.id
  )) });
}

// src/components/features/Backup/components/BackupSchedulesGrid.tsx
import { jsx as jsx229 } from "react/jsx-runtime";
function BackupSchedulesGrid({
  schedules,
  onPauseSchedule,
  onResumeSchedule,
  onEditSchedule,
  onDeleteSchedule,
  onViewScheduleDetails,
  loading = false
}) {
  if (loading) {
    return /* @__PURE__ */ jsx229("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: Array.from({ length: 4 }).map((_, index) => /* @__PURE__ */ jsx229("div", { className: "h-64 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  if (schedules.length === 0) {
    return /* @__PURE__ */ jsx229("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx229("p", { className: "text-text-tertiary", children: "No backup schedules found" }) });
  }
  return /* @__PURE__ */ jsx229("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: schedules.map((schedule) => /* @__PURE__ */ jsx229(
    BackupScheduleCard,
    {
      schedule,
      onPause: onPauseSchedule,
      onResume: onResumeSchedule,
      onEdit: onEditSchedule,
      onDelete: onDeleteSchedule,
      onViewDetails: onViewScheduleDetails
    },
    schedule.id
  )) });
}

// src/components/features/ApiManagement/components/ApiKeyCard.tsx
import { useState as useState79 } from "react";
import {
  Key,
  Copy as Copy2,
  Eye as Eye25,
  EyeOff as EyeOff7,
  Trash2 as Trash217,
  XCircle as XCircle19,
  User as User17
} from "lucide-react";
import { jsx as jsx230, jsxs as jsxs207 } from "react/jsx-runtime";
var getTypeColor4 = (type) => {
  switch (type) {
    case "READ":
      return "bg-blue-100 text-blue-800";
    case "WRITE":
      return "bg-green-100 text-green-800";
    case "ADMIN":
      return "bg-red-100 text-red-800";
    case "WEBHOOK":
      return "bg-purple-100 text-purple-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusColor9 = (status) => {
  switch (status) {
    case "ACTIVE":
      return "bg-green-100 text-green-800";
    case "INACTIVE":
      return "bg-yellow-100 text-yellow-800";
    case "EXPIRED":
      return "bg-red-100 text-red-800";
    case "REVOKED":
      return "bg-gray-100 text-gray-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
function ApiKeyCard({
  apiKey,
  onCopy,
  onRevoke,
  onDelete,
  onViewDetails
}) {
  const [showKey, setShowKey] = useState79(false);
  const toggleKeyVisibility = () => {
    setShowKey(!showKey);
  };
  const handleCopy = () => {
    if (onCopy) {
      onCopy(apiKey.key);
    } else {
      navigator.clipboard.writeText(apiKey.key);
    }
  };
  const usagePercentage = apiKey.usage.requests / apiKey.usage.limit * 100;
  return /* @__PURE__ */ jsxs207(Card, { className: "hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsxs207(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs207("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx230(Key, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx230(CardTitle, { className: "text-sm font-medium text-text-primary", children: apiKey.name })
      ] }),
      /* @__PURE__ */ jsxs207("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx230(Badge, { className: getTypeColor4(apiKey.type), children: apiKey.type }),
        /* @__PURE__ */ jsx230(Badge, { className: getStatusColor9(apiKey.status), children: apiKey.status })
      ] })
    ] }),
    /* @__PURE__ */ jsxs207(CardContent, { children: [
      /* @__PURE__ */ jsx230("p", { className: "text-sm text-text-secondary mb-3", children: apiKey.description }),
      /* @__PURE__ */ jsx230("div", { className: "mb-3", children: /* @__PURE__ */ jsxs207("div", { className: "flex items-center space-x-2 mb-2", children: [
        /* @__PURE__ */ jsx230("code", { className: "text-xs bg-bg-secondary px-2 py-1 rounded font-mono flex-1", children: showKey ? apiKey.key : "\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022" }),
        /* @__PURE__ */ jsx230(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: toggleKeyVisibility,
            className: "h-6 w-6 p-0",
            children: showKey ? /* @__PURE__ */ jsx230(EyeOff7, { className: "w-3 h-3" }) : /* @__PURE__ */ jsx230(Eye25, { className: "w-3 h-3" })
          }
        ),
        /* @__PURE__ */ jsx230(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: handleCopy,
            className: "h-6 w-6 p-0",
            children: /* @__PURE__ */ jsx230(Copy2, { className: "w-3 h-3" })
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs207("div", { className: "space-y-2 mb-3", children: [
        /* @__PURE__ */ jsxs207("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx230("span", { className: "text-text-tertiary", children: "Usage:" }),
          /* @__PURE__ */ jsxs207("span", { className: "text-text-primary", children: [
            apiKey.usage.requests.toLocaleString(),
            " / ",
            apiKey.usage.limit.toLocaleString()
          ] })
        ] }),
        /* @__PURE__ */ jsx230("div", { className: "w-full bg-gray-200 rounded-full h-2", children: /* @__PURE__ */ jsx230(
          "div",
          {
            className: `h-2 rounded-full ${usagePercentage > 90 ? "bg-red-500" : usagePercentage > 75 ? "bg-yellow-500" : "bg-green-500"}`,
            style: { width: `${Math.min(usagePercentage, 100)}%` }
          }
        ) }),
        /* @__PURE__ */ jsxs207("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx230("span", { className: "text-text-tertiary", children: "Created:" }),
          /* @__PURE__ */ jsx230("span", { className: "text-text-primary", children: new Date(apiKey.createdAt).toLocaleDateString() })
        ] }),
        apiKey.lastUsed && /* @__PURE__ */ jsxs207("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx230("span", { className: "text-text-tertiary", children: "Last Used:" }),
          /* @__PURE__ */ jsx230("span", { className: "text-text-primary", children: new Date(apiKey.lastUsed).toLocaleDateString() })
        ] }),
        apiKey.expiresAt && /* @__PURE__ */ jsxs207("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx230("span", { className: "text-text-tertiary", children: "Expires:" }),
          /* @__PURE__ */ jsx230("span", { className: "text-text-primary", children: new Date(apiKey.expiresAt).toLocaleDateString() })
        ] })
      ] }),
      /* @__PURE__ */ jsxs207("div", { className: "mb-3", children: [
        /* @__PURE__ */ jsx230("p", { className: "text-xs text-text-tertiary mb-1", children: "Permissions:" }),
        /* @__PURE__ */ jsx230("div", { className: "flex flex-wrap gap-1", children: apiKey.permissions.map((permission, index) => /* @__PURE__ */ jsx230("span", { className: "text-xs bg-bg-secondary px-2 py-1 rounded", children: permission }, index)) })
      ] }),
      /* @__PURE__ */ jsx230("div", { className: "flex items-center justify-between text-xs text-text-tertiary mb-3", children: /* @__PURE__ */ jsxs207("div", { className: "flex items-center space-x-1", children: [
        /* @__PURE__ */ jsx230(User17, { className: "h-3 w-3" }),
        /* @__PURE__ */ jsx230("span", { children: apiKey.createdBy })
      ] }) }),
      /* @__PURE__ */ jsxs207("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx230("div", { className: "flex space-x-2", children: onViewDetails && /* @__PURE__ */ jsx230(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onViewDetails(apiKey),
            children: "View Details"
          }
        ) }),
        /* @__PURE__ */ jsxs207("div", { className: "flex space-x-2", children: [
          apiKey.status === "ACTIVE" && onRevoke && /* @__PURE__ */ jsxs207(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onRevoke(apiKey.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx230(XCircle19, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx230("span", { children: "Revoke" })
              ]
            }
          ),
          onDelete && /* @__PURE__ */ jsxs207(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onDelete(apiKey.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx230(Trash217, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx230("span", { children: "Delete" })
              ]
            }
          )
        ] })
      ] })
    ] })
  ] });
}
var ApiKeyCard_default = ApiKeyCard;

// src/components/features/ApiManagement/components/ApiEndpointCard.tsx
import {
  Globe as Globe4,
  Settings as Settings8,
  User as User18
} from "lucide-react";
import { jsx as jsx231, jsxs as jsxs208 } from "react/jsx-runtime";
var getMethodColor = (method) => {
  switch (method) {
    case "GET":
      return "bg-green-100 text-green-800";
    case "POST":
      return "bg-blue-100 text-blue-800";
    case "PUT":
      return "bg-yellow-100 text-yellow-800";
    case "DELETE":
      return "bg-red-100 text-red-800";
    case "PATCH":
      return "bg-purple-100 text-purple-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getStatusColor10 = (status) => {
  switch (status) {
    case "ACTIVE":
      return "bg-green-100 text-green-800";
    case "DEPRECATED":
      return "bg-yellow-100 text-yellow-800";
    case "MAINTENANCE":
      return "bg-red-100 text-red-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
function ApiEndpointCard({
  endpoint,
  onEdit,
  onViewDetails
}) {
  return /* @__PURE__ */ jsxs208(Card, { className: "hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsxs208(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs208("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx231(Globe4, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx231(CardTitle, { className: "text-sm font-medium text-text-primary font-mono", children: endpoint.path })
      ] }),
      /* @__PURE__ */ jsxs208("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx231(Badge, { className: getMethodColor(endpoint.method), children: endpoint.method }),
        /* @__PURE__ */ jsx231(Badge, { className: getStatusColor10(endpoint.status), children: endpoint.status })
      ] })
    ] }),
    /* @__PURE__ */ jsxs208(CardContent, { children: [
      /* @__PURE__ */ jsx231("p", { className: "text-sm text-text-secondary mb-3", children: endpoint.description }),
      /* @__PURE__ */ jsxs208("div", { className: "space-y-2 mb-3", children: [
        /* @__PURE__ */ jsxs208("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx231("span", { className: "text-text-tertiary", children: "Version:" }),
          /* @__PURE__ */ jsx231("span", { className: "text-text-primary", children: endpoint.version })
        ] }),
        /* @__PURE__ */ jsxs208("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx231("span", { className: "text-text-tertiary", children: "Rate Limit:" }),
          /* @__PURE__ */ jsxs208("span", { className: "text-text-primary", children: [
            endpoint.rateLimit.requests,
            " requests per ",
            endpoint.rateLimit.window
          ] })
        ] }),
        /* @__PURE__ */ jsxs208("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx231("span", { className: "text-text-tertiary", children: "Last Modified:" }),
          /* @__PURE__ */ jsx231("span", { className: "text-text-primary", children: new Date(endpoint.lastModified).toLocaleDateString() })
        ] })
      ] }),
      /* @__PURE__ */ jsx231("div", { className: "flex items-center justify-between text-xs text-text-tertiary mb-3", children: /* @__PURE__ */ jsxs208("div", { className: "flex items-center space-x-1", children: [
        /* @__PURE__ */ jsx231(User18, { className: "h-3 w-3" }),
        /* @__PURE__ */ jsxs208("span", { children: [
          "Modified by ",
          endpoint.modifiedBy
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs208("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx231("div", { className: "flex space-x-2", children: onViewDetails && /* @__PURE__ */ jsx231(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onViewDetails(endpoint),
            children: "View Details"
          }
        ) }),
        /* @__PURE__ */ jsx231("div", { className: "flex space-x-2", children: onEdit && /* @__PURE__ */ jsxs208(
          Button2,
          {
            size: "sm",
            onClick: () => onEdit(endpoint),
            className: "flex items-center space-x-1",
            children: [
              /* @__PURE__ */ jsx231(Settings8, { className: "h-3 w-3" }),
              /* @__PURE__ */ jsx231("span", { children: "Edit" })
            ]
          }
        ) })
      ] })
    ] })
  ] });
}
var ApiEndpointCard_default = ApiEndpointCard;

// src/components/features/ApiManagement/components/ApiKeysGrid.tsx
import { jsx as jsx232 } from "react/jsx-runtime";
function ApiKeysGrid({
  apiKeys,
  onCopyKey,
  onRevokeKey,
  onDeleteKey,
  onViewKeyDetails,
  loading = false
}) {
  if (loading) {
    return /* @__PURE__ */ jsx232("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: Array.from({ length: 6 }).map((_, index) => /* @__PURE__ */ jsx232("div", { className: "h-80 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  if (apiKeys.length === 0) {
    return /* @__PURE__ */ jsx232("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx232("p", { className: "text-text-tertiary", children: "No API keys found" }) });
  }
  return /* @__PURE__ */ jsx232("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: apiKeys.map((apiKey) => /* @__PURE__ */ jsx232(
    ApiKeyCard,
    {
      apiKey,
      onCopy: onCopyKey,
      onRevoke: onRevokeKey,
      onDelete: onDeleteKey,
      onViewDetails: onViewKeyDetails
    },
    apiKey.id
  )) });
}

// src/components/features/ApiManagement/components/ApiEndpointsGrid.tsx
import { jsx as jsx233 } from "react/jsx-runtime";
function ApiEndpointsGrid({
  endpoints,
  onEditEndpoint,
  onViewEndpointDetails,
  loading = false
}) {
  if (loading) {
    return /* @__PURE__ */ jsx233("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: Array.from({ length: 6 }).map((_, index) => /* @__PURE__ */ jsx233("div", { className: "h-64 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  if (endpoints.length === 0) {
    return /* @__PURE__ */ jsx233("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx233("p", { className: "text-text-tertiary", children: "No API endpoints found" }) });
  }
  return /* @__PURE__ */ jsx233("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: endpoints.map((endpoint) => /* @__PURE__ */ jsx233(
    ApiEndpointCard,
    {
      endpoint,
      onEdit: onEditEndpoint,
      onViewDetails: onViewEndpointDetails
    },
    endpoint.id
  )) });
}

// src/components/features/SystemLogs/components/LogEntryCard.tsx
import {
  Eye as Eye26,
  User as User19,
  Globe as Globe5,
  Info as Info9,
  CheckCircle as CheckCircle28,
  AlertTriangle as AlertTriangle16,
  XCircle as XCircle20,
  AlertCircle as AlertCircle16
} from "lucide-react";
import { jsx as jsx234, jsxs as jsxs209 } from "react/jsx-runtime";
var getLevelColor = (level) => {
  switch (level) {
    case "DEBUG":
      return "bg-gray-100 text-gray-800";
    case "INFO":
      return "bg-blue-100 text-blue-800";
    case "WARN":
      return "bg-yellow-100 text-yellow-800";
    case "ERROR":
      return "bg-red-100 text-red-800";
    case "FATAL":
      return "bg-red-200 text-red-900";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getSourceColor = (source) => {
  switch (source) {
    case "API":
      return "bg-blue-100 text-blue-800";
    case "DATABASE":
      return "bg-green-100 text-green-800";
    case "AUTH":
      return "bg-purple-100 text-purple-800";
    case "PAYMENT":
      return "bg-orange-100 text-orange-800";
    case "SYSTEM":
      return "bg-gray-100 text-gray-800";
    case "CLIENT":
      return "bg-cyan-100 text-cyan-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getLevelIcon = (level) => {
  switch (level) {
    case "DEBUG":
      return Info9;
    case "INFO":
      return CheckCircle28;
    case "WARN":
      return AlertTriangle16;
    case "ERROR":
      return XCircle20;
    case "FATAL":
      return AlertCircle16;
    default:
      return Info9;
  }
};
function LogEntryCard({
  log,
  onViewDetails,
  showFullDetails = false
}) {
  const LevelIcon = getLevelIcon(log.level);
  const logDate = new Date(log.timestamp);
  return /* @__PURE__ */ jsxs209(Card, { className: "hover:shadow-md transition-shadow", children: [
    /* @__PURE__ */ jsxs209(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs209("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx234(LevelIcon, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx234(CardTitle, { className: "text-sm font-medium text-text-primary", children: log.message })
      ] }),
      /* @__PURE__ */ jsxs209("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx234(Badge, { className: getLevelColor(log.level), children: log.level }),
        /* @__PURE__ */ jsx234(Badge, { className: getSourceColor(log.source), children: log.source })
      ] })
    ] }),
    /* @__PURE__ */ jsxs209(CardContent, { children: [
      log.details && /* @__PURE__ */ jsx234("p", { className: "text-sm text-text-secondary mb-3", children: log.details }),
      /* @__PURE__ */ jsxs209("div", { className: "space-y-2 mb-3", children: [
        /* @__PURE__ */ jsxs209("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx234("span", { className: "text-text-tertiary", children: "Timestamp:" }),
          /* @__PURE__ */ jsx234("span", { className: "text-text-primary font-mono", children: logDate.toLocaleString() })
        ] }),
        log.userId && /* @__PURE__ */ jsxs209("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx234("span", { className: "text-text-tertiary", children: "User ID:" }),
          /* @__PURE__ */ jsx234("span", { className: "text-text-primary", children: log.userId })
        ] }),
        log.requestId && /* @__PURE__ */ jsxs209("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx234("span", { className: "text-text-tertiary", children: "Request ID:" }),
          /* @__PURE__ */ jsx234("span", { className: "text-text-primary font-mono", children: log.requestId })
        ] }),
        log.ipAddress && /* @__PURE__ */ jsxs209("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx234("span", { className: "text-text-tertiary", children: "IP Address:" }),
          /* @__PURE__ */ jsx234("span", { className: "text-text-primary font-mono", children: log.ipAddress })
        ] })
      ] }),
      showFullDetails && log.stackTrace && /* @__PURE__ */ jsxs209("div", { className: "mb-3", children: [
        /* @__PURE__ */ jsx234("p", { className: "text-xs text-text-tertiary mb-1", children: "Stack Trace:" }),
        /* @__PURE__ */ jsx234("pre", { className: "text-xs text-text-primary bg-bg-secondary p-2 rounded overflow-auto max-h-32", children: log.stackTrace })
      ] }),
      showFullDetails && log.metadata && /* @__PURE__ */ jsxs209("div", { className: "mb-3", children: [
        /* @__PURE__ */ jsx234("p", { className: "text-xs text-text-tertiary mb-1", children: "Metadata:" }),
        /* @__PURE__ */ jsx234("pre", { className: "text-xs text-text-primary bg-bg-secondary p-2 rounded overflow-auto max-h-32", children: JSON.stringify(log.metadata, null, 2) })
      ] }),
      /* @__PURE__ */ jsxs209("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs209("div", { className: "flex items-center space-x-4 text-xs text-text-tertiary", children: [
          log.userId && /* @__PURE__ */ jsxs209("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsx234(User19, { className: "h-3 w-3" }),
            /* @__PURE__ */ jsx234("span", { children: log.userId })
          ] }),
          log.ipAddress && /* @__PURE__ */ jsxs209("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsx234(Globe5, { className: "h-3 w-3" }),
            /* @__PURE__ */ jsx234("span", { children: log.ipAddress })
          ] })
        ] }),
        /* @__PURE__ */ jsx234("div", { className: "flex space-x-2", children: onViewDetails && /* @__PURE__ */ jsxs209(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: () => onViewDetails(log),
            className: "flex items-center space-x-1",
            children: [
              /* @__PURE__ */ jsx234(Eye26, { className: "h-3 w-3" }),
              /* @__PURE__ */ jsx234("span", { children: "View Details" })
            ]
          }
        ) })
      ] })
    ] })
  ] });
}
var LogEntryCard_default = LogEntryCard;

// src/components/features/SystemLogs/components/LogsList.tsx
import { jsx as jsx235, jsxs as jsxs210 } from "react/jsx-runtime";
function LogsList({
  logs,
  onViewLogDetails,
  loading = false,
  maxItems = 50,
  showFullDetails = false
}) {
  if (loading) {
    return /* @__PURE__ */ jsx235("div", { className: "space-y-4", children: Array.from({ length: 5 }).map((_, index) => /* @__PURE__ */ jsx235("div", { className: "h-32 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  const displayLogs = logs.slice(0, maxItems);
  if (logs.length === 0) {
    return /* @__PURE__ */ jsx235("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx235("p", { className: "text-text-tertiary", children: "No logs found" }) });
  }
  return /* @__PURE__ */ jsxs210("div", { className: "space-y-4", children: [
    displayLogs.map((log) => /* @__PURE__ */ jsx235(
      LogEntryCard,
      {
        log,
        onViewDetails: onViewLogDetails,
        showFullDetails
      },
      log.id
    )),
    logs.length > maxItems && /* @__PURE__ */ jsx235("div", { className: "text-center py-4", children: /* @__PURE__ */ jsxs210("p", { className: "text-sm text-text-tertiary", children: [
      "Showing ",
      maxItems,
      " of ",
      logs.length,
      " logs"
    ] }) })
  ] });
}

// src/components/features/SystemLogs/components/LogFilters.tsx
import { Search as Search5, Filter as Filter4, RefreshCw as RefreshCw5, Download as Download12 } from "lucide-react";
import { jsx as jsx236, jsxs as jsxs211 } from "react/jsx-runtime";
var levelOptions = [
  { value: "all", label: "All Levels" },
  { value: "DEBUG", label: "Debug" },
  { value: "INFO", label: "Info" },
  { value: "WARN", label: "Warning" },
  { value: "ERROR", label: "Error" },
  { value: "FATAL", label: "Fatal" }
];
var sourceOptions = [
  { value: "all", label: "All Sources" },
  { value: "API", label: "API" },
  { value: "DATABASE", label: "Database" },
  { value: "AUTH", label: "Authentication" },
  { value: "PAYMENT", label: "Payment" },
  { value: "SYSTEM", label: "System" },
  { value: "CLIENT", label: "Client" }
];
var dateOptions = [
  { value: "all", label: "All Time" },
  { value: "today", label: "Today" },
  { value: "yesterday", label: "Yesterday" },
  { value: "week", label: "This Week" },
  { value: "month", label: "This Month" }
];
function LogFilters({
  searchTerm,
  onSearchChange,
  levelFilter,
  onLevelFilterChange,
  sourceFilter,
  onSourceFilterChange,
  dateFilter,
  onDateFilterChange,
  onRefresh,
  onExport,
  loading = false
}) {
  return /* @__PURE__ */ jsxs211(Card, { children: [
    /* @__PURE__ */ jsx236(CardHeader, { children: /* @__PURE__ */ jsxs211(CardTitle, { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx236(Filter4, { className: "w-4 h-4" }),
      "Log Filters"
    ] }) }),
    /* @__PURE__ */ jsxs211(CardContent, { children: [
      /* @__PURE__ */ jsxs211("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4", children: [
        /* @__PURE__ */ jsxs211("div", { children: [
          /* @__PURE__ */ jsx236("label", { className: "text-sm font-medium text-text-secondary mb-1 block", children: "Search" }),
          /* @__PURE__ */ jsxs211("div", { className: "relative", children: [
            /* @__PURE__ */ jsx236(Search5, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-tertiary" }),
            /* @__PURE__ */ jsx236(
              Input,
              {
                placeholder: "Search logs...",
                value: searchTerm,
                onChange: (e2) => onSearchChange(e2.target.value),
                className: "pl-10"
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxs211("div", { children: [
          /* @__PURE__ */ jsx236("label", { className: "text-sm font-medium text-text-secondary mb-1 block", children: "Level" }),
          /* @__PURE__ */ jsx236(Select, { value: levelFilter, onValueChange: onLevelFilterChange, children: levelOptions.map((option) => /* @__PURE__ */ jsx236("option", { value: option.value, children: option.label }, option.value)) })
        ] }),
        /* @__PURE__ */ jsxs211("div", { children: [
          /* @__PURE__ */ jsx236("label", { className: "text-sm font-medium text-text-secondary mb-1 block", children: "Source" }),
          /* @__PURE__ */ jsx236(Select, { value: sourceFilter, onValueChange: onSourceFilterChange, children: sourceOptions.map((option) => /* @__PURE__ */ jsx236("option", { value: option.value, children: option.label }, option.value)) })
        ] }),
        /* @__PURE__ */ jsxs211("div", { children: [
          /* @__PURE__ */ jsx236("label", { className: "text-sm font-medium text-text-secondary mb-1 block", children: "Date Range" }),
          /* @__PURE__ */ jsx236(Select, { value: dateFilter, onValueChange: onDateFilterChange, children: dateOptions.map((option) => /* @__PURE__ */ jsx236("option", { value: option.value, children: option.label }, option.value)) })
        ] })
      ] }),
      /* @__PURE__ */ jsxs211("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsx236("div", { className: "flex items-center space-x-2", children: onRefresh && /* @__PURE__ */ jsxs211(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: onRefresh,
            disabled: loading,
            className: "flex items-center space-x-1",
            children: [
              /* @__PURE__ */ jsx236(RefreshCw5, { className: `h-3 w-3 ${loading ? "animate-spin" : ""}` }),
              /* @__PURE__ */ jsx236("span", { children: "Refresh" })
            ]
          }
        ) }),
        /* @__PURE__ */ jsx236("div", { className: "flex items-center space-x-2", children: onExport && /* @__PURE__ */ jsxs211(
          Button2,
          {
            variant: "outline",
            size: "sm",
            onClick: onExport,
            className: "flex items-center space-x-1",
            children: [
              /* @__PURE__ */ jsx236(Download12, { className: "h-3 w-3" }),
              /* @__PURE__ */ jsx236("span", { children: "Export" })
            ]
          }
        ) })
      ] })
    ] })
  ] });
}

// src/components/features/Security/components/SecurityEventCard.tsx
import {
  Shield as Shield6,
  Eye as Eye27,
  User as User20,
  Globe as Globe6,
  AlertTriangle as AlertTriangle17,
  CheckCircle as CheckCircle29,
  XCircle as XCircle21,
  Info as Info10
} from "lucide-react";
import { jsx as jsx237, jsxs as jsxs212 } from "react/jsx-runtime";
var getTypeColor5 = (type) => {
  switch (type) {
    case "LOGIN_ATTEMPT":
      return "bg-blue-100 text-blue-800";
    case "FAILED_LOGIN":
      return "bg-yellow-100 text-yellow-800";
    case "SUSPICIOUS_ACTIVITY":
      return "bg-orange-100 text-orange-800";
    case "DATA_BREACH":
      return "bg-red-100 text-red-800";
    case "UNAUTHORIZED_ACCESS":
      return "bg-red-200 text-red-900";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getSeverityColor2 = (severity) => {
  switch (severity) {
    case "LOW":
      return "bg-green-100 text-green-800";
    case "MEDIUM":
      return "bg-yellow-100 text-yellow-800";
    case "HIGH":
      return "bg-orange-100 text-orange-800";
    case "CRITICAL":
      return "bg-red-100 text-red-800";
    default:
      return "bg-gray-100 text-gray-800";
  }
};
var getSeverityIcon2 = (severity) => {
  switch (severity) {
    case "LOW":
      return Info10;
    case "MEDIUM":
      return AlertTriangle17;
    case "HIGH":
      return AlertTriangle17;
    case "CRITICAL":
      return XCircle21;
    default:
      return Info10;
  }
};
var getTypeIcon = (type) => {
  switch (type) {
    case "LOGIN_ATTEMPT":
      return CheckCircle29;
    case "FAILED_LOGIN":
      return XCircle21;
    case "SUSPICIOUS_ACTIVITY":
      return AlertTriangle17;
    case "DATA_BREACH":
      return XCircle21;
    case "UNAUTHORIZED_ACCESS":
      return XCircle21;
    default:
      return Shield6;
  }
};
function SecurityEventCard({
  event,
  onViewDetails,
  onResolve,
  showFullDetails = false
}) {
  const SeverityIcon = getSeverityIcon2(event.severity);
  const TypeIcon = getTypeIcon(event.type);
  const eventDate = new Date(event.timestamp);
  return /* @__PURE__ */ jsxs212(Card, { className: `hover:shadow-md transition-shadow ${event.severity === "CRITICAL" ? "border-l-4 border-l-red-500" : ""}`, children: [
    /* @__PURE__ */ jsxs212(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
      /* @__PURE__ */ jsxs212("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx237(TypeIcon, { className: "h-4 w-4 text-text-tertiary" }),
        /* @__PURE__ */ jsx237(CardTitle, { className: "text-sm font-medium text-text-primary", children: event.description })
      ] }),
      /* @__PURE__ */ jsxs212("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx237(Badge, { className: getTypeColor5(event.type), children: event.type.replace("_", " ") }),
        /* @__PURE__ */ jsx237(Badge, { className: getSeverityColor2(event.severity), children: event.severity })
      ] })
    ] }),
    /* @__PURE__ */ jsxs212(CardContent, { children: [
      /* @__PURE__ */ jsx237("p", { className: "text-sm text-text-secondary mb-3", children: event.details }),
      /* @__PURE__ */ jsxs212("div", { className: "space-y-2 mb-3", children: [
        /* @__PURE__ */ jsxs212("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx237("span", { className: "text-text-tertiary", children: "Timestamp:" }),
          /* @__PURE__ */ jsx237("span", { className: "text-text-primary font-mono", children: eventDate.toLocaleString() })
        ] }),
        /* @__PURE__ */ jsxs212("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx237("span", { className: "text-text-tertiary", children: "Source:" }),
          /* @__PURE__ */ jsx237("span", { className: "text-text-primary", children: event.source })
        ] }),
        event.userId && /* @__PURE__ */ jsxs212("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx237("span", { className: "text-text-tertiary", children: "User ID:" }),
          /* @__PURE__ */ jsx237("span", { className: "text-text-primary", children: event.userId })
        ] }),
        event.ipAddress && /* @__PURE__ */ jsxs212("div", { className: "flex items-center justify-between text-xs", children: [
          /* @__PURE__ */ jsx237("span", { className: "text-text-tertiary", children: "IP Address:" }),
          /* @__PURE__ */ jsx237("span", { className: "text-text-primary font-mono", children: event.ipAddress })
        ] })
      ] }),
      showFullDetails && event.userAgent && /* @__PURE__ */ jsxs212("div", { className: "mb-3", children: [
        /* @__PURE__ */ jsx237("p", { className: "text-xs text-text-tertiary mb-1", children: "User Agent:" }),
        /* @__PURE__ */ jsx237("p", { className: "text-xs text-text-primary break-all", children: event.userAgent })
      ] }),
      /* @__PURE__ */ jsxs212("div", { className: "flex items-center justify-between mb-3", children: [
        /* @__PURE__ */ jsxs212("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx237(SeverityIcon, { className: "h-4 w-4 text-text-tertiary" }),
          event.resolved ? /* @__PURE__ */ jsxs212("div", { className: "flex items-center space-x-1 text-green-600", children: [
            /* @__PURE__ */ jsx237(CheckCircle29, { className: "h-3 w-3" }),
            /* @__PURE__ */ jsx237("span", { className: "text-xs", children: "Resolved" })
          ] }) : /* @__PURE__ */ jsxs212("div", { className: "flex items-center space-x-1 text-orange-600", children: [
            /* @__PURE__ */ jsx237(AlertTriangle17, { className: "h-3 w-3" }),
            /* @__PURE__ */ jsx237("span", { className: "text-xs", children: "Active" })
          ] })
        ] }),
        event.resolved && event.resolvedAt && /* @__PURE__ */ jsxs212("span", { className: "text-xs text-text-tertiary", children: [
          "Resolved: ",
          new Date(event.resolvedAt).toLocaleDateString()
        ] })
      ] }),
      /* @__PURE__ */ jsxs212("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxs212("div", { className: "flex items-center space-x-4 text-xs text-text-tertiary", children: [
          event.userId && /* @__PURE__ */ jsxs212("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsx237(User20, { className: "h-3 w-3" }),
            /* @__PURE__ */ jsx237("span", { children: event.userId })
          ] }),
          event.ipAddress && /* @__PURE__ */ jsxs212("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsx237(Globe6, { className: "h-3 w-3" }),
            /* @__PURE__ */ jsx237("span", { children: event.ipAddress })
          ] })
        ] }),
        /* @__PURE__ */ jsxs212("div", { className: "flex space-x-2", children: [
          onViewDetails && /* @__PURE__ */ jsxs212(
            Button2,
            {
              variant: "outline",
              size: "sm",
              onClick: () => onViewDetails(event),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx237(Eye27, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx237("span", { children: "View Details" })
              ]
            }
          ),
          !event.resolved && onResolve && /* @__PURE__ */ jsxs212(
            Button2,
            {
              size: "sm",
              onClick: () => onResolve(event.id),
              className: "flex items-center space-x-1",
              children: [
                /* @__PURE__ */ jsx237(CheckCircle29, { className: "h-3 w-3" }),
                /* @__PURE__ */ jsx237("span", { children: "Resolve" })
              ]
            }
          )
        ] })
      ] })
    ] })
  ] });
}
var SecurityEventCard_default = SecurityEventCard;

// src/components/features/Security/components/SecurityEventsList.tsx
import { jsx as jsx238, jsxs as jsxs213 } from "react/jsx-runtime";
function SecurityEventsList({
  events,
  onViewEventDetails,
  onResolveEvent,
  loading = false,
  maxItems = 20,
  showFullDetails = false
}) {
  if (loading) {
    return /* @__PURE__ */ jsx238("div", { className: "space-y-4", children: Array.from({ length: 5 }).map((_, index) => /* @__PURE__ */ jsx238("div", { className: "h-40 bg-gray-200 animate-pulse rounded-lg" }, index)) });
  }
  const displayEvents = events.slice(0, maxItems);
  const activeEvents = displayEvents.filter((event) => !event.resolved);
  const resolvedEvents = displayEvents.filter((event) => event.resolved);
  if (events.length === 0) {
    return /* @__PURE__ */ jsx238("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx238("p", { className: "text-text-tertiary", children: "No security events found" }) });
  }
  return /* @__PURE__ */ jsxs213("div", { className: "space-y-6", children: [
    activeEvents.length > 0 && /* @__PURE__ */ jsxs213("div", { children: [
      /* @__PURE__ */ jsxs213("h3", { className: "text-sm font-medium text-text-primary mb-3", children: [
        "Active Security Events (",
        activeEvents.length,
        ")"
      ] }),
      /* @__PURE__ */ jsx238("div", { className: "space-y-4", children: activeEvents.map((event) => /* @__PURE__ */ jsx238(
        SecurityEventCard,
        {
          event,
          onViewDetails: onViewEventDetails,
          onResolve: onResolveEvent,
          showFullDetails
        },
        event.id
      )) })
    ] }),
    resolvedEvents.length > 0 && /* @__PURE__ */ jsxs213("div", { children: [
      /* @__PURE__ */ jsxs213("h3", { className: "text-sm font-medium text-text-primary mb-3", children: [
        "Recently Resolved (",
        resolvedEvents.length,
        ")"
      ] }),
      /* @__PURE__ */ jsx238("div", { className: "space-y-4", children: resolvedEvents.map((event) => /* @__PURE__ */ jsx238(
        SecurityEventCard,
        {
          event,
          onViewDetails: onViewEventDetails,
          showFullDetails
        },
        event.id
      )) })
    ] }),
    events.length > maxItems && /* @__PURE__ */ jsx238("div", { className: "text-center py-4", children: /* @__PURE__ */ jsxs213("p", { className: "text-sm text-text-tertiary", children: [
      "Showing ",
      maxItems,
      " of ",
      events.length,
      " security events"
    ] }) })
  ] });
}

// src/components/features/Security/components/SecurityMetricsCard.tsx
import {
  TrendingUp as TrendingUp9,
  TrendingDown as TrendingDown3
} from "lucide-react";
import { jsx as jsx239, jsxs as jsxs214 } from "react/jsx-runtime";
function SecurityMetricsCard({ metrics }) {
  return /* @__PURE__ */ jsx239("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: metrics.map((metric, index) => {
    const Icon2 = metric.icon;
    const ChangeIcon = metric.change?.isPositive ? TrendingUp9 : TrendingDown3;
    return /* @__PURE__ */ jsxs214(Card, { className: "hover:shadow-md transition-shadow", children: [
      /* @__PURE__ */ jsxs214(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
        /* @__PURE__ */ jsx239(CardTitle, { className: "text-sm font-medium text-text-secondary", children: metric.title }),
        /* @__PURE__ */ jsx239("div", { className: `p-2 rounded-lg ${metric.bgColor}`, children: /* @__PURE__ */ jsx239(Icon2, { className: `h-4 w-4 ${metric.color}` }) })
      ] }),
      /* @__PURE__ */ jsxs214(CardContent, { children: [
        /* @__PURE__ */ jsxs214("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsx239("div", { className: "text-2xl font-bold text-text-primary", children: metric.value }),
          metric.change && /* @__PURE__ */ jsxs214("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsx239(ChangeIcon, { className: `h-3 w-3 ${metric.change.isPositive ? "text-green-500" : "text-red-500"}` }),
            /* @__PURE__ */ jsxs214("span", { className: `text-xs ${metric.change.isPositive ? "text-green-500" : "text-red-500"}`, children: [
              metric.change.isPositive ? "+" : "",
              metric.change.value,
              "%"
            ] })
          ] })
        ] }),
        metric.change && /* @__PURE__ */ jsx239("p", { className: "text-xs text-text-tertiary mt-1", children: metric.change.period })
      ] })
    ] }, index);
  }) });
}

// src/components/features/AuditLogs/AuditLogViewer.tsx
import { useState as useState81 } from "react";
import {
  Card as Card57,
  CardContent as CardContent56,
  CardHeader as CardHeader39,
  CardTitle as CardTitle39,
  Button as Button61,
  Input as Input28,
  Select as Select17,
  SelectContent as SelectContent17,
  SelectItem as SelectItem17,
  SelectTrigger as SelectTrigger17,
  SelectValue as SelectValue17,
  Badge as Badge28
} from "@rentalshop/ui";

// src/components/features/AuditLogs/AuditLogDetail.tsx
import React111, { useState as useState80 } from "react";
import {
  Dialog as Dialog16,
  DialogContent as DialogContent16,
  DialogHeader as DialogHeader16,
  DialogTitle as DialogTitle16,
  Button as Button60,
  Badge as Badge27,
  Card as Card56,
  CardContent as CardContent55,
  CardHeader as CardHeader38,
  CardTitle as CardTitle38
} from "@rentalshop/ui";
import {
  User as User21,
  Calendar as Calendar29,
  MapPin as MapPin7,
  Monitor as Monitor2,
  Activity as Activity6,
  AlertTriangle as AlertTriangle19,
  CheckCircle as CheckCircle31,
  XCircle as XCircle23,
  Info as Info11,
  Eye as Eye28,
  EyeOff as EyeOff8
} from "lucide-react";
import { Fragment as Fragment47, jsx as jsx240, jsxs as jsxs215 } from "react/jsx-runtime";
function SeverityBadge({ severity }) {
  const getSeverityStyle = (severity2) => {
    switch (severity2) {
      case "CRITICAL":
        return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
      case "ERROR":
        return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
      case "WARNING":
        return "bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800";
      case "INFO":
        return "bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800";
      default:
        return "bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800";
    }
  };
  const getSeverityIcon3 = (severity2) => {
    switch (severity2) {
      case "CRITICAL":
        return /* @__PURE__ */ jsx240(XCircle23, { className: "w-3 h-3" });
      case "ERROR":
        return /* @__PURE__ */ jsx240(XCircle23, { className: "w-3 h-3" });
      case "WARNING":
        return /* @__PURE__ */ jsx240(AlertTriangle19, { className: "w-3 h-3" });
      case "INFO":
        return /* @__PURE__ */ jsx240(Info11, { className: "w-3 h-3" });
      default:
        return /* @__PURE__ */ jsx240(Info11, { className: "w-3 h-3" });
    }
  };
  return /* @__PURE__ */ jsxs215(Badge27, { className: `inline-flex items-center gap-1 ${getSeverityStyle(severity)}`, children: [
    getSeverityIcon3(severity),
    severity
  ] });
}
function ActionBadge({ action }) {
  const getActionStyle = (action2) => {
    switch (action2) {
      case "CREATE":
        return "bg-green-100 text-green-800 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800";
      case "UPDATE":
        return "bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800";
      case "DELETE":
        return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
      case "LOGIN":
        return "bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800";
      case "LOGOUT":
        return "bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800";
      case "VIEW":
        return "bg-indigo-100 text-indigo-800 border-indigo-200 dark:bg-indigo-900/20 dark:text-indigo-400 dark:border-indigo-800";
      default:
        return "bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800";
    }
  };
  return /* @__PURE__ */ jsx240(Badge27, { className: getActionStyle(action), children: action });
}
function JsonViewer({ data, title }) {
  const [isExpanded, setIsExpanded] = React111.useState(false);
  if (!data) {
    return /* @__PURE__ */ jsxs215(Card56, { children: [
      /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsx240(CardTitle38, { className: "text-sm", children: title }) }),
      /* @__PURE__ */ jsx240(CardContent55, { children: /* @__PURE__ */ jsx240("p", { className: "text-text-secondary text-sm", children: "No data available" }) })
    ] });
  }
  return /* @__PURE__ */ jsxs215(Card56, { children: [
    /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsxs215(CardTitle38, { className: "text-sm flex items-center justify-between", children: [
      title,
      /* @__PURE__ */ jsxs215(
        Button60,
        {
          variant: "ghost",
          size: "sm",
          onClick: () => setIsExpanded(!isExpanded),
          children: [
            isExpanded ? /* @__PURE__ */ jsx240(EyeOff8, { className: "w-4 h-4" }) : /* @__PURE__ */ jsx240(Eye28, { className: "w-4 h-4" }),
            isExpanded ? "Collapse" : "Expand"
          ]
        }
      )
    ] }) }),
    /* @__PURE__ */ jsx240(CardContent55, { children: /* @__PURE__ */ jsx240("pre", { className: `text-xs font-mono bg-bg-secondary p-3 rounded-lg overflow-auto ${isExpanded ? "max-h-96" : "max-h-32"}`, children: JSON.stringify(data, null, 2) }) })
  ] });
}
function ChangesViewer({ changes }) {
  if (!changes || Object.keys(changes).length === 0) {
    return /* @__PURE__ */ jsxs215(Card56, { children: [
      /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsx240(CardTitle38, { className: "text-sm", children: "Changes" }) }),
      /* @__PURE__ */ jsx240(CardContent55, { children: /* @__PURE__ */ jsx240("p", { className: "text-text-secondary text-sm", children: "No changes detected" }) })
    ] });
  }
  return /* @__PURE__ */ jsxs215(Card56, { children: [
    /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsxs215(CardTitle38, { className: "text-sm", children: [
      "Changes (",
      Object.keys(changes).length,
      " fields)"
    ] }) }),
    /* @__PURE__ */ jsx240(CardContent55, { children: /* @__PURE__ */ jsx240("div", { className: "space-y-3", children: Object.entries(changes).map(([field, change]) => /* @__PURE__ */ jsxs215("div", { className: "border rounded-lg p-3", children: [
      /* @__PURE__ */ jsx240("div", { className: "font-medium text-sm mb-2", children: field }),
      /* @__PURE__ */ jsxs215("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-3", children: [
        /* @__PURE__ */ jsxs215("div", { children: [
          /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary mb-1", children: "Old Value" }),
          /* @__PURE__ */ jsx240("div", { className: "text-xs font-mono bg-red-50 dark:bg-red-900/20 p-2 rounded", children: change.old === null ? "null" : JSON.stringify(change.old) })
        ] }),
        /* @__PURE__ */ jsxs215("div", { children: [
          /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary mb-1", children: "New Value" }),
          /* @__PURE__ */ jsx240("div", { className: "text-xs font-mono bg-green-50 dark:bg-green-900/20 p-2 rounded", children: change.new === null ? "null" : JSON.stringify(change.new) })
        ] })
      ] })
    ] }, field)) }) })
  ] });
}
function AuditLogDetail({ log, isOpen, onClose }) {
  const [activeTab, setActiveTab] = useState80("overview");
  if (!log)
    return null;
  const formatDate11 = (dateString) => {
    return new Date(dateString).toLocaleString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      timeZoneName: "short"
    });
  };
  const getCategoryIcon2 = (category) => {
    switch (category) {
      case "SECURITY":
        return /* @__PURE__ */ jsx240(AlertTriangle19, { className: "w-4 h-4" });
      case "BUSINESS":
        return /* @__PURE__ */ jsx240(Activity6, { className: "w-4 h-4" });
      case "SYSTEM":
        return /* @__PURE__ */ jsx240(Monitor2, { className: "w-4 h-4" });
      case "COMPLIANCE":
        return /* @__PURE__ */ jsx240(CheckCircle31, { className: "w-4 h-4" });
      default:
        return /* @__PURE__ */ jsx240(Info11, { className: "w-4 h-4" });
    }
  };
  return /* @__PURE__ */ jsx240(Dialog16, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxs215(DialogContent16, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [
    /* @__PURE__ */ jsx240(DialogHeader16, { children: /* @__PURE__ */ jsx240(DialogTitle16, { children: "Audit Log Details" }) }),
    /* @__PURE__ */ jsxs215("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsx240(Card56, { children: /* @__PURE__ */ jsxs215(CardContent55, { className: "p-4", children: [
        /* @__PURE__ */ jsxs215("div", { className: "flex items-center gap-3 mb-4", children: [
          /* @__PURE__ */ jsx240(ActionBadge, { action: log.action }),
          /* @__PURE__ */ jsx240(SeverityBadge, { severity: log.severity }),
          /* @__PURE__ */ jsxs215(Badge27, { variant: "outline", className: "flex items-center gap-1", children: [
            getCategoryIcon2(log.category),
            log.category
          ] })
        ] }),
        /* @__PURE__ */ jsxs215("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxs215("h3", { className: "text-lg font-semibold", children: [
            log.entityType,
            ": ",
            log.entityName || log.entityId
          ] }),
          log.description && /* @__PURE__ */ jsx240("p", { className: "text-text-secondary", children: log.description })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs215("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs215("div", { className: "flex space-x-2 border-b", children: [
          /* @__PURE__ */ jsx240(
            Button60,
            {
              variant: activeTab === "overview" ? "default" : "ghost",
              onClick: () => setActiveTab("overview"),
              size: "sm",
              children: "Overview"
            }
          ),
          /* @__PURE__ */ jsx240(
            Button60,
            {
              variant: activeTab === "changes" ? "default" : "ghost",
              onClick: () => setActiveTab("changes"),
              size: "sm",
              children: "Changes"
            }
          ),
          /* @__PURE__ */ jsx240(
            Button60,
            {
              variant: activeTab === "context" ? "default" : "ghost",
              onClick: () => setActiveTab("context"),
              size: "sm",
              children: "Context"
            }
          ),
          /* @__PURE__ */ jsx240(
            Button60,
            {
              variant: activeTab === "raw" ? "default" : "ghost",
              onClick: () => setActiveTab("raw"),
              size: "sm",
              children: "Raw Data"
            }
          )
        ] }),
        activeTab === "overview" && /* @__PURE__ */ jsxs215("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs215("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs215(Card56, { children: [
              /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsxs215(CardTitle38, { className: "text-sm flex items-center gap-2", children: [
                /* @__PURE__ */ jsx240(User21, { className: "w-4 h-4" }),
                "User Information"
              ] }) }),
              /* @__PURE__ */ jsx240(CardContent55, { className: "space-y-2", children: log.user ? /* @__PURE__ */ jsxs215(Fragment47, { children: [
                /* @__PURE__ */ jsxs215("div", { children: [
                  /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Name" }),
                  /* @__PURE__ */ jsx240("div", { className: "text-sm font-medium", children: log.user.name })
                ] }),
                /* @__PURE__ */ jsxs215("div", { children: [
                  /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Email" }),
                  /* @__PURE__ */ jsx240("div", { className: "text-sm", children: log.user.email })
                ] }),
                /* @__PURE__ */ jsxs215("div", { children: [
                  /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Role" }),
                  /* @__PURE__ */ jsx240("div", { className: "text-sm", children: log.user.role })
                ] })
              ] }) : /* @__PURE__ */ jsx240("p", { className: "text-text-secondary text-sm", children: "No user information available" }) })
            ] }),
            /* @__PURE__ */ jsxs215(Card56, { children: [
              /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsxs215(CardTitle38, { className: "text-sm flex items-center gap-2", children: [
                /* @__PURE__ */ jsx240(Calendar29, { className: "w-4 h-4" }),
                "Event Information"
              ] }) }),
              /* @__PURE__ */ jsxs215(CardContent55, { className: "space-y-2", children: [
                /* @__PURE__ */ jsxs215("div", { children: [
                  /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Timestamp" }),
                  /* @__PURE__ */ jsx240("div", { className: "text-sm", children: formatDate11(log.createdAt) })
                ] }),
                /* @__PURE__ */ jsxs215("div", { children: [
                  /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Action" }),
                  /* @__PURE__ */ jsx240("div", { className: "text-sm", children: log.action })
                ] }),
                /* @__PURE__ */ jsxs215("div", { children: [
                  /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Entity Type" }),
                  /* @__PURE__ */ jsx240("div", { className: "text-sm", children: log.entityType })
                ] }),
                /* @__PURE__ */ jsxs215("div", { children: [
                  /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Entity ID" }),
                  /* @__PURE__ */ jsx240("div", { className: "text-sm font-mono", children: log.entityId })
                ] })
              ] })
            ] })
          ] }),
          log.merchant && /* @__PURE__ */ jsxs215(Card56, { children: [
            /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsx240(CardTitle38, { className: "text-sm", children: "Merchant Context" }) }),
            /* @__PURE__ */ jsx240(CardContent55, { children: /* @__PURE__ */ jsxs215("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxs215("div", { children: [
                /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Merchant Name" }),
                /* @__PURE__ */ jsx240("div", { className: "text-sm font-medium", children: log.merchant.name })
              ] }),
              /* @__PURE__ */ jsxs215("div", { children: [
                /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Merchant ID" }),
                /* @__PURE__ */ jsx240("div", { className: "text-sm font-mono", children: log.merchant.id })
              ] })
            ] }) })
          ] }),
          log.outlet && /* @__PURE__ */ jsxs215(Card56, { children: [
            /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsx240(CardTitle38, { className: "text-sm", children: "Outlet Context" }) }),
            /* @__PURE__ */ jsx240(CardContent55, { children: /* @__PURE__ */ jsxs215("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxs215("div", { children: [
                /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Outlet Name" }),
                /* @__PURE__ */ jsx240("div", { className: "text-sm font-medium", children: log.outlet.name })
              ] }),
              /* @__PURE__ */ jsxs215("div", { children: [
                /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Outlet ID" }),
                /* @__PURE__ */ jsx240("div", { className: "text-sm font-mono", children: log.outlet.id })
              ] })
            ] }) })
          ] })
        ] }),
        activeTab === "changes" && /* @__PURE__ */ jsx240("div", { className: "space-y-4", children: /* @__PURE__ */ jsx240(ChangesViewer, { changes: log.changes }) }),
        activeTab === "context" && /* @__PURE__ */ jsx240("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs215("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs215(Card56, { children: [
            /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsxs215(CardTitle38, { className: "text-sm flex items-center gap-2", children: [
              /* @__PURE__ */ jsx240(MapPin7, { className: "w-4 h-4" }),
              "Network Information"
            ] }) }),
            /* @__PURE__ */ jsxs215(CardContent55, { className: "space-y-2", children: [
              /* @__PURE__ */ jsxs215("div", { children: [
                /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "IP Address" }),
                /* @__PURE__ */ jsx240("div", { className: "text-sm font-mono", children: log.ipAddress || "Unknown" })
              ] }),
              /* @__PURE__ */ jsxs215("div", { children: [
                /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Session ID" }),
                /* @__PURE__ */ jsx240("div", { className: "text-sm font-mono", children: log.sessionId || "Unknown" })
              ] }),
              /* @__PURE__ */ jsxs215("div", { children: [
                /* @__PURE__ */ jsx240("div", { className: "text-xs text-text-secondary", children: "Request ID" }),
                /* @__PURE__ */ jsx240("div", { className: "text-sm font-mono", children: log.requestId || "Unknown" })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs215(Card56, { children: [
            /* @__PURE__ */ jsx240(CardHeader38, { children: /* @__PURE__ */ jsxs215(CardTitle38, { className: "text-sm flex items-center gap-2", children: [
              /* @__PURE__ */ jsx240(Monitor2, { className: "w-4 h-4" }),
              "User Agent"
            ] }) }),
            /* @__PURE__ */ jsx240(CardContent55, { children: /* @__PURE__ */ jsx240("div", { className: "text-xs font-mono bg-bg-secondary p-2 rounded break-all", children: log.userAgent || "Unknown" }) })
          ] })
        ] }) }),
        activeTab === "raw" && /* @__PURE__ */ jsxs215("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsx240(JsonViewer, { data: log.oldValues, title: "Old Values" }),
          /* @__PURE__ */ jsx240(JsonViewer, { data: log.newValues, title: "New Values" }),
          /* @__PURE__ */ jsx240(JsonViewer, { data: log.metadata, title: "Metadata" })
        ] })
      ] })
    ] })
  ] }) });
}

// src/components/features/AuditLogs/AuditLogViewer.tsx
import {
  Filter as Filter5,
  RefreshCw as RefreshCw6,
  Eye as Eye29,
  Activity as Activity7,
  AlertTriangle as AlertTriangle20,
  XCircle as XCircle24,
  Info as Info12,
  Clock as Clock29
} from "lucide-react";
import { jsx as jsx241, jsxs as jsxs216 } from "react/jsx-runtime";
function SeverityBadge2({ severity }) {
  const getSeverityStyle = (severity2) => {
    switch (severity2) {
      case "CRITICAL":
        return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
      case "ERROR":
        return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
      case "WARNING":
        return "bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800";
      case "INFO":
        return "bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800";
      default:
        return "bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800";
    }
  };
  const getSeverityIcon3 = (severity2) => {
    switch (severity2) {
      case "CRITICAL":
        return /* @__PURE__ */ jsx241(XCircle24, { className: "w-3 h-3" });
      case "ERROR":
        return /* @__PURE__ */ jsx241(XCircle24, { className: "w-3 h-3" });
      case "WARNING":
        return /* @__PURE__ */ jsx241(AlertTriangle20, { className: "w-3 h-3" });
      case "INFO":
        return /* @__PURE__ */ jsx241(Info12, { className: "w-3 h-3" });
      default:
        return /* @__PURE__ */ jsx241(Info12, { className: "w-3 h-3" });
    }
  };
  return /* @__PURE__ */ jsxs216(Badge28, { className: `inline-flex items-center gap-1 ${getSeverityStyle(severity)}`, children: [
    getSeverityIcon3(severity),
    severity
  ] });
}
function ActionBadge2({ action }) {
  const getActionStyle = (action2) => {
    switch (action2) {
      case "CREATE":
        return "bg-green-100 text-green-800 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800";
      case "UPDATE":
        return "bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800";
      case "DELETE":
        return "bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800";
      case "LOGIN":
        return "bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800";
      case "LOGOUT":
        return "bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800";
      case "VIEW":
        return "bg-indigo-100 text-indigo-800 border-indigo-200 dark:bg-indigo-900/20 dark:text-indigo-400 dark:border-indigo-800";
      default:
        return "bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-800";
    }
  };
  return /* @__PURE__ */ jsx241(Badge28, { className: getActionStyle(action), children: action });
}
function AuditLogRow({ log, onViewDetails }) {
  const formatDate11 = (dateString) => {
    return new Date(dateString).toLocaleString("en-US", {
      month: "short",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  };
  return /* @__PURE__ */ jsx241(Card57, { className: "mb-2 hover:shadow-sm transition-shadow", children: /* @__PURE__ */ jsx241(CardContent56, { className: "p-3", children: /* @__PURE__ */ jsxs216("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ jsxs216("div", { className: "flex items-center gap-3 flex-1 min-w-0", children: [
      /* @__PURE__ */ jsx241(ActionBadge2, { action: log.action }),
      /* @__PURE__ */ jsx241(SeverityBadge2, { severity: log.severity }),
      /* @__PURE__ */ jsxs216("div", { className: "flex-1 min-w-0", children: [
        /* @__PURE__ */ jsxs216("div", { className: "flex items-center gap-2 text-sm", children: [
          /* @__PURE__ */ jsxs216("span", { className: "font-medium text-text-primary truncate", children: [
            log.entityType,
            ": ",
            log.entityName || log.entityId
          ] }),
          log.user && /* @__PURE__ */ jsxs216("span", { className: "text-text-tertiary text-xs", children: [
            "by ",
            log.user.name
          ] })
        ] }),
        log.description && /* @__PURE__ */ jsx241("p", { className: "text-text-secondary text-xs truncate mt-1", children: log.description })
      ] }),
      /* @__PURE__ */ jsx241("div", { className: "text-xs text-text-tertiary whitespace-nowrap", children: formatDate11(log.createdAt) })
    ] }),
    /* @__PURE__ */ jsxs216(
      Button61,
      {
        variant: "outline",
        size: "sm",
        onClick: () => onViewDetails(log),
        className: "ml-3 flex-shrink-0",
        children: [
          /* @__PURE__ */ jsx241(Eye29, { className: "w-4 h-4 mr-2" }),
          "View Details"
        ]
      }
    )
  ] }) }) });
}
function AuditLogFilter({ filter, onFilterChange, onReset }) {
  const handleInputChange = (field, value) => {
    onFilterChange({
      ...filter,
      [field]: value === "all" || value === "" ? void 0 : value
    });
  };
  return /* @__PURE__ */ jsxs216(Card57, { className: "mb-6", children: [
    /* @__PURE__ */ jsx241(CardHeader39, { children: /* @__PURE__ */ jsxs216(CardTitle39, { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx241(Filter5, { className: "w-5 h-5" }),
      "Filter Audit Logs"
    ] }) }),
    /* @__PURE__ */ jsxs216(CardContent56, { children: [
      /* @__PURE__ */ jsxs216("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [
        /* @__PURE__ */ jsxs216("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx241("label", { className: "text-sm font-medium", children: "Action" }),
          /* @__PURE__ */ jsxs216(
            Select17,
            {
              value: filter.action || "all",
              onValueChange: (value) => handleInputChange("action", value),
              children: [
                /* @__PURE__ */ jsx241(SelectTrigger17, { children: /* @__PURE__ */ jsx241(SelectValue17, { placeholder: "All actions" }) }),
                /* @__PURE__ */ jsxs216(SelectContent17, { children: [
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "all", children: "All actions" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "CREATE", children: "CREATE" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "UPDATE", children: "UPDATE" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "DELETE", children: "DELETE" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "LOGIN", children: "LOGIN" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "LOGOUT", children: "LOGOUT" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "VIEW", children: "VIEW" })
                ] })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs216("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx241("label", { className: "text-sm font-medium", children: "Entity Type" }),
          /* @__PURE__ */ jsxs216(
            Select17,
            {
              value: filter.entityType || "all",
              onValueChange: (value) => handleInputChange("entityType", value),
              children: [
                /* @__PURE__ */ jsx241(SelectTrigger17, { children: /* @__PURE__ */ jsx241(SelectValue17, { placeholder: "All entities" }) }),
                /* @__PURE__ */ jsxs216(SelectContent17, { children: [
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "all", children: "All entities" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "User", children: "User" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "Product", children: "Product" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "Order", children: "Order" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "Customer", children: "Customer" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "Setting", children: "Setting" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "Merchant", children: "Merchant" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "Outlet", children: "Outlet" })
                ] })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs216("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx241("label", { className: "text-sm font-medium", children: "Severity" }),
          /* @__PURE__ */ jsxs216(
            Select17,
            {
              value: filter.severity || "all",
              onValueChange: (value) => handleInputChange("severity", value),
              children: [
                /* @__PURE__ */ jsx241(SelectTrigger17, { children: /* @__PURE__ */ jsx241(SelectValue17, { placeholder: "All severities" }) }),
                /* @__PURE__ */ jsxs216(SelectContent17, { children: [
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "all", children: "All severities" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "INFO", children: "INFO" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "WARNING", children: "WARNING" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "ERROR", children: "ERROR" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "CRITICAL", children: "CRITICAL" })
                ] })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs216("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx241("label", { className: "text-sm font-medium", children: "Category" }),
          /* @__PURE__ */ jsxs216(
            Select17,
            {
              value: filter.category || "all",
              onValueChange: (value) => handleInputChange("category", value),
              children: [
                /* @__PURE__ */ jsx241(SelectTrigger17, { children: /* @__PURE__ */ jsx241(SelectValue17, { placeholder: "All categories" }) }),
                /* @__PURE__ */ jsxs216(SelectContent17, { children: [
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "all", children: "All categories" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "GENERAL", children: "GENERAL" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "SECURITY", children: "SECURITY" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "BUSINESS", children: "BUSINESS" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "SYSTEM", children: "SYSTEM" }),
                  /* @__PURE__ */ jsx241(SelectItem17, { value: "COMPLIANCE", children: "COMPLIANCE" })
                ] })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs216("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx241("label", { className: "text-sm font-medium", children: "Start Date" }),
          /* @__PURE__ */ jsx241(
            Input28,
            {
              type: "datetime-local",
              value: filter.startDate || "",
              onChange: (e2) => handleInputChange("startDate", e2.target.value)
            }
          )
        ] }),
        /* @__PURE__ */ jsxs216("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx241("label", { className: "text-sm font-medium", children: "End Date" }),
          /* @__PURE__ */ jsx241(
            Input28,
            {
              type: "datetime-local",
              value: filter.endDate || "",
              onChange: (e2) => handleInputChange("endDate", e2.target.value)
            }
          )
        ] }),
        /* @__PURE__ */ jsxs216("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx241("label", { className: "text-sm font-medium", children: "Entity ID" }),
          /* @__PURE__ */ jsx241(
            Input28,
            {
              placeholder: "Enter entity ID",
              value: filter.entityId || "",
              onChange: (e2) => handleInputChange("entityId", e2.target.value)
            }
          )
        ] }),
        /* @__PURE__ */ jsxs216("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx241("label", { className: "text-sm font-medium", children: "User ID" }),
          /* @__PURE__ */ jsx241(
            Input28,
            {
              placeholder: "Enter user ID",
              value: filter.userId || "",
              onChange: (e2) => handleInputChange("userId", e2.target.value)
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs216("div", { className: "flex items-center justify-between mt-4", children: [
        /* @__PURE__ */ jsx241(Button61, { variant: "outline", onClick: onReset, children: "Reset Filters" }),
        /* @__PURE__ */ jsxs216("div", { className: "text-sm text-text-secondary", children: [
          "Showing ",
          filter?.limit || 50,
          " results per page"
        ] })
      ] })
    ] })
  ] });
}
function AuditLogViewer({
  className = "",
  logs = [],
  stats = null,
  loading = false,
  filter = { limit: 50, offset: 0 },
  pagination = { total: 0, limit: 50, offset: 0, hasMore: false },
  onFilterChange = () => {
  },
  onFilterReset = () => {
  },
  onLoadMore = () => {
  },
  onRefresh = () => {
  },
  onViewDetails = () => {
  }
}) {
  const [selectedLog, setSelectedLog] = useState81(null);
  const [isDetailOpen, setIsDetailOpen] = useState81(false);
  const [activeTab, setActiveTab] = useState81("logs");
  const handleViewDetails = (log) => {
    setSelectedLog(log);
    setIsDetailOpen(true);
    onViewDetails(log);
  };
  const handleCloseDetail = () => {
    setSelectedLog(null);
    setIsDetailOpen(false);
  };
  return /* @__PURE__ */ jsxs216("div", { className, children: [
    /* @__PURE__ */ jsxs216("div", { className: "mb-6", children: [
      /* @__PURE__ */ jsx241("h1", { className: "text-2xl font-bold text-text-primary mb-2", children: "Audit Logs" }),
      /* @__PURE__ */ jsx241("p", { className: "text-text-secondary", children: "Track all system changes, user actions, and security events." })
    ] }),
    /* @__PURE__ */ jsxs216("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxs216("div", { className: "flex space-x-2 border-b", children: [
        /* @__PURE__ */ jsx241(
          Button61,
          {
            variant: activeTab === "logs" ? "default" : "ghost",
            onClick: () => setActiveTab("logs"),
            children: "Audit Logs"
          }
        ),
        /* @__PURE__ */ jsx241(
          Button61,
          {
            variant: activeTab === "stats" ? "default" : "ghost",
            onClick: () => setActiveTab("stats"),
            children: "Statistics"
          }
        )
      ] }),
      activeTab === "logs" && /* @__PURE__ */ jsxs216("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsx241(
          AuditLogFilter,
          {
            filter,
            onFilterChange,
            onReset: onFilterReset
          }
        ),
        /* @__PURE__ */ jsxs216(Card57, { children: [
          /* @__PURE__ */ jsx241(CardHeader39, { children: /* @__PURE__ */ jsxs216(CardTitle39, { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsxs216("span", { children: [
              "Audit Logs (",
              pagination?.total || 0,
              " total)"
            ] }),
            /* @__PURE__ */ jsx241("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsxs216(
              Button61,
              {
                variant: "outline",
                size: "sm",
                onClick: onRefresh,
                disabled: loading,
                children: [
                  /* @__PURE__ */ jsx241(RefreshCw6, { className: `w-4 h-4 mr-2 ${loading ? "animate-spin" : ""}` }),
                  "Refresh"
                ]
              }
            ) })
          ] }) }),
          /* @__PURE__ */ jsx241(CardContent56, { children: loading ? /* @__PURE__ */ jsxs216("div", { className: "text-center py-8", children: [
            /* @__PURE__ */ jsx241(RefreshCw6, { className: "w-6 h-6 animate-spin mx-auto mb-2" }),
            /* @__PURE__ */ jsx241("p", { className: "text-text-secondary", children: "Loading audit logs..." })
          ] }) : !logs || logs.length === 0 ? /* @__PURE__ */ jsx241("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx241("p", { className: "text-text-secondary", children: "No audit logs found." }) }) : /* @__PURE__ */ jsx241("div", { className: "space-y-3", children: logs.map((log) => /* @__PURE__ */ jsx241(
            AuditLogRow,
            {
              log,
              onViewDetails: handleViewDetails
            },
            log.id
          )) }) })
        ] })
      ] }),
      activeTab === "stats" && /* @__PURE__ */ jsx241("div", { className: "space-y-6", children: stats ? /* @__PURE__ */ jsxs216("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [
        /* @__PURE__ */ jsx241(Card57, { children: /* @__PURE__ */ jsx241(CardContent56, { className: "p-6", children: /* @__PURE__ */ jsxs216("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs216("div", { children: [
            /* @__PURE__ */ jsx241("p", { className: "text-sm font-medium text-text-secondary", children: "Total Logs" }),
            /* @__PURE__ */ jsx241("p", { className: "text-2xl font-bold text-text-primary", children: stats.totalLogs })
          ] }),
          /* @__PURE__ */ jsx241(Activity7, { className: "w-8 h-8 text-blue-500" })
        ] }) }) }),
        /* @__PURE__ */ jsx241(Card57, { children: /* @__PURE__ */ jsx241(CardContent56, { className: "p-6", children: /* @__PURE__ */ jsxs216("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs216("div", { children: [
            /* @__PURE__ */ jsx241("p", { className: "text-sm font-medium text-text-secondary", children: "Recent Activity" }),
            /* @__PURE__ */ jsx241("p", { className: "text-2xl font-bold text-text-primary", children: stats.recentActivity }),
            /* @__PURE__ */ jsx241("p", { className: "text-xs text-text-tertiary", children: "Last 24 hours" })
          ] }),
          /* @__PURE__ */ jsx241(Clock29, { className: "w-8 h-8 text-green-500" })
        ] }) }) }),
        /* @__PURE__ */ jsx241(Card57, { children: /* @__PURE__ */ jsx241(CardContent56, { className: "p-6", children: /* @__PURE__ */ jsxs216("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs216("div", { children: [
            /* @__PURE__ */ jsx241("p", { className: "text-sm font-medium text-text-secondary", children: "Security Events" }),
            /* @__PURE__ */ jsx241("p", { className: "text-2xl font-bold text-text-primary", children: stats.logsByCategory.SECURITY || 0 })
          ] }),
          /* @__PURE__ */ jsx241(AlertTriangle20, { className: "w-8 h-8 text-red-500" })
        ] }) }) }),
        /* @__PURE__ */ jsx241(Card57, { children: /* @__PURE__ */ jsx241(CardContent56, { className: "p-6", children: /* @__PURE__ */ jsxs216("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs216("div", { children: [
            /* @__PURE__ */ jsx241("p", { className: "text-sm font-medium text-text-secondary", children: "Business Events" }),
            /* @__PURE__ */ jsx241("p", { className: "text-2xl font-bold text-text-primary", children: stats.logsByCategory.BUSINESS || 0 })
          ] }),
          /* @__PURE__ */ jsx241(Activity7, { className: "w-8 h-8 text-purple-500" })
        ] }) }) })
      ] }) : /* @__PURE__ */ jsx241("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx241("p", { className: "text-text-secondary", children: "No statistics available." }) }) })
    ] }),
    selectedLog && /* @__PURE__ */ jsx241(
      AuditLogDetail,
      {
        log: selectedLog,
        isOpen: isDetailOpen,
        onClose: handleCloseDetail
      }
    )
  ] });
}
function AuditLogViewerSimple({ className = "" }) {
  return /* @__PURE__ */ jsx241(
    AuditLogViewer,
    {
      className,
      logs: [],
      stats: null,
      loading: false,
      filter: { limit: 50, offset: 0 },
      pagination: { total: 0, limit: 50, offset: 0, hasMore: false },
      onFilterChange: () => {
      },
      onFilterReset: () => {
      },
      onLoadMore: () => {
      },
      onRefresh: () => {
      },
      onViewDetails: () => {
      }
    }
  );
}

// src/components/features/OrderDetail/OrderDetail.tsx
import { useState as useState82, useEffect as useEffect43 } from "react";
import {
  Card as Card59,
  CardHeader as CardHeader41,
  CardContent as CardContent58,
  Badge as Badge30,
  Skeleton as Skeleton5,
  ConfirmationDialog as ConfirmationDialog4
} from "@rentalshop/ui";
import { useFormatCurrency as useFormatCurrency9, useToast as useToast9 } from "@rentalshop/ui";
import { ORDER_STATUS_COLORS as ORDER_STATUS_COLORS5, ORDER_TYPE_COLORS as ORDER_TYPE_COLORS2 } from "@rentalshop/constants";
import { useOrderTranslations as useOrderTranslations17 } from "@rentalshop/hooks";

// src/components/features/OrderDetail/components/CollectionReturnModal.tsx
import {
  Dialog as Dialog17,
  DialogContent as DialogContent17,
  DialogHeader as DialogHeader17,
  DialogTitle as DialogTitle17,
  DialogFooter as DialogFooter10,
  Button as Button62,
  Badge as Badge29
} from "@rentalshop/ui";
import { Package as Package20, RotateCcw as RotateCcw3 } from "lucide-react";
import { formatCurrency as formatCurrency18 } from "@rentalshop/ui";

// src/components/features/OrderDetail/utils.ts
import * as CONSTANTS from "@rentalshop/constants";
var calculateCollectionTotal = (order, settingsForm) => {
  if (order.orderType === "SALE") {
    return order.totalAmount;
  }
  const remainingAmount = order.totalAmount - order.depositAmount;
  const securityDeposit = settingsForm.securityDeposit || 0;
  return remainingAmount + securityDeposit;
};
var calculateCollectionAmount = (order, settingsForm) => {
  return calculateCollectionTotal(order, settingsForm);
};
var getCollectionTitle = (order) => {
  if (order.orderType === "SALE") {
    return "Collect from customer";
  }
  switch (order.status) {
    case "RESERVED":
      return "Collect from customer";
    case "PICKUPED":
      return "No collection needed";
    case "RETURNED":
      return "No collection needed";
    default:
      return "No collection";
  }
};
var getCollectionDetails = (order, settingsForm) => {
  if (order.orderType === "SALE") {
    return {
      title: "Sale Order - What to Collect",
      description: "Collect the full sale amount",
      calculation: [
        {
          label: "Collect from customer",
          value: order.totalAmount,
          isTotal: true
        }
      ]
    };
  }
  switch (order.status) {
    case "RESERVED":
      const remainingAmount = order.totalAmount - order.depositAmount;
      const securityDeposit = settingsForm.securityDeposit || 0;
      const collectionTotal = calculateCollectionTotal(order, settingsForm);
      const hasCollateral = settingsForm.collateralType && settingsForm.collateralType.trim() !== "";
      return {
        title: "Rental Order - What to Collect",
        description: hasCollateral ? "Collect remaining amount, security deposit, and collateral" : "Collect remaining amount plus security deposit",
        calculation: [
          {
            label: "Total amount",
            value: order.totalAmount
          },
          {
            label: "Deposit paid",
            value: -order.depositAmount,
            isNegative: true
          },
          {
            label: "Security deposit",
            value: securityDeposit
          },
          ...hasCollateral ? [
            {
              label: "Collateral type",
              value: 0,
              isCollateral: true,
              collateralInfo: `${settingsForm.collateralType}${settingsForm.collateralDetails ? ` - ${settingsForm.collateralDetails}` : ""}`
            }
          ] : [],
          {
            label: "Collect from customer",
            value: collectionTotal,
            isTotal: true,
            isCollateral: hasCollateral
          }
        ]
      };
    case "PICKUPED":
      return {
        title: "No Collection Needed",
        description: "Order is already picked up",
        calculation: []
      };
    case "RETURNED":
      return {
        title: "Order Completed",
        description: "Order has been returned",
        calculation: []
      };
    default:
      return {
        title: "No Collection",
        description: "No collection required",
        calculation: []
      };
  }
};
var getReturnDetails = (order, settingsForm) => {
  if (order.orderType === "SALE") {
    return {
      title: "No Return Needed",
      description: "Sale orders do not require returns",
      calculation: []
    };
  }
  switch (order.status) {
    case "PICKUPED":
      const securityDeposit = settingsForm.securityDeposit || 0;
      const damageFee = settingsForm.damageFee || 0;
      const returnAmount = securityDeposit - damageFee;
      return {
        title: "Rental Order - What to Return",
        description: "Return security deposit minus damage fees",
        calculation: [
          {
            label: "Security deposit",
            value: securityDeposit
          },
          {
            label: "Damage fee",
            value: -damageFee,
            isNegative: true
          },
          {
            label: "Return to customer",
            value: returnAmount,
            isTotal: true,
            isReturn: true
          }
        ]
      };
    case "RETURNED":
      return {
        title: "Already Returned",
        description: "Order has already been returned",
        calculation: []
      };
    default:
      return {
        title: "No Return Needed",
        description: "No return required",
        calculation: []
      };
  }
};

// src/components/features/OrderDetail/components/CollectionReturnModal.tsx
import { jsx as jsx242, jsxs as jsxs217 } from "react/jsx-runtime";
var CollectionReturnModal = ({
  isOpen,
  onClose,
  order,
  settingsForm,
  mode,
  onConfirmPickup,
  onConfirmReturn
}) => {
  const isCollectionMode = mode === "collection";
  const isReturnMode = mode === "return";
  const details = isCollectionMode ? getCollectionDetails(order, settingsForm) : getReturnDetails(order, settingsForm);
  const getModalTitle = () => {
    if (isCollectionMode) {
      return "Pickup Order - Collection Details";
    }
    return "Return Order - Return Details";
  };
  const getModalIcon = () => {
    if (isCollectionMode) {
      return /* @__PURE__ */ jsx242(Package20, { className: "w-5 h-5 text-green-600" });
    }
    return /* @__PURE__ */ jsx242(RotateCcw3, { className: "w-5 h-5 text-blue-600" });
  };
  const getActionButtonText = () => {
    if (isCollectionMode) {
      return "Confirm Pickup & Collect";
    }
    return "Confirm Return & Process Refund";
  };
  const handleConfirm = async () => {
    try {
      if (isCollectionMode && onConfirmPickup) {
        await onConfirmPickup();
      } else if (isReturnMode && onConfirmReturn) {
        await onConfirmReturn();
      }
      onClose();
    } catch (error2) {
      console.error("Error in modal confirmation:", error2);
    }
  };
  return /* @__PURE__ */ jsx242(Dialog17, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxs217(DialogContent17, { className: "max-w-2xl", children: [
    /* @__PURE__ */ jsx242(DialogHeader17, { children: /* @__PURE__ */ jsxs217(DialogTitle17, { className: "flex items-center gap-2", children: [
      getModalIcon(),
      /* @__PURE__ */ jsx242("span", { className: "font-semibold", children: getModalTitle() })
    ] }) }),
    /* @__PURE__ */ jsxs217("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxs217("div", { className: "bg-gray-50 rounded-lg p-4", children: [
        /* @__PURE__ */ jsxs217("div", { className: "flex items-center justify-between mb-2", children: [
          /* @__PURE__ */ jsxs217("span", { className: "text-sm font-medium text-gray-700", children: [
            "Order #",
            order.orderNumber
          ] }),
          /* @__PURE__ */ jsx242(Badge29, { variant: order.orderType === "RENT" ? "default" : "secondary", children: order.orderType })
        ] }),
        /* @__PURE__ */ jsxs217("div", { className: "text-sm text-gray-600", children: [
          "Customer: ",
          order.customer?.firstName,
          " ",
          order.customer?.lastName
        ] }),
        /* @__PURE__ */ jsxs217("div", { className: "text-sm text-gray-600", children: [
          "Status: ",
          order.status
        ] })
      ] }),
      /* @__PURE__ */ jsx242("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs217("div", { className: "text-center", children: [
        /* @__PURE__ */ jsx242("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: isCollectionMode ? "Collect from Customer" : "Return to Customer" }),
        details.calculation && details.calculation.length > 0 && /* @__PURE__ */ jsxs217("div", { className: "text-xl font-bold text-green-700 bg-green-50 rounded-lg p-4 border border-green-200", children: [
          /* @__PURE__ */ jsx242("span", { children: details.calculation.find((item) => item.isTotal)?.value !== void 0 ? formatCurrency18(details.calculation.find((item) => item.isTotal)?.value || 0) : "0.00" }),
          settingsForm.collateralType && settingsForm.collateralType !== "Other" && settingsForm.collateralType.trim() !== "" && /* @__PURE__ */ jsxs217("span", { className: "ml-2 text-lg font-normal text-blue-600", children: [
            "+ ",
            settingsForm.collateralType
          ] }),
          settingsForm.collateralType === "Other" && settingsForm.collateralDetails && settingsForm.collateralDetails.trim() !== "" && /* @__PURE__ */ jsxs217("span", { className: "ml-2 text-lg font-normal text-blue-600", children: [
            "+ ",
            settingsForm.collateralDetails
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs217(DialogFooter10, { className: "flex gap-3", children: [
      /* @__PURE__ */ jsx242(Button62, { variant: "outline", onClick: onClose, children: "Close" }),
      details.calculation && details.calculation.length > 0 && /* @__PURE__ */ jsx242(Button62, { onClick: handleConfirm, children: getActionButtonText() })
    ] })
  ] }) });
};

// src/components/features/OrderDetail/components/OrderInformation.tsx
import { Info as Info14 } from "lucide-react";
import { useOrderTranslations as useOrderTranslations12 } from "@rentalshop/hooks";
import { useFormattedFullDate as useFormattedFullDate2 } from "@rentalshop/utils";
import { Fragment as Fragment48, jsx as jsx243, jsxs as jsxs218 } from "react/jsx-runtime";
var OrderInformation = ({ order }) => {
  const t2 = useOrderTranslations12();
  return /* @__PURE__ */ jsxs218(Card, { className: "flex flex-col", children: [
    /* @__PURE__ */ jsx243(CardHeader, { children: /* @__PURE__ */ jsxs218(CardTitle, { className: "text-lg flex items-center gap-2", children: [
      /* @__PURE__ */ jsx243(Info14, { className: "w-5 h-5" }),
      t2("detail.orderInformation")
    ] }) }),
    /* @__PURE__ */ jsxs218(CardContent, { className: "space-y-4 flex-1", children: [
      /* @__PURE__ */ jsxs218("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs218("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxs218("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxs218("span", { className: "text-sm text-gray-600", children: [
              t2("customer.name"),
              ":"
            ] }),
            /* @__PURE__ */ jsx243("span", { className: "text-sm font-medium", children: order.customer ? `${order.customer.firstName} ${order.customer.lastName}`.trim() : t2("customer.noCustomer") })
          ] }),
          /* @__PURE__ */ jsxs218("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxs218("span", { className: "text-sm text-gray-600", children: [
              t2("customer.phone"),
              ":"
            ] }),
            /* @__PURE__ */ jsx243("span", { className: "text-sm font-medium", children: order.customer?.phone || "N/A" })
          ] }),
          /* @__PURE__ */ jsxs218("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxs218("span", { className: "text-sm text-gray-600", children: [
              t2("detail.seller"),
              ":"
            ] }),
            /* @__PURE__ */ jsx243("span", { className: "text-sm font-medium", children: order.outlet?.name || "N/A" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs218("div", { className: "space-y-3", children: [
          order.orderType === "RENT" && /* @__PURE__ */ jsxs218(Fragment48, { children: [
            /* @__PURE__ */ jsxs218("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsxs218("span", { className: "text-sm text-gray-600", children: [
                t2("dates.pickupDate"),
                ":"
              ] }),
              /* @__PURE__ */ jsx243("span", { className: "text-sm font-medium", children: order.pickupPlanAt ? useFormattedFullDate2(order.pickupPlanAt) : "N/A" })
            ] }),
            /* @__PURE__ */ jsxs218("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsxs218("span", { className: "text-sm text-gray-600", children: [
                t2("dates.returnDate"),
                ":"
              ] }),
              /* @__PURE__ */ jsx243("span", { className: "text-sm font-medium", children: order.returnPlanAt ? useFormattedFullDate2(order.returnPlanAt) : "N/A" })
            ] })
          ] }),
          /* @__PURE__ */ jsxs218("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxs218("span", { className: "text-sm text-gray-600", children: [
              t2("detail.orderDate"),
              ":"
            ] }),
            /* @__PURE__ */ jsx243("span", { className: "text-sm font-medium", children: order.createdAt ? useFormattedFullDate2(order.createdAt) : "N/A" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsx243("div", { className: "flex-1" })
    ] })
  ] });
};

// src/components/features/OrderDetail/components/OrderProductsList.tsx
import { Package as Package21 } from "lucide-react";
import { useOrderTranslations as useOrderTranslations13 } from "@rentalshop/hooks";
import { useFormatCurrency as useFormatCurrency6 } from "@rentalshop/ui";
import { jsx as jsx244, jsxs as jsxs219 } from "react/jsx-runtime";
var OrderProductsList = ({ order }) => {
  const t2 = useOrderTranslations13();
  const formatMoney = useFormatCurrency6();
  return /* @__PURE__ */ jsxs219(Card, { children: [
    /* @__PURE__ */ jsx244(CardHeader, { children: /* @__PURE__ */ jsxs219(CardTitle, { className: "text-lg flex items-center gap-2", children: [
      /* @__PURE__ */ jsx244(Package21, { className: "w-5 h-5" }),
      t2("detail.products")
    ] }) }),
    /* @__PURE__ */ jsx244(CardContent, { children: order.orderItems.length === 0 ? /* @__PURE__ */ jsxs219("div", { className: "text-center py-4 text-gray-500", children: [
      /* @__PURE__ */ jsx244(Package21, { className: "w-8 h-8 mx-auto mb-2 text-gray-300" }),
      /* @__PURE__ */ jsx244("p", { className: "text-sm", children: t2("items.noItems") })
    ] }) : /* @__PURE__ */ jsx244("div", { className: "space-y-3", children: order.orderItems.map((item, index) => /* @__PURE__ */ jsx244("div", { className: "p-3 bg-gray-50 rounded-lg border border-gray-100", children: /* @__PURE__ */ jsxs219("div", { className: "flex items-start gap-3", children: [
      /* @__PURE__ */ jsx244("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx244("div", { className: "w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200", children: /* @__PURE__ */ jsx244(Package21, { className: "w-6 h-6 text-gray-400" }) }) }),
      /* @__PURE__ */ jsxs219("div", { className: "flex-1 min-w-0", children: [
        /* @__PURE__ */ jsx244("div", { className: "font-medium text-gray-900 text-sm", children: item.product?.name || "Unknown Product" }),
        /* @__PURE__ */ jsx244("div", { className: "text-xs text-gray-500", children: item.product?.name ? `${t2("items.product")}: ${item.product.name}` : "Unknown Product" }),
        /* @__PURE__ */ jsxs219("div", { className: "text-xs text-gray-600", children: [
          formatMoney(item.unitPrice),
          " x ",
          item.quantity
        ] }),
        item.notes && /* @__PURE__ */ jsxs219("div", { className: "text-xs text-gray-500 mt-1", children: [
          t2("detail.notes"),
          ": ",
          item.notes || t2("detail.noNotes")
        ] })
      ] })
    ] }) }, index)) }) })
  ] });
};

// src/components/features/OrderDetail/components/OrderSummaryCard.tsx
import { DollarSign as DollarSign20 } from "lucide-react";
import { useOrderTranslations as useOrderTranslations14 } from "@rentalshop/hooks";
import { useFormatCurrency as useFormatCurrency7 } from "@rentalshop/ui";
import { jsx as jsx245, jsxs as jsxs220 } from "react/jsx-runtime";
var OrderSummaryCard = ({
  order,
  tempSettings,
  calculateCollectionTotal: calculateCollectionTotal2
}) => {
  const t2 = useOrderTranslations14();
  const formatMoney = useFormatCurrency7();
  return /* @__PURE__ */ jsxs220(Card, { children: [
    /* @__PURE__ */ jsx245(CardHeader, { children: /* @__PURE__ */ jsxs220(CardTitle, { className: "text-lg flex items-center gap-2", children: [
      /* @__PURE__ */ jsx245(DollarSign20, { className: "w-5 h-5" }),
      t2("detail.orderSummary")
    ] }) }),
    /* @__PURE__ */ jsxs220(CardContent, { className: "space-y-3", children: [
      /* @__PURE__ */ jsxs220("div", { className: "flex justify-between text-sm", children: [
        /* @__PURE__ */ jsxs220("span", { className: "text-gray-600", children: [
          t2("amount.subtotal"),
          ":"
        ] }),
        /* @__PURE__ */ jsx245("span", { className: "font-medium", children: formatMoney(order.totalAmount || 0) })
      ] }),
      order.discountAmount > 0 && /* @__PURE__ */ jsxs220("div", { className: "flex justify-between text-sm text-green-600", children: [
        /* @__PURE__ */ jsxs220("span", { children: [
          t2("payment.discount"),
          " ",
          order.discountType === "percentage" && order.discountValue ? `(${order.discountValue}%)` : "(amount)",
          ":"
        ] }),
        /* @__PURE__ */ jsxs220("span", { className: "font-medium", children: [
          "-",
          formatMoney(order.discountAmount)
        ] })
      ] }),
      order.orderType === "RENT" && order.depositAmount > 0 && /* @__PURE__ */ jsxs220("div", { className: "flex justify-between text-sm", children: [
        /* @__PURE__ */ jsxs220("span", { className: "text-gray-600", children: [
          t2("amount.deposit"),
          ":"
        ] }),
        /* @__PURE__ */ jsx245("span", { className: "font-medium", children: formatMoney(order.depositAmount) })
      ] }),
      /* @__PURE__ */ jsxs220("div", { className: "flex justify-between text-lg font-bold text-green-700 pt-2 border-t border-gray-200", children: [
        /* @__PURE__ */ jsxs220("span", { children: [
          t2("amount.grandTotal"),
          ":"
        ] }),
        /* @__PURE__ */ jsx245("span", { children: formatMoney(order.totalAmount || 0) })
      ] }),
      order.orderType === "RENT" && /* @__PURE__ */ jsxs220("div", { className: "flex justify-between text-sm pt-2 border-t border-gray-200", children: [
        /* @__PURE__ */ jsxs220("span", { className: "text-gray-600", children: [
          t2("detail.collectionAmount"),
          ":"
        ] }),
        /* @__PURE__ */ jsx245("span", { className: `font-medium ${order.status === "RESERVED" ? "text-yellow-700" : order.status === "PICKUPED" ? "text-blue-700" : "text-gray-500"}`, children: order.status === "RESERVED" ? /* @__PURE__ */ jsxs220("span", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx245("span", { children: formatMoney(calculateCollectionTotal2(order, tempSettings)) }),
          tempSettings.collateralType && tempSettings.collateralType !== "Other" && /* @__PURE__ */ jsxs220("span", { className: "text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded", children: [
            "+ ",
            tempSettings.collateralType
          ] }),
          tempSettings.collateralType === "Other" && tempSettings.collateralDetails && /* @__PURE__ */ jsxs220("span", { className: "text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded", children: [
            "+ ",
            tempSettings.collateralDetails
          ] }),
          tempSettings.collateralType === "Other" && !tempSettings.collateralDetails && /* @__PURE__ */ jsxs220("span", { className: "text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded", children: [
            "+ ",
            t2("detail.collateral")
          ] })
        ] }) : order.status === "PICKUPED" ? t2("detail.alreadyCollected") : t2("detail.noCollectionNeeded") })
      ] })
    ] })
  ] });
};

// src/components/features/OrderDetail/components/OrderSettingsCard.tsx
import {
  Card as Card58,
  CardHeader as CardHeader40,
  CardTitle as CardTitle40,
  CardContent as CardContent57,
  Button as Button63,
  Input as Input29,
  Label as Label15,
  Textarea as Textarea8,
  Select as Select18,
  SelectContent as SelectContent18,
  SelectItem as SelectItem18,
  SelectTrigger as SelectTrigger18,
  SelectValue as SelectValue18
} from "@rentalshop/ui";
import { Settings as Settings9, Save as Save9, Edit as Edit21 } from "lucide-react";
import { useOrderTranslations as useOrderTranslations15 } from "@rentalshop/hooks";
import { useFormatCurrency as useFormatCurrency8 } from "@rentalshop/ui";
import { Fragment as Fragment49, jsx as jsx246, jsxs as jsxs221 } from "react/jsx-runtime";
var OrderSettingsCard = ({
  order,
  settingsForm,
  tempSettings,
  isEditingSettings,
  isSavingSettings,
  loading,
  isDamageFeeEnabled,
  isSecurityDepositEnabled,
  isCollateralTypeEnabled,
  isCollateralDetailsEnabled,
  onSettingsChange,
  onSaveSettings,
  onCancelEdit,
  onStartEdit,
  collateralTypes
}) => {
  const t2 = useOrderTranslations15();
  const formatMoney = useFormatCurrency8();
  return /* @__PURE__ */ jsxs221(Card58, { children: [
    /* @__PURE__ */ jsx246(CardHeader40, { children: /* @__PURE__ */ jsxs221(CardTitle40, { className: "text-lg flex items-center gap-2", children: [
      /* @__PURE__ */ jsx246(Settings9, { className: "w-5 h-5" }),
      t2("detail.orderSettings")
    ] }) }),
    /* @__PURE__ */ jsx246(CardContent57, { className: "space-y-4", children: isEditingSettings ? /* @__PURE__ */ jsxs221(Fragment49, { children: [
      /* @__PURE__ */ jsxs221("div", { children: [
        /* @__PURE__ */ jsxs221(Label15, { htmlFor: "damageFee", className: "text-sm font-medium text-gray-700", children: [
          t2("amount.damageFee"),
          !isDamageFeeEnabled() && /* @__PURE__ */ jsx246("span", { className: "text-xs text-gray-500 ml-2", children: "(Disabled for this order type/status)" })
        ] }),
        /* @__PURE__ */ jsx246(
          Input29,
          {
            id: "damageFee",
            type: "number",
            min: "0",
            step: "0.01",
            value: tempSettings.damageFee || 0,
            onChange: (e2) => onSettingsChange({ damageFee: parseFloat(e2.target.value) || 0 }),
            className: "mt-1",
            placeholder: "0",
            disabled: !isDamageFeeEnabled()
          }
        )
      ] }),
      /* @__PURE__ */ jsxs221("div", { children: [
        /* @__PURE__ */ jsxs221(Label15, { htmlFor: "securityDeposit", className: "text-sm font-medium text-gray-700", children: [
          t2("amount.securityDeposit"),
          !isSecurityDepositEnabled() && /* @__PURE__ */ jsx246("span", { className: "text-xs text-gray-500 ml-2", children: "(Disabled for this order type/status)" })
        ] }),
        /* @__PURE__ */ jsx246(
          Input29,
          {
            id: "securityDeposit",
            type: "number",
            min: "0",
            step: "0.01",
            value: tempSettings.securityDeposit || 0,
            onChange: (e2) => onSettingsChange({ securityDeposit: parseFloat(e2.target.value) || 0 }),
            className: "mt-1",
            placeholder: "0",
            disabled: !isSecurityDepositEnabled()
          }
        )
      ] }),
      /* @__PURE__ */ jsxs221("div", { children: [
        /* @__PURE__ */ jsxs221(Label15, { htmlFor: "collateralType", className: "text-sm font-medium text-gray-700", children: [
          t2("amount.collateralType"),
          !isCollateralTypeEnabled() && /* @__PURE__ */ jsx246("span", { className: "text-xs text-gray-500 ml-2", children: "(Disabled for this order type/status)" })
        ] }),
        /* @__PURE__ */ jsxs221(
          Select18,
          {
            onValueChange: (value) => onSettingsChange({ collateralType: value }),
            value: tempSettings.collateralType || "",
            onOpenChange: onStartEdit,
            children: [
              /* @__PURE__ */ jsx246(SelectTrigger18, { className: "mt-1", children: /* @__PURE__ */ jsx246(SelectValue18, { placeholder: "Select collateral type" }) }),
              /* @__PURE__ */ jsx246(SelectContent18, { children: collateralTypes.map((type) => /* @__PURE__ */ jsx246(SelectItem18, { value: type, children: type }, type)) })
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs221("div", { children: [
        /* @__PURE__ */ jsxs221(Label15, { htmlFor: "collateralDetails", className: "text-sm font-medium text-gray-700", children: [
          t2("amount.collateralDetails"),
          !isCollateralDetailsEnabled() && /* @__PURE__ */ jsx246("span", { className: "text-xs text-gray-500 ml-2", children: "(Disabled for this order type/status)" })
        ] }),
        /* @__PURE__ */ jsx246(
          Input29,
          {
            id: "collateralDetails",
            type: "text",
            value: tempSettings.collateralDetails || "",
            onChange: (e2) => onSettingsChange({ collateralDetails: e2.target.value }),
            className: "mt-1",
            placeholder: "Enter collateral details",
            disabled: !isCollateralDetailsEnabled()
          }
        )
      ] }),
      /* @__PURE__ */ jsxs221("div", { children: [
        /* @__PURE__ */ jsx246(Label15, { htmlFor: "notes", className: "text-sm font-medium text-gray-700", children: t2("detail.notes") }),
        /* @__PURE__ */ jsx246(
          Textarea8,
          {
            id: "notes",
            value: tempSettings.notes || "",
            onChange: (e2) => onSettingsChange({ notes: e2.target.value }),
            rows: 3,
            className: "mt-1",
            placeholder: "Enter order notes"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs221("div", { className: "flex gap-2 pt-2", children: [
        /* @__PURE__ */ jsxs221(
          Button63,
          {
            onClick: onSaveSettings,
            disabled: loading || isSavingSettings,
            className: "flex-1 flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx246(Save9, { className: "w-4 h-4" }),
              isSavingSettings ? t2("detail.saving") : t2("detail.saveChanges")
            ]
          }
        ),
        /* @__PURE__ */ jsx246(
          Button63,
          {
            variant: "outline",
            onClick: onCancelEdit,
            className: "flex-1",
            children: t2("detail.cancel")
          }
        )
      ] })
    ] }) : /* @__PURE__ */ jsxs221(Fragment49, { children: [
      /* @__PURE__ */ jsxs221("div", { className: "space-y-3", children: [
        /* @__PURE__ */ jsxs221("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsxs221("span", { className: "text-sm text-gray-600", children: [
            t2("amount.damageFee"),
            ":"
          ] }),
          /* @__PURE__ */ jsx246("span", { className: "text-sm font-medium", children: isDamageFeeEnabled() ? formatMoney(settingsForm.damageFee || 0) : /* @__PURE__ */ jsx246("span", { className: "text-gray-400 italic", children: "Disabled" }) })
        ] }),
        /* @__PURE__ */ jsxs221("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsxs221("span", { className: "text-sm text-gray-600", children: [
            t2("amount.securityDeposit"),
            ":"
          ] }),
          /* @__PURE__ */ jsx246("span", { className: "text-sm font-medium", children: isSecurityDepositEnabled() ? formatMoney(settingsForm.securityDeposit || 0) : /* @__PURE__ */ jsx246("span", { className: "text-gray-400 italic", children: "Disabled" }) })
        ] }),
        /* @__PURE__ */ jsxs221("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsxs221("span", { className: "text-sm text-gray-600", children: [
            t2("amount.collateralType"),
            ":"
          ] }),
          /* @__PURE__ */ jsx246("span", { className: "text-sm font-medium", children: isCollateralTypeEnabled() ? settingsForm.collateralType || "Not specified" : /* @__PURE__ */ jsx246("span", { className: "text-gray-400 italic", children: "Disabled" }) })
        ] }),
        /* @__PURE__ */ jsxs221("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsxs221("span", { className: "text-sm text-gray-600", children: [
            t2("amount.collateralDetails"),
            ":"
          ] }),
          /* @__PURE__ */ jsx246("span", { className: "text-sm font-medium", children: isCollateralDetailsEnabled() ? settingsForm.collateralDetails || t2("detail.noDetails") : /* @__PURE__ */ jsx246("span", { className: "text-gray-400 italic", children: "Disabled" }) })
        ] }),
        /* @__PURE__ */ jsxs221("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsxs221("span", { className: "text-sm text-gray-600", children: [
            t2("detail.notes"),
            ":"
          ] }),
          /* @__PURE__ */ jsx246("span", { className: "text-sm font-medium", children: settingsForm.notes || t2("detail.noNotes") })
        ] })
      ] }),
      /* @__PURE__ */ jsxs221(
        Button63,
        {
          variant: "outline",
          onClick: onStartEdit,
          className: "w-full flex items-center gap-2 mt-4",
          children: [
            /* @__PURE__ */ jsx246(Edit21, { className: "w-4 h-4" }),
            t2("detail.editSettings")
          ]
        }
      )
    ] }) })
  ] });
};

// src/components/features/OrderDetail/components/OrderActionsSection.tsx
import { Edit as Edit22, X as X17, Package as Package22, RotateCcw as RotateCcw4, Printer, Info as Info15 } from "lucide-react";
import { useOrderTranslations as useOrderTranslations16 } from "@rentalshop/hooks";
import { ORDER_STATUSES } from "@rentalshop/constants";
import { jsx as jsx247, jsxs as jsxs222 } from "react/jsx-runtime";
var OrderActionsSection = ({
  order,
  canEdit,
  canCancel,
  canPickup,
  canReturn,
  canPrint,
  isRentOrder,
  isSaleOrder,
  isPickupLoading,
  isReturnLoading,
  isCancelLoading,
  onEdit,
  onCancel,
  onPickup,
  onReturn,
  onPrint
}) => {
  const t2 = useOrderTranslations16();
  return /* @__PURE__ */ jsx247("div", { className: "bg-white border border-gray-200 rounded-lg p-6 mt-6", children: /* @__PURE__ */ jsxs222("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsx247("h3", { className: "text-lg font-medium text-gray-900", children: t2("detail.orderActions") }),
    /* @__PURE__ */ jsxs222("div", { className: "flex justify-between items-center", children: [
      /* @__PURE__ */ jsx247("div", { children: canCancel && /* @__PURE__ */ jsxs222(
        Button2,
        {
          variant: "destructive",
          onClick: onCancel,
          className: "px-6",
          disabled: isCancelLoading,
          children: [
            /* @__PURE__ */ jsx247(X17, { className: "w-4 h-4 mr-2" }),
            isCancelLoading ? t2("detail.cancelling") : t2("actions.cancelOrder")
          ]
        }
      ) }),
      /* @__PURE__ */ jsxs222("div", { className: "flex gap-3", children: [
        /* @__PURE__ */ jsxs222(
          Button2,
          {
            variant: "outline",
            onClick: onEdit,
            className: "px-4",
            disabled: !canEdit,
            title: !canEdit ? isRentOrder ? "RENT orders can only be edited when status is RESERVED" : "SALE orders can only be edited when status is COMPLETED" : t2("detail.editOrder"),
            children: [
              /* @__PURE__ */ jsx247(Edit22, { className: "w-4 h-4 mr-2" }),
              t2("detail.editOrder")
            ]
          }
        ),
        canPickup && /* @__PURE__ */ jsxs222(
          Button2,
          {
            variant: "default",
            onClick: onPickup,
            className: "px-6",
            disabled: isPickupLoading,
            children: [
              /* @__PURE__ */ jsx247(Package22, { className: "w-4 h-4 mr-2" }),
              isPickupLoading ? t2("actions.pickingUp") : t2("actions.markAsPickedUp")
            ]
          }
        ),
        canReturn && /* @__PURE__ */ jsxs222(
          Button2,
          {
            variant: "default",
            onClick: onReturn,
            className: "px-4",
            disabled: isReturnLoading,
            children: [
              /* @__PURE__ */ jsx247(RotateCcw4, { className: "w-4 h-4 mr-2" }),
              isReturnLoading ? t2("actions.returning") : t2("actions.markAsReturned")
            ]
          }
        ),
        canPrint && /* @__PURE__ */ jsxs222(
          Button2,
          {
            variant: "outline",
            onClick: onPrint,
            className: "px-4",
            children: [
              /* @__PURE__ */ jsx247(Printer, { className: "w-4 h-4 mr-2" }),
              t2("actions.printReceipt")
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsx247("div", { className: "mt-3 text-sm text-gray-600 bg-gray-50 rounded-lg p-3 border border-gray-200", children: /* @__PURE__ */ jsxs222("div", { className: "flex items-start gap-2", children: [
      /* @__PURE__ */ jsx247(Info15, { className: "w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0" }),
      /* @__PURE__ */ jsxs222("div", { children: [
        /* @__PURE__ */ jsxs222("p", { className: "font-medium text-gray-700 mb-1", children: [
          t2("detail.editingRules"),
          ":"
        ] }),
        /* @__PURE__ */ jsxs222("ul", { className: "space-y-1 text-gray-600", children: [
          /* @__PURE__ */ jsxs222("li", { children: [
            "\u2022 ",
            t2("detail.rentOrderRule"),
            " ",
            /* @__PURE__ */ jsx247("span", { className: "font-mono bg-blue-100 px-1 rounded", children: ORDER_STATUSES.RESERVED })
          ] }),
          /* @__PURE__ */ jsxs222("li", { children: [
            "\u2022 ",
            t2("detail.saleOrderRule"),
            " ",
            /* @__PURE__ */ jsx247("span", { className: "font-mono bg-green-100 px-1 rounded", children: ORDER_STATUSES.COMPLETED })
          ] })
        ] })
      ] })
    ] }) })
  ] }) });
};

// src/components/features/OrderDetail/OrderDetail.tsx
import { ordersApi as ordersApi3 } from "@rentalshop/utils";
import { jsx as jsx248, jsxs as jsxs223 } from "react/jsx-runtime";
var OrderDetailSkeleton = () => {
  return /* @__PURE__ */ jsxs223("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsx248("div", { className: "bg-white border border-gray-200 rounded-lg p-4", children: /* @__PURE__ */ jsxs223("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs223("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx248(Skeleton5, { className: "h-8 w-64" }),
        /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-48" })
      ] }),
      /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-20" }),
          /* @__PURE__ */ jsx248(Skeleton5, { className: "h-6 w-16" })
        ] }),
        /* @__PURE__ */ jsx248(Skeleton5, { className: "h-6 w-24" })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs223("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-4", children: [
      /* @__PURE__ */ jsxs223("div", { className: "lg:col-span-2 space-y-4", children: [
        /* @__PURE__ */ jsx248("div", { children: /* @__PURE__ */ jsxs223(Card59, { className: "flex flex-col", children: [
          /* @__PURE__ */ jsx248(CardHeader41, { children: /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-6 w-32" })
          ] }) }),
          /* @__PURE__ */ jsxs223(CardContent58, { className: "space-y-4 flex-1", children: [
            /* @__PURE__ */ jsxs223("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsx248("div", { className: "space-y-3", children: Array.from({ length: 3 }).map((_, index) => /* @__PURE__ */ jsxs223("div", { className: "flex justify-between", children: [
                /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-24" }),
                /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-32" })
              ] }, index)) }),
              /* @__PURE__ */ jsx248("div", { className: "space-y-3", children: Array.from({ length: 4 }).map((_, index) => /* @__PURE__ */ jsxs223("div", { className: "flex justify-between", children: [
                /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-24" }),
                /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-32" })
              ] }, index)) })
            ] }),
            /* @__PURE__ */ jsx248("div", { className: "flex-1" })
          ] })
        ] }) }),
        /* @__PURE__ */ jsxs223(Card59, { children: [
          /* @__PURE__ */ jsx248(CardHeader41, { children: /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-6 w-20" })
          ] }) }),
          /* @__PURE__ */ jsx248(CardContent58, { children: /* @__PURE__ */ jsx248("div", { className: "space-y-3", children: Array.from({ length: 3 }).map((_, index) => /* @__PURE__ */ jsx248("div", { className: "p-3 bg-gray-50 rounded-lg border border-gray-100", children: /* @__PURE__ */ jsxs223("div", { className: "flex items-start gap-3", children: [
            /* @__PURE__ */ jsx248(Skeleton5, { className: "w-12 h-12 rounded-lg" }),
            /* @__PURE__ */ jsxs223("div", { className: "flex-1 space-y-2", children: [
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-32" }),
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-3 w-20" }),
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-3 w-24" })
            ] })
          ] }) }, index)) }) })
        ] })
      ] }),
      /* @__PURE__ */ jsxs223("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs223(Card59, { children: [
          /* @__PURE__ */ jsx248(CardHeader41, { children: /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-6 w-28" })
          ] }) }),
          /* @__PURE__ */ jsxs223(CardContent58, { className: "space-y-3", children: [
            Array.from({ length: 4 }).map((_, index) => /* @__PURE__ */ jsxs223("div", { className: "flex justify-between text-sm", children: [
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-20" }),
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-16" })
            ] }, index)),
            /* @__PURE__ */ jsx248("div", { className: "pt-2 border-t border-gray-200", children: /* @__PURE__ */ jsxs223("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-5 w-24" }),
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-5 w-20" })
            ] }) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs223(Card59, { children: [
          /* @__PURE__ */ jsx248(CardHeader41, { children: /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-6 w-28" })
          ] }) }),
          /* @__PURE__ */ jsxs223(CardContent58, { className: "space-y-4", children: [
            /* @__PURE__ */ jsx248("div", { className: "space-y-3", children: Array.from({ length: 4 }).map((_, index) => /* @__PURE__ */ jsxs223("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-24" }),
              /* @__PURE__ */ jsx248(Skeleton5, { className: "h-4 w-32" })
            ] }, index)) }),
            /* @__PURE__ */ jsx248(Skeleton5, { className: "h-10 w-full" })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsx248("div", { className: "bg-white border border-gray-200 rounded-lg p-6 mt-6", children: /* @__PURE__ */ jsxs223("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx248(Skeleton5, { className: "h-6 w-32" }),
      /* @__PURE__ */ jsxs223("div", { className: "flex justify-between items-center", children: [
        /* @__PURE__ */ jsx248(Skeleton5, { className: "h-10 w-32" }),
        /* @__PURE__ */ jsx248("div", { className: "flex gap-3", children: Array.from({ length: 4 }).map((_, index) => /* @__PURE__ */ jsx248(Skeleton5, { className: "h-10 w-24" }, index)) })
      ] })
    ] }) })
  ] });
};
var OrderDetail = ({
  order,
  onEdit,
  onCancel,
  onStatusChange,
  onPickup,
  onReturn,
  onSaveSettings,
  loading = false,
  showActions = true
}) => {
  const formatMoney = useFormatCurrency9();
  const { toastSuccess, toastError, toastInfo, removeToast } = useToast9();
  const t2 = useOrderTranslations17();
  const COLLATERAL_TYPES = [
    "ID Card",
    "Driver License",
    "Passport",
    "Other"
  ];
  const [settingsForm, setSettingsForm] = useState82({
    damageFee: order.damageFee || 0,
    securityDeposit: order.securityDeposit || 0,
    collateralType: order.collateralType || "Other",
    collateralDetails: order.collateralDetails || "",
    notes: order.notes || ""
  });
  const [isEditingSettings, setIsEditingSettings] = useState82(false);
  const [tempSettings, setTempSettings] = useState82(settingsForm);
  const [isSavingSettings, setIsSavingSettings] = useState82(false);
  const [isCollectionModalOpen, setIsCollectionModalOpen] = useState82(false);
  const [isReturnModalOpen, setIsReturnModalOpen] = useState82(false);
  const [isPickupLoading, setIsPickupLoading] = useState82(false);
  const [isReturnLoading, setIsReturnLoading] = useState82(false);
  const [isCancelLoading, setIsCancelLoading] = useState82(false);
  const [showCancelConfirmDialog, setShowCancelConfirmDialog] = useState82(false);
  useEffect43(() => {
    if (order) {
      const newSettings = {
        damageFee: order.damageFee || 0,
        securityDeposit: order.securityDeposit || 0,
        collateralType: order.collateralType || "Other",
        collateralDetails: order.collateralDetails || "",
        notes: order.notes || ""
      };
      setSettingsForm(newSettings);
      setTempSettings(newSettings);
    }
  }, [order]);
  if (loading) {
    return /* @__PURE__ */ jsx248(OrderDetailSkeleton, {});
  }
  const isRentOrder = order.orderType === "RENT";
  const isSaleOrder = order.orderType === "SALE";
  const currentStatus = order.status;
  const canCancel = onCancel && currentStatus !== "PICKUPED" && currentStatus !== "RETURNED" && currentStatus !== "CANCELLED";
  const canEdit = onEdit && // RENT orders: can only edit when RESERVED
  (isRentOrder && currentStatus === "RESERVED" || // SALE orders: can only edit when COMPLETED
  isSaleOrder && currentStatus === "COMPLETED");
  const canPickup = onPickup && isRentOrder && currentStatus === "RESERVED";
  const canReturn = onReturn && isRentOrder && currentStatus === "PICKUPED";
  const canPrint = true;
  const isDamageFeeEnabled = () => {
    if (isSaleOrder)
      return false;
    if (isRentOrder) {
      switch (currentStatus) {
        case "RESERVED":
          return false;
        case "PICKUPED":
        case "RETURNED":
          return true;
        default:
          return false;
      }
    }
    return false;
  };
  const isSecurityDepositEnabled = () => {
    if (isSaleOrder)
      return false;
    if (isRentOrder) {
      switch (currentStatus) {
        case "RESERVED":
        case "PICKUPED":
        case "RETURNED":
          return true;
        default:
          return false;
      }
    }
    return false;
  };
  const isCollateralTypeEnabled = () => {
    if (isSaleOrder)
      return false;
    if (isRentOrder) {
      switch (currentStatus) {
        case "RESERVED":
        case "PICKUPED":
        case "RETURNED":
          return true;
        default:
          return false;
      }
    }
    return false;
  };
  const isCollateralDetailsEnabled = () => {
    if (isSaleOrder)
      return false;
    if (isRentOrder) {
      switch (currentStatus) {
        case "RESERVED":
        case "PICKUPED":
        case "RETURNED":
          return true;
        default:
          return false;
      }
    }
    return false;
  };
  const handleSettingsChange = (updates) => {
    setTempSettings((prev) => ({ ...prev, ...updates }));
  };
  const handleSaveSettings = async () => {
    if (onSaveSettings) {
      setIsSavingSettings(true);
      toastInfo("Saving...", "Please wait while settings are being saved");
      try {
        await onSaveSettings(tempSettings);
        toastSuccess(t2("detail.settingsSaved"), t2("detail.settingsSavedMessage"));
        setSettingsForm(tempSettings);
        setIsEditingSettings(false);
      } catch (error2) {
        toastError(t2("detail.saveFailed"), t2("detail.saveFailedMessage"));
      } finally {
        setIsSavingSettings(false);
      }
    } else {
      setSettingsForm(tempSettings);
      setIsEditingSettings(false);
    }
  };
  const handleCancelEdit = () => {
    setTempSettings(settingsForm);
    setIsEditingSettings(false);
  };
  const handlePrintOrder = () => {
    try {
      window.print();
    } catch (error2) {
      toastError("Print Error", "Failed to start printing. Please try again.");
    }
  };
  const handlePickupOrder = async () => {
    try {
      setIsPickupLoading(true);
      await ordersApi3.pickupOrder(order.id);
      toastSuccess("Pickup Successful", "Order pickup has been processed.");
      onStatusChange && onStatusChange(order.id, "PICKUPED");
      setIsCollectionModalOpen(false);
      if (typeof window !== "undefined") {
        window.location.reload();
      }
    } catch (error2) {
      toastError("Pickup Failed", "Failed to process order pickup. Please try again.");
    } finally {
      setIsPickupLoading(false);
    }
  };
  const handleReturnOrder = async () => {
    try {
      setIsReturnLoading(true);
      await ordersApi3.returnOrder(order.id);
      toastSuccess("Return Successful", "Order return has been processed.");
      onStatusChange && onStatusChange(order.id, "RETURNED");
      setIsReturnModalOpen(false);
      if (typeof window !== "undefined") {
        window.location.reload();
      }
    } catch (error2) {
      toastError("Return Failed", "Failed to process order return. Please try again.");
    } finally {
      setIsReturnLoading(false);
    }
  };
  const handleCancelOrderClick = () => {
    setShowCancelConfirmDialog(true);
  };
  const handleCancelOrder = async () => {
    try {
      setIsCancelLoading(true);
      await ordersApi3.cancelOrder(order.id);
      toastSuccess("Cancellation Successful", "Order has been cancelled.");
      onStatusChange && onStatusChange(order.id, "CANCELLED");
      if (typeof window !== "undefined") {
        window.location.reload();
      }
    } catch (error2) {
      toastError("Cancellation Failed", "Failed to cancel order. Please try again.");
    } finally {
      setIsCancelLoading(false);
      setShowCancelConfirmDialog(false);
    }
  };
  const handlePickupClick = () => {
    setIsCollectionModalOpen(true);
  };
  const handleReturnClick = () => {
    setIsReturnModalOpen(true);
  };
  const handleEditOrder = () => {
    if (onEdit) {
      try {
        onEdit(order);
      } catch (error2) {
        toastError("Edit Failed", "Failed to enter edit mode. Please try again.");
      }
    }
  };
  const handleEditOrderWithSettings = () => {
    if (onEdit) {
      try {
        const enhancedOrder = {
          ...order,
          damageFee: tempSettings.damageFee,
          securityDeposit: tempSettings.securityDeposit,
          collateralType: tempSettings.collateralType,
          collateralDetails: tempSettings.collateralDetails,
          notes: tempSettings.notes
        };
        onEdit(enhancedOrder);
      } catch (error2) {
        toastError("Edit Failed", "Failed to enter edit mode. Please try again.");
      }
    }
  };
  return /* @__PURE__ */ jsxs223("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsx248("div", { className: "bg-white border border-gray-200 rounded-lg p-4", children: /* @__PURE__ */ jsxs223("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs223("div", { children: [
        /* @__PURE__ */ jsxs223("h1", { className: "text-2xl font-bold text-gray-900", children: [
          t2("orderDetails"),
          " #",
          order.orderNumber
        ] }),
        /* @__PURE__ */ jsx248("p", { className: "text-sm text-gray-600", children: t2("detail.viewAndManage") })
      ] }),
      /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxs223("span", { className: "text-sm text-gray-600", children: [
            t2("orderType.label"),
            ":"
          ] }),
          /* @__PURE__ */ jsx248(
            Badge30,
            {
              className: ORDER_TYPE_COLORS2[order.orderType],
              children: t2(`orderType.${order.orderType}`)
            }
          )
        ] }),
        /* @__PURE__ */ jsxs223("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxs223("span", { className: "text-sm text-gray-600", children: [
            t2("status.label"),
            ":"
          ] }),
          /* @__PURE__ */ jsx248(
            Badge30,
            {
              className: ORDER_STATUS_COLORS5[order.status] || "bg-gray-100 text-gray-800",
              children: t2(`status.${order.status}`)
            }
          )
        ] })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxs223("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-4 min-h-screen", children: [
      /* @__PURE__ */ jsxs223("div", { className: "lg:col-span-2 space-y-4", children: [
        /* @__PURE__ */ jsx248(OrderInformation, { order }),
        /* @__PURE__ */ jsx248(OrderProductsList, { order })
      ] }),
      /* @__PURE__ */ jsxs223("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsx248(
          OrderSummaryCard,
          {
            order,
            tempSettings,
            calculateCollectionTotal
          }
        ),
        /* @__PURE__ */ jsx248(
          OrderSettingsCard,
          {
            order,
            settingsForm,
            tempSettings,
            isEditingSettings,
            isSavingSettings,
            loading,
            isDamageFeeEnabled,
            isSecurityDepositEnabled,
            isCollateralTypeEnabled,
            isCollateralDetailsEnabled,
            onSettingsChange: handleSettingsChange,
            onSaveSettings: handleSaveSettings,
            onCancelEdit: handleCancelEdit,
            onStartEdit: () => setIsEditingSettings(true),
            collateralTypes: COLLATERAL_TYPES
          }
        )
      ] })
    ] }),
    showActions && /* @__PURE__ */ jsx248(
      OrderActionsSection,
      {
        order,
        canEdit,
        canCancel,
        canPickup,
        canReturn,
        canPrint,
        isRentOrder,
        isSaleOrder,
        isPickupLoading,
        isReturnLoading,
        isCancelLoading,
        onEdit: handleEditOrderWithSettings,
        onCancel: handleCancelOrderClick,
        onPickup: handlePickupClick,
        onReturn: handleReturnClick,
        onPrint: handlePrintOrder
      }
    ),
    /* @__PURE__ */ jsx248(
      CollectionReturnModal,
      {
        isOpen: isCollectionModalOpen,
        onClose: () => setIsCollectionModalOpen(false),
        order,
        settingsForm: tempSettings,
        mode: "collection",
        onConfirmPickup: handlePickupOrder
      }
    ),
    /* @__PURE__ */ jsx248(
      CollectionReturnModal,
      {
        isOpen: isReturnModalOpen,
        onClose: () => setIsReturnModalOpen(false),
        order,
        settingsForm: tempSettings,
        mode: "return",
        onConfirmReturn: handleReturnOrder
      }
    ),
    /* @__PURE__ */ jsx248(
      ConfirmationDialog4,
      {
        open: showCancelConfirmDialog,
        onOpenChange: setShowCancelConfirmDialog,
        type: "danger",
        title: t2("detail.cancelOrderTitle"),
        description: t2("detail.cancelOrderMessage"),
        confirmText: t2("actions.cancelOrder"),
        cancelText: t2("detail.keepOrder"),
        onConfirm: handleCancelOrder,
        onCancel: () => setShowCancelConfirmDialog(false),
        isLoading: isCancelLoading
      }
    )
  ] });
};

// src/components/features/OrderDetail/components/OrderSummary.tsx
import { DollarSign as DollarSign21 } from "lucide-react";
import { formatCurrency as formatCurrency19 } from "@rentalshop/ui";
import { jsx as jsx249, jsxs as jsxs224 } from "react/jsx-runtime";
var OrderSummary = ({ order, settingsForm }) => {
  const collectionAmount = calculateCollectionAmount(order, settingsForm);
  const collectionTitle = getCollectionTitle(order);
  return /* @__PURE__ */ jsxs224("div", { className: "p-6", children: [
    /* @__PURE__ */ jsxs224("div", { className: "flex items-center gap-2 mb-4", children: [
      /* @__PURE__ */ jsx249(DollarSign21, { className: "w-5 h-5 text-gray-600" }),
      /* @__PURE__ */ jsx249("h3", { className: "text-lg font-semibold text-gray-900", children: "Order Summary" })
    ] }),
    /* @__PURE__ */ jsxs224("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs224("div", { className: "flex justify-between items-center py-2", children: [
        /* @__PURE__ */ jsx249("span", { className: "text-gray-600", children: "Subtotal" }),
        /* @__PURE__ */ jsx249("span", { className: "font-semibold text-gray-900", children: formatCurrency19(order.subtotal) })
      ] }),
      order.discountAmount && order.discountAmount > 0 && /* @__PURE__ */ jsxs224("div", { className: "flex justify-between items-center py-2", children: [
        /* @__PURE__ */ jsx249("span", { className: "text-gray-600", children: "Discount" }),
        /* @__PURE__ */ jsxs224("span", { className: "font-medium text-green-600", children: [
          "-",
          formatCurrency19(order.discountAmount)
        ] })
      ] }),
      order.taxAmount && order.taxAmount > 0 && /* @__PURE__ */ jsxs224("div", { className: "flex justify-between items-center py-2", children: [
        /* @__PURE__ */ jsx249("span", { className: "text-gray-600", children: "Tax" }),
        /* @__PURE__ */ jsx249("span", { className: "font-medium text-gray-900", children: formatCurrency19(order.taxAmount) })
      ] }),
      /* @__PURE__ */ jsxs224("div", { className: "flex justify-between items-center py-3 border-t border-gray-200", children: [
        /* @__PURE__ */ jsx249("span", { className: "text-lg font-semibold text-gray-900", children: "Total Amount" }),
        /* @__PURE__ */ jsx249("span", { className: "text-xl font-bold text-green-700", children: formatCurrency19(order.totalAmount) })
      ] }),
      /* @__PURE__ */ jsxs224("div", { className: "flex justify-between items-center py-2", children: [
        /* @__PURE__ */ jsx249("span", { className: "text-gray-600", children: "Deposit" }),
        /* @__PURE__ */ jsx249("span", { className: "font-medium text-gray-900", children: formatCurrency19(order.depositAmount) })
      ] }),
      /* @__PURE__ */ jsxs224("div", { className: "flex justify-between items-center py-2", children: [
        /* @__PURE__ */ jsx249("span", { className: "text-gray-600", children: "Remaining" }),
        /* @__PURE__ */ jsx249("span", { className: "font-medium text-gray-900", children: formatCurrency19(order.totalAmount - order.depositAmount) })
      ] }),
      /* @__PURE__ */ jsxs224("div", { className: "py-3 border-t border-gray-200", children: [
        /* @__PURE__ */ jsxs224("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsx249("span", { className: "text-lg font-semibold text-gray-900", children: collectionTitle }),
          /* @__PURE__ */ jsx249("span", { className: `text-xl font-bold ${collectionAmount < 0 ? "text-blue-700" : collectionAmount === 0 ? "text-gray-500" : "text-yellow-700"}`, children: collectionAmount === 0 ? /* @__PURE__ */ jsx249("span", { className: "text-gray-500", children: "0" }) : `${formatCurrency19(Math.abs(collectionAmount))}` })
        ] }),
        order.orderType === "RENT" && order.status === "RESERVED" && settingsForm.material && settingsForm.material.trim() !== "" && /* @__PURE__ */ jsxs224("div", { className: "text-sm font-medium text-gray-600 mt-1", children: [
          "v\xE0 ",
          settingsForm.material
        ] }),
        order.orderType === "RENT" && order.status === "RESERVED" && /* @__PURE__ */ jsx249("div", { className: "mt-2 text-xs text-gray-500", children: /* @__PURE__ */ jsxs224("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ jsx249("span", { children: "\u{1F4A1}" }),
          /* @__PURE__ */ jsxs224("span", { children: [
            formatCurrency19(order.totalAmount),
            " Total after discount - ",
            formatCurrency19(order.depositAmount),
            " Deposit + ",
            formatCurrency19(settingsForm.bailAmount),
            " Bail amount"
          ] })
        ] }) }),
        order.orderType === "RENT" && order.status === "PICKUP" && /* @__PURE__ */ jsx249("div", { className: "mt-2 text-xs text-gray-500", children: /* @__PURE__ */ jsxs224("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ jsx249("span", { children: "\u{1F4A1}" }),
          /* @__PURE__ */ jsxs224("span", { children: [
            formatCurrency19(settingsForm.bailAmount),
            " Bail amount - ",
            formatCurrency19(settingsForm.damageFee),
            " Damage Fee"
          ] })
        ] }) })
      ] })
    ] })
  ] });
};

// src/components/features/Shops/components/ShopsLoading.tsx
import { jsx as jsx250, jsxs as jsxs225 } from "react/jsx-runtime";
function ShopsLoading() {
  return /* @__PURE__ */ jsxs225("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx250(StatsSkeleton, {}),
    /* @__PURE__ */ jsx250(SearchSkeleton, {}),
    /* @__PURE__ */ jsx250(GridSkeleton, { items: 6 }),
    /* @__PURE__ */ jsx250(PaginationSkeleton, {})
  ] });
}
function ShopDetailLoading() {
  return /* @__PURE__ */ jsxs225("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs225("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs225("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx250("div", { className: "h-8 w-48 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx250("div", { className: "h-4 w-32 bg-gray-200 rounded animate-pulse" })
      ] }),
      /* @__PURE__ */ jsxs225("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx250("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" }),
        /* @__PURE__ */ jsx250("div", { className: "h-10 w-24 bg-gray-200 rounded animate-pulse" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs225("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [
      /* @__PURE__ */ jsx250("div", { className: "lg:col-span-1", children: /* @__PURE__ */ jsx250("div", { className: "aspect-video w-full bg-gray-200 rounded-lg animate-pulse" }) }),
      /* @__PURE__ */ jsxs225("div", { className: "lg:col-span-2 space-y-6", children: [
        /* @__PURE__ */ jsxs225("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsx250("div", { className: "h-6 w-24 bg-gray-200 rounded animate-pulse" }),
          /* @__PURE__ */ jsx250("div", { className: "space-y-2", children: Array.from({ length: 5 }).map((_, i) => /* @__PURE__ */ jsx250("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }, i)) })
        ] }),
        /* @__PURE__ */ jsxs225("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsx250("div", { className: "h-6 w-24 bg-gray-200 rounded animate-pulse" }),
          /* @__PURE__ */ jsx250("div", { className: "grid grid-cols-2 gap-4", children: Array.from({ length: 4 }).map((_, i) => /* @__PURE__ */ jsx250("div", { className: "h-4 w-full bg-gray-200 rounded animate-pulse" }, i)) })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs225("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx250("div", { className: "h-6 w-32 bg-gray-200 rounded animate-pulse" }),
      /* @__PURE__ */ jsx250(GridSkeleton, { items: 4 })
    ] })
  ] });
}

// src/components/features/Shops/components/OutletsLoading.tsx
import { jsx as jsx251, jsxs as jsxs226 } from "react/jsx-runtime";
function OutletsLoading() {
  return /* @__PURE__ */ jsxs226("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsx251(StatsSkeleton, {}),
    /* @__PURE__ */ jsx251(SearchSkeleton, {}),
    /* @__PURE__ */ jsx251(GridSkeleton, { items: 6 }),
    /* @__PURE__ */ jsx251(PaginationSkeleton, {})
  ] });
}
function OutletDetailLoading() {
  return /* @__PURE__ */ jsx251("div", { className: "space-y-6", children: /* @__PURE__ */ jsxs226("div", { className: "animate-pulse", children: [
    /* @__PURE__ */ jsx251("div", { className: "h-8 bg-gray-200 rounded w-1/4 mb-4" }),
    /* @__PURE__ */ jsx251("div", { className: "h-4 bg-gray-200 rounded w-1/2 mb-2" }),
    /* @__PURE__ */ jsx251("div", { className: "h-4 bg-gray-200 rounded w-3/4 mb-2" }),
    /* @__PURE__ */ jsx251("div", { className: "h-4 bg-gray-200 rounded w-2/3" })
  ] }) });
}

// src/components/features/Settings/Settings.tsx
import { useState as useState87, useEffect as useEffect45 } from "react";
import { useRouter as useRouter8, useSearchParams } from "next/navigation";
import {
  User as User23,
  CreditCard as CreditCard22,
  Settings as SettingsIcon,
  Building2 as Building215,
  Store as Store6,
  Languages as Languages2
} from "lucide-react";
import { useAuth as useAuth2, useSettingsTranslations as useSettingsTranslations9 } from "@rentalshop/hooks";
import { usersApi as usersApi2, authApi as authApi2, settingsApi, subscriptionsApi as subscriptionsApi2 } from "@rentalshop/utils";
import { useToast as useToast10 } from "@rentalshop/ui";

// src/components/features/Settings/components/SettingsLayout.tsx
import { useState as useState83 } from "react";
import {
  Card as Card60,
  CardContent as CardContent59,
  PageWrapper as PageWrapper5,
  PageHeader as PageHeader2,
  PageTitle as PageTitle2,
  PageContent as PageContent5,
  Button as Button65
} from "@rentalshop/ui";
import { ChevronRight as ChevronRight5 } from "lucide-react";
import { jsx as jsx252, jsxs as jsxs227 } from "react/jsx-runtime";
var SettingsLayout2 = ({
  user,
  loading,
  children,
  menuItems: menuItems2,
  activeSection,
  onSectionChange
}) => {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState83(false);
  if (loading) {
    return /* @__PURE__ */ jsxs227(PageWrapper5, { children: [
      /* @__PURE__ */ jsxs227(PageHeader2, { children: [
        /* @__PURE__ */ jsx252(PageTitle2, { children: "Settings" }),
        /* @__PURE__ */ jsx252("p", { children: "Manage your account settings and preferences" })
      ] }),
      /* @__PURE__ */ jsx252("div", { className: "flex justify-center items-center py-12", children: /* @__PURE__ */ jsxs227("div", { className: "text-center", children: [
        /* @__PURE__ */ jsx252("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4" }),
        /* @__PURE__ */ jsx252("p", { className: "text-gray-600", children: "Loading settings..." })
      ] }) })
    ] });
  }
  return /* @__PURE__ */ jsxs227(PageWrapper5, { children: [
    /* @__PURE__ */ jsxs227(PageHeader2, { children: [
      /* @__PURE__ */ jsx252(PageTitle2, { children: "Settings" }),
      /* @__PURE__ */ jsx252("p", { children: "Manage your account settings and preferences" })
    ] }),
    /* @__PURE__ */ jsxs227("div", { className: "flex flex-col lg:flex-row gap-6", children: [
      /* @__PURE__ */ jsx252("div", { className: "lg:w-64 flex-shrink-0", children: /* @__PURE__ */ jsx252(Card60, { children: /* @__PURE__ */ jsx252(CardContent59, { className: "p-0", children: /* @__PURE__ */ jsx252("nav", { className: "space-y-1", children: menuItems2.filter((item) => {
        if (!item.roles)
          return true;
        const userRole = (user?.role || "").trim().toUpperCase();
        const hasRole = item.roles.some((role) => role.toUpperCase() === userRole);
        return hasRole;
      }).map((item) => {
        const Icon2 = item.icon;
        const isActive = activeSection === item.id;
        return /* @__PURE__ */ jsxs227(
          Button65,
          {
            variant: "ghost",
            onClick: () => onSectionChange(item.id),
            className: `w-full flex items-center space-x-3 px-4 py-3 text-left transition-colors justify-start h-auto ${isActive ? "bg-blue-50 text-blue-700 border-r-2 border-blue-600" : "text-gray-700 hover:bg-gray-50"}`,
            children: [
              /* @__PURE__ */ jsx252(Icon2, { className: "h-5 w-5" }),
              /* @__PURE__ */ jsxs227("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx252("p", { className: "font-medium", children: item.label }),
                /* @__PURE__ */ jsx252("p", { className: "text-xs text-gray-500 truncate", children: item.description })
              ] }),
              /* @__PURE__ */ jsx252(ChevronRight5, { className: "h-4 w-4" })
            ]
          },
          item.id
        );
      }) }) }) }) }),
      /* @__PURE__ */ jsx252("div", { className: "flex-1 min-w-0", children: /* @__PURE__ */ jsx252(PageContent5, { children }) })
    ] })
  ] });
};

// src/components/features/Settings/components/ProfileSection.tsx
import {
  Card as Card61,
  CardHeader as CardHeader42,
  CardContent as CardContent60,
  Button as Button66,
  Input as Input31,
  Label as Label17
} from "@rentalshop/ui";
import { useSettingsTranslations } from "@rentalshop/hooks";
import { jsx as jsx253, jsxs as jsxs228 } from "react/jsx-runtime";
var ProfileSection = ({
  user,
  isEditing,
  isUpdating,
  formData,
  onEdit,
  onSave,
  onCancel,
  onInputChange
}) => {
  const t2 = useSettingsTranslations();
  console.log("\u{1F50D} ProfileSection render - user:", user);
  console.log("\u{1F50D} ProfileSection render - user details:", {
    "user.id": user?.id,
    "user.email": user?.email,
    "user.firstName": user?.firstName,
    "user.lastName": user?.lastName,
    "user.phone": user?.phone,
    "user.role": user?.role
  });
  return /* @__PURE__ */ jsx253("div", { className: "space-y-6", children: /* @__PURE__ */ jsxs228(Card61, { children: [
    /* @__PURE__ */ jsxs228(CardHeader42, { className: "flex flex-row items-center justify-between py-4 pb-3", children: [
      /* @__PURE__ */ jsx253("h3", { className: "text-base font-semibold text-gray-900", children: t2("profile.personalInformation") }),
      !isEditing ? /* @__PURE__ */ jsx253(Button66, { onClick: onEdit, size: "sm", children: t2("profile.edit") }) : /* @__PURE__ */ jsxs228("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx253(Button66, { onClick: onSave, variant: "default", size: "sm", disabled: isUpdating, children: isUpdating ? t2("profile.saving") : t2("profile.save") }),
        /* @__PURE__ */ jsx253(Button66, { onClick: onCancel, variant: "outline", size: "sm", disabled: isUpdating, children: t2("profile.cancel") })
      ] })
    ] }),
    /* @__PURE__ */ jsx253(CardContent60, { className: "p-6 pt-4", children: /* @__PURE__ */ jsx253("div", { className: "space-y-8", children: /* @__PURE__ */ jsxs228("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs228("div", { children: [
        /* @__PURE__ */ jsx253(Label17, { htmlFor: "firstName", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("profile.firstName") }),
        isEditing ? /* @__PURE__ */ jsx253(
          Input31,
          {
            id: "firstName",
            name: "firstName",
            type: "text",
            value: formData.firstName,
            onChange: onInputChange,
            placeholder: t2("profile.enterFirstName")
          }
        ) : /* @__PURE__ */ jsx253("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: user?.firstName || t2("profile.notProvided") })
      ] }),
      /* @__PURE__ */ jsxs228("div", { children: [
        /* @__PURE__ */ jsx253(Label17, { htmlFor: "lastName", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("profile.lastName") }),
        isEditing ? /* @__PURE__ */ jsx253(
          Input31,
          {
            id: "lastName",
            name: "lastName",
            type: "text",
            value: formData.lastName,
            onChange: onInputChange,
            placeholder: t2("profile.enterLastName")
          }
        ) : /* @__PURE__ */ jsx253("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: user?.lastName || t2("profile.notProvided") })
      ] }),
      /* @__PURE__ */ jsxs228("div", { children: [
        /* @__PURE__ */ jsx253(Label17, { htmlFor: "email", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("profile.email") }),
        /* @__PURE__ */ jsx253("div", { className: "relative", children: /* @__PURE__ */ jsx253(
          Input31,
          {
            id: "email",
            name: "email",
            type: "email",
            value: user?.email || "",
            placeholder: t2("profile.email"),
            disabled: true,
            className: "bg-gray-100 text-gray-600 cursor-not-allowed"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs228("div", { children: [
        /* @__PURE__ */ jsx253(Label17, { htmlFor: "phone", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("profile.phone") }),
        isEditing ? /* @__PURE__ */ jsx253(
          Input31,
          {
            id: "phone",
            name: "phone",
            type: "tel",
            value: formData.phone,
            onChange: onInputChange,
            placeholder: t2("profile.enterPhone")
          }
        ) : /* @__PURE__ */ jsx253("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: user?.phone || t2("profile.notProvided") })
      ] }),
      /* @__PURE__ */ jsxs228("div", { className: "md:col-span-2", children: [
        /* @__PURE__ */ jsx253(Label17, { className: "block text-sm font-medium text-gray-700 mb-2", children: t2("profile.role") }),
        /* @__PURE__ */ jsx253("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: user?.role ? user.role.charAt(0).toUpperCase() + user.role.slice(1) : "User" })
      ] })
    ] }) }) })
  ] }) });
};

// src/components/features/Settings/components/MerchantSection.tsx
import { useState as useState84, useEffect as useEffect44, useRef as useRef8 } from "react";
import {
  Card as Card62,
  CardHeader as CardHeader43,
  CardContent as CardContent61,
  Button as Button67,
  Input as Input32,
  Label as Label18,
  Badge as Badge31,
  SearchableCountrySelect as SearchableCountrySelect2
} from "@rentalshop/ui";
import { CheckCircle2 as CheckCircle210, DollarSign as DollarSign22 } from "lucide-react";
import { merchantsApi as merchantsApi3, formatCurrency as formatCurrency20, getCurrency } from "@rentalshop/utils";
import {
  getBusinessTypeDescription,
  getPricingTypeDescription,
  COUNTRIES as COUNTRIES2
} from "@rentalshop/constants";
import { useSettingsTranslations as useSettingsTranslations2 } from "@rentalshop/hooks";
import { Fragment as Fragment50, jsx as jsx254, jsxs as jsxs229 } from "react/jsx-runtime";
var MerchantSection = ({
  user,
  isEditing,
  isUpdating,
  formData,
  currentCurrency,
  onEdit,
  onSave,
  onCancel,
  onInputChange,
  onCurrencyChange
}) => {
  const t2 = useSettingsTranslations2();
  const [merchantData, setMerchantData] = useState84(null);
  const [loadingMerchant, setLoadingMerchant] = useState84(false);
  const [selectedCurrency, setSelectedCurrency] = useState84(currentCurrency);
  const [isSavingCurrency, setIsSavingCurrency] = useState84(false);
  const fetchingRef = useRef8(false);
  const CURRENCY_OPTIONS2 = [
    { value: "USD", label: t2("merchant.usDollar"), symbol: "$" },
    { value: "VND", label: t2("merchant.vietnameseDong"), symbol: "\u0111" }
  ];
  console.log("\u{1F50D} MerchantSection render - user:", user);
  console.log("\u{1F50D} MerchantSection render - user.merchant:", user?.merchant);
  console.log("\u{1F50D} MerchantSection render - user.merchantId:", user?.merchantId);
  console.log("\u{1F50D} MerchantSection render - user role:", user?.role);
  console.log("\u{1F50D} MerchantSection render - loadingMerchant:", loadingMerchant);
  console.log("\u{1F50D} MerchantSection render - fetchingRef.current:", fetchingRef.current);
  useEffect44(() => {
    const fetchMerchantData = async () => {
      if (user?.merchantId && !user?.merchant && !fetchingRef.current) {
        console.log("\u{1F504} Fetching merchant data for merchantId:", user.merchantId);
        fetchingRef.current = true;
        setLoadingMerchant(true);
        try {
          const result = await merchantsApi3.getMerchantById(user.merchantId);
          console.log("\u{1F50D} Merchant API response:", result);
          if (result.success && result.data) {
            const merchantInfo = result.data.merchant || result.data;
            console.log("\u2705 Merchant data extracted:", merchantInfo);
            setMerchantData(merchantInfo);
          } else {
            console.error("\u274C Failed to fetch merchant data:", result);
          }
        } catch (error2) {
          console.error("\u{1F4A5} Error fetching merchant data:", error2);
        } finally {
          setLoadingMerchant(false);
          fetchingRef.current = false;
        }
      }
    };
    fetchMerchantData();
    return () => {
      fetchingRef.current = false;
    };
  }, [user?.merchantId, user?.merchant]);
  const merchant = user?.merchant || merchantData;
  useEffect44(() => {
    setSelectedCurrency(currentCurrency);
  }, [currentCurrency]);
  const handleCurrencySelect = async (currency) => {
    if (currency === currentCurrency)
      return;
    setIsSavingCurrency(true);
    try {
      await onCurrencyChange(currency);
      setSelectedCurrency(currency);
    } catch (error2) {
      console.error("Failed to update currency:", error2);
      setSelectedCurrency(currentCurrency);
    } finally {
      setIsSavingCurrency(false);
    }
  };
  console.log("\u{1F50D} MerchantSection - Final merchant data:", {
    "user.merchant": user?.merchant,
    "merchantData": merchantData,
    "final merchant": merchant,
    "merchant.name": merchant?.name,
    "merchant.email": merchant?.email,
    "merchant.phone": merchant?.phone,
    "merchant.businessType": merchant?.businessType
  });
  return /* @__PURE__ */ jsxs229("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs229(Card62, { children: [
      /* @__PURE__ */ jsxs229(CardHeader43, { className: "flex flex-row items-center justify-between py-4 pb-3", children: [
        /* @__PURE__ */ jsx254("h3", { className: "text-base font-semibold text-gray-900", children: t2("merchant.businessInformation") }),
        !isEditing ? /* @__PURE__ */ jsx254(Button67, { onClick: onEdit, size: "sm", children: t2("merchant.edit") }) : /* @__PURE__ */ jsxs229("div", { className: "flex gap-2", children: [
          /* @__PURE__ */ jsx254(Button67, { onClick: onSave, variant: "default", size: "sm", disabled: isUpdating, children: isUpdating ? t2("merchant.saving") : t2("merchant.save") }),
          /* @__PURE__ */ jsx254(Button67, { onClick: onCancel, variant: "outline", size: "sm", disabled: isUpdating, children: t2("merchant.cancel") })
        ] })
      ] }),
      /* @__PURE__ */ jsx254(CardContent61, { className: "p-6 pt-4", children: loadingMerchant ? /* @__PURE__ */ jsx254("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx254("p", { className: "text-gray-500", children: "Loading business information..." }) }) : !merchant && !user?.merchantId ? /* @__PURE__ */ jsxs229("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsx254("p", { className: "text-gray-500", children: "No business information available" }),
        /* @__PURE__ */ jsxs229("p", { className: "text-gray-400 text-sm mt-2", children: [
          "User role: ",
          user?.role || "Unknown",
          " | Has merchantId: ",
          user?.merchantId ? "Yes" : "No",
          " | Has merchant object: ",
          user?.merchant ? "Yes" : "No",
          " | Fetched merchant: ",
          merchantData ? "Yes" : "No"
        ] })
      ] }) : /* @__PURE__ */ jsxs229("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
        /* @__PURE__ */ jsxs229("div", { children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "merchantName", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.name") }),
          isEditing ? /* @__PURE__ */ jsx254(
            Input32,
            {
              id: "merchantName",
              name: "name",
              type: "text",
              value: formData.name,
              onChange: onInputChange,
              placeholder: t2("merchant.enterBusinessName")
            }
          ) : /* @__PURE__ */ jsx254("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: merchant?.name || t2("merchant.notProvided") })
        ] }),
        /* @__PURE__ */ jsxs229("div", { children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "merchantEmail", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.email") }),
          /* @__PURE__ */ jsx254("div", { className: "relative", children: /* @__PURE__ */ jsx254(
            Input32,
            {
              id: "merchantEmail",
              name: "email",
              type: "email",
              value: merchant?.email || "",
              placeholder: t2("merchant.email"),
              disabled: true,
              className: "bg-gray-100 text-gray-600 cursor-not-allowed"
            }
          ) })
        ] }),
        /* @__PURE__ */ jsxs229("div", { children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "taxId", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.taxId") }),
          isEditing ? /* @__PURE__ */ jsx254(
            Input32,
            {
              id: "taxId",
              name: "taxId",
              type: "text",
              value: formData.taxId,
              onChange: onInputChange,
              placeholder: t2("merchant.enterTaxId")
            }
          ) : /* @__PURE__ */ jsx254("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: merchant?.taxId || t2("merchant.notProvided") })
        ] }),
        /* @__PURE__ */ jsxs229("div", { children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "merchantPhone", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.phone") }),
          isEditing ? /* @__PURE__ */ jsx254(
            Input32,
            {
              id: "merchantPhone",
              name: "phone",
              type: "tel",
              value: formData.phone,
              onChange: onInputChange,
              placeholder: t2("merchant.enterPhone")
            }
          ) : /* @__PURE__ */ jsx254("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: merchant?.phone || t2("merchant.notProvided") })
        ] }),
        /* @__PURE__ */ jsx254("div", { className: "md:col-span-2", children: /* @__PURE__ */ jsxs229("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs229("div", { children: [
            /* @__PURE__ */ jsx254(Label18, { htmlFor: "businessType", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.businessType") }),
            /* @__PURE__ */ jsx254("div", { className: "relative", children: /* @__PURE__ */ jsx254(
              Input32,
              {
                id: "businessType",
                name: "businessType",
                type: "text",
                value: merchant?.businessType || t2("merchant.notProvided"),
                placeholder: t2("merchant.businessType"),
                disabled: true,
                className: "bg-gray-100 text-gray-600 cursor-not-allowed"
              }
            ) }),
            /* @__PURE__ */ jsx254("p", { className: "text-xs text-gray-500 mt-1", children: merchant?.businessType ? getBusinessTypeDescription(merchant.businessType) : t2("merchant.businessType") })
          ] }),
          /* @__PURE__ */ jsxs229("div", { children: [
            /* @__PURE__ */ jsx254(Label18, { htmlFor: "pricingType", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.pricingType") }),
            /* @__PURE__ */ jsx254("div", { className: "relative", children: /* @__PURE__ */ jsx254(
              Input32,
              {
                id: "pricingType",
                name: "pricingType",
                type: "text",
                value: merchant?.pricingType || t2("merchant.notProvided"),
                placeholder: t2("merchant.pricingType"),
                disabled: true,
                className: "bg-gray-100 text-gray-600 cursor-not-allowed"
              }
            ) }),
            /* @__PURE__ */ jsx254("p", { className: "text-xs text-gray-500 mt-1", children: merchant?.pricingType ? getPricingTypeDescription(merchant.pricingType) : t2("merchant.pricingType") })
          ] })
        ] }) }),
        /* @__PURE__ */ jsxs229("div", { className: "md:col-span-2", children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "merchantAddress", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.address") }),
          isEditing ? /* @__PURE__ */ jsx254(
            Input32,
            {
              id: "merchantAddress",
              name: "address",
              type: "text",
              value: formData.address,
              onChange: onInputChange,
              placeholder: t2("merchant.enterAddress")
            }
          ) : /* @__PURE__ */ jsx254("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: merchant?.address || t2("merchant.notProvided") })
        ] }),
        /* @__PURE__ */ jsxs229("div", { children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "merchantCity", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.city") }),
          isEditing ? /* @__PURE__ */ jsx254(
            Input32,
            {
              id: "merchantCity",
              name: "city",
              type: "text",
              value: formData.city,
              onChange: onInputChange,
              placeholder: t2("merchant.enterCity")
            }
          ) : /* @__PURE__ */ jsx254("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: merchant?.city || t2("merchant.notProvided") })
        ] }),
        /* @__PURE__ */ jsxs229("div", { children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "merchantState", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.state") }),
          isEditing ? /* @__PURE__ */ jsx254(
            Input32,
            {
              id: "merchantState",
              name: "state",
              type: "text",
              value: formData.state,
              onChange: onInputChange,
              placeholder: t2("merchant.enterState")
            }
          ) : /* @__PURE__ */ jsx254("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: merchant?.state || t2("merchant.notProvided") })
        ] }),
        /* @__PURE__ */ jsxs229("div", { children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "merchantZipCode", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.zipCode") }),
          isEditing ? /* @__PURE__ */ jsx254(
            Input32,
            {
              id: "merchantZipCode",
              name: "zipCode",
              type: "text",
              value: formData.zipCode,
              onChange: onInputChange,
              placeholder: t2("merchant.enterZipCode")
            }
          ) : /* @__PURE__ */ jsx254("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: merchant?.zipCode || t2("merchant.notProvided") })
        ] }),
        /* @__PURE__ */ jsxs229("div", { children: [
          /* @__PURE__ */ jsx254(Label18, { htmlFor: "merchantCountry", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("merchant.country") }),
          isEditing ? /* @__PURE__ */ jsx254(
            SearchableCountrySelect2,
            {
              options: COUNTRIES2,
              value: formData.country,
              onChange: (countryName) => {
                console.log("\u{1F30D} MerchantSection: Country onChange called with:", countryName);
                console.log("\u{1F30D} MerchantSection: Current formData.country:", formData.country);
                onInputChange({
                  target: { name: "country", value: countryName }
                });
                console.log("\u{1F30D} MerchantSection: onInputChange called");
              },
              placeholder: "Type to search countries...",
              emptyMessage: "No countries found"
            }
          ) : /* @__PURE__ */ jsx254("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md flex items-center gap-2", children: merchant?.country ? /* @__PURE__ */ jsxs229(Fragment50, { children: [
            COUNTRIES2.find((c) => c.name === merchant.country)?.flag || "",
            merchant.country
          ] }) : t2("merchant.notProvided") })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsx254(Card62, { children: /* @__PURE__ */ jsxs229(CardContent61, { className: "p-6", children: [
      /* @__PURE__ */ jsxs229("div", { className: "flex items-center gap-2 mb-4", children: [
        /* @__PURE__ */ jsx254(DollarSign22, { className: "h-5 w-5 text-blue-600" }),
        /* @__PURE__ */ jsx254("h3", { className: "text-lg font-semibold text-gray-900", children: t2("merchant.currencySettings") })
      ] }),
      /* @__PURE__ */ jsx254("p", { className: "text-sm text-gray-600 mb-4", children: t2("merchant.currencyDesc") }),
      /* @__PURE__ */ jsx254("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: CURRENCY_OPTIONS2.map((option) => {
        const config = getCurrency(option.value);
        const isSelected = selectedCurrency === option.value;
        const isCurrent = currentCurrency === option.value;
        return /* @__PURE__ */ jsxs229(
          "button",
          {
            onClick: () => handleCurrencySelect(option.value),
            disabled: isSavingCurrency || isCurrent,
            className: `
                    relative p-4 border-2 rounded-lg text-left transition-all
                    ${isCurrent ? "border-green-500 bg-green-50" : "border-gray-200 bg-white hover:border-blue-300 hover:shadow-sm"}
                    ${isSavingCurrency ? "opacity-50 cursor-wait" : isCurrent ? "cursor-default" : "cursor-pointer"}
                  `,
            children: [
              /* @__PURE__ */ jsxs229("div", { className: "flex items-start justify-between", children: [
                /* @__PURE__ */ jsxs229("div", { className: "flex items-center gap-3", children: [
                  /* @__PURE__ */ jsx254("div", { className: "text-2xl", children: option.symbol }),
                  /* @__PURE__ */ jsxs229("div", { children: [
                    /* @__PURE__ */ jsx254("div", { className: "font-semibold text-gray-900", children: option.label }),
                    /* @__PURE__ */ jsx254("div", { className: "text-sm text-gray-600", children: option.value })
                  ] })
                ] }),
                isCurrent && /* @__PURE__ */ jsxs229(Badge31, { variant: "default", className: "bg-green-100 text-green-800", children: [
                  /* @__PURE__ */ jsx254(CheckCircle210, { className: "h-3 w-3 mr-1" }),
                  t2("merchant.selected")
                ] })
              ] }),
              /* @__PURE__ */ jsxs229("div", { className: "mt-3 pt-3 border-t border-gray-200", children: [
                /* @__PURE__ */ jsxs229("div", { className: "text-xs text-gray-500 mb-1", children: [
                  t2("merchant.selectCurrency"),
                  ":"
                ] }),
                /* @__PURE__ */ jsxs229("div", { className: "flex gap-4 text-sm text-gray-700", children: [
                  /* @__PURE__ */ jsx254("span", { children: formatCurrency20(100, option.value) }),
                  /* @__PURE__ */ jsx254("span", { children: formatCurrency20(1e4, option.value) })
                ] })
              ] })
            ]
          },
          option.value
        );
      }) }),
      isSavingCurrency && /* @__PURE__ */ jsx254("p", { className: "text-sm text-blue-600 mt-3", children: t2("merchant.savingCurrency") })
    ] }) })
  ] });
};

// src/components/features/Settings/components/OutletSection.tsx
import {
  Card as Card63,
  CardHeader as CardHeader44,
  CardContent as CardContent62,
  Button as Button68,
  Input as Input33,
  Label as Label19
} from "@rentalshop/ui";
import { useSettingsTranslations as useSettingsTranslations3 } from "@rentalshop/hooks";
import { jsx as jsx255, jsxs as jsxs230 } from "react/jsx-runtime";
var OutletSection = ({
  user,
  isEditing,
  isUpdating,
  formData,
  onEdit,
  onSave,
  onCancel,
  onInputChange
}) => {
  const t2 = useSettingsTranslations3();
  return /* @__PURE__ */ jsx255("div", { className: "space-y-6", children: /* @__PURE__ */ jsxs230(Card63, { children: [
    /* @__PURE__ */ jsxs230(CardHeader44, { className: "flex flex-row items-center justify-between py-4 pb-3", children: [
      /* @__PURE__ */ jsx255("h3", { className: "text-base font-semibold text-gray-900", children: t2("outlet.outletInformation") }),
      !isEditing ? /* @__PURE__ */ jsx255(Button68, { onClick: onEdit, size: "sm", children: t2("outlet.edit") }) : /* @__PURE__ */ jsxs230("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx255(Button68, { onClick: onSave, variant: "default", size: "sm", disabled: isUpdating, children: isUpdating ? t2("outlet.saving") : t2("outlet.save") }),
        /* @__PURE__ */ jsx255(Button68, { onClick: onCancel, variant: "outline", size: "sm", disabled: isUpdating, children: t2("outlet.cancel") })
      ] })
    ] }),
    /* @__PURE__ */ jsx255(CardContent62, { className: "p-6 pt-4", children: !user?.outlet ? /* @__PURE__ */ jsx255("div", { className: "text-center py-8", children: /* @__PURE__ */ jsx255("p", { className: "text-gray-500", children: t2("outlet.noOutletInfo") }) }) : /* @__PURE__ */ jsxs230("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxs230("div", { children: [
        /* @__PURE__ */ jsx255(Label19, { htmlFor: "outletName", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("outlet.name") }),
        isEditing ? /* @__PURE__ */ jsx255(
          Input33,
          {
            id: "outletName",
            name: "name",
            type: "text",
            value: formData.name,
            onChange: onInputChange,
            placeholder: t2("outlet.enterOutletName")
          }
        ) : /* @__PURE__ */ jsx255("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: user?.outlet?.name || t2("outlet.notProvided") })
      ] }),
      /* @__PURE__ */ jsxs230("div", { children: [
        /* @__PURE__ */ jsx255(Label19, { htmlFor: "outletPhone", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("outlet.phone") }),
        isEditing ? /* @__PURE__ */ jsx255(
          Input33,
          {
            id: "outletPhone",
            name: "phone",
            type: "tel",
            value: formData.phone,
            onChange: onInputChange,
            placeholder: t2("outlet.enterOutletPhone")
          }
        ) : /* @__PURE__ */ jsx255("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: user?.outlet?.phone || t2("outlet.notProvided") })
      ] }),
      /* @__PURE__ */ jsxs230("div", { className: "md:col-span-2", children: [
        /* @__PURE__ */ jsx255(Label19, { htmlFor: "outletAddress", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("outlet.address") }),
        isEditing ? /* @__PURE__ */ jsx255(
          Input33,
          {
            id: "outletAddress",
            name: "address",
            type: "text",
            value: formData.address,
            onChange: onInputChange,
            placeholder: t2("outlet.enterOutletAddress")
          }
        ) : /* @__PURE__ */ jsx255("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: user?.outlet?.address || t2("outlet.notProvided") })
      ] }),
      /* @__PURE__ */ jsxs230("div", { className: "md:col-span-2", children: [
        /* @__PURE__ */ jsx255(Label19, { htmlFor: "outletDescription", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("outlet.description") }),
        isEditing ? /* @__PURE__ */ jsx255(
          Input33,
          {
            id: "outletDescription",
            name: "description",
            type: "text",
            value: formData.description,
            onChange: onInputChange,
            placeholder: t2("outlet.enterDescription")
          }
        ) : /* @__PURE__ */ jsx255("p", { className: "text-gray-900 py-2 px-3 bg-gray-50 rounded-md", children: user?.outlet?.description || t2("outlet.notProvided") })
      ] })
    ] }) })
  ] }) });
};

// src/components/features/Settings/components/SubscriptionSection.tsx
import {
  Card as Card64,
  CardContent as CardContent63,
  Button as Button69,
  Badge as Badge32
} from "@rentalshop/ui";
import {
  CreditCard as CreditCard21,
  CheckCircle as CheckCircle33,
  AlertTriangle as AlertTriangle21,
  Calendar as Calendar31,
  DollarSign as DollarSign23
} from "lucide-react";
import { useSettingsTranslations as useSettingsTranslations4 } from "@rentalshop/hooks";
import { jsx as jsx256, jsxs as jsxs231 } from "react/jsx-runtime";
var SubscriptionSection = ({
  subscriptionData,
  subscriptionLoading,
  currentUserRole
}) => {
  const t2 = useSettingsTranslations4();
  if (subscriptionLoading) {
    return /* @__PURE__ */ jsx256("div", { className: "space-y-6", children: /* @__PURE__ */ jsx256(Card64, { children: /* @__PURE__ */ jsx256(CardContent63, { className: "p-6", children: /* @__PURE__ */ jsxs231("div", { className: "flex items-center justify-center py-8", children: [
      /* @__PURE__ */ jsx256("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" }),
      /* @__PURE__ */ jsx256("span", { className: "ml-2 text-gray-600", children: t2("subscription.loading") })
    ] }) }) }) });
  }
  if (subscriptionData?.hasSubscription) {
    return /* @__PURE__ */ jsx256("div", { className: "space-y-6", children: /* @__PURE__ */ jsx256(Card64, { children: /* @__PURE__ */ jsxs231(CardContent63, { className: "p-6", children: [
      /* @__PURE__ */ jsxs231("div", { className: "flex items-center justify-between mb-4", children: [
        /* @__PURE__ */ jsxs231("div", { className: "flex items-center space-x-3", children: [
          /* @__PURE__ */ jsx256(CreditCard21, { className: "h-6 w-6 text-blue-600" }),
          /* @__PURE__ */ jsxs231("div", { children: [
            /* @__PURE__ */ jsx256("h3", { className: "text-base font-semibold text-gray-900", children: t2("subscription.currentPlan") }),
            /* @__PURE__ */ jsx256("p", { className: "text-sm text-gray-600", children: subscriptionData.subscription.plan?.name || "Professional Plan" })
          ] })
        ] }),
        /* @__PURE__ */ jsx256(
          Badge32,
          {
            variant: subscriptionData.isExpired ? "destructive" : "default",
            className: subscriptionData.isExpired ? "bg-red-100 text-red-800" : subscriptionData.isExpiringSoon ? "bg-yellow-100 text-yellow-800" : "bg-green-100 text-green-800",
            children: subscriptionData.isExpired ? t2("subscription.expired") : subscriptionData.isExpiringSoon ? t2("subscription.expiringSoon") : t2("subscription.active")
          }
        )
      ] }),
      /* @__PURE__ */ jsxs231("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsxs231("div", { className: "bg-gray-50 rounded-lg p-4", children: [
          /* @__PURE__ */ jsxs231("div", { className: "flex items-center space-x-2 mb-2", children: [
            /* @__PURE__ */ jsx256(DollarSign23, { className: "h-4 w-4 text-gray-600" }),
            /* @__PURE__ */ jsx256("span", { className: "text-sm font-medium text-gray-700", children: t2("subscription.amount") })
          ] }),
          /* @__PURE__ */ jsxs231("p", { className: "text-base font-semibold text-gray-900", children: [
            "$",
            subscriptionData.subscription.amount || "0.00"
          ] }),
          /* @__PURE__ */ jsx256("p", { className: "text-xs text-gray-600", children: subscriptionData.subscription.interval || "monthly" })
        ] }),
        /* @__PURE__ */ jsxs231("div", { className: "bg-gray-50 rounded-lg p-4", children: [
          /* @__PURE__ */ jsxs231("div", { className: "flex items-center space-x-2 mb-2", children: [
            /* @__PURE__ */ jsx256(Calendar31, { className: "h-4 w-4 text-gray-600" }),
            /* @__PURE__ */ jsx256("span", { className: "text-sm font-medium text-gray-700", children: t2("subscription.nextBilling") })
          ] }),
          /* @__PURE__ */ jsx256("p", { className: "text-base font-semibold text-gray-900", children: subscriptionData.subscription.currentPeriodEnd ? new Date(subscriptionData.subscription.currentPeriodEnd).toLocaleDateString("en-US", {
            month: "short",
            day: "numeric",
            year: "numeric"
          }) : "N/A" }),
          subscriptionData.daysUntilExpiry && /* @__PURE__ */ jsxs231("p", { className: "text-xs text-gray-600", children: [
            subscriptionData.daysUntilExpiry,
            " ",
            t2("subscription.daysRemaining")
          ] })
        ] }),
        /* @__PURE__ */ jsxs231("div", { className: "bg-gray-50 rounded-lg p-4", children: [
          /* @__PURE__ */ jsxs231("div", { className: "flex items-center space-x-2 mb-2", children: [
            /* @__PURE__ */ jsx256(CheckCircle33, { className: "h-4 w-4 text-gray-600" }),
            /* @__PURE__ */ jsx256("span", { className: "text-sm font-medium text-gray-700", children: t2("subscription.status") })
          ] }),
          /* @__PURE__ */ jsx256("p", { className: "text-base font-semibold text-gray-900 capitalize", children: subscriptionData.subscription.status || t2("subscription.active") }),
          /* @__PURE__ */ jsx256("p", { className: "text-xs text-gray-600", children: subscriptionData.subscription.cancelAtPeriodEnd ? t2("subscription.cancelsAtPeriodEnd") : t2("subscription.autoRenewalEnabled") })
        ] })
      ] }),
      subscriptionData.isExpiringSoon && /* @__PURE__ */ jsx256("div", { className: "mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg", children: /* @__PURE__ */ jsxs231("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx256(AlertTriangle21, { className: "h-5 w-5 text-yellow-600" }),
        /* @__PURE__ */ jsxs231("p", { className: "text-sm text-yellow-800", children: [
          t2("subscription.expiresIn"),
          " ",
          subscriptionData.daysUntilExpiry,
          " ",
          t2("subscription.daysRemaining"),
          ".",
          t2("subscription.considerRenewing")
        ] })
      ] }) }),
      /* @__PURE__ */ jsx256("div", { className: "mt-6 pt-4 border-t border-gray-200", children: /* @__PURE__ */ jsx256("p", { className: "text-sm text-gray-600 text-center", children: currentUserRole === "OUTLET_ADMIN" ? t2("subscription.contactMerchant") : t2("subscription.comingSoon") }) })
    ] }) }) });
  }
  return /* @__PURE__ */ jsx256("div", { className: "space-y-6", children: /* @__PURE__ */ jsx256(Card64, { children: /* @__PURE__ */ jsx256(CardContent63, { className: "p-6", children: /* @__PURE__ */ jsxs231("div", { className: "text-center py-8", children: [
    /* @__PURE__ */ jsx256(CreditCard21, { className: "mx-auto h-12 w-12 text-gray-400 mb-4" }),
    /* @__PURE__ */ jsx256("h3", { className: "text-base font-semibold text-gray-900 mb-2", children: t2("subscription.noSubscription") }),
    /* @__PURE__ */ jsx256("p", { className: "text-sm text-gray-600 mb-6", children: t2("subscription.noSubscriptionDesc") }),
    (currentUserRole === "ADMIN" || currentUserRole === "MERCHANT") && /* @__PURE__ */ jsx256(Button69, { children: t2("subscription.viewInvoices") }),
    currentUserRole === "OUTLET_ADMIN" && /* @__PURE__ */ jsx256("p", { className: "text-sm text-gray-600", children: t2("subscription.contactAdmin") })
  ] }) }) }) });
};

// src/components/features/Settings/components/AccountSection.tsx
import {
  Card as Card65,
  CardContent as CardContent64,
  Button as Button70,
  Separator as Separator6
} from "@rentalshop/ui";
import { LogOut, Trash2 as Trash218, Key as Key2 } from "lucide-react";
import { useSettingsTranslations as useSettingsTranslations5 } from "@rentalshop/hooks";
import { jsx as jsx257, jsxs as jsxs232 } from "react/jsx-runtime";
var AccountSection = ({
  onSignOut,
  onDeleteAccount,
  onChangePassword,
  isDeleting
}) => {
  const t2 = useSettingsTranslations5();
  return /* @__PURE__ */ jsx257("div", { className: "space-y-6", children: /* @__PURE__ */ jsx257(Card65, { children: /* @__PURE__ */ jsx257(CardContent64, { className: "p-6", children: /* @__PURE__ */ jsxs232("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs232("div", { className: "flex items-center justify-between p-4 bg-gray-50 rounded-lg", children: [
      /* @__PURE__ */ jsxs232("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx257(Key2, { className: "h-5 w-5 text-gray-600" }),
        /* @__PURE__ */ jsxs232("div", { children: [
          /* @__PURE__ */ jsx257("h3", { className: "text-base font-semibold text-gray-900", children: t2("account.changePasswordTitle") }),
          /* @__PURE__ */ jsx257("p", { className: "text-sm text-gray-600", children: t2("account.changePasswordDesc") })
        ] })
      ] }),
      /* @__PURE__ */ jsx257(
        Button70,
        {
          variant: "outline",
          onClick: onChangePassword,
          children: t2("account.changePasswordButton")
        }
      )
    ] }),
    /* @__PURE__ */ jsx257(Separator6, {}),
    /* @__PURE__ */ jsxs232("div", { className: "flex items-center justify-between p-4 bg-gray-50 rounded-lg", children: [
      /* @__PURE__ */ jsxs232("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx257(LogOut, { className: "h-5 w-5 text-gray-600" }),
        /* @__PURE__ */ jsxs232("div", { children: [
          /* @__PURE__ */ jsx257("h3", { className: "text-base font-semibold text-gray-900", children: t2("account.sessionTitle") }),
          /* @__PURE__ */ jsx257("p", { className: "text-sm text-gray-600", children: t2("account.sessionDesc") })
        ] })
      ] }),
      /* @__PURE__ */ jsx257(
        Button70,
        {
          variant: "outline",
          onClick: onSignOut,
          className: "text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",
          children: t2("account.signOut")
        }
      )
    ] }),
    /* @__PURE__ */ jsx257(Separator6, {}),
    /* @__PURE__ */ jsxs232("div", { className: "flex items-center justify-between p-4 bg-red-50 rounded-lg", children: [
      /* @__PURE__ */ jsxs232("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx257(Trash218, { className: "h-5 w-5 text-red-600" }),
        /* @__PURE__ */ jsxs232("div", { children: [
          /* @__PURE__ */ jsx257("h3", { className: "text-base font-semibold text-red-900", children: t2("account.deleteAccountTitle") }),
          /* @__PURE__ */ jsx257("p", { className: "text-sm text-red-700", children: t2("account.deleteAccountDesc") })
        ] })
      ] }),
      /* @__PURE__ */ jsx257(
        Button70,
        {
          variant: "destructive",
          onClick: onDeleteAccount,
          disabled: isDeleting,
          children: isDeleting ? t2("account.deleting") : t2("account.deleteAccount")
        }
      )
    ] })
  ] }) }) }) });
};

// src/components/features/Settings/components/LanguageSection.tsx
import { useState as useState85, useTransition as useTransition2 } from "react";
import { Languages, Check as Check8 } from "lucide-react";
import { useRouter as useRouter7 } from "next/navigation";
import { useSettingsTranslations as useSettingsTranslations6 } from "@rentalshop/hooks";
import { jsx as jsx258, jsxs as jsxs233 } from "react/jsx-runtime";
var languages = [
  { value: "en", label: "English", flag: "\u{1F1FA}\u{1F1F8}" },
  { value: "vi", label: "Ti\u1EBFng Vi\u1EC7t", flag: "\u{1F1FB}\u{1F1F3}" }
];
function LanguageSection() {
  const t2 = useSettingsTranslations6();
  const currentLocale = Z();
  const router = useRouter7();
  const [isPending, startTransition] = useTransition2();
  const [selectedLanguage, setSelectedLanguage] = useState85(currentLocale);
  const handleLanguageChange = (newLocale) => {
    setSelectedLanguage(newLocale);
    startTransition(() => {
      if (typeof window !== "undefined") {
        localStorage.setItem("user_language_preference", newLocale);
        document.cookie = `NEXT_LOCALE=${newLocale};path=/;max-age=31536000;SameSite=Lax`;
      }
      router.refresh();
    });
  };
  const currentLanguage = languages.find((lang) => lang.value === currentLocale);
  return /* @__PURE__ */ jsxs233(Card, { children: [
    /* @__PURE__ */ jsxs233(CardHeader, { children: [
      /* @__PURE__ */ jsxs233("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx258(Languages, { className: "h-5 w-5 text-action-primary" }),
        /* @__PURE__ */ jsx258(CardTitle, { children: t2("language.title") })
      ] }),
      /* @__PURE__ */ jsx258(CardDescription, { children: t2("language.subtitle") })
    ] }),
    /* @__PURE__ */ jsxs233(CardContent, { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs233("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx258("label", { className: "text-sm font-medium text-text-primary", children: t2("language.currentLanguage") }),
        /* @__PURE__ */ jsxs233("div", { className: "flex items-center gap-2 px-3 py-2 bg-bg-secondary rounded-lg", children: [
          /* @__PURE__ */ jsx258("span", { className: "text-2xl", children: currentLanguage?.flag }),
          /* @__PURE__ */ jsx258("span", { className: "text-text-primary font-medium", children: currentLanguage?.label }),
          /* @__PURE__ */ jsx258(Check8, { className: "h-4 w-4 text-action-success ml-auto" })
        ] })
      ] }),
      /* @__PURE__ */ jsxs233("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx258("label", { className: "text-sm font-medium text-text-primary", children: t2("language.selectLanguage") }),
        /* @__PURE__ */ jsxs233(
          Select,
          {
            value: selectedLanguage,
            onValueChange: handleLanguageChange,
            disabled: isPending,
            children: [
              /* @__PURE__ */ jsx258(SelectTrigger, { className: "w-full", children: /* @__PURE__ */ jsx258(SelectValue, { placeholder: t2("language.selectALanguage") }) }),
              /* @__PURE__ */ jsx258(SelectContent, { children: languages.map((language) => /* @__PURE__ */ jsx258(SelectItem, { value: language.value, children: /* @__PURE__ */ jsxs233("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ jsx258("span", { className: "text-xl", children: language.flag }),
                /* @__PURE__ */ jsx258("span", { children: language.label }),
                language.value === currentLocale && /* @__PURE__ */ jsx258(Check8, { className: "h-4 w-4 text-action-success ml-2" })
              ] }) }, language.value)) })
            ]
          }
        )
      ] }),
      isPending && /* @__PURE__ */ jsxs233("div", { className: "flex items-center gap-2 text-sm text-text-secondary", children: [
        /* @__PURE__ */ jsx258("div", { className: "h-4 w-4 border-2 border-action-primary border-t-transparent rounded-full animate-spin" }),
        /* @__PURE__ */ jsx258("span", { children: t2("language.applyingChanges") })
      ] }),
      /* @__PURE__ */ jsx258("div", { className: "pt-4 border-t border-border", children: /* @__PURE__ */ jsxs233("p", { className: "text-sm text-text-secondary", children: [
        "\u2139\uFE0F ",
        t2("language.languagePreferenceSaved")
      ] }) })
    ] })
  ] });
}

// src/components/features/Settings/components/ChangePasswordDialog.tsx
import { useState as useState86 } from "react";
import {
  Button as Button71,
  Input as Input34,
  Label as Label20
} from "@rentalshop/ui";
import { Eye as Eye30, EyeOff as EyeOff9 } from "lucide-react";
import { useSettingsTranslations as useSettingsTranslations7 } from "@rentalshop/hooks";
import { jsx as jsx259, jsxs as jsxs234 } from "react/jsx-runtime";
var ChangePasswordDialog2 = ({
  isOpen,
  isChanging,
  passwordData,
  onClose,
  onChange,
  onSubmit
}) => {
  const t2 = useSettingsTranslations7();
  const [showCurrentPassword, setShowCurrentPassword] = useState86(false);
  const [showNewPassword, setShowNewPassword] = useState86(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState86(false);
  if (!isOpen)
    return null;
  return /* @__PURE__ */ jsx259("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50", children: /* @__PURE__ */ jsxs234("div", { className: "bg-white rounded-lg p-6 max-w-md w-full mx-4", children: [
    /* @__PURE__ */ jsxs234("div", { className: "flex items-center justify-between mb-4", children: [
      /* @__PURE__ */ jsx259("h3", { className: "text-lg font-medium text-gray-900", children: t2("changePassword.title") }),
      /* @__PURE__ */ jsx259(
        Button71,
        {
          variant: "ghost",
          size: "icon",
          onClick: onClose,
          className: "text-gray-400 hover:text-gray-600 h-8 w-8 p-0",
          children: /* @__PURE__ */ jsx259("svg", { className: "w-6 h-6", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx259("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M6 18L18 6M6 6l12 12" }) })
        }
      )
    ] }),
    /* @__PURE__ */ jsxs234("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs234("div", { children: [
        /* @__PURE__ */ jsx259(Label20, { htmlFor: "currentPassword", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("changePassword.currentPassword") }),
        /* @__PURE__ */ jsxs234("div", { className: "relative", children: [
          /* @__PURE__ */ jsx259(
            Input34,
            {
              id: "currentPassword",
              name: "currentPassword",
              type: showCurrentPassword ? "text" : "password",
              value: passwordData.currentPassword,
              onChange,
              placeholder: t2("changePassword.currentPasswordPlaceholder"),
              className: "pr-10"
            }
          ),
          /* @__PURE__ */ jsx259(
            "button",
            {
              type: "button",
              onClick: () => setShowCurrentPassword(!showCurrentPassword),
              className: "absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",
              children: showCurrentPassword ? /* @__PURE__ */ jsx259(EyeOff9, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx259(Eye30, { className: "h-4 w-4" })
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs234("div", { children: [
        /* @__PURE__ */ jsx259(Label20, { htmlFor: "newPassword", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("changePassword.newPassword") }),
        /* @__PURE__ */ jsxs234("div", { className: "relative", children: [
          /* @__PURE__ */ jsx259(
            Input34,
            {
              id: "newPassword",
              name: "newPassword",
              type: showNewPassword ? "text" : "password",
              value: passwordData.newPassword,
              onChange,
              placeholder: t2("changePassword.newPasswordPlaceholder"),
              className: "pr-10"
            }
          ),
          /* @__PURE__ */ jsx259(
            "button",
            {
              type: "button",
              onClick: () => setShowNewPassword(!showNewPassword),
              className: "absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",
              children: showNewPassword ? /* @__PURE__ */ jsx259(EyeOff9, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx259(Eye30, { className: "h-4 w-4" })
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs234("div", { children: [
        /* @__PURE__ */ jsx259(Label20, { htmlFor: "confirmPassword", className: "block text-sm font-medium text-gray-700 mb-2", children: t2("changePassword.confirmPassword") }),
        /* @__PURE__ */ jsxs234("div", { className: "relative", children: [
          /* @__PURE__ */ jsx259(
            Input34,
            {
              id: "confirmPassword",
              name: "confirmPassword",
              type: showConfirmPassword ? "text" : "password",
              value: passwordData.confirmPassword,
              onChange,
              placeholder: t2("changePassword.confirmPasswordPlaceholder"),
              className: "pr-10"
            }
          ),
          /* @__PURE__ */ jsx259(
            "button",
            {
              type: "button",
              onClick: () => setShowConfirmPassword(!showConfirmPassword),
              className: "absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",
              children: showConfirmPassword ? /* @__PURE__ */ jsx259(EyeOff9, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx259(Eye30, { className: "h-4 w-4" })
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs234("div", { className: "flex justify-end space-x-3 mt-6", children: [
      /* @__PURE__ */ jsx259(
        Button71,
        {
          variant: "outline",
          onClick: onClose,
          disabled: isChanging,
          children: t2("changePassword.cancel")
        }
      ),
      /* @__PURE__ */ jsx259(
        Button71,
        {
          onClick: onSubmit,
          disabled: isChanging,
          children: isChanging ? t2("changePassword.changing") : t2("changePassword.changePassword")
        }
      )
    ] })
  ] }) });
};

// src/components/features/Settings/components/DeleteAccountDialog.tsx
import { Button as Button72 } from "@rentalshop/ui";
import { useSettingsTranslations as useSettingsTranslations8 } from "@rentalshop/hooks";
import { jsx as jsx260, jsxs as jsxs235 } from "react/jsx-runtime";
var DeleteAccountDialog = ({
  isOpen,
  isDeleting,
  onClose,
  onConfirm
}) => {
  const t2 = useSettingsTranslations8();
  if (!isOpen)
    return null;
  return /* @__PURE__ */ jsx260("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50", children: /* @__PURE__ */ jsxs235("div", { className: "bg-white rounded-lg p-6 max-w-md w-full mx-4", children: [
    /* @__PURE__ */ jsxs235("div", { className: "flex items-center mb-4", children: [
      /* @__PURE__ */ jsx260("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx260("svg", { className: "h-6 w-6 text-red-600", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx260("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" }) }) }),
      /* @__PURE__ */ jsx260("div", { className: "ml-3", children: /* @__PURE__ */ jsx260("h3", { className: "text-lg font-medium text-gray-900", children: t2("deleteAccountDialog.title") }) })
    ] }),
    /* @__PURE__ */ jsxs235("div", { className: "mb-6", children: [
      /* @__PURE__ */ jsx260("p", { className: "text-sm text-gray-600", children: t2("deleteAccountDialog.description") }),
      /* @__PURE__ */ jsxs235("ul", { className: "mt-3 text-sm text-gray-600 list-disc list-inside space-y-1", children: [
        /* @__PURE__ */ jsx260("li", { children: t2("deleteAccountDialog.profileInfo") }),
        /* @__PURE__ */ jsx260("li", { children: t2("deleteAccountDialog.orderHistory") }),
        /* @__PURE__ */ jsx260("li", { children: t2("deleteAccountDialog.productListings") }),
        /* @__PURE__ */ jsx260("li", { children: t2("deleteAccountDialog.savedPreferences") })
      ] }),
      /* @__PURE__ */ jsx260("p", { className: "mt-3 text-sm text-gray-600", children: /* @__PURE__ */ jsx260("strong", { children: t2("deleteAccountDialog.irreversibleWarning") }) })
    ] }),
    /* @__PURE__ */ jsxs235("div", { className: "flex justify-end space-x-3", children: [
      /* @__PURE__ */ jsx260(
        Button72,
        {
          variant: "outline",
          onClick: onClose,
          disabled: isDeleting,
          children: t2("deleteAccountDialog.cancel")
        }
      ),
      /* @__PURE__ */ jsx260(
        Button72,
        {
          variant: "destructive",
          onClick: onConfirm,
          disabled: isDeleting,
          children: isDeleting ? t2("deleteAccountDialog.deleting") : t2("deleteAccountDialog.deleteAccount")
        }
      )
    ] })
  ] }) });
};

// src/components/features/Settings/Settings.tsx
import { Fragment as Fragment51, jsx as jsx261, jsxs as jsxs236 } from "react/jsx-runtime";
var createSettingsMenuItems = (t2) => [
  {
    id: "profile",
    label: t2("menuItems.profile.label"),
    icon: User23,
    description: t2("menuItems.profile.description")
  },
  {
    id: "merchant",
    label: t2("menuItems.merchant.label"),
    icon: Building215,
    description: t2("menuItems.merchant.description"),
    roles: ["MERCHANT"]
  },
  {
    id: "outlet",
    label: t2("menuItems.outlet.label"),
    icon: Store6,
    description: t2("menuItems.outlet.description"),
    roles: ["OUTLET_ADMIN", "OUTLET_STAFF"]
  },
  {
    id: "subscription",
    label: t2("menuItems.subscription.label"),
    icon: CreditCard22,
    description: t2("menuItems.subscription.description"),
    roles: ["ADMIN", "MERCHANT", "OUTLET_ADMIN"]
    // ADMIN, MERCHANT, and OUTLET_ADMIN can access subscription
  },
  {
    id: "language",
    label: t2("menuItems.language.label"),
    icon: Languages2,
    description: t2("menuItems.language.description")
  },
  {
    id: "account",
    label: t2("menuItems.account.label"),
    icon: SettingsIcon,
    description: t2("menuItems.account.description")
  }
];
var SettingsComponent = () => {
  const t2 = useSettingsTranslations9();
  const { user, logout, loading } = useAuth2();
  const { toastSuccess, toastError } = useToast10();
  const { currency, setCurrency } = useCurrency2();
  const router = useRouter8();
  const searchParams = useSearchParams();
  const tabFromUrl = searchParams.get("tab") || "profile";
  const [activeSection, setActiveSection] = useState87(tabFromUrl);
  const [isEditingPersonal, setIsEditingPersonal] = useState87(false);
  const [isEditingMerchant, setIsEditingMerchant] = useState87(false);
  const [isEditingOutlet, setIsEditingOutlet] = useState87(false);
  const [isUpdating, setIsUpdating] = useState87(false);
  const [personalFormData, setPersonalFormData] = useState87({
    firstName: user?.firstName || "",
    lastName: user?.lastName || "",
    phone: user?.phone || ""
  });
  const [merchantFormData, setMerchantFormData] = useState87({
    name: "",
    phone: "",
    address: "",
    city: "",
    state: "",
    zipCode: "",
    country: "",
    businessType: "",
    pricingType: "",
    taxId: ""
  });
  const [outletFormData, setOutletFormData] = useState87({
    name: "",
    phone: "",
    address: "",
    description: ""
  });
  const [showChangePassword, setShowChangePassword] = useState87(false);
  const [isChangingPassword, setIsChangingPassword] = useState87(false);
  const [passwordData, setPasswordData] = useState87({
    currentPassword: "",
    newPassword: "",
    confirmPassword: ""
  });
  const [showDeleteConfirm, setShowDeleteConfirm] = useState87(false);
  const [isDeleting, setIsDeleting] = useState87(false);
  const [subscriptionData, setSubscriptionData] = useState87(null);
  const [subscriptionLoading, setSubscriptionLoading] = useState87(true);
  useEffect45(() => {
    const tabFromUrl2 = searchParams.get("tab") || "profile";
    if (tabFromUrl2 !== activeSection) {
      setActiveSection(tabFromUrl2);
    }
  }, [searchParams]);
  const handleSectionChange = (section) => {
    setActiveSection(section);
    router.push(`/settings?tab=${section}`);
  };
  useEffect45(() => {
    if (user) {
      setPersonalFormData({
        firstName: user.firstName || "",
        lastName: user.lastName || "",
        phone: user.phone || ""
      });
    }
  }, [user]);
  useEffect45(() => {
    const fetchSubscriptionData = async () => {
      try {
        setSubscriptionLoading(true);
        const response = await subscriptionsApi2.getCurrentUserSubscriptionStatus();
        console.log("\u{1F50D} Settings - Subscription API response:", response);
        if (response.success && response.data) {
          const data = response.data;
          const transformedData = {
            hasSubscription: true,
            subscription: {
              // Core subscription info (already flat in response)
              id: data.subscriptionId,
              status: data.status,
              planName: data.planName,
              currentPeriodStart: data.currentPeriodStart,
              currentPeriodEnd: data.currentPeriodEnd,
              // Billing info (already flat)
              amount: data.billingAmount,
              currency: data.billingCurrency,
              interval: data.billingInterval,
              // Trial info
              trialStart: data.trialStart,
              trialEnd: data.trialEnd,
              // Cancellation info
              cancelAtPeriodEnd: data.cancelAtPeriodEnd,
              canceledAt: data.canceledAt,
              cancelReason: data.cancelReason,
              // Plan details
              plan: {
                id: data.planId,
                name: data.planName,
                description: data.planDescription,
                basePrice: data.planPrice,
                currency: data.planCurrency
              }
            },
            // Status flags (derived from computed status)
            status: data.status,
            statusReason: data.statusReason,
            isActive: data.status === "ACTIVE",
            isExpired: data.status === "EXPIRED",
            isTrial: data.status === "TRIAL",
            isCanceled: data.status === "CANCELED",
            hasAccess: data.hasAccess,
            isExpiringSoon: data.isExpiringSoon,
            daysRemaining: data.daysRemaining,
            // Merchant info
            merchant: {
              id: data.merchantId,
              name: data.merchantName,
              email: data.merchantEmail
            },
            // Limits & usage
            limits: data.limits,
            usage: data.usage,
            // Features
            features: data.features
          };
          console.log("\u2705 Settings - Mapped subscription data:", transformedData);
          setSubscriptionData(transformedData);
        } else {
          console.log("\u274C Settings - No subscription data:", response);
          setSubscriptionData(null);
        }
      } catch (error2) {
        console.error("Error fetching subscription data:", error2);
        setSubscriptionData(null);
      } finally {
        setSubscriptionLoading(false);
      }
    };
    fetchSubscriptionData();
  }, []);
  useEffect45(() => {
    if (user?.merchant && user?.role === "MERCHANT") {
      setMerchantFormData({
        name: user.merchant.name || "",
        phone: user.merchant.phone || "",
        address: user.merchant.address || "",
        city: user.merchant.city || "",
        state: user.merchant.state || "",
        zipCode: user.merchant.zipCode || "",
        country: user.merchant.country || "",
        businessType: user.merchant.businessType || "",
        pricingType: user.merchant.pricingType || "",
        taxId: user.merchant.taxId || ""
      });
    }
    if (user?.outlet && (user?.role === "OUTLET_ADMIN" || user?.role === "OUTLET_STAFF")) {
      setOutletFormData({
        name: user.outlet.name || "",
        phone: user.outlet.phone || "",
        address: user.outlet.address || "",
        description: user.outlet.description || ""
      });
    }
  }, [user]);
  const settingsMenuItems = createSettingsMenuItems(t2);
  const filteredMenuItems = settingsMenuItems.filter((item) => {
    if (item.roles) {
      return item.roles.includes(user?.role || "");
    }
    return true;
  });
  const handlePersonalInputChange = (e2) => {
    const { name, value } = e2.target;
    setPersonalFormData((prev) => ({ ...prev, [name]: value }));
  };
  const handleMerchantInputChange = (e2) => {
    const { name, value } = e2.target;
    setMerchantFormData((prev) => ({ ...prev, [name]: value }));
  };
  const handleOutletInputChange = (e2) => {
    const { name, value } = e2.target;
    setOutletFormData((prev) => ({ ...prev, [name]: value }));
  };
  const handlePasswordChange = (e2) => {
    const { name, value } = e2.target;
    setPasswordData((prev) => ({ ...prev, [name]: value }));
  };
  const handleEditPersonalProfile = () => setIsEditingPersonal(true);
  const handleUpdatePersonalProfile = async () => {
    try {
      setIsUpdating(true);
      const response = await settingsApi.updateUserProfile(personalFormData);
      if (response.success) {
        const storedAuth = localStorage.getItem("authData");
        if (storedAuth) {
          const authData = JSON.parse(storedAuth);
          if (authData.user) {
            authData.user.firstName = personalFormData.firstName;
            authData.user.lastName = personalFormData.lastName;
            authData.user.phone = personalFormData.phone;
            authData.user.name = `${personalFormData.firstName} ${personalFormData.lastName}`;
            localStorage.setItem("authData", JSON.stringify(authData));
            console.log("\u2705 Updated user personal data in localStorage");
            if (user) {
              user.firstName = personalFormData.firstName;
              user.lastName = personalFormData.lastName;
              user.phone = personalFormData.phone;
              user.name = `${personalFormData.firstName} ${personalFormData.lastName}`;
              console.log("\u2705 Updated user personal data in memory");
            }
          }
        }
        setIsEditingPersonal(false);
        toastSuccess("Success", t2("messages.personalProfileUpdated"));
      } else {
        toastError("Error", response.error || t2("messages.personalProfileUpdateFailed"));
      }
    } catch (error2) {
      toastError("Error", t2("messages.personalProfileUpdateFailed"));
    } finally {
      setIsUpdating(false);
    }
  };
  const handleCancelPersonal = () => setIsEditingPersonal(false);
  const handleEditMerchantInfo = () => setIsEditingMerchant(true);
  const handleUpdateMerchantInfo = async () => {
    try {
      console.log("\u{1F527} handleUpdateMerchantInfo called");
      console.log("\u{1F527} merchantFormData:", merchantFormData);
      setIsUpdating(true);
      const response = await settingsApi.updateMerchantInfo(merchantFormData);
      console.log("\u{1F527} API response:", response);
      if (response.success) {
        console.log("\u{1F527} API success, updating localStorage...");
        const storedAuth = localStorage.getItem("authData");
        console.log("\u{1F527} storedAuth before update:", storedAuth ? "exists" : "null");
        if (storedAuth) {
          const authData = JSON.parse(storedAuth);
          console.log("\u{1F527} authData.user.merchant before:", authData.user?.merchant);
          if (authData.user && authData.user.merchant) {
            authData.user.merchant.country = merchantFormData.country;
            console.log("\u{1F527} Updated country in authData.user.merchant:", authData.user.merchant.country);
            localStorage.setItem("authData", JSON.stringify(authData));
            console.log("\u2705 Updated merchant country in localStorage:", authData.user.merchant.country);
            if (user && user.merchant) {
              user.merchant.country = merchantFormData.country;
              console.log("\u2705 Updated merchant country in memory:", user.merchant.country);
            }
          } else {
            console.log("\u274C authData.user.merchant is null/undefined");
          }
        } else {
          console.log("\u274C No authData found in localStorage");
        }
        setIsEditingMerchant(false);
        toastSuccess("Success", t2("messages.businessInfoUpdated"));
      } else {
        console.log("\u274C API failed:", response.error);
        toastError("Error", response.error || t2("messages.businessInfoUpdateFailed"));
      }
    } catch (error2) {
      console.error("\u274C Error in handleUpdateMerchantInfo:", error2);
      toastError("Error", t2("messages.businessInfoUpdateFailed"));
    } finally {
      setIsUpdating(false);
    }
  };
  const handleCancelMerchant = () => setIsEditingMerchant(false);
  const handleEditOutletInfo = () => setIsEditingOutlet(true);
  const handleUpdateOutletInfo = async () => {
    try {
      setIsUpdating(true);
      const response = await settingsApi.updateOutletInfo(outletFormData);
      if (response.success) {
        setIsEditingOutlet(false);
        toastSuccess("Success", t2("messages.outletInfoUpdated"));
      } else {
        toastError("Error", response.error || t2("messages.outletInfoUpdateFailed"));
      }
    } catch (error2) {
      toastError("Error", t2("messages.outletInfoUpdateFailed"));
    } finally {
      setIsUpdating(false);
    }
  };
  const handleCancelOutlet = () => setIsEditingOutlet(false);
  const handleSignOut = async () => {
    try {
      await logout();
    } catch (error2) {
      console.error("Error signing out:", error2);
    }
  };
  const handleDeleteAccount = async () => {
    try {
      setIsDeleting(true);
      if (!user?.id) {
        throw new Error("User ID not found");
      }
      const response = await usersApi2.deleteUser(user.id);
      if (response.success) {
        toastSuccess("Account Deleted", t2("messages.accountDeleted"));
        await logout();
      } else {
        toastError("Delete Failed", response.message || t2("messages.accountDeleteFailed"));
      }
    } catch (error2) {
      toastError("Delete Failed", t2("messages.accountDeleteFailed"));
    } finally {
      setIsDeleting(false);
      setShowDeleteConfirm(false);
    }
  };
  const handleChangePassword = async () => {
    try {
      setIsChangingPassword(true);
      if (passwordData.newPassword !== passwordData.confirmPassword) {
        throw new Error(t2("messages.passwordMismatch"));
      }
      if (passwordData.newPassword.length < 6) {
        throw new Error(t2("messages.passwordTooShort"));
      }
      const response = await authApi2.changePassword(passwordData.currentPassword, passwordData.newPassword);
      if (response.success) {
        setShowChangePassword(false);
        setPasswordData({ currentPassword: "", newPassword: "", confirmPassword: "" });
        toastSuccess("Password Changed", t2("messages.passwordChanged"));
      } else {
        throw new Error(response.message || t2("messages.passwordChangeFailed"));
      }
    } catch (error2) {
      toastError("Password Change Failed", error2 instanceof Error ? error2.message : t2("messages.passwordChangeFailed"));
    } finally {
      setIsChangingPassword(false);
    }
  };
  const handleCurrencyChange = async (newCurrency) => {
    try {
      setIsUpdating(true);
      const response = await settingsApi.updateMerchantCurrency({ currency: newCurrency });
      if (response.success) {
        setCurrency(newCurrency);
        const storedAuth = localStorage.getItem("authData");
        if (storedAuth) {
          const authData = JSON.parse(storedAuth);
          if (authData.user && authData.user.merchant) {
            authData.user.merchant.currency = newCurrency;
            localStorage.setItem("authData", JSON.stringify(authData));
          }
        }
        toastSuccess("Success", t2("messages.currencyUpdated"));
      } else {
        toastError("Error", response.error || t2("messages.currencyUpdateFailed"));
      }
    } catch (error2) {
      toastError("Error", t2("messages.currencyUpdateFailed"));
    } finally {
      setIsUpdating(false);
    }
  };
  const renderActiveSection = () => {
    switch (activeSection) {
      case "profile":
        return /* @__PURE__ */ jsx261(
          ProfileSection,
          {
            user,
            isEditing: isEditingPersonal,
            isUpdating,
            formData: personalFormData,
            onEdit: handleEditPersonalProfile,
            onSave: handleUpdatePersonalProfile,
            onCancel: handleCancelPersonal,
            onInputChange: handlePersonalInputChange
          }
        );
      case "merchant":
        return /* @__PURE__ */ jsx261(
          MerchantSection,
          {
            user,
            isEditing: isEditingMerchant,
            isUpdating,
            formData: merchantFormData,
            currentCurrency: currency,
            onEdit: handleEditMerchantInfo,
            onSave: handleUpdateMerchantInfo,
            onCancel: handleCancelMerchant,
            onInputChange: handleMerchantInputChange,
            onCurrencyChange: handleCurrencyChange
          }
        );
      case "outlet":
        return /* @__PURE__ */ jsx261(
          OutletSection,
          {
            user,
            isEditing: isEditingOutlet,
            isUpdating,
            formData: outletFormData,
            onEdit: handleEditOutletInfo,
            onSave: handleUpdateOutletInfo,
            onCancel: handleCancelOutlet,
            onInputChange: handleOutletInputChange
          }
        );
      case "subscription":
        return /* @__PURE__ */ jsx261(
          SubscriptionSection,
          {
            subscriptionData,
            subscriptionLoading,
            currentUserRole: user?.role
          }
        );
      case "language":
        return /* @__PURE__ */ jsx261(LanguageSection, {});
      case "account":
        return /* @__PURE__ */ jsx261(
          AccountSection,
          {
            onSignOut: handleSignOut,
            onDeleteAccount: () => setShowDeleteConfirm(true),
            onChangePassword: () => setShowChangePassword(true),
            isDeleting
          }
        );
      default:
        return /* @__PURE__ */ jsx261(
          ProfileSection,
          {
            user,
            isEditing: isEditingPersonal,
            isUpdating,
            formData: personalFormData,
            onEdit: handleEditPersonalProfile,
            onSave: handleUpdatePersonalProfile,
            onCancel: handleCancelPersonal,
            onInputChange: handlePersonalInputChange
          }
        );
    }
  };
  return /* @__PURE__ */ jsxs236(Fragment51, { children: [
    /* @__PURE__ */ jsx261(
      SettingsLayout2,
      {
        user,
        loading,
        menuItems: filteredMenuItems,
        activeSection,
        onSectionChange: handleSectionChange,
        children: renderActiveSection()
      }
    ),
    /* @__PURE__ */ jsx261(
      ChangePasswordDialog2,
      {
        isOpen: showChangePassword,
        isChanging: isChangingPassword,
        passwordData,
        onClose: () => setShowChangePassword(false),
        onChange: handlePasswordChange,
        onSubmit: handleChangePassword
      }
    ),
    /* @__PURE__ */ jsx261(
      DeleteAccountDialog,
      {
        isOpen: showDeleteConfirm,
        isDeleting,
        onClose: () => setShowDeleteConfirm(false),
        onConfirm: handleDeleteAccount
      }
    )
  ] });
};
var Settings_default = SettingsComponent;

// src/components/features/Settings/components/SecuritySection.tsx
import {
  Card as Card66,
  CardContent as CardContent65,
  Button as Button73
} from "@rentalshop/ui";
import { Shield as Shield8 } from "lucide-react";
import { jsx as jsx262, jsxs as jsxs237 } from "react/jsx-runtime";
var SecuritySection = ({
  onChangePassword
}) => {
  return /* @__PURE__ */ jsxs237("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs237("div", { children: [
      /* @__PURE__ */ jsx262("h2", { className: "text-2xl font-bold text-gray-900", children: "Security" }),
      /* @__PURE__ */ jsx262("p", { className: "text-gray-600", children: "Manage your password and account security settings" })
    ] }),
    /* @__PURE__ */ jsx262(Card66, { children: /* @__PURE__ */ jsx262(CardContent65, { className: "p-6", children: /* @__PURE__ */ jsx262("div", { className: "space-y-6", children: /* @__PURE__ */ jsxs237("div", { className: "flex items-center justify-between p-4 bg-gray-50 rounded-lg", children: [
      /* @__PURE__ */ jsxs237("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx262(Shield8, { className: "h-5 w-5 text-gray-600" }),
        /* @__PURE__ */ jsxs237("div", { children: [
          /* @__PURE__ */ jsx262("h3", { className: "font-medium text-gray-900", children: "Password" }),
          /* @__PURE__ */ jsx262("p", { className: "text-sm text-gray-600", children: "Change your password to keep your account secure" })
        ] })
      ] }),
      /* @__PURE__ */ jsx262(
        Button73,
        {
          variant: "outline",
          onClick: onChangePassword,
          children: "Change Password"
        }
      )
    ] }) }) }) })
  ] });
};

// src/components/features/Settings/components/CurrencySection.tsx
import { useState as useState88, useEffect as useEffect46 } from "react";
import { DollarSign as DollarSign24, CheckCircle2 as CheckCircle211, AlertCircle as AlertCircle17 } from "lucide-react";
import { formatCurrency as formatCurrency21, getCurrency as getCurrency2 } from "@rentalshop/utils";
import {
  Card as Card67,
  CardContent as CardContent66,
  CardDescription as CardDescription6,
  CardHeader as CardHeader45,
  CardTitle as CardTitle42,
  Button as Button74,
  Badge as Badge33
} from "@rentalshop/ui";
import { jsx as jsx263, jsxs as jsxs238 } from "react/jsx-runtime";
var CURRENCY_OPTIONS = [
  { value: "USD", label: "$ USD - US Dollar", symbol: "$", name: "US Dollar" },
  { value: "VND", label: "\u0111 VND - Vietnamese Dong", symbol: "\u0111", name: "Vietnamese Dong" }
];
var CurrencySection = ({
  user,
  currentCurrency,
  isUpdating = false,
  onCurrencyChange
}) => {
  const [selectedCurrency, setSelectedCurrency] = useState88(currentCurrency);
  const [hasChanges, setHasChanges] = useState88(false);
  useEffect46(() => {
    setSelectedCurrency(currentCurrency);
    setHasChanges(false);
  }, [currentCurrency]);
  const handleSelect = (currency) => {
    setSelectedCurrency(currency);
    setHasChanges(currency !== currentCurrency);
  };
  const handleSave = async () => {
    if (!hasChanges)
      return;
    await onCurrencyChange(selectedCurrency);
    setHasChanges(false);
  };
  const handleCancel = () => {
    setSelectedCurrency(currentCurrency);
    setHasChanges(false);
  };
  return /* @__PURE__ */ jsxs238("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs238("div", { children: [
      /* @__PURE__ */ jsxs238("h2", { className: "text-2xl font-bold text-gray-900 flex items-center gap-2", children: [
        /* @__PURE__ */ jsx263(DollarSign24, { className: "h-6 w-6 text-blue-600" }),
        "Currency Settings"
      ] }),
      /* @__PURE__ */ jsx263("p", { className: "text-gray-600 mt-1", children: "Choose your preferred currency for displaying prices across your rental shop." })
    ] }),
    hasChanges && /* @__PURE__ */ jsxs238("div", { className: "flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg", children: [
      /* @__PURE__ */ jsx263(AlertCircle17, { className: "h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5" }),
      /* @__PURE__ */ jsxs238("div", { className: "flex-1", children: [
        /* @__PURE__ */ jsx263("p", { className: "text-sm font-medium text-yellow-900", children: "Unsaved Changes" }),
        /* @__PURE__ */ jsx263("p", { className: "text-sm text-yellow-700 mt-1", children: 'You have unsaved currency changes. Click "Save Changes" to apply them.' })
      ] })
    ] }),
    /* @__PURE__ */ jsxs238(Card67, { children: [
      /* @__PURE__ */ jsxs238(CardHeader45, { children: [
        /* @__PURE__ */ jsx263(CardTitle42, { className: "text-lg", children: "Current Currency" }),
        /* @__PURE__ */ jsx263(CardDescription6, { children: "Your currently active currency for all price displays" })
      ] }),
      /* @__PURE__ */ jsx263(CardContent66, { children: /* @__PURE__ */ jsxs238("div", { className: "flex items-center gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg", children: [
        /* @__PURE__ */ jsx263("div", { className: "text-3xl", children: getCurrency2(currentCurrency)?.symbol || "$" }),
        /* @__PURE__ */ jsxs238("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsx263("div", { className: "text-lg font-semibold text-gray-900", children: getCurrency2(currentCurrency)?.name || "US Dollar" }),
          /* @__PURE__ */ jsxs238("div", { className: "text-sm text-gray-600", children: [
            "Code: ",
            currentCurrency
          ] })
        ] }),
        selectedCurrency === currentCurrency && !hasChanges && /* @__PURE__ */ jsxs238(Badge33, { variant: "default", className: "bg-green-100 text-green-800", children: [
          /* @__PURE__ */ jsx263(CheckCircle211, { className: "h-3 w-3 mr-1" }),
          "Active"
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs238(Card67, { children: [
      /* @__PURE__ */ jsxs238(CardHeader45, { children: [
        /* @__PURE__ */ jsx263(CardTitle42, { className: "text-lg", children: "Select Currency" }),
        /* @__PURE__ */ jsx263(CardDescription6, { children: "Choose from our supported currencies" })
      ] }),
      /* @__PURE__ */ jsx263(CardContent66, { children: /* @__PURE__ */ jsx263("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: CURRENCY_OPTIONS.map((option) => {
        const config = getCurrency2(option.value);
        if (!config)
          return null;
        const isSelected = selectedCurrency === option.value;
        const isCurrent = currentCurrency === option.value;
        return /* @__PURE__ */ jsxs238(
          "button",
          {
            onClick: () => handleSelect(option.value),
            disabled: isUpdating,
            className: `
                    relative p-4 border-2 rounded-lg text-left transition-all
                    ${isSelected ? "border-blue-500 bg-blue-50 shadow-sm" : "border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"}
                    ${isUpdating ? "opacity-50 cursor-not-allowed" : "cursor-pointer"}
                  `,
            children: [
              /* @__PURE__ */ jsxs238("div", { className: "flex items-start justify-between", children: [
                /* @__PURE__ */ jsxs238("div", { className: "flex items-center gap-3", children: [
                  /* @__PURE__ */ jsx263("div", { className: "text-2xl", children: config.symbol }),
                  /* @__PURE__ */ jsxs238("div", { children: [
                    /* @__PURE__ */ jsx263("div", { className: "font-semibold text-gray-900", children: config.name }),
                    /* @__PURE__ */ jsx263("div", { className: "text-sm text-gray-600", children: option.value })
                  ] })
                ] }),
                isSelected && /* @__PURE__ */ jsx263(CheckCircle211, { className: "h-5 w-5 text-blue-600" })
              ] }),
              /* @__PURE__ */ jsxs238("div", { className: "mt-3 pt-3 border-t border-gray-200", children: [
                /* @__PURE__ */ jsx263("div", { className: "text-xs text-gray-500 mb-1", children: "Preview:" }),
                /* @__PURE__ */ jsxs238("div", { className: "space-y-1", children: [
                  /* @__PURE__ */ jsxs238("div", { className: "text-sm text-gray-700", children: [
                    /* @__PURE__ */ jsx263("span", { className: "text-gray-500", children: "Small: " }),
                    /* @__PURE__ */ jsx263("span", { className: "font-medium", children: formatCurrency21(10, option.value) })
                  ] }),
                  /* @__PURE__ */ jsxs238("div", { className: "text-sm text-gray-700", children: [
                    /* @__PURE__ */ jsx263("span", { className: "text-gray-500", children: "Medium: " }),
                    /* @__PURE__ */ jsx263("span", { className: "font-medium", children: formatCurrency21(1e3, option.value) })
                  ] }),
                  /* @__PURE__ */ jsxs238("div", { className: "text-sm text-gray-700", children: [
                    /* @__PURE__ */ jsx263("span", { className: "text-gray-500", children: "Large: " }),
                    /* @__PURE__ */ jsx263("span", { className: "font-medium", children: formatCurrency21(1e6, option.value) })
                  ] })
                ] })
              ] }),
              isCurrent && !hasChanges && /* @__PURE__ */ jsx263("div", { className: "absolute top-2 right-2", children: /* @__PURE__ */ jsx263(Badge33, { variant: "default", className: "bg-green-100 text-green-800 text-xs", children: "Current" }) })
            ]
          },
          option.value
        );
      }) }) })
    ] }),
    /* @__PURE__ */ jsxs238(Card67, { children: [
      /* @__PURE__ */ jsxs238(CardHeader45, { children: [
        /* @__PURE__ */ jsx263(CardTitle42, { className: "text-lg", children: "Currency Details" }),
        /* @__PURE__ */ jsxs238(CardDescription6, { children: [
          "Technical information about ",
          getCurrency2(selectedCurrency)?.name || "Selected Currency"
        ] })
      ] }),
      /* @__PURE__ */ jsx263(CardContent66, { children: /* @__PURE__ */ jsxs238("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs238("div", { children: [
          /* @__PURE__ */ jsx263("div", { className: "text-sm text-gray-500", children: "Symbol" }),
          /* @__PURE__ */ jsx263("div", { className: "text-lg font-semibold", children: getCurrency2(selectedCurrency)?.symbol || "$" })
        ] }),
        /* @__PURE__ */ jsxs238("div", { children: [
          /* @__PURE__ */ jsx263("div", { className: "text-sm text-gray-500", children: "Code" }),
          /* @__PURE__ */ jsx263("div", { className: "text-lg font-semibold", children: selectedCurrency })
        ] }),
        /* @__PURE__ */ jsxs238("div", { children: [
          /* @__PURE__ */ jsx263("div", { className: "text-sm text-gray-500", children: "Decimal Places" }),
          /* @__PURE__ */ jsx263("div", { className: "text-lg font-semibold", children: getCurrency2(selectedCurrency)?.maxFractionDigits || 2 })
        ] }),
        /* @__PURE__ */ jsxs238("div", { children: [
          /* @__PURE__ */ jsx263("div", { className: "text-sm text-gray-500", children: "Symbol Position" }),
          /* @__PURE__ */ jsx263("div", { className: "text-lg font-semibold capitalize", children: getCurrency2(selectedCurrency)?.symbolBefore ? "before" : "after" })
        ] }),
        /* @__PURE__ */ jsxs238("div", { children: [
          /* @__PURE__ */ jsx263("div", { className: "text-sm text-gray-500", children: "Locale" }),
          /* @__PURE__ */ jsx263("div", { className: "text-lg font-semibold", children: getCurrency2(selectedCurrency)?.locale || "en-US" })
        ] })
      ] }) })
    ] }),
    hasChanges && /* @__PURE__ */ jsxs238("div", { className: "flex items-center justify-end gap-3 pt-4 border-t", children: [
      /* @__PURE__ */ jsx263(
        Button74,
        {
          variant: "outline",
          onClick: handleCancel,
          disabled: isUpdating,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx263(
        Button74,
        {
          onClick: handleSave,
          disabled: isUpdating || !hasChanges,
          children: isUpdating ? "Saving..." : "Save Changes"
        }
      )
    ] }),
    /* @__PURE__ */ jsxs238("div", { className: "text-sm text-gray-500 space-y-2", children: [
      /* @__PURE__ */ jsxs238("p", { children: [
        /* @__PURE__ */ jsx263("strong", { children: "Note:" }),
        " Changing your currency will affect how prices are displayed throughout your rental shop. All existing prices will remain in their original values but will be formatted according to the selected currency."
      ] }),
      /* @__PURE__ */ jsx263("p", { children: "If you need to convert existing prices to the new currency, please contact support." })
    ] })
  ] });
};

// src/components/layout/TopNavigation.tsx
import { useState as useState89 } from "react";
import {
  Home as Home3,
  Package as Package23,
  Users as Users13,
  Settings as Settings10,
  ShoppingCart as ShoppingCart9,
  Store as Store7,
  Building2 as Building216,
  Bell as Bell4,
  User as User24,
  LogOut as LogOut2,
  X as X18,
  Menu,
  CreditCard as CreditCard23,
  Clock as Clock30,
  ChevronDown as ChevronDown8,
  ShieldCheck,
  FileText as FileText5,
  Database as Database4
} from "lucide-react";
import { jsx as jsx264, jsxs as jsxs239 } from "react/jsx-runtime";
function TopNavigation({
  variant = "client",
  currentPage,
  notificationsCount = 0,
  cartItemsCount = 0,
  onLogout,
  onProfileClick,
  userRole
}) {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState89(false);
  const clientNavItems = [
    { href: "/dashboard", label: "Dashboard", icon: Home3 },
    { href: "/products", label: "Products", icon: Package23 },
    { href: "/customers", label: "Customers", icon: Users13 },
    { href: "/orders", label: "Orders", icon: ShoppingCart9 },
    { href: "/settings", label: "Settings", icon: Settings10 }
  ];
  const adminNavItems = [
    { href: "/dashboard", label: "Dashboard", icon: Home3 },
    { href: "/merchants", label: "Merchants", icon: Building216 },
    {
      href: "/plans",
      label: "Plans",
      icon: Package23
    },
    { href: "/subscriptions", label: "Subscriptions", icon: Clock30 },
    { href: "/payments", label: "Payments", icon: CreditCard23 },
    { href: "/users", label: "Users", icon: Users13 },
    {
      href: "/system",
      label: "System",
      icon: Settings10,
      subItems: [
        { href: "/system/backup", label: "Backup Management", icon: Database4 },
        { href: "/system/integrity", label: "Data Integrity", icon: ShieldCheck },
        { href: "/system/audit-logs", label: "Audit Logs", icon: FileText5 }
      ]
    }
  ];
  const filterNavItemsByRole = (items, userRole2) => {
    if (!userRole2)
      return items;
    if (userRole2 === "OUTLET_ADMIN") {
      return items.filter(
        (item) => item.href !== "/outlets" && item.href !== "/subscriptions" && item.href !== "/plans" && item.href !== "/payments"
      );
    } else if (userRole2 === "OUTLET_STAFF") {
      return items.filter(
        (item) => item.href !== "/users" && item.href !== "/outlets" && item.href !== "/subscriptions" && item.href !== "/plans" && item.href !== "/payments"
      );
    }
    return items;
  };
  const navItems = variant === "admin" ? filterNavItemsByRole(adminNavItems, userRole) : clientNavItems;
  return /* @__PURE__ */ jsxs239("header", { className: "sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm", children: [
    /* @__PURE__ */ jsx264("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: /* @__PURE__ */ jsxs239("div", { className: "flex items-center justify-between h-16", children: [
      /* @__PURE__ */ jsxs239("div", { className: "flex items-center", children: [
        /* @__PURE__ */ jsx264("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx264("div", { className: "w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsx264(Store7, { className: "w-6 h-6 text-white" }) }) }),
        /* @__PURE__ */ jsxs239("div", { className: "ml-3", children: [
          /* @__PURE__ */ jsx264("h1", { className: "text-xl font-bold text-gray-900", children: "Rental Shop" }),
          /* @__PURE__ */ jsx264("p", { className: "text-xs text-gray-500 capitalize", children: variant })
        ] })
      ] }),
      /* @__PURE__ */ jsx264("nav", { className: "hidden lg:flex items-center space-x-1", children: navItems.map((item) => {
        const Icon2 = item.icon;
        const isActive = currentPage === item.href || item.subItems && item.subItems.some((subItem) => currentPage === subItem.href);
        const hasSubItems = item.subItems && item.subItems.length > 0;
        if (hasSubItems) {
          return /* @__PURE__ */ jsxs239("div", { className: "relative group", children: [
            /* @__PURE__ */ jsxs239(
              "a",
              {
                href: item.href,
                className: `px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all duration-200 ${isActive ? "bg-blue-50 text-blue-700 border border-blue-200" : "text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,
                children: [
                  /* @__PURE__ */ jsx264(Icon2, { className: `w-4 h-4 ${isActive ? "text-blue-600" : "text-gray-500"}` }),
                  item.label,
                  /* @__PURE__ */ jsx264(ChevronDown8, { className: "w-3 h-3" })
                ]
              }
            ),
            /* @__PURE__ */ jsx264("div", { className: "absolute top-full left-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50", children: /* @__PURE__ */ jsx264("div", { className: "py-1", children: item.subItems?.map((subItem) => {
              const SubIcon = subItem.icon;
              const isSubActive = currentPage === subItem.href;
              return /* @__PURE__ */ jsxs239(
                "a",
                {
                  href: subItem.href,
                  className: `flex items-center gap-2 px-4 py-2 text-sm transition-colors ${isSubActive ? "bg-blue-50 text-blue-700" : "text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,
                  children: [
                    /* @__PURE__ */ jsx264(SubIcon, { className: `w-4 h-4 ${isSubActive ? "text-blue-600" : "text-gray-500"}` }),
                    subItem.label
                  ]
                },
                subItem.href
              );
            }) }) })
          ] }, item.href);
        }
        return /* @__PURE__ */ jsxs239(
          "a",
          {
            href: item.href,
            className: `px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all duration-200 ${isActive ? "bg-blue-50 text-blue-700 border border-blue-200" : "text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,
            children: [
              /* @__PURE__ */ jsx264(Icon2, { className: `w-4 h-4 ${isActive ? "text-blue-600" : "text-gray-500"}` }),
              item.label
            ]
          },
          item.href
        );
      }) }),
      /* @__PURE__ */ jsxs239("div", { className: "flex items-center space-x-4", children: [
        /* @__PURE__ */ jsxs239("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsx264(
            Button2,
            {
              variant: "ghost",
              size: "sm",
              className: "relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50",
              children: /* @__PURE__ */ jsx264(Bell4, { className: "w-5 h-5" })
            }
          ),
          variant === "client" && /* @__PURE__ */ jsxs239(
            Button2,
            {
              variant: "ghost",
              size: "sm",
              className: "relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50",
              children: [
                /* @__PURE__ */ jsx264(ShoppingCart9, { className: "w-5 h-5" }),
                cartItemsCount > 0 && /* @__PURE__ */ jsx264(Badge, { className: "absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs", children: cartItemsCount > 9 ? "9+" : cartItemsCount })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs239("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsxs239(
            Button2,
            {
              variant: "ghost",
              size: "sm",
              onClick: onProfileClick,
              className: "flex items-center gap-2 text-gray-700 hover:text-gray-900 hover:bg-gray-50",
              children: [
                /* @__PURE__ */ jsx264("div", { className: "w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx264(User24, { className: "w-4 h-4 text-white" }) }),
                /* @__PURE__ */ jsx264("span", { className: "hidden sm:block text-sm font-medium", children: "Profile" })
              ]
            }
          ),
          /* @__PURE__ */ jsx264(
            Button2,
            {
              variant: "ghost",
              size: "sm",
              onClick: onLogout,
              className: "p-2 text-gray-600 hover:text-red-600 hover:bg-red-50",
              title: "Logout",
              children: /* @__PURE__ */ jsx264(LogOut2, { className: "w-4 h-4" })
            }
          )
        ] }),
        /* @__PURE__ */ jsx264("div", { className: "lg:hidden", children: /* @__PURE__ */ jsx264(
          Button2,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => setIsMobileMenuOpen(!isMobileMenuOpen),
            className: "p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50",
            children: isMobileMenuOpen ? /* @__PURE__ */ jsx264(X18, { className: "w-6 h-6" }) : /* @__PURE__ */ jsx264(Menu, { className: "w-6 h-6" })
          }
        ) })
      ] })
    ] }) }),
    isMobileMenuOpen && /* @__PURE__ */ jsx264("div", { className: "lg:hidden border-t border-gray-200 bg-white", children: /* @__PURE__ */ jsx264("div", { className: "px-2 pt-2 pb-3 space-y-1", children: navItems.map((item) => {
      const Icon2 = item.icon;
      const isActive = currentPage === item.href || item.subItems && item.subItems.some((subItem) => currentPage === subItem.href);
      const hasSubItems = item.subItems && item.subItems.length > 0;
      return /* @__PURE__ */ jsxs239("div", { children: [
        /* @__PURE__ */ jsxs239(
          "a",
          {
            href: item.href,
            className: `flex px-3 py-2 rounded-lg text-base font-medium items-center gap-3 ${isActive ? "bg-blue-50 text-blue-700 border border-blue-200" : "text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,
            onClick: () => setIsMobileMenuOpen(false),
            children: [
              /* @__PURE__ */ jsx264(Icon2, { className: `w-5 h-5 ${isActive ? "text-blue-600" : "text-gray-500"}` }),
              item.label
            ]
          }
        ),
        hasSubItems && /* @__PURE__ */ jsx264("div", { className: "ml-6 space-y-1", children: item.subItems?.map((subItem) => {
          const SubIcon = subItem.icon;
          const isSubActive = currentPage === subItem.href;
          return /* @__PURE__ */ jsxs239(
            "a",
            {
              href: subItem.href,
              className: `flex px-3 py-2 rounded-lg text-sm font-medium items-center gap-3 ${isSubActive ? "bg-blue-50 text-blue-700 border border-blue-200" : "text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,
              onClick: () => setIsMobileMenuOpen(false),
              children: [
                /* @__PURE__ */ jsx264(SubIcon, { className: `w-4 h-4 ${isSubActive ? "text-blue-600" : "text-gray-500"}` }),
                subItem.label
              ]
            },
            subItem.href
          );
        }) })
      ] }, item.href);
    }) }) })
  ] });
}

// src/components/layout/ServerTopNavigation.tsx
import {
  Home as Home4,
  Store as Store8,
  Users as Users14,
  Settings as Settings11,
  User as User25,
  LogOut as LogOut3,
  Menu as Menu2,
  Search as Search7,
  Bell as Bell5,
  ShoppingCart as ShoppingCart10,
  Package as Package24,
  CreditCard as CreditCard24,
  BarChart3 as BarChart33,
  Shield as Shield9,
  Clock as Clock31
} from "lucide-react";
import { jsx as jsx265, jsxs as jsxs240 } from "react/jsx-runtime";
function ServerTopNavigation({
  variant = "client",
  currentPage,
  notificationsCount = 0,
  cartItemsCount = 0,
  searchAction = "/search",
  logoutAction = "/logout",
  profileAction = "/profile"
}) {
  const clientNavItems = [
    { href: "/dashboard", label: "Dashboard", icon: Home4 },
    { href: "/products", label: "Products", icon: Package24 },
    { href: "/customers", label: "Customers", icon: Users14 },
    { href: "/orders", label: "Orders", icon: ShoppingCart10 },
    { href: "/settings", label: "Settings", icon: Settings11 }
  ];
  const adminNavItems = [
    { href: "/dashboard", label: "Dashboard", icon: Home4 },
    { href: "/merchants", label: "Merchants", icon: Store8 },
    { href: "/plans", label: "Plans", icon: Package24 },
    { href: "/subscriptions", label: "Subscriptions", icon: Clock31 },
    { href: "/payments", label: "Payments", icon: CreditCard24 },
    { href: "/settings", label: "Settings", icon: Settings11 },
    { href: "/analytics", label: "Analytics", icon: BarChart33 },
    { href: "/security", label: "Security", icon: Shield9 }
  ];
  const navItems = variant === "admin" ? adminNavItems : clientNavItems;
  return /* @__PURE__ */ jsxs240("header", { className: "sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm", children: [
    /* @__PURE__ */ jsxs240("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: [
      /* @__PURE__ */ jsxs240("div", { className: "flex items-center justify-between h-16", children: [
        /* @__PURE__ */ jsxs240("div", { className: "flex items-center", children: [
          /* @__PURE__ */ jsx265("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx265("div", { className: "w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsx265(Store8, { className: "w-6 h-6 text-white" }) }) }),
          /* @__PURE__ */ jsxs240("div", { className: "ml-3", children: [
            /* @__PURE__ */ jsx265("h1", { className: "text-xl font-bold text-gray-900", children: "Rental Shop" }),
            /* @__PURE__ */ jsx265("p", { className: "text-xs text-gray-500 capitalize", children: variant })
          ] })
        ] }),
        /* @__PURE__ */ jsx265("nav", { className: "hidden lg:flex items-center space-x-1", children: navItems.map((item) => {
          const Icon2 = item.icon;
          const isActive = currentPage === item.href;
          return /* @__PURE__ */ jsxs240(
            "a",
            {
              href: item.href,
              className: `px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all duration-200 ${isActive ? "bg-blue-50 text-blue-700 border border-blue-200" : "text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,
              children: [
                /* @__PURE__ */ jsx265(Icon2, { className: `w-4 h-4 ${isActive ? "text-blue-600" : "text-gray-500"}` }),
                item.label
              ]
            },
            item.href
          );
        }) }),
        /* @__PURE__ */ jsxs240("div", { className: "flex items-center space-x-4", children: [
          /* @__PURE__ */ jsx265("form", { action: searchAction, method: "GET", className: "hidden md:block", children: /* @__PURE__ */ jsxs240("div", { className: "relative", children: [
            /* @__PURE__ */ jsx265(Search7, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" }),
            /* @__PURE__ */ jsx265(
              Input,
              {
                type: "text",
                name: "q",
                placeholder: "Search products, customers...",
                className: "w-64 pl-10 pr-4 h-9 border-gray-300 focus:border-blue-500 focus:ring-blue-500"
              }
            )
          ] }) }),
          /* @__PURE__ */ jsxs240("div", { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx265(
              Button2,
              {
                variant: "ghost",
                size: "sm",
                className: "relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50",
                children: /* @__PURE__ */ jsx265(Bell5, { className: "w-5 h-5" })
              }
            ),
            variant === "client" && /* @__PURE__ */ jsxs240(
              Button2,
              {
                variant: "ghost",
                size: "sm",
                className: "relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50",
                children: [
                  /* @__PURE__ */ jsx265(ShoppingCart10, { className: "w-5 h-5" }),
                  cartItemsCount > 0 && /* @__PURE__ */ jsx265(Badge, { className: "absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs", children: cartItemsCount > 9 ? "9+" : cartItemsCount })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs240("div", { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsx265("form", { action: profileAction, method: "GET", children: /* @__PURE__ */ jsxs240(
              Button2,
              {
                type: "submit",
                variant: "ghost",
                size: "sm",
                className: "flex items-center gap-2 text-gray-700 hover:text-gray-900 hover:bg-gray-50",
                children: [
                  /* @__PURE__ */ jsx265("div", { className: "w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx265(User25, { className: "w-4 h-4 text-white" }) }),
                  /* @__PURE__ */ jsx265("span", { className: "hidden sm:block text-sm font-medium", children: "Profile" })
                ]
              }
            ) }),
            /* @__PURE__ */ jsx265("form", { action: logoutAction, method: "POST", children: /* @__PURE__ */ jsx265(
              Button2,
              {
                type: "submit",
                variant: "ghost",
                size: "sm",
                className: "p-2 text-gray-600 hover:text-red-600 hover:bg-red-50",
                title: "Logout",
                children: /* @__PURE__ */ jsx265(LogOut3, { className: "w-4 h-4" })
              }
            ) })
          ] }),
          /* @__PURE__ */ jsx265("div", { className: "lg:hidden", children: /* @__PURE__ */ jsx265(
            Button2,
            {
              variant: "ghost",
              size: "sm",
              className: "p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50",
              type: "button",
              "data-mobile-menu-toggle": true,
              children: /* @__PURE__ */ jsx265(Menu2, { className: "w-6 h-6" })
            }
          ) })
        ] })
      ] }),
      /* @__PURE__ */ jsx265("div", { className: "md:hidden pb-4", children: /* @__PURE__ */ jsx265("form", { action: searchAction, method: "GET", children: /* @__PURE__ */ jsxs240("div", { className: "relative", children: [
        /* @__PURE__ */ jsx265(Search7, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" }),
        /* @__PURE__ */ jsx265(
          Input,
          {
            type: "text",
            name: "q",
            placeholder: "Search products, customers...",
            className: "w-full pl-10 pr-4 h-10 border-gray-300 focus:border-blue-500 focus:border-blue-500 focus:ring-blue-500"
          }
        )
      ] }) }) })
    ] }),
    /* @__PURE__ */ jsx265("div", { className: "lg:hidden border-t border-gray-200 bg-white hidden", "data-mobile-menu": true, children: /* @__PURE__ */ jsx265("div", { className: "px-2 pt-2 pb-3 space-y-1", children: navItems.map((item) => {
      const Icon2 = item.icon;
      const isActive = currentPage === item.href;
      return /* @__PURE__ */ jsxs240(
        "a",
        {
          href: item.href,
          className: `block px-3 py-2 rounded-lg text-base font-medium flex items-center gap-3 ${isActive ? "bg-blue-50 text-blue-700 border border-blue-200" : "text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,
          children: [
            /* @__PURE__ */ jsx265(Icon2, { className: `w-5 h-5 ${isActive ? "text-blue-600" : "text-gray-500"}` }),
            item.label
          ]
        },
        item.href
      );
    }) }) })
  ] });
}

// src/components/layout/DashboardWrapperClean.tsx
import { useState as useState90 } from "react";
import { jsx as jsx266, jsxs as jsxs241 } from "react/jsx-runtime";
function DashboardWrapperClean({
  children,
  user,
  onLogout = () => {
  },
  currentPath = "",
  hideSidebar = false,
  allowCollapse = true
}) {
  const [sidebarCollapsed, setSidebarCollapsed] = useState90(false);
  const handleCollapseToggle = () => {
    setSidebarCollapsed(!sidebarCollapsed);
  };
  return /* @__PURE__ */ jsxs241("div", { className: "flex h-screen bg-bg-secondary", children: [
    !hideSidebar && /* @__PURE__ */ jsx266(
      Sidebar,
      {
        user,
        onLogout,
        currentPath,
        isCollapsed: sidebarCollapsed,
        onCollapseToggle: allowCollapse ? handleCollapseToggle : void 0
      }
    ),
    /* @__PURE__ */ jsx266("main", { className: `flex-1 overflow-y-auto ${!hideSidebar ? "transition-all duration-300 ease-in-out" : ""}`, children: /* @__PURE__ */ jsx266("div", { className: "p-6 space-y-6", children: /* @__PURE__ */ jsx266("div", { className: "space-y-6", children }) }) })
  ] });
}

// src/components/layout/DashboardWrapperColorful.tsx
import { useState as useState91 } from "react";
import { jsx as jsx267, jsxs as jsxs242 } from "react/jsx-runtime";
function DashboardWrapperColorful({
  children,
  user,
  onLogout = () => {
  },
  currentPath = "",
  hideSidebar = false,
  allowCollapse = true
}) {
  const [sidebarCollapsed, setSidebarCollapsed] = useState91(false);
  const handleCollapseToggle = () => {
    setSidebarCollapsed(!sidebarCollapsed);
  };
  return /* @__PURE__ */ jsxs242("div", { className: "flex h-screen bg-gradient-to-br from-brand-50 via-bg-primary to-brand-100", children: [
    !hideSidebar && /* @__PURE__ */ jsx267(
      Sidebar,
      {
        user,
        onLogout,
        currentPath,
        isCollapsed: sidebarCollapsed,
        onCollapseToggle: allowCollapse ? handleCollapseToggle : void 0
      }
    ),
    /* @__PURE__ */ jsx267("main", { className: `flex-1 overflow-y-auto ${!hideSidebar ? "transition-all duration-300 ease-in-out" : ""}`, children: /* @__PURE__ */ jsxs242("div", { className: "p-8 space-y-8", children: [
      /* @__PURE__ */ jsxs242("div", { className: "bg-gradient-to-r from-brand-500 to-action-primary rounded-2xl p-8 shadow-glow animate-fade-in", children: [
        /* @__PURE__ */ jsx267("h1", { className: "text-4xl font-display font-bold text-white mb-2", children: "Welcome to RentalShop" }),
        /* @__PURE__ */ jsx267("p", { className: "text-xl text-brand-100 font-medium", children: "Your comprehensive rental management dashboard" })
      ] }),
      /* @__PURE__ */ jsx267("div", { className: "space-y-6", children })
    ] }) })
  ] });
}

// src/components/layout/TodaysFocus.tsx
import { jsx as jsx268, jsxs as jsxs243 } from "react/jsx-runtime";
var TodaysFocus = ({ data }) => {
  return /* @__PURE__ */ jsxs243("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8", children: [
    /* @__PURE__ */ jsxs243(Card, { children: [
      /* @__PURE__ */ jsx268(CardHeader, { children: /* @__PURE__ */ jsx268(CardTitle, { children: "Today's Operations" }) }),
      /* @__PURE__ */ jsx268(CardContent, { children: /* @__PURE__ */ jsxs243("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs243("div", { className: "flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0", children: [
          /* @__PURE__ */ jsxs243("div", { className: "flex items-center space-x-3", children: [
            /* @__PURE__ */ jsx268("div", { className: "text-gray-400 text-sm", children: "\u{1F4E6}" }),
            /* @__PURE__ */ jsxs243("div", { children: [
              /* @__PURE__ */ jsx268("p", { className: "font-medium text-gray-900 text-sm", children: "Pickups Today" }),
              /* @__PURE__ */ jsx268("p", { className: "text-xs text-gray-400", children: "Items to be picked up" })
            ] })
          ] }),
          /* @__PURE__ */ jsx268(Badge, { variant: "outline", className: "text-xs", children: data.todayPickups })
        ] }),
        /* @__PURE__ */ jsxs243("div", { className: "flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0", children: [
          /* @__PURE__ */ jsxs243("div", { className: "flex items-center space-x-3", children: [
            /* @__PURE__ */ jsx268("div", { className: "text-gray-400 text-sm", children: "\u{1F504}" }),
            /* @__PURE__ */ jsxs243("div", { children: [
              /* @__PURE__ */ jsx268("p", { className: "font-medium text-gray-900 text-sm", children: "Returns Today" }),
              /* @__PURE__ */ jsx268("p", { className: "text-xs text-gray-400", children: "Items to be returned" })
            ] })
          ] }),
          /* @__PURE__ */ jsx268(Badge, { variant: "outline", className: "text-xs", children: data.todayReturns })
        ] }),
        /* @__PURE__ */ jsxs243("div", { className: "flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0", children: [
          /* @__PURE__ */ jsxs243("div", { className: "flex items-center space-x-3", children: [
            /* @__PURE__ */ jsx268("div", { className: "text-gray-400 text-sm", children: "\u26A0\uFE0F" }),
            /* @__PURE__ */ jsxs243("div", { children: [
              /* @__PURE__ */ jsx268("p", { className: "font-medium text-gray-900 text-sm", children: "Overdue Items" }),
              /* @__PURE__ */ jsx268("p", { className: "text-xs text-gray-400", children: "Past due date" })
            ] })
          ] }),
          /* @__PURE__ */ jsx268(Badge, { variant: "destructive", className: "text-xs", children: data.overdueCount })
        ] }),
        /* @__PURE__ */ jsxs243("div", { className: "flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0", children: [
          /* @__PURE__ */ jsxs243("div", { className: "flex items-center space-x-3", children: [
            /* @__PURE__ */ jsx268("div", { className: "text-gray-400 text-sm", children: "\u{1F4CA}" }),
            /* @__PURE__ */ jsxs243("div", { children: [
              /* @__PURE__ */ jsx268("p", { className: "font-medium text-gray-900 text-sm", children: "Active Rentals" }),
              /* @__PURE__ */ jsx268("p", { className: "text-xs text-gray-400", children: "Currently rented out" })
            ] })
          ] }),
          /* @__PURE__ */ jsx268(Badge, { variant: "outline", className: "text-xs", children: data.activeRentals })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs243(Card, { children: [
      /* @__PURE__ */ jsx268(CardHeader, { children: /* @__PURE__ */ jsx268(CardTitle, { children: "Quick Actions" }) }),
      /* @__PURE__ */ jsx268(CardContent, { children: /* @__PURE__ */ jsxs243("div", { className: "space-y-3", children: [
        /* @__PURE__ */ jsxs243(Button2, { className: "w-full justify-start h-12 text-left", variant: "outline", children: [
          /* @__PURE__ */ jsx268("span", { className: "mr-3", children: "\u{1F4E6}" }),
          /* @__PURE__ */ jsxs243("div", { className: "flex-1 text-left", children: [
            /* @__PURE__ */ jsx268("div", { className: "font-medium", children: "Process Pickup" }),
            /* @__PURE__ */ jsx268("div", { className: "text-sm text-gray-500", children: "Mark items as picked up" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs243(Button2, { className: "w-full justify-start h-12 text-left", variant: "outline", children: [
          /* @__PURE__ */ jsx268("span", { className: "mr-3", children: "\u{1F504}" }),
          /* @__PURE__ */ jsxs243("div", { className: "flex-1 text-left", children: [
            /* @__PURE__ */ jsx268("div", { className: "font-medium", children: "Process Return" }),
            /* @__PURE__ */ jsx268("div", { className: "text-sm text-gray-500", children: "Mark items as returned" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs243(Button2, { className: "w-full justify-start h-12 text-left", variant: "outline", children: [
          /* @__PURE__ */ jsx268("span", { className: "mr-3", children: "\u26A0\uFE0F" }),
          /* @__PURE__ */ jsxs243("div", { className: "flex-1 text-left", children: [
            /* @__PURE__ */ jsx268("div", { className: "font-medium", children: "Handle Overdue" }),
            /* @__PURE__ */ jsx268("div", { className: "text-sm text-gray-500", children: "Contact overdue customers" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs243(Button2, { className: "w-full justify-start h-12 text-left", variant: "outline", children: [
          /* @__PURE__ */ jsx268("span", { className: "mr-3", children: "\u{1F4DE}" }),
          /* @__PURE__ */ jsxs243("div", { className: "flex-1 text-left", children: [
            /* @__PURE__ */ jsx268("div", { className: "font-medium", children: "Send Reminders" }),
            /* @__PURE__ */ jsx268("div", { className: "text-sm text-gray-500", children: "Notify upcoming returns" })
          ] })
        ] })
      ] }) })
    ] })
  ] });
};

// src/components/layout/ColorfulQuickActions.tsx
import { jsx as jsx269, jsxs as jsxs244 } from "react/jsx-runtime";
var QuickActionCard = ({
  title,
  description,
  icon,
  href,
  color
}) => /* @__PURE__ */ jsxs244(Card, { className: "group relative overflow-hidden bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border-0", children: [
  /* @__PURE__ */ jsx269("div", { className: `absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${color}` }),
  /* @__PURE__ */ jsx269(CardContent, { className: "p-6", children: /* @__PURE__ */ jsx269("a", { href, className: "block", children: /* @__PURE__ */ jsxs244("div", { className: "flex items-center space-x-4", children: [
    /* @__PURE__ */ jsx269("div", { className: `w-16 h-16 rounded-xl bg-gradient-to-br ${color} text-white text-3xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow`, children: icon }),
    /* @__PURE__ */ jsxs244("div", { className: "flex-1", children: [
      /* @__PURE__ */ jsx269("h3", { className: "font-bold text-gray-900 text-lg mb-2 group-hover:text-blue-600 transition-colors", children: title }),
      /* @__PURE__ */ jsx269("p", { className: "text-gray-600 font-medium", children: description })
    ] }),
    /* @__PURE__ */ jsx269("div", { className: "text-gray-400 group-hover:text-blue-500 transition-colors", children: /* @__PURE__ */ jsx269("svg", { className: "w-6 h-6", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx269("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 5l7 7-7 7" }) }) })
  ] }) }) })
] });
var ColorfulQuickActions = () => {
  const quickActions = [
    {
      title: "New Rental",
      description: "Create rental order",
      icon: "\u{1F4E6}",
      href: "/orders/new",
      color: "from-blue-500 to-blue-600"
    },
    {
      title: "Return Item",
      description: "Process returns",
      icon: "\u{1F504}",
      href: "/orders/returns",
      color: "from-green-500 to-green-600"
    },
    {
      title: "Add Product",
      description: "Add new item",
      icon: "\u2795",
      href: "/products/new",
      color: "from-purple-500 to-purple-600"
    },
    {
      title: "Customer Search",
      description: "Find customers",
      icon: "\u{1F465}",
      href: "/customers",
      color: "from-orange-500 to-orange-600"
    }
  ];
  return /* @__PURE__ */ jsx269("div", { className: "mb-8", children: /* @__PURE__ */ jsxs244(Card, { className: "border-0 shadow-lg bg-gradient-to-br from-white to-gray-50", children: [
    /* @__PURE__ */ jsx269(CardHeader, { className: "pb-4", children: /* @__PURE__ */ jsx269(CardTitle, { className: "text-xl font-bold text-gray-800", children: "Quick Actions" }) }),
    /* @__PURE__ */ jsx269(CardContent, { children: /* @__PURE__ */ jsx269("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: quickActions.map((action, index) => /* @__PURE__ */ jsx269(QuickActionCard, { ...action }, index)) }) })
  ] }) });
};

// src/components/layout/ColorfulTodaysFocus.tsx
import { jsx as jsx270, jsxs as jsxs245 } from "react/jsx-runtime";
var ColorfulTodaysFocus = ({ data }) => {
  const operations = [
    {
      title: "Pickups Today",
      description: "Items to be picked up",
      icon: "\u{1F4E6}",
      value: data.todayPickups,
      color: "from-blue-500 to-blue-600",
      bgColor: "bg-blue-50",
      textColor: "text-blue-600"
    },
    {
      title: "Returns Today",
      description: "Items to be returned",
      icon: "\u{1F504}",
      value: data.todayReturns,
      color: "from-green-500 to-green-600",
      bgColor: "bg-green-50",
      textColor: "text-green-600"
    },
    {
      title: "Overdue Items",
      description: "Past due date",
      icon: "\u26A0\uFE0F",
      value: data.overdueCount,
      color: "from-red-500 to-red-600",
      bgColor: "bg-red-50",
      textColor: "text-red-600"
    },
    {
      title: "Active Rentals",
      description: "Currently rented out",
      icon: "\u{1F4CA}",
      value: data.activeRentals,
      color: "from-purple-500 to-purple-600",
      bgColor: "bg-purple-50",
      textColor: "text-purple-600"
    }
  ];
  const quickActions = [
    {
      title: "Process Pickup",
      description: "Mark items as picked up",
      icon: "\u{1F4E6}",
      color: "from-blue-500 to-blue-600"
    },
    {
      title: "Process Return",
      description: "Mark items as returned",
      icon: "\u{1F504}",
      color: "from-green-500 to-green-600"
    },
    {
      title: "Handle Overdue",
      description: "Contact overdue customers",
      icon: "\u26A0\uFE0F",
      color: "from-red-500 to-red-600"
    },
    {
      title: "Send Reminders",
      description: "Notify upcoming returns",
      icon: "\u{1F4DE}",
      color: "from-purple-500 to-purple-600"
    }
  ];
  return /* @__PURE__ */ jsxs245("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8", children: [
    /* @__PURE__ */ jsxs245(Card, { className: "border-0 shadow-lg bg-gradient-to-br from-white to-gray-50", children: [
      /* @__PURE__ */ jsx270(CardHeader, { className: "pb-4", children: /* @__PURE__ */ jsx270(CardTitle, { className: "text-xl font-bold text-gray-800", children: "Today's Operations" }) }),
      /* @__PURE__ */ jsx270(CardContent, { children: /* @__PURE__ */ jsx270("div", { className: "space-y-4", children: operations.map((operation, index) => /* @__PURE__ */ jsxs245("div", { className: "group relative overflow-hidden bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-100", children: [
        /* @__PURE__ */ jsx270("div", { className: `absolute top-0 left-0 w-1 h-full bg-gradient-to-b ${operation.color}` }),
        /* @__PURE__ */ jsx270("div", { className: "p-6", children: /* @__PURE__ */ jsxs245("div", { className: "flex justify-between items-center", children: [
          /* @__PURE__ */ jsxs245("div", { className: "flex items-center space-x-4", children: [
            /* @__PURE__ */ jsx270("div", { className: `w-14 h-14 rounded-xl bg-gradient-to-br ${operation.color} text-white text-2xl flex items-center justify-center shadow-lg`, children: operation.icon }),
            /* @__PURE__ */ jsxs245("div", { children: [
              /* @__PURE__ */ jsx270("p", { className: "font-bold text-gray-900 text-lg", children: operation.title }),
              /* @__PURE__ */ jsx270("p", { className: "text-gray-600 font-medium", children: operation.description })
            ] })
          ] }),
          /* @__PURE__ */ jsx270(Badge, { variant: "outline", className: `text-lg font-bold px-4 py-2 ${operation.textColor} border-2`, children: operation.value })
        ] }) })
      ] }, index)) }) })
    ] }),
    /* @__PURE__ */ jsxs245(Card, { className: "border-0 shadow-lg bg-gradient-to-br from-white to-gray-50", children: [
      /* @__PURE__ */ jsx270(CardHeader, { className: "pb-4", children: /* @__PURE__ */ jsx270(CardTitle, { className: "text-xl font-bold text-gray-800", children: "Quick Actions" }) }),
      /* @__PURE__ */ jsx270(CardContent, { children: /* @__PURE__ */ jsx270("div", { className: "space-y-4", children: quickActions.map((action, index) => /* @__PURE__ */ jsxs245(
        Button2,
        {
          className: "w-full justify-start h-16 text-left group relative overflow-hidden bg-white hover:bg-gray-50 border border-gray-200 hover:border-gray-300 transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg",
          variant: "outline",
          children: [
            /* @__PURE__ */ jsx270("div", { className: `absolute top-0 left-0 w-1 h-full bg-gradient-to-b ${action.color}` }),
            /* @__PURE__ */ jsx270("span", { className: "mr-4 text-2xl", children: action.icon }),
            /* @__PURE__ */ jsxs245("div", { className: "flex-1 text-left", children: [
              /* @__PURE__ */ jsx270("div", { className: "font-bold text-gray-900 text-lg", children: action.title }),
              /* @__PURE__ */ jsx270("div", { className: "text-gray-600 font-medium", children: action.description })
            ] })
          ]
        },
        index
      )) }) })
    ] })
  ] });
};

// src/components/layout/QuickActionsGrid.tsx
import { jsx as jsx271, jsxs as jsxs246 } from "react/jsx-runtime";
var QuickActionCard2 = ({
  title,
  description,
  icon,
  href,
  color
}) => /* @__PURE__ */ jsx271(Card, { className: "border-0 shadow-sm hover:shadow-md transition-shadow cursor-pointer", children: /* @__PURE__ */ jsx271(CardContent, { className: "p-3", children: /* @__PURE__ */ jsx271("a", { href, className: "block", children: /* @__PURE__ */ jsxs246("div", { className: "flex items-center space-x-3", children: [
  /* @__PURE__ */ jsx271("div", { className: "text-gray-500 text-base", children: icon }),
  /* @__PURE__ */ jsxs246("div", { className: "flex-1", children: [
    /* @__PURE__ */ jsx271("h3", { className: "font-medium text-gray-900 text-sm", children: title }),
    /* @__PURE__ */ jsx271("p", { className: "text-xs text-gray-400", children: description })
  ] }),
  /* @__PURE__ */ jsx271("div", { className: "text-gray-300", children: /* @__PURE__ */ jsx271("svg", { className: "w-3 h-3", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsx271("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 5l7 7-7 7" }) }) })
] }) }) }) });
var QuickActionsGrid = () => {
  const quickActions = [
    {
      title: "New Rental",
      description: "Create rental order",
      icon: "\u{1F4E6}",
      href: "/orders/new",
      color: "bg-blue-500"
    },
    {
      title: "Return Item",
      description: "Process returns",
      icon: "\u{1F504}",
      href: "/orders/returns",
      color: "bg-green-500"
    },
    {
      title: "Add Product",
      description: "Add new item",
      icon: "\u2795",
      href: "/products/new",
      color: "bg-purple-500"
    },
    {
      title: "Customer Search",
      description: "Find customers",
      icon: "\u{1F465}",
      href: "/customers",
      color: "bg-orange-500"
    }
  ];
  return /* @__PURE__ */ jsx271("div", { className: "mb-8", children: /* @__PURE__ */ jsxs246(Card, { children: [
    /* @__PURE__ */ jsx271(CardHeader, { children: /* @__PURE__ */ jsx271(CardTitle, { children: "Quick Actions" }) }),
    /* @__PURE__ */ jsx271(CardContent, { children: /* @__PURE__ */ jsx271("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: quickActions.map((action, index) => /* @__PURE__ */ jsx271(QuickActionCard2, { ...action }, index)) }) })
  ] }) });
};

// src/components/layout/SearchInput.tsx
import { useEffect as useEffect47 } from "react";
import { Search as Search8, X as X20 } from "lucide-react";
import { cn as cn6 } from "@rentalshop/ui";
import { Button as Button75 } from "@rentalshop/ui";
import { useThrottledSearch } from "@rentalshop/hooks";
import { jsx as jsx272, jsxs as jsxs247 } from "react/jsx-runtime";
var SearchInput = ({
  placeholder = "Search...",
  delay = 500,
  minLength = 2,
  onSearch,
  className,
  disabled = false,
  defaultValue = ""
}) => {
  const {
    query,
    isSearching,
    handleSearchChange,
    clearSearch,
    cleanup
  } = useThrottledSearch({
    delay,
    minLength,
    onSearch
  });
  useEffect47(() => {
    if (defaultValue && !query) {
      handleSearchChange(defaultValue);
    }
  }, [defaultValue, query, handleSearchChange]);
  useEffect47(() => {
    return cleanup;
  }, [cleanup]);
  return /* @__PURE__ */ jsxs247("div", { className: cn6("relative", className), children: [
    /* @__PURE__ */ jsxs247("div", { className: "relative", children: [
      /* @__PURE__ */ jsx272(Search8, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" }),
      /* @__PURE__ */ jsx272(
        "input",
        {
          type: "text",
          value: query,
          onChange: (e2) => handleSearchChange(e2.target.value),
          placeholder,
          disabled,
          className: cn6(
            "w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg",
            "focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
            "disabled:bg-gray-100 disabled:cursor-not-allowed",
            "transition-colors duration-200"
          )
        }
      ),
      query && /* @__PURE__ */ jsx272(
        Button75,
        {
          variant: "ghost",
          size: "icon",
          onClick: clearSearch,
          type: "button",
          className: "absolute right-3 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",
          children: /* @__PURE__ */ jsx272(X20, { className: "h-4 w-4" })
        }
      )
    ] }),
    isSearching && /* @__PURE__ */ jsx272("div", { className: "absolute right-3 top-1/2 transform -translate-y-1/2", children: /* @__PURE__ */ jsx272("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600" }) })
  ] });
};

// src/components/layout/navigation.tsx
import { useState as useState92 } from "react";
import {
  Home as Home5,
  Store as Store9,
  Users as Users15,
  Settings as Settings12,
  User as User26,
  LogOut as LogOut4,
  Menu as Menu3,
  X as X21,
  ChevronLeft as ChevronLeft4,
  ChevronRight as ChevronRight6,
  Tag as Tag5,
  ShoppingCart as ShoppingCart11,
  Building2 as Building217
} from "lucide-react";
import { Button as Button76 } from "@rentalshop/ui";
import { jsx as jsx273, jsxs as jsxs248 } from "react/jsx-runtime";
function Navigation({
  variant = "client",
  currentPage,
  hideSidebar = false,
  allowCollapse = true,
  onCollapseToggle,
  isCollapsed = false,
  userRole
}) {
  const [isOpen, setIsOpen] = useState92(false);
  const clientNavItems = [
    { href: "/dashboard", label: "Dashboard", icon: Home5 },
    { href: "/products", label: "Products", icon: Store9 },
    { href: "/customers", label: "Customers", icon: Users15 },
    { href: "/orders", label: "Orders", icon: Store9 },
    { href: "/settings", label: "Settings", icon: Settings12 }
  ];
  const adminNavItems = [
    { href: "/dashboard", label: "Dashboard", icon: Home5 },
    { href: "/users", label: "Users", icon: Users15 },
    { href: "/outlets", label: "Outlets", icon: Building217 },
    { href: "/products", label: "Products", icon: Store9 },
    { href: "/categories", label: "Categories", icon: Tag5 },
    { href: "/orders", label: "Orders", icon: ShoppingCart11 },
    { href: "/settings", label: "Settings", icon: Settings12 }
  ];
  const filterNavItemsByRole = (items, userRole2) => {
    if (!userRole2)
      return items;
    if (userRole2 === "OUTLET_ADMIN") {
      return items.filter(
        (item) => item.href !== "/outlets" && item.href !== "/subscriptions" && item.href !== "/plans" && item.href !== "/payments"
      );
    } else if (userRole2 === "OUTLET_STAFF") {
      return items.filter(
        (item) => item.href !== "/users" && item.href !== "/outlets" && item.href !== "/subscriptions" && item.href !== "/plans" && item.href !== "/payments"
      );
    }
    return items;
  };
  const navItems = variant === "admin" ? filterNavItemsByRole(adminNavItems, userRole) : clientNavItems;
  return /* @__PURE__ */ jsxs248("nav", { className: "bg-nav-background text-nav-tint shadow-sm", children: [
    /* @__PURE__ */ jsx273("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: /* @__PURE__ */ jsxs248("div", { className: "flex items-center justify-between h-16", children: [
      /* @__PURE__ */ jsxs248("div", { className: "flex items-center", children: [
        /* @__PURE__ */ jsx273("div", { className: "flex-shrink-0", children: /* @__PURE__ */ jsx273("div", { className: "w-8 h-8 bg-brand-primary rounded-lg flex items-center justify-center", children: /* @__PURE__ */ jsx273(Store9, { className: "w-5 h-5 text-white" }) }) }),
        !hideSidebar && /* @__PURE__ */ jsx273("div", { className: "hidden md:block ml-10", children: /* @__PURE__ */ jsx273("div", { className: "flex items-baseline space-x-4", children: navItems.map((item) => {
          const Icon2 = item.icon;
          return /* @__PURE__ */ jsxs248(
            "a",
            {
              href: item.href,
              className: `px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors ${currentPage === item.href ? "bg-brand-secondary text-white" : "text-nav-tint hover:text-gray-300"}`,
              children: [
                /* @__PURE__ */ jsx273(Icon2, { className: "w-4 h-4 mr-2" }),
                !isCollapsed && item.label
              ]
            },
            item.href
          );
        }) }) })
      ] }),
      /* @__PURE__ */ jsxs248("div", { className: "flex items-center space-x-4", children: [
        !hideSidebar && allowCollapse && onCollapseToggle && /* @__PURE__ */ jsx273(
          Button76,
          {
            variant: "ghost",
            size: "sm",
            onClick: onCollapseToggle,
            className: "text-nav-tint hover:text-gray-300",
            title: isCollapsed ? "Expand sidebar" : "Collapse sidebar",
            children: isCollapsed ? /* @__PURE__ */ jsx273(ChevronRight6, { className: "w-4 h-4" }) : /* @__PURE__ */ jsx273(ChevronLeft4, { className: "w-4 h-4" })
          }
        ),
        /* @__PURE__ */ jsxs248(Button76, { variant: "ghost", size: "sm", className: "text-nav-tint hover:text-gray-300", children: [
          /* @__PURE__ */ jsx273(User26, { className: "w-4 h-4 mr-2" }),
          !isCollapsed && "Profile"
        ] }),
        /* @__PURE__ */ jsxs248(Button76, { variant: "ghost", size: "sm", className: "text-nav-tint hover:text-gray-300", children: [
          /* @__PURE__ */ jsx273(LogOut4, { className: "w-4 h-4 mr-2" }),
          !isCollapsed && "Logout"
        ] }),
        !hideSidebar && /* @__PURE__ */ jsx273("div", { className: "md:hidden", children: /* @__PURE__ */ jsx273(
          Button76,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => setIsOpen(!isOpen),
            className: "text-nav-tint hover:text-gray-300",
            children: isOpen ? /* @__PURE__ */ jsx273(X21, { className: "w-6 h-6" }) : /* @__PURE__ */ jsx273(Menu3, { className: "w-6 h-6" })
          }
        ) })
      ] })
    ] }) }),
    !hideSidebar && isOpen && /* @__PURE__ */ jsx273("div", { className: "md:hidden", children: /* @__PURE__ */ jsx273("div", { className: "px-2 pt-2 pb-3 space-y-1 sm:px-3", children: navItems.map((item) => {
      const Icon2 = item.icon;
      return /* @__PURE__ */ jsxs248(
        "a",
        {
          href: item.href,
          className: `block px-3 py-2 rounded-md text-base font-medium flex items-center ${currentPage === item.href ? "bg-brand-secondary text-white" : "text-nav-tint hover:text-gray-300"}`,
          children: [
            /* @__PURE__ */ jsx273(Icon2, { className: "w-4 h-4 mr-2" }),
            item.label
          ]
        },
        item.href
      );
    }) }) })
  ] });
}

// src/components/layout/AdminSidebar.tsx
import { useState as useState93 } from "react";
import Link3 from "next/link";
import { usePathname } from "next/navigation";
import { cn as cn7 } from "@rentalshop/ui";
import { Button as Button77 } from "@rentalshop/ui";
import {
  ChevronLeft as ChevronLeft5,
  ChevronRight as ChevronRight7,
  Home as Home6,
  Users as Users16,
  Package as Package25,
  Building2 as Building218,
  Settings as Settings13,
  CreditCard as CreditCard25,
  Clock as Clock32,
  Database as Database5,
  ShieldCheck as ShieldCheck2,
  FileText as FileText6,
  Store as Store10,
  LogOut as LogOut5,
  User as User27
} from "lucide-react";
import { jsx as jsx274, jsxs as jsxs249 } from "react/jsx-runtime";
var adminMenuItems = [
  {
    label: "Dashboard",
    href: "/dashboard",
    icon: Home6
  },
  {
    label: "Merchants",
    href: "/merchants",
    icon: Building218
  },
  {
    label: "Plans",
    href: "/plans",
    icon: Package25
  },
  {
    label: "Subscriptions",
    href: "/subscriptions",
    icon: Clock32
  },
  {
    label: "Payments",
    href: "/payments",
    icon: CreditCard25
  },
  {
    label: "Users",
    href: "/users",
    icon: Users16
  },
  {
    label: "System",
    href: "/system",
    icon: Settings13,
    subItems: [
      {
        label: "Backup Management",
        href: "/system/backup",
        icon: Database5
      },
      {
        label: "Data Integrity",
        href: "/system/integrity",
        icon: ShieldCheck2
      },
      {
        label: "Audit Logs",
        href: "/system/audit-logs",
        icon: FileText6
      }
    ]
  }
];
var AdminSidebar = ({
  user,
  isOpen = true,
  onToggle,
  onLogout,
  currentPath = "",
  isCollapsed = false,
  onCollapseToggle,
  notificationsCount = 0
}) => {
  const [expandedItems, setExpandedItems] = useState93([]);
  const pathname = usePathname();
  const toggleExpanded = (href) => {
    setExpandedItems(
      (prev) => prev.includes(href) ? prev.filter((item) => item !== href) : [...prev, href]
    );
  };
  const isActive = (href) => {
    if (href === "/dashboard") {
      return pathname === "/dashboard";
    }
    return pathname.startsWith(href);
  };
  const renderMenuItem = (item, level = 0) => {
    const hasSubItems = item.subItems && item.subItems.length > 0;
    const isExpanded = expandedItems.includes(item.href);
    const active = isActive(item.href);
    const Icon2 = item.icon;
    return /* @__PURE__ */ jsxs249("div", { children: [
      hasSubItems ? /* @__PURE__ */ jsxs249(
        Button77,
        {
          variant: "ghost",
          onClick: () => toggleExpanded(item.href),
          className: cn7(
            "flex items-center justify-between w-full px-3 py-2.5 text-sm font-normal rounded-lg transition-all duration-150 ease-out h-auto",
            active ? "text-blue-600 font-medium" : "text-text-primary hover:text-blue-600 hover:bg-bg-secondary"
          ),
          children: [
            /* @__PURE__ */ jsxs249("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx274(Icon2, { className: cn7(
                "w-4 h-4",
                active ? "text-blue-600" : "text-text-secondary"
              ) }),
              !isCollapsed && /* @__PURE__ */ jsx274("span", { children: item.label })
            ] }),
            !isCollapsed && /* @__PURE__ */ jsx274(ChevronRight7, { className: cn7(
              "w-4 h-4 transition-transform duration-200",
              isExpanded ? "rotate-90" : ""
            ) })
          ]
        }
      ) : /* @__PURE__ */ jsxs249(
        Link3,
        {
          href: item.href,
          className: cn7(
            "flex items-center justify-between px-3 py-2.5 text-sm font-normal rounded-lg transition-all duration-150 ease-out",
            active ? "text-blue-600 font-medium" : "text-text-primary hover:text-blue-600 hover:bg-bg-secondary"
          ),
          children: [
            /* @__PURE__ */ jsxs249("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx274(Icon2, { className: cn7(
                "w-4 h-4",
                active ? "text-blue-600" : "text-text-secondary"
              ) }),
              !isCollapsed && /* @__PURE__ */ jsx274("span", { children: item.label })
            ] }),
            !isCollapsed && item.badge && /* @__PURE__ */ jsx274("span", { className: "inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full", children: item.badge })
          ]
        }
      ),
      hasSubItems && isExpanded && !isCollapsed && /* @__PURE__ */ jsx274("div", { className: "ml-6 mt-1 space-y-1", children: item.subItems?.map((subItem) => {
        const SubIcon = subItem.icon;
        const subActive = isActive(subItem.href);
        return /* @__PURE__ */ jsxs249(
          Link3,
          {
            href: subItem.href,
            className: cn7(
              "flex items-center gap-2 px-4 py-2 text-sm font-normal rounded-lg transition-colors",
              subActive ? "text-blue-600 font-medium" : "text-text-primary hover:text-blue-600 hover:bg-bg-secondary"
            ),
            children: [
              /* @__PURE__ */ jsx274(SubIcon, { className: "w-4 h-4" }),
              /* @__PURE__ */ jsx274("span", { children: subItem.label })
            ]
          },
          subItem.href
        );
      }) })
    ] }, item.href);
  };
  return /* @__PURE__ */ jsxs249("div", { className: cn7(
    "flex flex-col h-full bg-bg-card border-r border-border shadow-sm transition-all duration-300",
    isCollapsed ? "w-16" : "w-64"
  ), children: [
    /* @__PURE__ */ jsxs249("div", { className: "flex items-center justify-between p-4 border-b border-border", children: [
      !isCollapsed && /* @__PURE__ */ jsxs249("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx274("div", { className: "w-8 h-8 bg-gradient-to-br from-brand-primary to-brand-secondary rounded-lg flex items-center justify-center shadow-sm", children: /* @__PURE__ */ jsx274(Store10, { className: "w-5 h-5 text-white" }) }),
        /* @__PURE__ */ jsxs249("div", { children: [
          /* @__PURE__ */ jsx274("h1", { className: "text-lg font-semibold text-text-primary", children: "RentalShop" }),
          /* @__PURE__ */ jsx274("p", { className: "text-xs text-text-secondary", children: "Admin" })
        ] })
      ] }),
      isCollapsed && /* @__PURE__ */ jsx274("div", { className: "w-8 h-8 bg-gradient-to-br from-brand-primary to-brand-secondary rounded-lg flex items-center justify-center mx-auto shadow-sm", children: /* @__PURE__ */ jsx274(Store10, { className: "w-5 h-5 text-white" }) }),
      /* @__PURE__ */ jsx274(
        Button77,
        {
          variant: "ghost",
          size: "icon",
          onClick: onCollapseToggle,
          className: "h-8 w-8 text-text-tertiary hover:text-text-primary",
          children: isCollapsed ? /* @__PURE__ */ jsx274(ChevronRight7, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx274(ChevronLeft5, { className: "h-4 w-4" })
        }
      )
    ] }),
    /* @__PURE__ */ jsx274("nav", { className: "flex-1 px-4 py-6 space-y-2 overflow-y-auto", children: adminMenuItems.map((item) => renderMenuItem(item)) }),
    /* @__PURE__ */ jsxs249("div", { className: "p-4 border-t border-border", children: [
      user && !isCollapsed && /* @__PURE__ */ jsxs249("div", { className: "flex items-center space-x-3 mb-4", children: [
        /* @__PURE__ */ jsx274("div", { className: "w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx274(User27, { className: "w-4 h-4 text-white" }) }),
        /* @__PURE__ */ jsxs249("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ jsx274("p", { className: "text-sm font-medium text-text-primary truncate", children: user.name || user.email }),
          /* @__PURE__ */ jsx274("p", { className: "text-xs text-text-tertiary truncate", children: user.role })
        ] })
      ] }),
      user && isCollapsed && /* @__PURE__ */ jsx274("div", { className: "flex flex-col items-center space-y-2", children: /* @__PURE__ */ jsx274("div", { className: "w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx274(User27, { className: "w-4 h-4 text-white" }) }) }),
      onLogout && /* @__PURE__ */ jsxs249(
        Button77,
        {
          variant: "ghost",
          onClick: onLogout,
          className: cn7(
            "w-full justify-start text-text-secondary hover:text-text-primary hover:bg-bg-secondary text-sm font-normal",
            isCollapsed && "justify-center px-2"
          ),
          children: [
            /* @__PURE__ */ jsx274(LogOut5, { className: "w-4 h-4" }),
            !isCollapsed && /* @__PURE__ */ jsx274("span", { className: "ml-2", children: "Logout" })
          ]
        }
      )
    ] })
  ] });
};

// src/components/layout/ClientSidebar.tsx
import { useState as useState94, useEffect as useEffect48 } from "react";
import Link4 from "next/link";
import { usePathname as usePathname2 } from "next/navigation";
import { cn as cn8 } from "@rentalshop/ui";
import { Button as Button78 } from "@rentalshop/ui";
import { useCommonTranslations as useCommonTranslations23 } from "@rentalshop/hooks";
import {
  ChevronLeft as ChevronLeft6,
  ChevronRight as ChevronRight8,
  Home as Home7,
  Users as Users17,
  Package as Package26,
  ShoppingCart as ShoppingCart13,
  Building2 as Building219,
  Settings as Settings14,
  Calendar as Calendar35,
  Tag as Tag6,
  User as User28,
  LogOut as LogOut6,
  Bell as Bell7,
  ChevronDown as ChevronDown9
} from "lucide-react";
import { jsx as jsx275, jsxs as jsxs250 } from "react/jsx-runtime";
var getClientMenuItems = (t2) => [
  {
    label: t2("navigation.dashboard"),
    href: "/dashboard",
    icon: Home7
  },
  {
    label: t2("navigation.orders"),
    href: "/orders",
    icon: ShoppingCart13
  },
  {
    label: t2("navigation.products"),
    href: "/products",
    icon: Package26,
    subItems: [
      {
        label: t2("navigation.allProducts"),
        href: "/products",
        icon: Package26
      },
      {
        label: t2("navigation.categories"),
        href: "/categories",
        icon: Tag6
      }
    ]
  },
  {
    label: t2("navigation.customers"),
    href: "/customers",
    icon: Users17
  },
  {
    label: t2("navigation.users"),
    href: "/users",
    icon: User28
  },
  {
    label: t2("navigation.outlets"),
    href: "/outlets",
    icon: Building219
  },
  {
    label: t2("navigation.calendar"),
    href: "/calendar",
    icon: Calendar35
  },
  {
    label: t2("navigation.settings"),
    href: "/settings",
    icon: Settings14
  }
];
var ClientSidebar = ({
  user,
  isOpen = true,
  onToggle,
  onLogout,
  currentPath = "",
  isCollapsed = false,
  onCollapseToggle,
  notificationsCount = 0,
  cartItemsCount = 0,
  onNavigate,
  onPrefetch
}) => {
  const [expandedItems, setExpandedItems] = useState94([]);
  const [hoveredTab, setHoveredTab] = useState94(null);
  const [clickedTab, setClickedTab] = useState94(null);
  const [localCurrentPage, setLocalCurrentPage] = useState94(currentPath);
  const pathname = usePathname2();
  const t2 = useCommonTranslations23();
  const filterMenuItemsByRole = (items, userRole) => {
    if (!userRole)
      return items;
    if (userRole === "OUTLET_ADMIN") {
      return items.filter(
        (item) => item.href !== "/outlets" && item.href !== "/subscriptions" && item.href !== "/plans" && item.href !== "/payments"
      );
    } else if (userRole === "OUTLET_STAFF") {
      return items.filter(
        (item) => item.href !== "/users" && item.href !== "/outlets" && item.href !== "/subscriptions" && item.href !== "/plans" && item.href !== "/payments"
      );
    }
    return items;
  };
  const menuItems2 = filterMenuItemsByRole(getClientMenuItems(t2), user?.role);
  useEffect48(() => {
    setLocalCurrentPage(currentPath);
  }, [currentPath]);
  useEffect48(() => {
    if (onPrefetch) {
      menuItems2.forEach((item) => {
        onPrefetch(item.href);
      });
    }
  }, [menuItems2, onPrefetch]);
  useEffect48(() => {
    const handleClickOutside = (event) => {
      const target = event.target;
      const isClickingNavItem = target.closest(".nav-item");
      const isClickingSubmenu = target.closest("[data-submenu]");
      if (expandedItems.length > 0 && !isClickingNavItem && !isClickingSubmenu) {
        setExpandedItems([]);
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, [expandedItems]);
  const toggleExpanded = (href) => {
    setExpandedItems(
      (prev) => prev.includes(href) ? prev.filter((item) => item !== href) : [...prev, href]
    );
  };
  const isActive = (href) => {
    if (href === "/dashboard") {
      return localCurrentPage === "/dashboard";
    }
    return localCurrentPage.startsWith(href);
  };
  const handleTabClick = (href) => {
    setLocalCurrentPage(href);
    setClickedTab(href);
    setTimeout(() => setClickedTab(null), 200);
    if (onNavigate) {
      onNavigate(href);
    }
  };
  const handleTabHover = (href) => {
    setHoveredTab(href);
    if (onPrefetch) {
      onPrefetch(href);
    }
  };
  const renderMenuItem = (item, level = 0) => {
    const hasSubItems = item.subItems && item.subItems.length > 0;
    const isExpanded = expandedItems.includes(item.href);
    const active = isActive(item.href);
    const isHovered = hoveredTab === item.href;
    const Icon2 = item.icon;
    return /* @__PURE__ */ jsxs250("div", { className: "relative", children: [
      hasSubItems ? /* @__PURE__ */ jsxs250(
        Button78,
        {
          variant: "ghost",
          onClick: (e2) => {
            e2.preventDefault();
            e2.stopPropagation();
            toggleExpanded(item.href);
          },
          onMouseEnter: () => handleTabHover(item.href),
          onMouseLeave: () => setHoveredTab(null),
          className: cn8(
            "nav-item flex items-center justify-between w-full px-3 py-2.5 text-sm font-normal rounded-lg transition-all duration-150 ease-out relative",
            active ? "text-blue-600 font-medium" : "text-text-primary hover:text-blue-600 hover:bg-bg-secondary",
            isHovered ? "scale-[1.02]" : "",
            clickedTab === item.href ? "scale-[0.98]" : ""
          ),
          children: [
            /* @__PURE__ */ jsxs250("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx275(Icon2, { className: cn8(
                "w-4 h-4",
                active ? "text-blue-600" : "text-text-secondary"
              ) }),
              !isCollapsed && /* @__PURE__ */ jsx275("span", { children: item.label })
            ] }),
            !isCollapsed && /* @__PURE__ */ jsx275(ChevronDown9, { className: cn8(
              "w-4 h-4 transition-transform duration-200",
              isExpanded ? "rotate-180" : ""
            ) }),
            isHovered && !active && /* @__PURE__ */ jsx275("div", { className: "absolute inset-0 bg-bg-secondary/50 rounded-lg transition-all duration-200" })
          ]
        }
      ) : /* @__PURE__ */ jsxs250(
        Button78,
        {
          variant: "ghost",
          onClick: (e2) => {
            e2.preventDefault();
            e2.stopPropagation();
            handleTabClick(item.href);
          },
          onMouseEnter: () => handleTabHover(item.href),
          onMouseLeave: () => setHoveredTab(null),
          className: cn8(
            "nav-item flex items-center justify-between w-full px-3 py-2.5 text-sm font-normal rounded-lg transition-all duration-150 ease-out relative",
            active ? "text-blue-600 font-medium" : "text-text-primary hover:text-blue-600 hover:bg-bg-secondary",
            isHovered ? "scale-[1.02]" : "",
            clickedTab === item.href ? "scale-[0.98]" : ""
          ),
          children: [
            /* @__PURE__ */ jsxs250("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsx275(Icon2, { className: cn8(
                "w-4 h-4",
                active ? "text-blue-600" : "text-text-secondary"
              ) }),
              !isCollapsed && /* @__PURE__ */ jsx275("span", { children: item.label })
            ] }),
            !isCollapsed && item.badge && /* @__PURE__ */ jsx275("span", { className: "inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full", children: item.badge }),
            isHovered && !active && /* @__PURE__ */ jsx275("div", { className: "absolute inset-0 bg-bg-secondary/50 rounded-lg transition-all duration-200" })
          ]
        }
      ),
      hasSubItems && isExpanded && !isCollapsed && /* @__PURE__ */ jsx275("div", { className: "ml-6 mt-1 space-y-1", "data-submenu": "true", children: item.subItems?.map((subItem) => {
        const SubIcon = subItem.icon;
        const subActive = isActive(subItem.href);
        return /* @__PURE__ */ jsxs250(
          Button78,
          {
            variant: "ghost",
            onClick: (e2) => {
              e2.preventDefault();
              e2.stopPropagation();
              handleTabClick(subItem.href);
              setTimeout(() => {
                setExpandedItems([]);
              }, 100);
            },
            className: cn8(
              "w-full text-left px-4 py-2 text-sm font-normal flex items-center gap-2 hover:bg-bg-secondary transition-colors rounded-lg justify-start h-auto",
              subActive ? "text-blue-600 font-medium" : "text-text-primary hover:text-blue-600"
            ),
            children: [
              /* @__PURE__ */ jsx275(SubIcon, { className: "w-4 h-4" }),
              subItem.label
            ]
          },
          subItem.href
        );
      }) })
    ] }, item.href);
  };
  return /* @__PURE__ */ jsxs250("div", { className: cn8(
    "flex flex-col h-full bg-bg-card border-r border-border shadow-sm transition-all duration-300",
    isCollapsed ? "w-16" : "w-64"
  ), children: [
    /* @__PURE__ */ jsx275("div", { className: "hidden", children: menuItems2.map((item) => /* @__PURE__ */ jsx275(Link4, { href: item.href }, item.href)) }),
    /* @__PURE__ */ jsxs250("div", { className: "flex items-center justify-between p-4 border-b border-border", children: [
      !isCollapsed && /* @__PURE__ */ jsxs250("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsx275("div", { className: "w-8 h-8 bg-gradient-to-br from-brand-primary to-brand-secondary rounded-lg flex items-center justify-center shadow-sm", children: /* @__PURE__ */ jsx275(Building219, { className: "w-5 h-5 text-white" }) }),
        /* @__PURE__ */ jsx275("div", { children: /* @__PURE__ */ jsx275("h1", { className: "text-lg font-semibold text-text-primary", children: "RentalShop" }) })
      ] }),
      isCollapsed && /* @__PURE__ */ jsx275("div", { className: "w-8 h-8 bg-gradient-to-br from-brand-primary to-brand-secondary rounded-lg flex items-center justify-center mx-auto shadow-sm", children: /* @__PURE__ */ jsx275(Building219, { className: "w-5 h-5 text-white" }) }),
      /* @__PURE__ */ jsx275(
        Button78,
        {
          variant: "ghost",
          size: "icon",
          onClick: onCollapseToggle,
          className: "h-8 w-8 text-text-tertiary hover:text-text-primary",
          children: isCollapsed ? /* @__PURE__ */ jsx275(ChevronRight8, { className: "h-4 w-4" }) : /* @__PURE__ */ jsx275(ChevronLeft6, { className: "h-4 w-4" })
        }
      )
    ] }),
    /* @__PURE__ */ jsx275("nav", { className: "flex-1 px-4 py-6 space-y-2 overflow-y-auto", children: menuItems2.map((item) => renderMenuItem(item)) }),
    /* @__PURE__ */ jsxs250("div", { className: "p-4 border-t border-border", children: [
      user && !isCollapsed && /* @__PURE__ */ jsxs250("div", { className: "flex items-center space-x-3 mb-4", children: [
        /* @__PURE__ */ jsx275("div", { className: "w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx275(User28, { className: "w-4 h-4 text-white" }) }),
        /* @__PURE__ */ jsxs250("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ jsx275("p", { className: "text-sm font-medium text-text-primary truncate", children: user.name || user.email }),
          /* @__PURE__ */ jsx275("p", { className: "text-xs text-text-tertiary truncate", children: user.role })
        ] }),
        /* @__PURE__ */ jsx275("div", { className: "flex items-center space-x-2", children: cartItemsCount > 0 && /* @__PURE__ */ jsxs250("div", { className: "relative", children: [
          /* @__PURE__ */ jsx275(ShoppingCart13, { className: "w-4 h-4 text-text-tertiary" }),
          /* @__PURE__ */ jsx275("span", { className: "absolute -top-1 -right-1 w-3 h-3 bg-action-primary rounded-full text-xs text-white flex items-center justify-center", children: cartItemsCount })
        ] }) })
      ] }),
      user && isCollapsed && /* @__PURE__ */ jsxs250("div", { className: "flex flex-col items-center space-y-2", children: [
        /* @__PURE__ */ jsx275("div", { className: "w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx275(User28, { className: "w-4 h-4 text-white" }) }),
        /* @__PURE__ */ jsxs250("div", { className: "flex items-center space-x-1", children: [
          notificationsCount > 0 && /* @__PURE__ */ jsxs250("div", { className: "relative", children: [
            /* @__PURE__ */ jsx275(Bell7, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsx275("span", { className: "absolute -top-1 -right-1 w-3 h-3 bg-action-danger rounded-full text-xs text-white flex items-center justify-center", children: notificationsCount })
          ] }),
          cartItemsCount > 0 && /* @__PURE__ */ jsxs250("div", { className: "relative", children: [
            /* @__PURE__ */ jsx275(ShoppingCart13, { className: "w-4 h-4 text-text-tertiary" }),
            /* @__PURE__ */ jsx275("span", { className: "absolute -top-1 -right-1 w-3 h-3 bg-action-primary rounded-full text-xs text-white flex items-center justify-center", children: cartItemsCount })
          ] })
        ] })
      ] }),
      onLogout && /* @__PURE__ */ jsxs250(
        Button78,
        {
          variant: "ghost",
          onClick: onLogout,
          className: cn8(
            "w-full justify-start text-text-secondary hover:text-text-primary hover:bg-bg-secondary text-sm font-normal",
            isCollapsed && "justify-center px-2"
          ),
          children: [
            /* @__PURE__ */ jsx275(LogOut6, { className: "w-4 h-4" }),
            !isCollapsed && /* @__PURE__ */ jsx275("span", { className: "ml-2", children: t2("navigation.logout") })
          ]
        }
      )
    ] })
  ] });
};

// src/components/layout/layout.tsx
import { useState as useState95 } from "react";
import { Menu as Menu4 } from "lucide-react";
import { Button as Button79, Sidebar as Sidebar2 } from "@rentalshop/ui";
import { jsx as jsx276, jsxs as jsxs251 } from "react/jsx-runtime";
function Layout({
  variant = "client",
  currentPage,
  children,
  user,
  onLogout = () => {
  },
  hideSidebar = false,
  allowCollapse = true
}) {
  const [sidebarOpen, setSidebarOpen] = useState95(false);
  const [sidebarCollapsed, setSidebarCollapsed] = useState95(false);
  const handleCollapseToggle = () => {
    setSidebarCollapsed(!sidebarCollapsed);
  };
  return /* @__PURE__ */ jsxs251("div", { className: "min-h-screen bg-bg-primary", children: [
    !hideSidebar && /* @__PURE__ */ jsx276(
      Sidebar2,
      {
        user,
        isOpen: sidebarOpen,
        onToggle: () => setSidebarOpen(!sidebarOpen),
        onLogout,
        currentPath: currentPage || "",
        isCollapsed: sidebarCollapsed,
        onCollapseToggle: allowCollapse ? handleCollapseToggle : void 0
      }
    ),
    /* @__PURE__ */ jsxs251(
      "div",
      {
        className: `${!hideSidebar ? "transition-all duration-300 ease-in-out" : ""}`,
        style: { marginLeft: hideSidebar ? "0" : sidebarCollapsed ? "4rem" : "16rem" },
        children: [
          /* @__PURE__ */ jsx276("div", { className: "bg-bg-card shadow-sm border-b border-border", children: /* @__PURE__ */ jsxs251("div", { className: "flex items-center justify-between h-16 px-4", children: [
            /* @__PURE__ */ jsxs251("div", { className: "flex items-center", children: [
              !hideSidebar && /* @__PURE__ */ jsx276(
                Button79,
                {
                  variant: "ghost",
                  size: "sm",
                  onClick: () => setSidebarOpen(true),
                  className: "md:hidden mr-2",
                  children: /* @__PURE__ */ jsx276(Menu4, { className: "w-5 h-5" })
                }
              ),
              /* @__PURE__ */ jsx276("h2", { className: "text-lg font-semibold text-text-primary", children: variant === "admin" ? "Admin Panel" : "Rental Shop" })
            ] }),
            /* @__PURE__ */ jsx276("div", { className: "flex items-center space-x-4" })
          ] }) }),
          /* @__PURE__ */ jsx276("main", { className: "p-6", children })
        ]
      }
    )
  ] });
}

// src/components/layout/SubscriptionStatus.tsx
import {
  AlertTriangle as AlertTriangle23,
  CheckCircle as CheckCircle34,
  Clock as Clock33,
  CreditCard as CreditCard26,
  TrendingUp as TrendingUp10,
  Zap as Zap3
} from "lucide-react";
import { useSubscriptionStatusInfo as useSubscriptionStatusInfo2 } from "@rentalshop/hooks";
import { jsx as jsx277, jsxs as jsxs252 } from "react/jsx-runtime";
function SubscriptionStatus({ showDetails = false, className = "", currentUserRole }) {
  const {
    hasSubscription,
    subscription,
    status,
    isTrial,
    isActive,
    isExpired,
    isExpiringSoon,
    daysUntilExpiry,
    planName,
    loading,
    error: error2,
    statusMessage
    // Use statusReason from API
  } = useSubscriptionStatusInfo2();
  if (loading) {
    return /* @__PURE__ */ jsx277("div", { className: `animate-pulse ${className}`, children: /* @__PURE__ */ jsx277("div", { className: "h-6 bg-gray-200 rounded w-24" }) });
  }
  if (error2 || !hasSubscription) {
    return /* @__PURE__ */ jsx277("div", { className, children: (currentUserRole === "ADMIN" || currentUserRole === "MERCHANT") && /* @__PURE__ */ jsxs252(
      Button2,
      {
        variant: "outline",
        size: "sm",
        onClick: () => window.location.href = "/plans",
        children: [
          /* @__PURE__ */ jsx277(CreditCard26, { className: "h-4 w-4 mr-2" }),
          "Get Started"
        ]
      }
    ) });
  }
  const getStatusIcon5 = () => {
    switch (status) {
      case "TRIAL":
        return /* @__PURE__ */ jsx277(Zap3, { className: "h-4 w-4" });
      case "ACTIVE":
        return /* @__PURE__ */ jsx277(CheckCircle34, { className: "h-4 w-4" });
      case "EXPIRED":
        return /* @__PURE__ */ jsx277(AlertTriangle23, { className: "h-4 w-4" });
      case "CANCELED":
        return /* @__PURE__ */ jsx277(AlertTriangle23, { className: "h-4 w-4" });
      case "PAST_DUE":
        return /* @__PURE__ */ jsx277(CreditCard26, { className: "h-4 w-4" });
      case "PAUSED":
        return /* @__PURE__ */ jsx277(Clock33, { className: "h-4 w-4" });
      default:
        return /* @__PURE__ */ jsx277(Clock33, { className: "h-4 w-4" });
    }
  };
  const getStatusVariant = () => {
    switch (status) {
      case "ACTIVE":
        return "success";
      case "TRIAL":
        return "warning";
      case "EXPIRED":
        return "destructive";
      case "CANCELED":
        return "destructive";
      case "PAST_DUE":
        return "warning";
      case "PAUSED":
        return "secondary";
      default:
        return "secondary";
    }
  };
  const getStatusText = () => {
    if (statusMessage)
      return statusMessage;
    switch (status) {
      case "ACTIVE":
        return isExpiringSoon ? `Expires in ${daysUntilExpiry} days` : "Active";
      case "TRIAL":
        return `Trial (${daysUntilExpiry} days left)`;
      case "EXPIRED":
        return "Expired";
      case "CANCELED":
        return "Canceled";
      case "PAST_DUE":
        return "Payment Past Due";
      case "PAUSED":
        return "Paused";
      default:
        return status || "Unknown";
    }
  };
  const getBorderColor = () => {
    switch (status) {
      case "ACTIVE":
        return isExpiringSoon ? "border-orange-500" : "border-green-500";
      case "TRIAL":
        return "border-yellow-500";
      case "EXPIRED":
        return "border-red-500";
      case "CANCELED":
        return "border-red-500";
      case "PAST_DUE":
        return "border-orange-500";
      case "PAUSED":
        return "border-gray-500";
      default:
        return "border-gray-500";
    }
  };
  const shouldShowAction = status === "EXPIRED" || status === "CANCELED" || status === "PAST_DUE" || isExpiringSoon;
  if (showDetails) {
    return /* @__PURE__ */ jsx277(Card, { className: `border-l-4 ${getBorderColor()} ${className}`, children: /* @__PURE__ */ jsx277(CardContent, { className: "p-4", children: /* @__PURE__ */ jsxs252("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs252("div", { className: "flex items-center space-x-3", children: [
        getStatusIcon5(),
        /* @__PURE__ */ jsxs252("div", { children: [
          /* @__PURE__ */ jsx277("div", { className: "font-medium text-gray-900", children: planName }),
          /* @__PURE__ */ jsx277("div", { className: "text-sm text-gray-600", children: getStatusText() })
        ] })
      ] }),
      /* @__PURE__ */ jsxs252("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsx277(StatusBadge, { status, type: "subscription", variant: "solid" }),
        (currentUserRole === "ADMIN" || currentUserRole === "MERCHANT") && shouldShowAction && /* @__PURE__ */ jsxs252(
          Button2,
          {
            size: "sm",
            onClick: () => window.location.href = "/plans",
            children: [
              /* @__PURE__ */ jsx277(TrendingUp10, { className: "h-4 w-4 mr-2" }),
              status === "EXPIRED" || status === "CANCELED" ? "Renew" : "Upgrade"
            ]
          }
        )
      ] })
    ] }) }) });
  }
  return /* @__PURE__ */ jsxs252("div", { className: `flex items-center space-x-2 ${className}`, children: [
    getStatusIcon5(),
    /* @__PURE__ */ jsxs252("span", { className: "font-medium", children: [
      planName,
      " - ",
      getStatusText()
    ] }),
    /* @__PURE__ */ jsx277(StatusBadge, { status, type: "subscription", variant: "solid", size: "sm" }),
    (currentUserRole === "ADMIN" || currentUserRole === "MERCHANT") && shouldShowAction && /* @__PURE__ */ jsxs252(
      Button2,
      {
        variant: "outline",
        size: "sm",
        onClick: () => window.location.href = "/plans",
        children: [
          /* @__PURE__ */ jsx277(TrendingUp10, { className: "h-4 w-4 mr-2" }),
          status === "EXPIRED" || status === "CANCELED" ? "Renew" : "Upgrade"
        ]
      }
    )
  ] });
}
export {
  AccountManagementCard,
  AccountSection,
  ActionButton,
  ActivityFeed,
  AddCategoryDialog,
  AddCustomerDialog,
  AddCustomerForm,
  AddOutletDialog,
  AddOutletForm,
  AddUserDialog,
  AdminPageHeader,
  AdminSidebar,
  AdminStatusBadge,
  Alert,
  AlertDescription,
  AlertTitle,
  ApiEndpointCard_default as ApiEndpointCard,
  ApiEndpointsGrid,
  ApiKeyCard_default as ApiKeyCard,
  ApiKeysGrid,
  AuditLogDetail,
  AuditLogViewer,
  AuditLogViewerSimple,
  BackupCard_default as BackupCard,
  BackupGrid,
  BackupScheduleCard_default as BackupScheduleCard,
  BackupSchedulesGrid,
  Badge,
  BillingCycleDetailDialog,
  BillingCycleForm,
  BillingCycleTable,
  Breadcrumb,
  Button2 as Button,
  ButtonClean,
  ButtonColorful,
  CalendarEventLoading,
  CalendarGrid,
  CalendarHeader,
  CalendarLoading,
  CalendarNavigation,
  CalendarSkeleton,
  CalendarStats,
  Calendars,
  Card,
  CardClean,
  CardColorful,
  CardContent,
  CardContentClean,
  CardContentColorful,
  CardDescription,
  CardHeader,
  CardHeaderClean,
  CardHeaderColorful,
  CardSkeleton,
  CardTitle,
  CardTitleClean,
  CardTitleColorful,
  Categories,
  CategoriesLoading,
  CategoryActions,
  CategoryCard,
  CategoryDetailLoading,
  CategoryFilters,
  CategoryForm,
  CategoryFormContent,
  CategoryGrid,
  CategoryHeader,
  CategorySearch,
  CategoryTable,
  CategoryView,
  ChangePasswordDialog,
  ClientSidebar,
  CollectionReturnModal,
  ColorfulList,
  ColorfulQuickActions,
  ColorfulTodaysFocus,
  ConfirmationDialog,
  ConfirmationDialogWithReason,
  CreateOrderForm,
  CurrencyContext,
  CurrencyProvider,
  CurrencySection,
  CurrencySelector,
  CustomerActions,
  CustomerDetailDialog,
  CustomerDetailLoading,
  CustomerForm,
  CustomerHeader,
  CustomerInfoCard,
  CustomerOrdersDialog,
  CustomerOrdersSummaryCard,
  CustomerPageHeader,
  CustomerSearch,
  CustomerStats,
  CustomerTable,
  Customers_default as Customers,
  CustomersLoading,
  Dashboard_default as Dashboard,
  DashboardActions,
  DashboardCharts,
  DashboardFocus,
  DashboardFocusLoading,
  DashboardHeader,
  DashboardLoading,
  DashboardNavigation,
  DashboardStats,
  DashboardWrapper,
  DashboardWrapperClean,
  DashboardWrapperColorful,
  DataTable,
  DateRangePicker,
  DeleteAccountDialog,
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
  DropdownMenu,
  DropdownMenuCheckboxItem,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuPortal,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuTrigger,
  EditCustomerForm,
  EmptyState7 as EmptyState,
  ForgetPasswordForm_default as ForgetPasswordForm,
  FormField,
  FormSkeleton,
  GridSkeleton,
  HeaderSkeleton,
  IncomeChart,
  Input,
  Label2 as Label,
  LanguageSection,
  LanguageSwitcher,
  Layout,
  LimitInput,
  LoadingIndicator,
  LoadingInline,
  LogEntryCard_default as LogEntryCard,
  LogFilters,
  LoginForm_default as LoginForm,
  LogsList,
  MaintenanceModeToggle,
  MaintenanceTaskCard_default as MaintenanceTaskCard,
  MaintenanceTasksGrid,
  MaintenanceWindowCard,
  ManualRenewalModal,
  MerchantDetail,
  MerchantRegistrationForm,
  MerchantSection,
  MerchantSelect,
  MerchantSubscriptionSection,
  Merchants_default as Merchants,
  MetricCard,
  Money,
  MoneyBold,
  MoneyLarge,
  Navigation,
  NavigationSkeleton,
  NumericInput,
  NumericInputDemo,
  OrderActions,
  OrderChart,
  OrderDateRangeFilter,
  OrderDetail,
  OrderDetailLoading,
  OrderFilters,
  OrderForm,
  OrderHeader,
  OrderPagination,
  OrderQuickFilters,
  OrderStats,
  OrderSummary,
  OrderTable,
  Orders_default as Orders,
  OrdersList,
  OrdersLoading,
  OutletDetailLoading,
  OutletFilters,
  OutletGrid,
  OutletHeader,
  OutletPagination,
  OutletSearch,
  OutletSection,
  OutletSelect,
  OutletTable,
  Outlets,
  OutletsLoading,
  PageContent4 as PageContent,
  PageHeader,
  PageSection,
  PageTitle,
  PageWrapper4 as PageWrapper,
  Pagination,
  PaginationSkeleton,
  PaymentDetailDialog,
  PaymentForm,
  PaymentHistoryTable,
  PaymentTable,
  PerformanceAlertCard_default as PerformanceAlertCard,
  PerformanceAlertsList,
  PerformanceMetricCard_default as PerformanceMetricCard,
  PerformanceMetricsGrid,
  PieChart,
  PlanActions,
  PlanCard,
  PlanDetailModal,
  PlanDialog,
  PlanFilters,
  PlanForm,
  PlanSelection,
  PlanSelectionModal,
  PlanStats,
  PlanTable,
  PriceInput,
  ProductActions,
  ProductAddDialog,
  ProductAddForm,
  ProductAvailabilityAsyncDisplay,
  ProductAvailabilityBadge,
  ProductAvailabilityWarning,
  ProductCard,
  ProductDetailMultiLayout as ProductDetail,
  ProductDetailList,
  ProductDetailLoading,
  ProductEdit,
  ProductFilters,
  ProductForm,
  ProductGrid,
  ProductHeader,
  ProductOrdersDialog,
  ProductOrdersView,
  ProductPageHeader,
  ProductTable,
  Products_default as Products,
  ProductsLoading,
  ProfileSection,
  QuickActions,
  QuickActionsGrid,
  RadioGroup,
  RadioGroupItem,
  RecentOrders,
  RegisterForm_default as RegisterForm,
  RentalPeriodSelector2 as RentalPeriodSelector,
  RestrictedAction,
  RestrictedButton,
  RestrictedSection,
  RoleSelect,
  SearchAndFilters,
  SearchInput,
  SearchSkeleton,
  SearchableCountrySelect,
  SearchableSelect,
  SecurityCard,
  SecurityEventCard_default as SecurityEventCard,
  SecurityEventsList,
  SecurityMetricsCard,
  SecuritySection,
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
  Separator2 as Separator,
  ServerTopNavigation,
  SettingsComponent as Settings,
  ChangePasswordDialog2 as SettingsChangePasswordDialog,
  Settings_default as SettingsComponent,
  SettingsForm,
  SettingsLayout,
  SettingsNavigation,
  SettingsLayout2 as SettingsPageLayout,
  ShopDetailLoading,
  ShopsLoading,
  Sidebar,
  SidebarSkeleton,
  SimpleList,
  Skeleton,
  StatsOverview,
  StatsSkeleton,
  StatusBadge,
  SubscriptionActivityTimeline,
  SubscriptionChangePlanDialog,
  SubscriptionEditDialog,
  SubscriptionForm,
  SubscriptionFormSimple,
  SubscriptionHistoryDialog,
  SubscriptionList,
  SubscriptionPeriodCard,
  SubscriptionPreviewPage,
  SubscriptionSection,
  SubscriptionStatus,
  SubscriptionStatusBanner,
  SubscriptionStatusCard,
  Switch,
  SystemHealth,
  SystemStatus,
  Table,
  TableBody,
  TableCaption,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
  TableRowSkeleton,
  TableSkeleton,
  Textarea,
  TimePeriodSelector,
  Toast,
  ToastContainer,
  ToastProvider,
  TodaysFocus,
  TopCustomers,
  TopNavigation,
  TopProducts,
  UpgradeTrialModal,
  UserActions,
  UserCard,
  UserDetailDialog,
  UserDisplayInfo,
  UserFilters,
  UserForm,
  UserGrid,
  UserHeader,
  UserPageHeader,
  UserRow,
  UserTable,
  Users_default as Users,
  UsersLoading,
  badgeVariants,
  buttonVariants,
  cn2 as cn,
  emailSettingsFields,
  formatCurrency6 as formatCurrency,
  formatDate,
  generalSettingsFields,
  notificationSettingsFields,
  securitySettingsFields,
  settingsTabs,
  systemSettingsFields,
  useCurrency2 as useCurrency,
  useFormatCurrency,
  useToast,
  useToasts,
  validateConfirmPassword,
  validateEmail,
  validateName,
  validatePassword,
  validatePhone,
  validateUserCreateInput,
  validateUserUpdateInput,
  withCurrency
};
/*! Bundled license information:

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.development.js:
  (** @license React v16.13.1
   * react-is.development.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
//# sourceMappingURL=index.mjs.map